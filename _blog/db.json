{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/hueman/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/hueman/source/js/insight.js","path":"js/insight.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/css/images/logo-header.png","path":"css/images/logo-header.png","modified":1,"renderable":1},{"_id":"themes/hueman/source/css/images/opacity-10.png","path":"css/images/opacity-10.png","modified":1,"renderable":1},{"_id":"themes/hueman/source/css/images/s-left.png","path":"css/images/s-left.png","modified":1,"renderable":1},{"_id":"themes/hueman/source/css/images/thumb-default-small.png","path":"css/images/thumb-default-small.png","modified":1,"renderable":1},{"_id":"themes/hueman/source/css/images/thumb-default.png","path":"css/images/thumb-default.png","modified":1,"renderable":1},{"_id":"themes/hueman/source/css/images/vzs.jpeg","path":"css/images/vzs.jpeg","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/justified-gallery/jquery.justifiedGallery.min.js","path":"libs/justified-gallery/jquery.justifiedGallery.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/justified-gallery/justifiedGallery.min.css","path":"libs/justified-gallery/justifiedGallery.min.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/source-code-pro/styles.css","path":"libs/source-code-pro/styles.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/styles.css","path":"libs/titillium-web/styles.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/css/font-awesome.css","path":"libs/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/css/font-awesome.min.css","path":"libs/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/FontAwesome.otf","path":"libs/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.eot","path":"libs/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.svg","path":"libs/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.ttf","path":"libs/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.woff","path":"libs/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.woff2","path":"libs/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/jquery/3.5.0/jquery.min.js","path":"libs/jquery/3.5.0/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.css","path":"libs/lightgallery/css/lg-fb-comment-box.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.css.map","path":"libs/lightgallery/css/lg-fb-comment-box.css.map","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.min.css","path":"libs/lightgallery/css/lg-fb-comment-box.min.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.css","path":"libs/lightgallery/css/lg-transitions.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.css.map","path":"libs/lightgallery/css/lg-transitions.css.map","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.min.css","path":"libs/lightgallery/css/lg-transitions.min.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.css","path":"libs/lightgallery/css/lightgallery.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.css.map","path":"libs/lightgallery/css/lightgallery.css.map","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.min.css","path":"libs/lightgallery/css/lightgallery.min.css","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.eot","path":"libs/lightgallery/fonts/lg.eot","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.svg","path":"libs/lightgallery/fonts/lg.svg","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.ttf","path":"libs/lightgallery/fonts/lg.ttf","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.woff","path":"libs/lightgallery/fonts/lg.woff","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/img/loading.gif","path":"libs/lightgallery/img/loading.gif","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/img/video-play.png","path":"libs/lightgallery/img/video-play.png","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/img/vimeo-play.png","path":"libs/lightgallery/img/vimeo-play.png","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/img/youtube-play.png","path":"libs/lightgallery/img/youtube-play.png","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-autoplay.js","path":"libs/lightgallery/js/lg-autoplay.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-autoplay.min.js","path":"libs/lightgallery/js/lg-autoplay.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-fullscreen.js","path":"libs/lightgallery/js/lg-fullscreen.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-fullscreen.min.js","path":"libs/lightgallery/js/lg-fullscreen.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-hash.js","path":"libs/lightgallery/js/lg-hash.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-hash.min.js","path":"libs/lightgallery/js/lg-hash.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-pager.js","path":"libs/lightgallery/js/lg-pager.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-pager.min.js","path":"libs/lightgallery/js/lg-pager.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-share.js","path":"libs/lightgallery/js/lg-share.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-share.min.js","path":"libs/lightgallery/js/lg-share.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-thumbnail.js","path":"libs/lightgallery/js/lg-thumbnail.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-thumbnail.min.js","path":"libs/lightgallery/js/lg-thumbnail.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-video.js","path":"libs/lightgallery/js/lg-video.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-video.min.js","path":"libs/lightgallery/js/lg-video.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-zoom.js","path":"libs/lightgallery/js/lg-zoom.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-zoom.min.js","path":"libs/lightgallery/js/lg-zoom.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lightgallery.js","path":"libs/lightgallery/js/lightgallery.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/lightgallery/js/lightgallery.min.js","path":"libs/lightgallery/js/lightgallery.min.js","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","path":"libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","path":"libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcSo_WB_cotcEMUw1LsIE8mM.woff2","path":"libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcSo_WB_cotcEMUw1LsIE8mM.woff2","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcZSnX671uNZIV63UdXh3Mg0.woff2","path":"libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcZSnX671uNZIV63UdXh3Mg0.woff2","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr4-67659ICLY8bMrYhtePPA.woff2","path":"libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr4-67659ICLY8bMrYhtePPA.woff2","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr46gJz9aNFrmnwBdd69aqzY.woff2","path":"libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr46gJz9aNFrmnwBdd69aqzY.woff2","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr9INifKjd1RJ3NxxEi9Cy2w.woff2","path":"libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr9INifKjd1RJ3NxxEi9Cy2w.woff2","modified":1,"renderable":1},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr_SNRT0fZ5CX-AqRkMYgJJo.woff2","path":"libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr_SNRT0fZ5CX-AqRkMYgJJo.woff2","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/dailynotes.md","hash":"8422648771294018f9828a9ad834b507488eace8","modified":1620442562684},{"_id":"source/_posts/editer.md","hash":"4849ada8f171a8d09229f890e1598883210c3896","modified":1620442562684},{"_id":"source/_posts/japaneseLearning.md","hash":"4d535784bdd22915711f27e6d65fac65a232c58a","modified":1620442562684},{"_id":"source/_posts/makeThingsEasyAndEnjoy.md","hash":"26e2ab78565a499f10d228126ecc585e8dddab0b","modified":1621321784995},{"_id":"source/_posts/newThings.md","hash":"14279888135aff3ed82272f372101d90c654f8d3","modified":1620442562684},{"_id":"source/_posts/notes/net.md","hash":"bdf0bffd419bc3cb598116934876afb32689778b","modified":1620442562684},{"_id":"source/_posts/notes/note.md","hash":"e246f67037b6e74c2df50449a2efe0feca7e125d","modified":1620442562684},{"_id":"source/_posts/notes/noteOfFmtData.md","hash":"a090d19f27b1b26b15a40a3b824b48950f27c174","modified":1620818324812},{"_id":"source/_posts/notes/noteOfUE4.md","hash":"bc1ca78da4cb42cbc25b74f9d85fa7ce9e315a56","modified":1620818324812},{"_id":"source/_posts/notes/noteOfdbData.md","hash":"3a68b73cfc02f910e76dd4b10f7b7ee1701edf94","modified":1620442562684},{"_id":"source/_posts/notes/noteOfdocker.md","hash":"3401d5a95034737c9d7ec4ee2897faeaee47fe4c","modified":1620442562688},{"_id":"source/_posts/notes/noteOfgoExp.md","hash":"263082327499391e2e8e6352891cc5ad3185e45b","modified":1621407314916},{"_id":"source/_posts/notes/noteOfgolang.md","hash":"63e9570d21d6057d1c307fe986d07b767b7893d8","modified":1621782642731},{"_id":"source/_posts/notes/noteOfgui.md","hash":"a44f06329b14505bafdd82d9ba81eef35789550a","modified":1620442562688},{"_id":"source/_posts/notes/noteOfjava.md","hash":"3716411a205c8ec06c6f5acae15d5d9f1f316550","modified":1620442562688},{"_id":"source/_posts/notes/noteOflinux.md","hash":"bfe23c75bc6afaf403f1a820d66a0f4a4b8af1be","modified":1620442562688},{"_id":"source/_posts/notes/noteOfmachineLearning.md","hash":"dfd3246efbae9db128fe8cefdbc092ca5e52b07c","modified":1620442562688},{"_id":"source/_posts/notes/noteOfvn_py.md","hash":"0bf697ce90dbb1f44d72c10c114a1d0b71da6ef0","modified":1620442562688},{"_id":"source/_posts/notes/noteOfwebStation.md","hash":"b8761f8773352743e4ebfdf2559ed8a0cf0e882d","modified":1620442562692},{"_id":"source/_posts/notes/noteOfwebStation.md.bak.bak","hash":"191d4f086cf6a9ca8b87a44effd9ce07f22cce0b","modified":1620442562692},{"_id":"source/_posts/tips/for_china.md","hash":"264127f3e20769ab0bb9c441d4661aa0a401a321","modified":1620442562692},{"_id":"source/_posts/tips/opencv.md","hash":"d06a18dd11609538a4cccc4cdd1fd2f0f57211db","modified":1620442562692},{"_id":"source/_posts/tips/tipsOfProblems.md","hash":"6cb9e1f9070ebf4de99ba500714bea11cd29bf10","modified":1621755823879},{"_id":"source/_posts/tips/tipsOfdebugers.md","hash":"3d4d086a69995465dd374023586bc22fefefa9e8","modified":1620442562692},{"_id":"source/_posts/tips/tipsOfgRpc.md","hash":"97e2989fee46b290097b160d3d6b1c17291df812","modified":1621824073073},{"_id":"source/_posts/tips/tipsOfmarkdown.md","hash":"cc17ca75cd876de69f66f914adb9675db12aba97","modified":1620442562692},{"_id":"source/_posts/tips/tipsOfvim.md","hash":"4c0530c27ce477020a6cfb59e7fda79a234199ab","modified":1620442562692},{"_id":"source/_posts/tips/tipsOfweb.md","hash":"12a89053092dd10771d4f23db0ab68e8a19d742b","modified":1620818324812},{"_id":"source/_posts/notes/noteOfpython.md","hash":"97434f8e0997dd15a44eff0b77f43853f44caa97","modified":1620442562688},{"_id":"themes/hueman/.gitignore","hash":"cd089ae45ce870c45e434019e8f1ed4f066cd425","modified":1618973824000},{"_id":"themes/hueman/LICENSE","hash":"3975b7883caeb33f61fada7c0ef4add7ab189849","modified":1618973824000},{"_id":"themes/hueman/README.md","hash":"096d3c5c90b77bb69e5ea5230c60b9fe8c04746b","modified":1618973824000},{"_id":"themes/hueman/_config.yml","hash":"38e104bc1d276c2213d181651db19b439edc882a","modified":1619076418000},{"_id":"themes/hueman/_config.yml.bak","hash":"d4abfa1574fcfa50568f6701b7bef09be2097ff1","modified":1618990042000},{"_id":"themes/hueman/_config.yml.example","hash":"32dc691a594ac54b196807aa770534d2d69cfb84","modified":1618973824000},{"_id":"themes/hueman/package.json","hash":"1dda3c209f51d6d6a3b4f112f787915d3add726a","modified":1618973824000},{"_id":"themes/hueman/languages/ca.yml","hash":"deb751cd834e928a218cd4dff25f9b8a4f1597f4","modified":1618973824000},{"_id":"themes/hueman/languages/en.yml","hash":"26a3d8c89a257a4e8b84e3b5214d0f184cb8ad79","modified":1618973824000},{"_id":"themes/hueman/languages/es.yml","hash":"8bfab5d3e889fe2959ee469263c19951aab08fad","modified":1618973824000},{"_id":"themes/hueman/languages/fr.yml","hash":"8ab415076d01d069c24c9bc60e448ef258834dec","modified":1618973824000},{"_id":"themes/hueman/languages/hu.yml","hash":"b612b0d3329aa205e5903576018194e44d5f8d22","modified":1618973824000},{"_id":"themes/hueman/languages/id.yml","hash":"36fa092fe362ffffe1db67afb35d2bab1f04e2f0","modified":1618973824000},{"_id":"themes/hueman/languages/ja.yml","hash":"3695f6c76b48195881419e69fbeb8c25bd985119","modified":1618973824000},{"_id":"themes/hueman/languages/ko.yml","hash":"09703bf440a4de3f7aec02357bc46079b7d99b77","modified":1618973824000},{"_id":"themes/hueman/languages/pt-BR.yml","hash":"2b65116ff36781cc130138ee8cb209095e5ba5df","modified":1618973824000},{"_id":"themes/hueman/languages/vi.yml","hash":"c2d23b1034e1e51355f97224ad7bda8066d597a2","modified":1618973824000},{"_id":"themes/hueman/languages/ru.yml","hash":"2878b42646ddea60ce1236f68f4b907c436cf26e","modified":1618973824000},{"_id":"themes/hueman/languages/tr.yml","hash":"c6bd8d946213d0a1dd05c033669513d1ab67a66e","modified":1618973824000},{"_id":"themes/hueman/languages/zh-TW.yml","hash":"343d3589f6c8449319c872c03e028a92682fce35","modified":1618973824000},{"_id":"themes/hueman/layout/archive.ejs","hash":"8785477232088e09a75da88a0cdcb32fedf4f81f","modified":1618973824000},{"_id":"themes/hueman/layout/author.ejs","hash":"5096d3f019098d9940429152295f6d6161d887ba","modified":1618973824000},{"_id":"themes/hueman/layout/authors.ejs","hash":"8946d0d1a70ac470b3ee56dd36b4f9da2b73ed76","modified":1618973824000},{"_id":"themes/hueman/layout/categories.ejs","hash":"8946d0d1a70ac470b3ee56dd36b4f9da2b73ed76","modified":1618973824000},{"_id":"themes/hueman/layout/category.ejs","hash":"5096d3f019098d9940429152295f6d6161d887ba","modified":1618973824000},{"_id":"themes/hueman/layout/index.ejs","hash":"8785477232088e09a75da88a0cdcb32fedf4f81f","modified":1618973824000},{"_id":"themes/hueman/layout/layout.ejs","hash":"2c8cdd3a857a4b35e89b354931909186eaa91853","modified":1618973824000},{"_id":"themes/hueman/layout/page.ejs","hash":"5afddd6a45fa72beacec8d760487dfe8a667e622","modified":1618973824000},{"_id":"themes/hueman/layout/post.ejs","hash":"5afddd6a45fa72beacec8d760487dfe8a667e622","modified":1618973824000},{"_id":"themes/hueman/layout/tag.ejs","hash":"8785477232088e09a75da88a0cdcb32fedf4f81f","modified":1618973824000},{"_id":"themes/hueman/layout/tags.ejs","hash":"8946d0d1a70ac470b3ee56dd36b4f9da2b73ed76","modified":1618973824000},{"_id":"themes/hueman/scripts/excerpt.js","hash":"630f17f2647b2ba5b207dba36fb3c6587a3aa04f","modified":1618973824000},{"_id":"themes/hueman/scripts/md5.js","hash":"7712232a328daf1797a3dd313bfce124f7df67ff","modified":1618973824000},{"_id":"themes/hueman/scripts/meta.js","hash":"1993754a2f3dffa283fa0538eb8f056385b69ad4","modified":1618973824000},{"_id":"themes/hueman/scripts/thumbnail.js","hash":"e78b1b978fa1acad5409afc685d13f669e80b24f","modified":1618973824000},{"_id":"themes/hueman/layout/comment/changyan.ejs","hash":"4dbfefe8c9ed9b824a6bc4952d2a0a72e9166b61","modified":1618973824000},{"_id":"themes/hueman/layout/comment/counter.ejs","hash":"237fe2f89c128fe4f7c1edb9187f504f42cb5e74","modified":1618973824000},{"_id":"themes/hueman/layout/comment/disqus.ejs","hash":"936ded56d044e5f0a2f4c5d773d41965b2bea145","modified":1618973824000},{"_id":"themes/hueman/layout/comment/duoshuo.ejs","hash":"ce46d7410a99b57704da32e9d09071cef6c9fa93","modified":1618973824000},{"_id":"themes/hueman/layout/comment/facebook.ejs","hash":"8881b9945904d247768a6482cc9c2e4010642d5e","modified":1618973824000},{"_id":"themes/hueman/layout/comment/gitalk.ejs","hash":"915124de9806cf92bbe1af1b77e6580d0eaa8ac3","modified":1618973824000},{"_id":"themes/hueman/layout/comment/index.ejs","hash":"058f7dc27f700d083841e3d7a251e57ccbc4706e","modified":1618973824000},{"_id":"themes/hueman/layout/comment/isso.ejs","hash":"c196dbd522a3969d75ce5e61bc7ce7cec52d462f","modified":1618973824000},{"_id":"themes/hueman/layout/comment/livere.ejs","hash":"792e4f0e93b2bdc5abd85d447d804a5c608a9c5c","modified":1618973824000},{"_id":"themes/hueman/layout/comment/scripts.ejs","hash":"48212bc99b046a67a1027024efecda8c79eb7fa9","modified":1618973824000},{"_id":"themes/hueman/layout/comment/valine.ejs","hash":"00502e24843fab3cad0d99d2ac66144685fd39ce","modified":1618973824000},{"_id":"themes/hueman/layout/comment/youyan.ejs","hash":"ef6c37f535d4897679823143ce37c25d556cd729","modified":1618973824000},{"_id":"themes/hueman/layout/common/archive.ejs","hash":"e4d32fa38c969db0d0f66463bc67a3020ed979f7","modified":1618973824000},{"_id":"themes/hueman/layout/common/article.ejs","hash":"3aec000ae8c5ea1d1c729214fe5c35c1c620cd0c","modified":1618973824000},{"_id":"themes/hueman/layout/common/authors.ejs","hash":"dc9adbd9fa759c80614feaa499433de1b76f8d83","modified":1618973824000},{"_id":"themes/hueman/layout/common/categories.ejs","hash":"b408e91026ebbb324b7e4f517242f22903e3992b","modified":1618973824000},{"_id":"themes/hueman/layout/common/content-title.ejs","hash":"4e1a92448207b8e3d1695df855f6be7c70576248","modified":1618973824000},{"_id":"themes/hueman/layout/common/footer.ejs","hash":"d62dc97ec079d8ef5d0af401b56dceec1ffb64f7","modified":1618973824000},{"_id":"themes/hueman/layout/common/head.ejs","hash":"20d27432498ec723a685b989917d9b2d2c3f8b92","modified":1618973824000},{"_id":"themes/hueman/layout/common/header.ejs","hash":"ee7b3d8e28114c9acdd28a37bf57559dbc452307","modified":1618973824000},{"_id":"themes/hueman/layout/common/scripts.ejs","hash":"db677ab336d31292bffc071b2115e25e9c6f198d","modified":1618973824000},{"_id":"themes/hueman/layout/common/sidebar.ejs","hash":"f582cd96ce6fa3b0340a1642695fec1632391e25","modified":1618973824000},{"_id":"themes/hueman/layout/common/summary.ejs","hash":"42d6f99906ae96a6d00ee9a727405e47ec5e7c81","modified":1618973824000},{"_id":"themes/hueman/layout/common/tags.ejs","hash":"20769fc8213091770e5b5dac16e4528f9104e244","modified":1618973824000},{"_id":"themes/hueman/layout/common/thumbnail.ejs","hash":"c5fba5d5287f49e02040c530cd92312b2221a2c1","modified":1618973824000},{"_id":"themes/hueman/layout/plugin/baidu-analytics.ejs","hash":"d99089976258050666208f29000f84496fe1029c","modified":1618973824000},{"_id":"themes/hueman/layout/plugin/cookie-consent.ejs","hash":"6baf0d836b2c1ddc757b047f014c08fbbf008ee8","modified":1618973824000},{"_id":"themes/hueman/layout/plugin/google-adsense.ejs","hash":"8b3870371d6554777b3323389cdeb8a287467ed3","modified":1618973824000},{"_id":"themes/hueman/layout/plugin/google-analytics.ejs","hash":"9ae10a0ff00a5bfe2bb6ad2ce2f882ae9074ad2b","modified":1618973824000},{"_id":"themes/hueman/layout/plugin/scripts.ejs","hash":"7d011d257cabf47c8faacbb1ca98381db4ace71c","modified":1618973824000},{"_id":"themes/hueman/layout/plugin/statcounter.ejs","hash":"7773a7ef15dbaf4ead2485eb7e5c394d20789438","modified":1618973824000},{"_id":"themes/hueman/layout/plugin/twitter-conversion.ejs","hash":"b9bc79727c9790b868e52ce2bd80536a04407a7e","modified":1618973824000},{"_id":"themes/hueman/layout/pwa/index.ejs","hash":"6db63250679a4fdf8113d57f302a50d848a408cf","modified":1618973824000},{"_id":"themes/hueman/layout/search/baidu.ejs","hash":"bcffa60f2d1750ac7499e928f538176e3804393b","modified":1618973824000},{"_id":"themes/hueman/layout/search/index.ejs","hash":"1a6a742727018567f60f8815be0bff5a45294ce5","modified":1618973824000},{"_id":"themes/hueman/layout/search/insight.ejs","hash":"130fe3d33ac71da0b50f7fee6a87979f30938a1b","modified":1618973824000},{"_id":"themes/hueman/layout/search/swiftype.ejs","hash":"379e66d2c13526e72e4120c443f95fccf4edef71","modified":1618973824000},{"_id":"themes/hueman/layout/share/addtoany.ejs","hash":"ac180c4c84b73a04d61b17e7dc18c257e20bf59f","modified":1618973824000},{"_id":"themes/hueman/layout/share/bdshare.ejs","hash":"5fd8c82a40d957e9481540a0b7d3ffca874e14a7","modified":1618973824000},{"_id":"themes/hueman/layout/share/default.ejs","hash":"7492f5b375a56c67a1a1a4f6b893e37f49dc86dc","modified":1618973824000},{"_id":"themes/hueman/layout/share/index.ejs","hash":"029e91aace5a4c0d8387fc7744c477ccc6865c30","modified":1618973824000},{"_id":"themes/hueman/layout/share/jiathis.ejs","hash":"b80332a1e0c8d230fabcf5e696edae349925ae17","modified":1618973824000},{"_id":"themes/hueman/layout/widget/archive.ejs","hash":"c4d303eaaa23768e52ead324c422a8900b1fe448","modified":1618973824000},{"_id":"themes/hueman/layout/widget/catalog.ejs","hash":"b95f91c7b3b26236ea675482b173b29fecf3e7f4","modified":1618973824000},{"_id":"themes/hueman/layout/widget/category.ejs","hash":"2d705df76f2eef7d695a971266fc104e89ca6bcd","modified":1618973824000},{"_id":"themes/hueman/layout/widget/links.ejs","hash":"97dab84d6336a4c926ddc288d5a6c264f54c50c3","modified":1618973824000},{"_id":"themes/hueman/layout/widget/google_adsense.ejs","hash":"c83ea7f18b970c48c90994cb96be2f659f7744fa","modified":1618973824000},{"_id":"themes/hueman/languages/zh-CN.yml","hash":"38c119ff77bb4eaa22403dde4f1303920260e9a3","modified":1618973824000},{"_id":"themes/hueman/layout/widget/sticky_posts.ejs","hash":"6bad4126bed652f5f9e93027cbe3ee03b67b034a","modified":1618973824000},{"_id":"themes/hueman/layout/widget/tag.ejs","hash":"bfbc63e675439dcdc35e07dce6948e41500b649c","modified":1618973824000},{"_id":"themes/hueman/layout/widget/tagcloud.ejs","hash":"3ecb048d6098bc3953043a4c25f1f7c4b23397cf","modified":1618973824000},{"_id":"themes/hueman/source/css/_extend.styl","hash":"c2160499dc89c524ff17cd2e3fcbb8df83ebca1a","modified":1618973824000},{"_id":"themes/hueman/source/css/_responsive.styl","hash":"4addaf2f203563accf0479850eda1ab4f4a4c34b","modified":1618973824000},{"_id":"themes/hueman/source/css/_variables.styl","hash":"c077e2412dd38c40e68ecc763c0b8c5e3254808a","modified":1618973824000},{"_id":"themes/hueman/source/css/style.styl","hash":"b76d43839bda01ee791e71093f009ad2c8b093b2","modified":1618973824000},{"_id":"themes/hueman/source/js/insight.js","hash":"6ee84c42c2b230ff9e9bf605a444bd671d44f9e3","modified":1618973824000},{"_id":"themes/hueman/source/js/main.js","hash":"2ef5449478816096cdd0e9dde4d1fc1c2f33ab87","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/author.ejs","hash":"d27178a76c95949f537def3d16ae42ef68437b2b","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/counter.ejs","hash":"708566f1fb93062201e51fc1ce2a251078985437","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/date.ejs","hash":"62600215be93098d88f3ef949cc9d5264167810c","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/gallery.ejs","hash":"659f019761116313169148ec61773e7b84abb739","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/ld_json.ejs","hash":"b33214e00cf9972382ff0c2c93c0fc9e411f921f","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/tag.ejs","hash":"2e966216256321aa0c76fe1b9be689601c76ef31","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/nav.ejs","hash":"c5f41ebf451cff39eaf116096604ce706a175767","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/title.ejs","hash":"6d19c61afb1f5f71c483be2ce37c6820ac2cd8b5","modified":1618973824000},{"_id":"themes/hueman/layout/common/post/valinecounter.ejs","hash":"9d7bb963286520690dc4e0a2ffae44560f013a1e","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/agate.styl","hash":"601eb70448a16b918df132f6fc41e891ae053653","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/androidstudio.styl","hash":"65d09f1b0e81c6a182f549fd3de51e59823c97ae","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/arduino-light.styl","hash":"15e8572585cd708221c513dea4bdd89d8fe56c10","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/arta.styl","hash":"1a5accc115f41d1b669ed708ac6a29abac876599","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/ascetic.styl","hash":"32cff3bef6fac3760fe78f203096477052a90552","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-cave-dark.styl","hash":"bc647b2c1d971d7cc947aa1ed66e9fd115261921","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-cave-light.styl","hash":"a5be0744a7ecf4a08f600ade4cfd555afc67bc15","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-dune-dark.styl","hash":"df50a85a4b14c7ca6e825d665594b91229d0e460","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-dune-light.styl","hash":"931435fbc6f974e8ce9e32722680035d248a9dc1","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-estuary-dark.styl","hash":"d84382bc8298f96730757391d3e761b7e640f406","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-estuary-light.styl","hash":"344276ca9b27e51d4c907f76afe5d13cf8e60bdf","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-forest-dark.styl","hash":"57c154c6045a038dc7df0a25927853e10bf48c4a","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-forest-light.styl","hash":"95228d9f2102fad425536aac44b80b2cba1f5950","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-heath-dark.styl","hash":"b0cf13b2233e7bc38342032d2d7296591a4c2bcf","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-heath-light.styl","hash":"8c8c2e445abef85273be966d59770e9ced6aac21","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-lakeside-dark.styl","hash":"bb0a8c4ad0dd8e3e7de7122ddf268fc42aa94acb","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-lakeside-light.styl","hash":"2c54cb9bdb259ae3b5b29f63ac2469ed34b08578","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-plateau-dark.styl","hash":"09c64f1a7052aec9070c36c0431df25216afaea1","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-plateau-light.styl","hash":"d1a05fdd1ededc9063d181ab25bad55a164aeb4a","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-savanna-dark.styl","hash":"a16c919a1ccf2f845488078fb341381bec46b1f3","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-savanna-light.styl","hash":"f8244c93711c7cb59dd79d2df966806b30d171ea","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-seaside-dark.styl","hash":"ce233a101daea7124cbfcd34add43ccfe2e1e1c7","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-seaside-light.styl","hash":"0597342da6e2d0c5bdcc7d42dabb07322b1a4177","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"414b0cfc142f70afe359c16450b651e28bf7325a","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"efa52713efc468abeeb2b9299704371583b857de","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/brown-paper.styl","hash":"c2326ba20a5020a66ca7895258d18833327d4334","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/codepen-embed.styl","hash":"f4dcc84d8e39f9831a5efe80e51923fc3054feb0","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/color-brewer.styl","hash":"2a439d6214430e2f45dd4939b4dfe1fe1a20aa0f","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/dark.styl","hash":"71ce56d311cc2f3a605f6e2c495ccd7236878404","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/darkula.styl","hash":"ad0d5728d21645039c9f199e7a56814170ed3bab","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/docco.styl","hash":"b1c176378bb275f2e8caa759f36294e42d614bf1","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/far.styl","hash":"d9928010ffe71e80b97a5afcba1a4975efdd7372","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/foundation.styl","hash":"bf8ddc94b4ad995b8b8805b5a4cf95004553fdac","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/github-gist.styl","hash":"48211a03d33e7f7ada0b261162bea06676155a71","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/github.styl","hash":"3336aeba324c6d34a6fd41fef9b47bc598f7064c","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/googlecode.styl","hash":"bda816beee7b439814b514e6869dc678822be1bc","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/grayscale.styl","hash":"bf37d8b8d1e602126c51526f0cc28807440228ed","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/highlightjs.styl","hash":"0e198b7a59191c7a39b641a4ddd22c948edb9358","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/hopscotch.styl","hash":"b374c6550b89b4751aedc8fbc3cf98d95bd70ead","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/hybrid.styl","hash":"ea8d7ddc258b073308746385f5cb85aabb8bfb83","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/idea.styl","hash":"a02967cb51c16a34e0ee895d33ded2b823d35b21","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/index.styl","hash":"d421ed06c84f7a561b293f662a670bf132d41c63","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/ir-black.styl","hash":"693078bbd72a2091ed30f506cc55949600b717af","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/kimbie.dark.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/kimbie.light.styl","hash":"61f8baed25be05288c8604d5070afbcd9f183f49","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/magula.styl","hash":"16d323f989b1420a0f72ef989242ece9bf17a456","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/mono-blue.styl","hash":"4c89a6ae29de67c0700585af82a60607e85df928","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/monokai-sublime.styl","hash":"25aa2fc1dbe38593e7c7ebe525438a39574d9935","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/monokai.styl","hash":"5a4fe9f957fd7a368c21b62a818403db4270452f","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/obsidian.styl","hash":"55572bbcfee1de6c31ac54681bb00336f5ae826d","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/paraiso-dark.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/paraiso-light.styl","hash":"d224d1df0eb3395d9eea1344cee945c228af2911","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/pojoaque.styl","hash":"77dae9dc41945359d17fe84dbd317f1b40b2ee33","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/railscasts.styl","hash":"acd620f8bb7ff0e3fe5f9a22b4433ceef93a05e6","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/rainbow.styl","hash":"ce73b858fc0aba0e57ef9fb136c083082746bc1d","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/school-book.styl","hash":"d43560fe519a931ce6da7d57416d7aa148441b83","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/solarized-dark.styl","hash":"702b9299a48c90124e3ac1d45f1591042f2beccc","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/solarized-light.styl","hash":"aa0dd3fd25c464183b59c5575c9bee8756b397f2","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/sunburst.styl","hash":"a0b5b5129547a23865d400cfa562ea0ac1ee3958","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/tomorrow-night-blue.styl","hash":"8b3087d4422be6eb800935a22eb11e035341c4ba","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/tomorrow-night-bright.styl","hash":"0ac6af6ecb446b5b60d6226748e4a6532db34f57","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/tomorrow-night-eighties.styl","hash":"fa57b3bb7857a160fc856dbe319b31e30cc5d771","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/tomorrow-night.styl","hash":"19b3080d4b066b40d50d7e7f297472482b5801fd","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/tomorrow.styl","hash":"15779cf6846725c7c35fc56cac39047d7e0aec1c","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/vs.styl","hash":"959a746f4b37aacb5d1d6ff1d57e0c045289d75d","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/xcode.styl","hash":"5e8532ae8366dcf6a4ef5e4813dc3d42ab3d0a50","modified":1618973824000},{"_id":"themes/hueman/source/css/_highlight/zenburn.styl","hash":"fc5ec840435dad80964d04519d3f882ddc03746a","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/archive.styl","hash":"5e5fb791ab54f0acf33850f586f7aa8cb2782f3a","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/article.styl","hash":"5f93edada8ba08100e1fee6a9f6f5cf4a35b6c7f","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/assets.styl","hash":"3d95417663c5a737f064a31ab4ef52bac7fda8df","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/comment.styl","hash":"d2de8f2c1cf6236ead0800c2a1566e01e7ae0b44","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/footer.styl","hash":"219f881c937735869ac4a1af1259e0d234aea9f3","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/header.styl","hash":"f94fcb4e2cbda45c8dc910ddb8ff4f19ff0644bf","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/insight.styl","hash":"3d66323e7b75ad197e80d7189a8d9216e1e1ef2f","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/nav.styl","hash":"587a9c9d304ed83eb0331a1d16693461805311c3","modified":1618973824000},{"_id":"themes/hueman/source/css/_partial/sidebar.styl","hash":"b17e0f5cedf4eecd35126b5cb4de567b64123377","modified":1618973824000},{"_id":"themes/hueman/source/css/images/logo-header.png","hash":"a874be8f3e33831614a421d1a74d2c13bd5eba59","modified":1618973824000},{"_id":"themes/hueman/source/css/images/opacity-10.png","hash":"bbc979866c5b50e8adb348419154b28b1ff44d78","modified":1618973824000},{"_id":"themes/hueman/source/css/images/s-left.png","hash":"c8cac4f4e3492606fab93196364bd0f87d93bb98","modified":1618973824000},{"_id":"themes/hueman/source/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1618973824000},{"_id":"themes/hueman/source/css/images/thumb-default.png","hash":"2d0ba175d958d342494241c616a74d37f48059fb","modified":1618973824000},{"_id":"themes/hueman/source/css/images/vzs.jpeg","hash":"4fd564e71678b690f6fdbfe73531fce3089d687a","modified":1618985608000},{"_id":"themes/hueman/source/libs/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1618973824000},{"_id":"themes/hueman/source/libs/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1618973824000},{"_id":"themes/hueman/source/libs/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1618973824000},{"_id":"themes/hueman/source/libs/titillium-web/styles.css","hash":"d98f0c50aae4c922cd0b663fa820fd7dff2dd9b1","modified":1618973824000},{"_id":"themes/hueman/source/libs/font-awesome/css/font-awesome.css","hash":"b5020c3860669185ba3f316fa7332cdf5c06f393","modified":1618973824000},{"_id":"themes/hueman/source/libs/font-awesome/css/font-awesome.min.css","hash":"7cd5a3384333f95c3d37d9488ad82cd6c4b03761","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.css","hash":"844ce27b8488968bccb3e50bb49184ba2aae0625","modified":1618973824000},{"_id":"themes/hueman/layout/widget/recent_posts.ejs","hash":"16a2bd28bdf520616202670a18c6cc93d1dd3f54","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.css.map","hash":"51e9df39edf0faa3f38c1bab0c1fa6c922b9edcb","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-fb-comment-box.min.css","hash":"05830fadb8454f39dcc98c8686eb4d5c24b71fc0","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.css","hash":"7871c28498d74451d6aa438c8d3a1817810a1e19","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.css.map","hash":"50c3348638b4d82fa08a449c690e8d2bb593005d","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lg-transitions.min.css","hash":"5c22e2073a4c96d6212c72135391b599e8d1359f","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.css","hash":"bef55316a32e512d5a8940e5d0bfe8bf7a9c5c61","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.css.map","hash":"3175b4107078674d25798979f7666f4daf31e624","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.svg","hash":"9a732790adc004b22022cc60fd5f77ec4c8e3e5a","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/img/loading.gif","hash":"607810444094b8619fa4efa6273bc2a7e38dd4b4","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/img/video-play.png","hash":"3ea484cdc04d2e4547f80cbf80001dcf248c94ef","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/img/vimeo-play.png","hash":"6190254f2804904a4a1fa1eb390dfd334e416992","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/img/youtube-play.png","hash":"fea6df9d9d43151f9c9d15f000adb30eb3e26fc4","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-autoplay.js","hash":"426bb78b93acfc39d533ea2bab1cec8dc289cf24","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-autoplay.min.js","hash":"d845741bcaf961579622880eb2a445257efad1ac","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-fullscreen.js","hash":"65c47ac65362854ba44b00a010bb01e3630209d8","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-fullscreen.min.js","hash":"b6b9e4022700b7faf2a5a175ba44a3bd938fdd20","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-hash.js","hash":"15d16516c5642d3de1566ff8fc9160136ccaa405","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-hash.min.js","hash":"43f1e1e720ab0e241c19b83aa26bd6848eab8edc","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-pager.js","hash":"8092c692b244bb26343eb03b91bd97deb9dafc9c","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-pager.min.js","hash":"25caa6ff65b1c6dee09941e795ae2633bdbab211","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-share.js","hash":"b7fb5f6474911060a351b0a6fe9dbb9ac3fb22aa","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-share.min.js","hash":"39c615f07c5d3aaa65a2c3068a30fdd6dd5c372d","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-thumbnail.js","hash":"3a6476b6df1d2bef4a21861a78776282a7a11ef1","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-thumbnail.min.js","hash":"18dd7d2909d1bfd6852f031d03e774b4428c512b","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-video.js","hash":"4f99b598f6bb18de9eca8c45c5b4373a03962367","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-video.min.js","hash":"032c001ab045a69856f9c3ed4a2a3bf12a8e310f","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-zoom.js","hash":"a758e2c8fcf710f9ff761da0eea0ab9321f3484d","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lightgallery.js","hash":"3cd19b33ba99efd5ba1d167da91720566d274b2c","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lightgallery.min.js","hash":"956ef9b706755318da69ad0b5d7786339d831251","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/js/lg-zoom.min.js","hash":"15b49f9728439819ece15e4295cce254c87a4f45","modified":1618973824000},{"_id":"themes/hueman/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1618973824000},{"_id":"themes/hueman/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1618973824000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcSo_WB_cotcEMUw1LsIE8mM.woff2","hash":"6d17eac7fcc2866f10d1f2725a08ab749a6e978d","modified":1618973824000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcZSnX671uNZIV63UdXh3Mg0.woff2","hash":"78029561e4c2ec565ea11c3f5bbd052b018af8a6","modified":1618973824000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr4-67659ICLY8bMrYhtePPA.woff2","hash":"4e5557954ec161edc03b6f971ddefee6179c1305","modified":1618973824000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr46gJz9aNFrmnwBdd69aqzY.woff2","hash":"1454a4753468b607c23deac9f5438cd0ed5cb35d","modified":1618973824000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr9INifKjd1RJ3NxxEi9Cy2w.woff2","hash":"1758c64c8acec4497735ccb5336b1a518d24024c","modified":1618973824000},{"_id":"themes/hueman/source/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr_SNRT0fZ5CX-AqRkMYgJJo.woff2","hash":"e2e2993940fc54ed41f26e39257fdbd824c05e81","modified":1618973824000},{"_id":"themes/hueman/source/libs/lightgallery/css/lightgallery.min.css","hash":"c9a2e19c932b56f4a2ce30c98910d10b74edb38a","modified":1618973824000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1618973824000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1618973824000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1618973824000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1618973824000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1618973824000},{"_id":"themes/hueman/source/libs/jquery/3.5.0/jquery.min.js","hash":"206ed314e32bca5b801434367d742c898572aea6","modified":1618973824000},{"_id":"themes/hueman/source/libs/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1618973824000},{"_id":"public/content.json","hash":"c9fd120da422b83c90e6641a2459998a1a709f91","modified":1621861714843},{"_id":"public/2021/05/24/tips/tipsOfgRpc/index.html","hash":"767f484ffc2470d9a7458ddff64d1f78f287f857","modified":1621861714843},{"_id":"public/2021/05/23/tips/tipsOfProblems/index.html","hash":"9b9e7d752c9d85c839434a95b5806d4c6658885a","modified":1621861714843},{"_id":"public/2021/05/19/notes/noteOfgoExp/index.html","hash":"772b68b80379a8b83755be12429c279e9d08597f","modified":1621861714843},{"_id":"public/2021/05/10/notes/noteOfFmtData/index.html","hash":"97b483d681589f682972fa79156c7b88c9c77063","modified":1621861714843},{"_id":"public/2021/05/10/notes/noteOfUE4/index.html","hash":"730f9f0f1a75f7cdea169734f94c6c964b0ec3c8","modified":1621861714843},{"_id":"public/2021/05/09/tips/tipsOfweb/index.html","hash":"23358376a547b4ec32396ead4630519c820620ee","modified":1621861714843},{"_id":"public/2021/04/22/tips/opencv/index.html","hash":"17960c987a7b099a6780612b58387952d8b539ec","modified":1621861714843},{"_id":"public/2021/04/22/tips/for_china/index.html","hash":"87be5244c5f9d6f0aa33e9e5fa16b4d5ea0f47c5","modified":1621861714843},{"_id":"public/2021/04/22/notes/net/index.html","hash":"938d61575aa7c7134991d696f134c7910bf25b92","modified":1621861714843},{"_id":"public/2019/02/12/notes/noteOfdocker/index.html","hash":"c9bf3494e95c89a478dc21676b68022f74fdd49c","modified":1621861714843},{"_id":"public/2019/01/10/tips/tipsOfdebugers/index.html","hash":"5b2bb10ee44d8e6ce8029685bd2eb887c5b26af4","modified":1621861714843},{"_id":"public/2018/06/07/notes/noteOfwebStation/index.html","hash":"4001b90b8880119e3b2c9fd2b21d1e609e6675c9","modified":1621861714843},{"_id":"public/2018/05/24/notes/noteOfjava/index.html","hash":"b0c3075dfedd5c45fec5d4fdda34a2401b055a16","modified":1621861714843},{"_id":"public/2018/05/15/notes/noteOfgolang/index.html","hash":"db45ac4cfc138a08a28ae069278156c38c0ae0a4","modified":1621861714843},{"_id":"public/2018/05/15/notes/noteOfvn_py/index.html","hash":"764e6bc505fe7d3ed17fc6c53a97b2d7934ca864","modified":1621861714843},{"_id":"public/2018/05/15/tips/tipsOfmarkdown/index.html","hash":"aec4b2601f009fc03651c2412963e947810b9f91","modified":1621861714843},{"_id":"public/2018/05/15/tips/tipsOfvim/index.html","hash":"f135359aae56b19abe89b6b1a4722ea875f7f511","modified":1621861714843},{"_id":"public/2018/05/15/notes/noteOfdbData/index.html","hash":"bc16f6748e367d3c2463a2e64e3358755ae8fc94","modified":1621861714843},{"_id":"public/2017/08/15/newThings/index.html","hash":"7e61f430d9daa48069bbf68f1cea8b97740d0fb9","modified":1621861714843},{"_id":"public/2017/07/24/notes/noteOfmachineLearning/index.html","hash":"2638d206dc4e3976f050990bcb99785c5b96b2cb","modified":1621861714843},{"_id":"public/2017/07/01/notes/noteOfpython/index.html","hash":"843f35c515c5962af149e1a4635ae369ed1db7fd","modified":1621861714843},{"_id":"public/2017/07/01/notes/noteOfgui/index.html","hash":"791c1503941c7626c00a978b39707f14a3f174c2","modified":1621861714843},{"_id":"public/2016/11/08/japaneseLearning/index.html","hash":"f9470144cfc98e83a45562cd21864ede33362718","modified":1621861714843},{"_id":"public/2016/10/29/editer/index.html","hash":"9ee21871f311924ccec378b5b7be8a400901081f","modified":1621861714843},{"_id":"public/2016/10/29/notes/note/index.html","hash":"770a4047ccab013d14573e57e42d417f001f48b3","modified":1621861714843},{"_id":"public/2016/10/08/makeThingsEasyAndEnjoy/index.html","hash":"76684b195f638b2f1b6d1a2b1b7ebc12a4c37e5b","modified":1621861714843},{"_id":"public/2016/07/14/dailynotes/index.html","hash":"63a4463e52d2d3dc5cfa50470a915078d845a702","modified":1621861714843},{"_id":"public/2016/04/08/notes/noteOflinux/index.html","hash":"dd96c94910d30c787f2b7acdf553fccd027b4857","modified":1621861714843},{"_id":"public/archives/index.html","hash":"f7613161b0b9f4ec89abc43e8847a543934dd750","modified":1621861714843},{"_id":"public/archives/page/2/index.html","hash":"8ac2a1f058a0b7707258373e74e7df65c80e9b94","modified":1621861714843},{"_id":"public/archives/page/3/index.html","hash":"03bc8c2ef0c9d57bd62849f0c53b1e5390304838","modified":1621861714843},{"_id":"public/archives/2016/index.html","hash":"9082baf806c1d6453f1a36c00d4e0b1b75f03227","modified":1621861714843},{"_id":"public/archives/2016/04/index.html","hash":"851a5240b7d4e5730aa058a9d68dc886994be535","modified":1621861714843},{"_id":"public/archives/2016/07/index.html","hash":"4bd6fc870eb9512a3d786d640058414f32a7e0f6","modified":1621861714843},{"_id":"public/archives/2016/10/index.html","hash":"b5166cf6448520661d774614d292dbe756e8fd32","modified":1621861714843},{"_id":"public/archives/2016/11/index.html","hash":"a816a614f1184f94105a787218db88de5cd8f1ec","modified":1621861714843},{"_id":"public/archives/2017/index.html","hash":"b40a356bf5563ebe1c035dd30ac3a55511de74ff","modified":1621861714843},{"_id":"public/archives/2017/07/index.html","hash":"b5d33a9a88b9976e9121b4a808e5e5829812a6ee","modified":1621861714843},{"_id":"public/archives/2017/08/index.html","hash":"b673bad682d224bb248ab507314430d49eb4a5f1","modified":1621861714843},{"_id":"public/archives/2018/index.html","hash":"68cf879c1437204b1902ef83567103f6a12f82ee","modified":1621861714843},{"_id":"public/archives/2018/05/index.html","hash":"a8f97626b636718853c8743ea5d63d23d9a6aead","modified":1621861714843},{"_id":"public/archives/2018/06/index.html","hash":"c69f5f425c5126f6eadc858bc284d377b286cda2","modified":1621861714843},{"_id":"public/archives/2019/index.html","hash":"e8bc005dce892f384d3b25b196dab2a9f5427671","modified":1621861714843},{"_id":"public/archives/2019/01/index.html","hash":"6464ccaded8d91c1c2dca444d8161b3163f74c3f","modified":1621861714843},{"_id":"public/archives/2019/02/index.html","hash":"e7765010d3fa7f7494c0cb4a36ca062895df3b80","modified":1621861714843},{"_id":"public/archives/2021/index.html","hash":"dffbbbaccd6e5ff3afc65af71c7e2b4d6499b11e","modified":1621861714843},{"_id":"public/archives/2021/04/index.html","hash":"affd9303b1b73e94c4333520a5b543a687932412","modified":1621861714843},{"_id":"public/archives/2021/05/index.html","hash":"b95d83503f1cf2cef2c2da89f805c664c41c42bf","modified":1621861714843},{"_id":"public/categories/杂谈/index.html","hash":"983611289f332fd5570d12499f04622cfcc90417","modified":1621861714843},{"_id":"public/categories/note/index.html","hash":"d7b72c4857295f047cae7c0cd20a183f97f3c1d0","modified":1621861714843},{"_id":"public/categories/note/page/2/index.html","hash":"e267c398b940915a75af3d89d7670c7e95eb34b8","modified":1621861714843},{"_id":"public/categories/new-Things/index.html","hash":"3e1d6a3bf1ea5fc339794987b564f44507995637","modified":1621861714843},{"_id":"public/categories/杂谈/日记/index.html","hash":"49a7bb04184cbfe9465e31840158a37afee6e438","modified":1621861714843},{"_id":"public/categories/note/数据格式/index.html","hash":"7af9c15900f4074c9fc493339ce9d4e379fe78a8","modified":1621861714843},{"_id":"public/categories/note/language/index.html","hash":"a24b8653ffc7d81972b9138076cf4c589add8f61","modified":1621861714843},{"_id":"public/categories/note/ue4/index.html","hash":"777411d3d9ed3b75fbd73259ea6dd1d4ebed8c78","modified":1621861714843},{"_id":"public/categories/note/docker/index.html","hash":"108bc1ff532347100f9f9719e83fac270eff18aa","modified":1621861714843},{"_id":"public/categories/note/网络-Net/index.html","hash":"b470a4287deb159a545d3463cf457dadd4f3511f","modified":1621861714843},{"_id":"public/categories/note/golang/index.html","hash":"a5c4ff4745e9def31aa8087bf90072faedcd27f4","modified":1621861714843},{"_id":"public/categories/new-Things/手机/index.html","hash":"fa3b4fd9d1501e5023865bdd7c82f37bc40e8ff4","modified":1621861714843},{"_id":"public/categories/note/java/index.html","hash":"d9efc526235d1790f654d69d11409045f394e0bb","modified":1621861714843},{"_id":"public/categories/note/linux/index.html","hash":"616ce54ae6a73e2d764b9166bfd15a09cac1b397","modified":1621861714843},{"_id":"public/categories/tip/index.html","hash":"a58bc8949aa522144fe2665fc3aaf9cf925e3eae","modified":1621861714843},{"_id":"public/categories/note/Something/index.html","hash":"57e6e6b50b9e6a79b6b0564ec4340781cc6b3314","modified":1621861714843},{"_id":"public/categories/note/数据格式/test/index.html","hash":"1fea19ffcf0e9a7be94587942fed824cce957cc1","modified":1621861714843},{"_id":"public/categories/note/language/learning/index.html","hash":"0a40d307de35e7ab331d34b0571d8b2565fc1069","modified":1621861714843},{"_id":"public/categories/note/ue4/learning/index.html","hash":"79ae602e53b32130a1e425e2cae58de8d2144b58","modified":1621861714843},{"_id":"public/categories/note/docker/learning/index.html","hash":"8da0b92ec0fc035edb1869701f21e802f4ba06ba","modified":1621861714843},{"_id":"public/categories/note/golang/expansion/index.html","hash":"f98c5e5d6ddd061b4fda8c7aadfcddb48b21f3bc","modified":1621861714843},{"_id":"public/categories/note/golang/learning/index.html","hash":"d818455178e19db73061b5fef2006a1d6edf4ae5","modified":1621861714843},{"_id":"public/categories/note/java/learning/index.html","hash":"56e12b6036cf56624b82ce9f10e2cbe1d20612e8","modified":1621861714843},{"_id":"public/categories/note/linux/learning/index.html","hash":"af218110924d4f56cc75a17d6b98e8fb1d877fe1","modified":1621861714843},{"_id":"public/categories/tip/换源/index.html","hash":"9e2aa1381d025bc975ce29700e6b00075a7913ce","modified":1621861714843},{"_id":"public/categories/tip/problem/index.html","hash":"4e7216a489b47c5cb69e14676cac2b4b6621373c","modified":1621861714843},{"_id":"public/categories/tip/debug/index.html","hash":"5c4bdefe25e5671726ddbc9737b8ccfbe3fdb56e","modified":1621861714843},{"_id":"public/categories/tip/markdown/index.html","hash":"3b0ce70e0ad424f0c13f82a63ade794ac9a7ca4f","modified":1621861714843},{"_id":"public/categories/tip/vim/index.html","hash":"3cb1550e059630797416982219cdd92705321c85","modified":1621861714843},{"_id":"public/categories/tip/web/index.html","hash":"a51936ae66f74348196e7a3d404f31751947766b","modified":1621861714843},{"_id":"public/categories/tip/debug/learning/index.html","hash":"7f954a27e1250240f6edb77bd5541357b7f5a844","modified":1621861714843},{"_id":"public/categories/tip/problem/gRpc/index.html","hash":"f62f147f9f37cc32d58154714e7ad6393817c599","modified":1621861714843},{"_id":"public/categories/tip/markdown/learning/index.html","hash":"08e86ce1c2e0c42fa6a5a691070a2288a796c67a","modified":1621861714843},{"_id":"public/categories/tip/vim/learning/index.html","hash":"6ef8876f3a9ce7a468263608c5ae2bccd567eab3","modified":1621861714843},{"_id":"public/categories/tip/web/learning/index.html","hash":"a3999babd49666a14f8ca6c587b3d17f58643469","modified":1621861714843},{"_id":"public/categories/note/db/index.html","hash":"1363ac00a9304ef021f2108a75ff6f95bd474dfc","modified":1621861714843},{"_id":"public/categories/note/Gui/index.html","hash":"7c6df23563686324aa85e2472cd218f6477f00d0","modified":1621861714843},{"_id":"public/categories/note/db/learning/index.html","hash":"a771edd65f90ee0b031facf9f9f1201d3be9eee6","modified":1621861714843},{"_id":"public/categories/note/Gui/learning/index.html","hash":"d2cc086bba53b7152964083bd5e324b75cb8346d","modified":1621861714843},{"_id":"public/categories/note/learning/index.html","hash":"174a54f00f3daebc89258e57a698b6336433845b","modified":1621861714843},{"_id":"public/categories/note/python/index.html","hash":"76eb82855fd68b656c652369f88f2de335110b1e","modified":1621861714843},{"_id":"public/categories/web/index.html","hash":"0316ebb79316436626d1c22ca4f3bafb761c397e","modified":1621861714843},{"_id":"public/categories/note/python/learning/index.html","hash":"d38badcdb2d207338bb2c97fb252d62dd2f11eb7","modified":1621861714843},{"_id":"public/categories/web/全栈笔记/index.html","hash":"c4691bda27cf0906421b8b84442c4ca1a344bf5b","modified":1621861714843},{"_id":"public/index.html","hash":"6050c1acb15ee342df0c71a51c6b552797f8631f","modified":1621861714843},{"_id":"public/page/2/index.html","hash":"c1e817431cc2b7d053dff01b5ac3b004daf10f57","modified":1621861714843},{"_id":"public/page/3/index.html","hash":"ab237790fc5a71639d68de151c3f3d364d25b830","modified":1621861714843},{"_id":"public/tags/杂谈/index.html","hash":"bf3f40f61f11dd41f22076cb640353e5c03a538d","modified":1621861714843},{"_id":"public/tags/更新说明/index.html","hash":"707702377f284ca2c8c2150315f352b2e48d5227","modified":1621861714843},{"_id":"public/tags/Japanese/index.html","hash":"9567aefe5f55c3a94ea345894be148198621b591","modified":1621861714843},{"_id":"public/tags/Sony-XZ1-Compact/index.html","hash":"a4e0e77fa9f415c5c238df1de04d184f632fb26e","modified":1621861714843},{"_id":"public/tags/经验笔记/index.html","hash":"b6867f6117d6c6d597935129819dac0a0efd623a","modified":1621861714843},{"_id":"public/tags/数据格式/index.html","hash":"c3aa1ad24bdfcf7e46a2427055f748807a9b5755","modified":1621861714843},{"_id":"public/tags/ue4/index.html","hash":"77d436a519a20058fc9988c848cb42db521abc67","modified":1621861714843},{"_id":"public/tags/learning/index.html","hash":"8f1e1c28cdcd119897d9ed3056113d3382816699","modified":1621861714843},{"_id":"public/tags/docker/index.html","hash":"dd097d3508143b530df6eecd5c24dd32053eb85f","modified":1621861714843},{"_id":"public/tags/golang/index.html","hash":"e27a447d22ea31bdca770908987d2bec296f5cf0","modified":1621861714843},{"_id":"public/tags/expansion/index.html","hash":"765fae56c73e29fb4f993a76e350295e32f58c19","modified":1621861714843},{"_id":"public/tags/java-springboot-mybatis-maven-learning/index.html","hash":"aaa461ab555612de5310e0a148a3362349c1b436","modified":1621861714843},{"_id":"public/tags/Linux/index.html","hash":"71be5770ca6312e9300b5945702325a8fc75e105","modified":1621861714843},{"_id":"public/tags/win/index.html","hash":"99352a2dd5182f83d1aa467ae88ea3a7f942fe76","modified":1621861714843},{"_id":"public/tags/git/index.html","hash":"66d042f9de4982c79ffd363709fad00d5628f35b","modified":1621861714843},{"_id":"public/tags/debuger/index.html","hash":"d8eeb8271c0bdd1e9e3d0d6b35a46fa5e2b4acb0","modified":1621861714843},{"_id":"public/tags/pdb/index.html","hash":"6bc9d6c7558f0b687b404dd85060fc68285bc18d","modified":1621861714843},{"_id":"public/tags/gdb/index.html","hash":"88fc72a358c4d922df77a10ebf74cf95f37cbb0d","modified":1621861714843},{"_id":"public/tags/rpc/index.html","hash":"37fbbf9791ffd52a606fa0ff8f72d318d07bb114","modified":1621861714843},{"_id":"public/tags/markdown/index.html","hash":"30ed84d3e260908d2cda5be58bfd4dfd88b40ba0","modified":1621861714843},{"_id":"public/tags/vim/index.html","hash":"0f7791ad388348b283139becdf7b9019c610f5bd","modified":1621861714843},{"_id":"public/tags/more/index.html","hash":"3ef23e56b31ee000fec7ce60f52a9946fcf5d310","modified":1621861714843},{"_id":"public/tags/less/index.html","hash":"99868f614439e5f6ce5b1bb762f6808575829967","modified":1621861714843},{"_id":"public/tags/nginx/index.html","hash":"cff02d565e274d8697dbaeb00f956cd5cfb63b53","modified":1621861714843},{"_id":"public/tags/keepalived/index.html","hash":"981c90c1aac4677a6724f32170ceddaf90e7dd88","modified":1621861714843},{"_id":"public/tags/mongo/index.html","hash":"7337d019b70df0ab6494d6078b50c63cacc861f4","modified":1621861714843},{"_id":"public/tags/mysql/index.html","hash":"419d59862e98309d975f1c106ef339bf9d4943f7","modified":1621861714843},{"_id":"public/tags/python/index.html","hash":"54917259060bb73d51c406b394600068db77ad5b","modified":1621861714843},{"_id":"public/tags/pyqt/index.html","hash":"3d6d1890c52e3313851f23fd9576f212ed04bb33","modified":1621861714843},{"_id":"public/tags/Gui/index.html","hash":"03cdcd96e223cb528ed06f43bce3084c932b7130","modified":1621861714843},{"_id":"public/tags/ml/index.html","hash":"5c61393bff555c349bfc99694f37888af634baf0","modified":1621861714843},{"_id":"public/tags/Vn-Py/index.html","hash":"5c37311f773a4e0bba751965e7425c3c71a81861","modified":1621861714843},{"_id":"public/tags/gui/index.html","hash":"d1f110f48293b1307de699fbce604da06e9e4cbc","modified":1621861714843},{"_id":"public/tags/socket/index.html","hash":"4ea894eb821b6a8344349845d5e85edcaf4ac98b","modified":1621861714843},{"_id":"public/tags/django/index.html","hash":"ed25f3027095f3ea17582c4d18893dd52b16aa72","modified":1621861714843},{"_id":"public/tags/missjava/index.html","hash":"4405bd141a853bbeb9b19d6357d3837b5750a427","modified":1621861714843},{"_id":"public/tags/vue/index.html","hash":"27aeda428353277c5214a7e90cfb837a51c74321","modified":1621861714843},{"_id":"public/tags/apache/index.html","hash":"da840558c062a1e7c2cd1654bcd11ee6b3ebca61","modified":1621861714843},{"_id":"public/tags/ajax/index.html","hash":"d13200b9591adb60e4b3ddba2fc2111a426b26f4","modified":1621861714843},{"_id":"public/css/images/logo-header.png","hash":"a874be8f3e33831614a421d1a74d2c13bd5eba59","modified":1621861714843},{"_id":"public/css/images/opacity-10.png","hash":"bbc979866c5b50e8adb348419154b28b1ff44d78","modified":1621861714843},{"_id":"public/css/images/s-left.png","hash":"c8cac4f4e3492606fab93196364bd0f87d93bb98","modified":1621861714843},{"_id":"public/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1621861714843},{"_id":"public/css/images/thumb-default.png","hash":"2d0ba175d958d342494241c616a74d37f48059fb","modified":1621861714843},{"_id":"public/css/images/vzs.jpeg","hash":"4fd564e71678b690f6fdbfe73531fce3089d687a","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.css.map","hash":"51e9df39edf0faa3f38c1bab0c1fa6c922b9edcb","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lg-transitions.css.map","hash":"50c3348638b4d82fa08a449c690e8d2bb593005d","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lightgallery.css.map","hash":"3175b4107078674d25798979f7666f4daf31e624","modified":1621861714843},{"_id":"public/libs/lightgallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1621861714843},{"_id":"public/libs/lightgallery/fonts/lg.svg","hash":"9a732790adc004b22022cc60fd5f77ec4c8e3e5a","modified":1621861714843},{"_id":"public/libs/lightgallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1621861714843},{"_id":"public/libs/lightgallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1621861714843},{"_id":"public/libs/lightgallery/img/loading.gif","hash":"607810444094b8619fa4efa6273bc2a7e38dd4b4","modified":1621861714843},{"_id":"public/libs/lightgallery/img/video-play.png","hash":"3ea484cdc04d2e4547f80cbf80001dcf248c94ef","modified":1621861714843},{"_id":"public/libs/lightgallery/img/vimeo-play.png","hash":"6190254f2804904a4a1fa1eb390dfd334e416992","modified":1621861714843},{"_id":"public/libs/lightgallery/img/youtube-play.png","hash":"fea6df9d9d43151f9c9d15f000adb30eb3e26fc4","modified":1621861714843},{"_id":"public/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1621861714843},{"_id":"public/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1621861714843},{"_id":"public/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcSo_WB_cotcEMUw1LsIE8mM.woff2","hash":"6d17eac7fcc2866f10d1f2725a08ab749a6e978d","modified":1621861714843},{"_id":"public/libs/titillium-web/fonts/7XUFZ5tgS-tD6QamInJTcZSnX671uNZIV63UdXh3Mg0.woff2","hash":"78029561e4c2ec565ea11c3f5bbd052b018af8a6","modified":1621861714843},{"_id":"public/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr4-67659ICLY8bMrYhtePPA.woff2","hash":"4e5557954ec161edc03b6f971ddefee6179c1305","modified":1621861714843},{"_id":"public/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr46gJz9aNFrmnwBdd69aqzY.woff2","hash":"1454a4753468b607c23deac9f5438cd0ed5cb35d","modified":1621861714843},{"_id":"public/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr9INifKjd1RJ3NxxEi9Cy2w.woff2","hash":"1758c64c8acec4497735ccb5336b1a518d24024c","modified":1621861714843},{"_id":"public/libs/titillium-web/fonts/anMUvcNT0H1YN4FII8wpr_SNRT0fZ5CX-AqRkMYgJJo.woff2","hash":"e2e2993940fc54ed41f26e39257fdbd824c05e81","modified":1621861714843},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1621861714843},{"_id":"public/libs/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1621861714843},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1621861714843},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1621861714843},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1621861714843},{"_id":"public/js/insight.js","hash":"6ee84c42c2b230ff9e9bf605a444bd671d44f9e3","modified":1621861714843},{"_id":"public/js/main.js","hash":"2ef5449478816096cdd0e9dde4d1fc1c2f33ab87","modified":1621861714843},{"_id":"public/libs/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1621861714843},{"_id":"public/libs/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1621861714843},{"_id":"public/libs/titillium-web/styles.css","hash":"d98f0c50aae4c922cd0b663fa820fd7dff2dd9b1","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.css","hash":"844ce27b8488968bccb3e50bb49184ba2aae0625","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.min.css","hash":"05830fadb8454f39dcc98c8686eb4d5c24b71fc0","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-autoplay.js","hash":"426bb78b93acfc39d533ea2bab1cec8dc289cf24","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-autoplay.min.js","hash":"d845741bcaf961579622880eb2a445257efad1ac","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-fullscreen.js","hash":"65c47ac65362854ba44b00a010bb01e3630209d8","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-fullscreen.min.js","hash":"b6b9e4022700b7faf2a5a175ba44a3bd938fdd20","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-hash.js","hash":"15d16516c5642d3de1566ff8fc9160136ccaa405","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-hash.min.js","hash":"43f1e1e720ab0e241c19b83aa26bd6848eab8edc","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-pager.js","hash":"8092c692b244bb26343eb03b91bd97deb9dafc9c","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-pager.min.js","hash":"25caa6ff65b1c6dee09941e795ae2633bdbab211","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-share.js","hash":"b7fb5f6474911060a351b0a6fe9dbb9ac3fb22aa","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-share.min.js","hash":"39c615f07c5d3aaa65a2c3068a30fdd6dd5c372d","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-thumbnail.min.js","hash":"18dd7d2909d1bfd6852f031d03e774b4428c512b","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-video.js","hash":"4f99b598f6bb18de9eca8c45c5b4373a03962367","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-video.min.js","hash":"032c001ab045a69856f9c3ed4a2a3bf12a8e310f","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-zoom.min.js","hash":"15b49f9728439819ece15e4295cce254c87a4f45","modified":1621861714843},{"_id":"public/css/style.css","hash":"872d6207105da5d22f506674f0ac3cae73f04ca9","modified":1621861714843},{"_id":"public/libs/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1621861714843},{"_id":"public/libs/font-awesome/css/font-awesome.min.css","hash":"7cd5a3384333f95c3d37d9488ad82cd6c4b03761","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lightgallery.css","hash":"bef55316a32e512d5a8940e5d0bfe8bf7a9c5c61","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lightgallery.min.css","hash":"c9a2e19c932b56f4a2ce30c98910d10b74edb38a","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-thumbnail.js","hash":"3a6476b6df1d2bef4a21861a78776282a7a11ef1","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lg-zoom.js","hash":"a758e2c8fcf710f9ff761da0eea0ab9321f3484d","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lightgallery.min.js","hash":"956ef9b706755318da69ad0b5d7786339d831251","modified":1621861714843},{"_id":"public/libs/font-awesome/css/font-awesome.css","hash":"b5020c3860669185ba3f316fa7332cdf5c06f393","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lg-transitions.css","hash":"7871c28498d74451d6aa438c8d3a1817810a1e19","modified":1621861714843},{"_id":"public/libs/lightgallery/css/lg-transitions.min.css","hash":"5c22e2073a4c96d6212c72135391b599e8d1359f","modified":1621861714843},{"_id":"public/libs/lightgallery/js/lightgallery.js","hash":"3cd19b33ba99efd5ba1d167da91720566d274b2c","modified":1621861714843},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1621861714843},{"_id":"public/libs/jquery/3.5.0/jquery.min.js","hash":"206ed314e32bca5b801434367d742c898572aea6","modified":1621861714843}],"Category":[{"name":"杂谈","_id":"ckp2ml9an0002u3yq9w6n3mma"},{"name":"note","_id":"ckp2ml9bl000eu3yq2ubt0u8q"},{"name":"new Things","_id":"ckp2ml9c9000pu3yq3e0whdt9"},{"name":"日记","parent":"ckp2ml9an0002u3yq9w6n3mma","_id":"ckp2ml9ck000uu3yq4bqxhmar"},{"name":"数据格式","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9d30014u3yqfs21ch2l"},{"name":"language","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9dp001cu3yq44zn9ybw"},{"name":"ue4","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9e2001gu3yqcj0mcqn1"},{"name":"docker","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9e9001ju3yqe12x2pdm"},{"name":"网络(Net)","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9ed001mu3yq9rqs08px"},{"name":"golang","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9em001qu3yq9izjhedh"},{"name":"手机","parent":"ckp2ml9c9000pu3yq3e0whdt9","_id":"ckp2ml9ex001xu3yq10qseq2e"},{"name":"java","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9f10020u3yqesek3ggt"},{"name":"linux","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9f50025u3yq4euw1qfn"},{"name":"tip","_id":"ckp2ml9f90029u3yqe1396mtw"},{"name":"Something","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9fj002hu3yqfhpx9yqm"},{"name":"test","parent":"ckp2ml9d30014u3yqfs21ch2l","_id":"ckp2ml9ft002ru3yqhvstcll6"},{"name":"learning","parent":"ckp2ml9dp001cu3yq44zn9ybw","_id":"ckp2ml9gf0032u3yq9il86qzo"},{"name":"learning","parent":"ckp2ml9e2001gu3yqcj0mcqn1","_id":"ckp2ml9gq003au3yq75237o1t"},{"name":"learning","parent":"ckp2ml9e9001ju3yqe12x2pdm","_id":"ckp2ml9gw003gu3yqgnefeqx6"},{"name":"expansion","parent":"ckp2ml9em001qu3yq9izjhedh","_id":"ckp2ml9gz003ku3yq9xltgve3"},{"name":"learning","parent":"ckp2ml9em001qu3yq9izjhedh","_id":"ckp2ml9h3003ou3yqgpj74a18"},{"name":"learning","parent":"ckp2ml9f10020u3yqesek3ggt","_id":"ckp2ml9h7003tu3yqaykaf67c"},{"name":"learning","parent":"ckp2ml9f50025u3yq4euw1qfn","_id":"ckp2ml9ha003zu3yq38zk89j3"},{"name":"换源","parent":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9hf0045u3yq3y3ja53h"},{"name":"problem","parent":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9hn004cu3yq4nh9292c"},{"name":"debug","parent":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9hq004fu3yq6d6418ob"},{"name":"markdown","parent":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9i1004lu3yq764cbbnw"},{"name":"vim","parent":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9i3004pu3yqfibj3mzh"},{"name":"web","parent":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9i5004ru3yq6syac0ub"},{"name":"learning","parent":"ckp2ml9hq004fu3yq6d6418ob","_id":"ckp2ml9i7004su3yq4tx77kne"},{"name":"gRpc","parent":"ckp2ml9hn004cu3yq4nh9292c","_id":"ckp2ml9i8004tu3yq3npyfwq1"},{"name":"learning","parent":"ckp2ml9i1004lu3yq764cbbnw","_id":"ckp2ml9ia004vu3yqhul8bsp5"},{"name":"learning","parent":"ckp2ml9i3004pu3yqfibj3mzh","_id":"ckp2ml9ic004yu3yq122dcgfu"},{"name":"learning","parent":"ckp2ml9i5004ru3yq6syac0ub","_id":"ckp2ml9if0051u3yqaenacz7n"},{"name":"db","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9jy005fu3yq0pa19m7r"},{"name":"Gui","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9k2005hu3yqhyjufkq2"},{"name":"learning","parent":"ckp2ml9jy005fu3yq0pa19m7r","_id":"ckp2ml9k5005ju3yq73kn1wds"},{"name":"learning","parent":"ckp2ml9k2005hu3yqhyjufkq2","_id":"ckp2ml9kc005nu3yqbtmag8sb"},{"name":"learning","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9l50063u3yqe4r6chfp"},{"name":"python","parent":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9lc0065u3yqgh6n4tgi"},{"name":"web","_id":"ckp2ml9ll006au3yq9cqp2pjk"},{"name":"learning","parent":"ckp2ml9lc0065u3yqgh6n4tgi","_id":"ckp2ml9lq006du3yqgxg17ylb"},{"name":"全栈笔记","parent":"ckp2ml9ll006au3yq9cqp2pjk","_id":"ckp2ml9lu006fu3yqc635adyw"}],"Data":[],"Page":[],"Post":[{"title":"编辑器使用","date":"2016-10-29T08:58:56.000Z","modified":"2018-05-15T01:36:59.000Z","slug":"editer","_content":"\n## Vim\n![vim](https://tse4-mm.cn.bing.net/th/id/OIP.RsJpt9plNxxlrxA9yV-OVwHaHa?pid=ImgDet&rs=1)\n### vim 查看日志中文乱码(2021)\n\n#### .bash_profile\n```\nexport LC_ALL=en_US.utf-8\n```\n#### .vimrc\n```\n set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936\n set termencoding=utf-8\n set encoding=utf-8\n```\n双管齐下, 一个解决`系统`配置, 一个解决`vim`配置\n### 中文乱码问题(2018)\n在`.bash_profile`中增加\n```\nexport LANG=zh_CN.utf8\nexport LC_ALL=zh_CN.utf8\n```\n即可增加中文支持。   不过，还是\n```\nexport LANG=en_US.utf8\nexport LC_ALL=en_US.utf8\n```\n比较香，因为中文字体很难看…\n^_^: \n    2019年5月5日19点46分\n\n## VS Code\n### venv\n#### Python\n`Command Palette...`(`Ctrl+Shift+p`)\n```\n>Python: Select Interpreter\n```\n\n然后选择就好了.\n\n## 三兄弟\n### 查看文本 列\n```bash\nawk -F ',' '{print $NF}'\n```\n- `,` 分隔符\n- `$NF` 末尾 同理也可 `$1`\n- `$1, $3` 表示1列+3列,并不含2列\n\n### find + vim 查找打开一条龙\n```bash\nfind * -name \"*wd.csv\" -exec vim {} \\;\n```\n来自`find --help`的解释: `-exec COMMAND ; -exec COMMAND {} + -ok COMMAND ;`\n`-exec`兼容多条命令, `bash`监控`;`,但`find`也用`;`中断,所以在`bash`运行需要转义一层....也就变成了`\\;`\n\n### Grep\n#### 排除某(些)文件(夹)\n##### 文件:\n`--exclude=`\n##### 文件类型:\n```\n grep \"get_wx_mapping\" . -r --exclude=*.{log,}\n```\n`{}`中貌似必须有`,`， 也就是说必须传入为列表， 不然不生效， 倒和`Python`的`tuple`类型有些相像。\n##### 文件夹:\n`--exclude-dir=`\n\n```bash\n个:\ngrep \"get_wx_mapping\" . -r --exclude-dir=log\n些:\ngrep \"get_wx_mapping\" . -r --exclude-dir={log,__pycache__}\n```","source":"_posts/editer.md","raw":"---\ntitle: 编辑器使用\ndate: 2016-10-29 16:58:56\nmodified: 2018-05-15 09:36:59\ncategories: 杂谈\ntags: 杂谈\nslug: \n---\n\n## Vim\n![vim](https://tse4-mm.cn.bing.net/th/id/OIP.RsJpt9plNxxlrxA9yV-OVwHaHa?pid=ImgDet&rs=1)\n### vim 查看日志中文乱码(2021)\n\n#### .bash_profile\n```\nexport LC_ALL=en_US.utf-8\n```\n#### .vimrc\n```\n set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936\n set termencoding=utf-8\n set encoding=utf-8\n```\n双管齐下, 一个解决`系统`配置, 一个解决`vim`配置\n### 中文乱码问题(2018)\n在`.bash_profile`中增加\n```\nexport LANG=zh_CN.utf8\nexport LC_ALL=zh_CN.utf8\n```\n即可增加中文支持。   不过，还是\n```\nexport LANG=en_US.utf8\nexport LC_ALL=en_US.utf8\n```\n比较香，因为中文字体很难看…\n^_^: \n    2019年5月5日19点46分\n\n## VS Code\n### venv\n#### Python\n`Command Palette...`(`Ctrl+Shift+p`)\n```\n>Python: Select Interpreter\n```\n\n然后选择就好了.\n\n## 三兄弟\n### 查看文本 列\n```bash\nawk -F ',' '{print $NF}'\n```\n- `,` 分隔符\n- `$NF` 末尾 同理也可 `$1`\n- `$1, $3` 表示1列+3列,并不含2列\n\n### find + vim 查找打开一条龙\n```bash\nfind * -name \"*wd.csv\" -exec vim {} \\;\n```\n来自`find --help`的解释: `-exec COMMAND ; -exec COMMAND {} + -ok COMMAND ;`\n`-exec`兼容多条命令, `bash`监控`;`,但`find`也用`;`中断,所以在`bash`运行需要转义一层....也就变成了`\\;`\n\n### Grep\n#### 排除某(些)文件(夹)\n##### 文件:\n`--exclude=`\n##### 文件类型:\n```\n grep \"get_wx_mapping\" . -r --exclude=*.{log,}\n```\n`{}`中貌似必须有`,`， 也就是说必须传入为列表， 不然不生效， 倒和`Python`的`tuple`类型有些相像。\n##### 文件夹:\n`--exclude-dir=`\n\n```bash\n个:\ngrep \"get_wx_mapping\" . -r --exclude-dir=log\n些:\ngrep \"get_wx_mapping\" . -r --exclude-dir={log,__pycache__}\n```","published":1,"updated":"2021-05-08T02:56:02.684Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9a10000u3yqh2vcclf6","content":"<h2 id=\"Vim\"><a href=\"#Vim\" class=\"headerlink\" title=\"Vim\"></a>Vim</h2><p><img src=\"https://tse4-mm.cn.bing.net/th/id/OIP.RsJpt9plNxxlrxA9yV-OVwHaHa?pid=ImgDet&rs=1\" alt=\"vim\"></p>\n<h3 id=\"vim-查看日志中文乱码-2021\"><a href=\"#vim-查看日志中文乱码-2021\" class=\"headerlink\" title=\"vim 查看日志中文乱码(2021)\"></a>vim 查看日志中文乱码(2021)</h3><h4 id=\"bash-profile\"><a href=\"#bash-profile\" class=\"headerlink\" title=\".bash_profile\"></a>.bash_profile</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LC_ALL&#x3D;en_US.utf-8</span><br></pre></td></tr></table></figure>\n<h4 id=\"vimrc\"><a href=\"#vimrc\" class=\"headerlink\" title=\".vimrc\"></a>.vimrc</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set fileencodings&#x3D;utf-8,ucs-bom,gb18030,gbk,gb2312,cp936</span><br><span class=\"line\">set termencoding&#x3D;utf-8</span><br><span class=\"line\">set encoding&#x3D;utf-8</span><br></pre></td></tr></table></figure>\n<p>双管齐下, 一个解决<code>系统</code>配置, 一个解决<code>vim</code>配置</p>\n<h3 id=\"中文乱码问题-2018\"><a href=\"#中文乱码问题-2018\" class=\"headerlink\" title=\"中文乱码问题(2018)\"></a>中文乱码问题(2018)</h3><p>在<code>.bash_profile</code>中增加</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LANG&#x3D;zh_CN.utf8</span><br><span class=\"line\">export LC_ALL&#x3D;zh_CN.utf8</span><br></pre></td></tr></table></figure>\n<p>即可增加中文支持。   不过，还是</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LANG&#x3D;en_US.utf8</span><br><span class=\"line\">export LC_ALL&#x3D;en_US.utf8</span><br></pre></td></tr></table></figure>\n<p>比较香，因为中文字体很难看…<br>^_^:<br>    2019年5月5日19点46分</p>\n<h2 id=\"VS-Code\"><a href=\"#VS-Code\" class=\"headerlink\" title=\"VS Code\"></a>VS Code</h2><h3 id=\"venv\"><a href=\"#venv\" class=\"headerlink\" title=\"venv\"></a>venv</h3><h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p><code>Command Palette...</code>(<code>Ctrl+Shift+p</code>)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;Python: Select Interpreter</span><br></pre></td></tr></table></figure>\n\n<p>然后选择就好了.</p>\n<h2 id=\"三兄弟\"><a href=\"#三兄弟\" class=\"headerlink\" title=\"三兄弟\"></a>三兄弟</h2><h3 id=\"查看文本-列\"><a href=\"#查看文本-列\" class=\"headerlink\" title=\"查看文本 列\"></a>查看文本 列</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F <span class=\"string\">&#x27;,&#x27;</span> <span class=\"string\">&#x27;&#123;print $NF&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>,</code> 分隔符</li>\n<li><code>$NF</code> 末尾 同理也可 <code>$1</code></li>\n<li><code>$1, $3</code> 表示1列+3列,并不含2列</li>\n</ul>\n<h3 id=\"find-vim-查找打开一条龙\"><a href=\"#find-vim-查找打开一条龙\" class=\"headerlink\" title=\"find + vim 查找打开一条龙\"></a>find + vim 查找打开一条龙</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find * -name <span class=\"string\">&quot;*wd.csv&quot;</span> -<span class=\"built_in\">exec</span> vim &#123;&#125; \\;</span><br></pre></td></tr></table></figure>\n<p>来自<code>find --help</code>的解释: <code>-exec COMMAND ; -exec COMMAND &#123;&#125; + -ok COMMAND ;</code><br><code>-exec</code>兼容多条命令, <code>bash</code>监控<code>;</code>,但<code>find</code>也用<code>;</code>中断,所以在<code>bash</code>运行需要转义一层….也就变成了<code>\\;</code></p>\n<h3 id=\"Grep\"><a href=\"#Grep\" class=\"headerlink\" title=\"Grep\"></a>Grep</h3><h4 id=\"排除某-些-文件-夹\"><a href=\"#排除某-些-文件-夹\" class=\"headerlink\" title=\"排除某(些)文件(夹)\"></a>排除某(些)文件(夹)</h4><h5 id=\"文件\"><a href=\"#文件\" class=\"headerlink\" title=\"文件:\"></a>文件:</h5><p><code>--exclude=</code></p>\n<h5 id=\"文件类型\"><a href=\"#文件类型\" class=\"headerlink\" title=\"文件类型:\"></a>文件类型:</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep &quot;get_wx_mapping&quot; . -r --exclude&#x3D;*.&#123;log,&#125;</span><br></pre></td></tr></table></figure>\n<p><code>&#123;&#125;</code>中貌似必须有<code>,</code>， 也就是说必须传入为列表， 不然不生效， 倒和<code>Python</code>的<code>tuple</code>类型有些相像。</p>\n<h5 id=\"文件夹\"><a href=\"#文件夹\" class=\"headerlink\" title=\"文件夹:\"></a>文件夹:</h5><p><code>--exclude-dir=</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">个:</span><br><span class=\"line\">grep <span class=\"string\">&quot;get_wx_mapping&quot;</span> . -r --exclude-dir=<span class=\"built_in\">log</span></span><br><span class=\"line\">些:</span><br><span class=\"line\">grep <span class=\"string\">&quot;get_wx_mapping&quot;</span> . -r --exclude-dir=&#123;<span class=\"built_in\">log</span>,__pycache__&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Vim\"><a href=\"#Vim\" class=\"headerlink\" title=\"Vim\"></a>Vim</h2><p><img src=\"https://tse4-mm.cn.bing.net/th/id/OIP.RsJpt9plNxxlrxA9yV-OVwHaHa?pid=ImgDet&rs=1\" alt=\"vim\"></p>\n<h3 id=\"vim-查看日志中文乱码-2021\"><a href=\"#vim-查看日志中文乱码-2021\" class=\"headerlink\" title=\"vim 查看日志中文乱码(2021)\"></a>vim 查看日志中文乱码(2021)</h3><h4 id=\"bash-profile\"><a href=\"#bash-profile\" class=\"headerlink\" title=\".bash_profile\"></a>.bash_profile</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LC_ALL&#x3D;en_US.utf-8</span><br></pre></td></tr></table></figure>\n<h4 id=\"vimrc\"><a href=\"#vimrc\" class=\"headerlink\" title=\".vimrc\"></a>.vimrc</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set fileencodings&#x3D;utf-8,ucs-bom,gb18030,gbk,gb2312,cp936</span><br><span class=\"line\">set termencoding&#x3D;utf-8</span><br><span class=\"line\">set encoding&#x3D;utf-8</span><br></pre></td></tr></table></figure>\n<p>双管齐下, 一个解决<code>系统</code>配置, 一个解决<code>vim</code>配置</p>\n<h3 id=\"中文乱码问题-2018\"><a href=\"#中文乱码问题-2018\" class=\"headerlink\" title=\"中文乱码问题(2018)\"></a>中文乱码问题(2018)</h3><p>在<code>.bash_profile</code>中增加</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LANG&#x3D;zh_CN.utf8</span><br><span class=\"line\">export LC_ALL&#x3D;zh_CN.utf8</span><br></pre></td></tr></table></figure>\n<p>即可增加中文支持。   不过，还是</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LANG&#x3D;en_US.utf8</span><br><span class=\"line\">export LC_ALL&#x3D;en_US.utf8</span><br></pre></td></tr></table></figure>\n<p>比较香，因为中文字体很难看…<br>^_^:<br>    2019年5月5日19点46分</p>\n<h2 id=\"VS-Code\"><a href=\"#VS-Code\" class=\"headerlink\" title=\"VS Code\"></a>VS Code</h2><h3 id=\"venv\"><a href=\"#venv\" class=\"headerlink\" title=\"venv\"></a>venv</h3><h4 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h4><p><code>Command Palette...</code>(<code>Ctrl+Shift+p</code>)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;Python: Select Interpreter</span><br></pre></td></tr></table></figure>\n\n<p>然后选择就好了.</p>\n<h2 id=\"三兄弟\"><a href=\"#三兄弟\" class=\"headerlink\" title=\"三兄弟\"></a>三兄弟</h2><h3 id=\"查看文本-列\"><a href=\"#查看文本-列\" class=\"headerlink\" title=\"查看文本 列\"></a>查看文本 列</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F <span class=\"string\">&#x27;,&#x27;</span> <span class=\"string\">&#x27;&#123;print $NF&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>,</code> 分隔符</li>\n<li><code>$NF</code> 末尾 同理也可 <code>$1</code></li>\n<li><code>$1, $3</code> 表示1列+3列,并不含2列</li>\n</ul>\n<h3 id=\"find-vim-查找打开一条龙\"><a href=\"#find-vim-查找打开一条龙\" class=\"headerlink\" title=\"find + vim 查找打开一条龙\"></a>find + vim 查找打开一条龙</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find * -name <span class=\"string\">&quot;*wd.csv&quot;</span> -<span class=\"built_in\">exec</span> vim &#123;&#125; \\;</span><br></pre></td></tr></table></figure>\n<p>来自<code>find --help</code>的解释: <code>-exec COMMAND ; -exec COMMAND &#123;&#125; + -ok COMMAND ;</code><br><code>-exec</code>兼容多条命令, <code>bash</code>监控<code>;</code>,但<code>find</code>也用<code>;</code>中断,所以在<code>bash</code>运行需要转义一层….也就变成了<code>\\;</code></p>\n<h3 id=\"Grep\"><a href=\"#Grep\" class=\"headerlink\" title=\"Grep\"></a>Grep</h3><h4 id=\"排除某-些-文件-夹\"><a href=\"#排除某-些-文件-夹\" class=\"headerlink\" title=\"排除某(些)文件(夹)\"></a>排除某(些)文件(夹)</h4><h5 id=\"文件\"><a href=\"#文件\" class=\"headerlink\" title=\"文件:\"></a>文件:</h5><p><code>--exclude=</code></p>\n<h5 id=\"文件类型\"><a href=\"#文件类型\" class=\"headerlink\" title=\"文件类型:\"></a>文件类型:</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep &quot;get_wx_mapping&quot; . -r --exclude&#x3D;*.&#123;log,&#125;</span><br></pre></td></tr></table></figure>\n<p><code>&#123;&#125;</code>中貌似必须有<code>,</code>， 也就是说必须传入为列表， 不然不生效， 倒和<code>Python</code>的<code>tuple</code>类型有些相像。</p>\n<h5 id=\"文件夹\"><a href=\"#文件夹\" class=\"headerlink\" title=\"文件夹:\"></a>文件夹:</h5><p><code>--exclude-dir=</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">个:</span><br><span class=\"line\">grep <span class=\"string\">&quot;get_wx_mapping&quot;</span> . -r --exclude-dir=<span class=\"built_in\">log</span></span><br><span class=\"line\">些:</span><br><span class=\"line\">grep <span class=\"string\">&quot;get_wx_mapping&quot;</span> . -r --exclude-dir=&#123;<span class=\"built_in\">log</span>,__pycache__&#125;</span><br></pre></td></tr></table></figure>"},{"title":"daily Notes","date":"2016-07-13T16:00:00.000Z","modified":"2017-04-08T08:58:59.000Z","slug":"dailynotes","_content":"\n<font size=4> 2018年12月12日 </font>\n今儿开始，以后信笔记就写在上面了——本来笔记就没顺序，而考虑翻看的时候总是翻页太麻烦，emm 虽说越来越习惯`grep`但    …有时候还是要看网页的嘛。而新笔记的翻看率总是高过旧笔记，所以就用这个顺序~😄\n\n\nEeont size=4>原因：</font>\n\n今天决定每天都写每日的学习总结，以此来激励。否则每天下来总觉得毫无收获，颇有空虚寂寞冷的感觉，也有当天学习的不真实感。此文章做做总概，目录的作用，详细的学习笔记就写在详细的文章下面。\n\n因为，暑假要学习日语，所以日常生活中能用日记就尽量用了。对于培养日语语感和结构的记忆及习惯，很有作用。\n日语\n\n<font size=4>16-07-14</font>\n用于比较的句型：より　ほど\n变化、使变化的句式。\n<font size=4>16-07-16</font>\n昨天用的Winodos所以没发写了。\n重新记了初上的18课内容。\n<font size=4>16-07-18</font>\nB站上的每晚一句感觉不错。因为是长句嘛，能够更加详细了解句子逻辑和词语使用规律\n<font size=4>16-07-19</font>\n復習\nPelican\n\n<font size=4>16-07-14</font>\n换了一个更加清明的主题，能够能好的搜索，并且显示格式也很顺眼。而且能够自动形成Tags等的文章链接。基本上满足我的写作还有以后用来搜索的需求了。而且也很简约漂亮。\n明天再学习一些嵌入式以及Linux的内容～ 16-07-19 插入图片：图床 评论系统：Disqus 数学公式：latex\n\nLinux\n\n<font size=4>16-07-16</font>\nSSH rsync VNC 等命令的学习和使用。为此，倒是专门安装了一个Ubuntu的Servery版本的虚拟机。\n<font size=4>16-07-17</font>\ndisk LVM\n<font size=4>16-07-18</font>\n复习了一些网络部分。\n<font size=4>16-07-18</font>\nVi && Vim\n果然在了解了一些按鍵的作用之後感覺無愧‘於編輯器之神’的稱號。輸入法不小心點成繁體了，懶得改回簡體————或許有‘懶’的比賽我能進三甲。\n<font size=4>16-07-26</font>\n這兩三天看了看 嵌入式的ARM系列板開發，當然主要看了看Linux 移植一類。只不過說是教程也不過是流程吧。通篇下來基本上用的最多的語句即使 把這個這樣，那個這樣一下。具體爲什麼全然わかりませんね！ 不過也沒關係，留下來自己回頭再看看就行了。後面再看一下Qt程序的移植就可以完美收官了，在嵌入式的領域。\n<font size=4>16-08-03</font>\n看完了——只不過很可惜沒有實驗板，所以不能進行實驗。開學之後在學校吧。當然，學習斷線了一些時候，嗯嗯……\n<font size=4>16-08-11</font>\nmusicbox\nNethack ————A Game\n\n還沒玩，或者說還沒看說明手冊先瞎玩一氣。雖說有一塌糊塗，不過我有預感，這確實是一款很好的自由地牢遊戲。\nBlender ーー建模 動畫軟件\n\n<font size=4>16-08-03</font>\n重溫一下Blender，在快捷鍵上略做一些記錄，否則每次都忘……\n:::ide*er的上一行不能为空，缩进一下，然后写就可以了。\n:::ide*er的上一行不能为空，缩进一下，然后写就可以了。\n藝術\n\n<font size=4>16-08-11</font>\n這幾天在看《藝術概論》《什麼是藝術》《電影理論基礎》，因爲是下到Reader上了，倒也沒有開機來寫總結。之後有什麼總結之類就再另開一個文章專門記錄個人所感所得。\n<font size=4>16-8-29</font>\n\n终结  往后作为假期学习记录不定时更\n\n<font size=4>17-04-08</font>\n好东西自然要重新启动，只不过配起来有些麻烦，前些日子的.md文件也丢光了，所以一直懒得再写。实在不应该……\n\n<font size=4>18-05-15</font>\n居然在公司工作时间来将博客来更了…   emm 也没办法 调试时间太长，一边等结果一边儿就把博客重整了一遍。   但还有一些文章不好意思放上来，之后整理一下放呗.顺便一说，我之前18年其实也重整过一次…不过伴随着我的Ubuntu系统saybye 甚至丢失了我U盘里面保存的一些聊天记录！！！！！！！   😔\n故人西辞黄鹤楼\n白云空载轻悠悠\n不识人间好颜色\n江边黄花两对愁\n    去年17年佳作~~~lul\n\n<font size=4>18-06-21</font>\n今天又重整了俺封装的`MySQL Connecter`的`python`库，完善了之前的查找功能和删除功能。 不过话说之前写的插入功能就是好用hhhh。   嗯~ o(*￣▽￣*)o   有空干脆再用`python`去写一个`mysql`的表设计程序算了~  就类似`powerDesigner`在`MySQL`这边儿的作用，顺便也好想写一个能代替`Navicat`的小工具… 反正都是大家都是调用`sql`语句。(⊙﹏⊙) 其实发展发展我这个小库就能做了。有时间再说呗(没时间~，~)\n","source":"_posts/dailynotes.md","raw":"---\ntitle: daily Notes\ndate: 2016-07-14 \nmodified: 2017-04-08 16:58:59\ncategory: [杂谈,日记]\ntags: [杂谈,更新说明]\nslug: \n---\n\n<font size=4> 2018年12月12日 </font>\n今儿开始，以后信笔记就写在上面了——本来笔记就没顺序，而考虑翻看的时候总是翻页太麻烦，emm 虽说越来越习惯`grep`但    …有时候还是要看网页的嘛。而新笔记的翻看率总是高过旧笔记，所以就用这个顺序~😄\n\n\nEeont size=4>原因：</font>\n\n今天决定每天都写每日的学习总结，以此来激励。否则每天下来总觉得毫无收获，颇有空虚寂寞冷的感觉，也有当天学习的不真实感。此文章做做总概，目录的作用，详细的学习笔记就写在详细的文章下面。\n\n因为，暑假要学习日语，所以日常生活中能用日记就尽量用了。对于培养日语语感和结构的记忆及习惯，很有作用。\n日语\n\n<font size=4>16-07-14</font>\n用于比较的句型：より　ほど\n变化、使变化的句式。\n<font size=4>16-07-16</font>\n昨天用的Winodos所以没发写了。\n重新记了初上的18课内容。\n<font size=4>16-07-18</font>\nB站上的每晚一句感觉不错。因为是长句嘛，能够更加详细了解句子逻辑和词语使用规律\n<font size=4>16-07-19</font>\n復習\nPelican\n\n<font size=4>16-07-14</font>\n换了一个更加清明的主题，能够能好的搜索，并且显示格式也很顺眼。而且能够自动形成Tags等的文章链接。基本上满足我的写作还有以后用来搜索的需求了。而且也很简约漂亮。\n明天再学习一些嵌入式以及Linux的内容～ 16-07-19 插入图片：图床 评论系统：Disqus 数学公式：latex\n\nLinux\n\n<font size=4>16-07-16</font>\nSSH rsync VNC 等命令的学习和使用。为此，倒是专门安装了一个Ubuntu的Servery版本的虚拟机。\n<font size=4>16-07-17</font>\ndisk LVM\n<font size=4>16-07-18</font>\n复习了一些网络部分。\n<font size=4>16-07-18</font>\nVi && Vim\n果然在了解了一些按鍵的作用之後感覺無愧‘於編輯器之神’的稱號。輸入法不小心點成繁體了，懶得改回簡體————或許有‘懶’的比賽我能進三甲。\n<font size=4>16-07-26</font>\n這兩三天看了看 嵌入式的ARM系列板開發，當然主要看了看Linux 移植一類。只不過說是教程也不過是流程吧。通篇下來基本上用的最多的語句即使 把這個這樣，那個這樣一下。具體爲什麼全然わかりませんね！ 不過也沒關係，留下來自己回頭再看看就行了。後面再看一下Qt程序的移植就可以完美收官了，在嵌入式的領域。\n<font size=4>16-08-03</font>\n看完了——只不過很可惜沒有實驗板，所以不能進行實驗。開學之後在學校吧。當然，學習斷線了一些時候，嗯嗯……\n<font size=4>16-08-11</font>\nmusicbox\nNethack ————A Game\n\n還沒玩，或者說還沒看說明手冊先瞎玩一氣。雖說有一塌糊塗，不過我有預感，這確實是一款很好的自由地牢遊戲。\nBlender ーー建模 動畫軟件\n\n<font size=4>16-08-03</font>\n重溫一下Blender，在快捷鍵上略做一些記錄，否則每次都忘……\n:::ide*er的上一行不能为空，缩进一下，然后写就可以了。\n:::ide*er的上一行不能为空，缩进一下，然后写就可以了。\n藝術\n\n<font size=4>16-08-11</font>\n這幾天在看《藝術概論》《什麼是藝術》《電影理論基礎》，因爲是下到Reader上了，倒也沒有開機來寫總結。之後有什麼總結之類就再另開一個文章專門記錄個人所感所得。\n<font size=4>16-8-29</font>\n\n终结  往后作为假期学习记录不定时更\n\n<font size=4>17-04-08</font>\n好东西自然要重新启动，只不过配起来有些麻烦，前些日子的.md文件也丢光了，所以一直懒得再写。实在不应该……\n\n<font size=4>18-05-15</font>\n居然在公司工作时间来将博客来更了…   emm 也没办法 调试时间太长，一边等结果一边儿就把博客重整了一遍。   但还有一些文章不好意思放上来，之后整理一下放呗.顺便一说，我之前18年其实也重整过一次…不过伴随着我的Ubuntu系统saybye 甚至丢失了我U盘里面保存的一些聊天记录！！！！！！！   😔\n故人西辞黄鹤楼\n白云空载轻悠悠\n不识人间好颜色\n江边黄花两对愁\n    去年17年佳作~~~lul\n\n<font size=4>18-06-21</font>\n今天又重整了俺封装的`MySQL Connecter`的`python`库，完善了之前的查找功能和删除功能。 不过话说之前写的插入功能就是好用hhhh。   嗯~ o(*￣▽￣*)o   有空干脆再用`python`去写一个`mysql`的表设计程序算了~  就类似`powerDesigner`在`MySQL`这边儿的作用，顺便也好想写一个能代替`Navicat`的小工具… 反正都是大家都是调用`sql`语句。(⊙﹏⊙) 其实发展发展我这个小库就能做了。有时间再说呗(没时间~，~)\n","published":1,"updated":"2021-05-08T02:56:02.684Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9ah0001u3yq3i6z1u62","content":"<p><font size=4> 2018年12月12日 </font><br>今儿开始，以后信笔记就写在上面了——本来笔记就没顺序，而考虑翻看的时候总是翻页太麻烦，emm 虽说越来越习惯<code>grep</code>但    …有时候还是要看网页的嘛。而新笔记的翻看率总是高过旧笔记，所以就用这个顺序~😄</p>\n<p>Eeont size=4&gt;原因：</font></p>\n<p>今天决定每天都写每日的学习总结，以此来激励。否则每天下来总觉得毫无收获，颇有空虚寂寞冷的感觉，也有当天学习的不真实感。此文章做做总概，目录的作用，详细的学习笔记就写在详细的文章下面。</p>\n<p>因为，暑假要学习日语，所以日常生活中能用日记就尽量用了。对于培养日语语感和结构的记忆及习惯，很有作用。<br>日语</p>\n<p><font size=4>16-07-14</font><br>用于比较的句型：より　ほど<br>变化、使变化的句式。<br><font size=4>16-07-16</font><br>昨天用的Winodos所以没发写了。<br>重新记了初上的18课内容。<br><font size=4>16-07-18</font><br>B站上的每晚一句感觉不错。因为是长句嘛，能够更加详细了解句子逻辑和词语使用规律<br><font size=4>16-07-19</font><br>復習<br>Pelican</p>\n<p><font size=4>16-07-14</font><br>换了一个更加清明的主题，能够能好的搜索，并且显示格式也很顺眼。而且能够自动形成Tags等的文章链接。基本上满足我的写作还有以后用来搜索的需求了。而且也很简约漂亮。<br>明天再学习一些嵌入式以及Linux的内容～ 16-07-19 插入图片：图床 评论系统：Disqus 数学公式：latex</p>\n<p>Linux</p>\n<p><font size=4>16-07-16</font><br>SSH rsync VNC 等命令的学习和使用。为此，倒是专门安装了一个Ubuntu的Servery版本的虚拟机。<br><font size=4>16-07-17</font><br>disk LVM<br><font size=4>16-07-18</font><br>复习了一些网络部分。<br><font size=4>16-07-18</font><br>Vi &amp;&amp; Vim<br>果然在了解了一些按鍵的作用之後感覺無愧‘於編輯器之神’的稱號。輸入法不小心點成繁體了，懶得改回簡體————或許有‘懶’的比賽我能進三甲。<br><font size=4>16-07-26</font><br>這兩三天看了看 嵌入式的ARM系列板開發，當然主要看了看Linux 移植一類。只不過說是教程也不過是流程吧。通篇下來基本上用的最多的語句即使 把這個這樣，那個這樣一下。具體爲什麼全然わかりませんね！ 不過也沒關係，留下來自己回頭再看看就行了。後面再看一下Qt程序的移植就可以完美收官了，在嵌入式的領域。<br><font size=4>16-08-03</font><br>看完了——只不過很可惜沒有實驗板，所以不能進行實驗。開學之後在學校吧。當然，學習斷線了一些時候，嗯嗯……<br><font size=4>16-08-11</font><br>musicbox<br>Nethack ————A Game</p>\n<p>還沒玩，或者說還沒看說明手冊先瞎玩一氣。雖說有一塌糊塗，不過我有預感，這確實是一款很好的自由地牢遊戲。<br>Blender ーー建模 動畫軟件</p>\n<p><font size=4>16-08-03</font><br>重溫一下Blender，在快捷鍵上略做一些記錄，否則每次都忘……<br>:::ide<em>er的上一行不能为空，缩进一下，然后写就可以了。<br>:::ide</em>er的上一行不能为空，缩进一下，然后写就可以了。<br>藝術</p>\n<p><font size=4>16-08-11</font><br>這幾天在看《藝術概論》《什麼是藝術》《電影理論基礎》，因爲是下到Reader上了，倒也沒有開機來寫總結。之後有什麼總結之類就再另開一個文章專門記錄個人所感所得。<br><font size=4>16-8-29</font></p>\n<p>终结  往后作为假期学习记录不定时更</p>\n<p><font size=4>17-04-08</font><br>好东西自然要重新启动，只不过配起来有些麻烦，前些日子的.md文件也丢光了，所以一直懒得再写。实在不应该……</p>\n<p><font size=4>18-05-15</font><br>居然在公司工作时间来将博客来更了…   emm 也没办法 调试时间太长，一边等结果一边儿就把博客重整了一遍。   但还有一些文章不好意思放上来，之后整理一下放呗.顺便一说，我之前18年其实也重整过一次…不过伴随着我的Ubuntu系统saybye 甚至丢失了我U盘里面保存的一些聊天记录！！！！！！！   😔<br>故人西辞黄鹤楼<br>白云空载轻悠悠<br>不识人间好颜色<br>江边黄花两对愁<br>    去年17年佳作~~~lul</p>\n<p><font size=4>18-06-21</font><br>今天又重整了俺封装的<code>MySQL Connecter</code>的<code>python</code>库，完善了之前的查找功能和删除功能。 不过话说之前写的插入功能就是好用hhhh。   嗯~ o(<em>￣▽￣</em>)o   有空干脆再用<code>python</code>去写一个<code>mysql</code>的表设计程序算了~  就类似<code>powerDesigner</code>在<code>MySQL</code>这边儿的作用，顺便也好想写一个能代替<code>Navicat</code>的小工具… 反正都是大家都是调用<code>sql</code>语句。(⊙﹏⊙) 其实发展发展我这个小库就能做了。有时间再说呗(没时间<del>，</del>)</p>\n","site":{"data":{}},"excerpt":"","more":"<p><font size=4> 2018年12月12日 </font><br>今儿开始，以后信笔记就写在上面了——本来笔记就没顺序，而考虑翻看的时候总是翻页太麻烦，emm 虽说越来越习惯<code>grep</code>但    …有时候还是要看网页的嘛。而新笔记的翻看率总是高过旧笔记，所以就用这个顺序~😄</p>\n<p>Eeont size=4&gt;原因：</font></p>\n<p>今天决定每天都写每日的学习总结，以此来激励。否则每天下来总觉得毫无收获，颇有空虚寂寞冷的感觉，也有当天学习的不真实感。此文章做做总概，目录的作用，详细的学习笔记就写在详细的文章下面。</p>\n<p>因为，暑假要学习日语，所以日常生活中能用日记就尽量用了。对于培养日语语感和结构的记忆及习惯，很有作用。<br>日语</p>\n<p><font size=4>16-07-14</font><br>用于比较的句型：より　ほど<br>变化、使变化的句式。<br><font size=4>16-07-16</font><br>昨天用的Winodos所以没发写了。<br>重新记了初上的18课内容。<br><font size=4>16-07-18</font><br>B站上的每晚一句感觉不错。因为是长句嘛，能够更加详细了解句子逻辑和词语使用规律<br><font size=4>16-07-19</font><br>復習<br>Pelican</p>\n<p><font size=4>16-07-14</font><br>换了一个更加清明的主题，能够能好的搜索，并且显示格式也很顺眼。而且能够自动形成Tags等的文章链接。基本上满足我的写作还有以后用来搜索的需求了。而且也很简约漂亮。<br>明天再学习一些嵌入式以及Linux的内容～ 16-07-19 插入图片：图床 评论系统：Disqus 数学公式：latex</p>\n<p>Linux</p>\n<p><font size=4>16-07-16</font><br>SSH rsync VNC 等命令的学习和使用。为此，倒是专门安装了一个Ubuntu的Servery版本的虚拟机。<br><font size=4>16-07-17</font><br>disk LVM<br><font size=4>16-07-18</font><br>复习了一些网络部分。<br><font size=4>16-07-18</font><br>Vi &amp;&amp; Vim<br>果然在了解了一些按鍵的作用之後感覺無愧‘於編輯器之神’的稱號。輸入法不小心點成繁體了，懶得改回簡體————或許有‘懶’的比賽我能進三甲。<br><font size=4>16-07-26</font><br>這兩三天看了看 嵌入式的ARM系列板開發，當然主要看了看Linux 移植一類。只不過說是教程也不過是流程吧。通篇下來基本上用的最多的語句即使 把這個這樣，那個這樣一下。具體爲什麼全然わかりませんね！ 不過也沒關係，留下來自己回頭再看看就行了。後面再看一下Qt程序的移植就可以完美收官了，在嵌入式的領域。<br><font size=4>16-08-03</font><br>看完了——只不過很可惜沒有實驗板，所以不能進行實驗。開學之後在學校吧。當然，學習斷線了一些時候，嗯嗯……<br><font size=4>16-08-11</font><br>musicbox<br>Nethack ————A Game</p>\n<p>還沒玩，或者說還沒看說明手冊先瞎玩一氣。雖說有一塌糊塗，不過我有預感，這確實是一款很好的自由地牢遊戲。<br>Blender ーー建模 動畫軟件</p>\n<p><font size=4>16-08-03</font><br>重溫一下Blender，在快捷鍵上略做一些記錄，否則每次都忘……<br>:::ide<em>er的上一行不能为空，缩进一下，然后写就可以了。<br>:::ide</em>er的上一行不能为空，缩进一下，然后写就可以了。<br>藝術</p>\n<p><font size=4>16-08-11</font><br>這幾天在看《藝術概論》《什麼是藝術》《電影理論基礎》，因爲是下到Reader上了，倒也沒有開機來寫總結。之後有什麼總結之類就再另開一個文章專門記錄個人所感所得。<br><font size=4>16-8-29</font></p>\n<p>终结  往后作为假期学习记录不定时更</p>\n<p><font size=4>17-04-08</font><br>好东西自然要重新启动，只不过配起来有些麻烦，前些日子的.md文件也丢光了，所以一直懒得再写。实在不应该……</p>\n<p><font size=4>18-05-15</font><br>居然在公司工作时间来将博客来更了…   emm 也没办法 调试时间太长，一边等结果一边儿就把博客重整了一遍。   但还有一些文章不好意思放上来，之后整理一下放呗.顺便一说，我之前18年其实也重整过一次…不过伴随着我的Ubuntu系统saybye 甚至丢失了我U盘里面保存的一些聊天记录！！！！！！！   😔<br>故人西辞黄鹤楼<br>白云空载轻悠悠<br>不识人间好颜色<br>江边黄花两对愁<br>    去年17年佳作~~~lul</p>\n<p><font size=4>18-06-21</font><br>今天又重整了俺封装的<code>MySQL Connecter</code>的<code>python</code>库，完善了之前的查找功能和删除功能。 不过话说之前写的插入功能就是好用hhhh。   嗯~ o(<em>￣▽￣</em>)o   有空干脆再用<code>python</code>去写一个<code>mysql</code>的表设计程序算了~  就类似<code>powerDesigner</code>在<code>MySQL</code>这边儿的作用，顺便也好想写一个能代替<code>Navicat</code>的小工具… 反正都是大家都是调用<code>sql</code>语句。(⊙﹏⊙) 其实发展发展我这个小库就能做了。有时间再说呗(没时间<del>，</del>)</p>\n"},{"title":"Japanese Learning","date":"2016-11-07T16:00:00.000Z","modified":"2017-04-08T08:58:59.000Z","slug":"japaneseLearning","_content":"#### より、ほど\n    2月は　1月より　ずっど　寒いです。\n    1がつは　2月ほど　さむくないです（寒くない）。\n        ーーーー比较      前，肯定，后否定。\n    1月より　2月ほうが　寒いです。  家族で誰が　一番歌が上手ですか。\n        ーーーより被比者　 ほが选定者、更加者 ーーーで：划分范围　いちばん：最高\n    1月と　2月と　とどちらが　寒いですか。    ...2月のほうが寒いです。\n        ーー二选一句型。...と..と　　答句：のほうがーー更～冷。\n##### ほうが　いいです　 一类形/二类形 ほうが　いいです いる：犬がいる　有狗 N->N 窗那儿有的人\n\n---\n\n#### 变化\n##### いー＞く　+なる（なります)　　だー＞に　+する（します） 成为…变成… 使成/变为… \n前者，无主观后者有主观要变 二类形/名 に　なります　...に　します \n变成某种N ーーー性质状态发生变化 后者因主语意志、动作引起　\n\t電気を消し（けし）で、暗（くら）くします。　もう春になったから、暖かくなる。　（あたたかい）　　\n\t夜（よる）に　なりました。部屋が暗くなりました。　名词に　します。要什么\n\t息子は　医者に　なります。　　話を　簡単（かんたん）に　します。\n\t今年（ことし）七歳に　なりました。           欲しい　なりました\n##### だー＞な \n\tこの会社で歌が一番上手な人はだれですか。\n\tーー森さんだ+と思（おも）います\n---\n\n#### 并列\n\n一类形 て 一类形(いー＞く) 二类形 で 二类形   名1 で 名2 动て+います\n\n---\n\n#### 词语细分\n音（おと）：物体发出  　声（こえ）：人、动物意志物发出        できるだけ　軽い（かるい）します。ーー尽量……\n\n---\n\n#### 假定\n##### +れば：\n現実を直視なければ．人間変わらないんだ。　直視ければ　　んだ＝！！\n...れば、...ほど　　...れば、...だけ　　越...越...\n前者 .^. 表程度  后者 .^. 表两件事物 \n食べれば食べるほど美味しいですよ。　　〜　、〜\n\n---\n\n#### 意愿邀请\n...たい　ゲエム(game)をしたいです。  勉強しくないです。\n...ましょう/ませんが　もう遅(おそ)いですから、寝(ね)ましょう。 \n...ましょうか　暑いですから、クーラーを(くーらーを)つけましょうか。\n\tあっ、雨(あめ)が降っていますね。傘を貸(か)しましょうが。\nお見合い(おみあい)故郷へ帰りました。 回家相亲（有个老家的词，打不出来哦 実家(じっか)貌似促音的听不出来……）\n\n---\n\n#### 词性转换\n##### V->N:..+こと\n\t..ことが　できます　ケーキを作ることが　できますか。 \n\t...は..ことです　仕事(しこと)は日本語を教(おし)えることです。\n\t..前に    ご飯を食べる前に手(て)を洗(あら)っとください。食事（しょくじ）\n##### N->N:...+ところ　\n\tあの　窓（まど）のところに　いる人は誰ですか。\n\t\t..那儿（人也可+）\n","source":"_posts/japaneseLearning.md","raw":"---\ntitle: Japanese Learning\ndate: 2016-11-08 \nmodified: 2017-04-08 16:58:59\ncategory: [note, language, learning]\ntags: Japanese\nslug: \n---\n#### より、ほど\n    2月は　1月より　ずっど　寒いです。\n    1がつは　2月ほど　さむくないです（寒くない）。\n        ーーーー比较      前，肯定，后否定。\n    1月より　2月ほうが　寒いです。  家族で誰が　一番歌が上手ですか。\n        ーーーより被比者　 ほが选定者、更加者 ーーーで：划分范围　いちばん：最高\n    1月と　2月と　とどちらが　寒いですか。    ...2月のほうが寒いです。\n        ーー二选一句型。...と..と　　答句：のほうがーー更～冷。\n##### ほうが　いいです　 一类形/二类形 ほうが　いいです いる：犬がいる　有狗 N->N 窗那儿有的人\n\n---\n\n#### 变化\n##### いー＞く　+なる（なります)　　だー＞に　+する（します） 成为…变成… 使成/变为… \n前者，无主观后者有主观要变 二类形/名 に　なります　...に　します \n变成某种N ーーー性质状态发生变化 后者因主语意志、动作引起　\n\t電気を消し（けし）で、暗（くら）くします。　もう春になったから、暖かくなる。　（あたたかい）　　\n\t夜（よる）に　なりました。部屋が暗くなりました。　名词に　します。要什么\n\t息子は　医者に　なります。　　話を　簡単（かんたん）に　します。\n\t今年（ことし）七歳に　なりました。           欲しい　なりました\n##### だー＞な \n\tこの会社で歌が一番上手な人はだれですか。\n\tーー森さんだ+と思（おも）います\n---\n\n#### 并列\n\n一类形 て 一类形(いー＞く) 二类形 で 二类形   名1 で 名2 动て+います\n\n---\n\n#### 词语细分\n音（おと）：物体发出  　声（こえ）：人、动物意志物发出        できるだけ　軽い（かるい）します。ーー尽量……\n\n---\n\n#### 假定\n##### +れば：\n現実を直視なければ．人間変わらないんだ。　直視ければ　　んだ＝！！\n...れば、...ほど　　...れば、...だけ　　越...越...\n前者 .^. 表程度  后者 .^. 表两件事物 \n食べれば食べるほど美味しいですよ。　　〜　、〜\n\n---\n\n#### 意愿邀请\n...たい　ゲエム(game)をしたいです。  勉強しくないです。\n...ましょう/ませんが　もう遅(おそ)いですから、寝(ね)ましょう。 \n...ましょうか　暑いですから、クーラーを(くーらーを)つけましょうか。\n\tあっ、雨(あめ)が降っていますね。傘を貸(か)しましょうが。\nお見合い(おみあい)故郷へ帰りました。 回家相亲（有个老家的词，打不出来哦 実家(じっか)貌似促音的听不出来……）\n\n---\n\n#### 词性转换\n##### V->N:..+こと\n\t..ことが　できます　ケーキを作ることが　できますか。 \n\t...は..ことです　仕事(しこと)は日本語を教(おし)えることです。\n\t..前に    ご飯を食べる前に手(て)を洗(あら)っとください。食事（しょくじ）\n##### N->N:...+ところ　\n\tあの　窓（まど）のところに　いる人は誰ですか。\n\t\t..那儿（人也可+）\n","published":1,"updated":"2021-05-08T02:56:02.684Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9av0004u3yq08d2bnee","content":"<h4 id=\"より、ほど\"><a href=\"#より、ほど\" class=\"headerlink\" title=\"より、ほど\"></a>より、ほど</h4><pre><code>2月は　1月より　ずっど　寒いです。\n1がつは　2月ほど　さむくないです（寒くない）。\n    ーーーー比较      前，肯定，后否定。\n1月より　2月ほうが　寒いです。  家族で誰が　一番歌が上手ですか。\n    ーーーより被比者　 ほが选定者、更加者 ーーーで：划分范围　いちばん：最高\n1月と　2月と　とどちらが　寒いですか。    ...2月のほうが寒いです。\n    ーー二选一句型。...と..と　　答句：のほうがーー更～冷。\n</code></pre>\n<h5 id=\"ほうが-いいです-一类形-二类形-ほうが-いいです-いる：犬がいる-有狗-N-gt-N-窗那儿有的人\"><a href=\"#ほうが-いいです-一类形-二类形-ほうが-いいです-いる：犬がいる-有狗-N-gt-N-窗那儿有的人\" class=\"headerlink\" title=\"ほうが　いいです　 一类形/二类形 ほうが　いいです いる：犬がいる　有狗 N-&gt;N 窗那儿有的人\"></a>ほうが　いいです　 一类形/二类形 ほうが　いいです いる：犬がいる　有狗 N-&gt;N 窗那儿有的人</h5><hr>\n<h4 id=\"变化\"><a href=\"#变化\" class=\"headerlink\" title=\"变化\"></a>变化</h4><h5 id=\"いー＞く-なる（なります-だー＞に-する（します）-成为…变成…-使成-变为…\"><a href=\"#いー＞く-なる（なります-だー＞に-する（します）-成为…变成…-使成-变为…\" class=\"headerlink\" title=\"いー＞く　+なる（なります)　　だー＞に　+する（します） 成为…变成… 使成/变为…\"></a>いー＞く　+なる（なります)　　だー＞に　+する（します） 成为…变成… 使成/变为…</h5><p>前者，无主观后者有主观要变 二类形/名 に　なります　…に　します<br>变成某种N ーーー性质状态发生变化 后者因主语意志、动作引起　<br>    電気を消し（けし）で、暗（くら）くします。　もう春になったから、暖かくなる。　（あたたかい）　　<br>    夜（よる）に　なりました。部屋が暗くなりました。　名词に　します。要什么<br>    息子は　医者に　なります。　　話を　簡単（かんたん）に　します。<br>    今年（ことし）七歳に　なりました。           欲しい　なりました</p>\n<h5 id=\"だー＞な\"><a href=\"#だー＞な\" class=\"headerlink\" title=\"だー＞な\"></a>だー＞な</h5><pre><code>この会社で歌が一番上手な人はだれですか。\nーー森さんだ+と思（おも）います\n</code></pre>\n<hr>\n<h4 id=\"并列\"><a href=\"#并列\" class=\"headerlink\" title=\"并列\"></a>并列</h4><p>一类形 て 一类形(いー＞く) 二类形 で 二类形   名1 で 名2 动て+います</p>\n<hr>\n<h4 id=\"词语细分\"><a href=\"#词语细分\" class=\"headerlink\" title=\"词语细分\"></a>词语细分</h4><p>音（おと）：物体发出  　声（こえ）：人、动物意志物发出        できるだけ　軽い（かるい）します。ーー尽量……</p>\n<hr>\n<h4 id=\"假定\"><a href=\"#假定\" class=\"headerlink\" title=\"假定\"></a>假定</h4><h5 id=\"れば：\"><a href=\"#れば：\" class=\"headerlink\" title=\"+れば：\"></a>+れば：</h5><p>現実を直視なければ．人間変わらないんだ。　直視ければ　　んだ＝！！<br>…れば、…ほど　　…れば、…だけ　　越…越…<br>前者 .^. 表程度  后者 .^. 表两件事物<br>食べれば食べるほど美味しいですよ。　　〜　、〜</p>\n<hr>\n<h4 id=\"意愿邀请\"><a href=\"#意愿邀请\" class=\"headerlink\" title=\"意愿邀请\"></a>意愿邀请</h4><p>…たい　ゲエム(game)をしたいです。  勉強しくないです。<br>…ましょう/ませんが　もう遅(おそ)いですから、寝(ね)ましょう。<br>…ましょうか　暑いですから、クーラーを(くーらーを)つけましょうか。<br>    あっ、雨(あめ)が降っていますね。傘を貸(か)しましょうが。<br>お見合い(おみあい)故郷へ帰りました。 回家相亲（有个老家的词，打不出来哦 実家(じっか)貌似促音的听不出来……）</p>\n<hr>\n<h4 id=\"词性转换\"><a href=\"#词性转换\" class=\"headerlink\" title=\"词性转换\"></a>词性转换</h4><h5 id=\"V-gt-N-こと\"><a href=\"#V-gt-N-こと\" class=\"headerlink\" title=\"V-&gt;N:..+こと\"></a>V-&gt;N:..+こと</h5><pre><code>..ことが　できます　ケーキを作ることが　できますか。 \n...は..ことです　仕事(しこと)は日本語を教(おし)えることです。\n..前に    ご飯を食べる前に手(て)を洗(あら)っとください。食事（しょくじ）\n</code></pre>\n<h5 id=\"N-gt-N-…-ところ\"><a href=\"#N-gt-N-…-ところ\" class=\"headerlink\" title=\"N-&gt;N:…+ところ\"></a>N-&gt;N:…+ところ</h5><pre><code>あの　窓（まど）のところに　いる人は誰ですか。\n    ..那儿（人也可+）\n</code></pre>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"より、ほど\"><a href=\"#より、ほど\" class=\"headerlink\" title=\"より、ほど\"></a>より、ほど</h4><pre><code>2月は　1月より　ずっど　寒いです。\n1がつは　2月ほど　さむくないです（寒くない）。\n    ーーーー比较      前，肯定，后否定。\n1月より　2月ほうが　寒いです。  家族で誰が　一番歌が上手ですか。\n    ーーーより被比者　 ほが选定者、更加者 ーーーで：划分范围　いちばん：最高\n1月と　2月と　とどちらが　寒いですか。    ...2月のほうが寒いです。\n    ーー二选一句型。...と..と　　答句：のほうがーー更～冷。\n</code></pre>\n<h5 id=\"ほうが-いいです-一类形-二类形-ほうが-いいです-いる：犬がいる-有狗-N-gt-N-窗那儿有的人\"><a href=\"#ほうが-いいです-一类形-二类形-ほうが-いいです-いる：犬がいる-有狗-N-gt-N-窗那儿有的人\" class=\"headerlink\" title=\"ほうが　いいです　 一类形/二类形 ほうが　いいです いる：犬がいる　有狗 N-&gt;N 窗那儿有的人\"></a>ほうが　いいです　 一类形/二类形 ほうが　いいです いる：犬がいる　有狗 N-&gt;N 窗那儿有的人</h5><hr>\n<h4 id=\"变化\"><a href=\"#变化\" class=\"headerlink\" title=\"变化\"></a>变化</h4><h5 id=\"いー＞く-なる（なります-だー＞に-する（します）-成为…变成…-使成-变为…\"><a href=\"#いー＞く-なる（なります-だー＞に-する（します）-成为…变成…-使成-变为…\" class=\"headerlink\" title=\"いー＞く　+なる（なります)　　だー＞に　+する（します） 成为…变成… 使成/变为…\"></a>いー＞く　+なる（なります)　　だー＞に　+する（します） 成为…变成… 使成/变为…</h5><p>前者，无主观后者有主观要变 二类形/名 に　なります　…に　します<br>变成某种N ーーー性质状态发生变化 后者因主语意志、动作引起　<br>    電気を消し（けし）で、暗（くら）くします。　もう春になったから、暖かくなる。　（あたたかい）　　<br>    夜（よる）に　なりました。部屋が暗くなりました。　名词に　します。要什么<br>    息子は　医者に　なります。　　話を　簡単（かんたん）に　します。<br>    今年（ことし）七歳に　なりました。           欲しい　なりました</p>\n<h5 id=\"だー＞な\"><a href=\"#だー＞な\" class=\"headerlink\" title=\"だー＞な\"></a>だー＞な</h5><pre><code>この会社で歌が一番上手な人はだれですか。\nーー森さんだ+と思（おも）います\n</code></pre>\n<hr>\n<h4 id=\"并列\"><a href=\"#并列\" class=\"headerlink\" title=\"并列\"></a>并列</h4><p>一类形 て 一类形(いー＞く) 二类形 で 二类形   名1 で 名2 动て+います</p>\n<hr>\n<h4 id=\"词语细分\"><a href=\"#词语细分\" class=\"headerlink\" title=\"词语细分\"></a>词语细分</h4><p>音（おと）：物体发出  　声（こえ）：人、动物意志物发出        できるだけ　軽い（かるい）します。ーー尽量……</p>\n<hr>\n<h4 id=\"假定\"><a href=\"#假定\" class=\"headerlink\" title=\"假定\"></a>假定</h4><h5 id=\"れば：\"><a href=\"#れば：\" class=\"headerlink\" title=\"+れば：\"></a>+れば：</h5><p>現実を直視なければ．人間変わらないんだ。　直視ければ　　んだ＝！！<br>…れば、…ほど　　…れば、…だけ　　越…越…<br>前者 .^. 表程度  后者 .^. 表两件事物<br>食べれば食べるほど美味しいですよ。　　〜　、〜</p>\n<hr>\n<h4 id=\"意愿邀请\"><a href=\"#意愿邀请\" class=\"headerlink\" title=\"意愿邀请\"></a>意愿邀请</h4><p>…たい　ゲエム(game)をしたいです。  勉強しくないです。<br>…ましょう/ませんが　もう遅(おそ)いですから、寝(ね)ましょう。<br>…ましょうか　暑いですから、クーラーを(くーらーを)つけましょうか。<br>    あっ、雨(あめ)が降っていますね。傘を貸(か)しましょうが。<br>お見合い(おみあい)故郷へ帰りました。 回家相亲（有个老家的词，打不出来哦 実家(じっか)貌似促音的听不出来……）</p>\n<hr>\n<h4 id=\"词性转换\"><a href=\"#词性转换\" class=\"headerlink\" title=\"词性转换\"></a>词性转换</h4><h5 id=\"V-gt-N-こと\"><a href=\"#V-gt-N-こと\" class=\"headerlink\" title=\"V-&gt;N:..+こと\"></a>V-&gt;N:..+こと</h5><pre><code>..ことが　できます　ケーキを作ることが　できますか。 \n...は..ことです　仕事(しこと)は日本語を教(おし)えることです。\n..前に    ご飯を食べる前に手(て)を洗(あら)っとください。食事（しょくじ）\n</code></pre>\n<h5 id=\"N-gt-N-…-ところ\"><a href=\"#N-gt-N-…-ところ\" class=\"headerlink\" title=\"N-&gt;N:…+ところ\"></a>N-&gt;N:…+ところ</h5><pre><code>あの　窓（まど）のところに　いる人は誰ですか。\n    ..那儿（人也可+）\n</code></pre>\n"},{"title":"Make things easy and enjoy","date":"2016-10-08T08:58:56.000Z","modified":"2018-11-19T10:53:59.000Z","slug":"makeThingsEasyAndEnjoy","_content":"# 命令行的简便生活 💦🤣\n\n\n---\n\n## find 文件查找\n今天(2018年12月12日，17点08分)在众多文件里找一个文件的时候… 想到`find`命令。不过之前没有怎么了解过，所以…\n我居然用了`tree | grep filename.filetype`来找东西。 结果路径太深——就最多确认了此文件的存在性。\n随后，才知道`find`要加`-name`参数。 emm...不过对于`find`多功能来说也说得过去。  随后便有了以下这个命令:\n```shell\nfind . -name \"cifar.py\" -exec vim {} \\;\n```\n没错~，查找之后并编辑——😄\n除此之外，当然可能用于 `rm`、`grep`等去替换`vim`进行操作。\n其中，`{}`自然时代表匹配文件的路径。 如果不止一个那么…就： vim为例，会关闭一个窗口再打开另一个😓\n另外，配合`grep`查找文本内容的时候，需要在最后面加`-print`否则只有匹配文本，不显示文件路径。\n\n# Windows 转换磁盘分区格式\n## 方法/步骤 \n\n1\n1.U盘引导，进入PE系统\n\n2\n 用pe进去，找到运行输入cmd   \n\n3\n输入”Diskpart”(不用输入引号，下同)，并按回车，进入操作界面\n\n4\n输入：”list disk”，查看磁盘信息。一般会出现两个选项，一个是你的硬盘，一个是U盘，要注意区分。\n\n5\n输入：”select disk 0”，选择disk 0为当前操作的磁盘（也就是电脑的 硬盘）\n\n6\n输入：”Clean”，清空当前磁盘分区\n\n7\n输入：”convert mbr”，转换为MBR分区。\n\n8\nOK，搞定，可以安装WIN7了\n\n\n### Windows远程桌面 \n    mstsc\n    # WIn自带应用，不过用的时候得关闭防火墙就很伤\n### Windows 输入法故障\n    ctfmon.exe     win+R 执行此，重启输入法\n### Win 安装Ubuntu\n    #在powerShell中管理员运行\n    Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-\nWindows-Subsystem-Linux\n\n#### Windows 自启动项目录\n`C:\\Users\\Administrator\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup`\n\n在此目录下添加入快捷方式则在系统启动之后自动加载，但会有一些延时，不同于直接定义的自启动项，算是<font color=#ffff00>优先级最落后</font>的项目吧\n\n#### Windows 查看电池使用情况\n    powercfg /BatteryReport\n    # 适用于Win8+\n\n## Python Pip\n    pip install -r *.txt\n    # 从*.txt 文件读取需要安装的插件列表\n\n---\n---\n\n# win Ubuntu 时间不一致\n    timedatectl set-local-rtc true \n    #采用本地时间          推荐\n\n---\n---\n\n### Ubuntu  升级系统\n    sudo update-manager -c -d\n    #会检测是否有系统更新，\n    #如果都更新完毕，\n    #则提醒有新版本系统是否更新\n### Windows 更新系统错误\n<font color=#ff00ff>dism++ 你值得拥有</font>\n\n另外：\n<font color=#800008>无法连接到更新服务。我们将稍后再试，你也可以立即进行检查。如果问题仍然存在，请确保你已连接到 Internet。</font>   \n可能是\n<font color=#808808>本地组策略中的windows更新的“指定Intranet Microsoft更新服务位置”被更改过</font>\n\n解决办法为\n\n* 1. gpedit.msc\n* 2. 打开“本地组策略编辑器”展开“计算机配置”—“管理模版”—“Windows组件”—“Windows 更新”（专业版称为Windows Update）\n* 3. \"指定Intranet Microsoft更新服务位置”，点击“未配置\"\n    \n### Ubuntu 桌面显示问题\n卸载 ibus 输入法，会出现桌面显示不完全的情况，任务栏显示，启动栏消失，键盘快捷键无法使用。解决办法是重新安装 Unity 之后启动Unity 就会重新打开桌面环境…其实是又重新安装了 ibus  嗯………\n### Vim 设置Tab空格数\n    :set tabstop=4\n    #添加至用户vim配置文件： .vimrc 下即可\n\n# 正则表达式\n作为短小精悍的东西嘞，今天在限制密码类型和长度的时候尝尽了甜头。但在分类时…不好分，应该单独写一个笔记的，但短小精悍嘛，所以就放在命令行这里了。\n\n    import re    # 好吧，其实无所谓的，因为下面并没有用到Python正则模块\n        a = QtCore.QRegExp(\"[A-Za-z]{0,5}[1-9][0-9]{0,5}\")\n        a = QtCore.QRegExp(\"[a-zA-Z0-9]{0,12}$\")\n        a = QtCore.QRegExp(\"[a-zA-Z0-9]+$\")\n    a = QtCore.QRegExp(\"[a-zA-Z0-9\\,\\.\\\\\\!\\?\\#\\$\\%\\^\\&\\*\\(\\)\\)_\\_\\=\\`\\+]+$\")\n\n这里的`[]`中内容是输入范围，`{}`中的则是长度限制，而`+`就是不限长度 与` * `类似。 `$ `是结尾标志。 over。\n\n## 闲的没事找事记：\n    安装了一个美国版的windows 10 pro N 结果字体缺失，系统默认编码方式是Ascii不是utf……导致程序中的输出中文都出现问题。结果在这些不构成生产力的份儿上浪费时间，真是闲的没事找事…\n        \n## Vim\n    查看编码格式 `:set fenc`   \n    设置文件格式`:set fileformat=unix`或者`:set fileformat=dos` \n        ——针对于换行符\n`set tabstop=4`、`set expandtab`前者是一个`tab`的长度，后者是tab换为空格…\n\n\n\n\n\n\n# GoodApps\n#### Nitrux、Flatabulous-master：\n主题，图标 用来美化很漂亮，图例样式可以参看这两者的Github。\n\n---\n\n#### GoldenDict：\n一款词典，其可以添加网络翻译源，还可以自行下载本地翻译文件，本地内容我下载的含有：日汉、汉日、英牛津，朗道，还有本本草纲目……没错，确实还有科普类的翻译源。各种奇异翻译本都有。\n\n---\n\n#### Xware：\n一款迅雷的替代，网络远程下载，完全能当一个没有广告的迅雷来使。 只不过需要账户密码，还有，在安装完毕之后，需要预先设置一番，将Xware托管改为用户态upstar，或者简单的自动启动。否则会显示ETM 没有链接，不能使用。另外将挂载，实际作用是下载保存位置，也设置一下。这么长时间了，英文路径应该养成习惯……\n\n---\n\n#### MyPaint：\n画图工具，很好使。\n\n---\n\n#### Chrome:\n这个浏览器不用说，这里介绍的是关于它修改hosts文件之后可能仍然无法使用谷歌搜索的问题。\n\n1.因为，默认的是http，故显示已被重定向啊，啥的。只要在地址栏前输入https就可以正常访问了。\n2.当然，这样的话无法使用网页里的按钮“使用谷歌搜索”，所以需要修改其默认。可以在Chrome://net-internals/ 中，找见HSTS选项卡，Domain中输入想要默认强制使用https的网址。（PS：因为我的使用google自动跳转谷歌香港，所以这里用google.com还是不行的，得加上.hk的后缀。）\n3.以上修改方法应该只能设置一个默认网址呢，不过一个google搜索就够了…… 嗯，我要求比较低。 至于其他浏览器，大概是默认https的，因为可以直接访问嘛。\n自然还有很好的别的稍微专业的工具，这个会在之后持续更新出来，用学习笔记的形式（而且，等我学会在文章里添加链接啊，图片啊之后）。以上入门级、常用级的也会持续更新的～ 下载链接我以及之后都不会贴出来，嗯，毕竟没有永远保存的，链接经常失效。自行搜索总是好的，还能顺便了解一下这块软件的使用方法，以及类似替代软件的出现。\n\n---\n\n#### Nethack：\n終端運行的一款地牢遊戲，相當高的自由度和隨機程度，除卻一切怪物和地圖都是用符號來代替，戰鬥過程就是用文字信息來描述，在創造和思索方面簡直一流。以後有空閒肯定要玩一玩～\n\n---\n\n#### Virbox ：\n\tsudo mount /dev/cdrom // ^^^目標地^^^ //掛載光盤 \n\tsudo mount -t vboxsf //^^Name^^ ^^^目標地^^^ //掛載虛擬機共享文件\n\n---\n\n### 下面是其他软件的学习笔记：（等待更新——）\n\n---\n\n#### Linux：\n嗯，这是个软件…详见《Linuxのノート》\n\n---\n\n#### Pelican :\n静态网页编辑生成工具。 keywords：Python、markdown\n\n---\n\n#### Blender：\n開源建模，動畫軟件。 \n###### 快捷鍵記錄：\n\tN、T\t//編輯欄呼出、隱藏 \n\tT\t//側重物體，N側重編輯窗口 \n\tB\t//選擇 \n\tTab\t//模式切換\n\tCtrl+U\t//用戶界面保存 \n\tZ\t//物體顯示樣式切換 線框、透視 \n\tH\t//刪除 \n\tG\t//移動 \n#### musicbox：\nLinux 命令行下的 網易雲音樂 。夠精簡夠豐富，實爲經驗驚豔。\n##### 基於Python：\n\t>https://github.com/darknessomi/musicbox\n\n---\n\n#### xSwipe：\n多指触控软件。通过将触控板手势映射成快捷键，可以支持甚至五指操作，还有侧边功能。在github中搜索`xSwipe`即可，其中有详细安装说明。之后可以在.conf文件中查看和修改映射快捷键。另最后如果不能运行，可能需要注销重启电脑方可。\n运行 `perl xSwipe.pl`即可执行。\n\n---\n\n#### OpenCV：\n开源计算机视觉库。  简单记录一下编译过程：(其實沒啥用的，自己爬官網找安裝教程去，基本沒用。)\n\n##### 1. 解决依赖，编译工具\n\tsudo apt-get install build-essential\n\tsudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev\n\tsudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev`\n##### 2. github 下载源程序\n\tgit clone https://github.com/opencv/opencv.git\n##### 3. Building OpenCV from Source Using CMake, Using the Command Line\n\tcd ~/opencv\n\tmkdir release\n\tcd release\n\tcmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..\n##### 4.\n\tmake\n\tsudo make install\n\tall from >http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html\n\t// (或許安裝過程就這句有用 23333)\n\n\tThanks for your teaching.\n\n---\n\n#### Simplenote:\n\t一款笔记软件，支持markdown编辑，很轻量、只能记录文字有点儿伤。不过有Linux版就很爽。而且同步速度、启动速度都很迅速。界面简单到不行。手机一次不幸刷机之后，有道云笔记懒得装，之后就用此软件吧…\n\n#### scp\n`server copy`? 这个简写不晓得，不过确实是适用于远程连接传输文件的…  \n```shell \n    scp ian@123.123.41.3(😀):/home/ian/nihou.txt ./files\n    scp ./files ian@123.123.41.3(😀):/home/ian/nihou.txt \n```\n#### 删除Win系统服务\n```shell\nsc delete serverName\n```\n\n### tmux\n丰富纯文字终端窗口，可以创建终端副本(反正也是我取得名字)—--类似于`win`的多桌面。也可以分割终端(界面类似vim分割)l--这便是类似于`win`的多窗口了。 (官方翻译: '窗格'？)\n\n- 进入: `tmux`\n- 退出: `exit`\n- 类似于`vim`命令模式： `ctrl+b`以下简写为`CL_B`。\n- 创建多桌面: CL_B + c\n- 查看全部窗口，类似`win+Tab`: CL_B + s    使用窗口号切换桌面: CL_B + NUM    \n- 关闭当前窗口: CL_B + &,emm直接`exit`...\n- 创建多窗口: CL_B + \" (垂直上下)、CL_B + % (水平左右)   调整窗口位置、大小 CL_B + space (默认布局轮换)\n- 显示窗口编号: CL_B + q    暂时最大化当前窗格: CL_B + z   切换到下一个窗格: CL_B + o\n- 对换窗格位置: CL_B + CL_O(ctrl + o)\n\n### Termux\n类似于`WIN`端的`Subsystem`——其实更像Ubuntu下的虚拟终端。 不过这东西功能强大，除了将安卓里的Linux发挥出来。还有`Termux API`来调用手机的底层接口。\n\n#### ssh与手机连接\n其实应该放在`ssh`的操作里面？ emm，还是就这儿吧。\n\n##### *pc\n**电脑生成密匙,无视密码设置全部回车\n```bash\nssh-keygen -t rsa\n```\n**电脑开启sshd服务,用于手机的ssh连接到电脑拷贝id_rsa.pub内容\n```bash\nsystemctl start sshd\n```\n然而我用的是win子系统所以：sshd re-exec requires execution with an absolute path\n##### phone\n**手机连接拷贝\n```bash\n$HOME/.ssh/authorized_keys -> 不管用什么复制，然后放到这个路径就好。\n```\n**查看手机的用户名\n```bash\nwhoami\n```\n**开启服务\n```bash\nsshd -p 9000\n```\n\n##### *pc\n连接到手机\n```bash\nssh u0_222@192.168.1.14 -p 9000\n```\n\nOver, 其余问题查看文件权限？  不过还是自建文件`.ssh`出错率为0吧。\n\n2018年12月4日11点27分,当我反过来操作的时候…  嗯，果然在权限这里出问题了…\n另外，电脑端开启`sshd`的时候用的绝对地址… 因为是Syb？\n\n```bash\nchmod 700 ~/.ssh\nchmod 600 ~/.ssh/authorized_keys\n```\n    😓\n\n#### 快捷键(有用的音量键？)\n显示扩展功能按键\n\n方法一:\n- 从左向右滑动,显示隐藏式导航栏,长按左下角的KEYBOARD.\n\n方法二:\n- 使用Termux快捷键:音量++Q键\n\n常用快捷键\n- Ctrl键是终端用户常用的按键 – 但大多数触摸键盘都没有这个按键。为此，Termux使用音量减小按钮来模拟Ctrl键。在触摸键盘上按音量减小+ L发送与在硬件键盘上按Ctrl + L相同的输入。\n- Ctrl+A -> 将光标移动到行首\n- Ctrl+C -> 中止当前进程\n- Ctrl+D -> 注销终端会话\n- Ctrl+E -> 将光标移动到行尾\n- Ctrl+K -> 从光标删除到行尾\n- Ctrl+L -> 清除终端\n- Ctrl+Z -> 挂起（发送SIGTSTP到）当前进程\n\n音量加键也可以作为产生特定输入的特殊键.\n- 音量加+E -> Esc键\n- 音量加+T -> Tab键\n- 音量加+1 -> F1（和音量增加+ 2→F2等）\n- 音量加+0 -> F10\n- 音量加+B -> Alt + B，使用readline时返回一个单词\n- 音量加+F -> Alt + F，使用readline时转发一个单词\n- 音量加+X -> Alt+X\n- 音量加+W -> 向上箭头键\n- 音量加+A -> 向左箭头键\n- 音量加+S -> 向下箭头键\n- 音量加+D -> 向右箭头键\n- 音量加+L -> | （管道字符）\n- 音量加+H -> 〜（波浪号字符）\n- 音量加+U -> _ (下划线字符)\n- 音量加+P -> 上一页\n- 音量加+N -> 下一页\n- 音量加+. -> Ctrl + \\（SIGQUIT）\n- 音量加+V -> 显示音量控制\n- 音量加+Q -> 显示额外的按键视图\n\n## Rdfind\n### 替代方案\n`Rdfind`是命令行的, `DuplicatePhotoFinder1.6.3`是有UI的, 可以展示出内容, 不过很傻, 不能多选一次删除, 只能一个一个删除.....\n所以我做了一个托管鼠标点击器. 如下\n\n使用`Rdfind` 进行重复文件查询, 然后删了, 节省磁盘空间.\n> 不过我准备自己做一个, 更方便删减图片, 所以以后应该会用自己做的, 这个就留下参考吧. \n[^_^]:\n    2021-04-22\n### 查询重复\n```drfind /Image/`, 结果报表存于当前目录`results.txt```\n### 终端输出\n```rdfind -dryrun true /Image```\n### 删除空文件和重复文件\n```rdfind -deleteduplicates true -ignoreempty false /Image```\n### 删除重复文件\n```rdfind -deleteduplicates true /Image```\n\n\n## 鼠标自动点击\n选择点, 不到1s一点, 终端无法立即实时中断, 估计要用上`Listener`不过现在这样也可以啦.\n\n```py\nimport time\nfrom datetime import date, datetime\n\nfrom pynput import mouse\nfrom pynput.mouse import Button, Controller\n\nmouse = Controller()\n\nsign_start = False\nprint(\"请将鼠标移动到指定位置, 输入`r`开始.\")\n\nstr_input = None\nposition_loop = None\nwhile 1:\n    str_input = str_input or input()\n    if str_input == 'r':\n        position_loop = position_loop or mouse.position\n        mouse.position = position_loop\n        # mouse.move(position_loop[0], position_loop[-1])\n        mouse.press(Button.left)\n        time.sleep(0.2)\n        mouse.release(Button.left)\n        print(f\"{datetime.now()} - clicked - {position_loop}.\")\n        time.sleep(0.4)\n    else:\n        print(\"输入错误, 程序结束.\")\n        break\n```\n","source":"_posts/makeThingsEasyAndEnjoy.md","raw":"---\ntitle: Make things easy and enjoy\ndate: 2016-10-08 16:58:56\nmodified: 2018-11-19 18:53:59\ncategory: 杂谈\ntags: 杂谈\nslug: \n---\n# 命令行的简便生活 💦🤣\n\n\n---\n\n## find 文件查找\n今天(2018年12月12日，17点08分)在众多文件里找一个文件的时候… 想到`find`命令。不过之前没有怎么了解过，所以…\n我居然用了`tree | grep filename.filetype`来找东西。 结果路径太深——就最多确认了此文件的存在性。\n随后，才知道`find`要加`-name`参数。 emm...不过对于`find`多功能来说也说得过去。  随后便有了以下这个命令:\n```shell\nfind . -name \"cifar.py\" -exec vim {} \\;\n```\n没错~，查找之后并编辑——😄\n除此之外，当然可能用于 `rm`、`grep`等去替换`vim`进行操作。\n其中，`{}`自然时代表匹配文件的路径。 如果不止一个那么…就： vim为例，会关闭一个窗口再打开另一个😓\n另外，配合`grep`查找文本内容的时候，需要在最后面加`-print`否则只有匹配文本，不显示文件路径。\n\n# Windows 转换磁盘分区格式\n## 方法/步骤 \n\n1\n1.U盘引导，进入PE系统\n\n2\n 用pe进去，找到运行输入cmd   \n\n3\n输入”Diskpart”(不用输入引号，下同)，并按回车，进入操作界面\n\n4\n输入：”list disk”，查看磁盘信息。一般会出现两个选项，一个是你的硬盘，一个是U盘，要注意区分。\n\n5\n输入：”select disk 0”，选择disk 0为当前操作的磁盘（也就是电脑的 硬盘）\n\n6\n输入：”Clean”，清空当前磁盘分区\n\n7\n输入：”convert mbr”，转换为MBR分区。\n\n8\nOK，搞定，可以安装WIN7了\n\n\n### Windows远程桌面 \n    mstsc\n    # WIn自带应用，不过用的时候得关闭防火墙就很伤\n### Windows 输入法故障\n    ctfmon.exe     win+R 执行此，重启输入法\n### Win 安装Ubuntu\n    #在powerShell中管理员运行\n    Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-\nWindows-Subsystem-Linux\n\n#### Windows 自启动项目录\n`C:\\Users\\Administrator\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup`\n\n在此目录下添加入快捷方式则在系统启动之后自动加载，但会有一些延时，不同于直接定义的自启动项，算是<font color=#ffff00>优先级最落后</font>的项目吧\n\n#### Windows 查看电池使用情况\n    powercfg /BatteryReport\n    # 适用于Win8+\n\n## Python Pip\n    pip install -r *.txt\n    # 从*.txt 文件读取需要安装的插件列表\n\n---\n---\n\n# win Ubuntu 时间不一致\n    timedatectl set-local-rtc true \n    #采用本地时间          推荐\n\n---\n---\n\n### Ubuntu  升级系统\n    sudo update-manager -c -d\n    #会检测是否有系统更新，\n    #如果都更新完毕，\n    #则提醒有新版本系统是否更新\n### Windows 更新系统错误\n<font color=#ff00ff>dism++ 你值得拥有</font>\n\n另外：\n<font color=#800008>无法连接到更新服务。我们将稍后再试，你也可以立即进行检查。如果问题仍然存在，请确保你已连接到 Internet。</font>   \n可能是\n<font color=#808808>本地组策略中的windows更新的“指定Intranet Microsoft更新服务位置”被更改过</font>\n\n解决办法为\n\n* 1. gpedit.msc\n* 2. 打开“本地组策略编辑器”展开“计算机配置”—“管理模版”—“Windows组件”—“Windows 更新”（专业版称为Windows Update）\n* 3. \"指定Intranet Microsoft更新服务位置”，点击“未配置\"\n    \n### Ubuntu 桌面显示问题\n卸载 ibus 输入法，会出现桌面显示不完全的情况，任务栏显示，启动栏消失，键盘快捷键无法使用。解决办法是重新安装 Unity 之后启动Unity 就会重新打开桌面环境…其实是又重新安装了 ibus  嗯………\n### Vim 设置Tab空格数\n    :set tabstop=4\n    #添加至用户vim配置文件： .vimrc 下即可\n\n# 正则表达式\n作为短小精悍的东西嘞，今天在限制密码类型和长度的时候尝尽了甜头。但在分类时…不好分，应该单独写一个笔记的，但短小精悍嘛，所以就放在命令行这里了。\n\n    import re    # 好吧，其实无所谓的，因为下面并没有用到Python正则模块\n        a = QtCore.QRegExp(\"[A-Za-z]{0,5}[1-9][0-9]{0,5}\")\n        a = QtCore.QRegExp(\"[a-zA-Z0-9]{0,12}$\")\n        a = QtCore.QRegExp(\"[a-zA-Z0-9]+$\")\n    a = QtCore.QRegExp(\"[a-zA-Z0-9\\,\\.\\\\\\!\\?\\#\\$\\%\\^\\&\\*\\(\\)\\)_\\_\\=\\`\\+]+$\")\n\n这里的`[]`中内容是输入范围，`{}`中的则是长度限制，而`+`就是不限长度 与` * `类似。 `$ `是结尾标志。 over。\n\n## 闲的没事找事记：\n    安装了一个美国版的windows 10 pro N 结果字体缺失，系统默认编码方式是Ascii不是utf……导致程序中的输出中文都出现问题。结果在这些不构成生产力的份儿上浪费时间，真是闲的没事找事…\n        \n## Vim\n    查看编码格式 `:set fenc`   \n    设置文件格式`:set fileformat=unix`或者`:set fileformat=dos` \n        ——针对于换行符\n`set tabstop=4`、`set expandtab`前者是一个`tab`的长度，后者是tab换为空格…\n\n\n\n\n\n\n# GoodApps\n#### Nitrux、Flatabulous-master：\n主题，图标 用来美化很漂亮，图例样式可以参看这两者的Github。\n\n---\n\n#### GoldenDict：\n一款词典，其可以添加网络翻译源，还可以自行下载本地翻译文件，本地内容我下载的含有：日汉、汉日、英牛津，朗道，还有本本草纲目……没错，确实还有科普类的翻译源。各种奇异翻译本都有。\n\n---\n\n#### Xware：\n一款迅雷的替代，网络远程下载，完全能当一个没有广告的迅雷来使。 只不过需要账户密码，还有，在安装完毕之后，需要预先设置一番，将Xware托管改为用户态upstar，或者简单的自动启动。否则会显示ETM 没有链接，不能使用。另外将挂载，实际作用是下载保存位置，也设置一下。这么长时间了，英文路径应该养成习惯……\n\n---\n\n#### MyPaint：\n画图工具，很好使。\n\n---\n\n#### Chrome:\n这个浏览器不用说，这里介绍的是关于它修改hosts文件之后可能仍然无法使用谷歌搜索的问题。\n\n1.因为，默认的是http，故显示已被重定向啊，啥的。只要在地址栏前输入https就可以正常访问了。\n2.当然，这样的话无法使用网页里的按钮“使用谷歌搜索”，所以需要修改其默认。可以在Chrome://net-internals/ 中，找见HSTS选项卡，Domain中输入想要默认强制使用https的网址。（PS：因为我的使用google自动跳转谷歌香港，所以这里用google.com还是不行的，得加上.hk的后缀。）\n3.以上修改方法应该只能设置一个默认网址呢，不过一个google搜索就够了…… 嗯，我要求比较低。 至于其他浏览器，大概是默认https的，因为可以直接访问嘛。\n自然还有很好的别的稍微专业的工具，这个会在之后持续更新出来，用学习笔记的形式（而且，等我学会在文章里添加链接啊，图片啊之后）。以上入门级、常用级的也会持续更新的～ 下载链接我以及之后都不会贴出来，嗯，毕竟没有永远保存的，链接经常失效。自行搜索总是好的，还能顺便了解一下这块软件的使用方法，以及类似替代软件的出现。\n\n---\n\n#### Nethack：\n終端運行的一款地牢遊戲，相當高的自由度和隨機程度，除卻一切怪物和地圖都是用符號來代替，戰鬥過程就是用文字信息來描述，在創造和思索方面簡直一流。以後有空閒肯定要玩一玩～\n\n---\n\n#### Virbox ：\n\tsudo mount /dev/cdrom // ^^^目標地^^^ //掛載光盤 \n\tsudo mount -t vboxsf //^^Name^^ ^^^目標地^^^ //掛載虛擬機共享文件\n\n---\n\n### 下面是其他软件的学习笔记：（等待更新——）\n\n---\n\n#### Linux：\n嗯，这是个软件…详见《Linuxのノート》\n\n---\n\n#### Pelican :\n静态网页编辑生成工具。 keywords：Python、markdown\n\n---\n\n#### Blender：\n開源建模，動畫軟件。 \n###### 快捷鍵記錄：\n\tN、T\t//編輯欄呼出、隱藏 \n\tT\t//側重物體，N側重編輯窗口 \n\tB\t//選擇 \n\tTab\t//模式切換\n\tCtrl+U\t//用戶界面保存 \n\tZ\t//物體顯示樣式切換 線框、透視 \n\tH\t//刪除 \n\tG\t//移動 \n#### musicbox：\nLinux 命令行下的 網易雲音樂 。夠精簡夠豐富，實爲經驗驚豔。\n##### 基於Python：\n\t>https://github.com/darknessomi/musicbox\n\n---\n\n#### xSwipe：\n多指触控软件。通过将触控板手势映射成快捷键，可以支持甚至五指操作，还有侧边功能。在github中搜索`xSwipe`即可，其中有详细安装说明。之后可以在.conf文件中查看和修改映射快捷键。另最后如果不能运行，可能需要注销重启电脑方可。\n运行 `perl xSwipe.pl`即可执行。\n\n---\n\n#### OpenCV：\n开源计算机视觉库。  简单记录一下编译过程：(其實沒啥用的，自己爬官網找安裝教程去，基本沒用。)\n\n##### 1. 解决依赖，编译工具\n\tsudo apt-get install build-essential\n\tsudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev\n\tsudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev`\n##### 2. github 下载源程序\n\tgit clone https://github.com/opencv/opencv.git\n##### 3. Building OpenCV from Source Using CMake, Using the Command Line\n\tcd ~/opencv\n\tmkdir release\n\tcd release\n\tcmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..\n##### 4.\n\tmake\n\tsudo make install\n\tall from >http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html\n\t// (或許安裝過程就這句有用 23333)\n\n\tThanks for your teaching.\n\n---\n\n#### Simplenote:\n\t一款笔记软件，支持markdown编辑，很轻量、只能记录文字有点儿伤。不过有Linux版就很爽。而且同步速度、启动速度都很迅速。界面简单到不行。手机一次不幸刷机之后，有道云笔记懒得装，之后就用此软件吧…\n\n#### scp\n`server copy`? 这个简写不晓得，不过确实是适用于远程连接传输文件的…  \n```shell \n    scp ian@123.123.41.3(😀):/home/ian/nihou.txt ./files\n    scp ./files ian@123.123.41.3(😀):/home/ian/nihou.txt \n```\n#### 删除Win系统服务\n```shell\nsc delete serverName\n```\n\n### tmux\n丰富纯文字终端窗口，可以创建终端副本(反正也是我取得名字)—--类似于`win`的多桌面。也可以分割终端(界面类似vim分割)l--这便是类似于`win`的多窗口了。 (官方翻译: '窗格'？)\n\n- 进入: `tmux`\n- 退出: `exit`\n- 类似于`vim`命令模式： `ctrl+b`以下简写为`CL_B`。\n- 创建多桌面: CL_B + c\n- 查看全部窗口，类似`win+Tab`: CL_B + s    使用窗口号切换桌面: CL_B + NUM    \n- 关闭当前窗口: CL_B + &,emm直接`exit`...\n- 创建多窗口: CL_B + \" (垂直上下)、CL_B + % (水平左右)   调整窗口位置、大小 CL_B + space (默认布局轮换)\n- 显示窗口编号: CL_B + q    暂时最大化当前窗格: CL_B + z   切换到下一个窗格: CL_B + o\n- 对换窗格位置: CL_B + CL_O(ctrl + o)\n\n### Termux\n类似于`WIN`端的`Subsystem`——其实更像Ubuntu下的虚拟终端。 不过这东西功能强大，除了将安卓里的Linux发挥出来。还有`Termux API`来调用手机的底层接口。\n\n#### ssh与手机连接\n其实应该放在`ssh`的操作里面？ emm，还是就这儿吧。\n\n##### *pc\n**电脑生成密匙,无视密码设置全部回车\n```bash\nssh-keygen -t rsa\n```\n**电脑开启sshd服务,用于手机的ssh连接到电脑拷贝id_rsa.pub内容\n```bash\nsystemctl start sshd\n```\n然而我用的是win子系统所以：sshd re-exec requires execution with an absolute path\n##### phone\n**手机连接拷贝\n```bash\n$HOME/.ssh/authorized_keys -> 不管用什么复制，然后放到这个路径就好。\n```\n**查看手机的用户名\n```bash\nwhoami\n```\n**开启服务\n```bash\nsshd -p 9000\n```\n\n##### *pc\n连接到手机\n```bash\nssh u0_222@192.168.1.14 -p 9000\n```\n\nOver, 其余问题查看文件权限？  不过还是自建文件`.ssh`出错率为0吧。\n\n2018年12月4日11点27分,当我反过来操作的时候…  嗯，果然在权限这里出问题了…\n另外，电脑端开启`sshd`的时候用的绝对地址… 因为是Syb？\n\n```bash\nchmod 700 ~/.ssh\nchmod 600 ~/.ssh/authorized_keys\n```\n    😓\n\n#### 快捷键(有用的音量键？)\n显示扩展功能按键\n\n方法一:\n- 从左向右滑动,显示隐藏式导航栏,长按左下角的KEYBOARD.\n\n方法二:\n- 使用Termux快捷键:音量++Q键\n\n常用快捷键\n- Ctrl键是终端用户常用的按键 – 但大多数触摸键盘都没有这个按键。为此，Termux使用音量减小按钮来模拟Ctrl键。在触摸键盘上按音量减小+ L发送与在硬件键盘上按Ctrl + L相同的输入。\n- Ctrl+A -> 将光标移动到行首\n- Ctrl+C -> 中止当前进程\n- Ctrl+D -> 注销终端会话\n- Ctrl+E -> 将光标移动到行尾\n- Ctrl+K -> 从光标删除到行尾\n- Ctrl+L -> 清除终端\n- Ctrl+Z -> 挂起（发送SIGTSTP到）当前进程\n\n音量加键也可以作为产生特定输入的特殊键.\n- 音量加+E -> Esc键\n- 音量加+T -> Tab键\n- 音量加+1 -> F1（和音量增加+ 2→F2等）\n- 音量加+0 -> F10\n- 音量加+B -> Alt + B，使用readline时返回一个单词\n- 音量加+F -> Alt + F，使用readline时转发一个单词\n- 音量加+X -> Alt+X\n- 音量加+W -> 向上箭头键\n- 音量加+A -> 向左箭头键\n- 音量加+S -> 向下箭头键\n- 音量加+D -> 向右箭头键\n- 音量加+L -> | （管道字符）\n- 音量加+H -> 〜（波浪号字符）\n- 音量加+U -> _ (下划线字符)\n- 音量加+P -> 上一页\n- 音量加+N -> 下一页\n- 音量加+. -> Ctrl + \\（SIGQUIT）\n- 音量加+V -> 显示音量控制\n- 音量加+Q -> 显示额外的按键视图\n\n## Rdfind\n### 替代方案\n`Rdfind`是命令行的, `DuplicatePhotoFinder1.6.3`是有UI的, 可以展示出内容, 不过很傻, 不能多选一次删除, 只能一个一个删除.....\n所以我做了一个托管鼠标点击器. 如下\n\n使用`Rdfind` 进行重复文件查询, 然后删了, 节省磁盘空间.\n> 不过我准备自己做一个, 更方便删减图片, 所以以后应该会用自己做的, 这个就留下参考吧. \n[^_^]:\n    2021-04-22\n### 查询重复\n```drfind /Image/`, 结果报表存于当前目录`results.txt```\n### 终端输出\n```rdfind -dryrun true /Image```\n### 删除空文件和重复文件\n```rdfind -deleteduplicates true -ignoreempty false /Image```\n### 删除重复文件\n```rdfind -deleteduplicates true /Image```\n\n\n## 鼠标自动点击\n选择点, 不到1s一点, 终端无法立即实时中断, 估计要用上`Listener`不过现在这样也可以啦.\n\n```py\nimport time\nfrom datetime import date, datetime\n\nfrom pynput import mouse\nfrom pynput.mouse import Button, Controller\n\nmouse = Controller()\n\nsign_start = False\nprint(\"请将鼠标移动到指定位置, 输入`r`开始.\")\n\nstr_input = None\nposition_loop = None\nwhile 1:\n    str_input = str_input or input()\n    if str_input == 'r':\n        position_loop = position_loop or mouse.position\n        mouse.position = position_loop\n        # mouse.move(position_loop[0], position_loop[-1])\n        mouse.press(Button.left)\n        time.sleep(0.2)\n        mouse.release(Button.left)\n        print(f\"{datetime.now()} - clicked - {position_loop}.\")\n        time.sleep(0.4)\n    else:\n        print(\"输入错误, 程序结束.\")\n        break\n```\n","published":1,"updated":"2021-05-18T07:09:44.995Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9az0005u3yqg0onb6ws","content":"<h1 id=\"命令行的简便生活-💦🤣\"><a href=\"#命令行的简便生活-💦🤣\" class=\"headerlink\" title=\"命令行的简便生活 💦🤣\"></a>命令行的简便生活 💦🤣</h1><hr>\n<h2 id=\"find-文件查找\"><a href=\"#find-文件查找\" class=\"headerlink\" title=\"find 文件查找\"></a>find 文件查找</h2><p>今天(2018年12月12日，17点08分)在众多文件里找一个文件的时候… 想到<code>find</code>命令。不过之前没有怎么了解过，所以…<br>我居然用了<code>tree | grep filename.filetype</code>来找东西。 结果路径太深——就最多确认了此文件的存在性。<br>随后，才知道<code>find</code>要加<code>-name</code>参数。 emm…不过对于<code>find</code>多功能来说也说得过去。  随后便有了以下这个命令:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find . -name &quot;cifar.py&quot; -exec vim &#123;&#125; \\;</span><br></pre></td></tr></table></figure>\n<p>没错~，查找之后并编辑——😄<br>除此之外，当然可能用于 <code>rm</code>、<code>grep</code>等去替换<code>vim</code>进行操作。<br>其中，<code>&#123;&#125;</code>自然时代表匹配文件的路径。 如果不止一个那么…就： vim为例，会关闭一个窗口再打开另一个😓<br>另外，配合<code>grep</code>查找文本内容的时候，需要在最后面加<code>-print</code>否则只有匹配文本，不显示文件路径。</p>\n<h1 id=\"Windows-转换磁盘分区格式\"><a href=\"#Windows-转换磁盘分区格式\" class=\"headerlink\" title=\"Windows 转换磁盘分区格式\"></a>Windows 转换磁盘分区格式</h1><h2 id=\"方法-步骤\"><a href=\"#方法-步骤\" class=\"headerlink\" title=\"方法/步骤\"></a>方法/步骤</h2><p>1<br>1.U盘引导，进入PE系统</p>\n<p>2<br> 用pe进去，找到运行输入cmd   </p>\n<p>3<br>输入”Diskpart”(不用输入引号，下同)，并按回车，进入操作界面</p>\n<p>4<br>输入：”list disk”，查看磁盘信息。一般会出现两个选项，一个是你的硬盘，一个是U盘，要注意区分。</p>\n<p>5<br>输入：”select disk 0”，选择disk 0为当前操作的磁盘（也就是电脑的 硬盘）</p>\n<p>6<br>输入：”Clean”，清空当前磁盘分区</p>\n<p>7<br>输入：”convert mbr”，转换为MBR分区。</p>\n<p>8<br>OK，搞定，可以安装WIN7了</p>\n<h3 id=\"Windows远程桌面\"><a href=\"#Windows远程桌面\" class=\"headerlink\" title=\"Windows远程桌面\"></a>Windows远程桌面</h3><pre><code>mstsc\n# WIn自带应用，不过用的时候得关闭防火墙就很伤\n</code></pre>\n<h3 id=\"Windows-输入法故障\"><a href=\"#Windows-输入法故障\" class=\"headerlink\" title=\"Windows 输入法故障\"></a>Windows 输入法故障</h3><pre><code>ctfmon.exe     win+R 执行此，重启输入法\n</code></pre>\n<h3 id=\"Win-安装Ubuntu\"><a href=\"#Win-安装Ubuntu\" class=\"headerlink\" title=\"Win 安装Ubuntu\"></a>Win 安装Ubuntu</h3><pre><code>#在powerShell中管理员运行\nEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-\n</code></pre>\n<p>Windows-Subsystem-Linux</p>\n<h4 id=\"Windows-自启动项目录\"><a href=\"#Windows-自启动项目录\" class=\"headerlink\" title=\"Windows 自启动项目录\"></a>Windows 自启动项目录</h4><p><code>C:\\Users\\Administrator\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup</code></p>\n<p>在此目录下添加入快捷方式则在系统启动之后自动加载，但会有一些延时，不同于直接定义的自启动项，算是<font color=#ffff00>优先级最落后</font>的项目吧</p>\n<h4 id=\"Windows-查看电池使用情况\"><a href=\"#Windows-查看电池使用情况\" class=\"headerlink\" title=\"Windows 查看电池使用情况\"></a>Windows 查看电池使用情况</h4><pre><code>powercfg /BatteryReport\n# 适用于Win8+\n</code></pre>\n<h2 id=\"Python-Pip\"><a href=\"#Python-Pip\" class=\"headerlink\" title=\"Python Pip\"></a>Python Pip</h2><pre><code>pip install -r *.txt\n# 从*.txt 文件读取需要安装的插件列表\n</code></pre>\n<hr>\n<hr>\n<h1 id=\"win-Ubuntu-时间不一致\"><a href=\"#win-Ubuntu-时间不一致\" class=\"headerlink\" title=\"win Ubuntu 时间不一致\"></a>win Ubuntu 时间不一致</h1><pre><code>timedatectl set-local-rtc true \n#采用本地时间          推荐\n</code></pre>\n<hr>\n<hr>\n<h3 id=\"Ubuntu-升级系统\"><a href=\"#Ubuntu-升级系统\" class=\"headerlink\" title=\"Ubuntu  升级系统\"></a>Ubuntu  升级系统</h3><pre><code>sudo update-manager -c -d\n#会检测是否有系统更新，\n#如果都更新完毕，\n#则提醒有新版本系统是否更新\n</code></pre>\n<h3 id=\"Windows-更新系统错误\"><a href=\"#Windows-更新系统错误\" class=\"headerlink\" title=\"Windows 更新系统错误\"></a>Windows 更新系统错误</h3><p><font color=#ff00ff>dism++ 你值得拥有</font></p>\n<p>另外：<br><font color=#800008>无法连接到更新服务。我们将稍后再试，你也可以立即进行检查。如果问题仍然存在，请确保你已连接到 Internet。</font><br>可能是<br><font color=#808808>本地组策略中的windows更新的“指定Intranet Microsoft更新服务位置”被更改过</font></p>\n<p>解决办法为</p>\n<ul>\n<li><ol>\n<li>gpedit.msc</li>\n</ol>\n</li>\n<li><ol start=\"2\">\n<li>打开“本地组策略编辑器”展开“计算机配置”—“管理模版”—“Windows组件”—“Windows 更新”（专业版称为Windows Update）</li>\n</ol>\n</li>\n<li><ol start=\"3\">\n<li>“指定Intranet Microsoft更新服务位置”，点击“未配置”</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"Ubuntu-桌面显示问题\"><a href=\"#Ubuntu-桌面显示问题\" class=\"headerlink\" title=\"Ubuntu 桌面显示问题\"></a>Ubuntu 桌面显示问题</h3><p>卸载 ibus 输入法，会出现桌面显示不完全的情况，任务栏显示，启动栏消失，键盘快捷键无法使用。解决办法是重新安装 Unity 之后启动Unity 就会重新打开桌面环境…其实是又重新安装了 ibus  嗯………</p>\n<h3 id=\"Vim-设置Tab空格数\"><a href=\"#Vim-设置Tab空格数\" class=\"headerlink\" title=\"Vim 设置Tab空格数\"></a>Vim 设置Tab空格数</h3><pre><code>:set tabstop=4\n#添加至用户vim配置文件： .vimrc 下即可\n</code></pre>\n<h1 id=\"正则表达式\"><a href=\"#正则表达式\" class=\"headerlink\" title=\"正则表达式\"></a>正则表达式</h1><p>作为短小精悍的东西嘞，今天在限制密码类型和长度的时候尝尽了甜头。但在分类时…不好分，应该单独写一个笔记的，但短小精悍嘛，所以就放在命令行这里了。</p>\n<pre><code>import re    # 好吧，其实无所谓的，因为下面并没有用到Python正则模块\n    a = QtCore.QRegExp(&quot;[A-Za-z]&#123;0,5&#125;[1-9][0-9]&#123;0,5&#125;&quot;)\n    a = QtCore.QRegExp(&quot;[a-zA-Z0-9]&#123;0,12&#125;$&quot;)\n    a = QtCore.QRegExp(&quot;[a-zA-Z0-9]+$&quot;)\na = QtCore.QRegExp(&quot;[a-zA-Z0-9\\,\\.\\\\\\!\\?\\#\\$\\%\\^\\&amp;\\*\\(\\)\\)_\\_\\=\\`\\+]+$&quot;)\n</code></pre>\n<p>这里的<code>[]</code>中内容是输入范围，<code>&#123;&#125;</code>中的则是长度限制，而<code>+</code>就是不限长度 与<code>*</code>类似。 <code>$ </code>是结尾标志。 over。</p>\n<h2 id=\"闲的没事找事记：\"><a href=\"#闲的没事找事记：\" class=\"headerlink\" title=\"闲的没事找事记：\"></a>闲的没事找事记：</h2><pre><code>安装了一个美国版的windows 10 pro N 结果字体缺失，系统默认编码方式是Ascii不是utf……导致程序中的输出中文都出现问题。结果在这些不构成生产力的份儿上浪费时间，真是闲的没事找事…\n    \n</code></pre>\n<h2 id=\"Vim\"><a href=\"#Vim\" class=\"headerlink\" title=\"Vim\"></a>Vim</h2><pre><code>查看编码格式 `:set fenc`   \n设置文件格式`:set fileformat=unix`或者`:set fileformat=dos` \n    ——针对于换行符\n</code></pre>\n<p><code>set tabstop=4</code>、<code>set expandtab</code>前者是一个<code>tab</code>的长度，后者是tab换为空格…</p>\n<h1 id=\"GoodApps\"><a href=\"#GoodApps\" class=\"headerlink\" title=\"GoodApps\"></a>GoodApps</h1><h4 id=\"Nitrux、Flatabulous-master：\"><a href=\"#Nitrux、Flatabulous-master：\" class=\"headerlink\" title=\"Nitrux、Flatabulous-master：\"></a>Nitrux、Flatabulous-master：</h4><p>主题，图标 用来美化很漂亮，图例样式可以参看这两者的Github。</p>\n<hr>\n<h4 id=\"GoldenDict：\"><a href=\"#GoldenDict：\" class=\"headerlink\" title=\"GoldenDict：\"></a>GoldenDict：</h4><p>一款词典，其可以添加网络翻译源，还可以自行下载本地翻译文件，本地内容我下载的含有：日汉、汉日、英牛津，朗道，还有本本草纲目……没错，确实还有科普类的翻译源。各种奇异翻译本都有。</p>\n<hr>\n<h4 id=\"Xware：\"><a href=\"#Xware：\" class=\"headerlink\" title=\"Xware：\"></a>Xware：</h4><p>一款迅雷的替代，网络远程下载，完全能当一个没有广告的迅雷来使。 只不过需要账户密码，还有，在安装完毕之后，需要预先设置一番，将Xware托管改为用户态upstar，或者简单的自动启动。否则会显示ETM 没有链接，不能使用。另外将挂载，实际作用是下载保存位置，也设置一下。这么长时间了，英文路径应该养成习惯……</p>\n<hr>\n<h4 id=\"MyPaint：\"><a href=\"#MyPaint：\" class=\"headerlink\" title=\"MyPaint：\"></a>MyPaint：</h4><p>画图工具，很好使。</p>\n<hr>\n<h4 id=\"Chrome\"><a href=\"#Chrome\" class=\"headerlink\" title=\"Chrome:\"></a>Chrome:</h4><p>这个浏览器不用说，这里介绍的是关于它修改hosts文件之后可能仍然无法使用谷歌搜索的问题。</p>\n<p>1.因为，默认的是http，故显示已被重定向啊，啥的。只要在地址栏前输入https就可以正常访问了。<br>2.当然，这样的话无法使用网页里的按钮“使用谷歌搜索”，所以需要修改其默认。可以在Chrome://net-internals/ 中，找见HSTS选项卡，Domain中输入想要默认强制使用https的网址。（PS：因为我的使用google自动跳转谷歌香港，所以这里用google.com还是不行的，得加上.hk的后缀。）<br>3.以上修改方法应该只能设置一个默认网址呢，不过一个google搜索就够了…… 嗯，我要求比较低。 至于其他浏览器，大概是默认https的，因为可以直接访问嘛。<br>自然还有很好的别的稍微专业的工具，这个会在之后持续更新出来，用学习笔记的形式（而且，等我学会在文章里添加链接啊，图片啊之后）。以上入门级、常用级的也会持续更新的～ 下载链接我以及之后都不会贴出来，嗯，毕竟没有永远保存的，链接经常失效。自行搜索总是好的，还能顺便了解一下这块软件的使用方法，以及类似替代软件的出现。</p>\n<hr>\n<h4 id=\"Nethack：\"><a href=\"#Nethack：\" class=\"headerlink\" title=\"Nethack：\"></a>Nethack：</h4><p>終端運行的一款地牢遊戲，相當高的自由度和隨機程度，除卻一切怪物和地圖都是用符號來代替，戰鬥過程就是用文字信息來描述，在創造和思索方面簡直一流。以後有空閒肯定要玩一玩～</p>\n<hr>\n<h4 id=\"Virbox-：\"><a href=\"#Virbox-：\" class=\"headerlink\" title=\"Virbox ：\"></a>Virbox ：</h4><pre><code>sudo mount /dev/cdrom // ^^^目標地^^^ //掛載光盤 \nsudo mount -t vboxsf //^^Name^^ ^^^目標地^^^ //掛載虛擬機共享文件\n</code></pre>\n<hr>\n<h3 id=\"下面是其他软件的学习笔记：（等待更新——）\"><a href=\"#下面是其他软件的学习笔记：（等待更新——）\" class=\"headerlink\" title=\"下面是其他软件的学习笔记：（等待更新——）\"></a>下面是其他软件的学习笔记：（等待更新——）</h3><hr>\n<h4 id=\"Linux：\"><a href=\"#Linux：\" class=\"headerlink\" title=\"Linux：\"></a>Linux：</h4><p>嗯，这是个软件…详见《Linuxのノート》</p>\n<hr>\n<h4 id=\"Pelican\"><a href=\"#Pelican\" class=\"headerlink\" title=\"Pelican :\"></a>Pelican :</h4><p>静态网页编辑生成工具。 keywords：Python、markdown</p>\n<hr>\n<h4 id=\"Blender：\"><a href=\"#Blender：\" class=\"headerlink\" title=\"Blender：\"></a>Blender：</h4><p>開源建模，動畫軟件。 </p>\n<h6 id=\"快捷鍵記錄：\"><a href=\"#快捷鍵記錄：\" class=\"headerlink\" title=\"快捷鍵記錄：\"></a>快捷鍵記錄：</h6><pre><code>N、T    //編輯欄呼出、隱藏 \nT    //側重物體，N側重編輯窗口 \nB    //選擇 \nTab    //模式切換\nCtrl+U    //用戶界面保存 \nZ    //物體顯示樣式切換 線框、透視 \nH    //刪除 \nG    //移動 \n</code></pre>\n<h4 id=\"musicbox：\"><a href=\"#musicbox：\" class=\"headerlink\" title=\"musicbox：\"></a>musicbox：</h4><p>Linux 命令行下的 網易雲音樂 。夠精簡夠豐富，實爲經驗驚豔。</p>\n<h5 id=\"基於Python：\"><a href=\"#基於Python：\" class=\"headerlink\" title=\"基於Python：\"></a>基於Python：</h5><pre><code>&gt;https://github.com/darknessomi/musicbox\n</code></pre>\n<hr>\n<h4 id=\"xSwipe：\"><a href=\"#xSwipe：\" class=\"headerlink\" title=\"xSwipe：\"></a>xSwipe：</h4><p>多指触控软件。通过将触控板手势映射成快捷键，可以支持甚至五指操作，还有侧边功能。在github中搜索<code>xSwipe</code>即可，其中有详细安装说明。之后可以在.conf文件中查看和修改映射快捷键。另最后如果不能运行，可能需要注销重启电脑方可。<br>运行 <code>perl xSwipe.pl</code>即可执行。</p>\n<hr>\n<h4 id=\"OpenCV：\"><a href=\"#OpenCV：\" class=\"headerlink\" title=\"OpenCV：\"></a>OpenCV：</h4><p>开源计算机视觉库。  简单记录一下编译过程：(其實沒啥用的，自己爬官網找安裝教程去，基本沒用。)</p>\n<h5 id=\"1-解决依赖，编译工具\"><a href=\"#1-解决依赖，编译工具\" class=\"headerlink\" title=\"1. 解决依赖，编译工具\"></a>1. 解决依赖，编译工具</h5><pre><code>sudo apt-get install build-essential\nsudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev\nsudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev`\n</code></pre>\n<h5 id=\"2-github-下载源程序\"><a href=\"#2-github-下载源程序\" class=\"headerlink\" title=\"2. github 下载源程序\"></a>2. github 下载源程序</h5><pre><code>git clone https://github.com/opencv/opencv.git\n</code></pre>\n<h5 id=\"3-Building-OpenCV-from-Source-Using-CMake-Using-the-Command-Line\"><a href=\"#3-Building-OpenCV-from-Source-Using-CMake-Using-the-Command-Line\" class=\"headerlink\" title=\"3. Building OpenCV from Source Using CMake, Using the Command Line\"></a>3. Building OpenCV from Source Using CMake, Using the Command Line</h5><pre><code>cd ~/opencv\nmkdir release\ncd release\ncmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..\n</code></pre>\n<h5 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4.\"></a>4.</h5><pre><code>make\nsudo make install\nall from &gt;http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html\n// (或許安裝過程就這句有用 23333)\n\nThanks for your teaching.\n</code></pre>\n<hr>\n<h4 id=\"Simplenote\"><a href=\"#Simplenote\" class=\"headerlink\" title=\"Simplenote:\"></a>Simplenote:</h4><pre><code>一款笔记软件，支持markdown编辑，很轻量、只能记录文字有点儿伤。不过有Linux版就很爽。而且同步速度、启动速度都很迅速。界面简单到不行。手机一次不幸刷机之后，有道云笔记懒得装，之后就用此软件吧…\n</code></pre>\n<h4 id=\"scp\"><a href=\"#scp\" class=\"headerlink\" title=\"scp\"></a>scp</h4><p><code>server copy</code>? 这个简写不晓得，不过确实是适用于远程连接传输文件的…  </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp ian@123.123.41.3(😀):/home/ian/nihou.txt ./files</span><br><span class=\"line\">scp ./files ian@123.123.41.3(😀):/home/ian/nihou.txt </span><br></pre></td></tr></table></figure>\n<h4 id=\"删除Win系统服务\"><a href=\"#删除Win系统服务\" class=\"headerlink\" title=\"删除Win系统服务\"></a>删除Win系统服务</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sc delete serverName</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tmux\"><a href=\"#tmux\" class=\"headerlink\" title=\"tmux\"></a>tmux</h3><p>丰富纯文字终端窗口，可以创建终端副本(反正也是我取得名字)—–类似于<code>win</code>的多桌面。也可以分割终端(界面类似vim分割)l–这便是类似于<code>win</code>的多窗口了。 (官方翻译: ‘窗格’？)</p>\n<ul>\n<li>进入: <code>tmux</code></li>\n<li>退出: <code>exit</code></li>\n<li>类似于<code>vim</code>命令模式： <code>ctrl+b</code>以下简写为<code>CL_B</code>。</li>\n<li>创建多桌面: CL_B + c</li>\n<li>查看全部窗口，类似<code>win+Tab</code>: CL_B + s    使用窗口号切换桌面: CL_B + NUM    </li>\n<li>关闭当前窗口: CL_B + &amp;,emm直接<code>exit</code>…</li>\n<li>创建多窗口: CL_B + “ (垂直上下)、CL_B + % (水平左右)   调整窗口位置、大小 CL_B + space (默认布局轮换)</li>\n<li>显示窗口编号: CL_B + q    暂时最大化当前窗格: CL_B + z   切换到下一个窗格: CL_B + o</li>\n<li>对换窗格位置: CL_B + CL_O(ctrl + o)</li>\n</ul>\n<h3 id=\"Termux\"><a href=\"#Termux\" class=\"headerlink\" title=\"Termux\"></a>Termux</h3><p>类似于<code>WIN</code>端的<code>Subsystem</code>——其实更像Ubuntu下的虚拟终端。 不过这东西功能强大，除了将安卓里的Linux发挥出来。还有<code>Termux API</code>来调用手机的底层接口。</p>\n<h4 id=\"ssh与手机连接\"><a href=\"#ssh与手机连接\" class=\"headerlink\" title=\"ssh与手机连接\"></a>ssh与手机连接</h4><p>其实应该放在<code>ssh</code>的操作里面？ emm，还是就这儿吧。</p>\n<h5 id=\"pc\"><a href=\"#pc\" class=\"headerlink\" title=\"*pc\"></a>*pc</h5><p>**电脑生成密匙,无视密码设置全部回车</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n<p>**电脑开启sshd服务,用于手机的ssh连接到电脑拷贝id_rsa.pub内容</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start sshd</span><br></pre></td></tr></table></figure>\n<p>然而我用的是win子系统所以：sshd re-exec requires execution with an absolute path</p>\n<h5 id=\"phone\"><a href=\"#phone\" class=\"headerlink\" title=\"phone\"></a>phone</h5><p>**手机连接拷贝</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$HOME</span>/.ssh/authorized_keys -&gt; 不管用什么复制，然后放到这个路径就好。</span><br></pre></td></tr></table></figure>\n<p>**查看手机的用户名</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">whoami</span><br></pre></td></tr></table></figure>\n<p>**开启服务</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sshd -p 9000</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"pc-1\"><a href=\"#pc-1\" class=\"headerlink\" title=\"*pc\"></a>*pc</h5><p>连接到手机</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh u0_222@192.168.1.14 -p 9000</span><br></pre></td></tr></table></figure>\n\n<p>Over, 其余问题查看文件权限？  不过还是自建文件<code>.ssh</code>出错率为0吧。</p>\n<p>2018年12月4日11点27分,当我反过来操作的时候…  嗯，果然在权限这里出问题了…<br>另外，电脑端开启<code>sshd</code>的时候用的绝对地址… 因为是Syb？</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 700 ~/.ssh</span><br><span class=\"line\">chmod 600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>\n<pre><code>😓\n</code></pre>\n<h4 id=\"快捷键-有用的音量键？\"><a href=\"#快捷键-有用的音量键？\" class=\"headerlink\" title=\"快捷键(有用的音量键？)\"></a>快捷键(有用的音量键？)</h4><p>显示扩展功能按键</p>\n<p>方法一:</p>\n<ul>\n<li>从左向右滑动,显示隐藏式导航栏,长按左下角的KEYBOARD.</li>\n</ul>\n<p>方法二:</p>\n<ul>\n<li>使用Termux快捷键:音量++Q键</li>\n</ul>\n<p>常用快捷键</p>\n<ul>\n<li>Ctrl键是终端用户常用的按键 – 但大多数触摸键盘都没有这个按键。为此，Termux使用音量减小按钮来模拟Ctrl键。在触摸键盘上按音量减小+ L发送与在硬件键盘上按Ctrl + L相同的输入。</li>\n<li>Ctrl+A -&gt; 将光标移动到行首</li>\n<li>Ctrl+C -&gt; 中止当前进程</li>\n<li>Ctrl+D -&gt; 注销终端会话</li>\n<li>Ctrl+E -&gt; 将光标移动到行尾</li>\n<li>Ctrl+K -&gt; 从光标删除到行尾</li>\n<li>Ctrl+L -&gt; 清除终端</li>\n<li>Ctrl+Z -&gt; 挂起（发送SIGTSTP到）当前进程</li>\n</ul>\n<p>音量加键也可以作为产生特定输入的特殊键.</p>\n<ul>\n<li>音量加+E -&gt; Esc键</li>\n<li>音量加+T -&gt; Tab键</li>\n<li>音量加+1 -&gt; F1（和音量增加+ 2→F2等）</li>\n<li>音量加+0 -&gt; F10</li>\n<li>音量加+B -&gt; Alt + B，使用readline时返回一个单词</li>\n<li>音量加+F -&gt; Alt + F，使用readline时转发一个单词</li>\n<li>音量加+X -&gt; Alt+X</li>\n<li>音量加+W -&gt; 向上箭头键</li>\n<li>音量加+A -&gt; 向左箭头键</li>\n<li>音量加+S -&gt; 向下箭头键</li>\n<li>音量加+D -&gt; 向右箭头键</li>\n<li>音量加+L -&gt; | （管道字符）</li>\n<li>音量加+H -&gt; 〜（波浪号字符）</li>\n<li>音量加+U -&gt; _ (下划线字符)</li>\n<li>音量加+P -&gt; 上一页</li>\n<li>音量加+N -&gt; 下一页</li>\n<li>音量加+. -&gt; Ctrl + \\（SIGQUIT）</li>\n<li>音量加+V -&gt; 显示音量控制</li>\n<li>音量加+Q -&gt; 显示额外的按键视图</li>\n</ul>\n<h2 id=\"Rdfind\"><a href=\"#Rdfind\" class=\"headerlink\" title=\"Rdfind\"></a>Rdfind</h2><h3 id=\"替代方案\"><a href=\"#替代方案\" class=\"headerlink\" title=\"替代方案\"></a>替代方案</h3><p><code>Rdfind</code>是命令行的, <code>DuplicatePhotoFinder1.6.3</code>是有UI的, 可以展示出内容, 不过很傻, 不能多选一次删除, 只能一个一个删除…..<br>所以我做了一个托管鼠标点击器. 如下</p>\n<p>使用<code>Rdfind</code> 进行重复文件查询, 然后删了, 节省磁盘空间.</p>\n<blockquote>\n<p>不过我准备自己做一个, 更方便删减图片, 所以以后应该会用自己做的, 这个就留下参考吧.<br>[^_^]:<br>    2021-04-22</p>\n</blockquote>\n<h3 id=\"查询重复\"><a href=\"#查询重复\" class=\"headerlink\" title=\"查询重复\"></a>查询重复</h3><p><code>drfind /Image/`, 结果报表存于当前目录`results.txt</code></p>\n<h3 id=\"终端输出\"><a href=\"#终端输出\" class=\"headerlink\" title=\"终端输出\"></a>终端输出</h3><p><code>rdfind -dryrun true /Image</code></p>\n<h3 id=\"删除空文件和重复文件\"><a href=\"#删除空文件和重复文件\" class=\"headerlink\" title=\"删除空文件和重复文件\"></a>删除空文件和重复文件</h3><p><code>rdfind -deleteduplicates true -ignoreempty false /Image</code></p>\n<h3 id=\"删除重复文件\"><a href=\"#删除重复文件\" class=\"headerlink\" title=\"删除重复文件\"></a>删除重复文件</h3><p><code>rdfind -deleteduplicates true /Image</code></p>\n<h2 id=\"鼠标自动点击\"><a href=\"#鼠标自动点击\" class=\"headerlink\" title=\"鼠标自动点击\"></a>鼠标自动点击</h2><p>选择点, 不到1s一点, 终端无法立即实时中断, 估计要用上<code>Listener</code>不过现在这样也可以啦.</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> date, datetime</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> pynput <span class=\"keyword\">import</span> mouse</span><br><span class=\"line\"><span class=\"keyword\">from</span> pynput.mouse <span class=\"keyword\">import</span> Button, Controller</span><br><span class=\"line\"></span><br><span class=\"line\">mouse = Controller()</span><br><span class=\"line\"></span><br><span class=\"line\">sign_start = <span class=\"literal\">False</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;请将鼠标移动到指定位置, 输入`r`开始.&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">str_input = <span class=\"literal\">None</span></span><br><span class=\"line\">position_loop = <span class=\"literal\">None</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">    str_input = str_input <span class=\"keyword\">or</span> <span class=\"built_in\">input</span>()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> str_input == <span class=\"string\">&#x27;r&#x27;</span>:</span><br><span class=\"line\">        position_loop = position_loop <span class=\"keyword\">or</span> mouse.position</span><br><span class=\"line\">        mouse.position = position_loop</span><br><span class=\"line\">        <span class=\"comment\"># mouse.move(position_loop[0], position_loop[-1])</span></span><br><span class=\"line\">        mouse.press(Button.left)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">0.2</span>)</span><br><span class=\"line\">        mouse.release(Button.left)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;<span class=\"subst\">&#123;datetime.now()&#125;</span> - clicked - <span class=\"subst\">&#123;position_loop&#125;</span>.&quot;</span>)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">0.4</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;输入错误, 程序结束.&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"命令行的简便生活-💦🤣\"><a href=\"#命令行的简便生活-💦🤣\" class=\"headerlink\" title=\"命令行的简便生活 💦🤣\"></a>命令行的简便生活 💦🤣</h1><hr>\n<h2 id=\"find-文件查找\"><a href=\"#find-文件查找\" class=\"headerlink\" title=\"find 文件查找\"></a>find 文件查找</h2><p>今天(2018年12月12日，17点08分)在众多文件里找一个文件的时候… 想到<code>find</code>命令。不过之前没有怎么了解过，所以…<br>我居然用了<code>tree | grep filename.filetype</code>来找东西。 结果路径太深——就最多确认了此文件的存在性。<br>随后，才知道<code>find</code>要加<code>-name</code>参数。 emm…不过对于<code>find</code>多功能来说也说得过去。  随后便有了以下这个命令:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find . -name &quot;cifar.py&quot; -exec vim &#123;&#125; \\;</span><br></pre></td></tr></table></figure>\n<p>没错~，查找之后并编辑——😄<br>除此之外，当然可能用于 <code>rm</code>、<code>grep</code>等去替换<code>vim</code>进行操作。<br>其中，<code>&#123;&#125;</code>自然时代表匹配文件的路径。 如果不止一个那么…就： vim为例，会关闭一个窗口再打开另一个😓<br>另外，配合<code>grep</code>查找文本内容的时候，需要在最后面加<code>-print</code>否则只有匹配文本，不显示文件路径。</p>\n<h1 id=\"Windows-转换磁盘分区格式\"><a href=\"#Windows-转换磁盘分区格式\" class=\"headerlink\" title=\"Windows 转换磁盘分区格式\"></a>Windows 转换磁盘分区格式</h1><h2 id=\"方法-步骤\"><a href=\"#方法-步骤\" class=\"headerlink\" title=\"方法/步骤\"></a>方法/步骤</h2><p>1<br>1.U盘引导，进入PE系统</p>\n<p>2<br> 用pe进去，找到运行输入cmd   </p>\n<p>3<br>输入”Diskpart”(不用输入引号，下同)，并按回车，进入操作界面</p>\n<p>4<br>输入：”list disk”，查看磁盘信息。一般会出现两个选项，一个是你的硬盘，一个是U盘，要注意区分。</p>\n<p>5<br>输入：”select disk 0”，选择disk 0为当前操作的磁盘（也就是电脑的 硬盘）</p>\n<p>6<br>输入：”Clean”，清空当前磁盘分区</p>\n<p>7<br>输入：”convert mbr”，转换为MBR分区。</p>\n<p>8<br>OK，搞定，可以安装WIN7了</p>\n<h3 id=\"Windows远程桌面\"><a href=\"#Windows远程桌面\" class=\"headerlink\" title=\"Windows远程桌面\"></a>Windows远程桌面</h3><pre><code>mstsc\n# WIn自带应用，不过用的时候得关闭防火墙就很伤\n</code></pre>\n<h3 id=\"Windows-输入法故障\"><a href=\"#Windows-输入法故障\" class=\"headerlink\" title=\"Windows 输入法故障\"></a>Windows 输入法故障</h3><pre><code>ctfmon.exe     win+R 执行此，重启输入法\n</code></pre>\n<h3 id=\"Win-安装Ubuntu\"><a href=\"#Win-安装Ubuntu\" class=\"headerlink\" title=\"Win 安装Ubuntu\"></a>Win 安装Ubuntu</h3><pre><code>#在powerShell中管理员运行\nEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-\n</code></pre>\n<p>Windows-Subsystem-Linux</p>\n<h4 id=\"Windows-自启动项目录\"><a href=\"#Windows-自启动项目录\" class=\"headerlink\" title=\"Windows 自启动项目录\"></a>Windows 自启动项目录</h4><p><code>C:\\Users\\Administrator\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup</code></p>\n<p>在此目录下添加入快捷方式则在系统启动之后自动加载，但会有一些延时，不同于直接定义的自启动项，算是<font color=#ffff00>优先级最落后</font>的项目吧</p>\n<h4 id=\"Windows-查看电池使用情况\"><a href=\"#Windows-查看电池使用情况\" class=\"headerlink\" title=\"Windows 查看电池使用情况\"></a>Windows 查看电池使用情况</h4><pre><code>powercfg /BatteryReport\n# 适用于Win8+\n</code></pre>\n<h2 id=\"Python-Pip\"><a href=\"#Python-Pip\" class=\"headerlink\" title=\"Python Pip\"></a>Python Pip</h2><pre><code>pip install -r *.txt\n# 从*.txt 文件读取需要安装的插件列表\n</code></pre>\n<hr>\n<hr>\n<h1 id=\"win-Ubuntu-时间不一致\"><a href=\"#win-Ubuntu-时间不一致\" class=\"headerlink\" title=\"win Ubuntu 时间不一致\"></a>win Ubuntu 时间不一致</h1><pre><code>timedatectl set-local-rtc true \n#采用本地时间          推荐\n</code></pre>\n<hr>\n<hr>\n<h3 id=\"Ubuntu-升级系统\"><a href=\"#Ubuntu-升级系统\" class=\"headerlink\" title=\"Ubuntu  升级系统\"></a>Ubuntu  升级系统</h3><pre><code>sudo update-manager -c -d\n#会检测是否有系统更新，\n#如果都更新完毕，\n#则提醒有新版本系统是否更新\n</code></pre>\n<h3 id=\"Windows-更新系统错误\"><a href=\"#Windows-更新系统错误\" class=\"headerlink\" title=\"Windows 更新系统错误\"></a>Windows 更新系统错误</h3><p><font color=#ff00ff>dism++ 你值得拥有</font></p>\n<p>另外：<br><font color=#800008>无法连接到更新服务。我们将稍后再试，你也可以立即进行检查。如果问题仍然存在，请确保你已连接到 Internet。</font><br>可能是<br><font color=#808808>本地组策略中的windows更新的“指定Intranet Microsoft更新服务位置”被更改过</font></p>\n<p>解决办法为</p>\n<ul>\n<li><ol>\n<li>gpedit.msc</li>\n</ol>\n</li>\n<li><ol start=\"2\">\n<li>打开“本地组策略编辑器”展开“计算机配置”—“管理模版”—“Windows组件”—“Windows 更新”（专业版称为Windows Update）</li>\n</ol>\n</li>\n<li><ol start=\"3\">\n<li>“指定Intranet Microsoft更新服务位置”，点击“未配置”</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"Ubuntu-桌面显示问题\"><a href=\"#Ubuntu-桌面显示问题\" class=\"headerlink\" title=\"Ubuntu 桌面显示问题\"></a>Ubuntu 桌面显示问题</h3><p>卸载 ibus 输入法，会出现桌面显示不完全的情况，任务栏显示，启动栏消失，键盘快捷键无法使用。解决办法是重新安装 Unity 之后启动Unity 就会重新打开桌面环境…其实是又重新安装了 ibus  嗯………</p>\n<h3 id=\"Vim-设置Tab空格数\"><a href=\"#Vim-设置Tab空格数\" class=\"headerlink\" title=\"Vim 设置Tab空格数\"></a>Vim 设置Tab空格数</h3><pre><code>:set tabstop=4\n#添加至用户vim配置文件： .vimrc 下即可\n</code></pre>\n<h1 id=\"正则表达式\"><a href=\"#正则表达式\" class=\"headerlink\" title=\"正则表达式\"></a>正则表达式</h1><p>作为短小精悍的东西嘞，今天在限制密码类型和长度的时候尝尽了甜头。但在分类时…不好分，应该单独写一个笔记的，但短小精悍嘛，所以就放在命令行这里了。</p>\n<pre><code>import re    # 好吧，其实无所谓的，因为下面并没有用到Python正则模块\n    a = QtCore.QRegExp(&quot;[A-Za-z]&#123;0,5&#125;[1-9][0-9]&#123;0,5&#125;&quot;)\n    a = QtCore.QRegExp(&quot;[a-zA-Z0-9]&#123;0,12&#125;$&quot;)\n    a = QtCore.QRegExp(&quot;[a-zA-Z0-9]+$&quot;)\na = QtCore.QRegExp(&quot;[a-zA-Z0-9\\,\\.\\\\\\!\\?\\#\\$\\%\\^\\&amp;\\*\\(\\)\\)_\\_\\=\\`\\+]+$&quot;)\n</code></pre>\n<p>这里的<code>[]</code>中内容是输入范围，<code>&#123;&#125;</code>中的则是长度限制，而<code>+</code>就是不限长度 与<code>*</code>类似。 <code>$ </code>是结尾标志。 over。</p>\n<h2 id=\"闲的没事找事记：\"><a href=\"#闲的没事找事记：\" class=\"headerlink\" title=\"闲的没事找事记：\"></a>闲的没事找事记：</h2><pre><code>安装了一个美国版的windows 10 pro N 结果字体缺失，系统默认编码方式是Ascii不是utf……导致程序中的输出中文都出现问题。结果在这些不构成生产力的份儿上浪费时间，真是闲的没事找事…\n    \n</code></pre>\n<h2 id=\"Vim\"><a href=\"#Vim\" class=\"headerlink\" title=\"Vim\"></a>Vim</h2><pre><code>查看编码格式 `:set fenc`   \n设置文件格式`:set fileformat=unix`或者`:set fileformat=dos` \n    ——针对于换行符\n</code></pre>\n<p><code>set tabstop=4</code>、<code>set expandtab</code>前者是一个<code>tab</code>的长度，后者是tab换为空格…</p>\n<h1 id=\"GoodApps\"><a href=\"#GoodApps\" class=\"headerlink\" title=\"GoodApps\"></a>GoodApps</h1><h4 id=\"Nitrux、Flatabulous-master：\"><a href=\"#Nitrux、Flatabulous-master：\" class=\"headerlink\" title=\"Nitrux、Flatabulous-master：\"></a>Nitrux、Flatabulous-master：</h4><p>主题，图标 用来美化很漂亮，图例样式可以参看这两者的Github。</p>\n<hr>\n<h4 id=\"GoldenDict：\"><a href=\"#GoldenDict：\" class=\"headerlink\" title=\"GoldenDict：\"></a>GoldenDict：</h4><p>一款词典，其可以添加网络翻译源，还可以自行下载本地翻译文件，本地内容我下载的含有：日汉、汉日、英牛津，朗道，还有本本草纲目……没错，确实还有科普类的翻译源。各种奇异翻译本都有。</p>\n<hr>\n<h4 id=\"Xware：\"><a href=\"#Xware：\" class=\"headerlink\" title=\"Xware：\"></a>Xware：</h4><p>一款迅雷的替代，网络远程下载，完全能当一个没有广告的迅雷来使。 只不过需要账户密码，还有，在安装完毕之后，需要预先设置一番，将Xware托管改为用户态upstar，或者简单的自动启动。否则会显示ETM 没有链接，不能使用。另外将挂载，实际作用是下载保存位置，也设置一下。这么长时间了，英文路径应该养成习惯……</p>\n<hr>\n<h4 id=\"MyPaint：\"><a href=\"#MyPaint：\" class=\"headerlink\" title=\"MyPaint：\"></a>MyPaint：</h4><p>画图工具，很好使。</p>\n<hr>\n<h4 id=\"Chrome\"><a href=\"#Chrome\" class=\"headerlink\" title=\"Chrome:\"></a>Chrome:</h4><p>这个浏览器不用说，这里介绍的是关于它修改hosts文件之后可能仍然无法使用谷歌搜索的问题。</p>\n<p>1.因为，默认的是http，故显示已被重定向啊，啥的。只要在地址栏前输入https就可以正常访问了。<br>2.当然，这样的话无法使用网页里的按钮“使用谷歌搜索”，所以需要修改其默认。可以在Chrome://net-internals/ 中，找见HSTS选项卡，Domain中输入想要默认强制使用https的网址。（PS：因为我的使用google自动跳转谷歌香港，所以这里用google.com还是不行的，得加上.hk的后缀。）<br>3.以上修改方法应该只能设置一个默认网址呢，不过一个google搜索就够了…… 嗯，我要求比较低。 至于其他浏览器，大概是默认https的，因为可以直接访问嘛。<br>自然还有很好的别的稍微专业的工具，这个会在之后持续更新出来，用学习笔记的形式（而且，等我学会在文章里添加链接啊，图片啊之后）。以上入门级、常用级的也会持续更新的～ 下载链接我以及之后都不会贴出来，嗯，毕竟没有永远保存的，链接经常失效。自行搜索总是好的，还能顺便了解一下这块软件的使用方法，以及类似替代软件的出现。</p>\n<hr>\n<h4 id=\"Nethack：\"><a href=\"#Nethack：\" class=\"headerlink\" title=\"Nethack：\"></a>Nethack：</h4><p>終端運行的一款地牢遊戲，相當高的自由度和隨機程度，除卻一切怪物和地圖都是用符號來代替，戰鬥過程就是用文字信息來描述，在創造和思索方面簡直一流。以後有空閒肯定要玩一玩～</p>\n<hr>\n<h4 id=\"Virbox-：\"><a href=\"#Virbox-：\" class=\"headerlink\" title=\"Virbox ：\"></a>Virbox ：</h4><pre><code>sudo mount /dev/cdrom // ^^^目標地^^^ //掛載光盤 \nsudo mount -t vboxsf //^^Name^^ ^^^目標地^^^ //掛載虛擬機共享文件\n</code></pre>\n<hr>\n<h3 id=\"下面是其他软件的学习笔记：（等待更新——）\"><a href=\"#下面是其他软件的学习笔记：（等待更新——）\" class=\"headerlink\" title=\"下面是其他软件的学习笔记：（等待更新——）\"></a>下面是其他软件的学习笔记：（等待更新——）</h3><hr>\n<h4 id=\"Linux：\"><a href=\"#Linux：\" class=\"headerlink\" title=\"Linux：\"></a>Linux：</h4><p>嗯，这是个软件…详见《Linuxのノート》</p>\n<hr>\n<h4 id=\"Pelican\"><a href=\"#Pelican\" class=\"headerlink\" title=\"Pelican :\"></a>Pelican :</h4><p>静态网页编辑生成工具。 keywords：Python、markdown</p>\n<hr>\n<h4 id=\"Blender：\"><a href=\"#Blender：\" class=\"headerlink\" title=\"Blender：\"></a>Blender：</h4><p>開源建模，動畫軟件。 </p>\n<h6 id=\"快捷鍵記錄：\"><a href=\"#快捷鍵記錄：\" class=\"headerlink\" title=\"快捷鍵記錄：\"></a>快捷鍵記錄：</h6><pre><code>N、T    //編輯欄呼出、隱藏 \nT    //側重物體，N側重編輯窗口 \nB    //選擇 \nTab    //模式切換\nCtrl+U    //用戶界面保存 \nZ    //物體顯示樣式切換 線框、透視 \nH    //刪除 \nG    //移動 \n</code></pre>\n<h4 id=\"musicbox：\"><a href=\"#musicbox：\" class=\"headerlink\" title=\"musicbox：\"></a>musicbox：</h4><p>Linux 命令行下的 網易雲音樂 。夠精簡夠豐富，實爲經驗驚豔。</p>\n<h5 id=\"基於Python：\"><a href=\"#基於Python：\" class=\"headerlink\" title=\"基於Python：\"></a>基於Python：</h5><pre><code>&gt;https://github.com/darknessomi/musicbox\n</code></pre>\n<hr>\n<h4 id=\"xSwipe：\"><a href=\"#xSwipe：\" class=\"headerlink\" title=\"xSwipe：\"></a>xSwipe：</h4><p>多指触控软件。通过将触控板手势映射成快捷键，可以支持甚至五指操作，还有侧边功能。在github中搜索<code>xSwipe</code>即可，其中有详细安装说明。之后可以在.conf文件中查看和修改映射快捷键。另最后如果不能运行，可能需要注销重启电脑方可。<br>运行 <code>perl xSwipe.pl</code>即可执行。</p>\n<hr>\n<h4 id=\"OpenCV：\"><a href=\"#OpenCV：\" class=\"headerlink\" title=\"OpenCV：\"></a>OpenCV：</h4><p>开源计算机视觉库。  简单记录一下编译过程：(其實沒啥用的，自己爬官網找安裝教程去，基本沒用。)</p>\n<h5 id=\"1-解决依赖，编译工具\"><a href=\"#1-解决依赖，编译工具\" class=\"headerlink\" title=\"1. 解决依赖，编译工具\"></a>1. 解决依赖，编译工具</h5><pre><code>sudo apt-get install build-essential\nsudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev\nsudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev`\n</code></pre>\n<h5 id=\"2-github-下载源程序\"><a href=\"#2-github-下载源程序\" class=\"headerlink\" title=\"2. github 下载源程序\"></a>2. github 下载源程序</h5><pre><code>git clone https://github.com/opencv/opencv.git\n</code></pre>\n<h5 id=\"3-Building-OpenCV-from-Source-Using-CMake-Using-the-Command-Line\"><a href=\"#3-Building-OpenCV-from-Source-Using-CMake-Using-the-Command-Line\" class=\"headerlink\" title=\"3. Building OpenCV from Source Using CMake, Using the Command Line\"></a>3. Building OpenCV from Source Using CMake, Using the Command Line</h5><pre><code>cd ~/opencv\nmkdir release\ncd release\ncmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..\n</code></pre>\n<h5 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4.\"></a>4.</h5><pre><code>make\nsudo make install\nall from &gt;http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html\n// (或許安裝過程就這句有用 23333)\n\nThanks for your teaching.\n</code></pre>\n<hr>\n<h4 id=\"Simplenote\"><a href=\"#Simplenote\" class=\"headerlink\" title=\"Simplenote:\"></a>Simplenote:</h4><pre><code>一款笔记软件，支持markdown编辑，很轻量、只能记录文字有点儿伤。不过有Linux版就很爽。而且同步速度、启动速度都很迅速。界面简单到不行。手机一次不幸刷机之后，有道云笔记懒得装，之后就用此软件吧…\n</code></pre>\n<h4 id=\"scp\"><a href=\"#scp\" class=\"headerlink\" title=\"scp\"></a>scp</h4><p><code>server copy</code>? 这个简写不晓得，不过确实是适用于远程连接传输文件的…  </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scp ian@123.123.41.3(😀):/home/ian/nihou.txt ./files</span><br><span class=\"line\">scp ./files ian@123.123.41.3(😀):/home/ian/nihou.txt </span><br></pre></td></tr></table></figure>\n<h4 id=\"删除Win系统服务\"><a href=\"#删除Win系统服务\" class=\"headerlink\" title=\"删除Win系统服务\"></a>删除Win系统服务</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sc delete serverName</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"tmux\"><a href=\"#tmux\" class=\"headerlink\" title=\"tmux\"></a>tmux</h3><p>丰富纯文字终端窗口，可以创建终端副本(反正也是我取得名字)—–类似于<code>win</code>的多桌面。也可以分割终端(界面类似vim分割)l–这便是类似于<code>win</code>的多窗口了。 (官方翻译: ‘窗格’？)</p>\n<ul>\n<li>进入: <code>tmux</code></li>\n<li>退出: <code>exit</code></li>\n<li>类似于<code>vim</code>命令模式： <code>ctrl+b</code>以下简写为<code>CL_B</code>。</li>\n<li>创建多桌面: CL_B + c</li>\n<li>查看全部窗口，类似<code>win+Tab</code>: CL_B + s    使用窗口号切换桌面: CL_B + NUM    </li>\n<li>关闭当前窗口: CL_B + &amp;,emm直接<code>exit</code>…</li>\n<li>创建多窗口: CL_B + “ (垂直上下)、CL_B + % (水平左右)   调整窗口位置、大小 CL_B + space (默认布局轮换)</li>\n<li>显示窗口编号: CL_B + q    暂时最大化当前窗格: CL_B + z   切换到下一个窗格: CL_B + o</li>\n<li>对换窗格位置: CL_B + CL_O(ctrl + o)</li>\n</ul>\n<h3 id=\"Termux\"><a href=\"#Termux\" class=\"headerlink\" title=\"Termux\"></a>Termux</h3><p>类似于<code>WIN</code>端的<code>Subsystem</code>——其实更像Ubuntu下的虚拟终端。 不过这东西功能强大，除了将安卓里的Linux发挥出来。还有<code>Termux API</code>来调用手机的底层接口。</p>\n<h4 id=\"ssh与手机连接\"><a href=\"#ssh与手机连接\" class=\"headerlink\" title=\"ssh与手机连接\"></a>ssh与手机连接</h4><p>其实应该放在<code>ssh</code>的操作里面？ emm，还是就这儿吧。</p>\n<h5 id=\"pc\"><a href=\"#pc\" class=\"headerlink\" title=\"*pc\"></a>*pc</h5><p>**电脑生成密匙,无视密码设置全部回车</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n<p>**电脑开启sshd服务,用于手机的ssh连接到电脑拷贝id_rsa.pub内容</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start sshd</span><br></pre></td></tr></table></figure>\n<p>然而我用的是win子系统所以：sshd re-exec requires execution with an absolute path</p>\n<h5 id=\"phone\"><a href=\"#phone\" class=\"headerlink\" title=\"phone\"></a>phone</h5><p>**手机连接拷贝</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$HOME</span>/.ssh/authorized_keys -&gt; 不管用什么复制，然后放到这个路径就好。</span><br></pre></td></tr></table></figure>\n<p>**查看手机的用户名</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">whoami</span><br></pre></td></tr></table></figure>\n<p>**开启服务</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sshd -p 9000</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"pc-1\"><a href=\"#pc-1\" class=\"headerlink\" title=\"*pc\"></a>*pc</h5><p>连接到手机</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh u0_222@192.168.1.14 -p 9000</span><br></pre></td></tr></table></figure>\n\n<p>Over, 其余问题查看文件权限？  不过还是自建文件<code>.ssh</code>出错率为0吧。</p>\n<p>2018年12月4日11点27分,当我反过来操作的时候…  嗯，果然在权限这里出问题了…<br>另外，电脑端开启<code>sshd</code>的时候用的绝对地址… 因为是Syb？</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 700 ~/.ssh</span><br><span class=\"line\">chmod 600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>\n<pre><code>😓\n</code></pre>\n<h4 id=\"快捷键-有用的音量键？\"><a href=\"#快捷键-有用的音量键？\" class=\"headerlink\" title=\"快捷键(有用的音量键？)\"></a>快捷键(有用的音量键？)</h4><p>显示扩展功能按键</p>\n<p>方法一:</p>\n<ul>\n<li>从左向右滑动,显示隐藏式导航栏,长按左下角的KEYBOARD.</li>\n</ul>\n<p>方法二:</p>\n<ul>\n<li>使用Termux快捷键:音量++Q键</li>\n</ul>\n<p>常用快捷键</p>\n<ul>\n<li>Ctrl键是终端用户常用的按键 – 但大多数触摸键盘都没有这个按键。为此，Termux使用音量减小按钮来模拟Ctrl键。在触摸键盘上按音量减小+ L发送与在硬件键盘上按Ctrl + L相同的输入。</li>\n<li>Ctrl+A -&gt; 将光标移动到行首</li>\n<li>Ctrl+C -&gt; 中止当前进程</li>\n<li>Ctrl+D -&gt; 注销终端会话</li>\n<li>Ctrl+E -&gt; 将光标移动到行尾</li>\n<li>Ctrl+K -&gt; 从光标删除到行尾</li>\n<li>Ctrl+L -&gt; 清除终端</li>\n<li>Ctrl+Z -&gt; 挂起（发送SIGTSTP到）当前进程</li>\n</ul>\n<p>音量加键也可以作为产生特定输入的特殊键.</p>\n<ul>\n<li>音量加+E -&gt; Esc键</li>\n<li>音量加+T -&gt; Tab键</li>\n<li>音量加+1 -&gt; F1（和音量增加+ 2→F2等）</li>\n<li>音量加+0 -&gt; F10</li>\n<li>音量加+B -&gt; Alt + B，使用readline时返回一个单词</li>\n<li>音量加+F -&gt; Alt + F，使用readline时转发一个单词</li>\n<li>音量加+X -&gt; Alt+X</li>\n<li>音量加+W -&gt; 向上箭头键</li>\n<li>音量加+A -&gt; 向左箭头键</li>\n<li>音量加+S -&gt; 向下箭头键</li>\n<li>音量加+D -&gt; 向右箭头键</li>\n<li>音量加+L -&gt; | （管道字符）</li>\n<li>音量加+H -&gt; 〜（波浪号字符）</li>\n<li>音量加+U -&gt; _ (下划线字符)</li>\n<li>音量加+P -&gt; 上一页</li>\n<li>音量加+N -&gt; 下一页</li>\n<li>音量加+. -&gt; Ctrl + \\（SIGQUIT）</li>\n<li>音量加+V -&gt; 显示音量控制</li>\n<li>音量加+Q -&gt; 显示额外的按键视图</li>\n</ul>\n<h2 id=\"Rdfind\"><a href=\"#Rdfind\" class=\"headerlink\" title=\"Rdfind\"></a>Rdfind</h2><h3 id=\"替代方案\"><a href=\"#替代方案\" class=\"headerlink\" title=\"替代方案\"></a>替代方案</h3><p><code>Rdfind</code>是命令行的, <code>DuplicatePhotoFinder1.6.3</code>是有UI的, 可以展示出内容, 不过很傻, 不能多选一次删除, 只能一个一个删除…..<br>所以我做了一个托管鼠标点击器. 如下</p>\n<p>使用<code>Rdfind</code> 进行重复文件查询, 然后删了, 节省磁盘空间.</p>\n<blockquote>\n<p>不过我准备自己做一个, 更方便删减图片, 所以以后应该会用自己做的, 这个就留下参考吧.<br>[^_^]:<br>    2021-04-22</p>\n</blockquote>\n<h3 id=\"查询重复\"><a href=\"#查询重复\" class=\"headerlink\" title=\"查询重复\"></a>查询重复</h3><p><code>drfind /Image/`, 结果报表存于当前目录`results.txt</code></p>\n<h3 id=\"终端输出\"><a href=\"#终端输出\" class=\"headerlink\" title=\"终端输出\"></a>终端输出</h3><p><code>rdfind -dryrun true /Image</code></p>\n<h3 id=\"删除空文件和重复文件\"><a href=\"#删除空文件和重复文件\" class=\"headerlink\" title=\"删除空文件和重复文件\"></a>删除空文件和重复文件</h3><p><code>rdfind -deleteduplicates true -ignoreempty false /Image</code></p>\n<h3 id=\"删除重复文件\"><a href=\"#删除重复文件\" class=\"headerlink\" title=\"删除重复文件\"></a>删除重复文件</h3><p><code>rdfind -deleteduplicates true /Image</code></p>\n<h2 id=\"鼠标自动点击\"><a href=\"#鼠标自动点击\" class=\"headerlink\" title=\"鼠标自动点击\"></a>鼠标自动点击</h2><p>选择点, 不到1s一点, 终端无法立即实时中断, 估计要用上<code>Listener</code>不过现在这样也可以啦.</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> date, datetime</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> pynput <span class=\"keyword\">import</span> mouse</span><br><span class=\"line\"><span class=\"keyword\">from</span> pynput.mouse <span class=\"keyword\">import</span> Button, Controller</span><br><span class=\"line\"></span><br><span class=\"line\">mouse = Controller()</span><br><span class=\"line\"></span><br><span class=\"line\">sign_start = <span class=\"literal\">False</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;请将鼠标移动到指定位置, 输入`r`开始.&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">str_input = <span class=\"literal\">None</span></span><br><span class=\"line\">position_loop = <span class=\"literal\">None</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">    str_input = str_input <span class=\"keyword\">or</span> <span class=\"built_in\">input</span>()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> str_input == <span class=\"string\">&#x27;r&#x27;</span>:</span><br><span class=\"line\">        position_loop = position_loop <span class=\"keyword\">or</span> mouse.position</span><br><span class=\"line\">        mouse.position = position_loop</span><br><span class=\"line\">        <span class=\"comment\"># mouse.move(position_loop[0], position_loop[-1])</span></span><br><span class=\"line\">        mouse.press(Button.left)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">0.2</span>)</span><br><span class=\"line\">        mouse.release(Button.left)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;<span class=\"subst\">&#123;datetime.now()&#125;</span> - clicked - <span class=\"subst\">&#123;position_loop&#125;</span>.&quot;</span>)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">0.4</span>)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;输入错误, 程序结束.&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br></pre></td></tr></table></figure>\n"},{"title":"网络(Computer Network)","date":"2021-04-22T07:15:14.000Z","_content":"\n![计算机网络](https://pic2.zhimg.com/v2-16d997d221222a706345ed08dd13f687_1440w.jpg?source=172ae18b \"net\")\n\n## C++ & Epoll \n代码可见[这里](https://github.com/IanVzs/demo_test/tree/master/c_lang/epoll_test)\n\n也没啥高级就是:\n1. create_socket\n2. epoll_create1\n3. epoll_ctl(1. & 2.)\n4. struct epoll_event events[MAX_EPOLL_EVENTS] = {0};\n5. while1: epoll_wait(2, & 4.)\n    - eventfd == sockfd accept\n    - else => connfd read\n\n所以就是:\n1. epoll_event -> 内核空间\n2. epitem -> 红黑\n3. 设备事件就绪 - callback (epitem -> rdlist链表)\n4. emmmm...有需要再继续整理吧\n\n和`select`-`poll`区别为: 一个遍历, 一个触发式的.","source":"_posts/notes/net.md","raw":"---\ntitle: 网络(Computer Network)\ndate: 2021-04-22 15:15:14\ncategory: [note, 网络(Net)]\ntags:\n---\n\n![计算机网络](https://pic2.zhimg.com/v2-16d997d221222a706345ed08dd13f687_1440w.jpg?source=172ae18b \"net\")\n\n## C++ & Epoll \n代码可见[这里](https://github.com/IanVzs/demo_test/tree/master/c_lang/epoll_test)\n\n也没啥高级就是:\n1. create_socket\n2. epoll_create1\n3. epoll_ctl(1. & 2.)\n4. struct epoll_event events[MAX_EPOLL_EVENTS] = {0};\n5. while1: epoll_wait(2, & 4.)\n    - eventfd == sockfd accept\n    - else => connfd read\n\n所以就是:\n1. epoll_event -> 内核空间\n2. epitem -> 红黑\n3. 设备事件就绪 - callback (epitem -> rdlist链表)\n4. emmmm...有需要再继续整理吧\n\n和`select`-`poll`区别为: 一个遍历, 一个触发式的.","slug":"notes/net","published":1,"updated":"2021-05-08T02:56:02.684Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9b30006u3yqb4954c3t","content":"<p><img src=\"https://pic2.zhimg.com/v2-16d997d221222a706345ed08dd13f687_1440w.jpg?source=172ae18b\" alt=\"计算机网络\" title=\"net\"></p>\n<h2 id=\"C-amp-Epoll\"><a href=\"#C-amp-Epoll\" class=\"headerlink\" title=\"C++ &amp; Epoll\"></a>C++ &amp; Epoll</h2><p>代码可见<a href=\"https://github.com/IanVzs/demo_test/tree/master/c_lang/epoll_test\">这里</a></p>\n<p>也没啥高级就是:</p>\n<ol>\n<li>create_socket</li>\n<li>epoll_create1</li>\n<li>epoll_ctl(1. &amp; 2.)</li>\n<li>struct epoll_event events[MAX_EPOLL_EVENTS] = {0};</li>\n<li>while1: epoll_wait(2, &amp; 4.)<ul>\n<li>eventfd == sockfd accept</li>\n<li>else =&gt; connfd read</li>\n</ul>\n</li>\n</ol>\n<p>所以就是:</p>\n<ol>\n<li>epoll_event -&gt; 内核空间</li>\n<li>epitem -&gt; 红黑</li>\n<li>设备事件就绪 - callback (epitem -&gt; rdlist链表)</li>\n<li>emmmm…有需要再继续整理吧</li>\n</ol>\n<p>和<code>select</code>-<code>poll</code>区别为: 一个遍历, 一个触发式的.</p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://pic2.zhimg.com/v2-16d997d221222a706345ed08dd13f687_1440w.jpg?source=172ae18b\" alt=\"计算机网络\" title=\"net\"></p>\n<h2 id=\"C-amp-Epoll\"><a href=\"#C-amp-Epoll\" class=\"headerlink\" title=\"C++ &amp; Epoll\"></a>C++ &amp; Epoll</h2><p>代码可见<a href=\"https://github.com/IanVzs/demo_test/tree/master/c_lang/epoll_test\">这里</a></p>\n<p>也没啥高级就是:</p>\n<ol>\n<li>create_socket</li>\n<li>epoll_create1</li>\n<li>epoll_ctl(1. &amp; 2.)</li>\n<li>struct epoll_event events[MAX_EPOLL_EVENTS] = {0};</li>\n<li>while1: epoll_wait(2, &amp; 4.)<ul>\n<li>eventfd == sockfd accept</li>\n<li>else =&gt; connfd read</li>\n</ul>\n</li>\n</ol>\n<p>所以就是:</p>\n<ol>\n<li>epoll_event -&gt; 内核空间</li>\n<li>epitem -&gt; 红黑</li>\n<li>设备事件就绪 - callback (epitem -&gt; rdlist链表)</li>\n<li>emmmm…有需要再继续整理吧</li>\n</ol>\n<p>和<code>select</code>-<code>poll</code>区别为: 一个遍历, 一个触发式的.</p>\n"},{"title":"new Things","date":"2017-08-15T02:26:09.000Z","_content":"\n# 评测\n![sony xz1 compact](https://www.billiger-telefonieren.de/bilder/1/sony-xperia-xz1-compact_gallery_12437.jpg \"tmp\")\n## Sony XZ1 Compact\n### 标题：小三验正妻   Sony XZ1 Compact 评测\n\n国外手机谈体验，国内手机堆配置…\n\n### 3D Creator 支持列表\n<https://forum.xda-developers.com/android/apps-games/app-sony-3d-creator-t3669576/amp/>\n\n### 外观浅谈\n\n大家好，我是谷歌娘。由于up主的舌头废了，所以评测就由我来解说，希望大家能够喜欢~\n\n#### 颜色：\n这次索尼的Xperia XZ1 Compact，有白、黑、红、蓝，四种颜色，各个地方叫法各异月银、鉑銀，夜黑、魅黑都有的叫。不过从官网宣传片来看，霞粉是真的了，但其实说粉…它并不像XZ1的粉的这么明显，而是平时感觉更深，有时觉的好像砖红，有时又觉得其实还挺嫩，但到晚霞铺满之际它有完美嵌入，没错，它会变色……  最惊艳的还是点亮屏幕解锁的那一刻，屏幕于边色融为一体，或许这才是合一设计。\n\n#### 形状：\n与Z3 Compact相比较，边角方正，除了角角硌手之外，边缘要比Z3C圆润，也舒服一些。至于布局，一切就如视频所示了。\n\n#### 续航：\n在up主打开流量没有关闭我家全家桶的情况下，依然用了三十多个小时，不过up也什么国产软件都没装，只装了鹅信，其他常用都在小三里。\n在使用的第三天，一天下来50%，也是一天流量，没禁用谷歌服务，VnPnNn经常挂一会儿会断…考虑晚上不掉电，所以关闭谷歌或者科学用网的话两天一夜还是妥妥的。\n为了验证这个想法，up主第二天就这么拿着仅剩40%电量的手机一早出了门…不过因为没戴现金，所以为了能够活着回来，up仅在扫码支付的时候打开流量，中午，又连无线看了看新闻，聊了聊鹅信。到了下午，掉到了15%启用了省电模式，然后待机，结果三个小时过去直到晚上回来八点愣是只掉了不到3%的电量。所以，两天一夜一冲是真心没有问题的。   不过由于每个人使用方式不一样，也有人可能半天就用完，或者玩游戏几个小时耗光。那这个手机能做的就只是在你使用的时候根据你的习惯准确的预报它还能撑多长时间。\n\n#### 功能：\n首先令up主难过的就是文件管理器没有了自建局域网传输文件到电脑的功能，虽说之前那个File Commander有广告，功能也多。而现在简洁了，却砍掉了up最常用也最喜欢的功能。\nMulti camera，在up主终于买了两个索尼手机的时候，可以使用此功能的时候，居然没了，哈哈哈——\n然后就是下拉列表里电池没法儿点，不像这Z3可以直接点电池去设置电池优化方案。\n最后就是在使用小程序里的扫码时，第一次打开出现画面扭曲的现象，想扫码骑个车吧，在那儿找二维码就得半天，而且对的越准越打不开。解决方法呢，也很简单，就是点击扫码界面里的显示我的二维码，然后再退回来就可以了。这么往返了两次，之后扫码居然正了。不知道是小程序增加了安卓8的支持还是就如索尼官网所说，使用时间越久越懂你，如果是后者那就厉害了。不过才不可能哈哈哈。\n\n#### 拍照：\n拍照方面肯定是不虚XZP的，而关于XZP网上评测很多，所以就不多说了，但今晚，令up注意到了惊艳的东西——就是120°广角啊~  虽说拍照时up极为羞耻，路人也多所以基本是手机划过，瞬间拍照的，在背光的情况下人脸依然被照的这么清楚，还是很难得的。\n\n\n在官网上高挂“超级慢动作摄影”、预测拍摄、追焦对焦连拍。可我找了这么长时间依然没有找懂啊预测拍摄那个拍完分四个照片的功能……莫非还是得用那个应用？ \n\n\n#### 音量对比：\n这次XZ1 Compact如果我说别的都有别人反驳，那么这次音量的提升是真的提升了！简直可以一改当初被室友各种宿舍外放歌曲压制的局面，真的不像日系手机。  下面是Z3C  和 XZ1C播放视频的对比。大家忽视色彩…因为拿红米1S录得，它看见粉色就跟着把画面一起抹红了，其实人眼看起来up觉得比Z3C要更舒服。另外，视频加载速度是因为挂了不同的梯子，并不是手机原因。  大家听音量就好了。\n","source":"_posts/newThings.md","raw":"---\ntitle: new Things\ndate: 2017-08-15 10:26:09\ncategories: [new Things, 手机]\ntags: Sony XZ1 Compact\n---\n\n# 评测\n![sony xz1 compact](https://www.billiger-telefonieren.de/bilder/1/sony-xperia-xz1-compact_gallery_12437.jpg \"tmp\")\n## Sony XZ1 Compact\n### 标题：小三验正妻   Sony XZ1 Compact 评测\n\n国外手机谈体验，国内手机堆配置…\n\n### 3D Creator 支持列表\n<https://forum.xda-developers.com/android/apps-games/app-sony-3d-creator-t3669576/amp/>\n\n### 外观浅谈\n\n大家好，我是谷歌娘。由于up主的舌头废了，所以评测就由我来解说，希望大家能够喜欢~\n\n#### 颜色：\n这次索尼的Xperia XZ1 Compact，有白、黑、红、蓝，四种颜色，各个地方叫法各异月银、鉑銀，夜黑、魅黑都有的叫。不过从官网宣传片来看，霞粉是真的了，但其实说粉…它并不像XZ1的粉的这么明显，而是平时感觉更深，有时觉的好像砖红，有时又觉得其实还挺嫩，但到晚霞铺满之际它有完美嵌入，没错，它会变色……  最惊艳的还是点亮屏幕解锁的那一刻，屏幕于边色融为一体，或许这才是合一设计。\n\n#### 形状：\n与Z3 Compact相比较，边角方正，除了角角硌手之外，边缘要比Z3C圆润，也舒服一些。至于布局，一切就如视频所示了。\n\n#### 续航：\n在up主打开流量没有关闭我家全家桶的情况下，依然用了三十多个小时，不过up也什么国产软件都没装，只装了鹅信，其他常用都在小三里。\n在使用的第三天，一天下来50%，也是一天流量，没禁用谷歌服务，VnPnNn经常挂一会儿会断…考虑晚上不掉电，所以关闭谷歌或者科学用网的话两天一夜还是妥妥的。\n为了验证这个想法，up主第二天就这么拿着仅剩40%电量的手机一早出了门…不过因为没戴现金，所以为了能够活着回来，up仅在扫码支付的时候打开流量，中午，又连无线看了看新闻，聊了聊鹅信。到了下午，掉到了15%启用了省电模式，然后待机，结果三个小时过去直到晚上回来八点愣是只掉了不到3%的电量。所以，两天一夜一冲是真心没有问题的。   不过由于每个人使用方式不一样，也有人可能半天就用完，或者玩游戏几个小时耗光。那这个手机能做的就只是在你使用的时候根据你的习惯准确的预报它还能撑多长时间。\n\n#### 功能：\n首先令up主难过的就是文件管理器没有了自建局域网传输文件到电脑的功能，虽说之前那个File Commander有广告，功能也多。而现在简洁了，却砍掉了up最常用也最喜欢的功能。\nMulti camera，在up主终于买了两个索尼手机的时候，可以使用此功能的时候，居然没了，哈哈哈——\n然后就是下拉列表里电池没法儿点，不像这Z3可以直接点电池去设置电池优化方案。\n最后就是在使用小程序里的扫码时，第一次打开出现画面扭曲的现象，想扫码骑个车吧，在那儿找二维码就得半天，而且对的越准越打不开。解决方法呢，也很简单，就是点击扫码界面里的显示我的二维码，然后再退回来就可以了。这么往返了两次，之后扫码居然正了。不知道是小程序增加了安卓8的支持还是就如索尼官网所说，使用时间越久越懂你，如果是后者那就厉害了。不过才不可能哈哈哈。\n\n#### 拍照：\n拍照方面肯定是不虚XZP的，而关于XZP网上评测很多，所以就不多说了，但今晚，令up注意到了惊艳的东西——就是120°广角啊~  虽说拍照时up极为羞耻，路人也多所以基本是手机划过，瞬间拍照的，在背光的情况下人脸依然被照的这么清楚，还是很难得的。\n\n\n在官网上高挂“超级慢动作摄影”、预测拍摄、追焦对焦连拍。可我找了这么长时间依然没有找懂啊预测拍摄那个拍完分四个照片的功能……莫非还是得用那个应用？ \n\n\n#### 音量对比：\n这次XZ1 Compact如果我说别的都有别人反驳，那么这次音量的提升是真的提升了！简直可以一改当初被室友各种宿舍外放歌曲压制的局面，真的不像日系手机。  下面是Z3C  和 XZ1C播放视频的对比。大家忽视色彩…因为拿红米1S录得，它看见粉色就跟着把画面一起抹红了，其实人眼看起来up觉得比Z3C要更舒服。另外，视频加载速度是因为挂了不同的梯子，并不是手机原因。  大家听音量就好了。\n","slug":"newThings","published":1,"updated":"2021-05-08T02:56:02.684Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9be000au3yq0f9jfe4z","content":"<h1 id=\"评测\"><a href=\"#评测\" class=\"headerlink\" title=\"评测\"></a>评测</h1><p><img src=\"https://www.billiger-telefonieren.de/bilder/1/sony-xperia-xz1-compact_gallery_12437.jpg\" alt=\"sony xz1 compact\" title=\"tmp\"></p>\n<h2 id=\"Sony-XZ1-Compact\"><a href=\"#Sony-XZ1-Compact\" class=\"headerlink\" title=\"Sony XZ1 Compact\"></a>Sony XZ1 Compact</h2><h3 id=\"标题：小三验正妻-Sony-XZ1-Compact-评测\"><a href=\"#标题：小三验正妻-Sony-XZ1-Compact-评测\" class=\"headerlink\" title=\"标题：小三验正妻   Sony XZ1 Compact 评测\"></a>标题：小三验正妻   Sony XZ1 Compact 评测</h3><p>国外手机谈体验，国内手机堆配置…</p>\n<h3 id=\"3D-Creator-支持列表\"><a href=\"#3D-Creator-支持列表\" class=\"headerlink\" title=\"3D Creator 支持列表\"></a>3D Creator 支持列表</h3><p><a href=\"https://forum.xda-developers.com/android/apps-games/app-sony-3d-creator-t3669576/amp/\">https://forum.xda-developers.com/android/apps-games/app-sony-3d-creator-t3669576/amp/</a></p>\n<h3 id=\"外观浅谈\"><a href=\"#外观浅谈\" class=\"headerlink\" title=\"外观浅谈\"></a>外观浅谈</h3><p>大家好，我是谷歌娘。由于up主的舌头废了，所以评测就由我来解说，希望大家能够喜欢~</p>\n<h4 id=\"颜色：\"><a href=\"#颜色：\" class=\"headerlink\" title=\"颜色：\"></a>颜色：</h4><p>这次索尼的Xperia XZ1 Compact，有白、黑、红、蓝，四种颜色，各个地方叫法各异月银、鉑銀，夜黑、魅黑都有的叫。不过从官网宣传片来看，霞粉是真的了，但其实说粉…它并不像XZ1的粉的这么明显，而是平时感觉更深，有时觉的好像砖红，有时又觉得其实还挺嫩，但到晚霞铺满之际它有完美嵌入，没错，它会变色……  最惊艳的还是点亮屏幕解锁的那一刻，屏幕于边色融为一体，或许这才是合一设计。</p>\n<h4 id=\"形状：\"><a href=\"#形状：\" class=\"headerlink\" title=\"形状：\"></a>形状：</h4><p>与Z3 Compact相比较，边角方正，除了角角硌手之外，边缘要比Z3C圆润，也舒服一些。至于布局，一切就如视频所示了。</p>\n<h4 id=\"续航：\"><a href=\"#续航：\" class=\"headerlink\" title=\"续航：\"></a>续航：</h4><p>在up主打开流量没有关闭我家全家桶的情况下，依然用了三十多个小时，不过up也什么国产软件都没装，只装了鹅信，其他常用都在小三里。<br>在使用的第三天，一天下来50%，也是一天流量，没禁用谷歌服务，VnPnNn经常挂一会儿会断…考虑晚上不掉电，所以关闭谷歌或者科学用网的话两天一夜还是妥妥的。<br>为了验证这个想法，up主第二天就这么拿着仅剩40%电量的手机一早出了门…不过因为没戴现金，所以为了能够活着回来，up仅在扫码支付的时候打开流量，中午，又连无线看了看新闻，聊了聊鹅信。到了下午，掉到了15%启用了省电模式，然后待机，结果三个小时过去直到晚上回来八点愣是只掉了不到3%的电量。所以，两天一夜一冲是真心没有问题的。   不过由于每个人使用方式不一样，也有人可能半天就用完，或者玩游戏几个小时耗光。那这个手机能做的就只是在你使用的时候根据你的习惯准确的预报它还能撑多长时间。</p>\n<h4 id=\"功能：\"><a href=\"#功能：\" class=\"headerlink\" title=\"功能：\"></a>功能：</h4><p>首先令up主难过的就是文件管理器没有了自建局域网传输文件到电脑的功能，虽说之前那个File Commander有广告，功能也多。而现在简洁了，却砍掉了up最常用也最喜欢的功能。<br>Multi camera，在up主终于买了两个索尼手机的时候，可以使用此功能的时候，居然没了，哈哈哈——<br>然后就是下拉列表里电池没法儿点，不像这Z3可以直接点电池去设置电池优化方案。<br>最后就是在使用小程序里的扫码时，第一次打开出现画面扭曲的现象，想扫码骑个车吧，在那儿找二维码就得半天，而且对的越准越打不开。解决方法呢，也很简单，就是点击扫码界面里的显示我的二维码，然后再退回来就可以了。这么往返了两次，之后扫码居然正了。不知道是小程序增加了安卓8的支持还是就如索尼官网所说，使用时间越久越懂你，如果是后者那就厉害了。不过才不可能哈哈哈。</p>\n<h4 id=\"拍照：\"><a href=\"#拍照：\" class=\"headerlink\" title=\"拍照：\"></a>拍照：</h4><p>拍照方面肯定是不虚XZP的，而关于XZP网上评测很多，所以就不多说了，但今晚，令up注意到了惊艳的东西——就是120°广角啊~  虽说拍照时up极为羞耻，路人也多所以基本是手机划过，瞬间拍照的，在背光的情况下人脸依然被照的这么清楚，还是很难得的。</p>\n<p>在官网上高挂“超级慢动作摄影”、预测拍摄、追焦对焦连拍。可我找了这么长时间依然没有找懂啊预测拍摄那个拍完分四个照片的功能……莫非还是得用那个应用？ </p>\n<h4 id=\"音量对比：\"><a href=\"#音量对比：\" class=\"headerlink\" title=\"音量对比：\"></a>音量对比：</h4><p>这次XZ1 Compact如果我说别的都有别人反驳，那么这次音量的提升是真的提升了！简直可以一改当初被室友各种宿舍外放歌曲压制的局面，真的不像日系手机。  下面是Z3C  和 XZ1C播放视频的对比。大家忽视色彩…因为拿红米1S录得，它看见粉色就跟着把画面一起抹红了，其实人眼看起来up觉得比Z3C要更舒服。另外，视频加载速度是因为挂了不同的梯子，并不是手机原因。  大家听音量就好了。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"评测\"><a href=\"#评测\" class=\"headerlink\" title=\"评测\"></a>评测</h1><p><img src=\"https://www.billiger-telefonieren.de/bilder/1/sony-xperia-xz1-compact_gallery_12437.jpg\" alt=\"sony xz1 compact\" title=\"tmp\"></p>\n<h2 id=\"Sony-XZ1-Compact\"><a href=\"#Sony-XZ1-Compact\" class=\"headerlink\" title=\"Sony XZ1 Compact\"></a>Sony XZ1 Compact</h2><h3 id=\"标题：小三验正妻-Sony-XZ1-Compact-评测\"><a href=\"#标题：小三验正妻-Sony-XZ1-Compact-评测\" class=\"headerlink\" title=\"标题：小三验正妻   Sony XZ1 Compact 评测\"></a>标题：小三验正妻   Sony XZ1 Compact 评测</h3><p>国外手机谈体验，国内手机堆配置…</p>\n<h3 id=\"3D-Creator-支持列表\"><a href=\"#3D-Creator-支持列表\" class=\"headerlink\" title=\"3D Creator 支持列表\"></a>3D Creator 支持列表</h3><p><a href=\"https://forum.xda-developers.com/android/apps-games/app-sony-3d-creator-t3669576/amp/\">https://forum.xda-developers.com/android/apps-games/app-sony-3d-creator-t3669576/amp/</a></p>\n<h3 id=\"外观浅谈\"><a href=\"#外观浅谈\" class=\"headerlink\" title=\"外观浅谈\"></a>外观浅谈</h3><p>大家好，我是谷歌娘。由于up主的舌头废了，所以评测就由我来解说，希望大家能够喜欢~</p>\n<h4 id=\"颜色：\"><a href=\"#颜色：\" class=\"headerlink\" title=\"颜色：\"></a>颜色：</h4><p>这次索尼的Xperia XZ1 Compact，有白、黑、红、蓝，四种颜色，各个地方叫法各异月银、鉑銀，夜黑、魅黑都有的叫。不过从官网宣传片来看，霞粉是真的了，但其实说粉…它并不像XZ1的粉的这么明显，而是平时感觉更深，有时觉的好像砖红，有时又觉得其实还挺嫩，但到晚霞铺满之际它有完美嵌入，没错，它会变色……  最惊艳的还是点亮屏幕解锁的那一刻，屏幕于边色融为一体，或许这才是合一设计。</p>\n<h4 id=\"形状：\"><a href=\"#形状：\" class=\"headerlink\" title=\"形状：\"></a>形状：</h4><p>与Z3 Compact相比较，边角方正，除了角角硌手之外，边缘要比Z3C圆润，也舒服一些。至于布局，一切就如视频所示了。</p>\n<h4 id=\"续航：\"><a href=\"#续航：\" class=\"headerlink\" title=\"续航：\"></a>续航：</h4><p>在up主打开流量没有关闭我家全家桶的情况下，依然用了三十多个小时，不过up也什么国产软件都没装，只装了鹅信，其他常用都在小三里。<br>在使用的第三天，一天下来50%，也是一天流量，没禁用谷歌服务，VnPnNn经常挂一会儿会断…考虑晚上不掉电，所以关闭谷歌或者科学用网的话两天一夜还是妥妥的。<br>为了验证这个想法，up主第二天就这么拿着仅剩40%电量的手机一早出了门…不过因为没戴现金，所以为了能够活着回来，up仅在扫码支付的时候打开流量，中午，又连无线看了看新闻，聊了聊鹅信。到了下午，掉到了15%启用了省电模式，然后待机，结果三个小时过去直到晚上回来八点愣是只掉了不到3%的电量。所以，两天一夜一冲是真心没有问题的。   不过由于每个人使用方式不一样，也有人可能半天就用完，或者玩游戏几个小时耗光。那这个手机能做的就只是在你使用的时候根据你的习惯准确的预报它还能撑多长时间。</p>\n<h4 id=\"功能：\"><a href=\"#功能：\" class=\"headerlink\" title=\"功能：\"></a>功能：</h4><p>首先令up主难过的就是文件管理器没有了自建局域网传输文件到电脑的功能，虽说之前那个File Commander有广告，功能也多。而现在简洁了，却砍掉了up最常用也最喜欢的功能。<br>Multi camera，在up主终于买了两个索尼手机的时候，可以使用此功能的时候，居然没了，哈哈哈——<br>然后就是下拉列表里电池没法儿点，不像这Z3可以直接点电池去设置电池优化方案。<br>最后就是在使用小程序里的扫码时，第一次打开出现画面扭曲的现象，想扫码骑个车吧，在那儿找二维码就得半天，而且对的越准越打不开。解决方法呢，也很简单，就是点击扫码界面里的显示我的二维码，然后再退回来就可以了。这么往返了两次，之后扫码居然正了。不知道是小程序增加了安卓8的支持还是就如索尼官网所说，使用时间越久越懂你，如果是后者那就厉害了。不过才不可能哈哈哈。</p>\n<h4 id=\"拍照：\"><a href=\"#拍照：\" class=\"headerlink\" title=\"拍照：\"></a>拍照：</h4><p>拍照方面肯定是不虚XZP的，而关于XZP网上评测很多，所以就不多说了，但今晚，令up注意到了惊艳的东西——就是120°广角啊~  虽说拍照时up极为羞耻，路人也多所以基本是手机划过，瞬间拍照的，在背光的情况下人脸依然被照的这么清楚，还是很难得的。</p>\n<p>在官网上高挂“超级慢动作摄影”、预测拍摄、追焦对焦连拍。可我找了这么长时间依然没有找懂啊预测拍摄那个拍完分四个照片的功能……莫非还是得用那个应用？ </p>\n<h4 id=\"音量对比：\"><a href=\"#音量对比：\" class=\"headerlink\" title=\"音量对比：\"></a>音量对比：</h4><p>这次XZ1 Compact如果我说别的都有别人反驳，那么这次音量的提升是真的提升了！简直可以一改当初被室友各种宿舍外放歌曲压制的局面，真的不像日系手机。  下面是Z3C  和 XZ1C播放视频的对比。大家忽视色彩…因为拿红米1S录得，它看见粉色就跟着把画面一起抹红了，其实人眼看起来up觉得比Z3C要更舒服。另外，视频加载速度是因为挂了不同的梯子，并不是手机原因。  大家听音量就好了。</p>\n"},{"title":"杂笔记(Note)","date":"2016-10-28T16:00:00.000Z","modified":"2021-04-21 14:19","slug":"notes/note","_content":"#### Swift：\n\n###### [Swift教程]\n\t>https://github.com/ipader/SwiftGuide;\n\n###### Swift 开源项目精选:\n\t>https://github.com/ipader/SwiftGuide/blob/master/Featured.md\n\n###### SwiftGuide:\n\t>https://github.com/ipader/SwiftGuide/blob/master/Featured-Articles.md\nSwift，以上。\n\n#### Pelican：\n\n##### 高亮显示Markdown:\n\tvoid main()\n\n\t{\n\t\tprintf(\"高亮？\");      // 另起一行 首行缩进，书写即可\n\n\t}\n\n#### 标题：\n在编辑文字的时候，在前面加上“#”号，可以将之后一行文字作为标题大字体显示，编辑中瞎按，手误敲出来的字符，结果却很有用呢。或许其他字符也有作用，不过这已经满足日常编辑所需，不做过多探究了。充实内容，往往是首要的。\n\n##### 利用Disqus添加评论系统：\n在此网站注册一个帐号，在设置中找见shortname，应该为自己设置。   然后在Pelicanconf.py这个配置文件中添加\n\n:::iidentifier\n\nDISQUS_SITENAME = “yours shortname”\n\n#### 贴图片：\n在国内找了一个Z4A图床，感觉不错。 注册完毕，上传好图片应用链接自动生成，直接诶复制粘贴即可。HTML、BBCode、Markdown的，另外分为完整图片，中等图片，缩略图三种不同尺寸的链接。感觉良心。另外，点击图片后跳转图床，可以查看原图片文件，更是舒心赏心悦目～  免费使用，极力推荐。只不过图片不能加入缩进后的“代码栏”。\n\n[![text.md.png](http://z4a.net/images/2016/07/19/text.md.png)](http://z4a.net/image/7o4n9)\n\n数学公式： $ $e^{i\\pi} + 1 = 0$ $ $之间无空格\n\n$$e^{i\\pi} + 1 = 0$$\n\n失败……插入插件失败。之后有需要时再查找原因。\n(不过这个图床已经废了。……默哀)\n#### Linux 嵌入式C編程\n\nGit 协助开发提交代码之类\n参考流程（复制于 >https://github.com/numbbbbb/the-swift-programming-language-in-chinese）\n有些朋友可能不太清楚如何帮忙翻译，我这里写一个简单的流程，大家可以参考一下：\n首先```fork```我的项目\n把```fork```过去的项目也就是你的项目```clone```到你的本地\n在命令行运行```git branch develop```来创建一个新分支\n运行```git checkout develop```来切换到新分支\n运行```git remote add upstream https://github.com/numbbbbb/the-swift-programming-language-in-chinese.git 把我的库添加为远端库\n运行```git remote update```更新\n运行```git fetch upstream gh-pages```拉取我的库的更新到本地\n运行```git rebase upstream/gh-pages```将我的更新合并到你的分支\n这是一个初始化流程，只需要做一遍就行，之后请一直在develop分支进行修改。\n如果修改过程中我的库有了更新，请重复6、7、8步。\n修改之后，首先```push```到你的库，然后登录GitHub，在你的库的首页可以看到一个```pull request```按钮，点击它，填写一些说明信息，然后提交即可。\n##### 关于```Pelican```这个文章写的完完全全了：\n\t>http://www.wengweitao.com/shi-yong-pelican-github-pagesda-jian-ge-ren-bo-ke.html\n#### Vim\n##### Vim中添加多行注释or删除：\n使用```Ctrl+v```进入VISUAL BLOCK状态 然后上下移动光标选择行数，输入```I```，改为INSERT(paste)状态，键入内容按下Esc结束，即可。  删除则为选中之后直接按删除功能键如：d、c皆可，即可删除所选一列\n\n## Blog\n\n### Pelican \nPelican Static Site Generator, Powered by Python：Pelican是python语言写的静态网站生成器。因为之前一直弄不好Jekyll 犯不着掉在这一颗树上，所以搜到了此同类软件。\n\n网上的那些教程不知道为什么鲜有一次效仿成功的，都是各种问题。真心他们没有遇见过吗？因此我也不自己贴这个教程了，除非那一天弄懂了那些问题所在，否则不过张贴一些网上现有的示例而已，而且还是不能保证完全正确的示例，没有任何价值。\n\n```\nDate: 2016-06-18 Title:The 2st Blog Tags: 2st,pelicanのはじて初体験 Slug: test2\n```\n就像这样\n\n接下来将本地的更到Gite: 2016-06-18tHub，至此就算告一段落。未能解决的问题还有很多，换言之其实就是问题们还没着手去解决。\n\n例如，回车符怎么敲现在都不知道，一篇文章只能这么一条龙一直打下去。真是囧…。另外没法添加链接，旁边那个邮件的地址都还是别人的——这个主题的开发者。如果搞清这两处，估计就能不再去研究别的功能了，毕竟只是一个博客，能更看的过去就好。哈。\n\n另外，将用到的命令在此备份 make html———— make serve————\n\noutput文件夹内： git init———— git add .———— git commit -m 'first commit' ———— git remote add origin git@github.com:IanVzs/IanVzs.github.io.git———— git push -u origin master\n\n此外刚刚发现编辑时首行空格开始则将此段红色高亮显示 就像这样 就像这样并不会… 只不过在刚开始。 不过应该是汉字缩进，并且上一行没有内容，会有高亮显示。貌似是为了方便写程序？或许程序可以用这样的方式来插入，而不需要用那个专用的高亮语句:::*er什么的。\n\n然而事实并不像以上那么顺利……上传依然错误频出 所以接下来是成功代码依次再排列 git init\n```shell\ngit add -A\ngit remote remove origin\ngit remote add origin https://github.com/IanVzs/IanVzs.github.io.git\ngit add -A\ngit push --set-upstream origin master -f\ngit init\ngit add -A\ngit remote remove origin\ngit remote add origin https://github.com/IanVzs/IanVzs.github.io.git\ngit add -A\ngit push --set-upstream origin master -f\n```\n并且之前写在此处的更新文章也一直没法更新出来，所以将第二篇拆分了，分两个文件来上传，否则只看那个成功update 实在有不信任感觉，现在如果这篇文章还是无法更新，那真的是…… 如果能的话，看来一篇文章还有字数限制？ 应该没 按理，更新后的文件也不是一个文件了，我也换了文件名都不能更新其内容是在令人不解。\n\n现在呢，就感觉顺手多了，只需要 git init git add . git git commit -m “hia” git push --set-upstream -f 即可。\n\n现在，创建完新的 之后，官网有了详细的说明：\t\n```shell\necho \"# ianvzs.github.io\" >> README.md\ngit init\ngit add README.md\ngit commit -m \"first commit\"\ngit remote add origin https://github.com/IanVzs/ianvzs.github.io.git\ngit push -u origin master\n```\n简单明了。\n\n\n### hexo\n而之后因为其主题我选的不好，然后又觊觎`nodejs`，所以将`blog`使用`hexo`来写了。以下是使用教程了——\ntitle: Hello World\n\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n### Quick Start\n\n#### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n#### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n#### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n#### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n#### 修改配置\nblog根目录下`_config.yml`, 以及themes下`_config.yml`\n##### 连接github:\n```yml\ndeploy:\n    type: git\n    repo: https://github.com/*******/**.git\n    branch: master\n```\n```bash\nnpm install hexo-deploy-git --save\n```\n\n### themes\n- hueman主题的图片配置地址为: `/themes/hueman/source/css/images`\n- 可在`themes/hueman/_config.yml`中进行修改各项图片配置\n\n## Git\n### git 版本切换\n将项目克隆之后，可通过\n```shell\n$ git tag   // 查看tag\n> v1\n> v2\n> v3\n$ git show v1       //根据tag 查看版本号\n> tag v1\n> Tagger: user\n> Data: Fri May 23 17:47:00 2018 +0800\n>  '为了部落'\n> commit 5b123b31h4bvb31\n> Aurhor user\n> 等\n$ git reset --hard 5b123b31h4bvb31  // 根据版本号回退版本\n```\n## 部署到服务器\n在部署到服务器的时候，发现有`‘node’: No such file or directory`的错误，解决办法是创建软连接：\n```shell\nln -s /usr/bin/nodejs /usr/bin/node\n```\n[^_^]:\n    2018年6月11日16点42分\n\n另外，直接拷过去的`blog`项目没法用`hexo`直接运行…\n解决办法是：\n```shell \n// 并没有解决啊！！！！\n```\n[^_^]:\n    2018年6月12日13点55分\n\n(⊙﹏⊙)，╮(╯-╰)╭其实是`npm`在服务器`apt`安装的版本太低了… 在官网下了最新版，然后再次通过新版`npm`安装`hexo`就可以直接用了。\n\n## 2021-04-21\nemmmmm如今重新再次翻看，觉得o(∩∩)o...哈哈。\n这次找了个不错的模板，比之前用的没有分页强多了，而且还有了搜索功能。简直完美符合平时查阅的需求。","source":"_posts/notes/note.md","raw":"---\ntitle: 杂笔记(Note)\ndate: 2016-10-29 \nmodified: 2021-04-21 14:19\ncategory: [note, Something]\ntags: 经验笔记\nslug: \n---\n#### Swift：\n\n###### [Swift教程]\n\t>https://github.com/ipader/SwiftGuide;\n\n###### Swift 开源项目精选:\n\t>https://github.com/ipader/SwiftGuide/blob/master/Featured.md\n\n###### SwiftGuide:\n\t>https://github.com/ipader/SwiftGuide/blob/master/Featured-Articles.md\nSwift，以上。\n\n#### Pelican：\n\n##### 高亮显示Markdown:\n\tvoid main()\n\n\t{\n\t\tprintf(\"高亮？\");      // 另起一行 首行缩进，书写即可\n\n\t}\n\n#### 标题：\n在编辑文字的时候，在前面加上“#”号，可以将之后一行文字作为标题大字体显示，编辑中瞎按，手误敲出来的字符，结果却很有用呢。或许其他字符也有作用，不过这已经满足日常编辑所需，不做过多探究了。充实内容，往往是首要的。\n\n##### 利用Disqus添加评论系统：\n在此网站注册一个帐号，在设置中找见shortname，应该为自己设置。   然后在Pelicanconf.py这个配置文件中添加\n\n:::iidentifier\n\nDISQUS_SITENAME = “yours shortname”\n\n#### 贴图片：\n在国内找了一个Z4A图床，感觉不错。 注册完毕，上传好图片应用链接自动生成，直接诶复制粘贴即可。HTML、BBCode、Markdown的，另外分为完整图片，中等图片，缩略图三种不同尺寸的链接。感觉良心。另外，点击图片后跳转图床，可以查看原图片文件，更是舒心赏心悦目～  免费使用，极力推荐。只不过图片不能加入缩进后的“代码栏”。\n\n[![text.md.png](http://z4a.net/images/2016/07/19/text.md.png)](http://z4a.net/image/7o4n9)\n\n数学公式： $ $e^{i\\pi} + 1 = 0$ $ $之间无空格\n\n$$e^{i\\pi} + 1 = 0$$\n\n失败……插入插件失败。之后有需要时再查找原因。\n(不过这个图床已经废了。……默哀)\n#### Linux 嵌入式C編程\n\nGit 协助开发提交代码之类\n参考流程（复制于 >https://github.com/numbbbbb/the-swift-programming-language-in-chinese）\n有些朋友可能不太清楚如何帮忙翻译，我这里写一个简单的流程，大家可以参考一下：\n首先```fork```我的项目\n把```fork```过去的项目也就是你的项目```clone```到你的本地\n在命令行运行```git branch develop```来创建一个新分支\n运行```git checkout develop```来切换到新分支\n运行```git remote add upstream https://github.com/numbbbbb/the-swift-programming-language-in-chinese.git 把我的库添加为远端库\n运行```git remote update```更新\n运行```git fetch upstream gh-pages```拉取我的库的更新到本地\n运行```git rebase upstream/gh-pages```将我的更新合并到你的分支\n这是一个初始化流程，只需要做一遍就行，之后请一直在develop分支进行修改。\n如果修改过程中我的库有了更新，请重复6、7、8步。\n修改之后，首先```push```到你的库，然后登录GitHub，在你的库的首页可以看到一个```pull request```按钮，点击它，填写一些说明信息，然后提交即可。\n##### 关于```Pelican```这个文章写的完完全全了：\n\t>http://www.wengweitao.com/shi-yong-pelican-github-pagesda-jian-ge-ren-bo-ke.html\n#### Vim\n##### Vim中添加多行注释or删除：\n使用```Ctrl+v```进入VISUAL BLOCK状态 然后上下移动光标选择行数，输入```I```，改为INSERT(paste)状态，键入内容按下Esc结束，即可。  删除则为选中之后直接按删除功能键如：d、c皆可，即可删除所选一列\n\n## Blog\n\n### Pelican \nPelican Static Site Generator, Powered by Python：Pelican是python语言写的静态网站生成器。因为之前一直弄不好Jekyll 犯不着掉在这一颗树上，所以搜到了此同类软件。\n\n网上的那些教程不知道为什么鲜有一次效仿成功的，都是各种问题。真心他们没有遇见过吗？因此我也不自己贴这个教程了，除非那一天弄懂了那些问题所在，否则不过张贴一些网上现有的示例而已，而且还是不能保证完全正确的示例，没有任何价值。\n\n```\nDate: 2016-06-18 Title:The 2st Blog Tags: 2st,pelicanのはじて初体験 Slug: test2\n```\n就像这样\n\n接下来将本地的更到Gite: 2016-06-18tHub，至此就算告一段落。未能解决的问题还有很多，换言之其实就是问题们还没着手去解决。\n\n例如，回车符怎么敲现在都不知道，一篇文章只能这么一条龙一直打下去。真是囧…。另外没法添加链接，旁边那个邮件的地址都还是别人的——这个主题的开发者。如果搞清这两处，估计就能不再去研究别的功能了，毕竟只是一个博客，能更看的过去就好。哈。\n\n另外，将用到的命令在此备份 make html———— make serve————\n\noutput文件夹内： git init———— git add .———— git commit -m 'first commit' ———— git remote add origin git@github.com:IanVzs/IanVzs.github.io.git———— git push -u origin master\n\n此外刚刚发现编辑时首行空格开始则将此段红色高亮显示 就像这样 就像这样并不会… 只不过在刚开始。 不过应该是汉字缩进，并且上一行没有内容，会有高亮显示。貌似是为了方便写程序？或许程序可以用这样的方式来插入，而不需要用那个专用的高亮语句:::*er什么的。\n\n然而事实并不像以上那么顺利……上传依然错误频出 所以接下来是成功代码依次再排列 git init\n```shell\ngit add -A\ngit remote remove origin\ngit remote add origin https://github.com/IanVzs/IanVzs.github.io.git\ngit add -A\ngit push --set-upstream origin master -f\ngit init\ngit add -A\ngit remote remove origin\ngit remote add origin https://github.com/IanVzs/IanVzs.github.io.git\ngit add -A\ngit push --set-upstream origin master -f\n```\n并且之前写在此处的更新文章也一直没法更新出来，所以将第二篇拆分了，分两个文件来上传，否则只看那个成功update 实在有不信任感觉，现在如果这篇文章还是无法更新，那真的是…… 如果能的话，看来一篇文章还有字数限制？ 应该没 按理，更新后的文件也不是一个文件了，我也换了文件名都不能更新其内容是在令人不解。\n\n现在呢，就感觉顺手多了，只需要 git init git add . git git commit -m “hia” git push --set-upstream -f 即可。\n\n现在，创建完新的 之后，官网有了详细的说明：\t\n```shell\necho \"# ianvzs.github.io\" >> README.md\ngit init\ngit add README.md\ngit commit -m \"first commit\"\ngit remote add origin https://github.com/IanVzs/ianvzs.github.io.git\ngit push -u origin master\n```\n简单明了。\n\n\n### hexo\n而之后因为其主题我选的不好，然后又觊觎`nodejs`，所以将`blog`使用`hexo`来写了。以下是使用教程了——\ntitle: Hello World\n\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n### Quick Start\n\n#### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n#### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n#### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n#### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n#### 修改配置\nblog根目录下`_config.yml`, 以及themes下`_config.yml`\n##### 连接github:\n```yml\ndeploy:\n    type: git\n    repo: https://github.com/*******/**.git\n    branch: master\n```\n```bash\nnpm install hexo-deploy-git --save\n```\n\n### themes\n- hueman主题的图片配置地址为: `/themes/hueman/source/css/images`\n- 可在`themes/hueman/_config.yml`中进行修改各项图片配置\n\n## Git\n### git 版本切换\n将项目克隆之后，可通过\n```shell\n$ git tag   // 查看tag\n> v1\n> v2\n> v3\n$ git show v1       //根据tag 查看版本号\n> tag v1\n> Tagger: user\n> Data: Fri May 23 17:47:00 2018 +0800\n>  '为了部落'\n> commit 5b123b31h4bvb31\n> Aurhor user\n> 等\n$ git reset --hard 5b123b31h4bvb31  // 根据版本号回退版本\n```\n## 部署到服务器\n在部署到服务器的时候，发现有`‘node’: No such file or directory`的错误，解决办法是创建软连接：\n```shell\nln -s /usr/bin/nodejs /usr/bin/node\n```\n[^_^]:\n    2018年6月11日16点42分\n\n另外，直接拷过去的`blog`项目没法用`hexo`直接运行…\n解决办法是：\n```shell \n// 并没有解决啊！！！！\n```\n[^_^]:\n    2018年6月12日13点55分\n\n(⊙﹏⊙)，╮(╯-╰)╭其实是`npm`在服务器`apt`安装的版本太低了… 在官网下了最新版，然后再次通过新版`npm`安装`hexo`就可以直接用了。\n\n## 2021-04-21\nemmmmm如今重新再次翻看，觉得o(∩∩)o...哈哈。\n这次找了个不错的模板，比之前用的没有分页强多了，而且还有了搜索功能。简直完美符合平时查阅的需求。","published":1,"updated":"2021-05-08T02:56:02.684Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9bj000cu3yqg6c0e8vr","content":"<h4 id=\"Swift：\"><a href=\"#Swift：\" class=\"headerlink\" title=\"Swift：\"></a>Swift：</h4><h6 id=\"Swift教程\"><a href=\"#Swift教程\" class=\"headerlink\" title=\"[Swift教程]\"></a>[Swift教程]</h6><pre><code>&gt;https://github.com/ipader/SwiftGuide;\n</code></pre>\n<h6 id=\"Swift-开源项目精选\"><a href=\"#Swift-开源项目精选\" class=\"headerlink\" title=\"Swift 开源项目精选:\"></a>Swift 开源项目精选:</h6><pre><code>&gt;https://github.com/ipader/SwiftGuide/blob/master/Featured.md\n</code></pre>\n<h6 id=\"SwiftGuide\"><a href=\"#SwiftGuide\" class=\"headerlink\" title=\"SwiftGuide:\"></a>SwiftGuide:</h6><pre><code>&gt;https://github.com/ipader/SwiftGuide/blob/master/Featured-Articles.md\n</code></pre>\n<p>Swift，以上。</p>\n<h4 id=\"Pelican：\"><a href=\"#Pelican：\" class=\"headerlink\" title=\"Pelican：\"></a>Pelican：</h4><h5 id=\"高亮显示Markdown\"><a href=\"#高亮显示Markdown\" class=\"headerlink\" title=\"高亮显示Markdown:\"></a>高亮显示Markdown:</h5><pre><code>void main()\n\n&#123;\n    printf(&quot;高亮？&quot;);      // 另起一行 首行缩进，书写即可\n\n&#125;\n</code></pre>\n<h4 id=\"标题：\"><a href=\"#标题：\" class=\"headerlink\" title=\"标题：\"></a>标题：</h4><p>在编辑文字的时候，在前面加上“#”号，可以将之后一行文字作为标题大字体显示，编辑中瞎按，手误敲出来的字符，结果却很有用呢。或许其他字符也有作用，不过这已经满足日常编辑所需，不做过多探究了。充实内容，往往是首要的。</p>\n<h5 id=\"利用Disqus添加评论系统：\"><a href=\"#利用Disqus添加评论系统：\" class=\"headerlink\" title=\"利用Disqus添加评论系统：\"></a>利用Disqus添加评论系统：</h5><p>在此网站注册一个帐号，在设置中找见shortname，应该为自己设置。   然后在Pelicanconf.py这个配置文件中添加</p>\n<p>:::iidentifier</p>\n<p>DISQUS_SITENAME = “yours shortname”</p>\n<h4 id=\"贴图片：\"><a href=\"#贴图片：\" class=\"headerlink\" title=\"贴图片：\"></a>贴图片：</h4><p>在国内找了一个Z4A图床，感觉不错。 注册完毕，上传好图片应用链接自动生成，直接诶复制粘贴即可。HTML、BBCode、Markdown的，另外分为完整图片，中等图片，缩略图三种不同尺寸的链接。感觉良心。另外，点击图片后跳转图床，可以查看原图片文件，更是舒心赏心悦目～  免费使用，极力推荐。只不过图片不能加入缩进后的“代码栏”。</p>\n<p><a href=\"http://z4a.net/image/7o4n9\"><img src=\"http://z4a.net/images/2016/07/19/text.md.png\" alt=\"text.md.png\"></a></p>\n<p>数学公式： $ $e^{i\\pi} + 1 = 0$ $ $之间无空格</p>\n<p>$$e^{i\\pi} + 1 = 0$$</p>\n<p>失败……插入插件失败。之后有需要时再查找原因。<br>(不过这个图床已经废了。……默哀)</p>\n<h4 id=\"Linux-嵌入式C編程\"><a href=\"#Linux-嵌入式C編程\" class=\"headerlink\" title=\"Linux 嵌入式C編程\"></a>Linux 嵌入式C編程</h4><p>Git 协助开发提交代码之类<br>参考流程（复制于 &gt;<a href=\"https://github.com/numbbbbb/the-swift-programming-language-in-chinese%EF%BC%89\">https://github.com/numbbbbb/the-swift-programming-language-in-chinese）</a><br>有些朋友可能不太清楚如何帮忙翻译，我这里写一个简单的流程，大家可以参考一下：<br>首先<code>fork</code>我的项目<br>把<code>fork</code>过去的项目也就是你的项目<code>clone</code>到你的本地<br>在命令行运行<code>git branch develop</code>来创建一个新分支<br>运行<code>git checkout develop</code>来切换到新分支<br>运行<code>git remote add upstream https://github.com/numbbbbb/the-swift-programming-language-in-chinese.git 把我的库添加为远端库 运行</code>git remote update<code>更新 运行</code>git fetch upstream gh-pages<code>拉取我的库的更新到本地 运行</code>git rebase upstream/gh-pages<code>将我的更新合并到你的分支 这是一个初始化流程，只需要做一遍就行，之后请一直在develop分支进行修改。 如果修改过程中我的库有了更新，请重复6、7、8步。 修改之后，首先</code>push<code>到你的库，然后登录GitHub，在你的库的首页可以看到一个</code>pull request```按钮，点击它，填写一些说明信息，然后提交即可。</p>\n<h5 id=\"关于Pelican这个文章写的完完全全了：\"><a href=\"#关于Pelican这个文章写的完完全全了：\" class=\"headerlink\" title=\"关于Pelican这个文章写的完完全全了：\"></a>关于<code>Pelican</code>这个文章写的完完全全了：</h5><pre><code>&gt;http://www.wengweitao.com/shi-yong-pelican-github-pagesda-jian-ge-ren-bo-ke.html\n</code></pre>\n<h4 id=\"Vim\"><a href=\"#Vim\" class=\"headerlink\" title=\"Vim\"></a>Vim</h4><h5 id=\"Vim中添加多行注释or删除：\"><a href=\"#Vim中添加多行注释or删除：\" class=\"headerlink\" title=\"Vim中添加多行注释or删除：\"></a>Vim中添加多行注释or删除：</h5><p>使用<code>Ctrl+v</code>进入VISUAL BLOCK状态 然后上下移动光标选择行数，输入<code>I</code>，改为INSERT(paste)状态，键入内容按下Esc结束，即可。  删除则为选中之后直接按删除功能键如：d、c皆可，即可删除所选一列</p>\n<h2 id=\"Blog\"><a href=\"#Blog\" class=\"headerlink\" title=\"Blog\"></a>Blog</h2><h3 id=\"Pelican\"><a href=\"#Pelican\" class=\"headerlink\" title=\"Pelican\"></a>Pelican</h3><p>Pelican Static Site Generator, Powered by Python：Pelican是python语言写的静态网站生成器。因为之前一直弄不好Jekyll 犯不着掉在这一颗树上，所以搜到了此同类软件。</p>\n<p>网上的那些教程不知道为什么鲜有一次效仿成功的，都是各种问题。真心他们没有遇见过吗？因此我也不自己贴这个教程了，除非那一天弄懂了那些问题所在，否则不过张贴一些网上现有的示例而已，而且还是不能保证完全正确的示例，没有任何价值。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Date: 2016-06-18 Title:The 2st Blog Tags: 2st,pelicanのはじて初体験 Slug: test2</span><br></pre></td></tr></table></figure>\n<p>就像这样</p>\n<p>接下来将本地的更到Gite: 2016-06-18tHub，至此就算告一段落。未能解决的问题还有很多，换言之其实就是问题们还没着手去解决。</p>\n<p>例如，回车符怎么敲现在都不知道，一篇文章只能这么一条龙一直打下去。真是囧…。另外没法添加链接，旁边那个邮件的地址都还是别人的——这个主题的开发者。如果搞清这两处，估计就能不再去研究别的功能了，毕竟只是一个博客，能更看的过去就好。哈。</p>\n<p>另外，将用到的命令在此备份 make html———— make serve————</p>\n<p>output文件夹内： git init———— git add .———— git commit -m ‘first commit’ ———— git remote add origin <a href=\"mailto:&#x67;&#x69;&#116;&#x40;&#103;&#x69;&#116;&#104;&#117;&#98;&#x2e;&#99;&#x6f;&#x6d;\">&#x67;&#x69;&#116;&#x40;&#103;&#x69;&#116;&#104;&#117;&#98;&#x2e;&#99;&#x6f;&#x6d;</a>:IanVzs/IanVzs.github.io.git———— git push -u origin master</p>\n<p>此外刚刚发现编辑时首行空格开始则将此段红色高亮显示 就像这样 就像这样并不会… 只不过在刚开始。 不过应该是汉字缩进，并且上一行没有内容，会有高亮显示。貌似是为了方便写程序？或许程序可以用这样的方式来插入，而不需要用那个专用的高亮语句:::*er什么的。</p>\n<p>然而事实并不像以上那么顺利……上传依然错误频出 所以接下来是成功代码依次再排列 git init</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add -A</span><br><span class=\"line\">git remote remove origin</span><br><span class=\"line\">git remote add origin https://github.com/IanVzs/IanVzs.github.io.git</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git push --set-upstream origin master -f</span><br><span class=\"line\">git init</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git remote remove origin</span><br><span class=\"line\">git remote add origin https://github.com/IanVzs/IanVzs.github.io.git</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git push --set-upstream origin master -f</span><br></pre></td></tr></table></figure>\n<p>并且之前写在此处的更新文章也一直没法更新出来，所以将第二篇拆分了，分两个文件来上传，否则只看那个成功update 实在有不信任感觉，现在如果这篇文章还是无法更新，那真的是…… 如果能的话，看来一篇文章还有字数限制？ 应该没 按理，更新后的文件也不是一个文件了，我也换了文件名都不能更新其内容是在令人不解。</p>\n<p>现在呢，就感觉顺手多了，只需要 git init git add . git git commit -m “hia” git push –set-upstream -f 即可。</p>\n<p>现在，创建完新的 之后，官网有了详细的说明：    </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;# ianvzs.github.io&quot; &gt;&gt; README.md</span><br><span class=\"line\">git init</span><br><span class=\"line\">git add README.md</span><br><span class=\"line\">git commit -m &quot;first commit&quot;</span><br><span class=\"line\">git remote add origin https://github.com/IanVzs/ianvzs.github.io.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n<p>简单明了。</p>\n<h3 id=\"hexo\"><a href=\"#hexo\" class=\"headerlink\" title=\"hexo\"></a>hexo</h3><p>而之后因为其主题我选的不好，然后又觊觎<code>nodejs</code>，所以将<code>blog</code>使用<code>hexo</code>来写了。以下是使用教程了——<br>title: Hello World</p>\n<hr>\n<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h3 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h3><h4 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h4 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h4 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h4 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n<h4 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h4><p>blog根目录下<code>_config.yml</code>, 以及themes下<code>_config.yml</code></p>\n<h5 id=\"连接github\"><a href=\"#连接github\" class=\"headerlink\" title=\"连接github:\"></a>连接github:</h5><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">    <span class=\"attr\">repo:</span> <span class=\"string\">https://github.com/*******/**.git</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-deploy-git --save</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"themes\"><a href=\"#themes\" class=\"headerlink\" title=\"themes\"></a>themes</h3><ul>\n<li>hueman主题的图片配置地址为: <code>/themes/hueman/source/css/images</code></li>\n<li>可在<code>themes/hueman/_config.yml</code>中进行修改各项图片配置</li>\n</ul>\n<h2 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h2><h3 id=\"git-版本切换\"><a href=\"#git-版本切换\" class=\"headerlink\" title=\"git 版本切换\"></a>git 版本切换</h3><p>将项目克隆之后，可通过</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git tag   // 查看tag</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> v1</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> v2</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> v3</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git show v1       //根据tag 查看版本号</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> tag v1</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> Tagger: user</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> Data: Fri May 23 17:47:00 2018 +0800</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">  <span class=\"string\">&#x27;为了部落&#x27;</span></span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> commit 5b123b31h4bvb31</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> Aurhor user</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> 等</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --hard 5b123b31h4bvb31  // 根据版本号回退版本</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"部署到服务器\"><a href=\"#部署到服务器\" class=\"headerlink\" title=\"部署到服务器\"></a>部署到服务器</h2><p>在部署到服务器的时候，发现有<code>‘node’: No such file or directory</code>的错误，解决办法是创建软连接：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /usr/bin/nodejs /usr/bin/node</span><br></pre></td></tr></table></figure>\n<p>另外，直接拷过去的<code>blog</code>项目没法用<code>hexo</code>直接运行…<br>解决办法是：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 并没有解决啊！！！！</span><br></pre></td></tr></table></figure>\n<p>(⊙﹏⊙)，╮(╯-╰)╭其实是<code>npm</code>在服务器<code>apt</code>安装的版本太低了… 在官网下了最新版，然后再次通过新版<code>npm</code>安装<code>hexo</code>就可以直接用了。</p>\n<h2 id=\"2021-04-21\"><a href=\"#2021-04-21\" class=\"headerlink\" title=\"2021-04-21\"></a>2021-04-21</h2><p>emmmmm如今重新再次翻看，觉得o(∩∩)o…哈哈。<br>这次找了个不错的模板，比之前用的没有分页强多了，而且还有了搜索功能。简直完美符合平时查阅的需求。</p>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"Swift：\"><a href=\"#Swift：\" class=\"headerlink\" title=\"Swift：\"></a>Swift：</h4><h6 id=\"Swift教程\"><a href=\"#Swift教程\" class=\"headerlink\" title=\"[Swift教程]\"></a>[Swift教程]</h6><pre><code>&gt;https://github.com/ipader/SwiftGuide;\n</code></pre>\n<h6 id=\"Swift-开源项目精选\"><a href=\"#Swift-开源项目精选\" class=\"headerlink\" title=\"Swift 开源项目精选:\"></a>Swift 开源项目精选:</h6><pre><code>&gt;https://github.com/ipader/SwiftGuide/blob/master/Featured.md\n</code></pre>\n<h6 id=\"SwiftGuide\"><a href=\"#SwiftGuide\" class=\"headerlink\" title=\"SwiftGuide:\"></a>SwiftGuide:</h6><pre><code>&gt;https://github.com/ipader/SwiftGuide/blob/master/Featured-Articles.md\n</code></pre>\n<p>Swift，以上。</p>\n<h4 id=\"Pelican：\"><a href=\"#Pelican：\" class=\"headerlink\" title=\"Pelican：\"></a>Pelican：</h4><h5 id=\"高亮显示Markdown\"><a href=\"#高亮显示Markdown\" class=\"headerlink\" title=\"高亮显示Markdown:\"></a>高亮显示Markdown:</h5><pre><code>void main()\n\n&#123;\n    printf(&quot;高亮？&quot;);      // 另起一行 首行缩进，书写即可\n\n&#125;\n</code></pre>\n<h4 id=\"标题：\"><a href=\"#标题：\" class=\"headerlink\" title=\"标题：\"></a>标题：</h4><p>在编辑文字的时候，在前面加上“#”号，可以将之后一行文字作为标题大字体显示，编辑中瞎按，手误敲出来的字符，结果却很有用呢。或许其他字符也有作用，不过这已经满足日常编辑所需，不做过多探究了。充实内容，往往是首要的。</p>\n<h5 id=\"利用Disqus添加评论系统：\"><a href=\"#利用Disqus添加评论系统：\" class=\"headerlink\" title=\"利用Disqus添加评论系统：\"></a>利用Disqus添加评论系统：</h5><p>在此网站注册一个帐号，在设置中找见shortname，应该为自己设置。   然后在Pelicanconf.py这个配置文件中添加</p>\n<p>:::iidentifier</p>\n<p>DISQUS_SITENAME = “yours shortname”</p>\n<h4 id=\"贴图片：\"><a href=\"#贴图片：\" class=\"headerlink\" title=\"贴图片：\"></a>贴图片：</h4><p>在国内找了一个Z4A图床，感觉不错。 注册完毕，上传好图片应用链接自动生成，直接诶复制粘贴即可。HTML、BBCode、Markdown的，另外分为完整图片，中等图片，缩略图三种不同尺寸的链接。感觉良心。另外，点击图片后跳转图床，可以查看原图片文件，更是舒心赏心悦目～  免费使用，极力推荐。只不过图片不能加入缩进后的“代码栏”。</p>\n<p><a href=\"http://z4a.net/image/7o4n9\"><img src=\"http://z4a.net/images/2016/07/19/text.md.png\" alt=\"text.md.png\"></a></p>\n<p>数学公式： $ $e^{i\\pi} + 1 = 0$ $ $之间无空格</p>\n<p>$$e^{i\\pi} + 1 = 0$$</p>\n<p>失败……插入插件失败。之后有需要时再查找原因。<br>(不过这个图床已经废了。……默哀)</p>\n<h4 id=\"Linux-嵌入式C編程\"><a href=\"#Linux-嵌入式C編程\" class=\"headerlink\" title=\"Linux 嵌入式C編程\"></a>Linux 嵌入式C編程</h4><p>Git 协助开发提交代码之类<br>参考流程（复制于 &gt;<a href=\"https://github.com/numbbbbb/the-swift-programming-language-in-chinese%EF%BC%89\">https://github.com/numbbbbb/the-swift-programming-language-in-chinese）</a><br>有些朋友可能不太清楚如何帮忙翻译，我这里写一个简单的流程，大家可以参考一下：<br>首先<code>fork</code>我的项目<br>把<code>fork</code>过去的项目也就是你的项目<code>clone</code>到你的本地<br>在命令行运行<code>git branch develop</code>来创建一个新分支<br>运行<code>git checkout develop</code>来切换到新分支<br>运行<code>git remote add upstream https://github.com/numbbbbb/the-swift-programming-language-in-chinese.git 把我的库添加为远端库 运行</code>git remote update<code>更新 运行</code>git fetch upstream gh-pages<code>拉取我的库的更新到本地 运行</code>git rebase upstream/gh-pages<code>将我的更新合并到你的分支 这是一个初始化流程，只需要做一遍就行，之后请一直在develop分支进行修改。 如果修改过程中我的库有了更新，请重复6、7、8步。 修改之后，首先</code>push<code>到你的库，然后登录GitHub，在你的库的首页可以看到一个</code>pull request```按钮，点击它，填写一些说明信息，然后提交即可。</p>\n<h5 id=\"关于Pelican这个文章写的完完全全了：\"><a href=\"#关于Pelican这个文章写的完完全全了：\" class=\"headerlink\" title=\"关于Pelican这个文章写的完完全全了：\"></a>关于<code>Pelican</code>这个文章写的完完全全了：</h5><pre><code>&gt;http://www.wengweitao.com/shi-yong-pelican-github-pagesda-jian-ge-ren-bo-ke.html\n</code></pre>\n<h4 id=\"Vim\"><a href=\"#Vim\" class=\"headerlink\" title=\"Vim\"></a>Vim</h4><h5 id=\"Vim中添加多行注释or删除：\"><a href=\"#Vim中添加多行注释or删除：\" class=\"headerlink\" title=\"Vim中添加多行注释or删除：\"></a>Vim中添加多行注释or删除：</h5><p>使用<code>Ctrl+v</code>进入VISUAL BLOCK状态 然后上下移动光标选择行数，输入<code>I</code>，改为INSERT(paste)状态，键入内容按下Esc结束，即可。  删除则为选中之后直接按删除功能键如：d、c皆可，即可删除所选一列</p>\n<h2 id=\"Blog\"><a href=\"#Blog\" class=\"headerlink\" title=\"Blog\"></a>Blog</h2><h3 id=\"Pelican\"><a href=\"#Pelican\" class=\"headerlink\" title=\"Pelican\"></a>Pelican</h3><p>Pelican Static Site Generator, Powered by Python：Pelican是python语言写的静态网站生成器。因为之前一直弄不好Jekyll 犯不着掉在这一颗树上，所以搜到了此同类软件。</p>\n<p>网上的那些教程不知道为什么鲜有一次效仿成功的，都是各种问题。真心他们没有遇见过吗？因此我也不自己贴这个教程了，除非那一天弄懂了那些问题所在，否则不过张贴一些网上现有的示例而已，而且还是不能保证完全正确的示例，没有任何价值。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Date: 2016-06-18 Title:The 2st Blog Tags: 2st,pelicanのはじて初体験 Slug: test2</span><br></pre></td></tr></table></figure>\n<p>就像这样</p>\n<p>接下来将本地的更到Gite: 2016-06-18tHub，至此就算告一段落。未能解决的问题还有很多，换言之其实就是问题们还没着手去解决。</p>\n<p>例如，回车符怎么敲现在都不知道，一篇文章只能这么一条龙一直打下去。真是囧…。另外没法添加链接，旁边那个邮件的地址都还是别人的——这个主题的开发者。如果搞清这两处，估计就能不再去研究别的功能了，毕竟只是一个博客，能更看的过去就好。哈。</p>\n<p>另外，将用到的命令在此备份 make html———— make serve————</p>\n<p>output文件夹内： git init———— git add .———— git commit -m ‘first commit’ ———— git remote add origin <a href=\"mailto:&#x67;&#x69;&#116;&#x40;&#103;&#x69;&#116;&#104;&#117;&#98;&#x2e;&#99;&#x6f;&#x6d;\">&#x67;&#x69;&#116;&#x40;&#103;&#x69;&#116;&#104;&#117;&#98;&#x2e;&#99;&#x6f;&#x6d;</a>:IanVzs/IanVzs.github.io.git———— git push -u origin master</p>\n<p>此外刚刚发现编辑时首行空格开始则将此段红色高亮显示 就像这样 就像这样并不会… 只不过在刚开始。 不过应该是汉字缩进，并且上一行没有内容，会有高亮显示。貌似是为了方便写程序？或许程序可以用这样的方式来插入，而不需要用那个专用的高亮语句:::*er什么的。</p>\n<p>然而事实并不像以上那么顺利……上传依然错误频出 所以接下来是成功代码依次再排列 git init</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add -A</span><br><span class=\"line\">git remote remove origin</span><br><span class=\"line\">git remote add origin https://github.com/IanVzs/IanVzs.github.io.git</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git push --set-upstream origin master -f</span><br><span class=\"line\">git init</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git remote remove origin</span><br><span class=\"line\">git remote add origin https://github.com/IanVzs/IanVzs.github.io.git</span><br><span class=\"line\">git add -A</span><br><span class=\"line\">git push --set-upstream origin master -f</span><br></pre></td></tr></table></figure>\n<p>并且之前写在此处的更新文章也一直没法更新出来，所以将第二篇拆分了，分两个文件来上传，否则只看那个成功update 实在有不信任感觉，现在如果这篇文章还是无法更新，那真的是…… 如果能的话，看来一篇文章还有字数限制？ 应该没 按理，更新后的文件也不是一个文件了，我也换了文件名都不能更新其内容是在令人不解。</p>\n<p>现在呢，就感觉顺手多了，只需要 git init git add . git git commit -m “hia” git push –set-upstream -f 即可。</p>\n<p>现在，创建完新的 之后，官网有了详细的说明：    </p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;# ianvzs.github.io&quot; &gt;&gt; README.md</span><br><span class=\"line\">git init</span><br><span class=\"line\">git add README.md</span><br><span class=\"line\">git commit -m &quot;first commit&quot;</span><br><span class=\"line\">git remote add origin https://github.com/IanVzs/ianvzs.github.io.git</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure>\n<p>简单明了。</p>\n<h3 id=\"hexo\"><a href=\"#hexo\" class=\"headerlink\" title=\"hexo\"></a>hexo</h3><p>而之后因为其主题我选的不好，然后又觊觎<code>nodejs</code>，所以将<code>blog</code>使用<code>hexo</code>来写了。以下是使用教程了——<br>title: Hello World</p>\n<hr>\n<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h3 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h3><h4 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h4 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h4 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h4 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n<h4 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h4><p>blog根目录下<code>_config.yml</code>, 以及themes下<code>_config.yml</code></p>\n<h5 id=\"连接github\"><a href=\"#连接github\" class=\"headerlink\" title=\"连接github:\"></a>连接github:</h5><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">deploy:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">git</span></span><br><span class=\"line\">    <span class=\"attr\">repo:</span> <span class=\"string\">https://github.com/*******/**.git</span></span><br><span class=\"line\">    <span class=\"attr\">branch:</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-deploy-git --save</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"themes\"><a href=\"#themes\" class=\"headerlink\" title=\"themes\"></a>themes</h3><ul>\n<li>hueman主题的图片配置地址为: <code>/themes/hueman/source/css/images</code></li>\n<li>可在<code>themes/hueman/_config.yml</code>中进行修改各项图片配置</li>\n</ul>\n<h2 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h2><h3 id=\"git-版本切换\"><a href=\"#git-版本切换\" class=\"headerlink\" title=\"git 版本切换\"></a>git 版本切换</h3><p>将项目克隆之后，可通过</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git tag   // 查看tag</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> v1</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> v2</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> v3</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git show v1       //根据tag 查看版本号</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> tag v1</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> Tagger: user</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> Data: Fri May 23 17:47:00 2018 +0800</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\">  <span class=\"string\">&#x27;为了部落&#x27;</span></span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> commit 5b123b31h4bvb31</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> Aurhor user</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> 等</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> git reset --hard 5b123b31h4bvb31  // 根据版本号回退版本</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"部署到服务器\"><a href=\"#部署到服务器\" class=\"headerlink\" title=\"部署到服务器\"></a>部署到服务器</h2><p>在部署到服务器的时候，发现有<code>‘node’: No such file or directory</code>的错误，解决办法是创建软连接：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /usr/bin/nodejs /usr/bin/node</span><br></pre></td></tr></table></figure>\n<p>另外，直接拷过去的<code>blog</code>项目没法用<code>hexo</code>直接运行…<br>解决办法是：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 并没有解决啊！！！！</span><br></pre></td></tr></table></figure>\n<p>(⊙﹏⊙)，╮(╯-╰)╭其实是<code>npm</code>在服务器<code>apt</code>安装的版本太低了… 在官网下了最新版，然后再次通过新版<code>npm</code>安装<code>hexo</code>就可以直接用了。</p>\n<h2 id=\"2021-04-21\"><a href=\"#2021-04-21\" class=\"headerlink\" title=\"2021-04-21\"></a>2021-04-21</h2><p>emmmmm如今重新再次翻看，觉得o(∩∩)o…哈哈。<br>这次找了个不错的模板，比之前用的没有分页强多了，而且还有了搜索功能。简直完美符合平时查阅的需求。</p>\n"},{"title":"数据格式笔记","date":"2021-05-10T09:05:00.000Z","_content":"\n## 单向链表实现和反转\n```py\n# 单向链表实现和反转\n\n\"\"\"\n# 当前值, 下一个值\n# 循环\n# 将当前值赋值为下一个的值, 下一个节点值为当前节点值\n\n# 当前节点next赋\n\"\"\"\nclass A:\n    def __init__(self, v):\n        self.v = v\n        self.next = None\n        \nclass LA:\n    def __init__(self):\n        self.head = None\n    def add(self, v):\n        node = A(v)\n        node.next = self.head\n        self.head = node\n    def print(self):\n        cur = self.head\n        while cur and cur.v != None:\n            print(f\"linkdata node v: {cur.v}\")\n            cur = cur.next\n    def revert(self, node: A=None, head=None):\n        if not head:\n            cache = self.head.next\n        else:\n            cache = node.next\n        if cache:\n            pass\n            # print(f\"cache: {cache.v}\")\n        else:\n            self.head = node\n            self.head.next = head\n            return \n        if head == None:\n            node = self.head\n            node.next = None\n            self.revert(cache, node)\n        else:\n            node.next = head\n            self.revert(cache, node)\n\nif __name__ == \"__main__\":\n    # 1234\n    # 234\n    ldata = LA()\n    for i in (1, 2, 3, 4):\n        ldata.add(i)\n    ldata.print()\n\n    print(\"---\"*10)\n    ldata.revert()\n    \n    ldata.print()\n    \n\"\"\"\n>>>运行输出:\nlinkdata node v: 4\nlinkdata node v: 3\nlinkdata node v: 2\nlinkdata node v: 1\n------------------------------\nlinkdata node v: 1\nlinkdata node v: 2\nlinkdata node v: 3\nlinkdata node v: 4\n\"\"\"\n```\n\n## 其他\n","source":"_posts/notes/noteOfFmtData.md","raw":"---\ntitle: 数据格式笔记\ndate: 2021-05-10 17:05\ncategory: [note, 数据格式, test]\ntags: [数据格式]\n---\n\n## 单向链表实现和反转\n```py\n# 单向链表实现和反转\n\n\"\"\"\n# 当前值, 下一个值\n# 循环\n# 将当前值赋值为下一个的值, 下一个节点值为当前节点值\n\n# 当前节点next赋\n\"\"\"\nclass A:\n    def __init__(self, v):\n        self.v = v\n        self.next = None\n        \nclass LA:\n    def __init__(self):\n        self.head = None\n    def add(self, v):\n        node = A(v)\n        node.next = self.head\n        self.head = node\n    def print(self):\n        cur = self.head\n        while cur and cur.v != None:\n            print(f\"linkdata node v: {cur.v}\")\n            cur = cur.next\n    def revert(self, node: A=None, head=None):\n        if not head:\n            cache = self.head.next\n        else:\n            cache = node.next\n        if cache:\n            pass\n            # print(f\"cache: {cache.v}\")\n        else:\n            self.head = node\n            self.head.next = head\n            return \n        if head == None:\n            node = self.head\n            node.next = None\n            self.revert(cache, node)\n        else:\n            node.next = head\n            self.revert(cache, node)\n\nif __name__ == \"__main__\":\n    # 1234\n    # 234\n    ldata = LA()\n    for i in (1, 2, 3, 4):\n        ldata.add(i)\n    ldata.print()\n\n    print(\"---\"*10)\n    ldata.revert()\n    \n    ldata.print()\n    \n\"\"\"\n>>>运行输出:\nlinkdata node v: 4\nlinkdata node v: 3\nlinkdata node v: 2\nlinkdata node v: 1\n------------------------------\nlinkdata node v: 1\nlinkdata node v: 2\nlinkdata node v: 3\nlinkdata node v: 4\n\"\"\"\n```\n\n## 其他\n","slug":"notes/noteOfFmtData","published":1,"updated":"2021-05-12T11:18:44.812Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9bp000gu3yq19vg1j46","content":"<h2 id=\"单向链表实现和反转\"><a href=\"#单向链表实现和反转\" class=\"headerlink\" title=\"单向链表实现和反转\"></a>单向链表实现和反转</h2><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 单向链表实现和反转</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\"># 当前值, 下一个值</span></span><br><span class=\"line\"><span class=\"string\"># 循环</span></span><br><span class=\"line\"><span class=\"string\"># 将当前值赋值为下一个的值, 下一个节点值为当前节点值</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 当前节点next赋</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, v</span>):</span></span><br><span class=\"line\">        self.v = v</span><br><span class=\"line\">        self.<span class=\"built_in\">next</span> = <span class=\"literal\">None</span></span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LA</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        self.head = <span class=\"literal\">None</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span>(<span class=\"params\">self, v</span>):</span></span><br><span class=\"line\">        node = A(v)</span><br><span class=\"line\">        node.<span class=\"built_in\">next</span> = self.head</span><br><span class=\"line\">        self.head = node</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">print</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        cur = self.head</span><br><span class=\"line\">        <span class=\"keyword\">while</span> cur <span class=\"keyword\">and</span> cur.v != <span class=\"literal\">None</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;linkdata node v: <span class=\"subst\">&#123;cur.v&#125;</span>&quot;</span>)</span><br><span class=\"line\">            cur = cur.<span class=\"built_in\">next</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">revert</span>(<span class=\"params\">self, node: A=<span class=\"literal\">None</span>, head=<span class=\"literal\">None</span></span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> head:</span><br><span class=\"line\">            cache = self.head.<span class=\"built_in\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            cache = node.<span class=\"built_in\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> cache:</span><br><span class=\"line\">            <span class=\"keyword\">pass</span></span><br><span class=\"line\">            <span class=\"comment\"># print(f&quot;cache: &#123;cache.v&#125;&quot;)</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.head = node</span><br><span class=\"line\">            self.head.<span class=\"built_in\">next</span> = head</span><br><span class=\"line\">            <span class=\"keyword\">return</span> </span><br><span class=\"line\">        <span class=\"keyword\">if</span> head == <span class=\"literal\">None</span>:</span><br><span class=\"line\">            node = self.head</span><br><span class=\"line\">            node.<span class=\"built_in\">next</span> = <span class=\"literal\">None</span></span><br><span class=\"line\">            self.revert(cache, node)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            node.<span class=\"built_in\">next</span> = head</span><br><span class=\"line\">            self.revert(cache, node)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    <span class=\"comment\"># 1234</span></span><br><span class=\"line\">    <span class=\"comment\"># 234</span></span><br><span class=\"line\">    ldata = LA()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> (<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>):</span><br><span class=\"line\">        ldata.add(i)</span><br><span class=\"line\">    ldata.<span class=\"built_in\">print</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;---&quot;</span>*<span class=\"number\">10</span>)</span><br><span class=\"line\">    ldata.revert()</span><br><span class=\"line\">    </span><br><span class=\"line\">    ldata.<span class=\"built_in\">print</span>()</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">&gt;&gt;&gt;运行输出:</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 4</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 3</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 2</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 1</span></span><br><span class=\"line\"><span class=\"string\">------------------------------</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 1</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 2</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 3</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 4</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2>","site":{"data":{}},"excerpt":"","more":"<h2 id=\"单向链表实现和反转\"><a href=\"#单向链表实现和反转\" class=\"headerlink\" title=\"单向链表实现和反转\"></a>单向链表实现和反转</h2><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 单向链表实现和反转</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\"># 当前值, 下一个值</span></span><br><span class=\"line\"><span class=\"string\"># 循环</span></span><br><span class=\"line\"><span class=\"string\"># 将当前值赋值为下一个的值, 下一个节点值为当前节点值</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"># 当前节点next赋</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, v</span>):</span></span><br><span class=\"line\">        self.v = v</span><br><span class=\"line\">        self.<span class=\"built_in\">next</span> = <span class=\"literal\">None</span></span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LA</span>:</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        self.head = <span class=\"literal\">None</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span>(<span class=\"params\">self, v</span>):</span></span><br><span class=\"line\">        node = A(v)</span><br><span class=\"line\">        node.<span class=\"built_in\">next</span> = self.head</span><br><span class=\"line\">        self.head = node</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">print</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        cur = self.head</span><br><span class=\"line\">        <span class=\"keyword\">while</span> cur <span class=\"keyword\">and</span> cur.v != <span class=\"literal\">None</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;linkdata node v: <span class=\"subst\">&#123;cur.v&#125;</span>&quot;</span>)</span><br><span class=\"line\">            cur = cur.<span class=\"built_in\">next</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">revert</span>(<span class=\"params\">self, node: A=<span class=\"literal\">None</span>, head=<span class=\"literal\">None</span></span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> head:</span><br><span class=\"line\">            cache = self.head.<span class=\"built_in\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            cache = node.<span class=\"built_in\">next</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> cache:</span><br><span class=\"line\">            <span class=\"keyword\">pass</span></span><br><span class=\"line\">            <span class=\"comment\"># print(f&quot;cache: &#123;cache.v&#125;&quot;)</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            self.head = node</span><br><span class=\"line\">            self.head.<span class=\"built_in\">next</span> = head</span><br><span class=\"line\">            <span class=\"keyword\">return</span> </span><br><span class=\"line\">        <span class=\"keyword\">if</span> head == <span class=\"literal\">None</span>:</span><br><span class=\"line\">            node = self.head</span><br><span class=\"line\">            node.<span class=\"built_in\">next</span> = <span class=\"literal\">None</span></span><br><span class=\"line\">            self.revert(cache, node)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            node.<span class=\"built_in\">next</span> = head</span><br><span class=\"line\">            self.revert(cache, node)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    <span class=\"comment\"># 1234</span></span><br><span class=\"line\">    <span class=\"comment\"># 234</span></span><br><span class=\"line\">    ldata = LA()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> (<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>):</span><br><span class=\"line\">        ldata.add(i)</span><br><span class=\"line\">    ldata.<span class=\"built_in\">print</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;---&quot;</span>*<span class=\"number\">10</span>)</span><br><span class=\"line\">    ldata.revert()</span><br><span class=\"line\">    </span><br><span class=\"line\">    ldata.<span class=\"built_in\">print</span>()</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">&gt;&gt;&gt;运行输出:</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 4</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 3</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 2</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 1</span></span><br><span class=\"line\"><span class=\"string\">------------------------------</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 1</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 2</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 3</span></span><br><span class=\"line\"><span class=\"string\">linkdata node v: 4</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2>"},{"title":"UE4 笔记","date":"2021-05-10T04:13:26.000Z","_content":"# UE4 笔记\n![ue4](https://cdn2.unrealengine.com/Unreal+Engine%2Fblog%2Fconnect-with-the-unreal-engine-community-online%2FUE_Community_Online_Feed-thumb-desktop-1400x788-a6917dba2f2cc41cc1426a3afdff135521cea738.png \"ue4\")\n\n## 手机\n- 路径必须不能用汉字, 一律全英文(神奇...以前习惯就是全英,以为这问题是上世纪的了,测试时不知怎么就把顺手的英文换成中文了,结果就莫名中枪了)\n- java8 (ue4.26.2, 之前4.25也是, 反正就找个稳定版java一直使吧, 这语言太amazing了.)\n- 虽然对java版本有一定要求, 不过按照我这次的测试和使用, 觉得折腾那么久完全是汉字项目名不支持...所以java版本要求应该不是很严重\n\n## 动画\n### 事件图表&动画图表\n- 事件图表: 收集动画->存储在变量中\n- 动画图表: 驱动所有动作\n\n### 事件图表\n#### isValid\n蓝图不知道被哪个实例持有(通用)\n\n#### 朝向\n主角本地坐标X轴正方向表正前方\n1. GetVelocity\n2. RotationFromXVector\n\n3. GetControlRotaion\n\n2,3求`Delta`.\n\n#### 输出\n- 速度\n- 方向\n\n#### 总步骤\n- 向量长度获取`Speed`\n- 向量方向-控制器方向获取`Direction`\n- 以上2保存为变量, 交由`动画图表`\n\n### 动画图表\n**Params-Blend-Result:**\n1. 获取速度,方向(看情况可多可少)\n2. 将`1`输入动画混合空间\n3. 输出姿势\n\n#### State Machine\n在以上一组动作中加入状态细分\n- State Machine - State1-(rule)-State2...StateN\n- State - (Params-Blend-Result)\n\n\n### 生效\n1. 角色\n2. 网格体(骨骼网格体)\n3. 动画-动画类-动画蓝图\n","source":"_posts/notes/noteOfUE4.md","raw":"---\ntitle: UE4 笔记\ndate: 2021-05-10 12:13:26\ncategories: [note, ue4, learning]\ntags: [ue4, learning]\n---\n# UE4 笔记\n![ue4](https://cdn2.unrealengine.com/Unreal+Engine%2Fblog%2Fconnect-with-the-unreal-engine-community-online%2FUE_Community_Online_Feed-thumb-desktop-1400x788-a6917dba2f2cc41cc1426a3afdff135521cea738.png \"ue4\")\n\n## 手机\n- 路径必须不能用汉字, 一律全英文(神奇...以前习惯就是全英,以为这问题是上世纪的了,测试时不知怎么就把顺手的英文换成中文了,结果就莫名中枪了)\n- java8 (ue4.26.2, 之前4.25也是, 反正就找个稳定版java一直使吧, 这语言太amazing了.)\n- 虽然对java版本有一定要求, 不过按照我这次的测试和使用, 觉得折腾那么久完全是汉字项目名不支持...所以java版本要求应该不是很严重\n\n## 动画\n### 事件图表&动画图表\n- 事件图表: 收集动画->存储在变量中\n- 动画图表: 驱动所有动作\n\n### 事件图表\n#### isValid\n蓝图不知道被哪个实例持有(通用)\n\n#### 朝向\n主角本地坐标X轴正方向表正前方\n1. GetVelocity\n2. RotationFromXVector\n\n3. GetControlRotaion\n\n2,3求`Delta`.\n\n#### 输出\n- 速度\n- 方向\n\n#### 总步骤\n- 向量长度获取`Speed`\n- 向量方向-控制器方向获取`Direction`\n- 以上2保存为变量, 交由`动画图表`\n\n### 动画图表\n**Params-Blend-Result:**\n1. 获取速度,方向(看情况可多可少)\n2. 将`1`输入动画混合空间\n3. 输出姿势\n\n#### State Machine\n在以上一组动作中加入状态细分\n- State Machine - State1-(rule)-State2...StateN\n- State - (Params-Blend-Result)\n\n\n### 生效\n1. 角色\n2. 网格体(骨骼网格体)\n3. 动画-动画类-动画蓝图\n","slug":"notes/noteOfUE4","published":1,"updated":"2021-05-12T11:18:44.812Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9bw000iu3yq7icncge8","content":"<h1 id=\"UE4-笔记\"><a href=\"#UE4-笔记\" class=\"headerlink\" title=\"UE4 笔记\"></a>UE4 笔记</h1><p><img src=\"https://cdn2.unrealengine.com/Unreal+Engine%2Fblog%2Fconnect-with-the-unreal-engine-community-online%2FUE_Community_Online_Feed-thumb-desktop-1400x788-a6917dba2f2cc41cc1426a3afdff135521cea738.png\" alt=\"ue4\" title=\"ue4\"></p>\n<h2 id=\"手机\"><a href=\"#手机\" class=\"headerlink\" title=\"手机\"></a>手机</h2><ul>\n<li>路径必须不能用汉字, 一律全英文(神奇…以前习惯就是全英,以为这问题是上世纪的了,测试时不知怎么就把顺手的英文换成中文了,结果就莫名中枪了)</li>\n<li>java8 (ue4.26.2, 之前4.25也是, 反正就找个稳定版java一直使吧, 这语言太amazing了.)</li>\n<li>虽然对java版本有一定要求, 不过按照我这次的测试和使用, 觉得折腾那么久完全是汉字项目名不支持…所以java版本要求应该不是很严重</li>\n</ul>\n<h2 id=\"动画\"><a href=\"#动画\" class=\"headerlink\" title=\"动画\"></a>动画</h2><h3 id=\"事件图表-amp-动画图表\"><a href=\"#事件图表-amp-动画图表\" class=\"headerlink\" title=\"事件图表&amp;动画图表\"></a>事件图表&amp;动画图表</h3><ul>\n<li>事件图表: 收集动画-&gt;存储在变量中</li>\n<li>动画图表: 驱动所有动作</li>\n</ul>\n<h3 id=\"事件图表\"><a href=\"#事件图表\" class=\"headerlink\" title=\"事件图表\"></a>事件图表</h3><h4 id=\"isValid\"><a href=\"#isValid\" class=\"headerlink\" title=\"isValid\"></a>isValid</h4><p>蓝图不知道被哪个实例持有(通用)</p>\n<h4 id=\"朝向\"><a href=\"#朝向\" class=\"headerlink\" title=\"朝向\"></a>朝向</h4><p>主角本地坐标X轴正方向表正前方</p>\n<ol>\n<li><p>GetVelocity</p>\n</li>\n<li><p>RotationFromXVector</p>\n</li>\n<li><p>GetControlRotaion</p>\n</li>\n</ol>\n<p>2,3求<code>Delta</code>.</p>\n<h4 id=\"输出\"><a href=\"#输出\" class=\"headerlink\" title=\"输出\"></a>输出</h4><ul>\n<li>速度</li>\n<li>方向</li>\n</ul>\n<h4 id=\"总步骤\"><a href=\"#总步骤\" class=\"headerlink\" title=\"总步骤\"></a>总步骤</h4><ul>\n<li>向量长度获取<code>Speed</code></li>\n<li>向量方向-控制器方向获取<code>Direction</code></li>\n<li>以上2保存为变量, 交由<code>动画图表</code></li>\n</ul>\n<h3 id=\"动画图表\"><a href=\"#动画图表\" class=\"headerlink\" title=\"动画图表\"></a>动画图表</h3><p><strong>Params-Blend-Result:</strong></p>\n<ol>\n<li>获取速度,方向(看情况可多可少)</li>\n<li>将<code>1</code>输入动画混合空间</li>\n<li>输出姿势</li>\n</ol>\n<h4 id=\"State-Machine\"><a href=\"#State-Machine\" class=\"headerlink\" title=\"State Machine\"></a>State Machine</h4><p>在以上一组动作中加入状态细分</p>\n<ul>\n<li>State Machine - State1-(rule)-State2…StateN</li>\n<li>State - (Params-Blend-Result)</li>\n</ul>\n<h3 id=\"生效\"><a href=\"#生效\" class=\"headerlink\" title=\"生效\"></a>生效</h3><ol>\n<li>角色</li>\n<li>网格体(骨骼网格体)</li>\n<li>动画-动画类-动画蓝图</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"UE4-笔记\"><a href=\"#UE4-笔记\" class=\"headerlink\" title=\"UE4 笔记\"></a>UE4 笔记</h1><p><img src=\"https://cdn2.unrealengine.com/Unreal+Engine%2Fblog%2Fconnect-with-the-unreal-engine-community-online%2FUE_Community_Online_Feed-thumb-desktop-1400x788-a6917dba2f2cc41cc1426a3afdff135521cea738.png\" alt=\"ue4\" title=\"ue4\"></p>\n<h2 id=\"手机\"><a href=\"#手机\" class=\"headerlink\" title=\"手机\"></a>手机</h2><ul>\n<li>路径必须不能用汉字, 一律全英文(神奇…以前习惯就是全英,以为这问题是上世纪的了,测试时不知怎么就把顺手的英文换成中文了,结果就莫名中枪了)</li>\n<li>java8 (ue4.26.2, 之前4.25也是, 反正就找个稳定版java一直使吧, 这语言太amazing了.)</li>\n<li>虽然对java版本有一定要求, 不过按照我这次的测试和使用, 觉得折腾那么久完全是汉字项目名不支持…所以java版本要求应该不是很严重</li>\n</ul>\n<h2 id=\"动画\"><a href=\"#动画\" class=\"headerlink\" title=\"动画\"></a>动画</h2><h3 id=\"事件图表-amp-动画图表\"><a href=\"#事件图表-amp-动画图表\" class=\"headerlink\" title=\"事件图表&amp;动画图表\"></a>事件图表&amp;动画图表</h3><ul>\n<li>事件图表: 收集动画-&gt;存储在变量中</li>\n<li>动画图表: 驱动所有动作</li>\n</ul>\n<h3 id=\"事件图表\"><a href=\"#事件图表\" class=\"headerlink\" title=\"事件图表\"></a>事件图表</h3><h4 id=\"isValid\"><a href=\"#isValid\" class=\"headerlink\" title=\"isValid\"></a>isValid</h4><p>蓝图不知道被哪个实例持有(通用)</p>\n<h4 id=\"朝向\"><a href=\"#朝向\" class=\"headerlink\" title=\"朝向\"></a>朝向</h4><p>主角本地坐标X轴正方向表正前方</p>\n<ol>\n<li><p>GetVelocity</p>\n</li>\n<li><p>RotationFromXVector</p>\n</li>\n<li><p>GetControlRotaion</p>\n</li>\n</ol>\n<p>2,3求<code>Delta</code>.</p>\n<h4 id=\"输出\"><a href=\"#输出\" class=\"headerlink\" title=\"输出\"></a>输出</h4><ul>\n<li>速度</li>\n<li>方向</li>\n</ul>\n<h4 id=\"总步骤\"><a href=\"#总步骤\" class=\"headerlink\" title=\"总步骤\"></a>总步骤</h4><ul>\n<li>向量长度获取<code>Speed</code></li>\n<li>向量方向-控制器方向获取<code>Direction</code></li>\n<li>以上2保存为变量, 交由<code>动画图表</code></li>\n</ul>\n<h3 id=\"动画图表\"><a href=\"#动画图表\" class=\"headerlink\" title=\"动画图表\"></a>动画图表</h3><p><strong>Params-Blend-Result:</strong></p>\n<ol>\n<li>获取速度,方向(看情况可多可少)</li>\n<li>将<code>1</code>输入动画混合空间</li>\n<li>输出姿势</li>\n</ol>\n<h4 id=\"State-Machine\"><a href=\"#State-Machine\" class=\"headerlink\" title=\"State Machine\"></a>State Machine</h4><p>在以上一组动作中加入状态细分</p>\n<ul>\n<li>State Machine - State1-(rule)-State2…StateN</li>\n<li>State - (Params-Blend-Result)</li>\n</ul>\n<h3 id=\"生效\"><a href=\"#生效\" class=\"headerlink\" title=\"生效\"></a>生效</h3><ol>\n<li>角色</li>\n<li>网格体(骨骼网格体)</li>\n<li>动画-动画类-动画蓝图</li>\n</ol>\n"},{"title":"notes Of docker","date":"2019-02-12T13:37:00.000Z","_content":"\n# Docker\n![docker img](https://mma.prnewswire.com/media/776689/New_Docker_logo_Logo.jpg?p=facebook \"docker\")\n### Install\n略过~ 😁\n\n### Swarm\nDocker Compose \nDocker Machine: Mac、Windows区别预先安装。 Linux直接安装  Win10 Hyper-V\n发布镜像\n镜像充当已部署容器，填写必要信息：username、repo、tag\ndockers-compose.yml 副本\n\n其实以上在官方教程有很好说明[在这里](https://docs.docker-cn.com/get-started/part4/#%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6)，但毕竟高级应用，暂且记下。\n\n#### 创建虚拟机来试验一下\n```shell\n$ docker-machine create --driver virtualbox myvm1\n$ docker-machine create --driver virtualbox myvm2\n```\n第一个管理节点：`docker swarm init`，第二个工作节点`docker swarm join``\n\n##### should like this show:\n```\n$ docker-machine ssh myvm1 \"docker swarm init\"\nSwarm initialized: current node <node ID> is now a manager.\n\nTo add a worker to this swarm, run the following command:\n\n  docker swarm join \\\n  --token <token> \\\n  <ip>:<port>\n```\n通过运行 docker-machine ls 来复制 myvm1 的 IP 地址，然后使用 该 IP 地址并通过 --advertise-addr 指定端口 2377（用于 swarm join 的端口）， 以便再次运行 docker swarm init 命令。例如：\n```\n    docker-machine ssh myvm1 \"docker swarm init --advertise-addr 192.168.99.100:2377\"\n```\n##### 复制此命令，然后通过 docker-machine ssh 将其发送给 myvm2，从而让 myvm2 加入\n```\n$ docker-machine ssh myvm2 \"docker swarm join \\\n--token <token> \\\n<ip>:<port>\"\n\nThis node joined a swarm as a worker.\n```\n\n## 至此， 创建swarm完成。\n\n## 连接\n使用`ssh`连接`docker-machine ssh myvm1`,运行`docker node ls`查看此中节点。\n\n#### Mybe like this.\n```\ndocker@myvm1:~$ docker node ls\nID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS\nbrtu9urxwfd5j0zrmkubhpkbd     myvm2               Ready               Active              \nrihwohkh3ph38fhillhhb84sk *   myvm1               Ready               Active              Leader\n```\nmybe not you are ture. 😂\n\n之后，其余东西z有用到再去官网查看吧。 记录与否，取决于俺。\n","source":"_posts/notes/noteOfdocker.md","raw":"---\ntitle: notes Of docker\ndate: 2019-02-12 21:37:00\ncategories: [note, docker, learning]\ntags: [docker, learning]\n---\n\n# Docker\n![docker img](https://mma.prnewswire.com/media/776689/New_Docker_logo_Logo.jpg?p=facebook \"docker\")\n### Install\n略过~ 😁\n\n### Swarm\nDocker Compose \nDocker Machine: Mac、Windows区别预先安装。 Linux直接安装  Win10 Hyper-V\n发布镜像\n镜像充当已部署容器，填写必要信息：username、repo、tag\ndockers-compose.yml 副本\n\n其实以上在官方教程有很好说明[在这里](https://docs.docker-cn.com/get-started/part4/#%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6)，但毕竟高级应用，暂且记下。\n\n#### 创建虚拟机来试验一下\n```shell\n$ docker-machine create --driver virtualbox myvm1\n$ docker-machine create --driver virtualbox myvm2\n```\n第一个管理节点：`docker swarm init`，第二个工作节点`docker swarm join``\n\n##### should like this show:\n```\n$ docker-machine ssh myvm1 \"docker swarm init\"\nSwarm initialized: current node <node ID> is now a manager.\n\nTo add a worker to this swarm, run the following command:\n\n  docker swarm join \\\n  --token <token> \\\n  <ip>:<port>\n```\n通过运行 docker-machine ls 来复制 myvm1 的 IP 地址，然后使用 该 IP 地址并通过 --advertise-addr 指定端口 2377（用于 swarm join 的端口）， 以便再次运行 docker swarm init 命令。例如：\n```\n    docker-machine ssh myvm1 \"docker swarm init --advertise-addr 192.168.99.100:2377\"\n```\n##### 复制此命令，然后通过 docker-machine ssh 将其发送给 myvm2，从而让 myvm2 加入\n```\n$ docker-machine ssh myvm2 \"docker swarm join \\\n--token <token> \\\n<ip>:<port>\"\n\nThis node joined a swarm as a worker.\n```\n\n## 至此， 创建swarm完成。\n\n## 连接\n使用`ssh`连接`docker-machine ssh myvm1`,运行`docker node ls`查看此中节点。\n\n#### Mybe like this.\n```\ndocker@myvm1:~$ docker node ls\nID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS\nbrtu9urxwfd5j0zrmkubhpkbd     myvm2               Ready               Active              \nrihwohkh3ph38fhillhhb84sk *   myvm1               Ready               Active              Leader\n```\nmybe not you are ture. 😂\n\n之后，其余东西z有用到再去官网查看吧。 记录与否，取决于俺。\n","slug":"notes/noteOfdocker","published":1,"updated":"2021-05-08T02:56:02.688Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9c3000lu3yqcm6b1lh7","content":"<h1 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h1><p><img src=\"https://mma.prnewswire.com/media/776689/New_Docker_logo_Logo.jpg?p=facebook\" alt=\"docker img\" title=\"docker\"></p>\n<h3 id=\"Install\"><a href=\"#Install\" class=\"headerlink\" title=\"Install\"></a>Install</h3><p>略过~ 😁</p>\n<h3 id=\"Swarm\"><a href=\"#Swarm\" class=\"headerlink\" title=\"Swarm\"></a>Swarm</h3><p>Docker Compose<br>Docker Machine: Mac、Windows区别预先安装。 Linux直接安装  Win10 Hyper-V<br>发布镜像<br>镜像充当已部署容器，填写必要信息：username、repo、tag<br>dockers-compose.yml 副本</p>\n<p>其实以上在官方教程有很好说明<a href=\"https://docs.docker-cn.com/get-started/part4/#%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6\">在这里</a>，但毕竟高级应用，暂且记下。</p>\n<h4 id=\"创建虚拟机来试验一下\"><a href=\"#创建虚拟机来试验一下\" class=\"headerlink\" title=\"创建虚拟机来试验一下\"></a>创建虚拟机来试验一下</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> docker-machine create --driver virtualbox myvm1</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> docker-machine create --driver virtualbox myvm2</span></span><br></pre></td></tr></table></figure>\n<p>第一个管理节点：<code>docker swarm init</code>，第二个工作节点`docker swarm join``</p>\n<h5 id=\"should-like-this-show\"><a href=\"#should-like-this-show\" class=\"headerlink\" title=\"should like this show:\"></a>should like this show:</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker-machine ssh myvm1 &quot;docker swarm init&quot;</span><br><span class=\"line\">Swarm initialized: current node &lt;node ID&gt; is now a manager.</span><br><span class=\"line\"></span><br><span class=\"line\">To add a worker to this swarm, run the following command:</span><br><span class=\"line\"></span><br><span class=\"line\">  docker swarm join \\</span><br><span class=\"line\">  --token &lt;token&gt; \\</span><br><span class=\"line\">  &lt;ip&gt;:&lt;port&gt;</span><br></pre></td></tr></table></figure>\n<p>通过运行 docker-machine ls 来复制 myvm1 的 IP 地址，然后使用 该 IP 地址并通过 –advertise-addr 指定端口 2377（用于 swarm join 的端口）， 以便再次运行 docker swarm init 命令。例如：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-machine ssh myvm1 &quot;docker swarm init --advertise-addr 192.168.99.100:2377&quot;</span><br></pre></td></tr></table></figure>\n<h5 id=\"复制此命令，然后通过-docker-machine-ssh-将其发送给-myvm2，从而让-myvm2-加入\"><a href=\"#复制此命令，然后通过-docker-machine-ssh-将其发送给-myvm2，从而让-myvm2-加入\" class=\"headerlink\" title=\"复制此命令，然后通过 docker-machine ssh 将其发送给 myvm2，从而让 myvm2 加入\"></a>复制此命令，然后通过 docker-machine ssh 将其发送给 myvm2，从而让 myvm2 加入</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker-machine ssh myvm2 &quot;docker swarm join \\</span><br><span class=\"line\">--token &lt;token&gt; \\</span><br><span class=\"line\">&lt;ip&gt;:&lt;port&gt;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">This node joined a swarm as a worker.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"至此，-创建swarm完成。\"><a href=\"#至此，-创建swarm完成。\" class=\"headerlink\" title=\"至此， 创建swarm完成。\"></a>至此， 创建swarm完成。</h2><h2 id=\"连接\"><a href=\"#连接\" class=\"headerlink\" title=\"连接\"></a>连接</h2><p>使用<code>ssh</code>连接<code>docker-machine ssh myvm1</code>,运行<code>docker node ls</code>查看此中节点。</p>\n<h4 id=\"Mybe-like-this\"><a href=\"#Mybe-like-this\" class=\"headerlink\" title=\"Mybe like this.\"></a>Mybe like this.</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker@myvm1:~$ docker node ls</span><br><span class=\"line\">ID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS</span><br><span class=\"line\">brtu9urxwfd5j0zrmkubhpkbd     myvm2               Ready               Active              </span><br><span class=\"line\">rihwohkh3ph38fhillhhb84sk *   myvm1               Ready               Active              Leader</span><br></pre></td></tr></table></figure>\n<p>mybe not you are ture. 😂</p>\n<p>之后，其余东西z有用到再去官网查看吧。 记录与否，取决于俺。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h1><p><img src=\"https://mma.prnewswire.com/media/776689/New_Docker_logo_Logo.jpg?p=facebook\" alt=\"docker img\" title=\"docker\"></p>\n<h3 id=\"Install\"><a href=\"#Install\" class=\"headerlink\" title=\"Install\"></a>Install</h3><p>略过~ 😁</p>\n<h3 id=\"Swarm\"><a href=\"#Swarm\" class=\"headerlink\" title=\"Swarm\"></a>Swarm</h3><p>Docker Compose<br>Docker Machine: Mac、Windows区别预先安装。 Linux直接安装  Win10 Hyper-V<br>发布镜像<br>镜像充当已部署容器，填写必要信息：username、repo、tag<br>dockers-compose.yml 副本</p>\n<p>其实以上在官方教程有很好说明<a href=\"https://docs.docker-cn.com/get-started/part4/#%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6\">在这里</a>，但毕竟高级应用，暂且记下。</p>\n<h4 id=\"创建虚拟机来试验一下\"><a href=\"#创建虚拟机来试验一下\" class=\"headerlink\" title=\"创建虚拟机来试验一下\"></a>创建虚拟机来试验一下</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> docker-machine create --driver virtualbox myvm1</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> docker-machine create --driver virtualbox myvm2</span></span><br></pre></td></tr></table></figure>\n<p>第一个管理节点：<code>docker swarm init</code>，第二个工作节点`docker swarm join``</p>\n<h5 id=\"should-like-this-show\"><a href=\"#should-like-this-show\" class=\"headerlink\" title=\"should like this show:\"></a>should like this show:</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker-machine ssh myvm1 &quot;docker swarm init&quot;</span><br><span class=\"line\">Swarm initialized: current node &lt;node ID&gt; is now a manager.</span><br><span class=\"line\"></span><br><span class=\"line\">To add a worker to this swarm, run the following command:</span><br><span class=\"line\"></span><br><span class=\"line\">  docker swarm join \\</span><br><span class=\"line\">  --token &lt;token&gt; \\</span><br><span class=\"line\">  &lt;ip&gt;:&lt;port&gt;</span><br></pre></td></tr></table></figure>\n<p>通过运行 docker-machine ls 来复制 myvm1 的 IP 地址，然后使用 该 IP 地址并通过 –advertise-addr 指定端口 2377（用于 swarm join 的端口）， 以便再次运行 docker swarm init 命令。例如：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker-machine ssh myvm1 &quot;docker swarm init --advertise-addr 192.168.99.100:2377&quot;</span><br></pre></td></tr></table></figure>\n<h5 id=\"复制此命令，然后通过-docker-machine-ssh-将其发送给-myvm2，从而让-myvm2-加入\"><a href=\"#复制此命令，然后通过-docker-machine-ssh-将其发送给-myvm2，从而让-myvm2-加入\" class=\"headerlink\" title=\"复制此命令，然后通过 docker-machine ssh 将其发送给 myvm2，从而让 myvm2 加入\"></a>复制此命令，然后通过 docker-machine ssh 将其发送给 myvm2，从而让 myvm2 加入</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ docker-machine ssh myvm2 &quot;docker swarm join \\</span><br><span class=\"line\">--token &lt;token&gt; \\</span><br><span class=\"line\">&lt;ip&gt;:&lt;port&gt;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">This node joined a swarm as a worker.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"至此，-创建swarm完成。\"><a href=\"#至此，-创建swarm完成。\" class=\"headerlink\" title=\"至此， 创建swarm完成。\"></a>至此， 创建swarm完成。</h2><h2 id=\"连接\"><a href=\"#连接\" class=\"headerlink\" title=\"连接\"></a>连接</h2><p>使用<code>ssh</code>连接<code>docker-machine ssh myvm1</code>,运行<code>docker node ls</code>查看此中节点。</p>\n<h4 id=\"Mybe-like-this\"><a href=\"#Mybe-like-this\" class=\"headerlink\" title=\"Mybe like this.\"></a>Mybe like this.</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker@myvm1:~$ docker node ls</span><br><span class=\"line\">ID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS</span><br><span class=\"line\">brtu9urxwfd5j0zrmkubhpkbd     myvm2               Ready               Active              </span><br><span class=\"line\">rihwohkh3ph38fhillhhb84sk *   myvm1               Ready               Active              Leader</span><br></pre></td></tr></table></figure>\n<p>mybe not you are ture. 😂</p>\n<p>之后，其余东西z有用到再去官网查看吧。 记录与否，取决于俺。</p>\n"},{"title":"Golang笔记","date":"2021-05-19T11:00:00.000Z","_content":"# Go golang笔记\n![golang](https://wallpapercave.com/wp/wp7041189.jpg \"power\")\n\n## 非硬性结束服务\n### http.Server.Shutdown\n`http.Server`结构体有一个终止服务的方法`Shutdown`\n1. 首先关闭所有开启的监听器\n2. 关闭所有闲置连接\n3. 等待活跃的连接均闲置了才终止服务\n#### 长链接\n对诸如WebSocket等的长连接，Shutdown不会尝试关闭也不会等待这些连接。若需要，需调用者分开额外处理（诸如通知诸长连接或等待它们关闭，使用RegisterOnShutdown注册终止通知函数）\n\n### signal.Notify\n可指定信号类型/`all incoming signals will be relayed to c`\n\n### 综上\n#### Demo1\n```go\n    srv := http.Server{\n        Addr:    *addr,\n        Handler: handler,\n    }\n\n    // make sure idle connections returned\n    processed := make(chan struct{})\n    go func() {\n        c := make(chan os.Signal, 1)\n        signal.Notify(c, os.Interrupt)\n        <-c\n\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n        defer cancel()\n        if err := srv.Shutdown(ctx); nil != err {\n            log.Fatalf(\"server shutdown failed, err: %v\\n\", err)\n        }\n        log.Println(\"server gracefully shutdown\")\n\n        close(processed)\n    }()\n\n    // serve\n    err := srv.ListenAndServe()\n    if http.ErrServerClosed != err {\n        log.Fatalf(\"server not gracefully shutdown, err :%v\\n\", err)\n    }\n\n    // waiting for goroutine above processed\n    <-processed\n}\n```\n\n#### Demo2\n```go\nfunc main() {\n\tc := make(chan os.Signal)\n\t// 监听信号\n\tsignal.Notify(c, syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT, syscall.SIGUSR1, syscall.SIGUSR2)\n\n\tgo func() {\n\t\tfor s := range c {\n\t\t\tswitch s {\n\t\t\tcase syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM:\n\t\t\t\tfmt.Println(\"退出:\", s)\n\t\t\t\tExitFunc()\n\t\t\tcase syscall.SIGUSR1:\n\t\t\t\tfmt.Println(\"usr1\", s)\n\t\t\tcase syscall.SIGUSR2:\n\t\t\t\tfmt.Println(\"usr2\", s)\n\t\t\tdefault:\n\t\t\t\tfmt.Println(\"其他信号:\", s)\n\t\t\t}\n\t\t}\n\t}()\n\tfmt.Println(\"启动了程序\")\n\tsum := 0\n\tfor {\n\t\tsum++\n\t\tfmt.Println(\"休眠了:\", sum, \"秒\")\n\t\ttime.Sleep(1 * time.Second)\n\t}\n}\n\nfunc ExitFunc() {\n\tfmt.Println(\"开始退出...\")\n\tfmt.Println(\"执行清理...\")\n\tfmt.Println(\"结束退出...\")\n\tos.Exit(0)\n}\n```\n\n#### Demo3\n```go\npackage main\n\nimport (\n    \"log\"\n    \"io\"\n    \"time\"\n    \"net/http\"\n)\n\nfunc startHttpServer() *http.Server {\n    srv := &http.Server{Addr: \":8080\"}\n\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        io.WriteString(w, \"hello world\\n\")\n    })\n\n    go func() {\n        if err := srv.ListenAndServe(); err != nil {\n            // cannot panic, because this probably is an intentional close\n            log.Printf(\"Httpserver: ListenAndServe() error: %s\", err)\n        }\n    }()\n\n    // returning reference so caller can call Shutdown()\n    return srv\n}\n\nfunc main() {\n    log.Printf(\"main: starting HTTP server\")\n\n    srv := startHttpServer()\n\n    log.Printf(\"main: serving for 10 seconds\")\n\n    time.Sleep(10 * time.Second)\n\n    log.Printf(\"main: stopping HTTP server\")\n\n    // now close the server gracefully (\"shutdown\")\n    // timeout could be given instead of nil as a https://golang.org/pkg/context/\n    if err := srv.Shutdown(nil); err != nil {\n        panic(err) // failure/timeout shutting down the server gracefully\n    }\n\n    log.Printf(\"main: done. exiting\")\n}\n```\n","source":"_posts/notes/noteOfgoExp.md","raw":"---\ntitle: Golang笔记\ndate: 2021-05-19 19:00:00\ncategories: [note, golang, expansion]\ntags: [golang, expansion]\n---\n# Go golang笔记\n![golang](https://wallpapercave.com/wp/wp7041189.jpg \"power\")\n\n## 非硬性结束服务\n### http.Server.Shutdown\n`http.Server`结构体有一个终止服务的方法`Shutdown`\n1. 首先关闭所有开启的监听器\n2. 关闭所有闲置连接\n3. 等待活跃的连接均闲置了才终止服务\n#### 长链接\n对诸如WebSocket等的长连接，Shutdown不会尝试关闭也不会等待这些连接。若需要，需调用者分开额外处理（诸如通知诸长连接或等待它们关闭，使用RegisterOnShutdown注册终止通知函数）\n\n### signal.Notify\n可指定信号类型/`all incoming signals will be relayed to c`\n\n### 综上\n#### Demo1\n```go\n    srv := http.Server{\n        Addr:    *addr,\n        Handler: handler,\n    }\n\n    // make sure idle connections returned\n    processed := make(chan struct{})\n    go func() {\n        c := make(chan os.Signal, 1)\n        signal.Notify(c, os.Interrupt)\n        <-c\n\n        ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)\n        defer cancel()\n        if err := srv.Shutdown(ctx); nil != err {\n            log.Fatalf(\"server shutdown failed, err: %v\\n\", err)\n        }\n        log.Println(\"server gracefully shutdown\")\n\n        close(processed)\n    }()\n\n    // serve\n    err := srv.ListenAndServe()\n    if http.ErrServerClosed != err {\n        log.Fatalf(\"server not gracefully shutdown, err :%v\\n\", err)\n    }\n\n    // waiting for goroutine above processed\n    <-processed\n}\n```\n\n#### Demo2\n```go\nfunc main() {\n\tc := make(chan os.Signal)\n\t// 监听信号\n\tsignal.Notify(c, syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT, syscall.SIGUSR1, syscall.SIGUSR2)\n\n\tgo func() {\n\t\tfor s := range c {\n\t\t\tswitch s {\n\t\t\tcase syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM:\n\t\t\t\tfmt.Println(\"退出:\", s)\n\t\t\t\tExitFunc()\n\t\t\tcase syscall.SIGUSR1:\n\t\t\t\tfmt.Println(\"usr1\", s)\n\t\t\tcase syscall.SIGUSR2:\n\t\t\t\tfmt.Println(\"usr2\", s)\n\t\t\tdefault:\n\t\t\t\tfmt.Println(\"其他信号:\", s)\n\t\t\t}\n\t\t}\n\t}()\n\tfmt.Println(\"启动了程序\")\n\tsum := 0\n\tfor {\n\t\tsum++\n\t\tfmt.Println(\"休眠了:\", sum, \"秒\")\n\t\ttime.Sleep(1 * time.Second)\n\t}\n}\n\nfunc ExitFunc() {\n\tfmt.Println(\"开始退出...\")\n\tfmt.Println(\"执行清理...\")\n\tfmt.Println(\"结束退出...\")\n\tos.Exit(0)\n}\n```\n\n#### Demo3\n```go\npackage main\n\nimport (\n    \"log\"\n    \"io\"\n    \"time\"\n    \"net/http\"\n)\n\nfunc startHttpServer() *http.Server {\n    srv := &http.Server{Addr: \":8080\"}\n\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        io.WriteString(w, \"hello world\\n\")\n    })\n\n    go func() {\n        if err := srv.ListenAndServe(); err != nil {\n            // cannot panic, because this probably is an intentional close\n            log.Printf(\"Httpserver: ListenAndServe() error: %s\", err)\n        }\n    }()\n\n    // returning reference so caller can call Shutdown()\n    return srv\n}\n\nfunc main() {\n    log.Printf(\"main: starting HTTP server\")\n\n    srv := startHttpServer()\n\n    log.Printf(\"main: serving for 10 seconds\")\n\n    time.Sleep(10 * time.Second)\n\n    log.Printf(\"main: stopping HTTP server\")\n\n    // now close the server gracefully (\"shutdown\")\n    // timeout could be given instead of nil as a https://golang.org/pkg/context/\n    if err := srv.Shutdown(nil); err != nil {\n        panic(err) // failure/timeout shutting down the server gracefully\n    }\n\n    log.Printf(\"main: done. exiting\")\n}\n```\n","slug":"notes/noteOfgoExp","published":1,"updated":"2021-05-19T06:55:14.916Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9c6000nu3yq0vff92yv","content":"<h1 id=\"Go-golang笔记\"><a href=\"#Go-golang笔记\" class=\"headerlink\" title=\"Go golang笔记\"></a>Go golang笔记</h1><p><img src=\"https://wallpapercave.com/wp/wp7041189.jpg\" alt=\"golang\" title=\"power\"></p>\n<h2 id=\"非硬性结束服务\"><a href=\"#非硬性结束服务\" class=\"headerlink\" title=\"非硬性结束服务\"></a>非硬性结束服务</h2><h3 id=\"http-Server-Shutdown\"><a href=\"#http-Server-Shutdown\" class=\"headerlink\" title=\"http.Server.Shutdown\"></a>http.Server.Shutdown</h3><p><code>http.Server</code>结构体有一个终止服务的方法<code>Shutdown</code></p>\n<ol>\n<li>首先关闭所有开启的监听器</li>\n<li>关闭所有闲置连接</li>\n<li>等待活跃的连接均闲置了才终止服务<h4 id=\"长链接\"><a href=\"#长链接\" class=\"headerlink\" title=\"长链接\"></a>长链接</h4>对诸如WebSocket等的长连接，Shutdown不会尝试关闭也不会等待这些连接。若需要，需调用者分开额外处理（诸如通知诸长连接或等待它们关闭，使用RegisterOnShutdown注册终止通知函数）</li>\n</ol>\n<h3 id=\"signal-Notify\"><a href=\"#signal-Notify\" class=\"headerlink\" title=\"signal.Notify\"></a>signal.Notify</h3><p>可指定信号类型/<code>all incoming signals will be relayed to c</code></p>\n<h3 id=\"综上\"><a href=\"#综上\" class=\"headerlink\" title=\"综上\"></a>综上</h3><h4 id=\"Demo1\"><a href=\"#Demo1\" class=\"headerlink\" title=\"Demo1\"></a>Demo1</h4><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    srv := http.Server&#123;</span><br><span class=\"line\">        Addr:    *addr,</span><br><span class=\"line\">        Handler: handler,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// make sure idle connections returned</span></span><br><span class=\"line\">    processed := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">struct</span>&#123;&#125;)</span><br><span class=\"line\">    <span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        c := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> os.Signal, <span class=\"number\">1</span>)</span><br><span class=\"line\">        signal.Notify(c, os.Interrupt)</span><br><span class=\"line\">        &lt;-c</span><br><span class=\"line\"></span><br><span class=\"line\">        ctx, cancel := context.WithTimeout(context.Background(), <span class=\"number\">3</span>*time.Second)</span><br><span class=\"line\">        <span class=\"keyword\">defer</span> cancel()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> err := srv.Shutdown(ctx); <span class=\"literal\">nil</span> != err &#123;</span><br><span class=\"line\">            log.Fatalf(<span class=\"string\">&quot;server shutdown failed, err: %v\\n&quot;</span>, err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        log.Println(<span class=\"string\">&quot;server gracefully shutdown&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">close</span>(processed)</span><br><span class=\"line\">    &#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// serve</span></span><br><span class=\"line\">    err := srv.ListenAndServe()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> http.ErrServerClosed != err &#123;</span><br><span class=\"line\">        log.Fatalf(<span class=\"string\">&quot;server not gracefully shutdown, err :%v\\n&quot;</span>, err)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// waiting for goroutine above processed</span></span><br><span class=\"line\">    &lt;-processed</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Demo2\"><a href=\"#Demo2\" class=\"headerlink\" title=\"Demo2\"></a>Demo2</h4><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\tc := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> os.Signal)</span><br><span class=\"line\">\t<span class=\"comment\">// 监听信号</span></span><br><span class=\"line\">\tsignal.Notify(c, syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT, syscall.SIGUSR1, syscall.SIGUSR2)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> s := <span class=\"keyword\">range</span> c &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">switch</span> s &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM:</span><br><span class=\"line\">\t\t\t\tfmt.Println(<span class=\"string\">&quot;退出:&quot;</span>, s)</span><br><span class=\"line\">\t\t\t\tExitFunc()</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> syscall.SIGUSR1:</span><br><span class=\"line\">\t\t\t\tfmt.Println(<span class=\"string\">&quot;usr1&quot;</span>, s)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> syscall.SIGUSR2:</span><br><span class=\"line\">\t\t\t\tfmt.Println(<span class=\"string\">&quot;usr2&quot;</span>, s)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">default</span>:</span><br><span class=\"line\">\t\t\t\tfmt.Println(<span class=\"string\">&quot;其他信号:&quot;</span>, s)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\">\tfmt.Println(<span class=\"string\">&quot;启动了程序&quot;</span>)</span><br><span class=\"line\">\tsum := <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\tsum++</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">&quot;休眠了:&quot;</span>, sum, <span class=\"string\">&quot;秒&quot;</span>)</span><br><span class=\"line\">\t\ttime.Sleep(<span class=\"number\">1</span> * time.Second)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">ExitFunc</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\tfmt.Println(<span class=\"string\">&quot;开始退出...&quot;</span>)</span><br><span class=\"line\">\tfmt.Println(<span class=\"string\">&quot;执行清理...&quot;</span>)</span><br><span class=\"line\">\tfmt.Println(<span class=\"string\">&quot;结束退出...&quot;</span>)</span><br><span class=\"line\">\tos.Exit(<span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Demo3\"><a href=\"#Demo3\" class=\"headerlink\" title=\"Demo3\"></a>Demo3</h4><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">    <span class=\"string\">&quot;log&quot;</span></span><br><span class=\"line\">    <span class=\"string\">&quot;io&quot;</span></span><br><span class=\"line\">    <span class=\"string\">&quot;time&quot;</span></span><br><span class=\"line\">    <span class=\"string\">&quot;net/http&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">startHttpServer</span><span class=\"params\">()</span> *<span class=\"title\">http</span>.<span class=\"title\">Server</span></span> &#123;</span><br><span class=\"line\">    srv := &amp;http.Server&#123;Addr: <span class=\"string\">&quot;:8080&quot;</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    http.HandleFunc(<span class=\"string\">&quot;/&quot;</span>, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class=\"line\">        io.WriteString(w, <span class=\"string\">&quot;hello world\\n&quot;</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> err := srv.ListenAndServe(); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// cannot panic, because this probably is an intentional close</span></span><br><span class=\"line\">            log.Printf(<span class=\"string\">&quot;Httpserver: ListenAndServe() error: %s&quot;</span>, err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// returning reference so caller can call Shutdown()</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> srv</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    log.Printf(<span class=\"string\">&quot;main: starting HTTP server&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    srv := startHttpServer()</span><br><span class=\"line\"></span><br><span class=\"line\">    log.Printf(<span class=\"string\">&quot;main: serving for 10 seconds&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    time.Sleep(<span class=\"number\">10</span> * time.Second)</span><br><span class=\"line\"></span><br><span class=\"line\">    log.Printf(<span class=\"string\">&quot;main: stopping HTTP server&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// now close the server gracefully (&quot;shutdown&quot;)</span></span><br><span class=\"line\">    <span class=\"comment\">// timeout could be given instead of nil as a https://golang.org/pkg/context/</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> err := srv.Shutdown(<span class=\"literal\">nil</span>); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">panic</span>(err) <span class=\"comment\">// failure/timeout shutting down the server gracefully</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    log.Printf(<span class=\"string\">&quot;main: done. exiting&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Go-golang笔记\"><a href=\"#Go-golang笔记\" class=\"headerlink\" title=\"Go golang笔记\"></a>Go golang笔记</h1><p><img src=\"https://wallpapercave.com/wp/wp7041189.jpg\" alt=\"golang\" title=\"power\"></p>\n<h2 id=\"非硬性结束服务\"><a href=\"#非硬性结束服务\" class=\"headerlink\" title=\"非硬性结束服务\"></a>非硬性结束服务</h2><h3 id=\"http-Server-Shutdown\"><a href=\"#http-Server-Shutdown\" class=\"headerlink\" title=\"http.Server.Shutdown\"></a>http.Server.Shutdown</h3><p><code>http.Server</code>结构体有一个终止服务的方法<code>Shutdown</code></p>\n<ol>\n<li>首先关闭所有开启的监听器</li>\n<li>关闭所有闲置连接</li>\n<li>等待活跃的连接均闲置了才终止服务<h4 id=\"长链接\"><a href=\"#长链接\" class=\"headerlink\" title=\"长链接\"></a>长链接</h4>对诸如WebSocket等的长连接，Shutdown不会尝试关闭也不会等待这些连接。若需要，需调用者分开额外处理（诸如通知诸长连接或等待它们关闭，使用RegisterOnShutdown注册终止通知函数）</li>\n</ol>\n<h3 id=\"signal-Notify\"><a href=\"#signal-Notify\" class=\"headerlink\" title=\"signal.Notify\"></a>signal.Notify</h3><p>可指定信号类型/<code>all incoming signals will be relayed to c</code></p>\n<h3 id=\"综上\"><a href=\"#综上\" class=\"headerlink\" title=\"综上\"></a>综上</h3><h4 id=\"Demo1\"><a href=\"#Demo1\" class=\"headerlink\" title=\"Demo1\"></a>Demo1</h4><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    srv := http.Server&#123;</span><br><span class=\"line\">        Addr:    *addr,</span><br><span class=\"line\">        Handler: handler,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// make sure idle connections returned</span></span><br><span class=\"line\">    processed := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">struct</span>&#123;&#125;)</span><br><span class=\"line\">    <span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        c := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> os.Signal, <span class=\"number\">1</span>)</span><br><span class=\"line\">        signal.Notify(c, os.Interrupt)</span><br><span class=\"line\">        &lt;-c</span><br><span class=\"line\"></span><br><span class=\"line\">        ctx, cancel := context.WithTimeout(context.Background(), <span class=\"number\">3</span>*time.Second)</span><br><span class=\"line\">        <span class=\"keyword\">defer</span> cancel()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> err := srv.Shutdown(ctx); <span class=\"literal\">nil</span> != err &#123;</span><br><span class=\"line\">            log.Fatalf(<span class=\"string\">&quot;server shutdown failed, err: %v\\n&quot;</span>, err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        log.Println(<span class=\"string\">&quot;server gracefully shutdown&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">close</span>(processed)</span><br><span class=\"line\">    &#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// serve</span></span><br><span class=\"line\">    err := srv.ListenAndServe()</span><br><span class=\"line\">    <span class=\"keyword\">if</span> http.ErrServerClosed != err &#123;</span><br><span class=\"line\">        log.Fatalf(<span class=\"string\">&quot;server not gracefully shutdown, err :%v\\n&quot;</span>, err)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// waiting for goroutine above processed</span></span><br><span class=\"line\">    &lt;-processed</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Demo2\"><a href=\"#Demo2\" class=\"headerlink\" title=\"Demo2\"></a>Demo2</h4><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\tc := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> os.Signal)</span><br><span class=\"line\">\t<span class=\"comment\">// 监听信号</span></span><br><span class=\"line\">\tsignal.Notify(c, syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT, syscall.SIGUSR1, syscall.SIGUSR2)</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> s := <span class=\"keyword\">range</span> c &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">switch</span> s &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM:</span><br><span class=\"line\">\t\t\t\tfmt.Println(<span class=\"string\">&quot;退出:&quot;</span>, s)</span><br><span class=\"line\">\t\t\t\tExitFunc()</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> syscall.SIGUSR1:</span><br><span class=\"line\">\t\t\t\tfmt.Println(<span class=\"string\">&quot;usr1&quot;</span>, s)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> syscall.SIGUSR2:</span><br><span class=\"line\">\t\t\t\tfmt.Println(<span class=\"string\">&quot;usr2&quot;</span>, s)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">default</span>:</span><br><span class=\"line\">\t\t\t\tfmt.Println(<span class=\"string\">&quot;其他信号:&quot;</span>, s)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;()</span><br><span class=\"line\">\tfmt.Println(<span class=\"string\">&quot;启动了程序&quot;</span>)</span><br><span class=\"line\">\tsum := <span class=\"number\">0</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> &#123;</span><br><span class=\"line\">\t\tsum++</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">&quot;休眠了:&quot;</span>, sum, <span class=\"string\">&quot;秒&quot;</span>)</span><br><span class=\"line\">\t\ttime.Sleep(<span class=\"number\">1</span> * time.Second)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">ExitFunc</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\tfmt.Println(<span class=\"string\">&quot;开始退出...&quot;</span>)</span><br><span class=\"line\">\tfmt.Println(<span class=\"string\">&quot;执行清理...&quot;</span>)</span><br><span class=\"line\">\tfmt.Println(<span class=\"string\">&quot;结束退出...&quot;</span>)</span><br><span class=\"line\">\tos.Exit(<span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Demo3\"><a href=\"#Demo3\" class=\"headerlink\" title=\"Demo3\"></a>Demo3</h4><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">    <span class=\"string\">&quot;log&quot;</span></span><br><span class=\"line\">    <span class=\"string\">&quot;io&quot;</span></span><br><span class=\"line\">    <span class=\"string\">&quot;time&quot;</span></span><br><span class=\"line\">    <span class=\"string\">&quot;net/http&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">startHttpServer</span><span class=\"params\">()</span> *<span class=\"title\">http</span>.<span class=\"title\">Server</span></span> &#123;</span><br><span class=\"line\">    srv := &amp;http.Server&#123;Addr: <span class=\"string\">&quot;:8080&quot;</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    http.HandleFunc(<span class=\"string\">&quot;/&quot;</span>, <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class=\"line\">        io.WriteString(w, <span class=\"string\">&quot;hello world\\n&quot;</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">go</span> <span class=\"function\"><span class=\"keyword\">func</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> err := srv.ListenAndServe(); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// cannot panic, because this probably is an intentional close</span></span><br><span class=\"line\">            log.Printf(<span class=\"string\">&quot;Httpserver: ListenAndServe() error: %s&quot;</span>, err)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// returning reference so caller can call Shutdown()</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> srv</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    log.Printf(<span class=\"string\">&quot;main: starting HTTP server&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    srv := startHttpServer()</span><br><span class=\"line\"></span><br><span class=\"line\">    log.Printf(<span class=\"string\">&quot;main: serving for 10 seconds&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    time.Sleep(<span class=\"number\">10</span> * time.Second)</span><br><span class=\"line\"></span><br><span class=\"line\">    log.Printf(<span class=\"string\">&quot;main: stopping HTTP server&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// now close the server gracefully (&quot;shutdown&quot;)</span></span><br><span class=\"line\">    <span class=\"comment\">// timeout could be given instead of nil as a https://golang.org/pkg/context/</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> err := srv.Shutdown(<span class=\"literal\">nil</span>); err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">panic</span>(err) <span class=\"comment\">// failure/timeout shutting down the server gracefully</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    log.Printf(<span class=\"string\">&quot;main: done. exiting&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"Golang不确定笔记","date":"2018-05-15T02:18:26.000Z","_content":"# Go golang不确定笔记\n![golang](https://wallpapercave.com/wp/wp7041189.jpg \"tmp\")\n\n先贴一个客观的教程文档网站<http://www.runoob.com/go/go-slice.html>\n\n## 并发 Channel\n使用关键字`go`开启`goroutine`\n轻量级线程\n```go\ngo fun_name(paras_list)\n\n# eg: go f(x, y, z)\n```\n[代码](https://www.runoob.com/go/go-concurrent.html)\n```go\npackage main\n\nimport (\n        \"fmt\"\n        \"time\"\n)\n\nfunc say(s string) {\n        for i := 0; i < 5; i++ {\n                time.Sleep(100 * time.Millisecond)\n                fmt.Println(s)\n        }\n}\n\nfunc main() {\n        go say(\"world\")\n        say(\"hello\")\n}\n```\n### Channel\n用于传递数据的数据结构\n可用于两个`goroutine`之间传递指定类型值，同步和通讯\n`<-` 指定通道方向(发送or接受)，未指定则双向通道\n\n#### 声明通道\n使用`chan`关键字, 在使用之前，需先创建.\n```go\nch := make(chan int)\n```\n示例\n```go\npackage main\nimport \"fmt\"\n\nfunc sum(s []int, c chan int) {\n        sum := 0\n        for _, v := range s {\n                sum += v\n        }\n        c <- sum // 把 sum 发送到通道 c\n}\n\nfunc main() {\n        s := []int{7, 2, 8, -9, 4, 0}\n\n        c := make(chan int)\n        go sum(s[:len(s)/2], c)\n        go sum(s[len(s)/2:], c)\n        x, y := <-c, <-c // 从通道 c 中接收\n\n        fmt.Println(x, y, x+y)\n}\n```\n#### Cache\n在创建通道时可创建缓冲区，做压入存储\n```go\nch := make(chan int, 100)   // cache size\n```\n```go\npackage main\nimport \"fmt\"\n\nfunc main() {\n    // 这里我们定义了一个可以存储整数类型的带缓冲通道\n    // 缓冲区大小为2\n    ch := make(chan int, 2)\n\n    // 因为 ch 是带缓冲的通道，我们可以同时发送两个数据\n    // 而不用立刻需要去同步读取数据\n    ch <- 1\n    ch <- 2\n\n    // 获取这两个数据\n    fmt.Println(<-ch)\n    fmt.Println(<-ch)\n}\n```\n\n\n## Vim 高亮\nemmmm，偶尔会有不支持Go高亮的情况\n所以，步骤如下：\n```shell\ncd ~\nmkdir .vim\ncd .vim\nmkdir autoload  plugged\ncd plugged\ngit clone https://github.com/fatih/vim-go vim-go\ncd autoload\nwget https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n```\n配置 `.vimrc`\n```\ncat ~/.vimrc\n```\nset shiftwidth=4 softtabstop=4 expandtab\ncall plug#begin()\nPlug 'fatih/vim-go', { 'do': ':GoInstallBinaries' }\ncall plug#end()\nlet g:go_version_warning = 0\nover~!\n\n### 函数定义\n```go\nfunc function_name([参数列表])[返回类型]{\n    balabala\n}\n```\n如：\n```go\nfunc Divide(varDividee int, varDivider int) (result int, errorMsg string) {\n    if varDivider == 0 {\n        dData := DivideError{\n            dividee: varDividee,\n            divider: varDivider,\n    }\n    errorMsg = dData.Error()\n    return\n    } else {\n        return varDividee / varDivider, \"\"\n    }\n}\n```\n### 接口\n```go\npackage main\nimport (\n    \"fmt\"\n)\n# 或者 直接 import \"fmt\"\ntype Phone interface {\n    call()\n    }\ntype NokiaPhone struct {\n}\nfunc (nokiaPhone NokiaPhone) call() {\n    fmt.Println(\"I am Nokia, I can call you!\")\n}\ntype IPhone struct {\n}\nfunc (iPhone IPhone) call() {\n    fmt.Println(\"I am iPhone, I can call you!\")\n}\nfunc main() {\n    var phone Phone\n    phone = new(NokiaPhone)\n    phone.call()\n    phone = new(IPhone)\n    phone.call()\n}\n```\n### 错误\n```go\npackage main\nimport (\n    \"fmt\"\n)\n// 定义一个 DivideError 结构\ntype DivideError struct {\n    dividee int\n    divider int\n}\n// 实现     `error` 接口\nfunc (de *DivideError) Error() string {\n// 以上函数中，取结构体地址是（等同于面向对象实例化对象吧，然后下方可以\n//  de.使用.的方式去调取结构体中定义的某变量）\n//错误Error()是调用接口中的函数，制定返回类型为string\n    strFormat := `\n    Cannot proceed, the divider is zero.\n    dividee: %d\n    divider: 0\n`\n    return fmt.Sprintf(strFormat, de.dividee)\n}\n// 定义 `int` 类型除法运算的函数\nfunc Divide(varDividee int, varDivider int) (result int, errorMsg string) {\n    if varDivider == 0 {\n        dData := DivideError{\n            dividee: varDividee,\n            divider: varDivider,\n        }\n        errorMsg = dData.Error()\n        return\n    } else {\n        return varDividee / varDivider, \"\"\n    }\n}\nfunc main() {\n\n    // 正常情况\n    if result, errorMsg := Divide(100, 10); errorMsg == \"\" {\n        fmt.Println(\"100/10 = \", result)\n    }\n    // 当被除数为零的时候会返回错误信息\n    if _, errorMsg := Divide(100, 0); errorMsg != \"\" {\n            fmt.Println(\"errorMsg is: \", errorMsg)  \n    }\n}\n```\n\n## 以上总结\n函数定义真是…   也或许刚开始接触太多。也不知道这么设计的目的\n其中 功能重写见d.Data.Error。先是将d.Data定义为结构体，然后再去调用结构体下的Error，分明结构体里并没有定义，所以下面的那个函数定然是将Error,与DicideError连接的函数。 \n\n所以Go并没有类与对象一说吧… \n\n生动点来说那个函数（`func (de *DivideError) Error() string {...}`）的定义就好像是在强行给这个地址的<font color=pink>结构体</font>中<font color=yellow>塞进去一个执行函数</font>。 一个言简意骇的<font color=green>对象</font>实现方法\n\n## go的循环\n- golang 只有for  while==for\n- golang 中没有小括号包裹, 只需要用{}分隔作用域就可以\n\nfor 可以有\n1. for A;B;C {}\n2. for ;B; {}\n3. for {}\n\n## go的switch\n- 每个case自动break\n- fallthrough 显式声明可以继续执行下一个case\n- case 无需常量\n- `switch {case}` 可做 if-else 用\n\n## go的指针\ngo的指针 没有`指针运算`.","source":"_posts/notes/noteOfgolang.md","raw":"---\ntitle: Golang不确定笔记\ndate: 2018-05-15 10:18:26\ncategories: [note, golang, learning]\ntags: [golang, learning]\n---\n# Go golang不确定笔记\n![golang](https://wallpapercave.com/wp/wp7041189.jpg \"tmp\")\n\n先贴一个客观的教程文档网站<http://www.runoob.com/go/go-slice.html>\n\n## 并发 Channel\n使用关键字`go`开启`goroutine`\n轻量级线程\n```go\ngo fun_name(paras_list)\n\n# eg: go f(x, y, z)\n```\n[代码](https://www.runoob.com/go/go-concurrent.html)\n```go\npackage main\n\nimport (\n        \"fmt\"\n        \"time\"\n)\n\nfunc say(s string) {\n        for i := 0; i < 5; i++ {\n                time.Sleep(100 * time.Millisecond)\n                fmt.Println(s)\n        }\n}\n\nfunc main() {\n        go say(\"world\")\n        say(\"hello\")\n}\n```\n### Channel\n用于传递数据的数据结构\n可用于两个`goroutine`之间传递指定类型值，同步和通讯\n`<-` 指定通道方向(发送or接受)，未指定则双向通道\n\n#### 声明通道\n使用`chan`关键字, 在使用之前，需先创建.\n```go\nch := make(chan int)\n```\n示例\n```go\npackage main\nimport \"fmt\"\n\nfunc sum(s []int, c chan int) {\n        sum := 0\n        for _, v := range s {\n                sum += v\n        }\n        c <- sum // 把 sum 发送到通道 c\n}\n\nfunc main() {\n        s := []int{7, 2, 8, -9, 4, 0}\n\n        c := make(chan int)\n        go sum(s[:len(s)/2], c)\n        go sum(s[len(s)/2:], c)\n        x, y := <-c, <-c // 从通道 c 中接收\n\n        fmt.Println(x, y, x+y)\n}\n```\n#### Cache\n在创建通道时可创建缓冲区，做压入存储\n```go\nch := make(chan int, 100)   // cache size\n```\n```go\npackage main\nimport \"fmt\"\n\nfunc main() {\n    // 这里我们定义了一个可以存储整数类型的带缓冲通道\n    // 缓冲区大小为2\n    ch := make(chan int, 2)\n\n    // 因为 ch 是带缓冲的通道，我们可以同时发送两个数据\n    // 而不用立刻需要去同步读取数据\n    ch <- 1\n    ch <- 2\n\n    // 获取这两个数据\n    fmt.Println(<-ch)\n    fmt.Println(<-ch)\n}\n```\n\n\n## Vim 高亮\nemmmm，偶尔会有不支持Go高亮的情况\n所以，步骤如下：\n```shell\ncd ~\nmkdir .vim\ncd .vim\nmkdir autoload  plugged\ncd plugged\ngit clone https://github.com/fatih/vim-go vim-go\ncd autoload\nwget https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n```\n配置 `.vimrc`\n```\ncat ~/.vimrc\n```\nset shiftwidth=4 softtabstop=4 expandtab\ncall plug#begin()\nPlug 'fatih/vim-go', { 'do': ':GoInstallBinaries' }\ncall plug#end()\nlet g:go_version_warning = 0\nover~!\n\n### 函数定义\n```go\nfunc function_name([参数列表])[返回类型]{\n    balabala\n}\n```\n如：\n```go\nfunc Divide(varDividee int, varDivider int) (result int, errorMsg string) {\n    if varDivider == 0 {\n        dData := DivideError{\n            dividee: varDividee,\n            divider: varDivider,\n    }\n    errorMsg = dData.Error()\n    return\n    } else {\n        return varDividee / varDivider, \"\"\n    }\n}\n```\n### 接口\n```go\npackage main\nimport (\n    \"fmt\"\n)\n# 或者 直接 import \"fmt\"\ntype Phone interface {\n    call()\n    }\ntype NokiaPhone struct {\n}\nfunc (nokiaPhone NokiaPhone) call() {\n    fmt.Println(\"I am Nokia, I can call you!\")\n}\ntype IPhone struct {\n}\nfunc (iPhone IPhone) call() {\n    fmt.Println(\"I am iPhone, I can call you!\")\n}\nfunc main() {\n    var phone Phone\n    phone = new(NokiaPhone)\n    phone.call()\n    phone = new(IPhone)\n    phone.call()\n}\n```\n### 错误\n```go\npackage main\nimport (\n    \"fmt\"\n)\n// 定义一个 DivideError 结构\ntype DivideError struct {\n    dividee int\n    divider int\n}\n// 实现     `error` 接口\nfunc (de *DivideError) Error() string {\n// 以上函数中，取结构体地址是（等同于面向对象实例化对象吧，然后下方可以\n//  de.使用.的方式去调取结构体中定义的某变量）\n//错误Error()是调用接口中的函数，制定返回类型为string\n    strFormat := `\n    Cannot proceed, the divider is zero.\n    dividee: %d\n    divider: 0\n`\n    return fmt.Sprintf(strFormat, de.dividee)\n}\n// 定义 `int` 类型除法运算的函数\nfunc Divide(varDividee int, varDivider int) (result int, errorMsg string) {\n    if varDivider == 0 {\n        dData := DivideError{\n            dividee: varDividee,\n            divider: varDivider,\n        }\n        errorMsg = dData.Error()\n        return\n    } else {\n        return varDividee / varDivider, \"\"\n    }\n}\nfunc main() {\n\n    // 正常情况\n    if result, errorMsg := Divide(100, 10); errorMsg == \"\" {\n        fmt.Println(\"100/10 = \", result)\n    }\n    // 当被除数为零的时候会返回错误信息\n    if _, errorMsg := Divide(100, 0); errorMsg != \"\" {\n            fmt.Println(\"errorMsg is: \", errorMsg)  \n    }\n}\n```\n\n## 以上总结\n函数定义真是…   也或许刚开始接触太多。也不知道这么设计的目的\n其中 功能重写见d.Data.Error。先是将d.Data定义为结构体，然后再去调用结构体下的Error，分明结构体里并没有定义，所以下面的那个函数定然是将Error,与DicideError连接的函数。 \n\n所以Go并没有类与对象一说吧… \n\n生动点来说那个函数（`func (de *DivideError) Error() string {...}`）的定义就好像是在强行给这个地址的<font color=pink>结构体</font>中<font color=yellow>塞进去一个执行函数</font>。 一个言简意骇的<font color=green>对象</font>实现方法\n\n## go的循环\n- golang 只有for  while==for\n- golang 中没有小括号包裹, 只需要用{}分隔作用域就可以\n\nfor 可以有\n1. for A;B;C {}\n2. for ;B; {}\n3. for {}\n\n## go的switch\n- 每个case自动break\n- fallthrough 显式声明可以继续执行下一个case\n- case 无需常量\n- `switch {case}` 可做 if-else 用\n\n## go的指针\ngo的指针 没有`指针运算`.","slug":"notes/noteOfgolang","published":1,"updated":"2021-05-23T15:10:42.731Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9cd000ru3yq7neu7i92","content":"<h1 id=\"Go-golang不确定笔记\"><a href=\"#Go-golang不确定笔记\" class=\"headerlink\" title=\"Go golang不确定笔记\"></a>Go golang不确定笔记</h1><p><img src=\"https://wallpapercave.com/wp/wp7041189.jpg\" alt=\"golang\" title=\"tmp\"></p>\n<p>先贴一个客观的教程文档网站<a href=\"http://www.runoob.com/go/go-slice.html\">http://www.runoob.com/go/go-slice.html</a></p>\n<h2 id=\"并发-Channel\"><a href=\"#并发-Channel\" class=\"headerlink\" title=\"并发 Channel\"></a>并发 Channel</h2><p>使用关键字<code>go</code>开启<code>goroutine</code><br>轻量级线程</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">go</span> fun_name(paras_list)</span><br><span class=\"line\"></span><br><span class=\"line\"># eg: <span class=\"keyword\">go</span> f(x, y, z)</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.runoob.com/go/go-concurrent.html\">代码</a></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">        <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\">        <span class=\"string\">&quot;time&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">say</span><span class=\"params\">(s <span class=\"keyword\">string</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++ &#123;</span><br><span class=\"line\">                time.Sleep(<span class=\"number\">100</span> * time.Millisecond)</span><br><span class=\"line\">                fmt.Println(s)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">go</span> say(<span class=\"string\">&quot;world&quot;</span>)</span><br><span class=\"line\">        say(<span class=\"string\">&quot;hello&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Channel\"><a href=\"#Channel\" class=\"headerlink\" title=\"Channel\"></a>Channel</h3><p>用于传递数据的数据结构<br>可用于两个<code>goroutine</code>之间传递指定类型值，同步和通讯<br><code>&lt;-</code> 指定通道方向(发送or接受)，未指定则双向通道</p>\n<h4 id=\"声明通道\"><a href=\"#声明通道\" class=\"headerlink\" title=\"声明通道\"></a>声明通道</h4><p>使用<code>chan</code>关键字, 在使用之前，需先创建.</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ch := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>)</span><br></pre></td></tr></table></figure>\n<p>示例</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">sum</span><span class=\"params\">(s []<span class=\"keyword\">int</span>, c <span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>)</span></span> &#123;</span><br><span class=\"line\">        sum := <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> _, v := <span class=\"keyword\">range</span> s &#123;</span><br><span class=\"line\">                sum += v</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        c &lt;- sum <span class=\"comment\">// 把 sum 发送到通道 c</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        s := []<span class=\"keyword\">int</span>&#123;<span class=\"number\">7</span>, <span class=\"number\">2</span>, <span class=\"number\">8</span>, <span class=\"number\">-9</span>, <span class=\"number\">4</span>, <span class=\"number\">0</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        c := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>)</span><br><span class=\"line\">        <span class=\"keyword\">go</span> sum(s[:<span class=\"built_in\">len</span>(s)/<span class=\"number\">2</span>], c)</span><br><span class=\"line\">        <span class=\"keyword\">go</span> sum(s[<span class=\"built_in\">len</span>(s)/<span class=\"number\">2</span>:], c)</span><br><span class=\"line\">        x, y := &lt;-c, &lt;-c <span class=\"comment\">// 从通道 c 中接收</span></span><br><span class=\"line\"></span><br><span class=\"line\">        fmt.Println(x, y, x+y)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"Cache\"><a href=\"#Cache\" class=\"headerlink\" title=\"Cache\"></a>Cache</h4><p>在创建通道时可创建缓冲区，做压入存储</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ch := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>, <span class=\"number\">100</span>)   <span class=\"comment\">// cache size</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 这里我们定义了一个可以存储整数类型的带缓冲通道</span></span><br><span class=\"line\">    <span class=\"comment\">// 缓冲区大小为2</span></span><br><span class=\"line\">    ch := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 因为 ch 是带缓冲的通道，我们可以同时发送两个数据</span></span><br><span class=\"line\">    <span class=\"comment\">// 而不用立刻需要去同步读取数据</span></span><br><span class=\"line\">    ch &lt;- <span class=\"number\">1</span></span><br><span class=\"line\">    ch &lt;- <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取这两个数据</span></span><br><span class=\"line\">    fmt.Println(&lt;-ch)</span><br><span class=\"line\">    fmt.Println(&lt;-ch)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"Vim-高亮\"><a href=\"#Vim-高亮\" class=\"headerlink\" title=\"Vim 高亮\"></a>Vim 高亮</h2><p>emmmm，偶尔会有不支持Go高亮的情况<br>所以，步骤如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">mkdir .vim</span><br><span class=\"line\">cd .vim</span><br><span class=\"line\">mkdir autoload  plugged</span><br><span class=\"line\">cd plugged</span><br><span class=\"line\">git clone https://github.com/fatih/vim-go vim-go</span><br><span class=\"line\">cd autoload</span><br><span class=\"line\">wget https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span><br></pre></td></tr></table></figure>\n<p>配置 <code>.vimrc</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat ~&#x2F;.vimrc</span><br></pre></td></tr></table></figure>\n<p>set shiftwidth=4 softtabstop=4 expandtab<br>call plug#begin()<br>Plug ‘fatih/vim-go’, { ‘do’: ‘:GoInstallBinaries’ }<br>call plug#end()<br>let g:go_version_warning = 0<br>over~!</p>\n<h3 id=\"函数定义\"><a href=\"#函数定义\" class=\"headerlink\" title=\"函数定义\"></a>函数定义</h3><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">function_name</span><span class=\"params\">([参数列表])</span>[返回类型]</span>&#123;</span><br><span class=\"line\">    balabala</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Divide</span><span class=\"params\">(varDividee <span class=\"keyword\">int</span>, varDivider <span class=\"keyword\">int</span>)</span> <span class=\"params\">(result <span class=\"keyword\">int</span>, errorMsg <span class=\"keyword\">string</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> varDivider == <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">        dData := DivideError&#123;</span><br><span class=\"line\">            dividee: varDividee,</span><br><span class=\"line\">            divider: varDivider,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    errorMsg = dData.Error()</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> varDividee / varDivider, <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h3><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">    <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"># 或者 直接 <span class=\"keyword\">import</span> <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">    call()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">&quot;I am Nokia, I can call you!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">&quot;I am iPhone, I can call you!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> phone Phone</span><br><span class=\"line\">    phone = <span class=\"built_in\">new</span>(NokiaPhone)</span><br><span class=\"line\">    phone.call()</span><br><span class=\"line\">    phone = <span class=\"built_in\">new</span>(IPhone)</span><br><span class=\"line\">    phone.call()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"错误\"><a href=\"#错误\" class=\"headerlink\" title=\"错误\"></a>错误</h3><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">    <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\">// 定义一个 DivideError 结构</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> DivideError <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">    dividee <span class=\"keyword\">int</span></span><br><span class=\"line\">    divider <span class=\"keyword\">int</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 实现     `error` 接口</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(de *DivideError)</span> <span class=\"title\">Error</span><span class=\"params\">()</span> <span class=\"title\">string</span></span> &#123;</span><br><span class=\"line\"><span class=\"comment\">// 以上函数中，取结构体地址是（等同于面向对象实例化对象吧，然后下方可以</span></span><br><span class=\"line\"><span class=\"comment\">//  de.使用.的方式去调取结构体中定义的某变量）</span></span><br><span class=\"line\"><span class=\"comment\">//错误Error()是调用接口中的函数，制定返回类型为string</span></span><br><span class=\"line\">    strFormat := <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    Cannot proceed, the divider is zero.</span></span><br><span class=\"line\"><span class=\"string\">    dividee: %d</span></span><br><span class=\"line\"><span class=\"string\">    divider: 0</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> fmt.Sprintf(strFormat, de.dividee)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 定义 `int` 类型除法运算的函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Divide</span><span class=\"params\">(varDividee <span class=\"keyword\">int</span>, varDivider <span class=\"keyword\">int</span>)</span> <span class=\"params\">(result <span class=\"keyword\">int</span>, errorMsg <span class=\"keyword\">string</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> varDivider == <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">        dData := DivideError&#123;</span><br><span class=\"line\">            dividee: varDividee,</span><br><span class=\"line\">            divider: varDivider,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        errorMsg = dData.Error()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> varDividee / varDivider, <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 正常情况</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> result, errorMsg := Divide(<span class=\"number\">100</span>, <span class=\"number\">10</span>); errorMsg == <span class=\"string\">&quot;&quot;</span> &#123;</span><br><span class=\"line\">        fmt.Println(<span class=\"string\">&quot;100/10 = &quot;</span>, result)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 当被除数为零的时候会返回错误信息</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> _, errorMsg := Divide(<span class=\"number\">100</span>, <span class=\"number\">0</span>); errorMsg != <span class=\"string\">&quot;&quot;</span> &#123;</span><br><span class=\"line\">            fmt.Println(<span class=\"string\">&quot;errorMsg is: &quot;</span>, errorMsg)  </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"以上总结\"><a href=\"#以上总结\" class=\"headerlink\" title=\"以上总结\"></a>以上总结</h2><p>函数定义真是…   也或许刚开始接触太多。也不知道这么设计的目的<br>其中 功能重写见d.Data.Error。先是将d.Data定义为结构体，然后再去调用结构体下的Error，分明结构体里并没有定义，所以下面的那个函数定然是将Error,与DicideError连接的函数。 </p>\n<p>所以Go并没有类与对象一说吧… </p>\n<p>生动点来说那个函数（<code>func (de *DivideError) Error() string &#123;...&#125;</code>）的定义就好像是在强行给这个地址的<font color=pink>结构体</font>中<font color=yellow>塞进去一个执行函数</font>。 一个言简意骇的<font color=green>对象</font>实现方法</p>\n<h2 id=\"go的循环\"><a href=\"#go的循环\" class=\"headerlink\" title=\"go的循环\"></a>go的循环</h2><ul>\n<li>golang 只有for  while==for</li>\n<li>golang 中没有小括号包裹, 只需要用{}分隔作用域就可以</li>\n</ul>\n<p>for 可以有</p>\n<ol>\n<li>for A;B;C {}</li>\n<li>for ;B; {}</li>\n<li>for {}</li>\n</ol>\n<h2 id=\"go的switch\"><a href=\"#go的switch\" class=\"headerlink\" title=\"go的switch\"></a>go的switch</h2><ul>\n<li>每个case自动break</li>\n<li>fallthrough 显式声明可以继续执行下一个case</li>\n<li>case 无需常量</li>\n<li><code>switch &#123;case&#125;</code> 可做 if-else 用</li>\n</ul>\n<h2 id=\"go的指针\"><a href=\"#go的指针\" class=\"headerlink\" title=\"go的指针\"></a>go的指针</h2><p>go的指针 没有<code>指针运算</code>.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Go-golang不确定笔记\"><a href=\"#Go-golang不确定笔记\" class=\"headerlink\" title=\"Go golang不确定笔记\"></a>Go golang不确定笔记</h1><p><img src=\"https://wallpapercave.com/wp/wp7041189.jpg\" alt=\"golang\" title=\"tmp\"></p>\n<p>先贴一个客观的教程文档网站<a href=\"http://www.runoob.com/go/go-slice.html\">http://www.runoob.com/go/go-slice.html</a></p>\n<h2 id=\"并发-Channel\"><a href=\"#并发-Channel\" class=\"headerlink\" title=\"并发 Channel\"></a>并发 Channel</h2><p>使用关键字<code>go</code>开启<code>goroutine</code><br>轻量级线程</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">go</span> fun_name(paras_list)</span><br><span class=\"line\"></span><br><span class=\"line\"># eg: <span class=\"keyword\">go</span> f(x, y, z)</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.runoob.com/go/go-concurrent.html\">代码</a></p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">        <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\">        <span class=\"string\">&quot;time&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">say</span><span class=\"params\">(s <span class=\"keyword\">string</span>)</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i := <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++ &#123;</span><br><span class=\"line\">                time.Sleep(<span class=\"number\">100</span> * time.Millisecond)</span><br><span class=\"line\">                fmt.Println(s)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">go</span> say(<span class=\"string\">&quot;world&quot;</span>)</span><br><span class=\"line\">        say(<span class=\"string\">&quot;hello&quot;</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Channel\"><a href=\"#Channel\" class=\"headerlink\" title=\"Channel\"></a>Channel</h3><p>用于传递数据的数据结构<br>可用于两个<code>goroutine</code>之间传递指定类型值，同步和通讯<br><code>&lt;-</code> 指定通道方向(发送or接受)，未指定则双向通道</p>\n<h4 id=\"声明通道\"><a href=\"#声明通道\" class=\"headerlink\" title=\"声明通道\"></a>声明通道</h4><p>使用<code>chan</code>关键字, 在使用之前，需先创建.</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ch := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>)</span><br></pre></td></tr></table></figure>\n<p>示例</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">sum</span><span class=\"params\">(s []<span class=\"keyword\">int</span>, c <span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>)</span></span> &#123;</span><br><span class=\"line\">        sum := <span class=\"number\">0</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> _, v := <span class=\"keyword\">range</span> s &#123;</span><br><span class=\"line\">                sum += v</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        c &lt;- sum <span class=\"comment\">// 把 sum 发送到通道 c</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        s := []<span class=\"keyword\">int</span>&#123;<span class=\"number\">7</span>, <span class=\"number\">2</span>, <span class=\"number\">8</span>, <span class=\"number\">-9</span>, <span class=\"number\">4</span>, <span class=\"number\">0</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        c := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>)</span><br><span class=\"line\">        <span class=\"keyword\">go</span> sum(s[:<span class=\"built_in\">len</span>(s)/<span class=\"number\">2</span>], c)</span><br><span class=\"line\">        <span class=\"keyword\">go</span> sum(s[<span class=\"built_in\">len</span>(s)/<span class=\"number\">2</span>:], c)</span><br><span class=\"line\">        x, y := &lt;-c, &lt;-c <span class=\"comment\">// 从通道 c 中接收</span></span><br><span class=\"line\"></span><br><span class=\"line\">        fmt.Println(x, y, x+y)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"Cache\"><a href=\"#Cache\" class=\"headerlink\" title=\"Cache\"></a>Cache</h4><p>在创建通道时可创建缓冲区，做压入存储</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ch := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>, <span class=\"number\">100</span>)   <span class=\"comment\">// cache size</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 这里我们定义了一个可以存储整数类型的带缓冲通道</span></span><br><span class=\"line\">    <span class=\"comment\">// 缓冲区大小为2</span></span><br><span class=\"line\">    ch := <span class=\"built_in\">make</span>(<span class=\"keyword\">chan</span> <span class=\"keyword\">int</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 因为 ch 是带缓冲的通道，我们可以同时发送两个数据</span></span><br><span class=\"line\">    <span class=\"comment\">// 而不用立刻需要去同步读取数据</span></span><br><span class=\"line\">    ch &lt;- <span class=\"number\">1</span></span><br><span class=\"line\">    ch &lt;- <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 获取这两个数据</span></span><br><span class=\"line\">    fmt.Println(&lt;-ch)</span><br><span class=\"line\">    fmt.Println(&lt;-ch)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"Vim-高亮\"><a href=\"#Vim-高亮\" class=\"headerlink\" title=\"Vim 高亮\"></a>Vim 高亮</h2><p>emmmm，偶尔会有不支持Go高亮的情况<br>所以，步骤如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~</span><br><span class=\"line\">mkdir .vim</span><br><span class=\"line\">cd .vim</span><br><span class=\"line\">mkdir autoload  plugged</span><br><span class=\"line\">cd plugged</span><br><span class=\"line\">git clone https://github.com/fatih/vim-go vim-go</span><br><span class=\"line\">cd autoload</span><br><span class=\"line\">wget https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span><br></pre></td></tr></table></figure>\n<p>配置 <code>.vimrc</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat ~&#x2F;.vimrc</span><br></pre></td></tr></table></figure>\n<p>set shiftwidth=4 softtabstop=4 expandtab<br>call plug#begin()<br>Plug ‘fatih/vim-go’, { ‘do’: ‘:GoInstallBinaries’ }<br>call plug#end()<br>let g:go_version_warning = 0<br>over~!</p>\n<h3 id=\"函数定义\"><a href=\"#函数定义\" class=\"headerlink\" title=\"函数定义\"></a>函数定义</h3><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">function_name</span><span class=\"params\">([参数列表])</span>[返回类型]</span>&#123;</span><br><span class=\"line\">    balabala</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如：</p>\n<figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Divide</span><span class=\"params\">(varDividee <span class=\"keyword\">int</span>, varDivider <span class=\"keyword\">int</span>)</span> <span class=\"params\">(result <span class=\"keyword\">int</span>, errorMsg <span class=\"keyword\">string</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> varDivider == <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">        dData := DivideError&#123;</span><br><span class=\"line\">            dividee: varDividee,</span><br><span class=\"line\">            divider: varDivider,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    errorMsg = dData.Error()</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> varDividee / varDivider, <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"接口\"><a href=\"#接口\" class=\"headerlink\" title=\"接口\"></a>接口</h3><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">    <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"># 或者 直接 <span class=\"keyword\">import</span> <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Phone <span class=\"keyword\">interface</span> &#123;</span><br><span class=\"line\">    call()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"keyword\">type</span> NokiaPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(nokiaPhone NokiaPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">&quot;I am Nokia, I can call you!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">type</span> IPhone <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(iPhone IPhone)</span> <span class=\"title\">call</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    fmt.Println(<span class=\"string\">&quot;I am iPhone, I can call you!&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> phone Phone</span><br><span class=\"line\">    phone = <span class=\"built_in\">new</span>(NokiaPhone)</span><br><span class=\"line\">    phone.call()</span><br><span class=\"line\">    phone = <span class=\"built_in\">new</span>(IPhone)</span><br><span class=\"line\">    phone.call()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"错误\"><a href=\"#错误\" class=\"headerlink\" title=\"错误\"></a>错误</h3><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">    <span class=\"string\">&quot;fmt&quot;</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\">// 定义一个 DivideError 结构</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> DivideError <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">    dividee <span class=\"keyword\">int</span></span><br><span class=\"line\">    divider <span class=\"keyword\">int</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 实现     `error` 接口</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"params\">(de *DivideError)</span> <span class=\"title\">Error</span><span class=\"params\">()</span> <span class=\"title\">string</span></span> &#123;</span><br><span class=\"line\"><span class=\"comment\">// 以上函数中，取结构体地址是（等同于面向对象实例化对象吧，然后下方可以</span></span><br><span class=\"line\"><span class=\"comment\">//  de.使用.的方式去调取结构体中定义的某变量）</span></span><br><span class=\"line\"><span class=\"comment\">//错误Error()是调用接口中的函数，制定返回类型为string</span></span><br><span class=\"line\">    strFormat := <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    Cannot proceed, the divider is zero.</span></span><br><span class=\"line\"><span class=\"string\">    dividee: %d</span></span><br><span class=\"line\"><span class=\"string\">    divider: 0</span></span><br><span class=\"line\"><span class=\"string\">`</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> fmt.Sprintf(strFormat, de.dividee)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 定义 `int` 类型除法运算的函数</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">Divide</span><span class=\"params\">(varDividee <span class=\"keyword\">int</span>, varDivider <span class=\"keyword\">int</span>)</span> <span class=\"params\">(result <span class=\"keyword\">int</span>, errorMsg <span class=\"keyword\">string</span>)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> varDivider == <span class=\"number\">0</span> &#123;</span><br><span class=\"line\">        dData := DivideError&#123;</span><br><span class=\"line\">            dividee: varDividee,</span><br><span class=\"line\">            divider: varDivider,</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        errorMsg = dData.Error()</span><br><span class=\"line\">        <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> varDividee / varDivider, <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 正常情况</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> result, errorMsg := Divide(<span class=\"number\">100</span>, <span class=\"number\">10</span>); errorMsg == <span class=\"string\">&quot;&quot;</span> &#123;</span><br><span class=\"line\">        fmt.Println(<span class=\"string\">&quot;100/10 = &quot;</span>, result)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 当被除数为零的时候会返回错误信息</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> _, errorMsg := Divide(<span class=\"number\">100</span>, <span class=\"number\">0</span>); errorMsg != <span class=\"string\">&quot;&quot;</span> &#123;</span><br><span class=\"line\">            fmt.Println(<span class=\"string\">&quot;errorMsg is: &quot;</span>, errorMsg)  </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"以上总结\"><a href=\"#以上总结\" class=\"headerlink\" title=\"以上总结\"></a>以上总结</h2><p>函数定义真是…   也或许刚开始接触太多。也不知道这么设计的目的<br>其中 功能重写见d.Data.Error。先是将d.Data定义为结构体，然后再去调用结构体下的Error，分明结构体里并没有定义，所以下面的那个函数定然是将Error,与DicideError连接的函数。 </p>\n<p>所以Go并没有类与对象一说吧… </p>\n<p>生动点来说那个函数（<code>func (de *DivideError) Error() string &#123;...&#125;</code>）的定义就好像是在强行给这个地址的<font color=pink>结构体</font>中<font color=yellow>塞进去一个执行函数</font>。 一个言简意骇的<font color=green>对象</font>实现方法</p>\n<h2 id=\"go的循环\"><a href=\"#go的循环\" class=\"headerlink\" title=\"go的循环\"></a>go的循环</h2><ul>\n<li>golang 只有for  while==for</li>\n<li>golang 中没有小括号包裹, 只需要用{}分隔作用域就可以</li>\n</ul>\n<p>for 可以有</p>\n<ol>\n<li>for A;B;C {}</li>\n<li>for ;B; {}</li>\n<li>for {}</li>\n</ol>\n<h2 id=\"go的switch\"><a href=\"#go的switch\" class=\"headerlink\" title=\"go的switch\"></a>go的switch</h2><ul>\n<li>每个case自动break</li>\n<li>fallthrough 显式声明可以继续执行下一个case</li>\n<li>case 无需常量</li>\n<li><code>switch &#123;case&#125;</code> 可做 if-else 用</li>\n</ul>\n<h2 id=\"go的指针\"><a href=\"#go的指针\" class=\"headerlink\" title=\"go的指针\"></a>go的指针</h2><p>go的指针 没有<code>指针运算</code>.</p>\n"},{"title":"愉快的Java(happy to learn the fuck java)","date":"2018-05-24T01:52:00.000Z","modified":"2018-06-07T11:52:00.000Z","slug":"notes/noteOfjava","_content":"author: Ian\n\n# happy to the fuck java 😅\n## <微人事> 笔记 ->    ψ(._. )>\n\n先贴[官方文档](https://github.com/lenve/vhr/wiki/1.权限数据库设计) 哦 还有[官方项目地址](https://github.com/lenve/vhr)\n\n#### 爪哇方法定义:\n```java\n修饰符  返回值类型  方法名(参数类型  参数名){\n    方法体;\n\treturn 返回值;\n}\n\n# 示个例\npublic boolean NiHou(int num){\n\tint a = num;\n\treturn turn;\n}\n\n// `boolean` 处 可为\npublic Collection<? extends GrantedAuthority> getAuthorities(){\n\tList<GrantedAuthority> authorities = new ArrayList<>();\n\treturn authorities;\n}\n// 表泛型中可以是的`GrantedAuthority`所有子类\n```\n#### 爪哇抽象方法(即Python父类中直接`pass`的函数…)\n<font color=#ff0000>`abstract`</font>\n1. 包含抽象方法必须得是抽象类\n2. 任何子类必须重写父类抽象方法，或者声明自身为抽象类\n```java \npublic abstract class Employee\n{\n   private String name;\n   private int number;\n   \n   public abstract double computePay();\n   \n   //其余\n}\n\n```\n\n#### 爪哇接口\n<font color=#ff0000>`interface`</font>, <font color=#0000ff>`implements`</font>\n```java \n[可见度] interface 接口名称 [extends 其他的类名] {\n    // 声明变量\n    // 抽象方法\n}\n\n# 示个例\n/* 文件名 : NameOfInterface.java */\npublic interface NameOfInterface\n{\n   //任何类型 final, static 字段\n   //抽象方法\n}\nInterface关键字用来声明一个接口。\n```\n\n\n#### 爪哇抽象类\n<font color=#ff0000>`abstract class`</font><font color=#0000ff>`extends`</font>\n1. 不能直接实例化\n2. 只能被继承后实例\n```java\npublic abstract class Employee\n{\n   private String name;\n   private String address;\n   private int number;\n   public Employee(String name, String address, int number)\n   {\n      System.out.println(\"Constructing an Employee\");\n      this.name = name;\n      this.address = address;\n      this.number = number;\n   }\n   //…… 等方法\n   public int getNumber()\n   {\n     return number;\n   }\n}\n\n\n/* 文件名 : Salary.java */    \n// 用于继承上述东西\npublic class Salary extends Employee\n{\n   private double salary; //Annual salary\n   public Salary(String name, String address, int number, double\n      salary)\n   {\n       super(name, address, number);\n       setSalary(salary);\n   }\n   public void mailCheck()\n   {\n       System.out.println(\"Within mailCheck of Salary class \");\n       System.out.println(\"Mailing check to \" + getName()\n       + \" with salary \" + salary);\n   }\n   public double getSalary()\n   {\n       return salary;\n   }\n   public void setSalary(double newSalary)\n   {\n       if(newSalary >= 0.0)\n       {\n          salary = newSalary;\n       }\n   }\n   public double computePay()\n   {\n      System.out.println(\"Computing salary pay for \" + getName());\n      return salary/52;\n   }\n}\n\n\n/* 文件名 : AbstractDemo.java */\n// 用于实现继承类   \npublic class AbstractDemo\n{\n   public static void main(String [] args)\n   {\n      Salary s = new Salary(\"Mohd Mohtashim\", \"Ambehta, UP\", 3, 3600.00);\n      Employee e = new Salary(\"John Adams\", \"Boston, MA\", 2, 2400.00);\n \n      System.out.println(\"Call mailCheck using Salary reference --\");\n      s.mailCheck();\n \n      System.out.println(\"\\n Call mailCheck using Employee reference--\");\n      e.mailCheck();\n    }\n}\n\n```\n#### 爪哇类\n<font color=#ff0000>`class`</font>, <font color=#0000ff>`extends`</font>\n```java \n\n```\n\n\n\n\n---\n\n---\n# Maven 项目标准目录结构\nstr\n|\tmain\n\t|\tbin\t脚本库\n    |\tjava Java源代码文件\n    |\tresources 资源库，会自动复制到classes目录中\n    |\tfilters 资源过滤文件\n    |\tassembly 组建的描述配置（如何打包）\n    |\tconfig 配置文件\n    |\twebapp web应用的目录。WEB-INF、css、js等\n|\ttest\n\t|\tjava 单元测试Java源代码文件\n    |\tresorces 测试需要用到的资源库\n    |\tfilters 测试资源过滤库\n    |\tsite Site（一些文档）\n|\ttarget\n\tLICENSE.txt Project's license\n    README.txt Project's readme\n    \n工程根目录下就只有src和target两个目录\ntarget是有存放项目构建后的文件和目录，jar包、war包、编译的class文件等。\ntarget里的所有内容都是maven构建的时候生成的\n\n顶级目录工程的描述文件`pom.xml`\n\n\n摘自: <https://blog.csdn.net/lengyue_wy/article/details/6718637>\n    \n\n## src \n### java\n***Bean***: 扮演应用程序素材的角色（其中放置了各种自定义类 如：Hr、Role、Employee、menu等数据类型）（作为`service`的<font color=#00cfaf>模型库</font>）\n***common***: 常用方法 （如字符串转换、邮件、几个查询） \n***config***: 看不懂的设置\n***controller***: 动作执行，即受到什么请求执行什么动作。 但是我打了断点鲜有进来的。所以具体实现过程还是不清楚。 另外其url地址与网页真正输入地址有全拼简写的区别，哪里有指定也没找到还。（并且寥寥草草一个就处理完了，所以肯定是简写了💩）\n***exception***: 异常处理\n***mapper***: 虽不觉然明厉的东西集合_20180525_其中定义了诸多做实事的接口，在`.java`文件中画饼，在`.xml`中实现，另外昨天在查资料时，还了解到有人要将`.java`与`.xml`分开来存放，解决方法是将`.xml`放在`resources`文件夹中，仿照在`java`文件夹中的路径，依瓢葫芦画😄的建立相同路径，如此一来在coding阶段看起来是分开的，但在building阶段编译器就是看作在同一目录下了——由此引发了虽然拆开了他们的人，却没有拆散他们的心的哲学论题😰(作为`service`的<font color=#bf00cf>方法库</font>)\n***service***: 动作逻辑服务，和controller中类似，不过详细不少（作为）\n\n---\n\n### resources\n***ftl***: emm……\n***static***: 静态资源\n***js***: emm…\n***application.properties***: 各项配置\n***mybatis-config.xml***: MySQL数据库配置\n\n\n### Mybatis\n##### 头\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>  \n<!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"  \n\"http://mybatis.org/dtd/mybatis-3-config.dtd\">  \n<configuration>  \n  \n</configuration>\n```\n##### configuration中的配置信息\n详解： <https://blog.csdn.net/yqynsmile/article/details/52807815>\n```java\n// 别名，假名，代称\n<typeAliases>  \n<typeAlias alias=\"Student\" type=\"com.mybatis3.domain.Student\" />  \n</typeAliases>  \n\n// 声明环境变量\n<environments default=\"development\">  \n<environment id=\"development\">  \n\n/* 声明数据源，数据源的类型有NOPOOLED ，POOLED ，还有JIDN.\n 在数据量少的话用ONPOOLED，测试和开发过程一般用POOLED，实际运行使用JIDN */\n<dataSource type=\"POOLED\">  \n\n// <mappers>：声明我们定义的一个个Mapper类，或者说是关联\n<mapper resource=\"com/mybatis3/mappers/StudentMapper.xml\" /> \n\n// <property>：jdbc连接的一些属性\n<property name=\"driver\" value=\"com.mysql.jdbc.Driver\" />  \n<property name=\"url\" value=\"jdbc:mysql://localhost:3306/test\" />  \n<property name=\"username\" value=\"root\" />  \n<property name=\"password\" value=\"admin\" />  \n/* 这些东西貌似也可以写在其他地方：application中\n <property name=\"url\">  \n         <value>jdbc:mysql://localhost:3306/springmybaitis?useUnicode=true&amp;characterEncoding=UTF-8</value>  \n        <!--springmybaitis是我的数据库  -->\n     </property>  或 spring.datasource.url=jdbc:mysql://127.0.0.1:3306/vhr?useUnicode=true&characterEncoding=UTF-8    两种写法而已 */\n\n// <mapper>：声明Mapper的路径\n\n\n// 默认setting配置\n<setting name=\"cacheEnabled\" value=\"true\" />//是否使用缓存  \n<setting name=\"lazyLoadingEnabled\" value=\"true\" />//是否是懒记载  \n<setting name=\"multipleResultSetsEnabled\" value=\"true\" />  \n<setting name=\"useColumnLabel\" value=\"true\" />  \n<setting name=\"useGeneratedKeys\" value=\"false\" />  \n<setting name=\"autoMappingBehavior\" value=\"PARTIAL\" />  \n<setting name=\"defaultExecutorType\" value=\"SIMPLE\" />  \n<setting name=\"defaultStatementTimeout\" value=\"25000\" />  \n<setting name=\"safeRowBoundsEnabled\" value=\"false\" />  \n<setting name=\"mapUnderscoreToCamelCase\" value=\"false\" />  \n<setting name=\"localCacheScope\" value=\"SESSION\" />  \n<setting name=\"jdbcTypeForNull\" value=\"OTHER\" />  \n<setting name=\"lazyLoadTriggerMethods\" value=\"equals,clone,hashCode ,toString\" />  \n```\n还有 `<Settings>`:声明一些全局变量、`<typeHandlers>`: 自定义我们的传入参数类型处理器、`<properties>`: 声明属性文件的key和value，但使用.properties文件将会被覆盖。\n\n***注***: 在要使用指定日志工具时，需要在`<Settings>`里指定`<setting name=\"logImpl\" value=\"LOG4J\"/>`\n\n\n\n\n\n\n\n#### equals 与 ==\n`equals` 对比两者是否类型一致，内容一致\n`==`\t则会由于 不同对象而`False`\n```java \nString str1=new String(\"hello\");\nString str2=new String(\"hello\");\n\nstr1==str2   输出：false,因为不同对象\nint1.equals(int2)   输出：TRUE\n\n// 无论 整形 or 字符串等\n```\n\n## 爪洼调用Python \n爪哇语有个通用调用方式，就是通过`Runtime`，也就是通过命令行执行，然后通过`BufferedReader`捕获命令行（内存）中的信息。但数据传输只能通过字符串，另外，python回传数据也只能通过`print`来回传，所以……基本没啥用.\n","source":"_posts/notes/noteOfjava.md","raw":"---\ntitle: 愉快的Java(happy to learn the fuck java)\ndate: 2018-5-24 09:52:00\nmodified: 2018-6-7 19:52:00\ncategories: [note, java, learning]\ntags: java, springboot, mybatis, maven, learning\nslug: notesJava\n---\nauthor: Ian\n\n# happy to the fuck java 😅\n## <微人事> 笔记 ->    ψ(._. )>\n\n先贴[官方文档](https://github.com/lenve/vhr/wiki/1.权限数据库设计) 哦 还有[官方项目地址](https://github.com/lenve/vhr)\n\n#### 爪哇方法定义:\n```java\n修饰符  返回值类型  方法名(参数类型  参数名){\n    方法体;\n\treturn 返回值;\n}\n\n# 示个例\npublic boolean NiHou(int num){\n\tint a = num;\n\treturn turn;\n}\n\n// `boolean` 处 可为\npublic Collection<? extends GrantedAuthority> getAuthorities(){\n\tList<GrantedAuthority> authorities = new ArrayList<>();\n\treturn authorities;\n}\n// 表泛型中可以是的`GrantedAuthority`所有子类\n```\n#### 爪哇抽象方法(即Python父类中直接`pass`的函数…)\n<font color=#ff0000>`abstract`</font>\n1. 包含抽象方法必须得是抽象类\n2. 任何子类必须重写父类抽象方法，或者声明自身为抽象类\n```java \npublic abstract class Employee\n{\n   private String name;\n   private int number;\n   \n   public abstract double computePay();\n   \n   //其余\n}\n\n```\n\n#### 爪哇接口\n<font color=#ff0000>`interface`</font>, <font color=#0000ff>`implements`</font>\n```java \n[可见度] interface 接口名称 [extends 其他的类名] {\n    // 声明变量\n    // 抽象方法\n}\n\n# 示个例\n/* 文件名 : NameOfInterface.java */\npublic interface NameOfInterface\n{\n   //任何类型 final, static 字段\n   //抽象方法\n}\nInterface关键字用来声明一个接口。\n```\n\n\n#### 爪哇抽象类\n<font color=#ff0000>`abstract class`</font><font color=#0000ff>`extends`</font>\n1. 不能直接实例化\n2. 只能被继承后实例\n```java\npublic abstract class Employee\n{\n   private String name;\n   private String address;\n   private int number;\n   public Employee(String name, String address, int number)\n   {\n      System.out.println(\"Constructing an Employee\");\n      this.name = name;\n      this.address = address;\n      this.number = number;\n   }\n   //…… 等方法\n   public int getNumber()\n   {\n     return number;\n   }\n}\n\n\n/* 文件名 : Salary.java */    \n// 用于继承上述东西\npublic class Salary extends Employee\n{\n   private double salary; //Annual salary\n   public Salary(String name, String address, int number, double\n      salary)\n   {\n       super(name, address, number);\n       setSalary(salary);\n   }\n   public void mailCheck()\n   {\n       System.out.println(\"Within mailCheck of Salary class \");\n       System.out.println(\"Mailing check to \" + getName()\n       + \" with salary \" + salary);\n   }\n   public double getSalary()\n   {\n       return salary;\n   }\n   public void setSalary(double newSalary)\n   {\n       if(newSalary >= 0.0)\n       {\n          salary = newSalary;\n       }\n   }\n   public double computePay()\n   {\n      System.out.println(\"Computing salary pay for \" + getName());\n      return salary/52;\n   }\n}\n\n\n/* 文件名 : AbstractDemo.java */\n// 用于实现继承类   \npublic class AbstractDemo\n{\n   public static void main(String [] args)\n   {\n      Salary s = new Salary(\"Mohd Mohtashim\", \"Ambehta, UP\", 3, 3600.00);\n      Employee e = new Salary(\"John Adams\", \"Boston, MA\", 2, 2400.00);\n \n      System.out.println(\"Call mailCheck using Salary reference --\");\n      s.mailCheck();\n \n      System.out.println(\"\\n Call mailCheck using Employee reference--\");\n      e.mailCheck();\n    }\n}\n\n```\n#### 爪哇类\n<font color=#ff0000>`class`</font>, <font color=#0000ff>`extends`</font>\n```java \n\n```\n\n\n\n\n---\n\n---\n# Maven 项目标准目录结构\nstr\n|\tmain\n\t|\tbin\t脚本库\n    |\tjava Java源代码文件\n    |\tresources 资源库，会自动复制到classes目录中\n    |\tfilters 资源过滤文件\n    |\tassembly 组建的描述配置（如何打包）\n    |\tconfig 配置文件\n    |\twebapp web应用的目录。WEB-INF、css、js等\n|\ttest\n\t|\tjava 单元测试Java源代码文件\n    |\tresorces 测试需要用到的资源库\n    |\tfilters 测试资源过滤库\n    |\tsite Site（一些文档）\n|\ttarget\n\tLICENSE.txt Project's license\n    README.txt Project's readme\n    \n工程根目录下就只有src和target两个目录\ntarget是有存放项目构建后的文件和目录，jar包、war包、编译的class文件等。\ntarget里的所有内容都是maven构建的时候生成的\n\n顶级目录工程的描述文件`pom.xml`\n\n\n摘自: <https://blog.csdn.net/lengyue_wy/article/details/6718637>\n    \n\n## src \n### java\n***Bean***: 扮演应用程序素材的角色（其中放置了各种自定义类 如：Hr、Role、Employee、menu等数据类型）（作为`service`的<font color=#00cfaf>模型库</font>）\n***common***: 常用方法 （如字符串转换、邮件、几个查询） \n***config***: 看不懂的设置\n***controller***: 动作执行，即受到什么请求执行什么动作。 但是我打了断点鲜有进来的。所以具体实现过程还是不清楚。 另外其url地址与网页真正输入地址有全拼简写的区别，哪里有指定也没找到还。（并且寥寥草草一个就处理完了，所以肯定是简写了💩）\n***exception***: 异常处理\n***mapper***: 虽不觉然明厉的东西集合_20180525_其中定义了诸多做实事的接口，在`.java`文件中画饼，在`.xml`中实现，另外昨天在查资料时，还了解到有人要将`.java`与`.xml`分开来存放，解决方法是将`.xml`放在`resources`文件夹中，仿照在`java`文件夹中的路径，依瓢葫芦画😄的建立相同路径，如此一来在coding阶段看起来是分开的，但在building阶段编译器就是看作在同一目录下了——由此引发了虽然拆开了他们的人，却没有拆散他们的心的哲学论题😰(作为`service`的<font color=#bf00cf>方法库</font>)\n***service***: 动作逻辑服务，和controller中类似，不过详细不少（作为）\n\n---\n\n### resources\n***ftl***: emm……\n***static***: 静态资源\n***js***: emm…\n***application.properties***: 各项配置\n***mybatis-config.xml***: MySQL数据库配置\n\n\n### Mybatis\n##### 头\n```java\n<?xml version=\"1.0\" encoding=\"utf-8\"?>  \n<!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"  \n\"http://mybatis.org/dtd/mybatis-3-config.dtd\">  \n<configuration>  \n  \n</configuration>\n```\n##### configuration中的配置信息\n详解： <https://blog.csdn.net/yqynsmile/article/details/52807815>\n```java\n// 别名，假名，代称\n<typeAliases>  \n<typeAlias alias=\"Student\" type=\"com.mybatis3.domain.Student\" />  \n</typeAliases>  \n\n// 声明环境变量\n<environments default=\"development\">  \n<environment id=\"development\">  \n\n/* 声明数据源，数据源的类型有NOPOOLED ，POOLED ，还有JIDN.\n 在数据量少的话用ONPOOLED，测试和开发过程一般用POOLED，实际运行使用JIDN */\n<dataSource type=\"POOLED\">  \n\n// <mappers>：声明我们定义的一个个Mapper类，或者说是关联\n<mapper resource=\"com/mybatis3/mappers/StudentMapper.xml\" /> \n\n// <property>：jdbc连接的一些属性\n<property name=\"driver\" value=\"com.mysql.jdbc.Driver\" />  \n<property name=\"url\" value=\"jdbc:mysql://localhost:3306/test\" />  \n<property name=\"username\" value=\"root\" />  \n<property name=\"password\" value=\"admin\" />  \n/* 这些东西貌似也可以写在其他地方：application中\n <property name=\"url\">  \n         <value>jdbc:mysql://localhost:3306/springmybaitis?useUnicode=true&amp;characterEncoding=UTF-8</value>  \n        <!--springmybaitis是我的数据库  -->\n     </property>  或 spring.datasource.url=jdbc:mysql://127.0.0.1:3306/vhr?useUnicode=true&characterEncoding=UTF-8    两种写法而已 */\n\n// <mapper>：声明Mapper的路径\n\n\n// 默认setting配置\n<setting name=\"cacheEnabled\" value=\"true\" />//是否使用缓存  \n<setting name=\"lazyLoadingEnabled\" value=\"true\" />//是否是懒记载  \n<setting name=\"multipleResultSetsEnabled\" value=\"true\" />  \n<setting name=\"useColumnLabel\" value=\"true\" />  \n<setting name=\"useGeneratedKeys\" value=\"false\" />  \n<setting name=\"autoMappingBehavior\" value=\"PARTIAL\" />  \n<setting name=\"defaultExecutorType\" value=\"SIMPLE\" />  \n<setting name=\"defaultStatementTimeout\" value=\"25000\" />  \n<setting name=\"safeRowBoundsEnabled\" value=\"false\" />  \n<setting name=\"mapUnderscoreToCamelCase\" value=\"false\" />  \n<setting name=\"localCacheScope\" value=\"SESSION\" />  \n<setting name=\"jdbcTypeForNull\" value=\"OTHER\" />  \n<setting name=\"lazyLoadTriggerMethods\" value=\"equals,clone,hashCode ,toString\" />  \n```\n还有 `<Settings>`:声明一些全局变量、`<typeHandlers>`: 自定义我们的传入参数类型处理器、`<properties>`: 声明属性文件的key和value，但使用.properties文件将会被覆盖。\n\n***注***: 在要使用指定日志工具时，需要在`<Settings>`里指定`<setting name=\"logImpl\" value=\"LOG4J\"/>`\n\n\n\n\n\n\n\n#### equals 与 ==\n`equals` 对比两者是否类型一致，内容一致\n`==`\t则会由于 不同对象而`False`\n```java \nString str1=new String(\"hello\");\nString str2=new String(\"hello\");\n\nstr1==str2   输出：false,因为不同对象\nint1.equals(int2)   输出：TRUE\n\n// 无论 整形 or 字符串等\n```\n\n## 爪洼调用Python \n爪哇语有个通用调用方式，就是通过`Runtime`，也就是通过命令行执行，然后通过`BufferedReader`捕获命令行（内存）中的信息。但数据传输只能通过字符串，另外，python回传数据也只能通过`print`来回传，所以……基本没啥用.\n","published":1,"updated":"2021-05-08T02:56:02.688Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9cg000tu3yqb6tnaafz","content":"<p>author: Ian</p>\n<h1 id=\"happy-to-the-fuck-java-😅\"><a href=\"#happy-to-the-fuck-java-😅\" class=\"headerlink\" title=\"happy to the fuck java 😅\"></a>happy to the fuck java 😅</h1><h2 id=\"lt-微人事-gt-笔记-gt-ψ-gt\"><a href=\"#lt-微人事-gt-笔记-gt-ψ-gt\" class=\"headerlink\" title=\"&lt;微人事&gt; 笔记 -&gt;    ψ(._. )&gt;\"></a>&lt;微人事&gt; 笔记 -&gt;    ψ(._. )&gt;</h2><p>先贴<a href=\"https://github.com/lenve/vhr/wiki/1.%E6%9D%83%E9%99%90%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1\">官方文档</a> 哦 还有<a href=\"https://github.com/lenve/vhr\">官方项目地址</a></p>\n<h4 id=\"爪哇方法定义\"><a href=\"#爪哇方法定义\" class=\"headerlink\" title=\"爪哇方法定义:\"></a>爪哇方法定义:</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">修饰符  返回值类型  方法名(参数类型  参数名)&#123;</span><br><span class=\"line\">    方法体;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> 返回值;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># 示个例</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">NiHou</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> a = num;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> turn;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// `boolean` 处 可为</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Collection&lt;? extends GrantedAuthority&gt; getAuthorities()&#123;</span><br><span class=\"line\">\tList&lt;GrantedAuthority&gt; authorities = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> authorities;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 表泛型中可以是的`GrantedAuthority`所有子类</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"爪哇抽象方法-即Python父类中直接pass的函数…\"><a href=\"#爪哇抽象方法-即Python父类中直接pass的函数…\" class=\"headerlink\" title=\"爪哇抽象方法(即Python父类中直接pass的函数…)\"></a>爪哇抽象方法(即Python父类中直接<code>pass</code>的函数…)</h4><p><font color=#ff0000><code>abstract</code></font></p>\n<ol>\n<li>包含抽象方法必须得是抽象类</li>\n<li>任何子类必须重写父类抽象方法，或者声明自身为抽象类<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> number;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">double</span> <span class=\"title\">computePay</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//其余</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"爪哇接口\"><a href=\"#爪哇接口\" class=\"headerlink\" title=\"爪哇接口\"></a>爪哇接口</h4><p><font color=#ff0000><code>interface</code></font>, <font color=#0000ff><code>implements</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[可见度] interface 接口名称 [extends 其他的类名] &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 声明变量</span></span><br><span class=\"line\">    <span class=\"comment\">// 抽象方法</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># 示个例</span><br><span class=\"line\"><span class=\"comment\">/* 文件名 : NameOfInterface.java */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">NameOfInterface</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">//任何类型 final, static 字段</span></span><br><span class=\"line\">   <span class=\"comment\">//抽象方法</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Interface关键字用来声明一个接口。</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"爪哇抽象类\"><a href=\"#爪哇抽象类\" class=\"headerlink\" title=\"爪哇抽象类\"></a>爪哇抽象类</h4><p><font color=#ff0000><code>abstract class</code></font><font color=#0000ff><code>extends</code></font></p>\n<ol>\n<li>不能直接实例化</li>\n<li>只能被继承后实例<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> number;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Employee</span><span class=\"params\">(String name, String address, <span class=\"keyword\">int</span> number)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Constructing an Employee&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.address = address;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.number = number;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">//…… 等方法</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getNumber</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> number;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 文件名 : Salary.java */</span>    </span><br><span class=\"line\"><span class=\"comment\">// 用于继承上述东西</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Salary</span> <span class=\"keyword\">extends</span> <span class=\"title\">Employee</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> salary; <span class=\"comment\">//Annual salary</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Salary</span><span class=\"params\">(String name, String address, <span class=\"keyword\">int</span> number, <span class=\"keyword\">double</span></span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">      salary)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">super</span>(name, address, number);</span><br><span class=\"line\">       setSalary(salary);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">mailCheck</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;Within mailCheck of Salary class &quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;Mailing check to &quot;</span> + getName()</span><br><span class=\"line\">       + <span class=\"string\">&quot; with salary &quot;</span> + salary);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">getSalary</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> salary;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSalary</span><span class=\"params\">(<span class=\"keyword\">double</span> newSalary)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(newSalary &gt;= <span class=\"number\">0.0</span>)</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">          salary = newSalary;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">computePay</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Computing salary pay for &quot;</span> + getName());</span><br><span class=\"line\">      <span class=\"keyword\">return</span> salary/<span class=\"number\">52</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 文件名 : AbstractDemo.java */</span></span><br><span class=\"line\"><span class=\"comment\">// 用于实现继承类   </span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractDemo</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String [] args)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">      Salary s = <span class=\"keyword\">new</span> Salary(<span class=\"string\">&quot;Mohd Mohtashim&quot;</span>, <span class=\"string\">&quot;Ambehta, UP&quot;</span>, <span class=\"number\">3</span>, <span class=\"number\">3600.00</span>);</span><br><span class=\"line\">      Employee e = <span class=\"keyword\">new</span> Salary(<span class=\"string\">&quot;John Adams&quot;</span>, <span class=\"string\">&quot;Boston, MA&quot;</span>, <span class=\"number\">2</span>, <span class=\"number\">2400.00</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Call mailCheck using Salary reference --&quot;</span>);</span><br><span class=\"line\">      s.mailCheck();</span><br><span class=\"line\"> </span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;\\n Call mailCheck using Employee reference--&quot;</span>);</span><br><span class=\"line\">      e.mailCheck();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h4 id=\"爪哇类\"><a href=\"#爪哇类\" class=\"headerlink\" title=\"爪哇类\"></a>爪哇类</h4><font color=#ff0000><code>class</code></font>, <font color=#0000ff><code>extends</code></font><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n</ol>\n<hr>\n<hr>\n<h1 id=\"Maven-项目标准目录结构\"><a href=\"#Maven-项目标准目录结构\" class=\"headerlink\" title=\"Maven 项目标准目录结构\"></a>Maven 项目标准目录结构</h1><p>str<br>|    main<br>    |    bin    脚本库<br>    |    java Java源代码文件<br>    |    resources 资源库，会自动复制到classes目录中<br>    |    filters 资源过滤文件<br>    |    assembly 组建的描述配置（如何打包）<br>    |    config 配置文件<br>    |    webapp web应用的目录。WEB-INF、css、js等<br>|    test<br>    |    java 单元测试Java源代码文件<br>    |    resorces 测试需要用到的资源库<br>    |    filters 测试资源过滤库<br>    |    site Site（一些文档）<br>|    target<br>    LICENSE.txt Project’s license<br>    README.txt Project’s readme</p>\n<p>工程根目录下就只有src和target两个目录<br>target是有存放项目构建后的文件和目录，jar包、war包、编译的class文件等。<br>target里的所有内容都是maven构建的时候生成的</p>\n<p>顶级目录工程的描述文件<code>pom.xml</code></p>\n<p>摘自: <a href=\"https://blog.csdn.net/lengyue_wy/article/details/6718637\">https://blog.csdn.net/lengyue_wy/article/details/6718637</a></p>\n<h2 id=\"src\"><a href=\"#src\" class=\"headerlink\" title=\"src\"></a>src</h2><h3 id=\"java\"><a href=\"#java\" class=\"headerlink\" title=\"java\"></a>java</h3><p><em><strong>Bean</strong></em>: 扮演应用程序素材的角色（其中放置了各种自定义类 如：Hr、Role、Employee、menu等数据类型）（作为<code>service</code>的<font color=#00cfaf>模型库</font>）<br><em><strong>common</strong></em>: 常用方法 （如字符串转换、邮件、几个查询）<br><em><strong>config</strong></em>: 看不懂的设置<br><em><strong>controller</strong></em>: 动作执行，即受到什么请求执行什么动作。 但是我打了断点鲜有进来的。所以具体实现过程还是不清楚。 另外其url地址与网页真正输入地址有全拼简写的区别，哪里有指定也没找到还。（并且寥寥草草一个就处理完了，所以肯定是简写了💩）<br><em><strong>exception</strong></em>: 异常处理<br><em><strong>mapper</strong></em>: 虽不觉然明厉的东西集合_20180525_其中定义了诸多做实事的接口，在<code>.java</code>文件中画饼，在<code>.xml</code>中实现，另外昨天在查资料时，还了解到有人要将<code>.java</code>与<code>.xml</code>分开来存放，解决方法是将<code>.xml</code>放在<code>resources</code>文件夹中，仿照在<code>java</code>文件夹中的路径，依瓢葫芦画😄的建立相同路径，如此一来在coding阶段看起来是分开的，但在building阶段编译器就是看作在同一目录下了——由此引发了虽然拆开了他们的人，却没有拆散他们的心的哲学论题😰(作为<code>service</code>的<font color=#bf00cf>方法库</font>)<br><em><strong>service</strong></em>: 动作逻辑服务，和controller中类似，不过详细不少（作为）</p>\n<hr>\n<h3 id=\"resources\"><a href=\"#resources\" class=\"headerlink\" title=\"resources\"></a>resources</h3><p><em><strong>ftl</strong></em>: emm……<br><em><strong>static</strong></em>: 静态资源<br><em><strong>js</strong></em>: emm…<br><em><strong>application.properties</strong></em>: 各项配置<br><em><strong>mybatis-config.xml</strong></em>: MySQL数据库配置</p>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h5 id=\"头\"><a href=\"#头\" class=\"headerlink\" title=\"头\"></a>头</h5><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;  </span><br><span class=\"line\">&lt;!DOCTYPE configuration PUBLIC <span class=\"string\">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>  </span><br><span class=\"line\"><span class=\"string\">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;  </span><br><span class=\"line\">&lt;configuration&gt;  </span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"configuration中的配置信息\"><a href=\"#configuration中的配置信息\" class=\"headerlink\" title=\"configuration中的配置信息\"></a>configuration中的配置信息</h5><p>详解： <a href=\"https://blog.csdn.net/yqynsmile/article/details/52807815\">https://blog.csdn.net/yqynsmile/article/details/52807815</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 别名，假名，代称</span></span><br><span class=\"line\">&lt;typeAliases&gt;  </span><br><span class=\"line\">&lt;typeAlias alias=<span class=\"string\">&quot;Student&quot;</span> type=<span class=\"string\">&quot;com.mybatis3.domain.Student&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;/typeAliases&gt;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 声明环境变量</span></span><br><span class=\"line\">&lt;environments <span class=\"keyword\">default</span>=<span class=\"string\">&quot;development&quot;</span>&gt;  </span><br><span class=\"line\">&lt;environment id=<span class=\"string\">&quot;development&quot;</span>&gt;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 声明数据源，数据源的类型有NOPOOLED ，POOLED ，还有JIDN.</span></span><br><span class=\"line\"><span class=\"comment\"> 在数据量少的话用ONPOOLED，测试和开发过程一般用POOLED，实际运行使用JIDN */</span></span><br><span class=\"line\">&lt;dataSource type=<span class=\"string\">&quot;POOLED&quot;</span>&gt;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &lt;mappers&gt;：声明我们定义的一个个Mapper类，或者说是关联</span></span><br><span class=\"line\">&lt;mapper resource=<span class=\"string\">&quot;com/mybatis3/mappers/StudentMapper.xml&quot;</span> /&gt; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &lt;property&gt;：jdbc连接的一些属性</span></span><br><span class=\"line\">&lt;property name=<span class=\"string\">&quot;driver&quot;</span> value=<span class=\"string\">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;property name=<span class=\"string\">&quot;url&quot;</span> value=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/test&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;property name=<span class=\"string\">&quot;username&quot;</span> value=<span class=\"string\">&quot;root&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;property name=<span class=\"string\">&quot;password&quot;</span> value=<span class=\"string\">&quot;admin&quot;</span> /&gt;  </span><br><span class=\"line\"><span class=\"comment\">/* 这些东西貌似也可以写在其他地方：application中</span></span><br><span class=\"line\"><span class=\"comment\"> &lt;property name=&quot;url&quot;&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">         &lt;value&gt;jdbc:mysql://localhost:3306/springmybaitis?useUnicode=true&amp;amp;characterEncoding=UTF-8&lt;/value&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">        &lt;!--springmybaitis是我的数据库  --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     &lt;/property&gt;  或 spring.datasource.url=jdbc:mysql://127.0.0.1:3306/vhr?useUnicode=true&amp;characterEncoding=UTF-8    两种写法而已 */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &lt;mapper&gt;：声明Mapper的路径</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 默认setting配置</span></span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;cacheEnabled&quot;</span> value=<span class=\"string\">&quot;true&quot;</span> /&gt;<span class=\"comment\">//是否使用缓存  </span></span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;lazyLoadingEnabled&quot;</span> value=<span class=\"string\">&quot;true&quot;</span> /&gt;<span class=\"comment\">//是否是懒记载  </span></span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;multipleResultSetsEnabled&quot;</span> value=<span class=\"string\">&quot;true&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;useColumnLabel&quot;</span> value=<span class=\"string\">&quot;true&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;useGeneratedKeys&quot;</span> value=<span class=\"string\">&quot;false&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;autoMappingBehavior&quot;</span> value=<span class=\"string\">&quot;PARTIAL&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;defaultExecutorType&quot;</span> value=<span class=\"string\">&quot;SIMPLE&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;defaultStatementTimeout&quot;</span> value=<span class=\"string\">&quot;25000&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;safeRowBoundsEnabled&quot;</span> value=<span class=\"string\">&quot;false&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;mapUnderscoreToCamelCase&quot;</span> value=<span class=\"string\">&quot;false&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;localCacheScope&quot;</span> value=<span class=\"string\">&quot;SESSION&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;jdbcTypeForNull&quot;</span> value=<span class=\"string\">&quot;OTHER&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;lazyLoadTriggerMethods&quot;</span> value=<span class=\"string\">&quot;equals,clone,hashCode ,toString&quot;</span> /&gt;  </span><br></pre></td></tr></table></figure>\n<p>还有 <code>&lt;Settings&gt;</code>:声明一些全局变量、<code>&lt;typeHandlers&gt;</code>: 自定义我们的传入参数类型处理器、<code>&lt;properties&gt;</code>: 声明属性文件的key和value，但使用.properties文件将会被覆盖。</p>\n<p><em><strong>注</strong></em>: 在要使用指定日志工具时，需要在<code>&lt;Settings&gt;</code>里指定<code>&lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;</code></p>\n<h4 id=\"equals-与\"><a href=\"#equals-与\" class=\"headerlink\" title=\"equals 与 ==\"></a>equals 与 ==</h4><p><code>equals</code> 对比两者是否类型一致，内容一致<br><code>==</code>    则会由于 不同对象而<code>False</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String str1=<span class=\"keyword\">new</span> String(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">String str2=<span class=\"keyword\">new</span> String(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">str1==str2   输出：<span class=\"keyword\">false</span>,因为不同对象</span><br><span class=\"line\">int1.equals(int2)   输出：TRUE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 无论 整形 or 字符串等</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"爪洼调用Python\"><a href=\"#爪洼调用Python\" class=\"headerlink\" title=\"爪洼调用Python\"></a>爪洼调用Python</h2><p>爪哇语有个通用调用方式，就是通过<code>Runtime</code>，也就是通过命令行执行，然后通过<code>BufferedReader</code>捕获命令行（内存）中的信息。但数据传输只能通过字符串，另外，python回传数据也只能通过<code>print</code>来回传，所以……基本没啥用.</p>\n","site":{"data":{}},"excerpt":"","more":"<p>author: Ian</p>\n<h1 id=\"happy-to-the-fuck-java-😅\"><a href=\"#happy-to-the-fuck-java-😅\" class=\"headerlink\" title=\"happy to the fuck java 😅\"></a>happy to the fuck java 😅</h1><h2 id=\"lt-微人事-gt-笔记-gt-ψ-gt\"><a href=\"#lt-微人事-gt-笔记-gt-ψ-gt\" class=\"headerlink\" title=\"&lt;微人事&gt; 笔记 -&gt;    ψ(._. )&gt;\"></a>&lt;微人事&gt; 笔记 -&gt;    ψ(._. )&gt;</h2><p>先贴<a href=\"https://github.com/lenve/vhr/wiki/1.%E6%9D%83%E9%99%90%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1\">官方文档</a> 哦 还有<a href=\"https://github.com/lenve/vhr\">官方项目地址</a></p>\n<h4 id=\"爪哇方法定义\"><a href=\"#爪哇方法定义\" class=\"headerlink\" title=\"爪哇方法定义:\"></a>爪哇方法定义:</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">修饰符  返回值类型  方法名(参数类型  参数名)&#123;</span><br><span class=\"line\">    方法体;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> 返回值;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># 示个例</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">NiHou</span><span class=\"params\">(<span class=\"keyword\">int</span> num)</span></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> a = num;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> turn;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// `boolean` 处 可为</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> Collection&lt;? extends GrantedAuthority&gt; getAuthorities()&#123;</span><br><span class=\"line\">\tList&lt;GrantedAuthority&gt; authorities = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> authorities;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 表泛型中可以是的`GrantedAuthority`所有子类</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"爪哇抽象方法-即Python父类中直接pass的函数…\"><a href=\"#爪哇抽象方法-即Python父类中直接pass的函数…\" class=\"headerlink\" title=\"爪哇抽象方法(即Python父类中直接pass的函数…)\"></a>爪哇抽象方法(即Python父类中直接<code>pass</code>的函数…)</h4><p><font color=#ff0000><code>abstract</code></font></p>\n<ol>\n<li>包含抽象方法必须得是抽象类</li>\n<li>任何子类必须重写父类抽象方法，或者声明自身为抽象类<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> number;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">double</span> <span class=\"title\">computePay</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//其余</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h4 id=\"爪哇接口\"><a href=\"#爪哇接口\" class=\"headerlink\" title=\"爪哇接口\"></a>爪哇接口</h4><p><font color=#ff0000><code>interface</code></font>, <font color=#0000ff><code>implements</code></font></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[可见度] interface 接口名称 [extends 其他的类名] &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 声明变量</span></span><br><span class=\"line\">    <span class=\"comment\">// 抽象方法</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"># 示个例</span><br><span class=\"line\"><span class=\"comment\">/* 文件名 : NameOfInterface.java */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">NameOfInterface</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"comment\">//任何类型 final, static 字段</span></span><br><span class=\"line\">   <span class=\"comment\">//抽象方法</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Interface关键字用来声明一个接口。</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"爪哇抽象类\"><a href=\"#爪哇抽象类\" class=\"headerlink\" title=\"爪哇抽象类\"></a>爪哇抽象类</h4><p><font color=#ff0000><code>abstract class</code></font><font color=#0000ff><code>extends</code></font></p>\n<ol>\n<li>不能直接实例化</li>\n<li>只能被继承后实例<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> number;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Employee</span><span class=\"params\">(String name, String address, <span class=\"keyword\">int</span> number)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Constructing an Employee&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.address = address;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.number = number;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"comment\">//…… 等方法</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getNumber</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">return</span> number;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 文件名 : Salary.java */</span>    </span><br><span class=\"line\"><span class=\"comment\">// 用于继承上述东西</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Salary</span> <span class=\"keyword\">extends</span> <span class=\"title\">Employee</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> salary; <span class=\"comment\">//Annual salary</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Salary</span><span class=\"params\">(String name, String address, <span class=\"keyword\">int</span> number, <span class=\"keyword\">double</span></span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">      salary)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">super</span>(name, address, number);</span><br><span class=\"line\">       setSalary(salary);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">mailCheck</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;Within mailCheck of Salary class &quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;Mailing check to &quot;</span> + getName()</span><br><span class=\"line\">       + <span class=\"string\">&quot; with salary &quot;</span> + salary);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">getSalary</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> salary;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setSalary</span><span class=\"params\">(<span class=\"keyword\">double</span> newSalary)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(newSalary &gt;= <span class=\"number\">0.0</span>)</span><br><span class=\"line\">       &#123;</span><br><span class=\"line\">          salary = newSalary;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">double</span> <span class=\"title\">computePay</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Computing salary pay for &quot;</span> + getName());</span><br><span class=\"line\">      <span class=\"keyword\">return</span> salary/<span class=\"number\">52</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 文件名 : AbstractDemo.java */</span></span><br><span class=\"line\"><span class=\"comment\">// 用于实现继承类   </span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AbstractDemo</span></span></span><br><span class=\"line\"><span class=\"class\"></span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String [] args)</span></span></span><br><span class=\"line\"><span class=\"function\">   </span>&#123;</span><br><span class=\"line\">      Salary s = <span class=\"keyword\">new</span> Salary(<span class=\"string\">&quot;Mohd Mohtashim&quot;</span>, <span class=\"string\">&quot;Ambehta, UP&quot;</span>, <span class=\"number\">3</span>, <span class=\"number\">3600.00</span>);</span><br><span class=\"line\">      Employee e = <span class=\"keyword\">new</span> Salary(<span class=\"string\">&quot;John Adams&quot;</span>, <span class=\"string\">&quot;Boston, MA&quot;</span>, <span class=\"number\">2</span>, <span class=\"number\">2400.00</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;Call mailCheck using Salary reference --&quot;</span>);</span><br><span class=\"line\">      s.mailCheck();</span><br><span class=\"line\"> </span><br><span class=\"line\">      System.out.println(<span class=\"string\">&quot;\\n Call mailCheck using Employee reference--&quot;</span>);</span><br><span class=\"line\">      e.mailCheck();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h4 id=\"爪哇类\"><a href=\"#爪哇类\" class=\"headerlink\" title=\"爪哇类\"></a>爪哇类</h4><font color=#ff0000><code>class</code></font>, <font color=#0000ff><code>extends</code></font><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n</ol>\n<hr>\n<hr>\n<h1 id=\"Maven-项目标准目录结构\"><a href=\"#Maven-项目标准目录结构\" class=\"headerlink\" title=\"Maven 项目标准目录结构\"></a>Maven 项目标准目录结构</h1><p>str<br>|    main<br>    |    bin    脚本库<br>    |    java Java源代码文件<br>    |    resources 资源库，会自动复制到classes目录中<br>    |    filters 资源过滤文件<br>    |    assembly 组建的描述配置（如何打包）<br>    |    config 配置文件<br>    |    webapp web应用的目录。WEB-INF、css、js等<br>|    test<br>    |    java 单元测试Java源代码文件<br>    |    resorces 测试需要用到的资源库<br>    |    filters 测试资源过滤库<br>    |    site Site（一些文档）<br>|    target<br>    LICENSE.txt Project’s license<br>    README.txt Project’s readme</p>\n<p>工程根目录下就只有src和target两个目录<br>target是有存放项目构建后的文件和目录，jar包、war包、编译的class文件等。<br>target里的所有内容都是maven构建的时候生成的</p>\n<p>顶级目录工程的描述文件<code>pom.xml</code></p>\n<p>摘自: <a href=\"https://blog.csdn.net/lengyue_wy/article/details/6718637\">https://blog.csdn.net/lengyue_wy/article/details/6718637</a></p>\n<h2 id=\"src\"><a href=\"#src\" class=\"headerlink\" title=\"src\"></a>src</h2><h3 id=\"java\"><a href=\"#java\" class=\"headerlink\" title=\"java\"></a>java</h3><p><em><strong>Bean</strong></em>: 扮演应用程序素材的角色（其中放置了各种自定义类 如：Hr、Role、Employee、menu等数据类型）（作为<code>service</code>的<font color=#00cfaf>模型库</font>）<br><em><strong>common</strong></em>: 常用方法 （如字符串转换、邮件、几个查询）<br><em><strong>config</strong></em>: 看不懂的设置<br><em><strong>controller</strong></em>: 动作执行，即受到什么请求执行什么动作。 但是我打了断点鲜有进来的。所以具体实现过程还是不清楚。 另外其url地址与网页真正输入地址有全拼简写的区别，哪里有指定也没找到还。（并且寥寥草草一个就处理完了，所以肯定是简写了💩）<br><em><strong>exception</strong></em>: 异常处理<br><em><strong>mapper</strong></em>: 虽不觉然明厉的东西集合_20180525_其中定义了诸多做实事的接口，在<code>.java</code>文件中画饼，在<code>.xml</code>中实现，另外昨天在查资料时，还了解到有人要将<code>.java</code>与<code>.xml</code>分开来存放，解决方法是将<code>.xml</code>放在<code>resources</code>文件夹中，仿照在<code>java</code>文件夹中的路径，依瓢葫芦画😄的建立相同路径，如此一来在coding阶段看起来是分开的，但在building阶段编译器就是看作在同一目录下了——由此引发了虽然拆开了他们的人，却没有拆散他们的心的哲学论题😰(作为<code>service</code>的<font color=#bf00cf>方法库</font>)<br><em><strong>service</strong></em>: 动作逻辑服务，和controller中类似，不过详细不少（作为）</p>\n<hr>\n<h3 id=\"resources\"><a href=\"#resources\" class=\"headerlink\" title=\"resources\"></a>resources</h3><p><em><strong>ftl</strong></em>: emm……<br><em><strong>static</strong></em>: 静态资源<br><em><strong>js</strong></em>: emm…<br><em><strong>application.properties</strong></em>: 各项配置<br><em><strong>mybatis-config.xml</strong></em>: MySQL数据库配置</p>\n<h3 id=\"Mybatis\"><a href=\"#Mybatis\" class=\"headerlink\" title=\"Mybatis\"></a>Mybatis</h3><h5 id=\"头\"><a href=\"#头\" class=\"headerlink\" title=\"头\"></a>头</h5><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;utf-8&quot;</span>?&gt;  </span><br><span class=\"line\">&lt;!DOCTYPE configuration PUBLIC <span class=\"string\">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>  </span><br><span class=\"line\"><span class=\"string\">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;  </span><br><span class=\"line\">&lt;configuration&gt;  </span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>\n<h5 id=\"configuration中的配置信息\"><a href=\"#configuration中的配置信息\" class=\"headerlink\" title=\"configuration中的配置信息\"></a>configuration中的配置信息</h5><p>详解： <a href=\"https://blog.csdn.net/yqynsmile/article/details/52807815\">https://blog.csdn.net/yqynsmile/article/details/52807815</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 别名，假名，代称</span></span><br><span class=\"line\">&lt;typeAliases&gt;  </span><br><span class=\"line\">&lt;typeAlias alias=<span class=\"string\">&quot;Student&quot;</span> type=<span class=\"string\">&quot;com.mybatis3.domain.Student&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;/typeAliases&gt;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 声明环境变量</span></span><br><span class=\"line\">&lt;environments <span class=\"keyword\">default</span>=<span class=\"string\">&quot;development&quot;</span>&gt;  </span><br><span class=\"line\">&lt;environment id=<span class=\"string\">&quot;development&quot;</span>&gt;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 声明数据源，数据源的类型有NOPOOLED ，POOLED ，还有JIDN.</span></span><br><span class=\"line\"><span class=\"comment\"> 在数据量少的话用ONPOOLED，测试和开发过程一般用POOLED，实际运行使用JIDN */</span></span><br><span class=\"line\">&lt;dataSource type=<span class=\"string\">&quot;POOLED&quot;</span>&gt;  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &lt;mappers&gt;：声明我们定义的一个个Mapper类，或者说是关联</span></span><br><span class=\"line\">&lt;mapper resource=<span class=\"string\">&quot;com/mybatis3/mappers/StudentMapper.xml&quot;</span> /&gt; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &lt;property&gt;：jdbc连接的一些属性</span></span><br><span class=\"line\">&lt;property name=<span class=\"string\">&quot;driver&quot;</span> value=<span class=\"string\">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;property name=<span class=\"string\">&quot;url&quot;</span> value=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/test&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;property name=<span class=\"string\">&quot;username&quot;</span> value=<span class=\"string\">&quot;root&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;property name=<span class=\"string\">&quot;password&quot;</span> value=<span class=\"string\">&quot;admin&quot;</span> /&gt;  </span><br><span class=\"line\"><span class=\"comment\">/* 这些东西貌似也可以写在其他地方：application中</span></span><br><span class=\"line\"><span class=\"comment\"> &lt;property name=&quot;url&quot;&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">         &lt;value&gt;jdbc:mysql://localhost:3306/springmybaitis?useUnicode=true&amp;amp;characterEncoding=UTF-8&lt;/value&gt;  </span></span><br><span class=\"line\"><span class=\"comment\">        &lt;!--springmybaitis是我的数据库  --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     &lt;/property&gt;  或 spring.datasource.url=jdbc:mysql://127.0.0.1:3306/vhr?useUnicode=true&amp;characterEncoding=UTF-8    两种写法而已 */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// &lt;mapper&gt;：声明Mapper的路径</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 默认setting配置</span></span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;cacheEnabled&quot;</span> value=<span class=\"string\">&quot;true&quot;</span> /&gt;<span class=\"comment\">//是否使用缓存  </span></span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;lazyLoadingEnabled&quot;</span> value=<span class=\"string\">&quot;true&quot;</span> /&gt;<span class=\"comment\">//是否是懒记载  </span></span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;multipleResultSetsEnabled&quot;</span> value=<span class=\"string\">&quot;true&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;useColumnLabel&quot;</span> value=<span class=\"string\">&quot;true&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;useGeneratedKeys&quot;</span> value=<span class=\"string\">&quot;false&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;autoMappingBehavior&quot;</span> value=<span class=\"string\">&quot;PARTIAL&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;defaultExecutorType&quot;</span> value=<span class=\"string\">&quot;SIMPLE&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;defaultStatementTimeout&quot;</span> value=<span class=\"string\">&quot;25000&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;safeRowBoundsEnabled&quot;</span> value=<span class=\"string\">&quot;false&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;mapUnderscoreToCamelCase&quot;</span> value=<span class=\"string\">&quot;false&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;localCacheScope&quot;</span> value=<span class=\"string\">&quot;SESSION&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;jdbcTypeForNull&quot;</span> value=<span class=\"string\">&quot;OTHER&quot;</span> /&gt;  </span><br><span class=\"line\">&lt;setting name=<span class=\"string\">&quot;lazyLoadTriggerMethods&quot;</span> value=<span class=\"string\">&quot;equals,clone,hashCode ,toString&quot;</span> /&gt;  </span><br></pre></td></tr></table></figure>\n<p>还有 <code>&lt;Settings&gt;</code>:声明一些全局变量、<code>&lt;typeHandlers&gt;</code>: 自定义我们的传入参数类型处理器、<code>&lt;properties&gt;</code>: 声明属性文件的key和value，但使用.properties文件将会被覆盖。</p>\n<p><em><strong>注</strong></em>: 在要使用指定日志工具时，需要在<code>&lt;Settings&gt;</code>里指定<code>&lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;</code></p>\n<h4 id=\"equals-与\"><a href=\"#equals-与\" class=\"headerlink\" title=\"equals 与 ==\"></a>equals 与 ==</h4><p><code>equals</code> 对比两者是否类型一致，内容一致<br><code>==</code>    则会由于 不同对象而<code>False</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String str1=<span class=\"keyword\">new</span> String(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">String str2=<span class=\"keyword\">new</span> String(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">str1==str2   输出：<span class=\"keyword\">false</span>,因为不同对象</span><br><span class=\"line\">int1.equals(int2)   输出：TRUE</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 无论 整形 or 字符串等</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"爪洼调用Python\"><a href=\"#爪洼调用Python\" class=\"headerlink\" title=\"爪洼调用Python\"></a>爪洼调用Python</h2><p>爪哇语有个通用调用方式，就是通过<code>Runtime</code>，也就是通过命令行执行，然后通过<code>BufferedReader</code>捕获命令行（内存）中的信息。但数据传输只能通过字符串，另外，python回传数据也只能通过<code>print</code>来回传，所以……基本没啥用.</p>\n"},{"title":"Linux","date":"2016-04-08T08:58:56.000Z","slug":"notes/noteOflinux","_content":"\n![linux](https://static1.makeuseofimages.com/wp-content/uploads/2015/01/best-linux-distros.jpg)\n\n## WSL\n[wsl问题](https://github.com/IanVzs/ianvzs.github.io/issues/7)\n因为后面不太喜欢这种东西了,还是上了物理机. 所以就不粘贴过来了.\n## sudo apt upgrade\n>E: Sub-process /usr/bin/dpkg returned an error code (1)\n\n### 解决\n*sudu下*\n1. 备份`/var/lib/dpkg/info`\n2. 新建`/var/lib/dpkg/info`\n3. 重新执行更新\n4. 合并`/var/lib/dpkg/info` 和 备份文件\n5. 完\n\n### 说明\n非原理性解决方案, 若解决不了, 另寻他法或者需要直击灵魂.\n\n\n## 磁盘操作\n### NTFS\n#### 一般发行版\n在此中可以使用`ntfsfix`, 不过刚才看了一圈儿, 好像, 这工具就是来源于下面所介绍的\n#### 树莓派\n因为没有预装`ntfsfix`, 所以\n\n- 安装 `ntfs-3g` 很久远的工具: `sudo apt install ntfs-3g` (看3g就知道年代久远 😄)\n- 取消挂载, `sudo umount /dev/sda{N}`\n- 重新挂载, `mount –t ntfs /dev/sda{n} /media/pi`\n\n就可以有`读写`权限了. 不然只有读的, 挺不好的.\n\n不过在windows放了缓存在里面的话就没办法挂载为`可写`了， 方法是取消Win的快速启动功能后关机，不使用休眠.\n\n### 磁盘查询命令\n```bash\nfdisk -l\ndf -h\n```\n\nLVM概要（がいよう）\n\n**自弁の理解**：\n- 将零散的集合起来，再进行动态分组。\n- PV >> VG >> LV\n\n### **じゃあ作成（さくせい）**：\n```bash\npvcreat disk1 disk2 di3 ...　# 集合\npvs|pvdisplay\n\nvgcreat 集合name 1 2 3 ...  # 集合\n\nvgs|vgdisplay\n\nlvcreat -n name -L size 集name \nlvs|lvdisplay\n```\n\n### **格式化磁盘:**\n```bash\nmkfs.ext4 /dev/集name/name  # 格式化此（PS：路径为所示）\n```\n**注:** 不过要采用这种方法来给Linux扩容的话需要之前时就选定Linux磁盘管理为LVM，否则主目录在之后不能添加lv组，也就谈不上添加。\n\n### LVMの削除（さくじょ）：\n```bash\nLV  lvremove /dev/... \nVG  vgremove 集name\nPV(物理卷) pvremove /dev/...\n```\n\n### disk LVの追加（ついか）：\n```bash\nlvexpend -L +1G /dev/集name/name\n# 增加了空白空间\n\nresize2fs /dev/... 更新文件系统 使空白空间得以有身份（文件系统）\n```\n\n### disk VGの追加\n```bash\npvcreat /dev/sdd(new)\n\nvgexpend 集name /dev/sdd\n```\n\n## 网络\n### SSH 远程终端控制\n`ssh root(usrname)@192.168.^.^   (IP)`\n输入密码错误之后——就…之前解决过，然而忘了上次怎么解决的了(京东云)反正这次是等着等着突然就能连接了。 以后可得把解决方案记录到这儿ヽ(*。>Д<)o゜\n\n另外，`ssh`公钥🔑连接方式可以参考`makethingseasy`中的描写。\n### ping 测试连通\nmtr 测试网络+每个路由信息\n`* + IP `\n\n### VNC 桌面远程\nEmmmm 当时还写了这个？现在倒是用这个在链接树莓派o(∩∩)o...哈哈(2021-04-22)\n\n## 壓縮打包\n- `tar -zxvf **.tar.gz`: `.tar.gz`\n- `tar -jxvf **.tar.bz2`: `.tar.bz2`\n### tar\n```shell\n    tar xvzf fileName.tar.gz\n    tar cvzf fileName.tar.gz targerName\n```\n`x`: 解压  `c` : 压缩\n\n## Ubuntu 16.04 升级 Ubuntu 18.04\n___ 经尝试真的不如备份自我资料后重装……因为太…慢…了…   更新还不稳。\n[^_^]:\n    2018年6月5日13点44分\n\n其实还好…   就是更新速度慢了点儿。早不到十点更新到了下午13点38分。不过基于是一键式的所以还是有多点儿好处的。\n更新命令\n```bash\nsudo do-release-upgrade\n# 提示是没法找到可用更新…\n# 所以  之后增加了\n-c\n# 还是不行\n-d \n# 参数完成更新\n```\n但是`python`被重装了！！！！ 里面的包都没了…🐎a算了，好在软件级别的东西都还在…另外`pip`也损坏了，`apt`安装也失败，后面我就用了`.py`脚本重新安装，所以`apt`卸载再重装没试，不知道行不行。 收回前面“软件级别的都还在”，其实软件级别的也待测。\n\n## 设定系统常量\n在用户目录下`profile`文件中可通过`export` 增加(一般来说是增加路径)\n```bash\nexport IAN=/mnt/c/Users/ian\nsourse ~/.profile\n```\n之后便可通过`cd $IAN` 来访问`win`下的用户目录。当然，这个方法是在添加`GoPath`时注意到的。\n\n\n[^_^]:\n    2018年6月5日10点25分\n\nemm  其实在`/etc/profile` 文件下才是系统王道\n\n### ps\n今年面试还碰到个问这个问题，说什么是变量..... 把我给整蒙了.....\n结果一番问下才发现他想问的就是放在`/etc/profile`和`~/.profile`里有啥区别，\n\n啥是`系统,用户,会话`级变量.唉.. 有时候突然听到基本问题就觉得对方是不是有什么深意...\n[^_^]:\n    2021年4月22日11点52分\n\n## tmux 虚拟多终端\n类似于vim多窗口编辑一类的东西，emm 或者说图形化`ubuntu`使用`ctrl+alt+t`叫出来的东西。这么一对比的话就是无界面化的虚拟终端——那个是界面里的虚拟终端嘛。 用于解决`ssh`连接远程开启应用，断开后不关闭进程的方案。因为`nohup`好像并不稳定的样子……\n不过用起来… 不太了解怎么这就能够持久化了…因为毕竟是虚拟窗口，间`makethingseasy`中，其实…好像…大概…没什么关系吧。这两者。\n\n## 最大文件数/单进程最大文件数\n`bump fs.nr_open + fs.max-file to their largest possible values`\n\n```bash\ncat /proc/sys/fs/file-max\ncat /proc/sys/fs/nr_open\n```\n今天(2021-04-22)看`epoll`的时候好奇看了一下,发现我的fs/file-max居然有`9223372036854775807`震惊一下.","source":"_posts/notes/noteOflinux.md","raw":"---\ntitle: Linux\ndate: 2016-04-08 16:58:56\ncategory: [note, linux, learning]\ntags: [Linux, learning]\nslug:\n---\n\n![linux](https://static1.makeuseofimages.com/wp-content/uploads/2015/01/best-linux-distros.jpg)\n\n## WSL\n[wsl问题](https://github.com/IanVzs/ianvzs.github.io/issues/7)\n因为后面不太喜欢这种东西了,还是上了物理机. 所以就不粘贴过来了.\n## sudo apt upgrade\n>E: Sub-process /usr/bin/dpkg returned an error code (1)\n\n### 解决\n*sudu下*\n1. 备份`/var/lib/dpkg/info`\n2. 新建`/var/lib/dpkg/info`\n3. 重新执行更新\n4. 合并`/var/lib/dpkg/info` 和 备份文件\n5. 完\n\n### 说明\n非原理性解决方案, 若解决不了, 另寻他法或者需要直击灵魂.\n\n\n## 磁盘操作\n### NTFS\n#### 一般发行版\n在此中可以使用`ntfsfix`, 不过刚才看了一圈儿, 好像, 这工具就是来源于下面所介绍的\n#### 树莓派\n因为没有预装`ntfsfix`, 所以\n\n- 安装 `ntfs-3g` 很久远的工具: `sudo apt install ntfs-3g` (看3g就知道年代久远 😄)\n- 取消挂载, `sudo umount /dev/sda{N}`\n- 重新挂载, `mount –t ntfs /dev/sda{n} /media/pi`\n\n就可以有`读写`权限了. 不然只有读的, 挺不好的.\n\n不过在windows放了缓存在里面的话就没办法挂载为`可写`了， 方法是取消Win的快速启动功能后关机，不使用休眠.\n\n### 磁盘查询命令\n```bash\nfdisk -l\ndf -h\n```\n\nLVM概要（がいよう）\n\n**自弁の理解**：\n- 将零散的集合起来，再进行动态分组。\n- PV >> VG >> LV\n\n### **じゃあ作成（さくせい）**：\n```bash\npvcreat disk1 disk2 di3 ...　# 集合\npvs|pvdisplay\n\nvgcreat 集合name 1 2 3 ...  # 集合\n\nvgs|vgdisplay\n\nlvcreat -n name -L size 集name \nlvs|lvdisplay\n```\n\n### **格式化磁盘:**\n```bash\nmkfs.ext4 /dev/集name/name  # 格式化此（PS：路径为所示）\n```\n**注:** 不过要采用这种方法来给Linux扩容的话需要之前时就选定Linux磁盘管理为LVM，否则主目录在之后不能添加lv组，也就谈不上添加。\n\n### LVMの削除（さくじょ）：\n```bash\nLV  lvremove /dev/... \nVG  vgremove 集name\nPV(物理卷) pvremove /dev/...\n```\n\n### disk LVの追加（ついか）：\n```bash\nlvexpend -L +1G /dev/集name/name\n# 增加了空白空间\n\nresize2fs /dev/... 更新文件系统 使空白空间得以有身份（文件系统）\n```\n\n### disk VGの追加\n```bash\npvcreat /dev/sdd(new)\n\nvgexpend 集name /dev/sdd\n```\n\n## 网络\n### SSH 远程终端控制\n`ssh root(usrname)@192.168.^.^   (IP)`\n输入密码错误之后——就…之前解决过，然而忘了上次怎么解决的了(京东云)反正这次是等着等着突然就能连接了。 以后可得把解决方案记录到这儿ヽ(*。>Д<)o゜\n\n另外，`ssh`公钥🔑连接方式可以参考`makethingseasy`中的描写。\n### ping 测试连通\nmtr 测试网络+每个路由信息\n`* + IP `\n\n### VNC 桌面远程\nEmmmm 当时还写了这个？现在倒是用这个在链接树莓派o(∩∩)o...哈哈(2021-04-22)\n\n## 壓縮打包\n- `tar -zxvf **.tar.gz`: `.tar.gz`\n- `tar -jxvf **.tar.bz2`: `.tar.bz2`\n### tar\n```shell\n    tar xvzf fileName.tar.gz\n    tar cvzf fileName.tar.gz targerName\n```\n`x`: 解压  `c` : 压缩\n\n## Ubuntu 16.04 升级 Ubuntu 18.04\n___ 经尝试真的不如备份自我资料后重装……因为太…慢…了…   更新还不稳。\n[^_^]:\n    2018年6月5日13点44分\n\n其实还好…   就是更新速度慢了点儿。早不到十点更新到了下午13点38分。不过基于是一键式的所以还是有多点儿好处的。\n更新命令\n```bash\nsudo do-release-upgrade\n# 提示是没法找到可用更新…\n# 所以  之后增加了\n-c\n# 还是不行\n-d \n# 参数完成更新\n```\n但是`python`被重装了！！！！ 里面的包都没了…🐎a算了，好在软件级别的东西都还在…另外`pip`也损坏了，`apt`安装也失败，后面我就用了`.py`脚本重新安装，所以`apt`卸载再重装没试，不知道行不行。 收回前面“软件级别的都还在”，其实软件级别的也待测。\n\n## 设定系统常量\n在用户目录下`profile`文件中可通过`export` 增加(一般来说是增加路径)\n```bash\nexport IAN=/mnt/c/Users/ian\nsourse ~/.profile\n```\n之后便可通过`cd $IAN` 来访问`win`下的用户目录。当然，这个方法是在添加`GoPath`时注意到的。\n\n\n[^_^]:\n    2018年6月5日10点25分\n\nemm  其实在`/etc/profile` 文件下才是系统王道\n\n### ps\n今年面试还碰到个问这个问题，说什么是变量..... 把我给整蒙了.....\n结果一番问下才发现他想问的就是放在`/etc/profile`和`~/.profile`里有啥区别，\n\n啥是`系统,用户,会话`级变量.唉.. 有时候突然听到基本问题就觉得对方是不是有什么深意...\n[^_^]:\n    2021年4月22日11点52分\n\n## tmux 虚拟多终端\n类似于vim多窗口编辑一类的东西，emm 或者说图形化`ubuntu`使用`ctrl+alt+t`叫出来的东西。这么一对比的话就是无界面化的虚拟终端——那个是界面里的虚拟终端嘛。 用于解决`ssh`连接远程开启应用，断开后不关闭进程的方案。因为`nohup`好像并不稳定的样子……\n不过用起来… 不太了解怎么这就能够持久化了…因为毕竟是虚拟窗口，间`makethingseasy`中，其实…好像…大概…没什么关系吧。这两者。\n\n## 最大文件数/单进程最大文件数\n`bump fs.nr_open + fs.max-file to their largest possible values`\n\n```bash\ncat /proc/sys/fs/file-max\ncat /proc/sys/fs/nr_open\n```\n今天(2021-04-22)看`epoll`的时候好奇看了一下,发现我的fs/file-max居然有`9223372036854775807`震惊一下.","published":1,"updated":"2021-05-08T02:56:02.688Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9cn000wu3yqfz8vgjk8","content":"<p><img src=\"https://static1.makeuseofimages.com/wp-content/uploads/2015/01/best-linux-distros.jpg\" alt=\"linux\"></p>\n<h2 id=\"WSL\"><a href=\"#WSL\" class=\"headerlink\" title=\"WSL\"></a>WSL</h2><p><a href=\"https://github.com/IanVzs/ianvzs.github.io/issues/7\">wsl问题</a><br>因为后面不太喜欢这种东西了,还是上了物理机. 所以就不粘贴过来了.</p>\n<h2 id=\"sudo-apt-upgrade\"><a href=\"#sudo-apt-upgrade\" class=\"headerlink\" title=\"sudo apt upgrade\"></a>sudo apt upgrade</h2><blockquote>\n<p>E: Sub-process /usr/bin/dpkg returned an error code (1)</p>\n</blockquote>\n<h3 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h3><p><em>sudu下</em></p>\n<ol>\n<li>备份<code>/var/lib/dpkg/info</code></li>\n<li>新建<code>/var/lib/dpkg/info</code></li>\n<li>重新执行更新</li>\n<li>合并<code>/var/lib/dpkg/info</code> 和 备份文件</li>\n<li>完</li>\n</ol>\n<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>非原理性解决方案, 若解决不了, 另寻他法或者需要直击灵魂.</p>\n<h2 id=\"磁盘操作\"><a href=\"#磁盘操作\" class=\"headerlink\" title=\"磁盘操作\"></a>磁盘操作</h2><h3 id=\"NTFS\"><a href=\"#NTFS\" class=\"headerlink\" title=\"NTFS\"></a>NTFS</h3><h4 id=\"一般发行版\"><a href=\"#一般发行版\" class=\"headerlink\" title=\"一般发行版\"></a>一般发行版</h4><p>在此中可以使用<code>ntfsfix</code>, 不过刚才看了一圈儿, 好像, 这工具就是来源于下面所介绍的</p>\n<h4 id=\"树莓派\"><a href=\"#树莓派\" class=\"headerlink\" title=\"树莓派\"></a>树莓派</h4><p>因为没有预装<code>ntfsfix</code>, 所以</p>\n<ul>\n<li>安装 <code>ntfs-3g</code> 很久远的工具: <code>sudo apt install ntfs-3g</code> (看3g就知道年代久远 😄)</li>\n<li>取消挂载, <code>sudo umount /dev/sda&#123;N&#125;</code></li>\n<li>重新挂载, <code>mount –t ntfs /dev/sda&#123;n&#125; /media/pi</code></li>\n</ul>\n<p>就可以有<code>读写</code>权限了. 不然只有读的, 挺不好的.</p>\n<p>不过在windows放了缓存在里面的话就没办法挂载为<code>可写</code>了， 方法是取消Win的快速启动功能后关机，不使用休眠.</p>\n<h3 id=\"磁盘查询命令\"><a href=\"#磁盘查询命令\" class=\"headerlink\" title=\"磁盘查询命令\"></a>磁盘查询命令</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fdisk -l</span><br><span class=\"line\">df -h</span><br></pre></td></tr></table></figure>\n\n<p>LVM概要（がいよう）</p>\n<p><strong>自弁の理解</strong>：</p>\n<ul>\n<li>将零散的集合起来，再进行动态分组。</li>\n<li>PV &gt;&gt; VG &gt;&gt; LV</li>\n</ul>\n<h3 id=\"じゃあ作成（さくせい）：\"><a href=\"#じゃあ作成（さくせい）：\" class=\"headerlink\" title=\"じゃあ作成（さくせい）：\"></a><strong>じゃあ作成（さくせい）</strong>：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreat disk1 disk2 di3 ...　<span class=\"comment\"># 集合</span></span><br><span class=\"line\">pvs|pvdisplay</span><br><span class=\"line\"></span><br><span class=\"line\">vgcreat 集合name 1 2 3 ...  <span class=\"comment\"># 集合</span></span><br><span class=\"line\"></span><br><span class=\"line\">vgs|vgdisplay</span><br><span class=\"line\"></span><br><span class=\"line\">lvcreat -n name -L size 集name </span><br><span class=\"line\">lvs|lvdisplay</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"格式化磁盘\"><a href=\"#格式化磁盘\" class=\"headerlink\" title=\"格式化磁盘:\"></a><strong>格式化磁盘:</strong></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkfs.ext4 /dev/集name/name  <span class=\"comment\"># 格式化此（PS：路径为所示）</span></span><br></pre></td></tr></table></figure>\n<p><strong>注:</strong> 不过要采用这种方法来给Linux扩容的话需要之前时就选定Linux磁盘管理为LVM，否则主目录在之后不能添加lv组，也就谈不上添加。</p>\n<h3 id=\"LVMの削除（さくじょ）：\"><a href=\"#LVMの削除（さくじょ）：\" class=\"headerlink\" title=\"LVMの削除（さくじょ）：\"></a>LVMの削除（さくじょ）：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LV  lvremove /dev/... </span><br><span class=\"line\">VG  vgremove 集name</span><br><span class=\"line\">PV(物理卷) pvremove /dev/...</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"disk-LVの追加（ついか）：\"><a href=\"#disk-LVの追加（ついか）：\" class=\"headerlink\" title=\"disk LVの追加（ついか）：\"></a>disk LVの追加（ついか）：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvexpend -L +1G /dev/集name/name</span><br><span class=\"line\"><span class=\"comment\"># 增加了空白空间</span></span><br><span class=\"line\"></span><br><span class=\"line\">resize2fs /dev/... 更新文件系统 使空白空间得以有身份（文件系统）</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"disk-VGの追加\"><a href=\"#disk-VGの追加\" class=\"headerlink\" title=\"disk VGの追加\"></a>disk VGの追加</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreat /dev/sdd(new)</span><br><span class=\"line\"></span><br><span class=\"line\">vgexpend 集name /dev/sdd</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"网络\"><a href=\"#网络\" class=\"headerlink\" title=\"网络\"></a>网络</h2><h3 id=\"SSH-远程终端控制\"><a href=\"#SSH-远程终端控制\" class=\"headerlink\" title=\"SSH 远程终端控制\"></a>SSH 远程终端控制</h3><p><code>ssh root(usrname)@192.168.^.^   (IP)</code><br>输入密码错误之后——就…之前解决过，然而忘了上次怎么解决的了(京东云)反正这次是等着等着突然就能连接了。 以后可得把解决方案记录到这儿ヽ(*。&gt;Д&lt;)o゜</p>\n<p>另外，<code>ssh</code>公钥🔑连接方式可以参考<code>makethingseasy</code>中的描写。</p>\n<h3 id=\"ping-测试连通\"><a href=\"#ping-测试连通\" class=\"headerlink\" title=\"ping 测试连通\"></a>ping 测试连通</h3><p>mtr 测试网络+每个路由信息<br><code>* + IP </code></p>\n<h3 id=\"VNC-桌面远程\"><a href=\"#VNC-桌面远程\" class=\"headerlink\" title=\"VNC 桌面远程\"></a>VNC 桌面远程</h3><p>Emmmm 当时还写了这个？现在倒是用这个在链接树莓派o(∩∩)o…哈哈(2021-04-22)</p>\n<h2 id=\"壓縮打包\"><a href=\"#壓縮打包\" class=\"headerlink\" title=\"壓縮打包\"></a>壓縮打包</h2><ul>\n<li><code>tar -zxvf **.tar.gz</code>: <code>.tar.gz</code></li>\n<li><code>tar -jxvf **.tar.bz2</code>: <code>.tar.bz2</code><h3 id=\"tar\"><a href=\"#tar\" class=\"headerlink\" title=\"tar\"></a>tar</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xvzf fileName.tar.gz</span><br><span class=\"line\">tar cvzf fileName.tar.gz targerName</span><br></pre></td></tr></table></figure>\n<code>x</code>: 解压  <code>c</code> : 压缩</li>\n</ul>\n<h2 id=\"Ubuntu-16-04-升级-Ubuntu-18-04\"><a href=\"#Ubuntu-16-04-升级-Ubuntu-18-04\" class=\"headerlink\" title=\"Ubuntu 16.04 升级 Ubuntu 18.04\"></a>Ubuntu 16.04 升级 Ubuntu 18.04</h2><p>___ 经尝试真的不如备份自我资料后重装……因为太…慢…了…   更新还不稳。<br><a href=\"2018%E5%B9%B46%E6%9C%885%E6%97%A510%E7%82%B925%E5%88%86\">^_^</a>:<br>    2018年6月5日13点44分</p>\n<p>其实还好…   就是更新速度慢了点儿。早不到十点更新到了下午13点38分。不过基于是一键式的所以还是有多点儿好处的。<br>更新命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo do-release-upgrade</span><br><span class=\"line\"><span class=\"comment\"># 提示是没法找到可用更新…</span></span><br><span class=\"line\"><span class=\"comment\"># 所以  之后增加了</span></span><br><span class=\"line\">-c</span><br><span class=\"line\"><span class=\"comment\"># 还是不行</span></span><br><span class=\"line\">-d </span><br><span class=\"line\"><span class=\"comment\"># 参数完成更新</span></span><br></pre></td></tr></table></figure>\n<p>但是<code>python</code>被重装了！！！！ 里面的包都没了…🐎a算了，好在软件级别的东西都还在…另外<code>pip</code>也损坏了，<code>apt</code>安装也失败，后面我就用了<code>.py</code>脚本重新安装，所以<code>apt</code>卸载再重装没试，不知道行不行。 收回前面“软件级别的都还在”，其实软件级别的也待测。</p>\n<h2 id=\"设定系统常量\"><a href=\"#设定系统常量\" class=\"headerlink\" title=\"设定系统常量\"></a>设定系统常量</h2><p>在用户目录下<code>profile</code>文件中可通过<code>export</code> 增加(一般来说是增加路径)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> IAN=/mnt/c/Users/ian</span><br><span class=\"line\">sourse ~/.profile</span><br></pre></td></tr></table></figure>\n<p>之后便可通过<code>cd $IAN</code> 来访问<code>win</code>下的用户目录。当然，这个方法是在添加<code>GoPath</code>时注意到的。</p>\n<p>emm  其实在<code>/etc/profile</code> 文件下才是系统王道</p>\n<h3 id=\"ps\"><a href=\"#ps\" class=\"headerlink\" title=\"ps\"></a>ps</h3><p>今年面试还碰到个问这个问题，说什么是变量….. 把我给整蒙了…..<br>结果一番问下才发现他想问的就是放在<code>/etc/profile</code>和<code>~/.profile</code>里有啥区别，</p>\n<p>啥是<code>系统,用户,会话</code>级变量.唉.. 有时候突然听到基本问题就觉得对方是不是有什么深意…<br><a href=\"2018%E5%B9%B46%E6%9C%885%E6%97%A510%E7%82%B925%E5%88%86\">^_^</a>:<br>    2021年4月22日11点52分</p>\n<h2 id=\"tmux-虚拟多终端\"><a href=\"#tmux-虚拟多终端\" class=\"headerlink\" title=\"tmux 虚拟多终端\"></a>tmux 虚拟多终端</h2><p>类似于vim多窗口编辑一类的东西，emm 或者说图形化<code>ubuntu</code>使用<code>ctrl+alt+t</code>叫出来的东西。这么一对比的话就是无界面化的虚拟终端——那个是界面里的虚拟终端嘛。 用于解决<code>ssh</code>连接远程开启应用，断开后不关闭进程的方案。因为<code>nohup</code>好像并不稳定的样子……<br>不过用起来… 不太了解怎么这就能够持久化了…因为毕竟是虚拟窗口，间<code>makethingseasy</code>中，其实…好像…大概…没什么关系吧。这两者。</p>\n<h2 id=\"最大文件数-单进程最大文件数\"><a href=\"#最大文件数-单进程最大文件数\" class=\"headerlink\" title=\"最大文件数/单进程最大文件数\"></a>最大文件数/单进程最大文件数</h2><p><code>bump fs.nr_open + fs.max-file to their largest possible values</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /proc/sys/fs/file-max</span><br><span class=\"line\">cat /proc/sys/fs/nr_open</span><br></pre></td></tr></table></figure>\n<p>今天(2021-04-22)看<code>epoll</code>的时候好奇看了一下,发现我的fs/file-max居然有<code>9223372036854775807</code>震惊一下.</p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://static1.makeuseofimages.com/wp-content/uploads/2015/01/best-linux-distros.jpg\" alt=\"linux\"></p>\n<h2 id=\"WSL\"><a href=\"#WSL\" class=\"headerlink\" title=\"WSL\"></a>WSL</h2><p><a href=\"https://github.com/IanVzs/ianvzs.github.io/issues/7\">wsl问题</a><br>因为后面不太喜欢这种东西了,还是上了物理机. 所以就不粘贴过来了.</p>\n<h2 id=\"sudo-apt-upgrade\"><a href=\"#sudo-apt-upgrade\" class=\"headerlink\" title=\"sudo apt upgrade\"></a>sudo apt upgrade</h2><blockquote>\n<p>E: Sub-process /usr/bin/dpkg returned an error code (1)</p>\n</blockquote>\n<h3 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h3><p><em>sudu下</em></p>\n<ol>\n<li>备份<code>/var/lib/dpkg/info</code></li>\n<li>新建<code>/var/lib/dpkg/info</code></li>\n<li>重新执行更新</li>\n<li>合并<code>/var/lib/dpkg/info</code> 和 备份文件</li>\n<li>完</li>\n</ol>\n<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>非原理性解决方案, 若解决不了, 另寻他法或者需要直击灵魂.</p>\n<h2 id=\"磁盘操作\"><a href=\"#磁盘操作\" class=\"headerlink\" title=\"磁盘操作\"></a>磁盘操作</h2><h3 id=\"NTFS\"><a href=\"#NTFS\" class=\"headerlink\" title=\"NTFS\"></a>NTFS</h3><h4 id=\"一般发行版\"><a href=\"#一般发行版\" class=\"headerlink\" title=\"一般发行版\"></a>一般发行版</h4><p>在此中可以使用<code>ntfsfix</code>, 不过刚才看了一圈儿, 好像, 这工具就是来源于下面所介绍的</p>\n<h4 id=\"树莓派\"><a href=\"#树莓派\" class=\"headerlink\" title=\"树莓派\"></a>树莓派</h4><p>因为没有预装<code>ntfsfix</code>, 所以</p>\n<ul>\n<li>安装 <code>ntfs-3g</code> 很久远的工具: <code>sudo apt install ntfs-3g</code> (看3g就知道年代久远 😄)</li>\n<li>取消挂载, <code>sudo umount /dev/sda&#123;N&#125;</code></li>\n<li>重新挂载, <code>mount –t ntfs /dev/sda&#123;n&#125; /media/pi</code></li>\n</ul>\n<p>就可以有<code>读写</code>权限了. 不然只有读的, 挺不好的.</p>\n<p>不过在windows放了缓存在里面的话就没办法挂载为<code>可写</code>了， 方法是取消Win的快速启动功能后关机，不使用休眠.</p>\n<h3 id=\"磁盘查询命令\"><a href=\"#磁盘查询命令\" class=\"headerlink\" title=\"磁盘查询命令\"></a>磁盘查询命令</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fdisk -l</span><br><span class=\"line\">df -h</span><br></pre></td></tr></table></figure>\n\n<p>LVM概要（がいよう）</p>\n<p><strong>自弁の理解</strong>：</p>\n<ul>\n<li>将零散的集合起来，再进行动态分组。</li>\n<li>PV &gt;&gt; VG &gt;&gt; LV</li>\n</ul>\n<h3 id=\"じゃあ作成（さくせい）：\"><a href=\"#じゃあ作成（さくせい）：\" class=\"headerlink\" title=\"じゃあ作成（さくせい）：\"></a><strong>じゃあ作成（さくせい）</strong>：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreat disk1 disk2 di3 ...　<span class=\"comment\"># 集合</span></span><br><span class=\"line\">pvs|pvdisplay</span><br><span class=\"line\"></span><br><span class=\"line\">vgcreat 集合name 1 2 3 ...  <span class=\"comment\"># 集合</span></span><br><span class=\"line\"></span><br><span class=\"line\">vgs|vgdisplay</span><br><span class=\"line\"></span><br><span class=\"line\">lvcreat -n name -L size 集name </span><br><span class=\"line\">lvs|lvdisplay</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"格式化磁盘\"><a href=\"#格式化磁盘\" class=\"headerlink\" title=\"格式化磁盘:\"></a><strong>格式化磁盘:</strong></h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkfs.ext4 /dev/集name/name  <span class=\"comment\"># 格式化此（PS：路径为所示）</span></span><br></pre></td></tr></table></figure>\n<p><strong>注:</strong> 不过要采用这种方法来给Linux扩容的话需要之前时就选定Linux磁盘管理为LVM，否则主目录在之后不能添加lv组，也就谈不上添加。</p>\n<h3 id=\"LVMの削除（さくじょ）：\"><a href=\"#LVMの削除（さくじょ）：\" class=\"headerlink\" title=\"LVMの削除（さくじょ）：\"></a>LVMの削除（さくじょ）：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LV  lvremove /dev/... </span><br><span class=\"line\">VG  vgremove 集name</span><br><span class=\"line\">PV(物理卷) pvremove /dev/...</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"disk-LVの追加（ついか）：\"><a href=\"#disk-LVの追加（ついか）：\" class=\"headerlink\" title=\"disk LVの追加（ついか）：\"></a>disk LVの追加（ついか）：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lvexpend -L +1G /dev/集name/name</span><br><span class=\"line\"><span class=\"comment\"># 增加了空白空间</span></span><br><span class=\"line\"></span><br><span class=\"line\">resize2fs /dev/... 更新文件系统 使空白空间得以有身份（文件系统）</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"disk-VGの追加\"><a href=\"#disk-VGの追加\" class=\"headerlink\" title=\"disk VGの追加\"></a>disk VGの追加</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pvcreat /dev/sdd(new)</span><br><span class=\"line\"></span><br><span class=\"line\">vgexpend 集name /dev/sdd</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"网络\"><a href=\"#网络\" class=\"headerlink\" title=\"网络\"></a>网络</h2><h3 id=\"SSH-远程终端控制\"><a href=\"#SSH-远程终端控制\" class=\"headerlink\" title=\"SSH 远程终端控制\"></a>SSH 远程终端控制</h3><p><code>ssh root(usrname)@192.168.^.^   (IP)</code><br>输入密码错误之后——就…之前解决过，然而忘了上次怎么解决的了(京东云)反正这次是等着等着突然就能连接了。 以后可得把解决方案记录到这儿ヽ(*。&gt;Д&lt;)o゜</p>\n<p>另外，<code>ssh</code>公钥🔑连接方式可以参考<code>makethingseasy</code>中的描写。</p>\n<h3 id=\"ping-测试连通\"><a href=\"#ping-测试连通\" class=\"headerlink\" title=\"ping 测试连通\"></a>ping 测试连通</h3><p>mtr 测试网络+每个路由信息<br><code>* + IP </code></p>\n<h3 id=\"VNC-桌面远程\"><a href=\"#VNC-桌面远程\" class=\"headerlink\" title=\"VNC 桌面远程\"></a>VNC 桌面远程</h3><p>Emmmm 当时还写了这个？现在倒是用这个在链接树莓派o(∩∩)o…哈哈(2021-04-22)</p>\n<h2 id=\"壓縮打包\"><a href=\"#壓縮打包\" class=\"headerlink\" title=\"壓縮打包\"></a>壓縮打包</h2><ul>\n<li><code>tar -zxvf **.tar.gz</code>: <code>.tar.gz</code></li>\n<li><code>tar -jxvf **.tar.bz2</code>: <code>.tar.bz2</code><h3 id=\"tar\"><a href=\"#tar\" class=\"headerlink\" title=\"tar\"></a>tar</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar xvzf fileName.tar.gz</span><br><span class=\"line\">tar cvzf fileName.tar.gz targerName</span><br></pre></td></tr></table></figure>\n<code>x</code>: 解压  <code>c</code> : 压缩</li>\n</ul>\n<h2 id=\"Ubuntu-16-04-升级-Ubuntu-18-04\"><a href=\"#Ubuntu-16-04-升级-Ubuntu-18-04\" class=\"headerlink\" title=\"Ubuntu 16.04 升级 Ubuntu 18.04\"></a>Ubuntu 16.04 升级 Ubuntu 18.04</h2><p>___ 经尝试真的不如备份自我资料后重装……因为太…慢…了…   更新还不稳。<br><a href=\"2018%E5%B9%B46%E6%9C%885%E6%97%A510%E7%82%B925%E5%88%86\">^_^</a>:<br>    2018年6月5日13点44分</p>\n<p>其实还好…   就是更新速度慢了点儿。早不到十点更新到了下午13点38分。不过基于是一键式的所以还是有多点儿好处的。<br>更新命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo do-release-upgrade</span><br><span class=\"line\"><span class=\"comment\"># 提示是没法找到可用更新…</span></span><br><span class=\"line\"><span class=\"comment\"># 所以  之后增加了</span></span><br><span class=\"line\">-c</span><br><span class=\"line\"><span class=\"comment\"># 还是不行</span></span><br><span class=\"line\">-d </span><br><span class=\"line\"><span class=\"comment\"># 参数完成更新</span></span><br></pre></td></tr></table></figure>\n<p>但是<code>python</code>被重装了！！！！ 里面的包都没了…🐎a算了，好在软件级别的东西都还在…另外<code>pip</code>也损坏了，<code>apt</code>安装也失败，后面我就用了<code>.py</code>脚本重新安装，所以<code>apt</code>卸载再重装没试，不知道行不行。 收回前面“软件级别的都还在”，其实软件级别的也待测。</p>\n<h2 id=\"设定系统常量\"><a href=\"#设定系统常量\" class=\"headerlink\" title=\"设定系统常量\"></a>设定系统常量</h2><p>在用户目录下<code>profile</code>文件中可通过<code>export</code> 增加(一般来说是增加路径)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> IAN=/mnt/c/Users/ian</span><br><span class=\"line\">sourse ~/.profile</span><br></pre></td></tr></table></figure>\n<p>之后便可通过<code>cd $IAN</code> 来访问<code>win</code>下的用户目录。当然，这个方法是在添加<code>GoPath</code>时注意到的。</p>\n<p>emm  其实在<code>/etc/profile</code> 文件下才是系统王道</p>\n<h3 id=\"ps\"><a href=\"#ps\" class=\"headerlink\" title=\"ps\"></a>ps</h3><p>今年面试还碰到个问这个问题，说什么是变量….. 把我给整蒙了…..<br>结果一番问下才发现他想问的就是放在<code>/etc/profile</code>和<code>~/.profile</code>里有啥区别，</p>\n<p>啥是<code>系统,用户,会话</code>级变量.唉.. 有时候突然听到基本问题就觉得对方是不是有什么深意…<br><a href=\"2018%E5%B9%B46%E6%9C%885%E6%97%A510%E7%82%B925%E5%88%86\">^_^</a>:<br>    2021年4月22日11点52分</p>\n<h2 id=\"tmux-虚拟多终端\"><a href=\"#tmux-虚拟多终端\" class=\"headerlink\" title=\"tmux 虚拟多终端\"></a>tmux 虚拟多终端</h2><p>类似于vim多窗口编辑一类的东西，emm 或者说图形化<code>ubuntu</code>使用<code>ctrl+alt+t</code>叫出来的东西。这么一对比的话就是无界面化的虚拟终端——那个是界面里的虚拟终端嘛。 用于解决<code>ssh</code>连接远程开启应用，断开后不关闭进程的方案。因为<code>nohup</code>好像并不稳定的样子……<br>不过用起来… 不太了解怎么这就能够持久化了…因为毕竟是虚拟窗口，间<code>makethingseasy</code>中，其实…好像…大概…没什么关系吧。这两者。</p>\n<h2 id=\"最大文件数-单进程最大文件数\"><a href=\"#最大文件数-单进程最大文件数\" class=\"headerlink\" title=\"最大文件数/单进程最大文件数\"></a>最大文件数/单进程最大文件数</h2><p><code>bump fs.nr_open + fs.max-file to their largest possible values</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /proc/sys/fs/file-max</span><br><span class=\"line\">cat /proc/sys/fs/nr_open</span><br></pre></td></tr></table></figure>\n<p>今天(2021-04-22)看<code>epoll</code>的时候好奇看了一下,发现我的fs/file-max居然有<code>9223372036854775807</code>震惊一下.</p>\n"},{"title":"各个软件换源","date":"2021-04-22T09:04:15.000Z","_content":"\n![mu ou](http://img.hc360.com/broadcast/info/images/200909/200909101744424019.jpg \"ma liang\")\n\n在国内用原源都会很慢, 所以总结一下各个软件(?吧)换源方法.\n## Python\n```bash\npip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpy等包名)\n```\n\n## Npm\n不过好像换了会有问题.Npm各个包依赖混乱不堪,不忍直视.\n```bash\nnpm install --registry=https://registry.npm.taobao.org\n```\n\n## Ubuntu\n地址: `/etc/apt/sources.list`\n\n注意`备份`, `sudo` 权限\n### 文件内容如下, 原源部分没有粘贴完全\n#### 20.04 Focal Fossa\n```\n# 国内源\n# Ali\ndeb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse\n\n# QH\n# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse\n\n# See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to\n# newer versions of the distribution.\ndeb http://archive.ubuntu.com/ubuntu/ focal main restricted\n# deb-src http://archive.ubuntu.com/ubuntu/ focal main restricted\n\n## Major bug fix updates produced after the final release of the\n## distribution.\ndeb http://archive.ubuntu.com/ubuntu/ focal-updates main restricted\n# deb-src http://archive.ubuntu.com/ubuntu/ focal-updates main restricted\n\n\n# 原源(以下可保存也可不保存吧, 以上可选其一也可全部都放着, 目前没啥问题)\n## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu\n## team. Also, please note that software in universe WILL NOT receive any\n## review or updates from the Ubuntu security team.\n```\n\n## Pi\n...\n\n## Python\n```bash\n```\n\n## Python\n```bash\n```","source":"_posts/tips/for_china.md","raw":"---\ntitle: 各个软件换源\ndate: 2021-04-22 17:04:15\ncategories: [tip, 换源]\ntags: \n---\n\n![mu ou](http://img.hc360.com/broadcast/info/images/200909/200909101744424019.jpg \"ma liang\")\n\n在国内用原源都会很慢, 所以总结一下各个软件(?吧)换源方法.\n## Python\n```bash\npip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpy等包名)\n```\n\n## Npm\n不过好像换了会有问题.Npm各个包依赖混乱不堪,不忍直视.\n```bash\nnpm install --registry=https://registry.npm.taobao.org\n```\n\n## Ubuntu\n地址: `/etc/apt/sources.list`\n\n注意`备份`, `sudo` 权限\n### 文件内容如下, 原源部分没有粘贴完全\n#### 20.04 Focal Fossa\n```\n# 国内源\n# Ali\ndeb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse\n\n# QH\n# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse\n\n# See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to\n# newer versions of the distribution.\ndeb http://archive.ubuntu.com/ubuntu/ focal main restricted\n# deb-src http://archive.ubuntu.com/ubuntu/ focal main restricted\n\n## Major bug fix updates produced after the final release of the\n## distribution.\ndeb http://archive.ubuntu.com/ubuntu/ focal-updates main restricted\n# deb-src http://archive.ubuntu.com/ubuntu/ focal-updates main restricted\n\n\n# 原源(以下可保存也可不保存吧, 以上可选其一也可全部都放着, 目前没啥问题)\n## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu\n## team. Also, please note that software in universe WILL NOT receive any\n## review or updates from the Ubuntu security team.\n```\n\n## Pi\n...\n\n## Python\n```bash\n```\n\n## Python\n```bash\n```","slug":"tips/for_china","published":1,"updated":"2021-05-08T02:56:02.692Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9cr000yu3yqe3fl0fby","content":"<p><img src=\"http://img.hc360.com/broadcast/info/images/200909/200909101744424019.jpg\" alt=\"mu ou\" title=\"ma liang\"></p>\n<p>在国内用原源都会很慢, 所以总结一下各个软件(?吧)换源方法.</p>\n<h2 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpy等包名)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Npm\"><a href=\"#Npm\" class=\"headerlink\" title=\"Npm\"></a>Npm</h2><p>不过好像换了会有问题.Npm各个包依赖混乱不堪,不忍直视.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h2><p>地址: <code>/etc/apt/sources.list</code></p>\n<p>注意<code>备份</code>, <code>sudo</code> 权限</p>\n<h3 id=\"文件内容如下-原源部分没有粘贴完全\"><a href=\"#文件内容如下-原源部分没有粘贴完全\" class=\"headerlink\" title=\"文件内容如下, 原源部分没有粘贴完全\"></a>文件内容如下, 原源部分没有粘贴完全</h3><h4 id=\"20-04-Focal-Fossa\"><a href=\"#20-04-Focal-Fossa\" class=\"headerlink\" title=\"20.04 Focal Fossa\"></a>20.04 Focal Fossa</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 国内源</span><br><span class=\"line\"># Ali</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal main restricted universe multiverse</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-security main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-security main restricted universe multiverse</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiverse</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-proposed main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-proposed main restricted universe multiverse</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\"># QH</span><br><span class=\"line\"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br><span class=\"line\">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal main restricted universe multiverse</span><br><span class=\"line\"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal main restricted universe multiverse</span><br><span class=\"line\">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiverse</span><br><span class=\"line\"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiverse</span><br><span class=\"line\">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse</span><br><span class=\"line\"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse</span><br><span class=\"line\">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-security main restricted universe multiverse</span><br><span class=\"line\"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-security main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\"># See http:&#x2F;&#x2F;help.ubuntu.com&#x2F;community&#x2F;UpgradeNotes for how to upgrade to</span><br><span class=\"line\"># newer versions of the distribution.</span><br><span class=\"line\">deb http:&#x2F;&#x2F;archive.ubuntu.com&#x2F;ubuntu&#x2F; focal main restricted</span><br><span class=\"line\"># deb-src http:&#x2F;&#x2F;archive.ubuntu.com&#x2F;ubuntu&#x2F; focal main restricted</span><br><span class=\"line\"></span><br><span class=\"line\">## Major bug fix updates produced after the final release of the</span><br><span class=\"line\">## distribution.</span><br><span class=\"line\">deb http:&#x2F;&#x2F;archive.ubuntu.com&#x2F;ubuntu&#x2F; focal-updates main restricted</span><br><span class=\"line\"># deb-src http:&#x2F;&#x2F;archive.ubuntu.com&#x2F;ubuntu&#x2F; focal-updates main restricted</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># 原源(以下可保存也可不保存吧, 以上可选其一也可全部都放着, 目前没啥问题)</span><br><span class=\"line\">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span><br><span class=\"line\">## team. Also, please note that software in universe WILL NOT receive any</span><br><span class=\"line\">## review or updates from the Ubuntu security team.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Pi\"><a href=\"#Pi\" class=\"headerlink\" title=\"Pi\"></a>Pi</h2><p>…</p>\n<h2 id=\"Python-1\"><a href=\"#Python-1\" class=\"headerlink\" title=\"Python\"></a>Python</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">```</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## Python</span></span><br><span class=\"line\">```bash</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"http://img.hc360.com/broadcast/info/images/200909/200909101744424019.jpg\" alt=\"mu ou\" title=\"ma liang\"></p>\n<p>在国内用原源都会很慢, 所以总结一下各个软件(?吧)换源方法.</p>\n<h2 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpy等包名)</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Npm\"><a href=\"#Npm\" class=\"headerlink\" title=\"Npm\"></a>Npm</h2><p>不过好像换了会有问题.Npm各个包依赖混乱不堪,不忍直视.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h2><p>地址: <code>/etc/apt/sources.list</code></p>\n<p>注意<code>备份</code>, <code>sudo</code> 权限</p>\n<h3 id=\"文件内容如下-原源部分没有粘贴完全\"><a href=\"#文件内容如下-原源部分没有粘贴完全\" class=\"headerlink\" title=\"文件内容如下, 原源部分没有粘贴完全\"></a>文件内容如下, 原源部分没有粘贴完全</h3><h4 id=\"20-04-Focal-Fossa\"><a href=\"#20-04-Focal-Fossa\" class=\"headerlink\" title=\"20.04 Focal Fossa\"></a>20.04 Focal Fossa</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 国内源</span><br><span class=\"line\"># Ali</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal main restricted universe multiverse</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-security main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-security main restricted universe multiverse</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiverse</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-proposed main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-proposed main restricted universe multiverse</span><br><span class=\"line\">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse</span><br><span class=\"line\">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\"># QH</span><br><span class=\"line\"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br><span class=\"line\">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal main restricted universe multiverse</span><br><span class=\"line\"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal main restricted universe multiverse</span><br><span class=\"line\">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiverse</span><br><span class=\"line\"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-updates main restricted universe multiverse</span><br><span class=\"line\">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse</span><br><span class=\"line\"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-backports main restricted universe multiverse</span><br><span class=\"line\">deb https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-security main restricted universe multiverse</span><br><span class=\"line\"># deb-src https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;ubuntu&#x2F; focal-security main restricted universe multiverse</span><br><span class=\"line\"></span><br><span class=\"line\"># See http:&#x2F;&#x2F;help.ubuntu.com&#x2F;community&#x2F;UpgradeNotes for how to upgrade to</span><br><span class=\"line\"># newer versions of the distribution.</span><br><span class=\"line\">deb http:&#x2F;&#x2F;archive.ubuntu.com&#x2F;ubuntu&#x2F; focal main restricted</span><br><span class=\"line\"># deb-src http:&#x2F;&#x2F;archive.ubuntu.com&#x2F;ubuntu&#x2F; focal main restricted</span><br><span class=\"line\"></span><br><span class=\"line\">## Major bug fix updates produced after the final release of the</span><br><span class=\"line\">## distribution.</span><br><span class=\"line\">deb http:&#x2F;&#x2F;archive.ubuntu.com&#x2F;ubuntu&#x2F; focal-updates main restricted</span><br><span class=\"line\"># deb-src http:&#x2F;&#x2F;archive.ubuntu.com&#x2F;ubuntu&#x2F; focal-updates main restricted</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"># 原源(以下可保存也可不保存吧, 以上可选其一也可全部都放着, 目前没啥问题)</span><br><span class=\"line\">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span><br><span class=\"line\">## team. Also, please note that software in universe WILL NOT receive any</span><br><span class=\"line\">## review or updates from the Ubuntu security team.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Pi\"><a href=\"#Pi\" class=\"headerlink\" title=\"Pi\"></a>Pi</h2><p>…</p>\n<h2 id=\"Python-1\"><a href=\"#Python-1\" class=\"headerlink\" title=\"Python\"></a>Python</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">```</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">## Python</span></span><br><span class=\"line\">```bash</span><br></pre></td></tr></table></figure>"},{"title":"OpenCV","date":"2021-04-22T09:23:23.000Z","_content":"\n![opencv](https://opencv.org/wp-content/uploads/2020/07/cropped-OpenCV_logo_white_600x.png \"cv\")\n## 问题(libSM.so.6 缺失)\n### 运行opencv的代码时，报以下错误：\n```\nTraceback (most recent call last):\n  File \"data_generator.py\", line 24, in <module>\n    import cv2\n  File \"/usr/local/lib/python3.5/dist-packages/cv2/__init__.py\", line 3, in <module>\n    from .cv2 import *\nImportError: libSM.so.6: cannot open shared object file: No such file or directory\n```\n\n### 解决\n原因是缺少共享文件库，解决办法如下：\n\n1. 安装apt-file\n$ apt-get update\n$ apt-get install apt-file\n$ apt-file update\n\n2. 寻找依赖库\n$ apt-file search libSM.so.6\n> libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6\n> libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6.0.1\n\n根据提示，安装合适的依赖库\n$ apt-get install libsm6\n\n3. 其余文件缺失类似, 即可解决问题。","source":"_posts/tips/opencv.md","raw":"---\ntitle: OpenCV\ndate: 2021-04-22 17:23:23\ncategories: [tip, 换源]\ntags:\n---\n\n![opencv](https://opencv.org/wp-content/uploads/2020/07/cropped-OpenCV_logo_white_600x.png \"cv\")\n## 问题(libSM.so.6 缺失)\n### 运行opencv的代码时，报以下错误：\n```\nTraceback (most recent call last):\n  File \"data_generator.py\", line 24, in <module>\n    import cv2\n  File \"/usr/local/lib/python3.5/dist-packages/cv2/__init__.py\", line 3, in <module>\n    from .cv2 import *\nImportError: libSM.so.6: cannot open shared object file: No such file or directory\n```\n\n### 解决\n原因是缺少共享文件库，解决办法如下：\n\n1. 安装apt-file\n$ apt-get update\n$ apt-get install apt-file\n$ apt-file update\n\n2. 寻找依赖库\n$ apt-file search libSM.so.6\n> libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6\n> libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6.0.1\n\n根据提示，安装合适的依赖库\n$ apt-get install libsm6\n\n3. 其余文件缺失类似, 即可解决问题。","slug":"tips/opencv","published":1,"updated":"2021-05-08T02:56:02.692Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9cv0010u3yqhqur6n5c","content":"<p><img src=\"https://opencv.org/wp-content/uploads/2020/07/cropped-OpenCV_logo_white_600x.png\" alt=\"opencv\" title=\"cv\"></p>\n<h2 id=\"问题-libSM-so-6-缺失\"><a href=\"#问题-libSM-so-6-缺失\" class=\"headerlink\" title=\"问题(libSM.so.6 缺失)\"></a>问题(libSM.so.6 缺失)</h2><h3 id=\"运行opencv的代码时，报以下错误：\"><a href=\"#运行opencv的代码时，报以下错误：\" class=\"headerlink\" title=\"运行opencv的代码时，报以下错误：\"></a>运行opencv的代码时，报以下错误：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Traceback (most recent call last):</span><br><span class=\"line\">  File &quot;data_generator.py&quot;, line 24, in &lt;module&gt;</span><br><span class=\"line\">    import cv2</span><br><span class=\"line\">  File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.5&#x2F;dist-packages&#x2F;cv2&#x2F;__init__.py&quot;, line 3, in &lt;module&gt;</span><br><span class=\"line\">    from .cv2 import *</span><br><span class=\"line\">ImportError: libSM.so.6: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h3><p>原因是缺少共享文件库，解决办法如下：</p>\n<ol>\n<li><p>安装apt-file<br>$ apt-get update<br>$ apt-get install apt-file<br>$ apt-file update</p>\n</li>\n<li><p>寻找依赖库<br>$ apt-file search libSM.so.6</p>\n<blockquote>\n<p>libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6<br>libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6.0.1</p>\n</blockquote>\n</li>\n</ol>\n<p>根据提示，安装合适的依赖库<br>$ apt-get install libsm6</p>\n<ol start=\"3\">\n<li>其余文件缺失类似, 即可解决问题。</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://opencv.org/wp-content/uploads/2020/07/cropped-OpenCV_logo_white_600x.png\" alt=\"opencv\" title=\"cv\"></p>\n<h2 id=\"问题-libSM-so-6-缺失\"><a href=\"#问题-libSM-so-6-缺失\" class=\"headerlink\" title=\"问题(libSM.so.6 缺失)\"></a>问题(libSM.so.6 缺失)</h2><h3 id=\"运行opencv的代码时，报以下错误：\"><a href=\"#运行opencv的代码时，报以下错误：\" class=\"headerlink\" title=\"运行opencv的代码时，报以下错误：\"></a>运行opencv的代码时，报以下错误：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Traceback (most recent call last):</span><br><span class=\"line\">  File &quot;data_generator.py&quot;, line 24, in &lt;module&gt;</span><br><span class=\"line\">    import cv2</span><br><span class=\"line\">  File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.5&#x2F;dist-packages&#x2F;cv2&#x2F;__init__.py&quot;, line 3, in &lt;module&gt;</span><br><span class=\"line\">    from .cv2 import *</span><br><span class=\"line\">ImportError: libSM.so.6: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h3><p>原因是缺少共享文件库，解决办法如下：</p>\n<ol>\n<li><p>安装apt-file<br>$ apt-get update<br>$ apt-get install apt-file<br>$ apt-file update</p>\n</li>\n<li><p>寻找依赖库<br>$ apt-file search libSM.so.6</p>\n<blockquote>\n<p>libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6<br>libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6.0.1</p>\n</blockquote>\n</li>\n</ol>\n<p>根据提示，安装合适的依赖库<br>$ apt-get install libsm6</p>\n<ol start=\"3\">\n<li>其余文件缺失类似, 即可解决问题。</li>\n</ol>\n"},{"title":"解决问题","date":"2021-05-23T02:30:41.000Z","_content":"![问题们](https://tse2-mm.cn.bing.net/th/id/OIP.Z6kn8Zh9FDU2oe4r5ceCgAHaEK?pid=ImgDet&rs=1 \"Problem\")\n# 各种一键问题解决方案\n## Windows下Git问题\n- Linux没啥问题,但在Win下报checkout失败,路径问题\n```bash\ngit config core.protectNTFS false\n```\n\n","source":"_posts/tips/tipsOfProblems.md","raw":"---\ntitle: 解决问题\ndate: 2021-05-023 10:30:41\ncategories: [tip, problem]\ntags: [win, git]\n---\n![问题们](https://tse2-mm.cn.bing.net/th/id/OIP.Z6kn8Zh9FDU2oe4r5ceCgAHaEK?pid=ImgDet&rs=1 \"Problem\")\n# 各种一键问题解决方案\n## Windows下Git问题\n- Linux没啥问题,但在Win下报checkout失败,路径问题\n```bash\ngit config core.protectNTFS false\n```\n\n","slug":"tips/tipsOfProblems","published":1,"updated":"2021-05-23T07:43:43.879Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9d00013u3yqa72n2bnu","content":"<p><img src=\"https://tse2-mm.cn.bing.net/th/id/OIP.Z6kn8Zh9FDU2oe4r5ceCgAHaEK?pid=ImgDet&rs=1\" alt=\"问题们\" title=\"Problem\"></p>\n<h1 id=\"各种一键问题解决方案\"><a href=\"#各种一键问题解决方案\" class=\"headerlink\" title=\"各种一键问题解决方案\"></a>各种一键问题解决方案</h1><h2 id=\"Windows下Git问题\"><a href=\"#Windows下Git问题\" class=\"headerlink\" title=\"Windows下Git问题\"></a>Windows下Git问题</h2><ul>\n<li>Linux没啥问题,但在Win下报checkout失败,路径问题<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config core.protectNTFS <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://tse2-mm.cn.bing.net/th/id/OIP.Z6kn8Zh9FDU2oe4r5ceCgAHaEK?pid=ImgDet&rs=1\" alt=\"问题们\" title=\"Problem\"></p>\n<h1 id=\"各种一键问题解决方案\"><a href=\"#各种一键问题解决方案\" class=\"headerlink\" title=\"各种一键问题解决方案\"></a>各种一键问题解决方案</h1><h2 id=\"Windows下Git问题\"><a href=\"#Windows下Git问题\" class=\"headerlink\" title=\"Windows下Git问题\"></a>Windows下Git问题</h2><ul>\n<li>Linux没啥问题,但在Win下报checkout失败,路径问题<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config core.protectNTFS <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"tips Of Debuggers","date":"2019-01-10T04:21:12.000Z","_content":"\n\n### GDB\n![gdb](https://www.linuxprobe.com/wp-content/uploads/2017/02/175653ff8gl0f5flw4f518.jpg \"tmp\")\n\nFirst and foremost, you will need to compile your program with the flag \"-g\" (for debug) to run it via GDB. From there the syntax to start debugging is:\n```shell\n$ gdb -tui [executable's name]\n```\nplacing breakpoints\n```gdb\nbreak [line number]     or   b [line number]\n\nor [file name]:[line number]\nor [function name]\n```\nAnd even better, can set conditional breakpoints:\n```gdb\nbreak [line number] if [condition]\n```\nFor example, can set (if have a loop)\n```gdb\nbreak 11 if i > 97\n```\nPlace a \"watchpoint\" which will pause the program if a variable is modified:\n```gdb\nwatch [variable]\n```\nOnce our breakpoints are set, we can run the program with the \"run\" command, or simply:\n```gdb\nr [command line arguments if your program takes some]\n```\nHow we got to that point:\n```gdb\nbt \n```\nDisplay all the local variables and their current values.\n```gdb\ninfo locals\n```\nOf course:\n```gdb\np [variable]       ptype [variable]\n\nstep \n\nnext\n\ndelete [line number]\n\ncontinue\n\nquit\n```\nPlaying with fire. As well do it all the way:\n```gdb\nset var [variable] = [new value]\n```\n\n","source":"_posts/tips/tipsOfdebugers.md","raw":"---\ntitle: tips Of Debuggers\ndate: 2019-01-10 12:21:12\ncategories: [tip, debug, learning]\ntags: [debuger, pdb, gdb, learning]\n---\n\n\n### GDB\n![gdb](https://www.linuxprobe.com/wp-content/uploads/2017/02/175653ff8gl0f5flw4f518.jpg \"tmp\")\n\nFirst and foremost, you will need to compile your program with the flag \"-g\" (for debug) to run it via GDB. From there the syntax to start debugging is:\n```shell\n$ gdb -tui [executable's name]\n```\nplacing breakpoints\n```gdb\nbreak [line number]     or   b [line number]\n\nor [file name]:[line number]\nor [function name]\n```\nAnd even better, can set conditional breakpoints:\n```gdb\nbreak [line number] if [condition]\n```\nFor example, can set (if have a loop)\n```gdb\nbreak 11 if i > 97\n```\nPlace a \"watchpoint\" which will pause the program if a variable is modified:\n```gdb\nwatch [variable]\n```\nOnce our breakpoints are set, we can run the program with the \"run\" command, or simply:\n```gdb\nr [command line arguments if your program takes some]\n```\nHow we got to that point:\n```gdb\nbt \n```\nDisplay all the local variables and their current values.\n```gdb\ninfo locals\n```\nOf course:\n```gdb\np [variable]       ptype [variable]\n\nstep \n\nnext\n\ndelete [line number]\n\ncontinue\n\nquit\n```\nPlaying with fire. As well do it all the way:\n```gdb\nset var [variable] = [new value]\n```\n\n","slug":"tips/tipsOfdebugers","published":1,"updated":"2021-05-08T02:56:02.692Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9d50016u3yq7ygz7m1q","content":"<h3 id=\"GDB\"><a href=\"#GDB\" class=\"headerlink\" title=\"GDB\"></a>GDB</h3><p><img src=\"https://www.linuxprobe.com/wp-content/uploads/2017/02/175653ff8gl0f5flw4f518.jpg\" alt=\"gdb\" title=\"tmp\"></p>\n<p>First and foremost, you will need to compile your program with the flag “-g” (for debug) to run it via GDB. From there the syntax to start debugging is:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> gdb -tui [executable<span class=\"string\">&#x27;s name]</span></span></span><br></pre></td></tr></table></figure>\n<p>placing breakpoints</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">break [line number]     or   b [line number]</span><br><span class=\"line\"></span><br><span class=\"line\">or [file name]:[line number]</span><br><span class=\"line\">or [function name]</span><br></pre></td></tr></table></figure>\n<p>And even better, can set conditional breakpoints:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">break [line number] if [condition]</span><br></pre></td></tr></table></figure>\n<p>For example, can set (if have a loop)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">break 11 if i &gt; 97</span><br></pre></td></tr></table></figure>\n<p>Place a “watchpoint” which will pause the program if a variable is modified:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch [variable]</span><br></pre></td></tr></table></figure>\n<p>Once our breakpoints are set, we can run the program with the “run” command, or simply:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r [command line arguments if your program takes some]</span><br></pre></td></tr></table></figure>\n<p>How we got to that point:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bt </span><br></pre></td></tr></table></figure>\n<p>Display all the local variables and their current values.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">info locals</span><br></pre></td></tr></table></figure>\n<p>Of course:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">p [variable]       ptype [variable]</span><br><span class=\"line\"></span><br><span class=\"line\">step </span><br><span class=\"line\"></span><br><span class=\"line\">next</span><br><span class=\"line\"></span><br><span class=\"line\">delete [line number]</span><br><span class=\"line\"></span><br><span class=\"line\">continue</span><br><span class=\"line\"></span><br><span class=\"line\">quit</span><br></pre></td></tr></table></figure>\n<p>Playing with fire. As well do it all the way:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set var [variable] &#x3D; [new value]</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"GDB\"><a href=\"#GDB\" class=\"headerlink\" title=\"GDB\"></a>GDB</h3><p><img src=\"https://www.linuxprobe.com/wp-content/uploads/2017/02/175653ff8gl0f5flw4f518.jpg\" alt=\"gdb\" title=\"tmp\"></p>\n<p>First and foremost, you will need to compile your program with the flag “-g” (for debug) to run it via GDB. From there the syntax to start debugging is:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> gdb -tui [executable<span class=\"string\">&#x27;s name]</span></span></span><br></pre></td></tr></table></figure>\n<p>placing breakpoints</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">break [line number]     or   b [line number]</span><br><span class=\"line\"></span><br><span class=\"line\">or [file name]:[line number]</span><br><span class=\"line\">or [function name]</span><br></pre></td></tr></table></figure>\n<p>And even better, can set conditional breakpoints:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">break [line number] if [condition]</span><br></pre></td></tr></table></figure>\n<p>For example, can set (if have a loop)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">break 11 if i &gt; 97</span><br></pre></td></tr></table></figure>\n<p>Place a “watchpoint” which will pause the program if a variable is modified:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">watch [variable]</span><br></pre></td></tr></table></figure>\n<p>Once our breakpoints are set, we can run the program with the “run” command, or simply:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">r [command line arguments if your program takes some]</span><br></pre></td></tr></table></figure>\n<p>How we got to that point:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bt </span><br></pre></td></tr></table></figure>\n<p>Display all the local variables and their current values.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">info locals</span><br></pre></td></tr></table></figure>\n<p>Of course:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">p [variable]       ptype [variable]</span><br><span class=\"line\"></span><br><span class=\"line\">step </span><br><span class=\"line\"></span><br><span class=\"line\">next</span><br><span class=\"line\"></span><br><span class=\"line\">delete [line number]</span><br><span class=\"line\"></span><br><span class=\"line\">continue</span><br><span class=\"line\"></span><br><span class=\"line\">quit</span><br></pre></td></tr></table></figure>\n<p>Playing with fire. As well do it all the way:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set var [variable] &#x3D; [new value]</span><br></pre></td></tr></table></figure>\n\n"},{"title":"gRpc使用小记","date":"2021-05-24T02:30:41.000Z","_content":"![gRpc](https://grpc.io/img/logos/grpc-logo.png \"gRpc\")\n# gRpc HelloWorld\n\n## helloWorld\n[quickstart](https://grpc.io/docs/languages/go/quickstart/)\n```bash\nprotoc --go_out=. --go_opt=paths=source_relative \\\n    --go-grpc_out=. --go-grpc_opt=paths=source_relative \\\n    helloworld/helloworld.proto\n```\n## MacOS下问题\n- 原本`protobuf`中没有mac的gen-go和gen-go-grpc,所以需要额外运行安装.\n- 除了使用brew用`go get`应该也是可以的,就是有路径问题,所以还是使用brew吧\n```bash\nbrew install protobuf\nbrew install protoc-gen-go\nbrew install protoc-gen-go-grpc\n```\n\n","source":"_posts/tips/tipsOfgRpc.md","raw":"---\ntitle: gRpc使用小记\ndate: 2021-05-24 10:30:41\ncategories: [tip, problem, gRpc]\ntags: [win, rpc]\n---\n![gRpc](https://grpc.io/img/logos/grpc-logo.png \"gRpc\")\n# gRpc HelloWorld\n\n## helloWorld\n[quickstart](https://grpc.io/docs/languages/go/quickstart/)\n```bash\nprotoc --go_out=. --go_opt=paths=source_relative \\\n    --go-grpc_out=. --go-grpc_opt=paths=source_relative \\\n    helloworld/helloworld.proto\n```\n## MacOS下问题\n- 原本`protobuf`中没有mac的gen-go和gen-go-grpc,所以需要额外运行安装.\n- 除了使用brew用`go get`应该也是可以的,就是有路径问题,所以还是使用brew吧\n```bash\nbrew install protobuf\nbrew install protoc-gen-go\nbrew install protoc-gen-go-grpc\n```\n\n","slug":"tips/tipsOfgRpc","published":1,"updated":"2021-05-24T02:41:13.073Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9dh0019u3yq8oz37rbf","content":"<p><img src=\"https://grpc.io/img/logos/grpc-logo.png\" alt=\"gRpc\" title=\"gRpc\"></p>\n<h1 id=\"gRpc-HelloWorld\"><a href=\"#gRpc-HelloWorld\" class=\"headerlink\" title=\"gRpc HelloWorld\"></a>gRpc HelloWorld</h1><h2 id=\"helloWorld\"><a href=\"#helloWorld\" class=\"headerlink\" title=\"helloWorld\"></a>helloWorld</h2><p><a href=\"https://grpc.io/docs/languages/go/quickstart/\">quickstart</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protoc --go_out=. --go_opt=paths=source_relative \\</span><br><span class=\"line\">    --go-grpc_out=. --go-grpc_opt=paths=source_relative \\</span><br><span class=\"line\">    helloworld/helloworld.proto</span><br></pre></td></tr></table></figure>\n<h2 id=\"MacOS下问题\"><a href=\"#MacOS下问题\" class=\"headerlink\" title=\"MacOS下问题\"></a>MacOS下问题</h2><ul>\n<li>原本<code>protobuf</code>中没有mac的gen-go和gen-go-grpc,所以需要额外运行安装.</li>\n<li>除了使用brew用<code>go get</code>应该也是可以的,就是有路径问题,所以还是使用brew吧<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install protobuf</span><br><span class=\"line\">brew install protoc-gen-go</span><br><span class=\"line\">brew install protoc-gen-go-grpc</span><br></pre></td></tr></table></figure></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://grpc.io/img/logos/grpc-logo.png\" alt=\"gRpc\" title=\"gRpc\"></p>\n<h1 id=\"gRpc-HelloWorld\"><a href=\"#gRpc-HelloWorld\" class=\"headerlink\" title=\"gRpc HelloWorld\"></a>gRpc HelloWorld</h1><h2 id=\"helloWorld\"><a href=\"#helloWorld\" class=\"headerlink\" title=\"helloWorld\"></a>helloWorld</h2><p><a href=\"https://grpc.io/docs/languages/go/quickstart/\">quickstart</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">protoc --go_out=. --go_opt=paths=source_relative \\</span><br><span class=\"line\">    --go-grpc_out=. --go-grpc_opt=paths=source_relative \\</span><br><span class=\"line\">    helloworld/helloworld.proto</span><br></pre></td></tr></table></figure>\n<h2 id=\"MacOS下问题\"><a href=\"#MacOS下问题\" class=\"headerlink\" title=\"MacOS下问题\"></a>MacOS下问题</h2><ul>\n<li>原本<code>protobuf</code>中没有mac的gen-go和gen-go-grpc,所以需要额外运行安装.</li>\n<li>除了使用brew用<code>go get</code>应该也是可以的,就是有路径问题,所以还是使用brew吧<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install protobuf</span><br><span class=\"line\">brew install protoc-gen-go</span><br><span class=\"line\">brew install protoc-gen-go-grpc</span><br></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"tips Of markdown","date":"2018-05-15T02:00:47.000Z","_content":"# Markdown Notes 📪\n![markdown](https://justyy.com/wp-content/uploads/2016/01/markdown-syntax-language.png)\n\n##Test 二级标题\n## Now I will test the Markdown's hobiy 二级\n### Maybe is a nice way to impove my blog. 三级\n    原来标题 要# 与正文隔开一个空格…\n    ···print “hello Markdown”···\n欸？ 怎么回事？上面的文字\n莫非是用Tab能将其放到一个容器里？\n### 新的区块 ###\n    你好，这是我新创建的容器。\n    ———好吧，只有直接在标题之下的Tab才能创建\n    \n    no~，在空行下面也是可以的。\n\n<address@example.com>\n\n\n## Markdown 字体颜色、流程图\n#### 斜体\n    *文字*：前后星号斜体\n\n*就像这样？*\n### 流程图\nst=>start: Start\ne=>end: End\nopl=>operation: My Operation\nsub1=>subroutine: My subroutine\ncond=>condition: Yes or No?\nio=>inputoutput: catch something\n\n---\n\n呃 流程图我不清楚，不过\n### 字体颜色\n可以内嵌html\n：<font color=red>你好，我是红色吗?</font>，\n\n<font color=#75362109>你好，我是自定义色吗?</font>\n即\n\n    <font color=red>你好，我是红色吗?</font>\n    <font color=#75362109>你好，我是自定义色吗?</font>\n\n<font color=#ff36ff>刚开始我还在好奇怎么三色RGB怎么变成四个了，原来起作用的还是三个，只不过markdown选择性忽略了多余的字节。😰</font>   这段话的配置如下：\n\n    <font color=#ff36ff>骚气的颜色~</font> \n\n### 超链接\n[Super Link is me?](https://www.google.com.hk)  Yes , you are successful link to Google.hk\n    \n    [Super Link is me?](https://www.google.com.hk)  \n\n### 表格\n|           |           |       |\n|:----          |:----:     |    ----:|\n|1          |`111`      |a      |\n|2          |`222`      |b      |\n|3          |`333`      |c      |\n|4          |`444`          |d      |\n|6          |`555`      |e      |\n|7          |`666`      |f      |\n#### 序列\n* 这是第一行\n* 这是第二行\n* 第三\n* Like This\n\n\n1. 另种表现\n2. 实现方式\n3. 阿门\n### \\@的用法\n\\@后跟随的关键字可以生成`Github`的搜索超链接 例如： @markdown\n\n### 注释\n    [^_^]:\n        这里是注释：这个是在制作ppt的时候来写注释的……  \n        毕竟在笔记里面写注释怕是失了智…  毕竟不会被显示出来…\n[^_^]:\n    你看得见我吗？\n\n不过因为上面也说了是支持html语法的。所以……\n```html\n    <!-- 这里是注释 隐藏区域-->\n```\n<!-- 这里是注释 隐藏区域2019-0307: 17:05:00-->\n\n### 插入图片：只能插入网图…\n![](http://www.fzlol.com/upimg/allimg/141021/1_0T243L11.jpg)\n\n### 关于\\`\\`\\` 痛苦的进行中\n```md\n    (⊙﹏⊙)， ```这东西是用来标注代码开始的，然而在有的编辑器中，若不是以单独一行会识别为`，也就是对平常语句中的字符的修饰。但是hexo显然不这么认为，所以只好将之前使用```的地方都改成`了 【2018年5月18日 纪念我勤奋的修改史】\n```\n","source":"_posts/tips/tipsOfmarkdown.md","raw":"---\ntitle: tips Of markdown\ndate: 2018-05-15 10:00:47\ncategories: [tip, markdown, learning]\ntags: [markdown, learning]\n---\n# Markdown Notes 📪\n![markdown](https://justyy.com/wp-content/uploads/2016/01/markdown-syntax-language.png)\n\n##Test 二级标题\n## Now I will test the Markdown's hobiy 二级\n### Maybe is a nice way to impove my blog. 三级\n    原来标题 要# 与正文隔开一个空格…\n    ···print “hello Markdown”···\n欸？ 怎么回事？上面的文字\n莫非是用Tab能将其放到一个容器里？\n### 新的区块 ###\n    你好，这是我新创建的容器。\n    ———好吧，只有直接在标题之下的Tab才能创建\n    \n    no~，在空行下面也是可以的。\n\n<address@example.com>\n\n\n## Markdown 字体颜色、流程图\n#### 斜体\n    *文字*：前后星号斜体\n\n*就像这样？*\n### 流程图\nst=>start: Start\ne=>end: End\nopl=>operation: My Operation\nsub1=>subroutine: My subroutine\ncond=>condition: Yes or No?\nio=>inputoutput: catch something\n\n---\n\n呃 流程图我不清楚，不过\n### 字体颜色\n可以内嵌html\n：<font color=red>你好，我是红色吗?</font>，\n\n<font color=#75362109>你好，我是自定义色吗?</font>\n即\n\n    <font color=red>你好，我是红色吗?</font>\n    <font color=#75362109>你好，我是自定义色吗?</font>\n\n<font color=#ff36ff>刚开始我还在好奇怎么三色RGB怎么变成四个了，原来起作用的还是三个，只不过markdown选择性忽略了多余的字节。😰</font>   这段话的配置如下：\n\n    <font color=#ff36ff>骚气的颜色~</font> \n\n### 超链接\n[Super Link is me?](https://www.google.com.hk)  Yes , you are successful link to Google.hk\n    \n    [Super Link is me?](https://www.google.com.hk)  \n\n### 表格\n|           |           |       |\n|:----          |:----:     |    ----:|\n|1          |`111`      |a      |\n|2          |`222`      |b      |\n|3          |`333`      |c      |\n|4          |`444`          |d      |\n|6          |`555`      |e      |\n|7          |`666`      |f      |\n#### 序列\n* 这是第一行\n* 这是第二行\n* 第三\n* Like This\n\n\n1. 另种表现\n2. 实现方式\n3. 阿门\n### \\@的用法\n\\@后跟随的关键字可以生成`Github`的搜索超链接 例如： @markdown\n\n### 注释\n    [^_^]:\n        这里是注释：这个是在制作ppt的时候来写注释的……  \n        毕竟在笔记里面写注释怕是失了智…  毕竟不会被显示出来…\n[^_^]:\n    你看得见我吗？\n\n不过因为上面也说了是支持html语法的。所以……\n```html\n    <!-- 这里是注释 隐藏区域-->\n```\n<!-- 这里是注释 隐藏区域2019-0307: 17:05:00-->\n\n### 插入图片：只能插入网图…\n![](http://www.fzlol.com/upimg/allimg/141021/1_0T243L11.jpg)\n\n### 关于\\`\\`\\` 痛苦的进行中\n```md\n    (⊙﹏⊙)， ```这东西是用来标注代码开始的，然而在有的编辑器中，若不是以单独一行会识别为`，也就是对平常语句中的字符的修饰。但是hexo显然不这么认为，所以只好将之前使用```的地方都改成`了 【2018年5月18日 纪念我勤奋的修改史】\n```\n","slug":"tips/tipsOfmarkdown","published":1,"updated":"2021-05-08T02:56:02.692Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9dm001bu3yqbzmfe4ou","content":"<h1 id=\"Markdown-Notes-📪\"><a href=\"#Markdown-Notes-📪\" class=\"headerlink\" title=\"Markdown Notes 📪\"></a>Markdown Notes 📪</h1><p><img src=\"https://justyy.com/wp-content/uploads/2016/01/markdown-syntax-language.png\" alt=\"markdown\"></p>\n<p>##Test 二级标题</p>\n<h2 id=\"Now-I-will-test-the-Markdown’s-hobiy-二级\"><a href=\"#Now-I-will-test-the-Markdown’s-hobiy-二级\" class=\"headerlink\" title=\"Now I will test the Markdown’s hobiy 二级\"></a>Now I will test the Markdown’s hobiy 二级</h2><h3 id=\"Maybe-is-a-nice-way-to-impove-my-blog-三级\"><a href=\"#Maybe-is-a-nice-way-to-impove-my-blog-三级\" class=\"headerlink\" title=\"Maybe is a nice way to impove my blog. 三级\"></a>Maybe is a nice way to impove my blog. 三级</h3><pre><code>原来标题 要# 与正文隔开一个空格…\n···print “hello Markdown”···\n</code></pre>\n<p>欸？ 怎么回事？上面的文字<br>莫非是用Tab能将其放到一个容器里？</p>\n<h3 id=\"新的区块\"><a href=\"#新的区块\" class=\"headerlink\" title=\"新的区块\"></a>新的区块</h3><pre><code>你好，这是我新创建的容器。\n———好吧，只有直接在标题之下的Tab才能创建\n\nno~，在空行下面也是可以的。\n</code></pre>\n<p><a href=\"mailto:&#97;&#100;&#x64;&#x72;&#x65;&#115;&#115;&#64;&#x65;&#x78;&#97;&#x6d;&#112;&#108;&#101;&#46;&#99;&#x6f;&#109;\">&#97;&#100;&#x64;&#x72;&#x65;&#115;&#115;&#64;&#x65;&#x78;&#97;&#x6d;&#112;&#108;&#101;&#46;&#99;&#x6f;&#109;</a></p>\n<h2 id=\"Markdown-字体颜色、流程图\"><a href=\"#Markdown-字体颜色、流程图\" class=\"headerlink\" title=\"Markdown 字体颜色、流程图\"></a>Markdown 字体颜色、流程图</h2><h4 id=\"斜体\"><a href=\"#斜体\" class=\"headerlink\" title=\"斜体\"></a>斜体</h4><pre><code>*文字*：前后星号斜体\n</code></pre>\n<p><em>就像这样？</em></p>\n<h3 id=\"流程图\"><a href=\"#流程图\" class=\"headerlink\" title=\"流程图\"></a>流程图</h3><p>st=&gt;start: Start<br>e=&gt;end: End<br>opl=&gt;operation: My Operation<br>sub1=&gt;subroutine: My subroutine<br>cond=&gt;condition: Yes or No?<br>io=&gt;inputoutput: catch something</p>\n<hr>\n<p>呃 流程图我不清楚，不过</p>\n<h3 id=\"字体颜色\"><a href=\"#字体颜色\" class=\"headerlink\" title=\"字体颜色\"></a>字体颜色</h3><p>可以内嵌html<br>：<font color=red>你好，我是红色吗?</font>，</p>\n<p><font color=#75362109>你好，我是自定义色吗?</font><br>即</p>\n<pre><code>&lt;font color=red&gt;你好，我是红色吗?&lt;/font&gt;\n&lt;font color=#75362109&gt;你好，我是自定义色吗?&lt;/font&gt;\n</code></pre>\n<p><font color=#ff36ff>刚开始我还在好奇怎么三色RGB怎么变成四个了，原来起作用的还是三个，只不过markdown选择性忽略了多余的字节。😰</font>   这段话的配置如下：</p>\n<pre><code>&lt;font color=#ff36ff&gt;骚气的颜色~&lt;/font&gt; \n</code></pre>\n<h3 id=\"超链接\"><a href=\"#超链接\" class=\"headerlink\" title=\"超链接\"></a>超链接</h3><p><a href=\"https://www.google.com.hk/\">Super Link is me?</a>  Yes , you are successful link to Google.hk</p>\n<pre><code>[Super Link is me?](https://www.google.com.hk)  \n</code></pre>\n<h3 id=\"表格\"><a href=\"#表格\" class=\"headerlink\" title=\"表格\"></a>表格</h3><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"center\"></th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">1</td>\n<td align=\"center\"><code>111</code></td>\n<td align=\"right\">a</td>\n</tr>\n<tr>\n<td align=\"left\">2</td>\n<td align=\"center\"><code>222</code></td>\n<td align=\"right\">b</td>\n</tr>\n<tr>\n<td align=\"left\">3</td>\n<td align=\"center\"><code>333</code></td>\n<td align=\"right\">c</td>\n</tr>\n<tr>\n<td align=\"left\">4</td>\n<td align=\"center\"><code>444</code></td>\n<td align=\"right\">d</td>\n</tr>\n<tr>\n<td align=\"left\">6</td>\n<td align=\"center\"><code>555</code></td>\n<td align=\"right\">e</td>\n</tr>\n<tr>\n<td align=\"left\">7</td>\n<td align=\"center\"><code>666</code></td>\n<td align=\"right\">f</td>\n</tr>\n</tbody></table>\n<h4 id=\"序列\"><a href=\"#序列\" class=\"headerlink\" title=\"序列\"></a>序列</h4><ul>\n<li>这是第一行</li>\n<li>这是第二行</li>\n<li>第三</li>\n<li>Like This</li>\n</ul>\n<ol>\n<li>另种表现</li>\n<li>实现方式</li>\n<li>阿门<h3 id=\"的用法\"><a href=\"#的用法\" class=\"headerlink\" title=\"@的用法\"></a>@的用法</h3>@后跟随的关键字可以生成<code>Github</code>的搜索超链接 例如： @markdown</li>\n</ol>\n<h3 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h3><pre><code>[^_^]:\n    这里是注释：这个是在制作ppt的时候来写注释的……  \n    毕竟在笔记里面写注释怕是失了智…  毕竟不会被显示出来…\n</code></pre>\n<p>不过因为上面也说了是支持html语法的。所以……</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 这里是注释 隐藏区域--&gt;</span></span><br></pre></td></tr></table></figure>\n<!-- 这里是注释 隐藏区域2019-0307: 17:05:00-->\n\n<h3 id=\"插入图片：只能插入网图…\"><a href=\"#插入图片：只能插入网图…\" class=\"headerlink\" title=\"插入图片：只能插入网图…\"></a>插入图片：只能插入网图…</h3><p><img src=\"http://www.fzlol.com/upimg/allimg/141021/1_0T243L11.jpg\"></p>\n<h3 id=\"关于-痛苦的进行中\"><a href=\"#关于-痛苦的进行中\" class=\"headerlink\" title=\"关于``` 痛苦的进行中\"></a>关于``` 痛苦的进行中</h3><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(⊙﹏⊙)， <span class=\"code\">```这东西是用来标注代码开始的，然而在有的编辑器中，若不是以单独一行会识别为`，也就是对平常语句中的字符的修饰。但是hexo显然不这么认为，所以只好将之前使用```</span>的地方都改成`了 【2018年5月18日 纪念我勤奋的修改史】</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Markdown-Notes-📪\"><a href=\"#Markdown-Notes-📪\" class=\"headerlink\" title=\"Markdown Notes 📪\"></a>Markdown Notes 📪</h1><p><img src=\"https://justyy.com/wp-content/uploads/2016/01/markdown-syntax-language.png\" alt=\"markdown\"></p>\n<p>##Test 二级标题</p>\n<h2 id=\"Now-I-will-test-the-Markdown’s-hobiy-二级\"><a href=\"#Now-I-will-test-the-Markdown’s-hobiy-二级\" class=\"headerlink\" title=\"Now I will test the Markdown’s hobiy 二级\"></a>Now I will test the Markdown’s hobiy 二级</h2><h3 id=\"Maybe-is-a-nice-way-to-impove-my-blog-三级\"><a href=\"#Maybe-is-a-nice-way-to-impove-my-blog-三级\" class=\"headerlink\" title=\"Maybe is a nice way to impove my blog. 三级\"></a>Maybe is a nice way to impove my blog. 三级</h3><pre><code>原来标题 要# 与正文隔开一个空格…\n···print “hello Markdown”···\n</code></pre>\n<p>欸？ 怎么回事？上面的文字<br>莫非是用Tab能将其放到一个容器里？</p>\n<h3 id=\"新的区块\"><a href=\"#新的区块\" class=\"headerlink\" title=\"新的区块\"></a>新的区块</h3><pre><code>你好，这是我新创建的容器。\n———好吧，只有直接在标题之下的Tab才能创建\n\nno~，在空行下面也是可以的。\n</code></pre>\n<p><a href=\"mailto:&#97;&#100;&#x64;&#x72;&#x65;&#115;&#115;&#64;&#x65;&#x78;&#97;&#x6d;&#112;&#108;&#101;&#46;&#99;&#x6f;&#109;\">&#97;&#100;&#x64;&#x72;&#x65;&#115;&#115;&#64;&#x65;&#x78;&#97;&#x6d;&#112;&#108;&#101;&#46;&#99;&#x6f;&#109;</a></p>\n<h2 id=\"Markdown-字体颜色、流程图\"><a href=\"#Markdown-字体颜色、流程图\" class=\"headerlink\" title=\"Markdown 字体颜色、流程图\"></a>Markdown 字体颜色、流程图</h2><h4 id=\"斜体\"><a href=\"#斜体\" class=\"headerlink\" title=\"斜体\"></a>斜体</h4><pre><code>*文字*：前后星号斜体\n</code></pre>\n<p><em>就像这样？</em></p>\n<h3 id=\"流程图\"><a href=\"#流程图\" class=\"headerlink\" title=\"流程图\"></a>流程图</h3><p>st=&gt;start: Start<br>e=&gt;end: End<br>opl=&gt;operation: My Operation<br>sub1=&gt;subroutine: My subroutine<br>cond=&gt;condition: Yes or No?<br>io=&gt;inputoutput: catch something</p>\n<hr>\n<p>呃 流程图我不清楚，不过</p>\n<h3 id=\"字体颜色\"><a href=\"#字体颜色\" class=\"headerlink\" title=\"字体颜色\"></a>字体颜色</h3><p>可以内嵌html<br>：<font color=red>你好，我是红色吗?</font>，</p>\n<p><font color=#75362109>你好，我是自定义色吗?</font><br>即</p>\n<pre><code>&lt;font color=red&gt;你好，我是红色吗?&lt;/font&gt;\n&lt;font color=#75362109&gt;你好，我是自定义色吗?&lt;/font&gt;\n</code></pre>\n<p><font color=#ff36ff>刚开始我还在好奇怎么三色RGB怎么变成四个了，原来起作用的还是三个，只不过markdown选择性忽略了多余的字节。😰</font>   这段话的配置如下：</p>\n<pre><code>&lt;font color=#ff36ff&gt;骚气的颜色~&lt;/font&gt; \n</code></pre>\n<h3 id=\"超链接\"><a href=\"#超链接\" class=\"headerlink\" title=\"超链接\"></a>超链接</h3><p><a href=\"https://www.google.com.hk/\">Super Link is me?</a>  Yes , you are successful link to Google.hk</p>\n<pre><code>[Super Link is me?](https://www.google.com.hk)  \n</code></pre>\n<h3 id=\"表格\"><a href=\"#表格\" class=\"headerlink\" title=\"表格\"></a>表格</h3><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"center\"></th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">1</td>\n<td align=\"center\"><code>111</code></td>\n<td align=\"right\">a</td>\n</tr>\n<tr>\n<td align=\"left\">2</td>\n<td align=\"center\"><code>222</code></td>\n<td align=\"right\">b</td>\n</tr>\n<tr>\n<td align=\"left\">3</td>\n<td align=\"center\"><code>333</code></td>\n<td align=\"right\">c</td>\n</tr>\n<tr>\n<td align=\"left\">4</td>\n<td align=\"center\"><code>444</code></td>\n<td align=\"right\">d</td>\n</tr>\n<tr>\n<td align=\"left\">6</td>\n<td align=\"center\"><code>555</code></td>\n<td align=\"right\">e</td>\n</tr>\n<tr>\n<td align=\"left\">7</td>\n<td align=\"center\"><code>666</code></td>\n<td align=\"right\">f</td>\n</tr>\n</tbody></table>\n<h4 id=\"序列\"><a href=\"#序列\" class=\"headerlink\" title=\"序列\"></a>序列</h4><ul>\n<li>这是第一行</li>\n<li>这是第二行</li>\n<li>第三</li>\n<li>Like This</li>\n</ul>\n<ol>\n<li>另种表现</li>\n<li>实现方式</li>\n<li>阿门<h3 id=\"的用法\"><a href=\"#的用法\" class=\"headerlink\" title=\"@的用法\"></a>@的用法</h3>@后跟随的关键字可以生成<code>Github</code>的搜索超链接 例如： @markdown</li>\n</ol>\n<h3 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h3><pre><code>[^_^]:\n    这里是注释：这个是在制作ppt的时候来写注释的……  \n    毕竟在笔记里面写注释怕是失了智…  毕竟不会被显示出来…\n</code></pre>\n<p>不过因为上面也说了是支持html语法的。所以……</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 这里是注释 隐藏区域--&gt;</span></span><br></pre></td></tr></table></figure>\n<!-- 这里是注释 隐藏区域2019-0307: 17:05:00-->\n\n<h3 id=\"插入图片：只能插入网图…\"><a href=\"#插入图片：只能插入网图…\" class=\"headerlink\" title=\"插入图片：只能插入网图…\"></a>插入图片：只能插入网图…</h3><p><img src=\"http://www.fzlol.com/upimg/allimg/141021/1_0T243L11.jpg\"></p>\n<h3 id=\"关于-痛苦的进行中\"><a href=\"#关于-痛苦的进行中\" class=\"headerlink\" title=\"关于``` 痛苦的进行中\"></a>关于``` 痛苦的进行中</h3><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(⊙﹏⊙)， <span class=\"code\">```这东西是用来标注代码开始的，然而在有的编辑器中，若不是以单独一行会识别为`，也就是对平常语句中的字符的修饰。但是hexo显然不这么认为，所以只好将之前使用```</span>的地方都改成`了 【2018年5月18日 纪念我勤奋的修改史】</span><br></pre></td></tr></table></figure>\n"},{"title":"tip Of vim","date":"2018-05-15T01:56:41.000Z","_content":"\n# Vim 使用\n![vim](https://www.vim.org/images/vim_header.gif)\n除去“简便生活”里的几条配置，在纠结是否添加到别的地方，果然还是单独给vim一个使用手册比较好……\n\n## 注释\n```vim\n    # 注释\n    1， 12s/^/#/g   \n    ---\n    # 取消注释\n    1， 12s/^#//g     \n```\n其实 是`vim`中的 `:s`替换命令… 下方解释\n\n或者，使用列编辑的模式:\n\n    v、选择区域、ctrl q置行首、I插入#、Esc应用到全列\n    ctrl v、I、#、Esc\n    因为有的ctrl q或者ctrl v 不能用……\n    \n    取消，即使用上述方法选中行首，删除第一个字节即可了\n\n## 替换\n```vim\n    :s/oldWords/newWords/g\n```\ng : 代表当前光标所在行。\n#### 由此可知:\n `^`表行首标识符。 `/^/`表示行首的空字符。   而取消注释中的`/^#/`即表示行首的`#`，被`//`空字符所替换。\n\n\n---\n\n## 查找高亮\n```vim\n    set hlsearch\n    set nohlsearch  \n```\n## 分屏\n#### 实现\n- 在外部使用`-o` or `-O`参数\n- 内部`split` or `vsplit` \n#### 操作\n- 移动光标 `Ctrl + w` hjkl\n- 移动分区`Ctrl + w` HJKL\n- 统一高度`Ctrl + w`  =\n- 改变高度`Ctrl + w`  +-\n\n\n# more and less\n阅读器~~~  因为经常读大文件发现了这两个的无敌好处——<font color=#12eeee>快</font>。\n### 使用命令\n```bash\ncat\ncat -b \n# 查看且标注行号\n-n # 同上，但也会显示空行行号\n\nmore\n# - space     向下翻页\n# - Ctrl+F    同上\n# - b         back 返回一页显示\n# - Ctrl+B    同上\n# - Enter     向下n行,默认1\n# - =         输出当前行号\n# - v         调用vi/vim\n# - !命令     调用shell 执行命令\n# - q         退出\n\nless\n```\n\n### Vi && Vim\n\n三个模式:\n- 命令模式\n- 插入模式\n- Ex模式\n\npara|:|说明\n:---:|:---:|:---\no|:|在当前行下面插入新空白行\ndd|:|删除当前一行。\nu|:|撤销一步操作\nyy|:|当前行->缓冲区\np|:|缓冲区->光标之后插入\nn+|y|当前及接下来n行->缓冲区\nr|:|替换当前字符\n/|:|查找关键字——支持汉字呐！难得\nn|:|上命令下切换 next\n\n\n\n#### Ex下:\n- `set number`: 显示行号。（不过我已经改了配置文件，默认显示）\n- ！+命令 代理执行系统命令。如ls cd \n- sh 挂下编辑 显示系统命令行。 ctrl+d返回（PS:命令行下，这是关闭虚拟终端快捷键）\n- tip:tail head 等查看命令可以和 >> 命令合用，将文件的首行或者结尾字添加到另一个文档～\n","source":"_posts/tips/tipsOfvim.md","raw":"---\ntitle: tip Of vim\ndate: 2018-05-15 09:56:41\ncategories: [tip, vim, learning]\ntags: [vim, more, less, learning]\n---\n\n# Vim 使用\n![vim](https://www.vim.org/images/vim_header.gif)\n除去“简便生活”里的几条配置，在纠结是否添加到别的地方，果然还是单独给vim一个使用手册比较好……\n\n## 注释\n```vim\n    # 注释\n    1， 12s/^/#/g   \n    ---\n    # 取消注释\n    1， 12s/^#//g     \n```\n其实 是`vim`中的 `:s`替换命令… 下方解释\n\n或者，使用列编辑的模式:\n\n    v、选择区域、ctrl q置行首、I插入#、Esc应用到全列\n    ctrl v、I、#、Esc\n    因为有的ctrl q或者ctrl v 不能用……\n    \n    取消，即使用上述方法选中行首，删除第一个字节即可了\n\n## 替换\n```vim\n    :s/oldWords/newWords/g\n```\ng : 代表当前光标所在行。\n#### 由此可知:\n `^`表行首标识符。 `/^/`表示行首的空字符。   而取消注释中的`/^#/`即表示行首的`#`，被`//`空字符所替换。\n\n\n---\n\n## 查找高亮\n```vim\n    set hlsearch\n    set nohlsearch  \n```\n## 分屏\n#### 实现\n- 在外部使用`-o` or `-O`参数\n- 内部`split` or `vsplit` \n#### 操作\n- 移动光标 `Ctrl + w` hjkl\n- 移动分区`Ctrl + w` HJKL\n- 统一高度`Ctrl + w`  =\n- 改变高度`Ctrl + w`  +-\n\n\n# more and less\n阅读器~~~  因为经常读大文件发现了这两个的无敌好处——<font color=#12eeee>快</font>。\n### 使用命令\n```bash\ncat\ncat -b \n# 查看且标注行号\n-n # 同上，但也会显示空行行号\n\nmore\n# - space     向下翻页\n# - Ctrl+F    同上\n# - b         back 返回一页显示\n# - Ctrl+B    同上\n# - Enter     向下n行,默认1\n# - =         输出当前行号\n# - v         调用vi/vim\n# - !命令     调用shell 执行命令\n# - q         退出\n\nless\n```\n\n### Vi && Vim\n\n三个模式:\n- 命令模式\n- 插入模式\n- Ex模式\n\npara|:|说明\n:---:|:---:|:---\no|:|在当前行下面插入新空白行\ndd|:|删除当前一行。\nu|:|撤销一步操作\nyy|:|当前行->缓冲区\np|:|缓冲区->光标之后插入\nn+|y|当前及接下来n行->缓冲区\nr|:|替换当前字符\n/|:|查找关键字——支持汉字呐！难得\nn|:|上命令下切换 next\n\n\n\n#### Ex下:\n- `set number`: 显示行号。（不过我已经改了配置文件，默认显示）\n- ！+命令 代理执行系统命令。如ls cd \n- sh 挂下编辑 显示系统命令行。 ctrl+d返回（PS:命令行下，这是关闭虚拟终端快捷键）\n- tip:tail head 等查看命令可以和 >> 命令合用，将文件的首行或者结尾字添加到另一个文档～\n","slug":"tips/tipsOfvim","published":1,"updated":"2021-05-08T02:56:02.692Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9dt001eu3yq9c0ae7s0","content":"<h1 id=\"Vim-使用\"><a href=\"#Vim-使用\" class=\"headerlink\" title=\"Vim 使用\"></a>Vim 使用</h1><p><img src=\"https://www.vim.org/images/vim_header.gif\" alt=\"vim\"><br>除去“简便生活”里的几条配置，在纠结是否添加到别的地方，果然还是单独给vim一个使用手册比较好……</p>\n<h2 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h2><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 注释</span><br><span class=\"line\"><span class=\"number\">1</span>， <span class=\"number\">12</span>s/^/#/g   </span><br><span class=\"line\">---</span><br><span class=\"line\"># 取消注释</span><br><span class=\"line\"><span class=\"number\">1</span>， <span class=\"number\">12</span>s/^#//g     </span><br></pre></td></tr></table></figure>\n<p>其实 是<code>vim</code>中的 <code>:s</code>替换命令… 下方解释</p>\n<p>或者，使用列编辑的模式:</p>\n<pre><code>v、选择区域、ctrl q置行首、I插入#、Esc应用到全列\nctrl v、I、#、Esc\n因为有的ctrl q或者ctrl v 不能用……\n\n取消，即使用上述方法选中行首，删除第一个字节即可了\n</code></pre>\n<h2 id=\"替换\"><a href=\"#替换\" class=\"headerlink\" title=\"替换\"></a>替换</h2><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:s/oldWords/newWords/g</span><br></pre></td></tr></table></figure>\n<p>g : 代表当前光标所在行。</p>\n<h4 id=\"由此可知\"><a href=\"#由此可知\" class=\"headerlink\" title=\"由此可知:\"></a>由此可知:</h4><p> <code>^</code>表行首标识符。 <code>/^/</code>表示行首的空字符。   而取消注释中的<code>/^#/</code>即表示行首的<code>#</code>，被<code>//</code>空字符所替换。</p>\n<hr>\n<h2 id=\"查找高亮\"><a href=\"#查找高亮\" class=\"headerlink\" title=\"查找高亮\"></a>查找高亮</h2><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> hlsearch</span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">nohlsearch</span>  </span><br></pre></td></tr></table></figure>\n<h2 id=\"分屏\"><a href=\"#分屏\" class=\"headerlink\" title=\"分屏\"></a>分屏</h2><h4 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h4><ul>\n<li>在外部使用<code>-o</code> or <code>-O</code>参数</li>\n<li>内部<code>split</code> or <code>vsplit</code> <h4 id=\"操作\"><a href=\"#操作\" class=\"headerlink\" title=\"操作\"></a>操作</h4></li>\n<li>移动光标 <code>Ctrl + w</code> hjkl</li>\n<li>移动分区<code>Ctrl + w</code> HJKL</li>\n<li>统一高度<code>Ctrl + w</code>  =</li>\n<li>改变高度<code>Ctrl + w</code>  +-</li>\n</ul>\n<h1 id=\"more-and-less\"><a href=\"#more-and-less\" class=\"headerlink\" title=\"more and less\"></a>more and less</h1><p>阅读器~~~  因为经常读大文件发现了这两个的无敌好处——<font color=#12eeee>快</font>。</p>\n<h3 id=\"使用命令\"><a href=\"#使用命令\" class=\"headerlink\" title=\"使用命令\"></a>使用命令</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat</span><br><span class=\"line\">cat -b </span><br><span class=\"line\"><span class=\"comment\"># 查看且标注行号</span></span><br><span class=\"line\">-n <span class=\"comment\"># 同上，但也会显示空行行号</span></span><br><span class=\"line\"></span><br><span class=\"line\">more</span><br><span class=\"line\"><span class=\"comment\"># - space     向下翻页</span></span><br><span class=\"line\"><span class=\"comment\"># - Ctrl+F    同上</span></span><br><span class=\"line\"><span class=\"comment\"># - b         back 返回一页显示</span></span><br><span class=\"line\"><span class=\"comment\"># - Ctrl+B    同上</span></span><br><span class=\"line\"><span class=\"comment\"># - Enter     向下n行,默认1</span></span><br><span class=\"line\"><span class=\"comment\"># - =         输出当前行号</span></span><br><span class=\"line\"><span class=\"comment\"># - v         调用vi/vim</span></span><br><span class=\"line\"><span class=\"comment\"># - !命令     调用shell 执行命令</span></span><br><span class=\"line\"><span class=\"comment\"># - q         退出</span></span><br><span class=\"line\"></span><br><span class=\"line\">less</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Vi-amp-amp-Vim\"><a href=\"#Vi-amp-amp-Vim\" class=\"headerlink\" title=\"Vi &amp;&amp; Vim\"></a>Vi &amp;&amp; Vim</h3><p>三个模式:</p>\n<ul>\n<li>命令模式</li>\n<li>插入模式</li>\n<li>Ex模式</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">para</th>\n<th align=\"center\">:</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">o</td>\n<td align=\"center\">:</td>\n<td align=\"left\">在当前行下面插入新空白行</td>\n</tr>\n<tr>\n<td align=\"center\">dd</td>\n<td align=\"center\">:</td>\n<td align=\"left\">删除当前一行。</td>\n</tr>\n<tr>\n<td align=\"center\">u</td>\n<td align=\"center\">:</td>\n<td align=\"left\">撤销一步操作</td>\n</tr>\n<tr>\n<td align=\"center\">yy</td>\n<td align=\"center\">:</td>\n<td align=\"left\">当前行-&gt;缓冲区</td>\n</tr>\n<tr>\n<td align=\"center\">p</td>\n<td align=\"center\">:</td>\n<td align=\"left\">缓冲区-&gt;光标之后插入</td>\n</tr>\n<tr>\n<td align=\"center\">n+</td>\n<td align=\"center\">y</td>\n<td align=\"left\">当前及接下来n行-&gt;缓冲区</td>\n</tr>\n<tr>\n<td align=\"center\">r</td>\n<td align=\"center\">:</td>\n<td align=\"left\">替换当前字符</td>\n</tr>\n<tr>\n<td align=\"center\">/</td>\n<td align=\"center\">:</td>\n<td align=\"left\">查找关键字——支持汉字呐！难得</td>\n</tr>\n<tr>\n<td align=\"center\">n</td>\n<td align=\"center\">:</td>\n<td align=\"left\">上命令下切换 next</td>\n</tr>\n</tbody></table>\n<h4 id=\"Ex下\"><a href=\"#Ex下\" class=\"headerlink\" title=\"Ex下:\"></a>Ex下:</h4><ul>\n<li><code>set number</code>: 显示行号。（不过我已经改了配置文件，默认显示）</li>\n<li>！+命令 代理执行系统命令。如ls cd </li>\n<li>sh 挂下编辑 显示系统命令行。 ctrl+d返回（PS:命令行下，这是关闭虚拟终端快捷键）</li>\n<li>tip:tail head 等查看命令可以和 &gt;&gt; 命令合用，将文件的首行或者结尾字添加到另一个文档～</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Vim-使用\"><a href=\"#Vim-使用\" class=\"headerlink\" title=\"Vim 使用\"></a>Vim 使用</h1><p><img src=\"https://www.vim.org/images/vim_header.gif\" alt=\"vim\"><br>除去“简便生活”里的几条配置，在纠结是否添加到别的地方，果然还是单独给vim一个使用手册比较好……</p>\n<h2 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h2><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 注释</span><br><span class=\"line\"><span class=\"number\">1</span>， <span class=\"number\">12</span>s/^/#/g   </span><br><span class=\"line\">---</span><br><span class=\"line\"># 取消注释</span><br><span class=\"line\"><span class=\"number\">1</span>， <span class=\"number\">12</span>s/^#//g     </span><br></pre></td></tr></table></figure>\n<p>其实 是<code>vim</code>中的 <code>:s</code>替换命令… 下方解释</p>\n<p>或者，使用列编辑的模式:</p>\n<pre><code>v、选择区域、ctrl q置行首、I插入#、Esc应用到全列\nctrl v、I、#、Esc\n因为有的ctrl q或者ctrl v 不能用……\n\n取消，即使用上述方法选中行首，删除第一个字节即可了\n</code></pre>\n<h2 id=\"替换\"><a href=\"#替换\" class=\"headerlink\" title=\"替换\"></a>替换</h2><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:s/oldWords/newWords/g</span><br></pre></td></tr></table></figure>\n<p>g : 代表当前光标所在行。</p>\n<h4 id=\"由此可知\"><a href=\"#由此可知\" class=\"headerlink\" title=\"由此可知:\"></a>由此可知:</h4><p> <code>^</code>表行首标识符。 <code>/^/</code>表示行首的空字符。   而取消注释中的<code>/^#/</code>即表示行首的<code>#</code>，被<code>//</code>空字符所替换。</p>\n<hr>\n<h2 id=\"查找高亮\"><a href=\"#查找高亮\" class=\"headerlink\" title=\"查找高亮\"></a>查找高亮</h2><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">set</span> hlsearch</span><br><span class=\"line\"><span class=\"keyword\">set</span> <span class=\"keyword\">nohlsearch</span>  </span><br></pre></td></tr></table></figure>\n<h2 id=\"分屏\"><a href=\"#分屏\" class=\"headerlink\" title=\"分屏\"></a>分屏</h2><h4 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现</h4><ul>\n<li>在外部使用<code>-o</code> or <code>-O</code>参数</li>\n<li>内部<code>split</code> or <code>vsplit</code> <h4 id=\"操作\"><a href=\"#操作\" class=\"headerlink\" title=\"操作\"></a>操作</h4></li>\n<li>移动光标 <code>Ctrl + w</code> hjkl</li>\n<li>移动分区<code>Ctrl + w</code> HJKL</li>\n<li>统一高度<code>Ctrl + w</code>  =</li>\n<li>改变高度<code>Ctrl + w</code>  +-</li>\n</ul>\n<h1 id=\"more-and-less\"><a href=\"#more-and-less\" class=\"headerlink\" title=\"more and less\"></a>more and less</h1><p>阅读器~~~  因为经常读大文件发现了这两个的无敌好处——<font color=#12eeee>快</font>。</p>\n<h3 id=\"使用命令\"><a href=\"#使用命令\" class=\"headerlink\" title=\"使用命令\"></a>使用命令</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat</span><br><span class=\"line\">cat -b </span><br><span class=\"line\"><span class=\"comment\"># 查看且标注行号</span></span><br><span class=\"line\">-n <span class=\"comment\"># 同上，但也会显示空行行号</span></span><br><span class=\"line\"></span><br><span class=\"line\">more</span><br><span class=\"line\"><span class=\"comment\"># - space     向下翻页</span></span><br><span class=\"line\"><span class=\"comment\"># - Ctrl+F    同上</span></span><br><span class=\"line\"><span class=\"comment\"># - b         back 返回一页显示</span></span><br><span class=\"line\"><span class=\"comment\"># - Ctrl+B    同上</span></span><br><span class=\"line\"><span class=\"comment\"># - Enter     向下n行,默认1</span></span><br><span class=\"line\"><span class=\"comment\"># - =         输出当前行号</span></span><br><span class=\"line\"><span class=\"comment\"># - v         调用vi/vim</span></span><br><span class=\"line\"><span class=\"comment\"># - !命令     调用shell 执行命令</span></span><br><span class=\"line\"><span class=\"comment\"># - q         退出</span></span><br><span class=\"line\"></span><br><span class=\"line\">less</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Vi-amp-amp-Vim\"><a href=\"#Vi-amp-amp-Vim\" class=\"headerlink\" title=\"Vi &amp;&amp; Vim\"></a>Vi &amp;&amp; Vim</h3><p>三个模式:</p>\n<ul>\n<li>命令模式</li>\n<li>插入模式</li>\n<li>Ex模式</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">para</th>\n<th align=\"center\">:</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">o</td>\n<td align=\"center\">:</td>\n<td align=\"left\">在当前行下面插入新空白行</td>\n</tr>\n<tr>\n<td align=\"center\">dd</td>\n<td align=\"center\">:</td>\n<td align=\"left\">删除当前一行。</td>\n</tr>\n<tr>\n<td align=\"center\">u</td>\n<td align=\"center\">:</td>\n<td align=\"left\">撤销一步操作</td>\n</tr>\n<tr>\n<td align=\"center\">yy</td>\n<td align=\"center\">:</td>\n<td align=\"left\">当前行-&gt;缓冲区</td>\n</tr>\n<tr>\n<td align=\"center\">p</td>\n<td align=\"center\">:</td>\n<td align=\"left\">缓冲区-&gt;光标之后插入</td>\n</tr>\n<tr>\n<td align=\"center\">n+</td>\n<td align=\"center\">y</td>\n<td align=\"left\">当前及接下来n行-&gt;缓冲区</td>\n</tr>\n<tr>\n<td align=\"center\">r</td>\n<td align=\"center\">:</td>\n<td align=\"left\">替换当前字符</td>\n</tr>\n<tr>\n<td align=\"center\">/</td>\n<td align=\"center\">:</td>\n<td align=\"left\">查找关键字——支持汉字呐！难得</td>\n</tr>\n<tr>\n<td align=\"center\">n</td>\n<td align=\"center\">:</td>\n<td align=\"left\">上命令下切换 next</td>\n</tr>\n</tbody></table>\n<h4 id=\"Ex下\"><a href=\"#Ex下\" class=\"headerlink\" title=\"Ex下:\"></a>Ex下:</h4><ul>\n<li><code>set number</code>: 显示行号。（不过我已经改了配置文件，默认显示）</li>\n<li>！+命令 代理执行系统命令。如ls cd </li>\n<li>sh 挂下编辑 显示系统命令行。 ctrl+d返回（PS:命令行下，这是关闭虚拟终端快捷键）</li>\n<li>tip:tail head 等查看命令可以和 &gt;&gt; 命令合用，将文件的首行或者结尾字添加到另一个文档～</li>\n</ul>\n"},{"title":"Nginx高可用","date":"2021-05-09T01:56:41.000Z","_content":"\n# Keepalived+Nginx实现高可用\n![Keepalived+Nginx实现高可用示意图](https://pic4.zhimg.com/80/v2-ec3208d1ea659d126fe2a008ec5ae927_1440w.jpg \"zhuanlan.zhihu.com/p/34943332\")\n\n## Nginx 关键字\n- IO多路复用epoll(IO复用)\n- 轻量,插件: Nginx仅保留了HTTP\n- CPU亲和: 每个worker进程固定在一个CPU\n\n## Nginx配置\n### 代理\n![正向代理示意图](https://pic2.zhimg.com/80/v2-f339964bbc01f2437f93acbac8158715_1440w.jpg \"https://zhuanlan.zhihu.com/p/69072041\")\n![正向代理意义?](https://pic4.zhimg.com/80/v2-21da2af85639573089e42bbf6074cc07_1440w.jpg \"https://zhuanlan.zhihu.com/p/69072041\")\n\n![反向代理示意图](https://pic4.zhimg.com/80/v2-102d945941e4c24ccc7c4712474cadd7_1440w.jpg \"https://zhuanlan.zhihu.com/p/69072041\")\n\n### 动静分离\n动态页面和静态页面交给不同的服务器来解析\n\n### 负载均衡\n```conf\nupstream balanceServer {\n    server 10.1.22.33:12345;\n    server 10.1.22.34:12345;\n    server 10.1.22.35:12345;\n}\n\nserver { \n    server_name  fe.server.com;\n    listen 80;\n    location /api {\n        proxy_pass http://balanceServer;\n  }\n}\n```\n#### 机制\n- 默认: `轮询`, 单机卡顿, 影响分配在这台服务器下的用户\n- 默认: `权重轮询`, 宕机Nginx会自动剔除出队列, `ip_hash`-来源IP分配分配给同个服务器\n- `fair`: 根据相应时间均衡分配, 默认不支持. 需安装`upstream_fair`, `url_hash`类`ip_hash`同样需要安装Nginx的`hash软件包`.\n\n## Keepalived 配置\n粘贴自: [这里](https://blog.csdn.net/l1028386804/article/details/72801492)\n\n### 概览\nVIP|IP|主机名|Nginx端口|默认主从\n----:|:----:|:----:|:----:|:----\n192.168.50.130|192.168.50.133|liuyazhuang133|88|MASTER\n192.168.50.130|192.168.50.134|liuyazhuang134|88|BACKUP\n\n### 主机器配置\n```bash\nvi /etc/keepalived/keepalived.conf\n```\n\n```conf\n# 主要\nglobal_defs {\n\t## keepalived 自带的邮件提醒需要开启 sendmail 服务。 建议用独立的监控或第三方 SMTP\n\trouter_id liuyazhuang133 ## 标识本节点的字条串，通常为 hostname\n} \n## keepalived 会定时执行脚本并对脚本执行的结果进行分析，动态调整 vrrp_instance 的优先级。如果脚本执行结果为 0，并且 weight 配置的值大于 0，则优先级相应的增加。如果脚本执行结果非 0，并且 weight配置的值小于 0，则优先级相应的减少。其他情况，维持原本配置的优先级，即配置文件中 priority 对应的值。\nvrrp_script chk_nginx {\n\tscript \"/etc/keepalived/nginx_check.sh\" ## 检测 nginx 状态的脚本路径\n\tinterval 2 ## 检测时间间隔\n\tweight -20 ## 如果条件成立，权重-20\n}\n## 定义虚拟路由， VI_1 为虚拟路由的标示符，自己定义名称\nvrrp_instance VI_1 {\n\tstate MASTER ## 主节点为 MASTER， 对应的备份节点为 BACKUP\n\tinterface eth0 ## 绑定虚拟 IP 的网络接口，与本机 IP 地址所在的网络接口相同， 我的是 eth0\n\tvirtual_router_id 33 ## 虚拟路由的 ID 号， 两个节点设置必须一样， 可选 IP 最后一段使用, 相同的 VRID 为一个组，他将决定多播的 MAC 地址\n\tmcast_src_ip 192.168.50.133 ## 本机 IP 地址\n\tpriority 100 ## 节点优先级， 值范围 0-254， MASTER 要比 BACKUP 高\n\tnopreempt ## 优先级高的设置 nopreempt 解决异常恢复后再次抢占的问题\n\tadvert_int 1 ## 组播信息发送间隔，两个节点设置必须一样， 默认 1s\n\t## 设置验证信息，两个节点必须一致\n\tauthentication {\n\t\tauth_type PASS\n\t\tauth_pass 1111 ## 真实生产，按需求对应该过来\n\t}\n\t## 将 track_script 块加入 instance 配置块\n\ttrack_script {\n\t\tchk_nginx ## 执行 Nginx 监控的服务\n\t} #\n\t# 虚拟 IP 池, 两个节点设置必须一样\n\tvirtual_ipaddress {\n\t\t192.168.50.130 ## 虚拟 ip，可以定义多个\n\t}\n}\n```\n\n### 备份机配置\n```bash\nvi /etc/keepalived/keepalived.conf\n```\n\n```conf\n# 备份\n! Configuration File for keepalived\nglobal_defs {\n\trouter_id liuyazhuang134\n}\nvrrp_script chk_nginx {\n\tscript \"/etc/keepalived/nginx_check.sh\"\n\tinterval 2\n\tweight -20\n}\nvrrp_instance VI_1 {\n\tstate BACKUP\n\tinterface eth1\n\tvirtual_router_id 33\n\tmcast_src_ip 192.168.50.134\n\tpriority 90\n\tadvert_int 1\n\tauthentication {\n\t\tauth_type PASS\n\t\tauth_pass 1111\n\t}\n\ttrack_script {\n\t\tchk_nginx\n\t}\n\tvirtual_ipaddress {\n\t\t192.168.50.130\n\t}\n}\n```\n\n---\n\n## Nginx 运维命令\n```bash\n# 快速关闭Nginx，可能不保存相关信息，并迅速终止web服务\nnginx -s stop\n\n# 平稳关闭Nginx，保存相关信息，有安排的结束web服务\nnginx -s quit\n\n# 因改变了Nginx相关配置，需要重新加载配置而重载\nnginx -s reload\n\n# 重新打开日志文件\nnginx -s reopen\n\n# 为 Nginx 指定一个配置文件，来代替缺省的\nnginx -c filename\n\n# 不运行，而仅仅测试配置文件。nginx 将检查配置文件的语法的正确性，并尝试打开配置文件中所引用到的文件\nnginx -t\n\n#  显示 nginx 的版本\nnginx -v\n\n# 显示 nginx 的版本，编译器版本和配置参数\nnginx -V\n\n# 格式换显示 nginx 配置参数\n2>&1 nginx -V | xargs -n1\n2>&1 nginx -V | xargs -n1 | grep lua\n```\n","source":"_posts/tips/tipsOfweb.md","raw":"---\ntitle: Nginx高可用\ndate: 2021-05-09 09:56:41\ncategories: [tip, web, learning]\ntags: [nginx, keepalived]\n---\n\n# Keepalived+Nginx实现高可用\n![Keepalived+Nginx实现高可用示意图](https://pic4.zhimg.com/80/v2-ec3208d1ea659d126fe2a008ec5ae927_1440w.jpg \"zhuanlan.zhihu.com/p/34943332\")\n\n## Nginx 关键字\n- IO多路复用epoll(IO复用)\n- 轻量,插件: Nginx仅保留了HTTP\n- CPU亲和: 每个worker进程固定在一个CPU\n\n## Nginx配置\n### 代理\n![正向代理示意图](https://pic2.zhimg.com/80/v2-f339964bbc01f2437f93acbac8158715_1440w.jpg \"https://zhuanlan.zhihu.com/p/69072041\")\n![正向代理意义?](https://pic4.zhimg.com/80/v2-21da2af85639573089e42bbf6074cc07_1440w.jpg \"https://zhuanlan.zhihu.com/p/69072041\")\n\n![反向代理示意图](https://pic4.zhimg.com/80/v2-102d945941e4c24ccc7c4712474cadd7_1440w.jpg \"https://zhuanlan.zhihu.com/p/69072041\")\n\n### 动静分离\n动态页面和静态页面交给不同的服务器来解析\n\n### 负载均衡\n```conf\nupstream balanceServer {\n    server 10.1.22.33:12345;\n    server 10.1.22.34:12345;\n    server 10.1.22.35:12345;\n}\n\nserver { \n    server_name  fe.server.com;\n    listen 80;\n    location /api {\n        proxy_pass http://balanceServer;\n  }\n}\n```\n#### 机制\n- 默认: `轮询`, 单机卡顿, 影响分配在这台服务器下的用户\n- 默认: `权重轮询`, 宕机Nginx会自动剔除出队列, `ip_hash`-来源IP分配分配给同个服务器\n- `fair`: 根据相应时间均衡分配, 默认不支持. 需安装`upstream_fair`, `url_hash`类`ip_hash`同样需要安装Nginx的`hash软件包`.\n\n## Keepalived 配置\n粘贴自: [这里](https://blog.csdn.net/l1028386804/article/details/72801492)\n\n### 概览\nVIP|IP|主机名|Nginx端口|默认主从\n----:|:----:|:----:|:----:|:----\n192.168.50.130|192.168.50.133|liuyazhuang133|88|MASTER\n192.168.50.130|192.168.50.134|liuyazhuang134|88|BACKUP\n\n### 主机器配置\n```bash\nvi /etc/keepalived/keepalived.conf\n```\n\n```conf\n# 主要\nglobal_defs {\n\t## keepalived 自带的邮件提醒需要开启 sendmail 服务。 建议用独立的监控或第三方 SMTP\n\trouter_id liuyazhuang133 ## 标识本节点的字条串，通常为 hostname\n} \n## keepalived 会定时执行脚本并对脚本执行的结果进行分析，动态调整 vrrp_instance 的优先级。如果脚本执行结果为 0，并且 weight 配置的值大于 0，则优先级相应的增加。如果脚本执行结果非 0，并且 weight配置的值小于 0，则优先级相应的减少。其他情况，维持原本配置的优先级，即配置文件中 priority 对应的值。\nvrrp_script chk_nginx {\n\tscript \"/etc/keepalived/nginx_check.sh\" ## 检测 nginx 状态的脚本路径\n\tinterval 2 ## 检测时间间隔\n\tweight -20 ## 如果条件成立，权重-20\n}\n## 定义虚拟路由， VI_1 为虚拟路由的标示符，自己定义名称\nvrrp_instance VI_1 {\n\tstate MASTER ## 主节点为 MASTER， 对应的备份节点为 BACKUP\n\tinterface eth0 ## 绑定虚拟 IP 的网络接口，与本机 IP 地址所在的网络接口相同， 我的是 eth0\n\tvirtual_router_id 33 ## 虚拟路由的 ID 号， 两个节点设置必须一样， 可选 IP 最后一段使用, 相同的 VRID 为一个组，他将决定多播的 MAC 地址\n\tmcast_src_ip 192.168.50.133 ## 本机 IP 地址\n\tpriority 100 ## 节点优先级， 值范围 0-254， MASTER 要比 BACKUP 高\n\tnopreempt ## 优先级高的设置 nopreempt 解决异常恢复后再次抢占的问题\n\tadvert_int 1 ## 组播信息发送间隔，两个节点设置必须一样， 默认 1s\n\t## 设置验证信息，两个节点必须一致\n\tauthentication {\n\t\tauth_type PASS\n\t\tauth_pass 1111 ## 真实生产，按需求对应该过来\n\t}\n\t## 将 track_script 块加入 instance 配置块\n\ttrack_script {\n\t\tchk_nginx ## 执行 Nginx 监控的服务\n\t} #\n\t# 虚拟 IP 池, 两个节点设置必须一样\n\tvirtual_ipaddress {\n\t\t192.168.50.130 ## 虚拟 ip，可以定义多个\n\t}\n}\n```\n\n### 备份机配置\n```bash\nvi /etc/keepalived/keepalived.conf\n```\n\n```conf\n# 备份\n! Configuration File for keepalived\nglobal_defs {\n\trouter_id liuyazhuang134\n}\nvrrp_script chk_nginx {\n\tscript \"/etc/keepalived/nginx_check.sh\"\n\tinterval 2\n\tweight -20\n}\nvrrp_instance VI_1 {\n\tstate BACKUP\n\tinterface eth1\n\tvirtual_router_id 33\n\tmcast_src_ip 192.168.50.134\n\tpriority 90\n\tadvert_int 1\n\tauthentication {\n\t\tauth_type PASS\n\t\tauth_pass 1111\n\t}\n\ttrack_script {\n\t\tchk_nginx\n\t}\n\tvirtual_ipaddress {\n\t\t192.168.50.130\n\t}\n}\n```\n\n---\n\n## Nginx 运维命令\n```bash\n# 快速关闭Nginx，可能不保存相关信息，并迅速终止web服务\nnginx -s stop\n\n# 平稳关闭Nginx，保存相关信息，有安排的结束web服务\nnginx -s quit\n\n# 因改变了Nginx相关配置，需要重新加载配置而重载\nnginx -s reload\n\n# 重新打开日志文件\nnginx -s reopen\n\n# 为 Nginx 指定一个配置文件，来代替缺省的\nnginx -c filename\n\n# 不运行，而仅仅测试配置文件。nginx 将检查配置文件的语法的正确性，并尝试打开配置文件中所引用到的文件\nnginx -t\n\n#  显示 nginx 的版本\nnginx -v\n\n# 显示 nginx 的版本，编译器版本和配置参数\nnginx -V\n\n# 格式换显示 nginx 配置参数\n2>&1 nginx -V | xargs -n1\n2>&1 nginx -V | xargs -n1 | grep lua\n```\n","slug":"tips/tipsOfweb","published":1,"updated":"2021-05-12T11:18:44.812Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9dz001fu3yq03isaq4a","content":"<h1 id=\"Keepalived-Nginx实现高可用\"><a href=\"#Keepalived-Nginx实现高可用\" class=\"headerlink\" title=\"Keepalived+Nginx实现高可用\"></a>Keepalived+Nginx实现高可用</h1><p><img src=\"https://pic4.zhimg.com/80/v2-ec3208d1ea659d126fe2a008ec5ae927_1440w.jpg\" alt=\"Keepalived+Nginx实现高可用示意图\" title=\"zhuanlan.zhihu.com/p/34943332\"></p>\n<h2 id=\"Nginx-关键字\"><a href=\"#Nginx-关键字\" class=\"headerlink\" title=\"Nginx 关键字\"></a>Nginx 关键字</h2><ul>\n<li>IO多路复用epoll(IO复用)</li>\n<li>轻量,插件: Nginx仅保留了HTTP</li>\n<li>CPU亲和: 每个worker进程固定在一个CPU</li>\n</ul>\n<h2 id=\"Nginx配置\"><a href=\"#Nginx配置\" class=\"headerlink\" title=\"Nginx配置\"></a>Nginx配置</h2><h3 id=\"代理\"><a href=\"#代理\" class=\"headerlink\" title=\"代理\"></a>代理</h3><p><img src=\"https://pic2.zhimg.com/80/v2-f339964bbc01f2437f93acbac8158715_1440w.jpg\" alt=\"正向代理示意图\" title=\"https://zhuanlan.zhihu.com/p/69072041\"><br><img src=\"https://pic4.zhimg.com/80/v2-21da2af85639573089e42bbf6074cc07_1440w.jpg\" alt=\"正向代理意义?\" title=\"https://zhuanlan.zhihu.com/p/69072041\"></p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-102d945941e4c24ccc7c4712474cadd7_1440w.jpg\" alt=\"反向代理示意图\" title=\"https://zhuanlan.zhihu.com/p/69072041\"></p>\n<h3 id=\"动静分离\"><a href=\"#动静分离\" class=\"headerlink\" title=\"动静分离\"></a>动静分离</h3><p>动态页面和静态页面交给不同的服务器来解析</p>\n<h3 id=\"负载均衡\"><a href=\"#负载均衡\" class=\"headerlink\" title=\"负载均衡\"></a>负载均衡</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">upstream balanceServer &#123;</span><br><span class=\"line\">    server 10.1.22.33:12345;</span><br><span class=\"line\">    server 10.1.22.34:12345;</span><br><span class=\"line\">    server 10.1.22.35:12345;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123; </span><br><span class=\"line\">    server_name  fe.server.com;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    location &#x2F;api &#123;</span><br><span class=\"line\">        proxy_pass http:&#x2F;&#x2F;balanceServer;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"机制\"><a href=\"#机制\" class=\"headerlink\" title=\"机制\"></a>机制</h4><ul>\n<li>默认: <code>轮询</code>, 单机卡顿, 影响分配在这台服务器下的用户</li>\n<li>默认: <code>权重轮询</code>, 宕机Nginx会自动剔除出队列, <code>ip_hash</code>-来源IP分配分配给同个服务器</li>\n<li><code>fair</code>: 根据相应时间均衡分配, 默认不支持. 需安装<code>upstream_fair</code>, <code>url_hash</code>类<code>ip_hash</code>同样需要安装Nginx的<code>hash软件包</code>.</li>\n</ul>\n<h2 id=\"Keepalived-配置\"><a href=\"#Keepalived-配置\" class=\"headerlink\" title=\"Keepalived 配置\"></a>Keepalived 配置</h2><p>粘贴自: <a href=\"https://blog.csdn.net/l1028386804/article/details/72801492\">这里</a></p>\n<h3 id=\"概览\"><a href=\"#概览\" class=\"headerlink\" title=\"概览\"></a>概览</h3><table>\n<thead>\n<tr>\n<th align=\"right\">VIP</th>\n<th align=\"center\">IP</th>\n<th align=\"center\">主机名</th>\n<th align=\"center\">Nginx端口</th>\n<th align=\"left\">默认主从</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">192.168.50.130</td>\n<td align=\"center\">192.168.50.133</td>\n<td align=\"center\">liuyazhuang133</td>\n<td align=\"center\">88</td>\n<td align=\"left\">MASTER</td>\n</tr>\n<tr>\n<td align=\"right\">192.168.50.130</td>\n<td align=\"center\">192.168.50.134</td>\n<td align=\"center\">liuyazhuang134</td>\n<td align=\"center\">88</td>\n<td align=\"left\">BACKUP</td>\n</tr>\n</tbody></table>\n<h3 id=\"主机器配置\"><a href=\"#主机器配置\" class=\"headerlink\" title=\"主机器配置\"></a>主机器配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 主要</span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">\t## keepalived 自带的邮件提醒需要开启 sendmail 服务。 建议用独立的监控或第三方 SMTP</span><br><span class=\"line\">\trouter_id liuyazhuang133 ## 标识本节点的字条串，通常为 hostname</span><br><span class=\"line\">&#125; </span><br><span class=\"line\">## keepalived 会定时执行脚本并对脚本执行的结果进行分析，动态调整 vrrp_instance 的优先级。如果脚本执行结果为 0，并且 weight 配置的值大于 0，则优先级相应的增加。如果脚本执行结果非 0，并且 weight配置的值小于 0，则优先级相应的减少。其他情况，维持原本配置的优先级，即配置文件中 priority 对应的值。</span><br><span class=\"line\">vrrp_script chk_nginx &#123;</span><br><span class=\"line\">\tscript &quot;&#x2F;etc&#x2F;keepalived&#x2F;nginx_check.sh&quot; ## 检测 nginx 状态的脚本路径</span><br><span class=\"line\">\tinterval 2 ## 检测时间间隔</span><br><span class=\"line\">\tweight -20 ## 如果条件成立，权重-20</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">## 定义虚拟路由， VI_1 为虚拟路由的标示符，自己定义名称</span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">\tstate MASTER ## 主节点为 MASTER， 对应的备份节点为 BACKUP</span><br><span class=\"line\">\tinterface eth0 ## 绑定虚拟 IP 的网络接口，与本机 IP 地址所在的网络接口相同， 我的是 eth0</span><br><span class=\"line\">\tvirtual_router_id 33 ## 虚拟路由的 ID 号， 两个节点设置必须一样， 可选 IP 最后一段使用, 相同的 VRID 为一个组，他将决定多播的 MAC 地址</span><br><span class=\"line\">\tmcast_src_ip 192.168.50.133 ## 本机 IP 地址</span><br><span class=\"line\">\tpriority 100 ## 节点优先级， 值范围 0-254， MASTER 要比 BACKUP 高</span><br><span class=\"line\">\tnopreempt ## 优先级高的设置 nopreempt 解决异常恢复后再次抢占的问题</span><br><span class=\"line\">\tadvert_int 1 ## 组播信息发送间隔，两个节点设置必须一样， 默认 1s</span><br><span class=\"line\">\t## 设置验证信息，两个节点必须一致</span><br><span class=\"line\">\tauthentication &#123;</span><br><span class=\"line\">\t\tauth_type PASS</span><br><span class=\"line\">\t\tauth_pass 1111 ## 真实生产，按需求对应该过来</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t## 将 track_script 块加入 instance 配置块</span><br><span class=\"line\">\ttrack_script &#123;</span><br><span class=\"line\">\t\tchk_nginx ## 执行 Nginx 监控的服务</span><br><span class=\"line\">\t&#125; #</span><br><span class=\"line\">\t# 虚拟 IP 池, 两个节点设置必须一样</span><br><span class=\"line\">\tvirtual_ipaddress &#123;</span><br><span class=\"line\">\t\t192.168.50.130 ## 虚拟 ip，可以定义多个</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"备份机配置\"><a href=\"#备份机配置\" class=\"headerlink\" title=\"备份机配置\"></a>备份机配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 备份</span><br><span class=\"line\">! Configuration File for keepalived</span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">\trouter_id liuyazhuang134</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">vrrp_script chk_nginx &#123;</span><br><span class=\"line\">\tscript &quot;&#x2F;etc&#x2F;keepalived&#x2F;nginx_check.sh&quot;</span><br><span class=\"line\">\tinterval 2</span><br><span class=\"line\">\tweight -20</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">\tstate BACKUP</span><br><span class=\"line\">\tinterface eth1</span><br><span class=\"line\">\tvirtual_router_id 33</span><br><span class=\"line\">\tmcast_src_ip 192.168.50.134</span><br><span class=\"line\">\tpriority 90</span><br><span class=\"line\">\tadvert_int 1</span><br><span class=\"line\">\tauthentication &#123;</span><br><span class=\"line\">\t\tauth_type PASS</span><br><span class=\"line\">\t\tauth_pass 1111</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\ttrack_script &#123;</span><br><span class=\"line\">\t\tchk_nginx</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tvirtual_ipaddress &#123;</span><br><span class=\"line\">\t\t192.168.50.130</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"Nginx-运维命令\"><a href=\"#Nginx-运维命令\" class=\"headerlink\" title=\"Nginx 运维命令\"></a>Nginx 运维命令</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 快速关闭Nginx，可能不保存相关信息，并迅速终止web服务</span></span><br><span class=\"line\">nginx -s stop</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 平稳关闭Nginx，保存相关信息，有安排的结束web服务</span></span><br><span class=\"line\">nginx -s quit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 因改变了Nginx相关配置，需要重新加载配置而重载</span></span><br><span class=\"line\">nginx -s reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重新打开日志文件</span></span><br><span class=\"line\">nginx -s reopen</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 为 Nginx 指定一个配置文件，来代替缺省的</span></span><br><span class=\"line\">nginx -c filename</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 不运行，而仅仅测试配置文件。nginx 将检查配置文件的语法的正确性，并尝试打开配置文件中所引用到的文件</span></span><br><span class=\"line\">nginx -t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  显示 nginx 的版本</span></span><br><span class=\"line\">nginx -v</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 显示 nginx 的版本，编译器版本和配置参数</span></span><br><span class=\"line\">nginx -V</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 格式换显示 nginx 配置参数</span></span><br><span class=\"line\">2&gt;&amp;1 nginx -V | xargs -n1</span><br><span class=\"line\">2&gt;&amp;1 nginx -V | xargs -n1 | grep lua</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Keepalived-Nginx实现高可用\"><a href=\"#Keepalived-Nginx实现高可用\" class=\"headerlink\" title=\"Keepalived+Nginx实现高可用\"></a>Keepalived+Nginx实现高可用</h1><p><img src=\"https://pic4.zhimg.com/80/v2-ec3208d1ea659d126fe2a008ec5ae927_1440w.jpg\" alt=\"Keepalived+Nginx实现高可用示意图\" title=\"zhuanlan.zhihu.com/p/34943332\"></p>\n<h2 id=\"Nginx-关键字\"><a href=\"#Nginx-关键字\" class=\"headerlink\" title=\"Nginx 关键字\"></a>Nginx 关键字</h2><ul>\n<li>IO多路复用epoll(IO复用)</li>\n<li>轻量,插件: Nginx仅保留了HTTP</li>\n<li>CPU亲和: 每个worker进程固定在一个CPU</li>\n</ul>\n<h2 id=\"Nginx配置\"><a href=\"#Nginx配置\" class=\"headerlink\" title=\"Nginx配置\"></a>Nginx配置</h2><h3 id=\"代理\"><a href=\"#代理\" class=\"headerlink\" title=\"代理\"></a>代理</h3><p><img src=\"https://pic2.zhimg.com/80/v2-f339964bbc01f2437f93acbac8158715_1440w.jpg\" alt=\"正向代理示意图\" title=\"https://zhuanlan.zhihu.com/p/69072041\"><br><img src=\"https://pic4.zhimg.com/80/v2-21da2af85639573089e42bbf6074cc07_1440w.jpg\" alt=\"正向代理意义?\" title=\"https://zhuanlan.zhihu.com/p/69072041\"></p>\n<p><img src=\"https://pic4.zhimg.com/80/v2-102d945941e4c24ccc7c4712474cadd7_1440w.jpg\" alt=\"反向代理示意图\" title=\"https://zhuanlan.zhihu.com/p/69072041\"></p>\n<h3 id=\"动静分离\"><a href=\"#动静分离\" class=\"headerlink\" title=\"动静分离\"></a>动静分离</h3><p>动态页面和静态页面交给不同的服务器来解析</p>\n<h3 id=\"负载均衡\"><a href=\"#负载均衡\" class=\"headerlink\" title=\"负载均衡\"></a>负载均衡</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">upstream balanceServer &#123;</span><br><span class=\"line\">    server 10.1.22.33:12345;</span><br><span class=\"line\">    server 10.1.22.34:12345;</span><br><span class=\"line\">    server 10.1.22.35:12345;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">server &#123; </span><br><span class=\"line\">    server_name  fe.server.com;</span><br><span class=\"line\">    listen 80;</span><br><span class=\"line\">    location &#x2F;api &#123;</span><br><span class=\"line\">        proxy_pass http:&#x2F;&#x2F;balanceServer;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"机制\"><a href=\"#机制\" class=\"headerlink\" title=\"机制\"></a>机制</h4><ul>\n<li>默认: <code>轮询</code>, 单机卡顿, 影响分配在这台服务器下的用户</li>\n<li>默认: <code>权重轮询</code>, 宕机Nginx会自动剔除出队列, <code>ip_hash</code>-来源IP分配分配给同个服务器</li>\n<li><code>fair</code>: 根据相应时间均衡分配, 默认不支持. 需安装<code>upstream_fair</code>, <code>url_hash</code>类<code>ip_hash</code>同样需要安装Nginx的<code>hash软件包</code>.</li>\n</ul>\n<h2 id=\"Keepalived-配置\"><a href=\"#Keepalived-配置\" class=\"headerlink\" title=\"Keepalived 配置\"></a>Keepalived 配置</h2><p>粘贴自: <a href=\"https://blog.csdn.net/l1028386804/article/details/72801492\">这里</a></p>\n<h3 id=\"概览\"><a href=\"#概览\" class=\"headerlink\" title=\"概览\"></a>概览</h3><table>\n<thead>\n<tr>\n<th align=\"right\">VIP</th>\n<th align=\"center\">IP</th>\n<th align=\"center\">主机名</th>\n<th align=\"center\">Nginx端口</th>\n<th align=\"left\">默认主从</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">192.168.50.130</td>\n<td align=\"center\">192.168.50.133</td>\n<td align=\"center\">liuyazhuang133</td>\n<td align=\"center\">88</td>\n<td align=\"left\">MASTER</td>\n</tr>\n<tr>\n<td align=\"right\">192.168.50.130</td>\n<td align=\"center\">192.168.50.134</td>\n<td align=\"center\">liuyazhuang134</td>\n<td align=\"center\">88</td>\n<td align=\"left\">BACKUP</td>\n</tr>\n</tbody></table>\n<h3 id=\"主机器配置\"><a href=\"#主机器配置\" class=\"headerlink\" title=\"主机器配置\"></a>主机器配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 主要</span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">\t## keepalived 自带的邮件提醒需要开启 sendmail 服务。 建议用独立的监控或第三方 SMTP</span><br><span class=\"line\">\trouter_id liuyazhuang133 ## 标识本节点的字条串，通常为 hostname</span><br><span class=\"line\">&#125; </span><br><span class=\"line\">## keepalived 会定时执行脚本并对脚本执行的结果进行分析，动态调整 vrrp_instance 的优先级。如果脚本执行结果为 0，并且 weight 配置的值大于 0，则优先级相应的增加。如果脚本执行结果非 0，并且 weight配置的值小于 0，则优先级相应的减少。其他情况，维持原本配置的优先级，即配置文件中 priority 对应的值。</span><br><span class=\"line\">vrrp_script chk_nginx &#123;</span><br><span class=\"line\">\tscript &quot;&#x2F;etc&#x2F;keepalived&#x2F;nginx_check.sh&quot; ## 检测 nginx 状态的脚本路径</span><br><span class=\"line\">\tinterval 2 ## 检测时间间隔</span><br><span class=\"line\">\tweight -20 ## 如果条件成立，权重-20</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">## 定义虚拟路由， VI_1 为虚拟路由的标示符，自己定义名称</span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">\tstate MASTER ## 主节点为 MASTER， 对应的备份节点为 BACKUP</span><br><span class=\"line\">\tinterface eth0 ## 绑定虚拟 IP 的网络接口，与本机 IP 地址所在的网络接口相同， 我的是 eth0</span><br><span class=\"line\">\tvirtual_router_id 33 ## 虚拟路由的 ID 号， 两个节点设置必须一样， 可选 IP 最后一段使用, 相同的 VRID 为一个组，他将决定多播的 MAC 地址</span><br><span class=\"line\">\tmcast_src_ip 192.168.50.133 ## 本机 IP 地址</span><br><span class=\"line\">\tpriority 100 ## 节点优先级， 值范围 0-254， MASTER 要比 BACKUP 高</span><br><span class=\"line\">\tnopreempt ## 优先级高的设置 nopreempt 解决异常恢复后再次抢占的问题</span><br><span class=\"line\">\tadvert_int 1 ## 组播信息发送间隔，两个节点设置必须一样， 默认 1s</span><br><span class=\"line\">\t## 设置验证信息，两个节点必须一致</span><br><span class=\"line\">\tauthentication &#123;</span><br><span class=\"line\">\t\tauth_type PASS</span><br><span class=\"line\">\t\tauth_pass 1111 ## 真实生产，按需求对应该过来</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t## 将 track_script 块加入 instance 配置块</span><br><span class=\"line\">\ttrack_script &#123;</span><br><span class=\"line\">\t\tchk_nginx ## 执行 Nginx 监控的服务</span><br><span class=\"line\">\t&#125; #</span><br><span class=\"line\">\t# 虚拟 IP 池, 两个节点设置必须一样</span><br><span class=\"line\">\tvirtual_ipaddress &#123;</span><br><span class=\"line\">\t\t192.168.50.130 ## 虚拟 ip，可以定义多个</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"备份机配置\"><a href=\"#备份机配置\" class=\"headerlink\" title=\"备份机配置\"></a>备份机配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 备份</span><br><span class=\"line\">! Configuration File for keepalived</span><br><span class=\"line\">global_defs &#123;</span><br><span class=\"line\">\trouter_id liuyazhuang134</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">vrrp_script chk_nginx &#123;</span><br><span class=\"line\">\tscript &quot;&#x2F;etc&#x2F;keepalived&#x2F;nginx_check.sh&quot;</span><br><span class=\"line\">\tinterval 2</span><br><span class=\"line\">\tweight -20</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">vrrp_instance VI_1 &#123;</span><br><span class=\"line\">\tstate BACKUP</span><br><span class=\"line\">\tinterface eth1</span><br><span class=\"line\">\tvirtual_router_id 33</span><br><span class=\"line\">\tmcast_src_ip 192.168.50.134</span><br><span class=\"line\">\tpriority 90</span><br><span class=\"line\">\tadvert_int 1</span><br><span class=\"line\">\tauthentication &#123;</span><br><span class=\"line\">\t\tauth_type PASS</span><br><span class=\"line\">\t\tauth_pass 1111</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\ttrack_script &#123;</span><br><span class=\"line\">\t\tchk_nginx</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tvirtual_ipaddress &#123;</span><br><span class=\"line\">\t\t192.168.50.130</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"Nginx-运维命令\"><a href=\"#Nginx-运维命令\" class=\"headerlink\" title=\"Nginx 运维命令\"></a>Nginx 运维命令</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 快速关闭Nginx，可能不保存相关信息，并迅速终止web服务</span></span><br><span class=\"line\">nginx -s stop</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 平稳关闭Nginx，保存相关信息，有安排的结束web服务</span></span><br><span class=\"line\">nginx -s quit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 因改变了Nginx相关配置，需要重新加载配置而重载</span></span><br><span class=\"line\">nginx -s reload</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 重新打开日志文件</span></span><br><span class=\"line\">nginx -s reopen</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 为 Nginx 指定一个配置文件，来代替缺省的</span></span><br><span class=\"line\">nginx -c filename</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 不运行，而仅仅测试配置文件。nginx 将检查配置文件的语法的正确性，并尝试打开配置文件中所引用到的文件</span></span><br><span class=\"line\">nginx -t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  显示 nginx 的版本</span></span><br><span class=\"line\">nginx -v</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 显示 nginx 的版本，编译器版本和配置参数</span></span><br><span class=\"line\">nginx -V</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 格式换显示 nginx 配置参数</span></span><br><span class=\"line\">2&gt;&amp;1 nginx -V | xargs -n1</span><br><span class=\"line\">2&gt;&amp;1 nginx -V | xargs -n1 | grep lua</span><br></pre></td></tr></table></figure>\n"},{"title":"db数据库","date":"2018-05-15T01:51:09.000Z","_content":"\n# DB数据库 🖥 📊🖥\n![db](https://webassets.mongodb.com/_com_assets/cms/kmxrodmee9int5s1v-HP_Highlight%202.svg)\n## MongoDB笔记\n学习网站：<http://www.runoob.com/mongodb/mongodb-tutorial.html>\n    (其学习教程还挺可观，很多，不过还不清楚好不好)\n\n### <font color=#ff5000>注意事项</font>\n#### Mongo 数据库锁\nmongo只提供库级粒度锁，所以一个写操作锁定时，其他读写操作都等待…   <font color=#d0a010>所以这个导致了Mongo多线程写操作反而没有一个线程写来的快？</font>\n\n<font color=#d0a010>前台建立索引时</font>，`Mongo`需占用一个写锁（且不同上述、不会临时放弃）   <font color=#10d0a0>为避免此问题</font>需采用`background`方式\n```ruby\n    db.posts.ensureIndex({user_id: 1})  #此方式将引起全面战争\n\n    db.posts.ensureIndex({user_id: 1}， {background: 1}) # 这个就比较和平\n```\n### 操作命令简单记录\n#### 创建、插入 \n    use DATABASE_NAME   #如果数据库不存在，则创建数据库，否则切换到指定数据库。\n    show dbs        #查看所有数据库“name    size”\n刚创建的数据库，如没有内容则不现实在其中\n    \n    db.runoob.insert({\"name\":\"教程\"})       #插入数据\n#### 删除\n    db.dropDatabase()       #删除当前数据库，如未选择则删除test\n    db.collection.drop()        #删除集合\n    db.site.drop()          #：如删除site集合\n\n##### 删除重复数据\n```mysql\n    delete from alarm_calendar where id not in (SELECT maxid from (SELECT MAX(id) as maxid, \n    CONCAT(user_id,time,generic_name) as nameAndCode from alarm_calendar GROUP BY nameAndCode) t);\n```\n根据`user_id`, `time`, `generic_name`来打包重复，将重复数据删掉, 留下`max`，在自增里面即：最新数据\n\n#### 插入文档\n    db.COLLECTION_NAME.insert(document)\n---\n    db.col.insert({title: 'MongoDB 教程', \n        description: 'MongoDB 是一个 Nosql 数据库',\n        by: '菜鸟教程',     \n        url: 'http://www.runoob.com',       \n        tags: ['mongodb', 'database', 'NoSQL'], \n        likes: 100\n        })      #例如这样\n\ndb.col.find()       #查看已插入文档\n\n也可以将document=括号里要插入内容，然后插入document变量，效果一样。\n##### 3.2版本新加\n    db.collection.insertOne()       #向指定集合中插入一条文档数据\n    db.collection.insertMany()  #向指定集合中插入多条文档数据\n---\n    插入单条数据\n    var document = db.collection.insertOne({\"a\": 3})\n> document\n{\n        \"acknowledged\" : true,\n        \"insertedId\" : ObjectId(\"571a218011a82a1d94c02333\")\n}\n\n    插入多条数据    \n    var res = db.collection.insertMany([{\"b\": 3}, {'c': 4}])\n> res\n{\n        \"acknowledged\" : true,\n        \"insertedIds\" : [\n                ObjectId(\"571a22a911a82a1d94c02337\"),\n                ObjectId(\"571a22a911a82a1d94c02338\")\n        ]\n}\n\n### 更新、添加文档\n    db.col.update({'title':'MongoDB 教程'},{$set:{'title':'MongoDB'}})      \n    #更新标题\n    \n    db.collection.save(     \n    #通过传入的文档来替换已有文档\n    <document>,\n    {\n    writeConcern: <document>\n    })\n>参数说明：\ndocument :  文档数据。\nwriteConcern :  可选，抛出异常的级别。\n\n<font color=greeen>eg：</font>      实例中替换了 _id 为 56064f89ade2f21f36b03136 的文档数据：\n\n    db.col.save({\n    \"_id\" : ObjectId(\"56064f89ade2f21f36b03136\"),\n    \"title\" : \"MongoDB\",\n    \"description\" : \"MongoDB 是一个 Nosql 数据库\",\n    \"by\" : \"Runoob\",\n    \"url\" : \"http://www.runoob.com\",\n    \"tags\" : [\n        \"mongodb\",\n        \"NoSQL\"\n    ],\n    \"likes\" : 110\n})\n\n### 导入csv文件\n    mongoimport --db Trader_1Min_Db --collection Au(T+D) --type csv --file \n    D:\\\\IFData\\\\md_Au(T+D)_20170101_20170531\\\\md_Au(T+D)_2017010301.csv \n    --headerline --upsert --ignoreBlanks\n> 注意需要另开一个命令行，在其中运行。\n>2017-10-25T08:43:40.917+0800 E QUERY    [thread1] SyntaxError: missing ; before statement @(shell):1:16 否则就是这个错误\n\n    -d    指定把数据导入到哪一个数据库中\n    -c    指定把数据导入到哪一个集合中\n    --type    指定导入的数据类型   csv/tsv  逗号或者tab分割值\n    --file       指定从哪一个文件中导入数据\n    --headerline    仅适用于导入csv,tsv格式的数据，表示文件中的第一行作为数据头\n    --upsert  以新增或者更新的方式来导入数据\n    --f  导入字段名\n    --ignoreBlanks 忽略空白符\n### 导出\n    mongoexport -d test -c students -o students.dat \n    connected to: 127.0.0.1 exported 9 records\n    # 指明导出格式为csv\n    mongoexport -d test -c students --csv -f classid,name,age -o students_csv.dat \n    connected to: 127.0.0.1 exported 9 records   \n#### 添加\n    db.collectionName.update({}, {$set:{'key' : value}}, false, true);\n\n## 改\n    .update\n#### 更改字段名称\n    db.CollectionName.update({}, {$rename : {\"OldName\" : \"NewName\"}}, false, true)\n    # false为如不存在update记录，是否插入新的纪录  \n    # ture位置为更新全部数据，如设定false 则为只更新第一条\n    # 另外 没有输入名称时没有输全，也会显示查找，但不会执行更改\n#### 统配 \n    db.CollectionName.update(<query>, <update>,{upsert : <boolean>, multi : <boolean>, \n    writeConcern : <document>})\n    # query : update 查找条件，类似sql update查询内where后面的\n    # update : update的对象和一些更新的操作符（如$,$inc...）等，也可以理解为sql update查\n    #>询内set后面的\n    # upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插\n    #>入，默认是false，不插入。\n    # multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把\n    #>按条件查出来多条记录全部更新。\n    # writeConcern :可选，抛出异常的级别。\n##### eg\n    db.col.update({'title':'MongoDB'},{$set:{'title':'IamNewTitle'}})\n\n\n\n#### 删除文档\nremove()函数是用来移除集合中的数据。\n\n    db.collection.remove(\n    <query>,\n    <justOne>\n    )\n##### 2.6版以后\n    db.collection.remove(\n    <query>,\n    {\n    justOne: <boolean>,\n    writeConcern: <document>\n    })\n>参数说明：\nquery :（可选）删除的文档的条件。\njustOne : （可选）如果设为 true 或 1，则只删除一个文档。\nwriteConcern :（可选）抛出异常的级别。\n\n    db.col.remove({})   #删除所有 (就很恐怖)\n\n#### 查询文档\n|操作       |格式               |范例                           |RDBMS中的类似语句|\n|   :----       |       :---:           |               :---:               | ---:                                              |\n|等于       | {`<key>:<value>`}     | `db.col.find({\"by\":\"教程\"}).pretty()    `| `where by = '教程'`    |\n|小于       | {`<key>:{$lt:<value>`}}   | `db.col.find({\"likes\":{$lt:50}}).pretty()`    | `where likes < 50   ` |\n|小于或等于 | {`<key>:{$lte:<value>`}}  | `db.col.find({\"likes\":{$lte:50}}).pretty()`   | ...                       |\n|大于       | {`<key>:{$gt:<value>`}}   | `db.col.find({\"likes\":{$gt:50}}).pretty()`    | ...               |\n|大于或等于 | {`<key>:{$gte:<value>`}}  | `db.col.find({\"likes\":{$gte:50}}).pretty()`   | ...               |\n|不等于     | {`<key>:{$ne:<value>`}}   | `db.col.find({\"likes\":{$ne:50}}).pretty()`    | `where likes != 50` |\n##### And\nfind可以传入多个键(key),逗号隔开：\n\n    db.col.find({key1:value1, key2:value2}).pretty()\n    db.col.find({\"by\":\"教程\", \"title\":\"MongoDB \"}).pretty()\n    #类似于\n    WHERE by='教程' AND title='MongoDB '\n##### Or\n    db.test.find({$[{key1:value1},(key2:value2)]}).pretty()     #注意小中大括号😰\n    db.col.find({\"likes\": {$gt:50}, $or: [{\"by\": \"教程\"},{\"title\": \"MongoDB \"}]})\n##### And 与 Or\n    db.col.find({\"likes\": {$gt:50}, $or: [{\"by\": \"教程\"},{\"title\": \"MongoDB \"}]})\n    #类似于（其中pretty()是显示样式）\n    where likes>50 AND (by = '教程' OR title = 'MongoDB ‘\n#### 简写说明\n|       |           |           |       |\n|:----      |   :----:      |   :----:      |   ----:   |\n|$gt        |--------       |greater than   |>      |\n|$gte   |---------      |gt equal       |>=     |\n|$lt        |--------       |less than      |<      |\n|$lte       |---------      |lt equal       |<=     |\n|$ne        |-----------    |not equal  |!=     |\n|$eq    |--------       |equal          |=      |\n##### Type\n    db.col.find({\"title\" : {$type : 2}})    #获取“col”集合中title为String的数据\n**对照表：**\n\n|类型               |数字   |备注           |\n|:---                   |   :---:   |           ---:    |\n|Double             |1      |               |\n|String             |2      |               |\n|Object             |3      |               |\n|Array              |4      |               |\n|Binary data            |5      |               |\n|Undefined          |6      |已废弃。           |   \n|Object id              |7      |               |\n|Boolean                |8      |               |\n|Date               |9      |               |\n|Null                   |10     |               |\n|Regular Expression     |11     |               |\n|JavaScript         |13     |               |\n|Symbol             |14     |               |\n|JavaScript (with scope)    |15     |               | \n|32-bit integer         |16     |               |\n|Timestamp          |17     |               |\n|64-bit integer         |18     |               |\n|Min key                |255        |Query with -1.     |\n|Max key                |127        |               |\n##### Limit() Skip()方法\n    db.col.find({},{\"title\":1,_id:0}).limit(2)\n>参数说明：\n    “title”后1为判断语句，表示是否只查询“title”内容0为否，显示这条的全部信息。_id的0亦为判断表示是否显示“_id”内容。limit为限制搜索信息条数。\n    \n    db.col.find({},{\"title\":1,_id:0}).limit(1).skip(1)\n    skip(NUMBER)        #NUMBER为阶跃，即每隔几条数据来搜索\n\n### 排序\n    db.COLLECTION_NAME.find().sort({KEY:1})     #KEY后数字可为1OR-1，升序OR降序\n    db.col.find({},{\"title\":1,_id:0}).sort({\"likes\":-1}     #按“likes”降序排序\n\n---\n\n---\n\n### MongoDB 索引        （<font color=crimson>建立索引干嘛……</font>）\n#### ensureIndex() 方法\n    db.COLLECTION_NAME.ensureIndex({KEY:1})\n    # Key 值为要创建的索引字段，1为指定按升序创建索引，降序-1\n\n### 聚合\n#### aggregate()方法\n    db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)\n    db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$sum : 1}}}])\n    #类似于\n    select by_user, count(*) from mycol group by by_user\n>输出结果：\n{ \"_id\" : \"Neo4j\", \"num_tutorial\" : 1 }\n{ \"_id\" : \"runoob.com\", \"num_tutorial\" : 2 }\n{ \"_id\" : null, \"num_tutorial\" : 1 }\n\n>参数说明：“$by_user” 即为分类依据，并打印出来（如上）。\nnum_tutorial 仅为显示提示，可以更改为任意提示甚至汉字。\n$sum : 1 其中1为每次计数值，即重复一次加几。1+1+1+1…… ：重复一次加1；0.1+0.1+0.1……重复一次加0.1。这个意思\n\n##### 计算符：\n|表达式     |描述   |   实例        |\n|:---           |   :---:   |       :---:   |\n|$sum   |计算总和。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$sum : \"$likes\"}}}])`|\n|$avg   |计算平均值 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$avg : \"$likes\"}}}])`|\n|$min   |获取集合中所有文档对应值得最小值。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$min : \"$likes\"}}}])`|\n|$max   |获取集合中所有文档对应值得最大值。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$max : \"$likes\"}}}])`|\n|$push  |在结果文档中插入值到一个数组中。   |`db.mycol.aggregate([{$group : {_id : \"$by_user\", url : {$push: \"$url\"}}}])`|\n|$addToSet  |在结果文档中插入值到一个数组中，但不创建副本。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", url : {$addToSet : \"$url\"}}}])`|\n|$first |根据资源文档的排序获取第一个文档数据。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", first_url : {$first : \"$url\"}}}])`|\n|$last  |根据资源文档的排序获取最后一个文档数据 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", last_url : {$last : \"$url\"}}}])`|\n\n### 条件操作符\n    $gt     大于\n    $lt     小于\n    $gte        大于等于\n    $lte        小于等于\n#### eg：\n    db.col.find({likes : {$gte : 100}})\n    # 查询“col”集合中\"likes\"大于100的数据\n    # 比较与 `SQL       Select * from col where likes >=100;`\n#### 取前n条数据\n    .find().limit(n)\n\n### 执行顺序\n    skip(), limilt(), sort()三个放在一起执行的时候，执行的顺序是先 sort(), \n    然后是 skip()，最后是显示的 limit()。\n\n## 数据导出\n    mongoexport -d *** -c *** -o ***\n    # -d 后为 dbName\n       -c 后为 collectionName\n       -o 后为 outputFileName 导出文件名\n\n名字都不用加引号，直接上的~，  然后导出格式都是json 那样，不管后缀是什么用文本打开都是一个样子——骗鬼👻\n## 数据导入\n     mongoimport -h 127.0.0.1 -p 27017 -d Trader_1Min_Db -c ag1806 --file \n    /home/ian/Downloads/ag1806.json\n### Linux 下使用Robo3T错误\n错误最后字段为：已放弃 (核心已转储)\n\n    mkdir ~/robo-backup\n    mv robo3t-1.1.1-linux-x86_64-*/lib/libstdc++* \n~/robo-backup/robo3t-1.1.1-linux-x86_64-*/bin/robo3t\n    移动备份之后即可运行\n# For Python\n## PyMongo\n    from pymongo import MongoClient\n    client = MongoClient(\"localhost\", 27017)\n    client.server_info()    \n    # 查看信息，检测是否成功连接\n    db = client[\"someData\"]\n    collection = db.zn1801_30Min\n    # 两种命名方式，一种是直接.     一种是使用“”\n乖乖的用<font color = red>双引号</font>，因为，在这里的单双引号是区分的… 我现在也懒得去管它是字符字符串的什么鬼。┏┛墓┗┓...(((m -__-)m\n#### insert\n    collection.insert( {\"name\":\"text\" } )\n#### find\n    d = {u'Volume':{'$gte':50353,'$lte':50355}}\n    a = collection.find(d)\n最小与最大，另外，find出来的东西是数据库指针，需要用`for...in...`来循环取出内容来\n\n## 查询库名\n    from pymongo import MongoClient\n    client = MongoClient('localhost', 27017)\n    client.database_names()\n>[u'Trader_1Min_Db', u'Trader_30Min_Db', u'Trader_Tick_Db', u'VnTrader_Log_Db', u'VnTrader_Position_Db', u'admin', u'local', u'someData', u'test']\n\n### 查询集合名\n    collectionNames = client[dbName].collection_names()\n    print collectionNames\n\n\n\n\n\n# 使用\n其读写速度还是可以的…  二十万条数据查询的话不到一秒，然而…   频繁多量的读取，再加上不断地往其中写入就出问题了…… 卡的极慢…简直恐怖（数个小时的延迟 怕不怕）。（当然以上情况是完全没有做任何优化的情况（直接`insert` 、`find`），不知道优化之后会怎样）  另外不知道不增加条数，去增加内容会怎样…… emm  果然还是缓存比较好用…在高速多量<font color = red>多频次</font>的情况下还是用内存里面不去手动做任何保存比较好。 等积攒够量之后再去保存，就好比文件压缩不去一个个小文件传输一个道理。\n\n\n---\n\n---\n---\n\n---\n\n## MySQL\n\n### MySQL 8.0\n因为在更新8.0 之后更改了用户密码加密形式所以在使用客户端连接的时候会出现错误，所以需要\n\n    ALTER USER 'root'@'localhost' IDENTIFIED BY 'password' \n        PASSWORD EXPIRE NEVER; #修改加密规则  \n    ALTER USER 'root'@'localhost' IDENTIFIED WITH \n        mysql_native_password BY 'password';  #更新用户的密码  \n    FLUSH PRIVILEGES; #刷新权限\n经此步骤，就可以将密码加密形式改为图形化客户端支持的加密形式，也或者更待客户端跟着服务端同步更新。\n\n另外，配置之初，windows 中配置步骤如下：\n1.  添加系统环境变量path    为MySQL/bin\n2. 初始化 `mysqld --initialize --user=mysql --console`\n3. 根据初始化随机生成密码登陆\n4. 修改密码   emm 这里说的是在外部，当然也可以在修改加密形式的时候一并修改 😄 `mysqladmin -u root -p password`\n5. 添加系统服务 `mysqld -install`\n6. 启动服务 `net start mysql`\n\n另外在图像化里面注意密码格式呦，还有使用navicat的话需要最新版本，否则无法设置加密格式，还得用命令行去修改……果然还是命令行永远最好用\n\n### update\n`MySQL`的`update`在被更新数值和更新传入数值相同时，执行速度相当的快，据说是mysql并<font color=#f05710>不会执行更新动作</font>但是它<font color=#f05710>晓得</font>更新动作的发生\n\n\n## MySQL 中文乱码\n需要在连接时就指定✱charset✲    而不该一味纠结于在程序在存储时的数据准备\n此处使用的是 \n\n    charset='gb2312'\n\n\n另外，干脆就在数据库中设置存为 blob 格式\n\n## 连接远程 win 数据库\n```md\n开启某端口的示例：\n\n添加防火墙例外端口\n\n## 导出表记录\n[^_^]\n    2021-04-22 看了上面,深表惭愧...\n```bash\nmysql -uuser -ppasswd -hhost -e \"use db_name; select * from table_name where chat_id in (...);\" >> hello2.csv\n```\n在`bash`中直接执行`sql`语句，重定向保存\n### 好处\n可以规避 `into outfile` 的权限问题，导出的东西用csv也是可以看的，分隔符得以保留，csv可以正常阅览\n### 注意点\n只不过有`,`时分隔符可能有些问题，全文替换了就好\n\n##### 入站规则设置\n第一步 选择 入站规则 然后 新建规则，选择 端口，然后下一步 \n第二步 选择TCP 选择特定端口 然后输入端口，如有多个端口需要用逗号隔开了 例如: 3306\n第三步 选择允许连接\n第四步 选择配置文件 \n第五步 输入规则名称 mysqlport\n\n\n##### 出站规则设置\n第一步 选择出站规则 然后 新建规则，选择 端口，然后下一步 \n第二步 选择TCP 选择特定端口 然后输入端口，如有多个端口需要用逗号隔开了 例如: 3306\n第三步 选择允许连接\n第四步 选择配置文件 \n第五步 输入规则名称 mysqlport（或者无特殊要求下直接关闭防火墙）\n```\n\n---\n\n---\n\n---\n\n# 数据迁移\n因为已有从数据库中读取数据进行返回的函数，所以没有必要再去写读取数据库的步骤（也没法写，因为数据库设计混乱，分不清哪儿是哪儿只有通过其对外函数才能取对相应数据）\n但对外其是将一段时间内数据全部读取并且打包为`json`返回，所以一次性的话将是极大的一个文件，所以解决方法有：\n\n- 阅读其中源码，返回相应数据库指针，以此取出一个迁移一个\n- 编写分段读取函数，保证每次取出的数据不多，一段一段的迁移\n\n反正我是采用`一段一段`了，毕竟源码太…   另外，一段一段的话打好日志，出现问题后可以分段纠正，也能间歇运行，另外下载好再迁也保证了数据emm，考虑如上\n\n## 简单总结\n- 数据迁移程序\n- 数据检验补差程序\n- 断点运行机制\n\n\n```md\n# 初始化\n1. 读取配置文件（其中保存\n* 数据迁移顺序——列表（内元素为字典key为* value为相应数据库、表名，\n    时间起止，一次插入的时间跨度） ）\n\n2. 根据移植顺序读取目标数据库中相应数据的最新数据日期（\n* 若为空开始则开始插入）\n* 删除此日期的所有数据，\n* 根据一次插入的时间跨度以及终点生成时间区间\n* 根据时间区间去移植数据\n\n3. 当此类型数据移植完毕之后删除配置文件中列表的相应元素\n# 执行动作\n是\n\n## 日志\n将每一步的重要信息都打印~\n```\n","source":"_posts/notes/noteOfdbData.md","raw":"---\ntitle: db数据库\ndate: 2018-05-15 09:51:09\ncategories: [note, db, learning]\ntags: [mongo, mysql, learning]\n---\n\n# DB数据库 🖥 📊🖥\n![db](https://webassets.mongodb.com/_com_assets/cms/kmxrodmee9int5s1v-HP_Highlight%202.svg)\n## MongoDB笔记\n学习网站：<http://www.runoob.com/mongodb/mongodb-tutorial.html>\n    (其学习教程还挺可观，很多，不过还不清楚好不好)\n\n### <font color=#ff5000>注意事项</font>\n#### Mongo 数据库锁\nmongo只提供库级粒度锁，所以一个写操作锁定时，其他读写操作都等待…   <font color=#d0a010>所以这个导致了Mongo多线程写操作反而没有一个线程写来的快？</font>\n\n<font color=#d0a010>前台建立索引时</font>，`Mongo`需占用一个写锁（且不同上述、不会临时放弃）   <font color=#10d0a0>为避免此问题</font>需采用`background`方式\n```ruby\n    db.posts.ensureIndex({user_id: 1})  #此方式将引起全面战争\n\n    db.posts.ensureIndex({user_id: 1}， {background: 1}) # 这个就比较和平\n```\n### 操作命令简单记录\n#### 创建、插入 \n    use DATABASE_NAME   #如果数据库不存在，则创建数据库，否则切换到指定数据库。\n    show dbs        #查看所有数据库“name    size”\n刚创建的数据库，如没有内容则不现实在其中\n    \n    db.runoob.insert({\"name\":\"教程\"})       #插入数据\n#### 删除\n    db.dropDatabase()       #删除当前数据库，如未选择则删除test\n    db.collection.drop()        #删除集合\n    db.site.drop()          #：如删除site集合\n\n##### 删除重复数据\n```mysql\n    delete from alarm_calendar where id not in (SELECT maxid from (SELECT MAX(id) as maxid, \n    CONCAT(user_id,time,generic_name) as nameAndCode from alarm_calendar GROUP BY nameAndCode) t);\n```\n根据`user_id`, `time`, `generic_name`来打包重复，将重复数据删掉, 留下`max`，在自增里面即：最新数据\n\n#### 插入文档\n    db.COLLECTION_NAME.insert(document)\n---\n    db.col.insert({title: 'MongoDB 教程', \n        description: 'MongoDB 是一个 Nosql 数据库',\n        by: '菜鸟教程',     \n        url: 'http://www.runoob.com',       \n        tags: ['mongodb', 'database', 'NoSQL'], \n        likes: 100\n        })      #例如这样\n\ndb.col.find()       #查看已插入文档\n\n也可以将document=括号里要插入内容，然后插入document变量，效果一样。\n##### 3.2版本新加\n    db.collection.insertOne()       #向指定集合中插入一条文档数据\n    db.collection.insertMany()  #向指定集合中插入多条文档数据\n---\n    插入单条数据\n    var document = db.collection.insertOne({\"a\": 3})\n> document\n{\n        \"acknowledged\" : true,\n        \"insertedId\" : ObjectId(\"571a218011a82a1d94c02333\")\n}\n\n    插入多条数据    \n    var res = db.collection.insertMany([{\"b\": 3}, {'c': 4}])\n> res\n{\n        \"acknowledged\" : true,\n        \"insertedIds\" : [\n                ObjectId(\"571a22a911a82a1d94c02337\"),\n                ObjectId(\"571a22a911a82a1d94c02338\")\n        ]\n}\n\n### 更新、添加文档\n    db.col.update({'title':'MongoDB 教程'},{$set:{'title':'MongoDB'}})      \n    #更新标题\n    \n    db.collection.save(     \n    #通过传入的文档来替换已有文档\n    <document>,\n    {\n    writeConcern: <document>\n    })\n>参数说明：\ndocument :  文档数据。\nwriteConcern :  可选，抛出异常的级别。\n\n<font color=greeen>eg：</font>      实例中替换了 _id 为 56064f89ade2f21f36b03136 的文档数据：\n\n    db.col.save({\n    \"_id\" : ObjectId(\"56064f89ade2f21f36b03136\"),\n    \"title\" : \"MongoDB\",\n    \"description\" : \"MongoDB 是一个 Nosql 数据库\",\n    \"by\" : \"Runoob\",\n    \"url\" : \"http://www.runoob.com\",\n    \"tags\" : [\n        \"mongodb\",\n        \"NoSQL\"\n    ],\n    \"likes\" : 110\n})\n\n### 导入csv文件\n    mongoimport --db Trader_1Min_Db --collection Au(T+D) --type csv --file \n    D:\\\\IFData\\\\md_Au(T+D)_20170101_20170531\\\\md_Au(T+D)_2017010301.csv \n    --headerline --upsert --ignoreBlanks\n> 注意需要另开一个命令行，在其中运行。\n>2017-10-25T08:43:40.917+0800 E QUERY    [thread1] SyntaxError: missing ; before statement @(shell):1:16 否则就是这个错误\n\n    -d    指定把数据导入到哪一个数据库中\n    -c    指定把数据导入到哪一个集合中\n    --type    指定导入的数据类型   csv/tsv  逗号或者tab分割值\n    --file       指定从哪一个文件中导入数据\n    --headerline    仅适用于导入csv,tsv格式的数据，表示文件中的第一行作为数据头\n    --upsert  以新增或者更新的方式来导入数据\n    --f  导入字段名\n    --ignoreBlanks 忽略空白符\n### 导出\n    mongoexport -d test -c students -o students.dat \n    connected to: 127.0.0.1 exported 9 records\n    # 指明导出格式为csv\n    mongoexport -d test -c students --csv -f classid,name,age -o students_csv.dat \n    connected to: 127.0.0.1 exported 9 records   \n#### 添加\n    db.collectionName.update({}, {$set:{'key' : value}}, false, true);\n\n## 改\n    .update\n#### 更改字段名称\n    db.CollectionName.update({}, {$rename : {\"OldName\" : \"NewName\"}}, false, true)\n    # false为如不存在update记录，是否插入新的纪录  \n    # ture位置为更新全部数据，如设定false 则为只更新第一条\n    # 另外 没有输入名称时没有输全，也会显示查找，但不会执行更改\n#### 统配 \n    db.CollectionName.update(<query>, <update>,{upsert : <boolean>, multi : <boolean>, \n    writeConcern : <document>})\n    # query : update 查找条件，类似sql update查询内where后面的\n    # update : update的对象和一些更新的操作符（如$,$inc...）等，也可以理解为sql update查\n    #>询内set后面的\n    # upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插\n    #>入，默认是false，不插入。\n    # multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把\n    #>按条件查出来多条记录全部更新。\n    # writeConcern :可选，抛出异常的级别。\n##### eg\n    db.col.update({'title':'MongoDB'},{$set:{'title':'IamNewTitle'}})\n\n\n\n#### 删除文档\nremove()函数是用来移除集合中的数据。\n\n    db.collection.remove(\n    <query>,\n    <justOne>\n    )\n##### 2.6版以后\n    db.collection.remove(\n    <query>,\n    {\n    justOne: <boolean>,\n    writeConcern: <document>\n    })\n>参数说明：\nquery :（可选）删除的文档的条件。\njustOne : （可选）如果设为 true 或 1，则只删除一个文档。\nwriteConcern :（可选）抛出异常的级别。\n\n    db.col.remove({})   #删除所有 (就很恐怖)\n\n#### 查询文档\n|操作       |格式               |范例                           |RDBMS中的类似语句|\n|   :----       |       :---:           |               :---:               | ---:                                              |\n|等于       | {`<key>:<value>`}     | `db.col.find({\"by\":\"教程\"}).pretty()    `| `where by = '教程'`    |\n|小于       | {`<key>:{$lt:<value>`}}   | `db.col.find({\"likes\":{$lt:50}}).pretty()`    | `where likes < 50   ` |\n|小于或等于 | {`<key>:{$lte:<value>`}}  | `db.col.find({\"likes\":{$lte:50}}).pretty()`   | ...                       |\n|大于       | {`<key>:{$gt:<value>`}}   | `db.col.find({\"likes\":{$gt:50}}).pretty()`    | ...               |\n|大于或等于 | {`<key>:{$gte:<value>`}}  | `db.col.find({\"likes\":{$gte:50}}).pretty()`   | ...               |\n|不等于     | {`<key>:{$ne:<value>`}}   | `db.col.find({\"likes\":{$ne:50}}).pretty()`    | `where likes != 50` |\n##### And\nfind可以传入多个键(key),逗号隔开：\n\n    db.col.find({key1:value1, key2:value2}).pretty()\n    db.col.find({\"by\":\"教程\", \"title\":\"MongoDB \"}).pretty()\n    #类似于\n    WHERE by='教程' AND title='MongoDB '\n##### Or\n    db.test.find({$[{key1:value1},(key2:value2)]}).pretty()     #注意小中大括号😰\n    db.col.find({\"likes\": {$gt:50}, $or: [{\"by\": \"教程\"},{\"title\": \"MongoDB \"}]})\n##### And 与 Or\n    db.col.find({\"likes\": {$gt:50}, $or: [{\"by\": \"教程\"},{\"title\": \"MongoDB \"}]})\n    #类似于（其中pretty()是显示样式）\n    where likes>50 AND (by = '教程' OR title = 'MongoDB ‘\n#### 简写说明\n|       |           |           |       |\n|:----      |   :----:      |   :----:      |   ----:   |\n|$gt        |--------       |greater than   |>      |\n|$gte   |---------      |gt equal       |>=     |\n|$lt        |--------       |less than      |<      |\n|$lte       |---------      |lt equal       |<=     |\n|$ne        |-----------    |not equal  |!=     |\n|$eq    |--------       |equal          |=      |\n##### Type\n    db.col.find({\"title\" : {$type : 2}})    #获取“col”集合中title为String的数据\n**对照表：**\n\n|类型               |数字   |备注           |\n|:---                   |   :---:   |           ---:    |\n|Double             |1      |               |\n|String             |2      |               |\n|Object             |3      |               |\n|Array              |4      |               |\n|Binary data            |5      |               |\n|Undefined          |6      |已废弃。           |   \n|Object id              |7      |               |\n|Boolean                |8      |               |\n|Date               |9      |               |\n|Null                   |10     |               |\n|Regular Expression     |11     |               |\n|JavaScript         |13     |               |\n|Symbol             |14     |               |\n|JavaScript (with scope)    |15     |               | \n|32-bit integer         |16     |               |\n|Timestamp          |17     |               |\n|64-bit integer         |18     |               |\n|Min key                |255        |Query with -1.     |\n|Max key                |127        |               |\n##### Limit() Skip()方法\n    db.col.find({},{\"title\":1,_id:0}).limit(2)\n>参数说明：\n    “title”后1为判断语句，表示是否只查询“title”内容0为否，显示这条的全部信息。_id的0亦为判断表示是否显示“_id”内容。limit为限制搜索信息条数。\n    \n    db.col.find({},{\"title\":1,_id:0}).limit(1).skip(1)\n    skip(NUMBER)        #NUMBER为阶跃，即每隔几条数据来搜索\n\n### 排序\n    db.COLLECTION_NAME.find().sort({KEY:1})     #KEY后数字可为1OR-1，升序OR降序\n    db.col.find({},{\"title\":1,_id:0}).sort({\"likes\":-1}     #按“likes”降序排序\n\n---\n\n---\n\n### MongoDB 索引        （<font color=crimson>建立索引干嘛……</font>）\n#### ensureIndex() 方法\n    db.COLLECTION_NAME.ensureIndex({KEY:1})\n    # Key 值为要创建的索引字段，1为指定按升序创建索引，降序-1\n\n### 聚合\n#### aggregate()方法\n    db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)\n    db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$sum : 1}}}])\n    #类似于\n    select by_user, count(*) from mycol group by by_user\n>输出结果：\n{ \"_id\" : \"Neo4j\", \"num_tutorial\" : 1 }\n{ \"_id\" : \"runoob.com\", \"num_tutorial\" : 2 }\n{ \"_id\" : null, \"num_tutorial\" : 1 }\n\n>参数说明：“$by_user” 即为分类依据，并打印出来（如上）。\nnum_tutorial 仅为显示提示，可以更改为任意提示甚至汉字。\n$sum : 1 其中1为每次计数值，即重复一次加几。1+1+1+1…… ：重复一次加1；0.1+0.1+0.1……重复一次加0.1。这个意思\n\n##### 计算符：\n|表达式     |描述   |   实例        |\n|:---           |   :---:   |       :---:   |\n|$sum   |计算总和。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$sum : \"$likes\"}}}])`|\n|$avg   |计算平均值 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$avg : \"$likes\"}}}])`|\n|$min   |获取集合中所有文档对应值得最小值。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$min : \"$likes\"}}}])`|\n|$max   |获取集合中所有文档对应值得最大值。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", num_tutorial : {$max : \"$likes\"}}}])`|\n|$push  |在结果文档中插入值到一个数组中。   |`db.mycol.aggregate([{$group : {_id : \"$by_user\", url : {$push: \"$url\"}}}])`|\n|$addToSet  |在结果文档中插入值到一个数组中，但不创建副本。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", url : {$addToSet : \"$url\"}}}])`|\n|$first |根据资源文档的排序获取第一个文档数据。 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", first_url : {$first : \"$url\"}}}])`|\n|$last  |根据资源文档的排序获取最后一个文档数据 |`db.mycol.aggregate([{$group : {_id : \"$by_user\", last_url : {$last : \"$url\"}}}])`|\n\n### 条件操作符\n    $gt     大于\n    $lt     小于\n    $gte        大于等于\n    $lte        小于等于\n#### eg：\n    db.col.find({likes : {$gte : 100}})\n    # 查询“col”集合中\"likes\"大于100的数据\n    # 比较与 `SQL       Select * from col where likes >=100;`\n#### 取前n条数据\n    .find().limit(n)\n\n### 执行顺序\n    skip(), limilt(), sort()三个放在一起执行的时候，执行的顺序是先 sort(), \n    然后是 skip()，最后是显示的 limit()。\n\n## 数据导出\n    mongoexport -d *** -c *** -o ***\n    # -d 后为 dbName\n       -c 后为 collectionName\n       -o 后为 outputFileName 导出文件名\n\n名字都不用加引号，直接上的~，  然后导出格式都是json 那样，不管后缀是什么用文本打开都是一个样子——骗鬼👻\n## 数据导入\n     mongoimport -h 127.0.0.1 -p 27017 -d Trader_1Min_Db -c ag1806 --file \n    /home/ian/Downloads/ag1806.json\n### Linux 下使用Robo3T错误\n错误最后字段为：已放弃 (核心已转储)\n\n    mkdir ~/robo-backup\n    mv robo3t-1.1.1-linux-x86_64-*/lib/libstdc++* \n~/robo-backup/robo3t-1.1.1-linux-x86_64-*/bin/robo3t\n    移动备份之后即可运行\n# For Python\n## PyMongo\n    from pymongo import MongoClient\n    client = MongoClient(\"localhost\", 27017)\n    client.server_info()    \n    # 查看信息，检测是否成功连接\n    db = client[\"someData\"]\n    collection = db.zn1801_30Min\n    # 两种命名方式，一种是直接.     一种是使用“”\n乖乖的用<font color = red>双引号</font>，因为，在这里的单双引号是区分的… 我现在也懒得去管它是字符字符串的什么鬼。┏┛墓┗┓...(((m -__-)m\n#### insert\n    collection.insert( {\"name\":\"text\" } )\n#### find\n    d = {u'Volume':{'$gte':50353,'$lte':50355}}\n    a = collection.find(d)\n最小与最大，另外，find出来的东西是数据库指针，需要用`for...in...`来循环取出内容来\n\n## 查询库名\n    from pymongo import MongoClient\n    client = MongoClient('localhost', 27017)\n    client.database_names()\n>[u'Trader_1Min_Db', u'Trader_30Min_Db', u'Trader_Tick_Db', u'VnTrader_Log_Db', u'VnTrader_Position_Db', u'admin', u'local', u'someData', u'test']\n\n### 查询集合名\n    collectionNames = client[dbName].collection_names()\n    print collectionNames\n\n\n\n\n\n# 使用\n其读写速度还是可以的…  二十万条数据查询的话不到一秒，然而…   频繁多量的读取，再加上不断地往其中写入就出问题了…… 卡的极慢…简直恐怖（数个小时的延迟 怕不怕）。（当然以上情况是完全没有做任何优化的情况（直接`insert` 、`find`），不知道优化之后会怎样）  另外不知道不增加条数，去增加内容会怎样…… emm  果然还是缓存比较好用…在高速多量<font color = red>多频次</font>的情况下还是用内存里面不去手动做任何保存比较好。 等积攒够量之后再去保存，就好比文件压缩不去一个个小文件传输一个道理。\n\n\n---\n\n---\n---\n\n---\n\n## MySQL\n\n### MySQL 8.0\n因为在更新8.0 之后更改了用户密码加密形式所以在使用客户端连接的时候会出现错误，所以需要\n\n    ALTER USER 'root'@'localhost' IDENTIFIED BY 'password' \n        PASSWORD EXPIRE NEVER; #修改加密规则  \n    ALTER USER 'root'@'localhost' IDENTIFIED WITH \n        mysql_native_password BY 'password';  #更新用户的密码  \n    FLUSH PRIVILEGES; #刷新权限\n经此步骤，就可以将密码加密形式改为图形化客户端支持的加密形式，也或者更待客户端跟着服务端同步更新。\n\n另外，配置之初，windows 中配置步骤如下：\n1.  添加系统环境变量path    为MySQL/bin\n2. 初始化 `mysqld --initialize --user=mysql --console`\n3. 根据初始化随机生成密码登陆\n4. 修改密码   emm 这里说的是在外部，当然也可以在修改加密形式的时候一并修改 😄 `mysqladmin -u root -p password`\n5. 添加系统服务 `mysqld -install`\n6. 启动服务 `net start mysql`\n\n另外在图像化里面注意密码格式呦，还有使用navicat的话需要最新版本，否则无法设置加密格式，还得用命令行去修改……果然还是命令行永远最好用\n\n### update\n`MySQL`的`update`在被更新数值和更新传入数值相同时，执行速度相当的快，据说是mysql并<font color=#f05710>不会执行更新动作</font>但是它<font color=#f05710>晓得</font>更新动作的发生\n\n\n## MySQL 中文乱码\n需要在连接时就指定✱charset✲    而不该一味纠结于在程序在存储时的数据准备\n此处使用的是 \n\n    charset='gb2312'\n\n\n另外，干脆就在数据库中设置存为 blob 格式\n\n## 连接远程 win 数据库\n```md\n开启某端口的示例：\n\n添加防火墙例外端口\n\n## 导出表记录\n[^_^]\n    2021-04-22 看了上面,深表惭愧...\n```bash\nmysql -uuser -ppasswd -hhost -e \"use db_name; select * from table_name where chat_id in (...);\" >> hello2.csv\n```\n在`bash`中直接执行`sql`语句，重定向保存\n### 好处\n可以规避 `into outfile` 的权限问题，导出的东西用csv也是可以看的，分隔符得以保留，csv可以正常阅览\n### 注意点\n只不过有`,`时分隔符可能有些问题，全文替换了就好\n\n##### 入站规则设置\n第一步 选择 入站规则 然后 新建规则，选择 端口，然后下一步 \n第二步 选择TCP 选择特定端口 然后输入端口，如有多个端口需要用逗号隔开了 例如: 3306\n第三步 选择允许连接\n第四步 选择配置文件 \n第五步 输入规则名称 mysqlport\n\n\n##### 出站规则设置\n第一步 选择出站规则 然后 新建规则，选择 端口，然后下一步 \n第二步 选择TCP 选择特定端口 然后输入端口，如有多个端口需要用逗号隔开了 例如: 3306\n第三步 选择允许连接\n第四步 选择配置文件 \n第五步 输入规则名称 mysqlport（或者无特殊要求下直接关闭防火墙）\n```\n\n---\n\n---\n\n---\n\n# 数据迁移\n因为已有从数据库中读取数据进行返回的函数，所以没有必要再去写读取数据库的步骤（也没法写，因为数据库设计混乱，分不清哪儿是哪儿只有通过其对外函数才能取对相应数据）\n但对外其是将一段时间内数据全部读取并且打包为`json`返回，所以一次性的话将是极大的一个文件，所以解决方法有：\n\n- 阅读其中源码，返回相应数据库指针，以此取出一个迁移一个\n- 编写分段读取函数，保证每次取出的数据不多，一段一段的迁移\n\n反正我是采用`一段一段`了，毕竟源码太…   另外，一段一段的话打好日志，出现问题后可以分段纠正，也能间歇运行，另外下载好再迁也保证了数据emm，考虑如上\n\n## 简单总结\n- 数据迁移程序\n- 数据检验补差程序\n- 断点运行机制\n\n\n```md\n# 初始化\n1. 读取配置文件（其中保存\n* 数据迁移顺序——列表（内元素为字典key为* value为相应数据库、表名，\n    时间起止，一次插入的时间跨度） ）\n\n2. 根据移植顺序读取目标数据库中相应数据的最新数据日期（\n* 若为空开始则开始插入）\n* 删除此日期的所有数据，\n* 根据一次插入的时间跨度以及终点生成时间区间\n* 根据时间区间去移植数据\n\n3. 当此类型数据移植完毕之后删除配置文件中列表的相应元素\n# 执行动作\n是\n\n## 日志\n将每一步的重要信息都打印~\n```\n","slug":"notes/noteOfdbData","published":1,"updated":"2021-05-08T02:56:02.684Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9jo005cu3yq76lx9yna","content":"<h1 id=\"DB数据库-🖥-📊🖥\"><a href=\"#DB数据库-🖥-📊🖥\" class=\"headerlink\" title=\"DB数据库 🖥 📊🖥\"></a>DB数据库 🖥 📊🖥</h1><p><img src=\"https://webassets.mongodb.com/_com_assets/cms/kmxrodmee9int5s1v-HP_Highlight%202.svg\" alt=\"db\"></p>\n<h2 id=\"MongoDB笔记\"><a href=\"#MongoDB笔记\" class=\"headerlink\" title=\"MongoDB笔记\"></a>MongoDB笔记</h2><p>学习网站：<a href=\"http://www.runoob.com/mongodb/mongodb-tutorial.html\">http://www.runoob.com/mongodb/mongodb-tutorial.html</a><br>    (其学习教程还挺可观，很多，不过还不清楚好不好)</p>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a><font color=#ff5000>注意事项</font></h3><h4 id=\"Mongo-数据库锁\"><a href=\"#Mongo-数据库锁\" class=\"headerlink\" title=\"Mongo 数据库锁\"></a>Mongo 数据库锁</h4><p>mongo只提供库级粒度锁，所以一个写操作锁定时，其他读写操作都等待…   <font color=#d0a010>所以这个导致了Mongo多线程写操作反而没有一个线程写来的快？</font></p>\n<p><font color=#d0a010>前台建立索引时</font>，<code>Mongo</code>需占用一个写锁（且不同上述、不会临时放弃）   <font color=#10d0a0>为避免此问题</font>需采用<code>background</code>方式</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.posts.ensureIndex(&#123;<span class=\"symbol\">user_id:</span> <span class=\"number\">1</span>&#125;)  <span class=\"comment\">#此方式将引起全面战争</span></span><br><span class=\"line\"></span><br><span class=\"line\">db.posts.ensureIndex(&#123;<span class=\"symbol\">user_id:</span> <span class=\"number\">1</span>&#125;， &#123;<span class=\"symbol\">background:</span> <span class=\"number\">1</span>&#125;) <span class=\"comment\"># 这个就比较和平</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"操作命令简单记录\"><a href=\"#操作命令简单记录\" class=\"headerlink\" title=\"操作命令简单记录\"></a>操作命令简单记录</h3><h4 id=\"创建、插入\"><a href=\"#创建、插入\" class=\"headerlink\" title=\"创建、插入\"></a>创建、插入</h4><pre><code>use DATABASE_NAME   #如果数据库不存在，则创建数据库，否则切换到指定数据库。\nshow dbs        #查看所有数据库“name    size”\n</code></pre>\n<p>刚创建的数据库，如没有内容则不现实在其中</p>\n<pre><code>db.runoob.insert(&#123;&quot;name&quot;:&quot;教程&quot;&#125;)       #插入数据\n</code></pre>\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><pre><code>db.dropDatabase()       #删除当前数据库，如未选择则删除test\ndb.collection.drop()        #删除集合\ndb.site.drop()          #：如删除site集合\n</code></pre>\n<h5 id=\"删除重复数据\"><a href=\"#删除重复数据\" class=\"headerlink\" title=\"删除重复数据\"></a>删除重复数据</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delete from alarm_calendar where id not in (SELECT maxid from (SELECT MAX(id) as maxid, </span><br><span class=\"line\">CONCAT(user_id,time,generic_name) as nameAndCode from alarm_calendar GROUP BY nameAndCode) t);</span><br></pre></td></tr></table></figure>\n<p>根据<code>user_id</code>, <code>time</code>, <code>generic_name</code>来打包重复，将重复数据删掉, 留下<code>max</code>，在自增里面即：最新数据</p>\n<h4 id=\"插入文档\"><a href=\"#插入文档\" class=\"headerlink\" title=\"插入文档\"></a>插入文档</h4><pre><code>db.COLLECTION_NAME.insert(document)\n</code></pre>\n<hr>\n<pre><code>db.col.insert(&#123;title: &#39;MongoDB 教程&#39;, \n    description: &#39;MongoDB 是一个 Nosql 数据库&#39;,\n    by: &#39;菜鸟教程&#39;,     \n    url: &#39;http://www.runoob.com&#39;,       \n    tags: [&#39;mongodb&#39;, &#39;database&#39;, &#39;NoSQL&#39;], \n    likes: 100\n    &#125;)      #例如这样\n</code></pre>\n<p>db.col.find()       #查看已插入文档</p>\n<p>也可以将document=括号里要插入内容，然后插入document变量，效果一样。</p>\n<h5 id=\"3-2版本新加\"><a href=\"#3-2版本新加\" class=\"headerlink\" title=\"3.2版本新加\"></a>3.2版本新加</h5><pre><code>db.collection.insertOne()       #向指定集合中插入一条文档数据\ndb.collection.insertMany()  #向指定集合中插入多条文档数据\n</code></pre>\n<hr>\n<pre><code>插入单条数据\nvar document = db.collection.insertOne(&#123;&quot;a&quot;: 3&#125;)\n</code></pre>\n<blockquote>\n<p>document<br>{<br>        “acknowledged” : true,<br>        “insertedId” : ObjectId(“571a218011a82a1d94c02333”)<br>}</p>\n</blockquote>\n<pre><code>插入多条数据    \nvar res = db.collection.insertMany([&#123;&quot;b&quot;: 3&#125;, &#123;&#39;c&#39;: 4&#125;])\n</code></pre>\n<blockquote>\n<p>res<br>{<br>        “acknowledged” : true,<br>        “insertedIds” : [<br>                ObjectId(“571a22a911a82a1d94c02337”),<br>                ObjectId(“571a22a911a82a1d94c02338”)<br>        ]<br>}</p>\n</blockquote>\n<h3 id=\"更新、添加文档\"><a href=\"#更新、添加文档\" class=\"headerlink\" title=\"更新、添加文档\"></a>更新、添加文档</h3><pre><code>db.col.update(&#123;&#39;title&#39;:&#39;MongoDB 教程&#39;&#125;,&#123;$set:&#123;&#39;title&#39;:&#39;MongoDB&#39;&#125;&#125;)      \n#更新标题\n\ndb.collection.save(     \n#通过传入的文档来替换已有文档\n&lt;document&gt;,\n&#123;\nwriteConcern: &lt;document&gt;\n&#125;)\n</code></pre>\n<blockquote>\n<p>参数说明：<br>document :  文档数据。<br>writeConcern :  可选，抛出异常的级别。</p>\n</blockquote>\n<p><font color=greeen>eg：</font>      实例中替换了 _id 为 56064f89ade2f21f36b03136 的文档数据：</p>\n<pre><code>db.col.save(&#123;\n&quot;_id&quot; : ObjectId(&quot;56064f89ade2f21f36b03136&quot;),\n&quot;title&quot; : &quot;MongoDB&quot;,\n&quot;description&quot; : &quot;MongoDB 是一个 Nosql 数据库&quot;,\n&quot;by&quot; : &quot;Runoob&quot;,\n&quot;url&quot; : &quot;http://www.runoob.com&quot;,\n&quot;tags&quot; : [\n    &quot;mongodb&quot;,\n    &quot;NoSQL&quot;\n],\n&quot;likes&quot; : 110\n</code></pre>\n<p>})</p>\n<h3 id=\"导入csv文件\"><a href=\"#导入csv文件\" class=\"headerlink\" title=\"导入csv文件\"></a>导入csv文件</h3><pre><code>mongoimport --db Trader_1Min_Db --collection Au(T+D) --type csv --file \nD:\\\\IFData\\\\md_Au(T+D)_20170101_20170531\\\\md_Au(T+D)_2017010301.csv \n--headerline --upsert --ignoreBlanks\n</code></pre>\n<blockquote>\n<p>注意需要另开一个命令行，在其中运行。<br>2017-10-25T08:43:40.917+0800 E QUERY    [thread1] SyntaxError: missing ; before statement @(shell):1:16 否则就是这个错误</p>\n</blockquote>\n<pre><code>-d    指定把数据导入到哪一个数据库中\n-c    指定把数据导入到哪一个集合中\n--type    指定导入的数据类型   csv/tsv  逗号或者tab分割值\n--file       指定从哪一个文件中导入数据\n--headerline    仅适用于导入csv,tsv格式的数据，表示文件中的第一行作为数据头\n--upsert  以新增或者更新的方式来导入数据\n--f  导入字段名\n--ignoreBlanks 忽略空白符\n</code></pre>\n<h3 id=\"导出\"><a href=\"#导出\" class=\"headerlink\" title=\"导出\"></a>导出</h3><pre><code>mongoexport -d test -c students -o students.dat \nconnected to: 127.0.0.1 exported 9 records\n# 指明导出格式为csv\nmongoexport -d test -c students --csv -f classid,name,age -o students_csv.dat \nconnected to: 127.0.0.1 exported 9 records   \n</code></pre>\n<h4 id=\"添加\"><a href=\"#添加\" class=\"headerlink\" title=\"添加\"></a>添加</h4><pre><code>db.collectionName.update(&#123;&#125;, &#123;$set:&#123;&#39;key&#39; : value&#125;&#125;, false, true);\n</code></pre>\n<h2 id=\"改\"><a href=\"#改\" class=\"headerlink\" title=\"改\"></a>改</h2><pre><code>.update\n</code></pre>\n<h4 id=\"更改字段名称\"><a href=\"#更改字段名称\" class=\"headerlink\" title=\"更改字段名称\"></a>更改字段名称</h4><pre><code>db.CollectionName.update(&#123;&#125;, &#123;$rename : &#123;&quot;OldName&quot; : &quot;NewName&quot;&#125;&#125;, false, true)\n# false为如不存在update记录，是否插入新的纪录  \n# ture位置为更新全部数据，如设定false 则为只更新第一条\n# 另外 没有输入名称时没有输全，也会显示查找，但不会执行更改\n</code></pre>\n<h4 id=\"统配\"><a href=\"#统配\" class=\"headerlink\" title=\"统配\"></a>统配</h4><pre><code>db.CollectionName.update(&lt;query&gt;, &lt;update&gt;,&#123;upsert : &lt;boolean&gt;, multi : &lt;boolean&gt;, \nwriteConcern : &lt;document&gt;&#125;)\n# query : update 查找条件，类似sql update查询内where后面的\n# update : update的对象和一些更新的操作符（如$,$inc...）等，也可以理解为sql update查\n#&gt;询内set后面的\n# upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插\n#&gt;入，默认是false，不插入。\n# multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把\n#&gt;按条件查出来多条记录全部更新。\n# writeConcern :可选，抛出异常的级别。\n</code></pre>\n<h5 id=\"eg\"><a href=\"#eg\" class=\"headerlink\" title=\"eg\"></a>eg</h5><pre><code>db.col.update(&#123;&#39;title&#39;:&#39;MongoDB&#39;&#125;,&#123;$set:&#123;&#39;title&#39;:&#39;IamNewTitle&#39;&#125;&#125;)\n</code></pre>\n<h4 id=\"删除文档\"><a href=\"#删除文档\" class=\"headerlink\" title=\"删除文档\"></a>删除文档</h4><p>remove()函数是用来移除集合中的数据。</p>\n<pre><code>db.collection.remove(\n&lt;query&gt;,\n&lt;justOne&gt;\n)\n</code></pre>\n<h5 id=\"2-6版以后\"><a href=\"#2-6版以后\" class=\"headerlink\" title=\"2.6版以后\"></a>2.6版以后</h5><pre><code>db.collection.remove(\n&lt;query&gt;,\n&#123;\njustOne: &lt;boolean&gt;,\nwriteConcern: &lt;document&gt;\n&#125;)\n</code></pre>\n<blockquote>\n<p>参数说明：<br>query :（可选）删除的文档的条件。<br>justOne : （可选）如果设为 true 或 1，则只删除一个文档。<br>writeConcern :（可选）抛出异常的级别。</p>\n</blockquote>\n<pre><code>db.col.remove(&#123;&#125;)   #删除所有 (就很恐怖)\n</code></pre>\n<h4 id=\"查询文档\"><a href=\"#查询文档\" class=\"headerlink\" title=\"查询文档\"></a>查询文档</h4><table>\n<thead>\n<tr>\n<th align=\"left\">操作</th>\n<th align=\"center\">格式</th>\n<th align=\"center\">范例</th>\n<th align=\"right\">RDBMS中的类似语句</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">等于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&lt;value&gt;</code>}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;by&quot;:&quot;教程&quot;&#125;).pretty()    </code></td>\n<td align=\"right\"><code>where by = &#39;教程&#39;</code></td>\n</tr>\n<tr>\n<td align=\"left\">小于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$lt:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$lt:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\"><code>where likes &lt; 50   </code></td>\n</tr>\n<tr>\n<td align=\"left\">小于或等于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$lte:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$lte:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\">…</td>\n</tr>\n<tr>\n<td align=\"left\">大于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$gt:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$gt:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\">…</td>\n</tr>\n<tr>\n<td align=\"left\">大于或等于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$gte:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$gte:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\">…</td>\n</tr>\n<tr>\n<td align=\"left\">不等于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$ne:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$ne:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\"><code>where likes != 50</code></td>\n</tr>\n</tbody></table>\n<h5 id=\"And\"><a href=\"#And\" class=\"headerlink\" title=\"And\"></a>And</h5><p>find可以传入多个键(key),逗号隔开：</p>\n<pre><code>db.col.find(&#123;key1:value1, key2:value2&#125;).pretty()\ndb.col.find(&#123;&quot;by&quot;:&quot;教程&quot;, &quot;title&quot;:&quot;MongoDB &quot;&#125;).pretty()\n#类似于\nWHERE by=&#39;教程&#39; AND title=&#39;MongoDB &#39;\n</code></pre>\n<h5 id=\"Or\"><a href=\"#Or\" class=\"headerlink\" title=\"Or\"></a>Or</h5><pre><code>db.test.find(&#123;$[&#123;key1:value1&#125;,(key2:value2)]&#125;).pretty()     #注意小中大括号😰\ndb.col.find(&#123;&quot;likes&quot;: &#123;$gt:50&#125;, $or: [&#123;&quot;by&quot;: &quot;教程&quot;&#125;,&#123;&quot;title&quot;: &quot;MongoDB &quot;&#125;]&#125;)\n</code></pre>\n<h5 id=\"And-与-Or\"><a href=\"#And-与-Or\" class=\"headerlink\" title=\"And 与 Or\"></a>And 与 Or</h5><pre><code>db.col.find(&#123;&quot;likes&quot;: &#123;$gt:50&#125;, $or: [&#123;&quot;by&quot;: &quot;教程&quot;&#125;,&#123;&quot;title&quot;: &quot;MongoDB &quot;&#125;]&#125;)\n#类似于（其中pretty()是显示样式）\nwhere likes&gt;50 AND (by = &#39;教程&#39; OR title = &#39;MongoDB ‘\n</code></pre>\n<h4 id=\"简写说明\"><a href=\"#简写说明\" class=\"headerlink\" title=\"简写说明\"></a>简写说明</h4><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"center\"></th>\n<th align=\"center\"></th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">$gt</td>\n<td align=\"center\">——–</td>\n<td align=\"center\">greater than</td>\n<td align=\"right\">&gt;</td>\n</tr>\n<tr>\n<td align=\"left\">$gte</td>\n<td align=\"center\">———</td>\n<td align=\"center\">gt equal</td>\n<td align=\"right\">&gt;=</td>\n</tr>\n<tr>\n<td align=\"left\">$lt</td>\n<td align=\"center\">——–</td>\n<td align=\"center\">less than</td>\n<td align=\"right\">&lt;</td>\n</tr>\n<tr>\n<td align=\"left\">$lte</td>\n<td align=\"center\">———</td>\n<td align=\"center\">lt equal</td>\n<td align=\"right\">&lt;=</td>\n</tr>\n<tr>\n<td align=\"left\">$ne</td>\n<td align=\"center\">———–</td>\n<td align=\"center\">not equal</td>\n<td align=\"right\">!=</td>\n</tr>\n<tr>\n<td align=\"left\">$eq</td>\n<td align=\"center\">——–</td>\n<td align=\"center\">equal</td>\n<td align=\"right\">=</td>\n</tr>\n</tbody></table>\n<h5 id=\"Type\"><a href=\"#Type\" class=\"headerlink\" title=\"Type\"></a>Type</h5><pre><code>db.col.find(&#123;&quot;title&quot; : &#123;$type : 2&#125;&#125;)    #获取“col”集合中title为String的数据\n</code></pre>\n<p><strong>对照表：</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"center\">数字</th>\n<th align=\"right\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Double</td>\n<td align=\"center\">1</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">String</td>\n<td align=\"center\">2</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Object</td>\n<td align=\"center\">3</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Array</td>\n<td align=\"center\">4</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Binary data</td>\n<td align=\"center\">5</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Undefined</td>\n<td align=\"center\">6</td>\n<td align=\"right\">已废弃。</td>\n</tr>\n<tr>\n<td align=\"left\">Object id</td>\n<td align=\"center\">7</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Boolean</td>\n<td align=\"center\">8</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Date</td>\n<td align=\"center\">9</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Null</td>\n<td align=\"center\">10</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Regular Expression</td>\n<td align=\"center\">11</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">JavaScript</td>\n<td align=\"center\">13</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Symbol</td>\n<td align=\"center\">14</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">JavaScript (with scope)</td>\n<td align=\"center\">15</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">32-bit integer</td>\n<td align=\"center\">16</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Timestamp</td>\n<td align=\"center\">17</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">64-bit integer</td>\n<td align=\"center\">18</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Min key</td>\n<td align=\"center\">255</td>\n<td align=\"right\">Query with -1.</td>\n</tr>\n<tr>\n<td align=\"left\">Max key</td>\n<td align=\"center\">127</td>\n<td align=\"right\"></td>\n</tr>\n</tbody></table>\n<h5 id=\"Limit-Skip-方法\"><a href=\"#Limit-Skip-方法\" class=\"headerlink\" title=\"Limit() Skip()方法\"></a>Limit() Skip()方法</h5><pre><code>db.col.find(&#123;&#125;,&#123;&quot;title&quot;:1,_id:0&#125;).limit(2)\n</code></pre>\n<blockquote>\n<p>参数说明：<br>    “title”后1为判断语句，表示是否只查询“title”内容0为否，显示这条的全部信息。_id的0亦为判断表示是否显示“_id”内容。limit为限制搜索信息条数。</p>\n</blockquote>\n<pre><code>db.col.find(&#123;&#125;,&#123;&quot;title&quot;:1,_id:0&#125;).limit(1).skip(1)\nskip(NUMBER)        #NUMBER为阶跃，即每隔几条数据来搜索\n</code></pre>\n<h3 id=\"排序\"><a href=\"#排序\" class=\"headerlink\" title=\"排序\"></a>排序</h3><pre><code>db.COLLECTION_NAME.find().sort(&#123;KEY:1&#125;)     #KEY后数字可为1OR-1，升序OR降序\ndb.col.find(&#123;&#125;,&#123;&quot;title&quot;:1,_id:0&#125;).sort(&#123;&quot;likes&quot;:-1&#125;     #按“likes”降序排序\n</code></pre>\n<hr>\n<hr>\n<h3 id=\"MongoDB-索引-（建立索引干嘛……）\"><a href=\"#MongoDB-索引-（建立索引干嘛……）\" class=\"headerlink\" title=\"MongoDB 索引        （建立索引干嘛……）\"></a>MongoDB 索引        （<font color=crimson>建立索引干嘛……</font>）</h3><h4 id=\"ensureIndex-方法\"><a href=\"#ensureIndex-方法\" class=\"headerlink\" title=\"ensureIndex() 方法\"></a>ensureIndex() 方法</h4><pre><code>db.COLLECTION_NAME.ensureIndex(&#123;KEY:1&#125;)\n# Key 值为要创建的索引字段，1为指定按升序创建索引，降序-1\n</code></pre>\n<h3 id=\"聚合\"><a href=\"#聚合\" class=\"headerlink\" title=\"聚合\"></a>聚合</h3><h4 id=\"aggregate-方法\"><a href=\"#aggregate-方法\" class=\"headerlink\" title=\"aggregate()方法\"></a>aggregate()方法</h4><pre><code>db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)\ndb.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$sum : 1&#125;&#125;&#125;])\n#类似于\nselect by_user, count(*) from mycol group by by_user\n</code></pre>\n<blockquote>\n<p>输出结果：<br>{ “_id” : “Neo4j”, “num_tutorial” : 1 }<br>{ “_id” : “runoob.com”, “num_tutorial” : 2 }<br>{ “_id” : null, “num_tutorial” : 1 }</p>\n</blockquote>\n<blockquote>\n<p>参数说明：“$by_user” 即为分类依据，并打印出来（如上）。<br>num_tutorial 仅为显示提示，可以更改为任意提示甚至汉字。<br>$sum : 1 其中1为每次计数值，即重复一次加几。1+1+1+1…… ：重复一次加1；0.1+0.1+0.1……重复一次加0.1。这个意思</p>\n</blockquote>\n<h5 id=\"计算符：\"><a href=\"#计算符：\" class=\"headerlink\" title=\"计算符：\"></a>计算符：</h5><table>\n<thead>\n<tr>\n<th align=\"left\">表达式</th>\n<th align=\"center\">描述</th>\n<th align=\"center\">实例</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">$sum</td>\n<td align=\"center\">计算总和。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$sum : &quot;$likes&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$avg</td>\n<td align=\"center\">计算平均值</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$avg : &quot;$likes&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$min</td>\n<td align=\"center\">获取集合中所有文档对应值得最小值。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$min : &quot;$likes&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$max</td>\n<td align=\"center\">获取集合中所有文档对应值得最大值。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$max : &quot;$likes&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$push</td>\n<td align=\"center\">在结果文档中插入值到一个数组中。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, url : &#123;$push: &quot;$url&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$addToSet</td>\n<td align=\"center\">在结果文档中插入值到一个数组中，但不创建副本。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, url : &#123;$addToSet : &quot;$url&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$first</td>\n<td align=\"center\">根据资源文档的排序获取第一个文档数据。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, first_url : &#123;$first : &quot;$url&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$last</td>\n<td align=\"center\">根据资源文档的排序获取最后一个文档数据</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, last_url : &#123;$last : &quot;$url&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n</tbody></table>\n<h3 id=\"条件操作符\"><a href=\"#条件操作符\" class=\"headerlink\" title=\"条件操作符\"></a>条件操作符</h3><pre><code>$gt     大于\n$lt     小于\n$gte        大于等于\n$lte        小于等于\n</code></pre>\n<h4 id=\"eg：\"><a href=\"#eg：\" class=\"headerlink\" title=\"eg：\"></a>eg：</h4><pre><code>db.col.find(&#123;likes : &#123;$gte : 100&#125;&#125;)\n# 查询“col”集合中&quot;likes&quot;大于100的数据\n# 比较与 `SQL       Select * from col where likes &gt;=100;`\n</code></pre>\n<h4 id=\"取前n条数据\"><a href=\"#取前n条数据\" class=\"headerlink\" title=\"取前n条数据\"></a>取前n条数据</h4><pre><code>.find().limit(n)\n</code></pre>\n<h3 id=\"执行顺序\"><a href=\"#执行顺序\" class=\"headerlink\" title=\"执行顺序\"></a>执行顺序</h3><pre><code>skip(), limilt(), sort()三个放在一起执行的时候，执行的顺序是先 sort(), \n然后是 skip()，最后是显示的 limit()。\n</code></pre>\n<h2 id=\"数据导出\"><a href=\"#数据导出\" class=\"headerlink\" title=\"数据导出\"></a>数据导出</h2><pre><code>mongoexport -d *** -c *** -o ***\n# -d 后为 dbName\n   -c 后为 collectionName\n   -o 后为 outputFileName 导出文件名\n</code></pre>\n<p>名字都不用加引号，直接上的~，  然后导出格式都是json 那样，不管后缀是什么用文本打开都是一个样子——骗鬼👻</p>\n<h2 id=\"数据导入\"><a href=\"#数据导入\" class=\"headerlink\" title=\"数据导入\"></a>数据导入</h2><pre><code> mongoimport -h 127.0.0.1 -p 27017 -d Trader_1Min_Db -c ag1806 --file \n/home/ian/Downloads/ag1806.json\n</code></pre>\n<h3 id=\"Linux-下使用Robo3T错误\"><a href=\"#Linux-下使用Robo3T错误\" class=\"headerlink\" title=\"Linux 下使用Robo3T错误\"></a>Linux 下使用Robo3T错误</h3><p>错误最后字段为：已放弃 (核心已转储)</p>\n<pre><code>mkdir ~/robo-backup\nmv robo3t-1.1.1-linux-x86_64-*/lib/libstdc++* \n</code></pre>\n<p>~/robo-backup/robo3t-1.1.1-linux-x86_64-*/bin/robo3t<br>    移动备份之后即可运行</p>\n<h1 id=\"For-Python\"><a href=\"#For-Python\" class=\"headerlink\" title=\"For Python\"></a>For Python</h1><h2 id=\"PyMongo\"><a href=\"#PyMongo\" class=\"headerlink\" title=\"PyMongo\"></a>PyMongo</h2><pre><code>from pymongo import MongoClient\nclient = MongoClient(&quot;localhost&quot;, 27017)\nclient.server_info()    \n# 查看信息，检测是否成功连接\ndb = client[&quot;someData&quot;]\ncollection = db.zn1801_30Min\n# 两种命名方式，一种是直接.     一种是使用“”\n</code></pre>\n<p>乖乖的用<font color = red>双引号</font>，因为，在这里的单双引号是区分的… 我现在也懒得去管它是字符字符串的什么鬼。┏┛墓┗┓…(((m -__-)m</p>\n<h4 id=\"insert\"><a href=\"#insert\" class=\"headerlink\" title=\"insert\"></a>insert</h4><pre><code>collection.insert( &#123;&quot;name&quot;:&quot;text&quot; &#125; )\n</code></pre>\n<h4 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find\"></a>find</h4><pre><code>d = &#123;u&#39;Volume&#39;:&#123;&#39;$gte&#39;:50353,&#39;$lte&#39;:50355&#125;&#125;\na = collection.find(d)\n</code></pre>\n<p>最小与最大，另外，find出来的东西是数据库指针，需要用<code>for...in...</code>来循环取出内容来</p>\n<h2 id=\"查询库名\"><a href=\"#查询库名\" class=\"headerlink\" title=\"查询库名\"></a>查询库名</h2><pre><code>from pymongo import MongoClient\nclient = MongoClient(&#39;localhost&#39;, 27017)\nclient.database_names()\n</code></pre>\n<blockquote>\n<p>[u’Trader_1Min_Db’, u’Trader_30Min_Db’, u’Trader_Tick_Db’, u’VnTrader_Log_Db’, u’VnTrader_Position_Db’, u’admin’, u’local’, u’someData’, u’test’]</p>\n</blockquote>\n<h3 id=\"查询集合名\"><a href=\"#查询集合名\" class=\"headerlink\" title=\"查询集合名\"></a>查询集合名</h3><pre><code>collectionNames = client[dbName].collection_names()\nprint collectionNames\n</code></pre>\n<h1 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h1><p>其读写速度还是可以的…  二十万条数据查询的话不到一秒，然而…   频繁多量的读取，再加上不断地往其中写入就出问题了…… 卡的极慢…简直恐怖（数个小时的延迟 怕不怕）。（当然以上情况是完全没有做任何优化的情况（直接<code>insert</code> 、<code>find</code>），不知道优化之后会怎样）  另外不知道不增加条数，去增加内容会怎样…… emm  果然还是缓存比较好用…在高速多量<font color = red>多频次</font>的情况下还是用内存里面不去手动做任何保存比较好。 等积攒够量之后再去保存，就好比文件压缩不去一个个小文件传输一个道理。</p>\n<hr>\n<hr>\n<hr>\n<hr>\n<h2 id=\"MySQL\"><a href=\"#MySQL\" class=\"headerlink\" title=\"MySQL\"></a>MySQL</h2><h3 id=\"MySQL-8-0\"><a href=\"#MySQL-8-0\" class=\"headerlink\" title=\"MySQL 8.0\"></a>MySQL 8.0</h3><p>因为在更新8.0 之后更改了用户密码加密形式所以在使用客户端连接的时候会出现错误，所以需要</p>\n<pre><code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39; \n    PASSWORD EXPIRE NEVER; #修改加密规则  \nALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH \n    mysql_native_password BY &#39;password&#39;;  #更新用户的密码  \nFLUSH PRIVILEGES; #刷新权限\n</code></pre>\n<p>经此步骤，就可以将密码加密形式改为图形化客户端支持的加密形式，也或者更待客户端跟着服务端同步更新。</p>\n<p>另外，配置之初，windows 中配置步骤如下：</p>\n<ol>\n<li> 添加系统环境变量path    为MySQL/bin</li>\n<li>初始化 <code>mysqld --initialize --user=mysql --console</code></li>\n<li>根据初始化随机生成密码登陆</li>\n<li>修改密码   emm 这里说的是在外部，当然也可以在修改加密形式的时候一并修改 😄 <code>mysqladmin -u root -p password</code></li>\n<li>添加系统服务 <code>mysqld -install</code></li>\n<li>启动服务 <code>net start mysql</code></li>\n</ol>\n<p>另外在图像化里面注意密码格式呦，还有使用navicat的话需要最新版本，否则无法设置加密格式，还得用命令行去修改……果然还是命令行永远最好用</p>\n<h3 id=\"update\"><a href=\"#update\" class=\"headerlink\" title=\"update\"></a>update</h3><p><code>MySQL</code>的<code>update</code>在被更新数值和更新传入数值相同时，执行速度相当的快，据说是mysql并<font color=#f05710>不会执行更新动作</font>但是它<font color=#f05710>晓得</font>更新动作的发生</p>\n<h2 id=\"MySQL-中文乱码\"><a href=\"#MySQL-中文乱码\" class=\"headerlink\" title=\"MySQL 中文乱码\"></a>MySQL 中文乱码</h2><p>需要在连接时就指定✱charset✲    而不该一味纠结于在程序在存储时的数据准备<br>此处使用的是 </p>\n<pre><code>charset=&#39;gb2312&#39;\n</code></pre>\n<p>另外，干脆就在数据库中设置存为 blob 格式</p>\n<h2 id=\"连接远程-win-数据库\"><a href=\"#连接远程-win-数据库\" class=\"headerlink\" title=\"连接远程 win 数据库\"></a>连接远程 win 数据库</h2><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">开启某端口的示例：</span><br><span class=\"line\"></span><br><span class=\"line\">添加防火墙例外端口</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">## 导出表记录</span></span><br><span class=\"line\">[^<span class=\"emphasis\">_^]</span></span><br><span class=\"line\"><span class=\"emphasis\">    2021-04-22 看了上面,深表惭愧...</span></span><br><span class=\"line\"><span class=\"emphasis\">```bash</span></span><br><span class=\"line\"><span class=\"emphasis\">mysql -uuser -ppasswd -hhost -e &quot;use db_</span>name; select <span class=\"emphasis\">* from table_name where chat_id in (...);&quot; &gt;&gt; hello2.csv</span></span><br></pre></td></tr></table></figure>\n<p>在<code>bash</code>中直接执行<code>sql</code>语句，重定向保存</p>\n<h3 id=\"好处\"><a href=\"#好处\" class=\"headerlink\" title=\"好处\"></a>好处</h3><p>可以规避 <code>into outfile</code> 的权限问题，导出的东西用csv也是可以看的，分隔符得以保留，csv可以正常阅览</p>\n<h3 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h3><p>只不过有<code>,</code>时分隔符可能有些问题，全文替换了就好</p>\n<h5 id=\"入站规则设置\"><a href=\"#入站规则设置\" class=\"headerlink\" title=\"入站规则设置\"></a>入站规则设置</h5><p>第一步 选择 入站规则 然后 新建规则，选择 端口，然后下一步 <br>第二步 选择TCP 选择特定端口 然后输入端口，如有多个端口需要用逗号隔开了 例如: 3306<br>第三步 选择允许连接<br>第四步 选择配置文件 <br>第五步 输入规则名称 mysqlport</p>\n<h5 id=\"出站规则设置\"><a href=\"#出站规则设置\" class=\"headerlink\" title=\"出站规则设置\"></a>出站规则设置</h5><p>第一步 选择出站规则 然后 新建规则，选择 端口，然后下一步 <br>第二步 选择TCP 选择特定端口 然后输入端口，如有多个端口需要用逗号隔开了 例如: 3306<br>第三步 选择允许连接<br>第四步 选择配置文件 <br>第五步 输入规则名称 mysqlport（或者无特殊要求下直接关闭防火墙）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\"># 数据迁移</span><br><span class=\"line\">因为已有从数据库中读取数据进行返回的函数，所以没有必要再去写读取数据库的步骤（也没法写，因为数据库设计混乱，分不清哪儿是哪儿只有通过其对外函数才能取对相应数据）</span><br><span class=\"line\">但对外其是将一段时间内数据全部读取并且打包为&#96;json&#96;返回，所以一次性的话将是极大的一个文件，所以解决方法有：</span><br><span class=\"line\"></span><br><span class=\"line\">- 阅读其中源码，返回相应数据库指针，以此取出一个迁移一个</span><br><span class=\"line\">- 编写分段读取函数，保证每次取出的数据不多，一段一段的迁移</span><br><span class=\"line\"></span><br><span class=\"line\">反正我是采用&#96;一段一段&#96;了，毕竟源码太…   另外，一段一段的话打好日志，出现问题后可以分段纠正，也能间歇运行，另外下载好再迁也保证了数据emm，考虑如上</span><br><span class=\"line\"></span><br><span class=\"line\">## 简单总结</span><br><span class=\"line\">- 数据迁移程序</span><br><span class=\"line\">- 数据检验补差程序</span><br><span class=\"line\">- 断点运行机制</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;md</span><br><span class=\"line\"># 初始化</span><br><span class=\"line\">1. 读取配置文件（其中保存</span><br><span class=\"line\">* 数据迁移顺序——列表（内元素为字典key为* value为相应数据库、表名，</span><br><span class=\"line\">    时间起止，一次插入的时间跨度） ）</span><br><span class=\"line\"></span><br><span class=\"line\">2. 根据移植顺序读取目标数据库中相应数据的最新数据日期（</span><br><span class=\"line\">* 若为空开始则开始插入）</span><br><span class=\"line\">* 删除此日期的所有数据，</span><br><span class=\"line\">* 根据一次插入的时间跨度以及终点生成时间区间</span><br><span class=\"line\">* 根据时间区间去移植数据</span><br><span class=\"line\"></span><br><span class=\"line\">3. 当此类型数据移植完毕之后删除配置文件中列表的相应元素</span><br><span class=\"line\"># 执行动作</span><br><span class=\"line\">是</span><br><span class=\"line\"></span><br><span class=\"line\">## 日志</span><br><span class=\"line\">将每一步的重要信息都打印~</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"DB数据库-🖥-📊🖥\"><a href=\"#DB数据库-🖥-📊🖥\" class=\"headerlink\" title=\"DB数据库 🖥 📊🖥\"></a>DB数据库 🖥 📊🖥</h1><p><img src=\"https://webassets.mongodb.com/_com_assets/cms/kmxrodmee9int5s1v-HP_Highlight%202.svg\" alt=\"db\"></p>\n<h2 id=\"MongoDB笔记\"><a href=\"#MongoDB笔记\" class=\"headerlink\" title=\"MongoDB笔记\"></a>MongoDB笔记</h2><p>学习网站：<a href=\"http://www.runoob.com/mongodb/mongodb-tutorial.html\">http://www.runoob.com/mongodb/mongodb-tutorial.html</a><br>    (其学习教程还挺可观，很多，不过还不清楚好不好)</p>\n<h3 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a><font color=#ff5000>注意事项</font></h3><h4 id=\"Mongo-数据库锁\"><a href=\"#Mongo-数据库锁\" class=\"headerlink\" title=\"Mongo 数据库锁\"></a>Mongo 数据库锁</h4><p>mongo只提供库级粒度锁，所以一个写操作锁定时，其他读写操作都等待…   <font color=#d0a010>所以这个导致了Mongo多线程写操作反而没有一个线程写来的快？</font></p>\n<p><font color=#d0a010>前台建立索引时</font>，<code>Mongo</code>需占用一个写锁（且不同上述、不会临时放弃）   <font color=#10d0a0>为避免此问题</font>需采用<code>background</code>方式</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">db.posts.ensureIndex(&#123;<span class=\"symbol\">user_id:</span> <span class=\"number\">1</span>&#125;)  <span class=\"comment\">#此方式将引起全面战争</span></span><br><span class=\"line\"></span><br><span class=\"line\">db.posts.ensureIndex(&#123;<span class=\"symbol\">user_id:</span> <span class=\"number\">1</span>&#125;， &#123;<span class=\"symbol\">background:</span> <span class=\"number\">1</span>&#125;) <span class=\"comment\"># 这个就比较和平</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"操作命令简单记录\"><a href=\"#操作命令简单记录\" class=\"headerlink\" title=\"操作命令简单记录\"></a>操作命令简单记录</h3><h4 id=\"创建、插入\"><a href=\"#创建、插入\" class=\"headerlink\" title=\"创建、插入\"></a>创建、插入</h4><pre><code>use DATABASE_NAME   #如果数据库不存在，则创建数据库，否则切换到指定数据库。\nshow dbs        #查看所有数据库“name    size”\n</code></pre>\n<p>刚创建的数据库，如没有内容则不现实在其中</p>\n<pre><code>db.runoob.insert(&#123;&quot;name&quot;:&quot;教程&quot;&#125;)       #插入数据\n</code></pre>\n<h4 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h4><pre><code>db.dropDatabase()       #删除当前数据库，如未选择则删除test\ndb.collection.drop()        #删除集合\ndb.site.drop()          #：如删除site集合\n</code></pre>\n<h5 id=\"删除重复数据\"><a href=\"#删除重复数据\" class=\"headerlink\" title=\"删除重复数据\"></a>删除重复数据</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delete from alarm_calendar where id not in (SELECT maxid from (SELECT MAX(id) as maxid, </span><br><span class=\"line\">CONCAT(user_id,time,generic_name) as nameAndCode from alarm_calendar GROUP BY nameAndCode) t);</span><br></pre></td></tr></table></figure>\n<p>根据<code>user_id</code>, <code>time</code>, <code>generic_name</code>来打包重复，将重复数据删掉, 留下<code>max</code>，在自增里面即：最新数据</p>\n<h4 id=\"插入文档\"><a href=\"#插入文档\" class=\"headerlink\" title=\"插入文档\"></a>插入文档</h4><pre><code>db.COLLECTION_NAME.insert(document)\n</code></pre>\n<hr>\n<pre><code>db.col.insert(&#123;title: &#39;MongoDB 教程&#39;, \n    description: &#39;MongoDB 是一个 Nosql 数据库&#39;,\n    by: &#39;菜鸟教程&#39;,     \n    url: &#39;http://www.runoob.com&#39;,       \n    tags: [&#39;mongodb&#39;, &#39;database&#39;, &#39;NoSQL&#39;], \n    likes: 100\n    &#125;)      #例如这样\n</code></pre>\n<p>db.col.find()       #查看已插入文档</p>\n<p>也可以将document=括号里要插入内容，然后插入document变量，效果一样。</p>\n<h5 id=\"3-2版本新加\"><a href=\"#3-2版本新加\" class=\"headerlink\" title=\"3.2版本新加\"></a>3.2版本新加</h5><pre><code>db.collection.insertOne()       #向指定集合中插入一条文档数据\ndb.collection.insertMany()  #向指定集合中插入多条文档数据\n</code></pre>\n<hr>\n<pre><code>插入单条数据\nvar document = db.collection.insertOne(&#123;&quot;a&quot;: 3&#125;)\n</code></pre>\n<blockquote>\n<p>document<br>{<br>        “acknowledged” : true,<br>        “insertedId” : ObjectId(“571a218011a82a1d94c02333”)<br>}</p>\n</blockquote>\n<pre><code>插入多条数据    \nvar res = db.collection.insertMany([&#123;&quot;b&quot;: 3&#125;, &#123;&#39;c&#39;: 4&#125;])\n</code></pre>\n<blockquote>\n<p>res<br>{<br>        “acknowledged” : true,<br>        “insertedIds” : [<br>                ObjectId(“571a22a911a82a1d94c02337”),<br>                ObjectId(“571a22a911a82a1d94c02338”)<br>        ]<br>}</p>\n</blockquote>\n<h3 id=\"更新、添加文档\"><a href=\"#更新、添加文档\" class=\"headerlink\" title=\"更新、添加文档\"></a>更新、添加文档</h3><pre><code>db.col.update(&#123;&#39;title&#39;:&#39;MongoDB 教程&#39;&#125;,&#123;$set:&#123;&#39;title&#39;:&#39;MongoDB&#39;&#125;&#125;)      \n#更新标题\n\ndb.collection.save(     \n#通过传入的文档来替换已有文档\n&lt;document&gt;,\n&#123;\nwriteConcern: &lt;document&gt;\n&#125;)\n</code></pre>\n<blockquote>\n<p>参数说明：<br>document :  文档数据。<br>writeConcern :  可选，抛出异常的级别。</p>\n</blockquote>\n<p><font color=greeen>eg：</font>      实例中替换了 _id 为 56064f89ade2f21f36b03136 的文档数据：</p>\n<pre><code>db.col.save(&#123;\n&quot;_id&quot; : ObjectId(&quot;56064f89ade2f21f36b03136&quot;),\n&quot;title&quot; : &quot;MongoDB&quot;,\n&quot;description&quot; : &quot;MongoDB 是一个 Nosql 数据库&quot;,\n&quot;by&quot; : &quot;Runoob&quot;,\n&quot;url&quot; : &quot;http://www.runoob.com&quot;,\n&quot;tags&quot; : [\n    &quot;mongodb&quot;,\n    &quot;NoSQL&quot;\n],\n&quot;likes&quot; : 110\n</code></pre>\n<p>})</p>\n<h3 id=\"导入csv文件\"><a href=\"#导入csv文件\" class=\"headerlink\" title=\"导入csv文件\"></a>导入csv文件</h3><pre><code>mongoimport --db Trader_1Min_Db --collection Au(T+D) --type csv --file \nD:\\\\IFData\\\\md_Au(T+D)_20170101_20170531\\\\md_Au(T+D)_2017010301.csv \n--headerline --upsert --ignoreBlanks\n</code></pre>\n<blockquote>\n<p>注意需要另开一个命令行，在其中运行。<br>2017-10-25T08:43:40.917+0800 E QUERY    [thread1] SyntaxError: missing ; before statement @(shell):1:16 否则就是这个错误</p>\n</blockquote>\n<pre><code>-d    指定把数据导入到哪一个数据库中\n-c    指定把数据导入到哪一个集合中\n--type    指定导入的数据类型   csv/tsv  逗号或者tab分割值\n--file       指定从哪一个文件中导入数据\n--headerline    仅适用于导入csv,tsv格式的数据，表示文件中的第一行作为数据头\n--upsert  以新增或者更新的方式来导入数据\n--f  导入字段名\n--ignoreBlanks 忽略空白符\n</code></pre>\n<h3 id=\"导出\"><a href=\"#导出\" class=\"headerlink\" title=\"导出\"></a>导出</h3><pre><code>mongoexport -d test -c students -o students.dat \nconnected to: 127.0.0.1 exported 9 records\n# 指明导出格式为csv\nmongoexport -d test -c students --csv -f classid,name,age -o students_csv.dat \nconnected to: 127.0.0.1 exported 9 records   \n</code></pre>\n<h4 id=\"添加\"><a href=\"#添加\" class=\"headerlink\" title=\"添加\"></a>添加</h4><pre><code>db.collectionName.update(&#123;&#125;, &#123;$set:&#123;&#39;key&#39; : value&#125;&#125;, false, true);\n</code></pre>\n<h2 id=\"改\"><a href=\"#改\" class=\"headerlink\" title=\"改\"></a>改</h2><pre><code>.update\n</code></pre>\n<h4 id=\"更改字段名称\"><a href=\"#更改字段名称\" class=\"headerlink\" title=\"更改字段名称\"></a>更改字段名称</h4><pre><code>db.CollectionName.update(&#123;&#125;, &#123;$rename : &#123;&quot;OldName&quot; : &quot;NewName&quot;&#125;&#125;, false, true)\n# false为如不存在update记录，是否插入新的纪录  \n# ture位置为更新全部数据，如设定false 则为只更新第一条\n# 另外 没有输入名称时没有输全，也会显示查找，但不会执行更改\n</code></pre>\n<h4 id=\"统配\"><a href=\"#统配\" class=\"headerlink\" title=\"统配\"></a>统配</h4><pre><code>db.CollectionName.update(&lt;query&gt;, &lt;update&gt;,&#123;upsert : &lt;boolean&gt;, multi : &lt;boolean&gt;, \nwriteConcern : &lt;document&gt;&#125;)\n# query : update 查找条件，类似sql update查询内where后面的\n# update : update的对象和一些更新的操作符（如$,$inc...）等，也可以理解为sql update查\n#&gt;询内set后面的\n# upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插\n#&gt;入，默认是false，不插入。\n# multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把\n#&gt;按条件查出来多条记录全部更新。\n# writeConcern :可选，抛出异常的级别。\n</code></pre>\n<h5 id=\"eg\"><a href=\"#eg\" class=\"headerlink\" title=\"eg\"></a>eg</h5><pre><code>db.col.update(&#123;&#39;title&#39;:&#39;MongoDB&#39;&#125;,&#123;$set:&#123;&#39;title&#39;:&#39;IamNewTitle&#39;&#125;&#125;)\n</code></pre>\n<h4 id=\"删除文档\"><a href=\"#删除文档\" class=\"headerlink\" title=\"删除文档\"></a>删除文档</h4><p>remove()函数是用来移除集合中的数据。</p>\n<pre><code>db.collection.remove(\n&lt;query&gt;,\n&lt;justOne&gt;\n)\n</code></pre>\n<h5 id=\"2-6版以后\"><a href=\"#2-6版以后\" class=\"headerlink\" title=\"2.6版以后\"></a>2.6版以后</h5><pre><code>db.collection.remove(\n&lt;query&gt;,\n&#123;\njustOne: &lt;boolean&gt;,\nwriteConcern: &lt;document&gt;\n&#125;)\n</code></pre>\n<blockquote>\n<p>参数说明：<br>query :（可选）删除的文档的条件。<br>justOne : （可选）如果设为 true 或 1，则只删除一个文档。<br>writeConcern :（可选）抛出异常的级别。</p>\n</blockquote>\n<pre><code>db.col.remove(&#123;&#125;)   #删除所有 (就很恐怖)\n</code></pre>\n<h4 id=\"查询文档\"><a href=\"#查询文档\" class=\"headerlink\" title=\"查询文档\"></a>查询文档</h4><table>\n<thead>\n<tr>\n<th align=\"left\">操作</th>\n<th align=\"center\">格式</th>\n<th align=\"center\">范例</th>\n<th align=\"right\">RDBMS中的类似语句</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">等于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&lt;value&gt;</code>}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;by&quot;:&quot;教程&quot;&#125;).pretty()    </code></td>\n<td align=\"right\"><code>where by = &#39;教程&#39;</code></td>\n</tr>\n<tr>\n<td align=\"left\">小于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$lt:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$lt:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\"><code>where likes &lt; 50   </code></td>\n</tr>\n<tr>\n<td align=\"left\">小于或等于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$lte:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$lte:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\">…</td>\n</tr>\n<tr>\n<td align=\"left\">大于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$gt:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$gt:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\">…</td>\n</tr>\n<tr>\n<td align=\"left\">大于或等于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$gte:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$gte:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\">…</td>\n</tr>\n<tr>\n<td align=\"left\">不等于</td>\n<td align=\"center\">{<code>&lt;key&gt;:&#123;$ne:&lt;value&gt;</code>}}</td>\n<td align=\"center\"><code>db.col.find(&#123;&quot;likes&quot;:&#123;$ne:50&#125;&#125;).pretty()</code></td>\n<td align=\"right\"><code>where likes != 50</code></td>\n</tr>\n</tbody></table>\n<h5 id=\"And\"><a href=\"#And\" class=\"headerlink\" title=\"And\"></a>And</h5><p>find可以传入多个键(key),逗号隔开：</p>\n<pre><code>db.col.find(&#123;key1:value1, key2:value2&#125;).pretty()\ndb.col.find(&#123;&quot;by&quot;:&quot;教程&quot;, &quot;title&quot;:&quot;MongoDB &quot;&#125;).pretty()\n#类似于\nWHERE by=&#39;教程&#39; AND title=&#39;MongoDB &#39;\n</code></pre>\n<h5 id=\"Or\"><a href=\"#Or\" class=\"headerlink\" title=\"Or\"></a>Or</h5><pre><code>db.test.find(&#123;$[&#123;key1:value1&#125;,(key2:value2)]&#125;).pretty()     #注意小中大括号😰\ndb.col.find(&#123;&quot;likes&quot;: &#123;$gt:50&#125;, $or: [&#123;&quot;by&quot;: &quot;教程&quot;&#125;,&#123;&quot;title&quot;: &quot;MongoDB &quot;&#125;]&#125;)\n</code></pre>\n<h5 id=\"And-与-Or\"><a href=\"#And-与-Or\" class=\"headerlink\" title=\"And 与 Or\"></a>And 与 Or</h5><pre><code>db.col.find(&#123;&quot;likes&quot;: &#123;$gt:50&#125;, $or: [&#123;&quot;by&quot;: &quot;教程&quot;&#125;,&#123;&quot;title&quot;: &quot;MongoDB &quot;&#125;]&#125;)\n#类似于（其中pretty()是显示样式）\nwhere likes&gt;50 AND (by = &#39;教程&#39; OR title = &#39;MongoDB ‘\n</code></pre>\n<h4 id=\"简写说明\"><a href=\"#简写说明\" class=\"headerlink\" title=\"简写说明\"></a>简写说明</h4><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"center\"></th>\n<th align=\"center\"></th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">$gt</td>\n<td align=\"center\">——–</td>\n<td align=\"center\">greater than</td>\n<td align=\"right\">&gt;</td>\n</tr>\n<tr>\n<td align=\"left\">$gte</td>\n<td align=\"center\">———</td>\n<td align=\"center\">gt equal</td>\n<td align=\"right\">&gt;=</td>\n</tr>\n<tr>\n<td align=\"left\">$lt</td>\n<td align=\"center\">——–</td>\n<td align=\"center\">less than</td>\n<td align=\"right\">&lt;</td>\n</tr>\n<tr>\n<td align=\"left\">$lte</td>\n<td align=\"center\">———</td>\n<td align=\"center\">lt equal</td>\n<td align=\"right\">&lt;=</td>\n</tr>\n<tr>\n<td align=\"left\">$ne</td>\n<td align=\"center\">———–</td>\n<td align=\"center\">not equal</td>\n<td align=\"right\">!=</td>\n</tr>\n<tr>\n<td align=\"left\">$eq</td>\n<td align=\"center\">——–</td>\n<td align=\"center\">equal</td>\n<td align=\"right\">=</td>\n</tr>\n</tbody></table>\n<h5 id=\"Type\"><a href=\"#Type\" class=\"headerlink\" title=\"Type\"></a>Type</h5><pre><code>db.col.find(&#123;&quot;title&quot; : &#123;$type : 2&#125;&#125;)    #获取“col”集合中title为String的数据\n</code></pre>\n<p><strong>对照表：</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"center\">数字</th>\n<th align=\"right\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Double</td>\n<td align=\"center\">1</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">String</td>\n<td align=\"center\">2</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Object</td>\n<td align=\"center\">3</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Array</td>\n<td align=\"center\">4</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Binary data</td>\n<td align=\"center\">5</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Undefined</td>\n<td align=\"center\">6</td>\n<td align=\"right\">已废弃。</td>\n</tr>\n<tr>\n<td align=\"left\">Object id</td>\n<td align=\"center\">7</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Boolean</td>\n<td align=\"center\">8</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Date</td>\n<td align=\"center\">9</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Null</td>\n<td align=\"center\">10</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Regular Expression</td>\n<td align=\"center\">11</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">JavaScript</td>\n<td align=\"center\">13</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Symbol</td>\n<td align=\"center\">14</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">JavaScript (with scope)</td>\n<td align=\"center\">15</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">32-bit integer</td>\n<td align=\"center\">16</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Timestamp</td>\n<td align=\"center\">17</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">64-bit integer</td>\n<td align=\"center\">18</td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\">Min key</td>\n<td align=\"center\">255</td>\n<td align=\"right\">Query with -1.</td>\n</tr>\n<tr>\n<td align=\"left\">Max key</td>\n<td align=\"center\">127</td>\n<td align=\"right\"></td>\n</tr>\n</tbody></table>\n<h5 id=\"Limit-Skip-方法\"><a href=\"#Limit-Skip-方法\" class=\"headerlink\" title=\"Limit() Skip()方法\"></a>Limit() Skip()方法</h5><pre><code>db.col.find(&#123;&#125;,&#123;&quot;title&quot;:1,_id:0&#125;).limit(2)\n</code></pre>\n<blockquote>\n<p>参数说明：<br>    “title”后1为判断语句，表示是否只查询“title”内容0为否，显示这条的全部信息。_id的0亦为判断表示是否显示“_id”内容。limit为限制搜索信息条数。</p>\n</blockquote>\n<pre><code>db.col.find(&#123;&#125;,&#123;&quot;title&quot;:1,_id:0&#125;).limit(1).skip(1)\nskip(NUMBER)        #NUMBER为阶跃，即每隔几条数据来搜索\n</code></pre>\n<h3 id=\"排序\"><a href=\"#排序\" class=\"headerlink\" title=\"排序\"></a>排序</h3><pre><code>db.COLLECTION_NAME.find().sort(&#123;KEY:1&#125;)     #KEY后数字可为1OR-1，升序OR降序\ndb.col.find(&#123;&#125;,&#123;&quot;title&quot;:1,_id:0&#125;).sort(&#123;&quot;likes&quot;:-1&#125;     #按“likes”降序排序\n</code></pre>\n<hr>\n<hr>\n<h3 id=\"MongoDB-索引-（建立索引干嘛……）\"><a href=\"#MongoDB-索引-（建立索引干嘛……）\" class=\"headerlink\" title=\"MongoDB 索引        （建立索引干嘛……）\"></a>MongoDB 索引        （<font color=crimson>建立索引干嘛……</font>）</h3><h4 id=\"ensureIndex-方法\"><a href=\"#ensureIndex-方法\" class=\"headerlink\" title=\"ensureIndex() 方法\"></a>ensureIndex() 方法</h4><pre><code>db.COLLECTION_NAME.ensureIndex(&#123;KEY:1&#125;)\n# Key 值为要创建的索引字段，1为指定按升序创建索引，降序-1\n</code></pre>\n<h3 id=\"聚合\"><a href=\"#聚合\" class=\"headerlink\" title=\"聚合\"></a>聚合</h3><h4 id=\"aggregate-方法\"><a href=\"#aggregate-方法\" class=\"headerlink\" title=\"aggregate()方法\"></a>aggregate()方法</h4><pre><code>db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)\ndb.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$sum : 1&#125;&#125;&#125;])\n#类似于\nselect by_user, count(*) from mycol group by by_user\n</code></pre>\n<blockquote>\n<p>输出结果：<br>{ “_id” : “Neo4j”, “num_tutorial” : 1 }<br>{ “_id” : “runoob.com”, “num_tutorial” : 2 }<br>{ “_id” : null, “num_tutorial” : 1 }</p>\n</blockquote>\n<blockquote>\n<p>参数说明：“$by_user” 即为分类依据，并打印出来（如上）。<br>num_tutorial 仅为显示提示，可以更改为任意提示甚至汉字。<br>$sum : 1 其中1为每次计数值，即重复一次加几。1+1+1+1…… ：重复一次加1；0.1+0.1+0.1……重复一次加0.1。这个意思</p>\n</blockquote>\n<h5 id=\"计算符：\"><a href=\"#计算符：\" class=\"headerlink\" title=\"计算符：\"></a>计算符：</h5><table>\n<thead>\n<tr>\n<th align=\"left\">表达式</th>\n<th align=\"center\">描述</th>\n<th align=\"center\">实例</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">$sum</td>\n<td align=\"center\">计算总和。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$sum : &quot;$likes&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$avg</td>\n<td align=\"center\">计算平均值</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$avg : &quot;$likes&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$min</td>\n<td align=\"center\">获取集合中所有文档对应值得最小值。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$min : &quot;$likes&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$max</td>\n<td align=\"center\">获取集合中所有文档对应值得最大值。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, num_tutorial : &#123;$max : &quot;$likes&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$push</td>\n<td align=\"center\">在结果文档中插入值到一个数组中。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, url : &#123;$push: &quot;$url&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$addToSet</td>\n<td align=\"center\">在结果文档中插入值到一个数组中，但不创建副本。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, url : &#123;$addToSet : &quot;$url&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$first</td>\n<td align=\"center\">根据资源文档的排序获取第一个文档数据。</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, first_url : &#123;$first : &quot;$url&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n<tr>\n<td align=\"left\">$last</td>\n<td align=\"center\">根据资源文档的排序获取最后一个文档数据</td>\n<td align=\"center\"><code>db.mycol.aggregate([&#123;$group : &#123;_id : &quot;$by_user&quot;, last_url : &#123;$last : &quot;$url&quot;&#125;&#125;&#125;])</code></td>\n</tr>\n</tbody></table>\n<h3 id=\"条件操作符\"><a href=\"#条件操作符\" class=\"headerlink\" title=\"条件操作符\"></a>条件操作符</h3><pre><code>$gt     大于\n$lt     小于\n$gte        大于等于\n$lte        小于等于\n</code></pre>\n<h4 id=\"eg：\"><a href=\"#eg：\" class=\"headerlink\" title=\"eg：\"></a>eg：</h4><pre><code>db.col.find(&#123;likes : &#123;$gte : 100&#125;&#125;)\n# 查询“col”集合中&quot;likes&quot;大于100的数据\n# 比较与 `SQL       Select * from col where likes &gt;=100;`\n</code></pre>\n<h4 id=\"取前n条数据\"><a href=\"#取前n条数据\" class=\"headerlink\" title=\"取前n条数据\"></a>取前n条数据</h4><pre><code>.find().limit(n)\n</code></pre>\n<h3 id=\"执行顺序\"><a href=\"#执行顺序\" class=\"headerlink\" title=\"执行顺序\"></a>执行顺序</h3><pre><code>skip(), limilt(), sort()三个放在一起执行的时候，执行的顺序是先 sort(), \n然后是 skip()，最后是显示的 limit()。\n</code></pre>\n<h2 id=\"数据导出\"><a href=\"#数据导出\" class=\"headerlink\" title=\"数据导出\"></a>数据导出</h2><pre><code>mongoexport -d *** -c *** -o ***\n# -d 后为 dbName\n   -c 后为 collectionName\n   -o 后为 outputFileName 导出文件名\n</code></pre>\n<p>名字都不用加引号，直接上的~，  然后导出格式都是json 那样，不管后缀是什么用文本打开都是一个样子——骗鬼👻</p>\n<h2 id=\"数据导入\"><a href=\"#数据导入\" class=\"headerlink\" title=\"数据导入\"></a>数据导入</h2><pre><code> mongoimport -h 127.0.0.1 -p 27017 -d Trader_1Min_Db -c ag1806 --file \n/home/ian/Downloads/ag1806.json\n</code></pre>\n<h3 id=\"Linux-下使用Robo3T错误\"><a href=\"#Linux-下使用Robo3T错误\" class=\"headerlink\" title=\"Linux 下使用Robo3T错误\"></a>Linux 下使用Robo3T错误</h3><p>错误最后字段为：已放弃 (核心已转储)</p>\n<pre><code>mkdir ~/robo-backup\nmv robo3t-1.1.1-linux-x86_64-*/lib/libstdc++* \n</code></pre>\n<p>~/robo-backup/robo3t-1.1.1-linux-x86_64-*/bin/robo3t<br>    移动备份之后即可运行</p>\n<h1 id=\"For-Python\"><a href=\"#For-Python\" class=\"headerlink\" title=\"For Python\"></a>For Python</h1><h2 id=\"PyMongo\"><a href=\"#PyMongo\" class=\"headerlink\" title=\"PyMongo\"></a>PyMongo</h2><pre><code>from pymongo import MongoClient\nclient = MongoClient(&quot;localhost&quot;, 27017)\nclient.server_info()    \n# 查看信息，检测是否成功连接\ndb = client[&quot;someData&quot;]\ncollection = db.zn1801_30Min\n# 两种命名方式，一种是直接.     一种是使用“”\n</code></pre>\n<p>乖乖的用<font color = red>双引号</font>，因为，在这里的单双引号是区分的… 我现在也懒得去管它是字符字符串的什么鬼。┏┛墓┗┓…(((m -__-)m</p>\n<h4 id=\"insert\"><a href=\"#insert\" class=\"headerlink\" title=\"insert\"></a>insert</h4><pre><code>collection.insert( &#123;&quot;name&quot;:&quot;text&quot; &#125; )\n</code></pre>\n<h4 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find\"></a>find</h4><pre><code>d = &#123;u&#39;Volume&#39;:&#123;&#39;$gte&#39;:50353,&#39;$lte&#39;:50355&#125;&#125;\na = collection.find(d)\n</code></pre>\n<p>最小与最大，另外，find出来的东西是数据库指针，需要用<code>for...in...</code>来循环取出内容来</p>\n<h2 id=\"查询库名\"><a href=\"#查询库名\" class=\"headerlink\" title=\"查询库名\"></a>查询库名</h2><pre><code>from pymongo import MongoClient\nclient = MongoClient(&#39;localhost&#39;, 27017)\nclient.database_names()\n</code></pre>\n<blockquote>\n<p>[u’Trader_1Min_Db’, u’Trader_30Min_Db’, u’Trader_Tick_Db’, u’VnTrader_Log_Db’, u’VnTrader_Position_Db’, u’admin’, u’local’, u’someData’, u’test’]</p>\n</blockquote>\n<h3 id=\"查询集合名\"><a href=\"#查询集合名\" class=\"headerlink\" title=\"查询集合名\"></a>查询集合名</h3><pre><code>collectionNames = client[dbName].collection_names()\nprint collectionNames\n</code></pre>\n<h1 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h1><p>其读写速度还是可以的…  二十万条数据查询的话不到一秒，然而…   频繁多量的读取，再加上不断地往其中写入就出问题了…… 卡的极慢…简直恐怖（数个小时的延迟 怕不怕）。（当然以上情况是完全没有做任何优化的情况（直接<code>insert</code> 、<code>find</code>），不知道优化之后会怎样）  另外不知道不增加条数，去增加内容会怎样…… emm  果然还是缓存比较好用…在高速多量<font color = red>多频次</font>的情况下还是用内存里面不去手动做任何保存比较好。 等积攒够量之后再去保存，就好比文件压缩不去一个个小文件传输一个道理。</p>\n<hr>\n<hr>\n<hr>\n<hr>\n<h2 id=\"MySQL\"><a href=\"#MySQL\" class=\"headerlink\" title=\"MySQL\"></a>MySQL</h2><h3 id=\"MySQL-8-0\"><a href=\"#MySQL-8-0\" class=\"headerlink\" title=\"MySQL 8.0\"></a>MySQL 8.0</h3><p>因为在更新8.0 之后更改了用户密码加密形式所以在使用客户端连接的时候会出现错误，所以需要</p>\n<pre><code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39; \n    PASSWORD EXPIRE NEVER; #修改加密规则  \nALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH \n    mysql_native_password BY &#39;password&#39;;  #更新用户的密码  \nFLUSH PRIVILEGES; #刷新权限\n</code></pre>\n<p>经此步骤，就可以将密码加密形式改为图形化客户端支持的加密形式，也或者更待客户端跟着服务端同步更新。</p>\n<p>另外，配置之初，windows 中配置步骤如下：</p>\n<ol>\n<li> 添加系统环境变量path    为MySQL/bin</li>\n<li>初始化 <code>mysqld --initialize --user=mysql --console</code></li>\n<li>根据初始化随机生成密码登陆</li>\n<li>修改密码   emm 这里说的是在外部，当然也可以在修改加密形式的时候一并修改 😄 <code>mysqladmin -u root -p password</code></li>\n<li>添加系统服务 <code>mysqld -install</code></li>\n<li>启动服务 <code>net start mysql</code></li>\n</ol>\n<p>另外在图像化里面注意密码格式呦，还有使用navicat的话需要最新版本，否则无法设置加密格式，还得用命令行去修改……果然还是命令行永远最好用</p>\n<h3 id=\"update\"><a href=\"#update\" class=\"headerlink\" title=\"update\"></a>update</h3><p><code>MySQL</code>的<code>update</code>在被更新数值和更新传入数值相同时，执行速度相当的快，据说是mysql并<font color=#f05710>不会执行更新动作</font>但是它<font color=#f05710>晓得</font>更新动作的发生</p>\n<h2 id=\"MySQL-中文乱码\"><a href=\"#MySQL-中文乱码\" class=\"headerlink\" title=\"MySQL 中文乱码\"></a>MySQL 中文乱码</h2><p>需要在连接时就指定✱charset✲    而不该一味纠结于在程序在存储时的数据准备<br>此处使用的是 </p>\n<pre><code>charset=&#39;gb2312&#39;\n</code></pre>\n<p>另外，干脆就在数据库中设置存为 blob 格式</p>\n<h2 id=\"连接远程-win-数据库\"><a href=\"#连接远程-win-数据库\" class=\"headerlink\" title=\"连接远程 win 数据库\"></a>连接远程 win 数据库</h2><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">开启某端口的示例：</span><br><span class=\"line\"></span><br><span class=\"line\">添加防火墙例外端口</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">## 导出表记录</span></span><br><span class=\"line\">[^<span class=\"emphasis\">_^]</span></span><br><span class=\"line\"><span class=\"emphasis\">    2021-04-22 看了上面,深表惭愧...</span></span><br><span class=\"line\"><span class=\"emphasis\">```bash</span></span><br><span class=\"line\"><span class=\"emphasis\">mysql -uuser -ppasswd -hhost -e &quot;use db_</span>name; select <span class=\"emphasis\">* from table_name where chat_id in (...);&quot; &gt;&gt; hello2.csv</span></span><br></pre></td></tr></table></figure>\n<p>在<code>bash</code>中直接执行<code>sql</code>语句，重定向保存</p>\n<h3 id=\"好处\"><a href=\"#好处\" class=\"headerlink\" title=\"好处\"></a>好处</h3><p>可以规避 <code>into outfile</code> 的权限问题，导出的东西用csv也是可以看的，分隔符得以保留，csv可以正常阅览</p>\n<h3 id=\"注意点\"><a href=\"#注意点\" class=\"headerlink\" title=\"注意点\"></a>注意点</h3><p>只不过有<code>,</code>时分隔符可能有些问题，全文替换了就好</p>\n<h5 id=\"入站规则设置\"><a href=\"#入站规则设置\" class=\"headerlink\" title=\"入站规则设置\"></a>入站规则设置</h5><p>第一步 选择 入站规则 然后 新建规则，选择 端口，然后下一步 <br>第二步 选择TCP 选择特定端口 然后输入端口，如有多个端口需要用逗号隔开了 例如: 3306<br>第三步 选择允许连接<br>第四步 选择配置文件 <br>第五步 输入规则名称 mysqlport</p>\n<h5 id=\"出站规则设置\"><a href=\"#出站规则设置\" class=\"headerlink\" title=\"出站规则设置\"></a>出站规则设置</h5><p>第一步 选择出站规则 然后 新建规则，选择 端口，然后下一步 <br>第二步 选择TCP 选择特定端口 然后输入端口，如有多个端口需要用逗号隔开了 例如: 3306<br>第三步 选择允许连接<br>第四步 选择配置文件 <br>第五步 输入规则名称 mysqlport（或者无特殊要求下直接关闭防火墙）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br><span class=\"line\"># 数据迁移</span><br><span class=\"line\">因为已有从数据库中读取数据进行返回的函数，所以没有必要再去写读取数据库的步骤（也没法写，因为数据库设计混乱，分不清哪儿是哪儿只有通过其对外函数才能取对相应数据）</span><br><span class=\"line\">但对外其是将一段时间内数据全部读取并且打包为&#96;json&#96;返回，所以一次性的话将是极大的一个文件，所以解决方法有：</span><br><span class=\"line\"></span><br><span class=\"line\">- 阅读其中源码，返回相应数据库指针，以此取出一个迁移一个</span><br><span class=\"line\">- 编写分段读取函数，保证每次取出的数据不多，一段一段的迁移</span><br><span class=\"line\"></span><br><span class=\"line\">反正我是采用&#96;一段一段&#96;了，毕竟源码太…   另外，一段一段的话打好日志，出现问题后可以分段纠正，也能间歇运行，另外下载好再迁也保证了数据emm，考虑如上</span><br><span class=\"line\"></span><br><span class=\"line\">## 简单总结</span><br><span class=\"line\">- 数据迁移程序</span><br><span class=\"line\">- 数据检验补差程序</span><br><span class=\"line\">- 断点运行机制</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;md</span><br><span class=\"line\"># 初始化</span><br><span class=\"line\">1. 读取配置文件（其中保存</span><br><span class=\"line\">* 数据迁移顺序——列表（内元素为字典key为* value为相应数据库、表名，</span><br><span class=\"line\">    时间起止，一次插入的时间跨度） ）</span><br><span class=\"line\"></span><br><span class=\"line\">2. 根据移植顺序读取目标数据库中相应数据的最新数据日期（</span><br><span class=\"line\">* 若为空开始则开始插入）</span><br><span class=\"line\">* 删除此日期的所有数据，</span><br><span class=\"line\">* 根据一次插入的时间跨度以及终点生成时间区间</span><br><span class=\"line\">* 根据时间区间去移植数据</span><br><span class=\"line\"></span><br><span class=\"line\">3. 当此类型数据移植完毕之后删除配置文件中列表的相应元素</span><br><span class=\"line\"># 执行动作</span><br><span class=\"line\">是</span><br><span class=\"line\"></span><br><span class=\"line\">## 日志</span><br><span class=\"line\">将每一步的重要信息都打印~</span><br></pre></td></tr></table></figure>\n"},{"title":"图形化界面 （Python Gui）","date":"2017-07-01T13:20:00.000Z","modified":"2018-05-15 11:40","slug":"notes/noteOfgui","_content":"author:Ian\n\n# Python GUI 💽\n## PyQt\n![qt](https://tse4-mm.cn.bing.net/th/id/OIP.J4_Nqrcc0x7slHHUFwKLSQHaI6?pid=ImgDet&rs=1 \"tmp\")\n\n官方说明文档：<http://pyqt.sourceforge.net/Docs/PyQt4/index.html>\n照例，先贴网址： <http://www.qaulau.com/books/PyQt4_Tutorial/index.html>\n\n## 画界面\n    #PyQt4使用designer.exe\n    import os \n    for root, dirs, files in os.walk('.'): \n        for file in files: \n            if file.endswith('.ui'): \n                os.system('pyuic4 -o ui_%s.py %s' % (file.rsplit('.', 1)[0], file))\n            elif file.endswith('.qrc'): \n                os.system('pyrcc4 -o %s_rc.py %s' % (file.rsplit('.', 1)[0], file))\n    # 注：在Win中调用pyrcc4 可能无法识别该命令，即使添加到环境变量也不行，而是\n    #pyrcc.exe才能调用简直……\n#### 窗口设置\n    resize(8, 8)\n    setWindowTitle(u'标题')\n#### 获取图标\n    def getIcon(filename):\n    \"\"\" 获取图标 \"\"\"\n        fileInfo = Qt.QFileInfo(filename) \n        fileIcon = Qt.QFileIconProvider() \n        icon = QtGui.QIcon(fileIcon.icon(fileInfo)) \n        return icon  \n    使用时：\n    self.setWindowIcon(getIcon('../hi/app.ico'))\n\n---\n\n##### Dock\n    widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.“dock标题”, QtCore.Qt.RightDockWidgetArea)\n    # 方向有： `RightDockWidgetArea`,`BottomDockWidgetArea`,`LeftDockWidgetArea`\n    # 创建dock窗口\n    # 可利用\n    self.tabifyDockWidget(dockMarketM, dockAllDataM)\n    来合并同一个方向上的dock\n    \n    # 此下还没看… \n    dockTradeM.raise_()\n    dockPositionM.raise_()\n    \n    # 连接组件之间的信号\n    widgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition)\n        \n    # 保存默认设置\n    self.saveWindowSettings('default')\n\n其实现函数为：\n\"\"\"创建停靠组件\"\"\"\n\n    def createDock(self, widgetClass, widgetName, widgetArea):\n        widget = widgetClass(self.mainEngine, self.eventEngine) \n        dock = QtGui.QDockWidget(widgetName)\n        dock.setWidget(widget)\n        dock.setObjectName(widgetName)\n        dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable)\n        self.addDockWidget(widgetArea, dock)\n        return widget, dock\n> 再本质一点的东西为：\n\n    widget1 = Ha(self)\n    dock = QtGui.QDockWidget('haha')\n    dock.setObjectName('ha1')\n    dock.setWidget(widget1)\n    dock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable)\n    self.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock)\n\n#### 动作\n    exit = QtGui.QAction(QtGui.QIcon('hello.ico'), 'exit', self)\n    exit.setShortcut('Ctrl+Q')\n    exit.setStatusTip('Exit application')\n    # 图标、文字、快捷键、提示信息\n    \n    menubar = self.menuBar()\n    file = menubar.addMenu('&File')\n    file.addAction(exit)\n    # 创建目录和工具栏，将动作添加进去。工具栏同理\n\n### 定位布局\n#### 绝对定位\n    label1 = QtGui.QLabel(u'绝对定位', self)\n    label1.move(15, 60)\n    # 创建、移动到显示位置\n\n#### 框布局 及 布局元素平均分布\n    okButton = QtGui.QPushButton(\"OK\")\n    cancelButton = QtGui.QPushButton(\"Cancel\")\n    # 创建按钮\n\n    hbox = QtGui.QHBoxLayout()\n    hbox.addStretch(1)\n    hbox.addWidget(okButton)        # 增加组件\n    hbox.addWidget(cancelButton)\n    # 创建水平栏\n    hbox.addStretch()   # 平均分布\n    \n    vbox = QtGui.QVBoxLayout()\n    vbox.addStretch(1)\n    # 创建竖列\n\n    vbox.addLayout(hbox)\n    # 将水平栏插入竖列\n    self.setLayout(vbox)     \n    # 显示最终竖列\n注意一下add时选择对类型就好了。\n\n### QTableWidget\n<p><textarea cols=\"50\" rows=\"15\" name=\"code\" class=\"python\">#!/usr/bin/env python\n#coding=utf-8\nfrom PyQt4.QtGui  import *\nfrom PyQt4.QtCore import *  \nclass MyDialog(QDialog):\n    def __init__(self, parent=None):\n        super(MyDialog, self).__init__(parent)\n        self.MyTable = QTableWidget(4,3)\n        self.MyTable.setHorizontalHeaderLabels(['姓名','身高','体重'])\n        \n        newItem = QTableWidgetItem(&quot;松鼠&quot;)\n        self.MyTable.setItem(0, 0, newItem)\n        \n        newItem = QTableWidgetItem(&quot;10cm&quot;)\n        self.MyTable.setItem(0, 1, newItem)\n        \n        newItem = QTableWidgetItem(&quot;60g&quot;)\n        self.MyTable.setItem(0, 2, newItem) \n      \n        layout = QHBoxLayout()\n        layout.addWidget(self.MyTable)\n        self.setLayout(layout)    \n        \n        \nif __name__ == '__main__':\n    import sys\n    app = QApplication(sys.argv)\n    myWindow = MyDialog()\n    myWindow.show()\n    sys.exit(app.exec_())       </textarea>\n </p>\n<p>&nbsp;</p>\n其中：\n<p>self.MyTable = QTableWidget(4,3)&nbsp; 构造了一个QTableWidget的对象，并且设置为4行，3列</p><p>self.MyTable.setHorizontalHeaderLabels(['姓名','身高','体重']) 则设置表格的表头</p><p>newItem = QTableWidgetItem(&quot;松鼠&quot;)&nbsp;&nbsp; 则是生成了一个QTableWidgetItem的对象，并让其名为&ldquo;松鼠&rdquo;</p><p>self.MyTable.setItem(0, 0, newItem)&nbsp;&nbsp;&nbsp; 将刚才生成的Item加载到第0行、0列处\n<p>&nbsp;</p>\n<p>这样一个简单的QTableWidget就构造完成了。</p>\n<p><img src=\"http://hi.csdn.net/attachment/201103/1/0_1298961912c0mN.gif\" alt=\"\" />\n</p>\n\n感谢[来源](view-source:blog.csdn.net/vah101/article/details/6215066)\n\n\n### 以上。  之后的设置字体，底色，之类用的的时候再说。\n其中： \n##### 合并单元格效果的实现：\n    self.MyTable.setSpan(0, 0, 3, 1) \n    # 其参数为： 要改变单元格的 1行数  2列数     要合并的 3行数  4列数\n\n##### 表格表头的显示与隐藏\n    self.MyTable.verticalHeader().setVisible(False)\n    self.MyTable.horizontalHeader().setVisible(False)\n    # 默认显示 且标号为： 1，2，3…\n#### 空位填补\n    .addStretch()\n    # 不过比较鸡肋，还是下面的调整窗口显示比例比较好玩\n##### 调整各部分显示比例\n    QVBoxLayout*  layout = new QVBoxLayout;\n    QPushButton*      btn = new QPushButton;\n    QTableWidget*     tableWidget = new QTableWidget;   \n    QHBoxLayout*     h_layout = new QHBoxLayout;\n    layout.addWidget(btn);\n    layout.addWidget(tableWidget);\n    layout.addLayout(h_layout)\n    layout->setStretchFactor(btn, 1);\n    layout->setStretchFactor(tableWidget, 2);\n    layout->setStretchFactor(h_layout, 2);\n上面是C++  所以下面的是俺的Python：\n    hbox1[i].addWidget(self.buttonBox[i])\n        hbox1[i].addWidget(self.paramMonitor[i])  \n        hbox1[i].addWidget(self.varMonitor[i])\n        # 设置显示比例\n        hbox1[i].setStretchFactor(self.buttonBox[i], 3)\n        hbox1[i].setStretchFactor(self.paramMonitor[i], 3)\n        hbox1[i].setStretchFactor(self.varMonitor[i], 4)\n\n### 列表内添加按钮\n<p>1、定义添加按钮的方法</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: #008080\"> 1</span> <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 列表内添加按钮</span>\n<span style=\"color: #008080\"> 2</span>     <span style=\"color: #0000ff\">def</span><span style=\"color: #000000\"> buttonForRow(self,id):\n</span><span style=\"color: #008080\"> 3</span>         widget=<span style=\"color: #000000\">QWidget()\n</span><span style=\"color: #008080\"> 4</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 修改</span>\n<span style=\"color: #008080\"> 5</span>         updateBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">修改</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\"> 6</span>         updateBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\"> 7</span> <span style=\"color: #800000\">                                          background-color : NavajoWhite;\n</span><span style=\"color: #008080\"> 8</span> <span style=\"color: #800000\">                                          height : 30px;\n</span><span style=\"color: #008080\"> 9</span> <span style=\"color: #800000\">                                          border-style: outset;\n</span><span style=\"color: #008080\">10</span> <span style=\"color: #800000\">                                          font : 13px  </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">11</span> \n<span style=\"color: #008080\">12</span>         updateBtn.clicked.connect(<span style=\"color: #0000ff\">lambda</span><span style=\"color: #000000\">:self.updateTable(id))\n</span><span style=\"color: #008080\">13</span> \n<span style=\"color: #008080\">14</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 查看</span>\n<span style=\"color: #008080\">15</span>         viewBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">查看</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">16</span>         viewBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\">17</span> <span style=\"color: #800000\">                                  background-color : DarkSeaGreen;\n</span><span style=\"color: #008080\">18</span> <span style=\"color: #800000\">                                  height : 30px;\n</span><span style=\"color: #008080\">19</span> <span style=\"color: #800000\">                                  border-style: outset;\n</span><span style=\"color: #008080\">20</span> <span style=\"color: #800000\">                                  font : 13px; </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">21</span> \n<span style=\"color: #008080\">22</span>         viewBtn.clicked.connect(<span style=\"color: #0000ff\">lambda</span><span style=\"color: #000000\">: self.viewTable(id))\n</span><span style=\"color: #008080\">23</span> \n<span style=\"color: #008080\">24</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 删除</span>\n<span style=\"color: #008080\">25</span>         deleteBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">删除</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">26</span>         deleteBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\">27</span> <span style=\"color: #800000\">                                    background-color : LightCoral;\n</span><span style=\"color: #008080\">28</span> <span style=\"color: #800000\">                                    height : 30px;\n</span><span style=\"color: #008080\">29</span> <span style=\"color: #800000\">                                    border-style: outset;\n</span><span style=\"color: #008080\">30</span> <span style=\"color: #800000\">                                    font : 13px; </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">31</span> \n<span style=\"color: #008080\">32</span> \n<span style=\"color: #008080\">33</span>         hLayout =<span style=\"color: #000000\"> QHBoxLayout()\n</span><span style=\"color: #008080\">34</span> <span style=\"color: #000000\">        hLayout.addWidget(updateBtn)\n</span><span style=\"color: #008080\">35</span> <span style=\"color: #000000\">        hLayout.addWidget(viewBtn)\n</span><span style=\"color: #008080\">36</span> <span style=\"color: #000000\">        hLayout.addWidget(deleteBtn)\n</span><span style=\"color: #008080\">37</span>         hLayout.setContentsMargins(5,2,5,2<span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">38</span> <span style=\"color: #000000\">        widget.setLayout(hLayout)\n</span><span style=\"color: #008080\">39</span>         <span style=\"color: #0000ff\">return</span> widget</pre>\n</div>\n<p>2、在向tableWidget里添加数据时插入即可</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: #008080\">1</span> <span style=\"color: #0000ff\">for</span> row_number, row_data <span style=\"color: #0000ff\">in</span><span style=\"color: #000000\"> enumerate(rsdata):\n</span><span style=\"color: #008080\">2</span> <span style=\"color: #000000\">    self.ui.tableWidget.insertRow(row_number)\n</span><span style=\"color: #008080\">3</span>     <span style=\"color: #0000ff\">for</span> i <span style=\"color: #0000ff\">in</span> range(len(row_data)+1<span style=\"color: #000000\">):\n</span><span style=\"color: #008080\">4</span>         <span style=\"color: #0000ff\">if</span> i&lt;<span style=\"color: #000000\">len(row_data):\n</span><span style=\"color: #008080\">5</span> <span style=\"color: #000000\">            self.ui.tableWidget.setItem(row_number, i, QtWidgets.QTableWidgetItem(str(row_data[i])))\n</span><span style=\"color: #008080\">6</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 添加按钮</span>\n<span style=\"color: #008080\">7</span>         <span style=\"color: #0000ff\">if</span> i==<span style=\"color: #000000\">len(row_data):\n</span><span style=\"color: #008080\">8</span>             <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 传入当前id</span>\n<span style=\"color: #008080\">9</span>             self.ui.tableWidget.setCellWidget(row_number, i,self.buttonForRow(str(row_data[0])))</pre>\n</div>\n<p>效果图</p>\n<p><img src=\"http://images2017.cnblogs.com/blog/896442/201709/896442-20170907222902741-300228307.png\" alt=\"\"></p>\n\n就像以上显示的那样[来源](https://www.cnblogs.com/yuanlipu/p/7492260.html)\n\n#### 值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox 对其进行排版，简直……\n\n        labelSymbol = QtGui.QLabel(self.CtaEngine.strategyTickDict[self.name])\n        buttonInit[i] = QtGui.QPushButton(u'初始化')\n        buttonStart[i] = QtGui.QPushButton(u'启动')\n        buttonStop[i] = QtGui.QPushButton(u'停止')\n        buttonUpdate[i] = QtGui.QPushButton(u'更新参数')\n        buttonSave[i] = QtGui.QPushButton(u'保存参数')\n\n        buttonInit[i].clicked.connect(partial(self.init, i))\n        buttonStart[i].clicked.connect(partial(self.start, i))\n        buttonStop[i].clicked.connect(partial(self.stop, i))\n        buttonUpdate[i].clicked.connect(partial(self.updateParams,i))\n        buttonSave[i].clicked.connect(partial(self.saveParams, i))\n    \n    hbox1[i] = QtGui.QHBoxLayout()\n        ##参数设置显示\n        hbox2[i] = QtGui.QHBoxLayout()\n            #hbox1[i].addWidget(labelSymbol)\n            #hbox1[i].addWidget(buttonInit[i])\n            #hbox1[i].addWidget(buttonStart[i])\n            #hbox1[i].addWidget(buttonStop[i])\n            #hbox1[i].addWidget(buttonUpdate[i])\n            #hbox1[i].addWidget(buttonSave[i])\n\n        self.buttonBox[i].setCellWidget(0, 0, buttonInit[i])\n        self.buttonBox[i].setCellWidget(0, 1, buttonStart[i])\n        self.buttonBox[i].setCellWidget(0, 2, buttonStop[i])\n\n\n---\n\n---\n\n---\n\n#### 组件之间连接信号\n    # classA(QtGui.QTableWidget):\n    #   pass\n    classA.itemDoubleClicked.connect(classB.actionFunction)\n    # 这样单纯调用还是可以的，但是数据传输… 就得继续研究一下了。\n##### 关闭事件退出提示\n    def closeEvent(self, event):\n        reply = QtGui.QMessageBox.question(self, 'Message',\"Are you sure to quit?\",\n\n            QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)\n    if reply == QtGui.QMessageBox.Yes:\n        event.accept()\n    else:\n        event.ignore()\n函数放置位置就是主窗口类下就好。\n\n### QTableWidget 清除数据\n    def updateData(self, data): #（缩进没问题吧…🙏）\n            \"\"\"将数据更新到表格中\"\"\"\n        \n        if self.name == u'RiskAlarmWidget':\n            pass\n\n        if self.updateBeginAction:\n            data = self.updateBeginAction(data)\n            if not data:\n               return\n\n        if self.updateAction:\n            self.updateAction(data)\n        else:\n            if isinstance(data, unicode) and self.dataKey:\n                # 删除模式\n                key = data\n                if key in self.dataDict:\n                    d = self.dataDict[key]\n                    row = d[self.headerList[0]].row()\n                    self.removeRow(row)\n                    del self.dataDict[key]\n            else:\n                # 如果设置了dataKey，则采用存量更新模式\n                if self.InsertMode:\n                    # 如果允许了排序功能，则插入数据前必须关闭，否则插入新的数据会变乱\n                    if self._sorting:\n                        self.setSortingEnabled(False)\n\n                    newRow = 0 if self.InsertTopRow else self.rowCount()\n                    self.insertRow(newRow)\n\n                    for n, header in enumerate(self.headerList):\n\n                        content = self.getContents(data, header)\n                        cellType = self.headerDict[header]['cellType']\n                        cell = cellType(content)\n                \n                        if self.font:\n                            cell.setFont(self.font)\n\n                        if self._saveData:            \n                            cell.data = data                \n\n                        self.setItem(newRow, n, cell)  \n        \n                    # 重新打开排序\n                    if self._sorting:\n                        self.setSortingEnabled(True)\n          \n                else:            \n                    key = data.__getattribute__(self.dataKey)\n                    if key in self.dataDict:\n                        # 已存在数据字典中，则更新相关单元格\n                        d = self.dataDict[key]\n                        for header in self.headerList:\n\n                            content = self.getContents(data, header)\n                            cell = d[header]\n                            cell.setContent(content)\n\n                            if self._saveData:            \n                # 如果设置了保存数据对象，则进行对象保存\n                                cell.data = data                    \n                    else:\n                        # 如果允许了排序功能，则插入数据前必须关闭，\n            #否则插入新的数据会变乱\n                        if self._sorting:\n                            self.setSortingEnabled(False)\n                        # 不存在数据字典中，插入新行，创建此行单元格\n                        newRow = 0 if self.InsertTopRow else self.rowCount()\n                        self.insertRow(newRow)\n \n                        d = {}\n                        for n, header in enumerate(self.headerList):\n                        \n                            content = self.getContents(data, header)\n                            cellType = self.headerDict[header]['cellType']\n                            cell = cellType(content)\n                    \n                            if self.font:\n                                cell.setFont(self.font)  \n                # 如果设置了特殊字体，则进行单元格设置\n                    \n                            if self._saveData:            \n                # 如果设置了保存数据对象，则进行对象保存\n                                cell.data = data\n                        \n                            self.setItem(newRow, n, cell)\n                            d[header] = cell\n                        self.dataDict[key] = d\n        \n                        # 重新打开排序\n                        if self._sorting:\n                            self.setSortingEnabled(True)\n\n        if self.updateAfterAction:\n            self.updateAfterAction(data)            \n\n插入后数据需要清理只需`.clearContentsText()`，这样是清理数据但保留表格，方便更新内容。`.clear()`则清理数据以及表格方便<font color=75362109>重新</font>填入新的内容\n\n---\n\n#### 调用Windows程序\n    import win32api\n        path = 'D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json'\n        win32api.ShellExecute(0, 'open', 'notepad.exe', path, '', 1)\n    # 使用记事本打开此文件\n\n---\n\n#### Json\n    with open('D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json', 'r') as f:\n    setting = json.load(f)\n    self.userID = str(setting['userID'])\n    self.password = str(setting['password'])\n\n---\n\n---\n\n### 信号槽（传输额外参数）\n一般来说，比如一个按钮吧。 在链接点击信号与槽时`buttonInit[i].clicked.connect(partial(self.init, i))`就完事了。然而，当循环创建按钮，对应同样的槽函数，只是需要执行的变量有区别时，就需要传输额外的参数。\n这时，方法有二：\n\n环境：\n\npython2.7.8\n\npyqt 4.11.1\n### 一： 使用lambda表达式\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyForm</span><span class=\"hljs-params\">(QMainWindow)</span>:</span>  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(MyForm, self).__init__(parent)  \n        button1 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button2 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button1.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">1</span>))  \n        button2.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">2</span>))  \n\n        layout = QHBoxLayout()  \n        layout.addWidget(button1)  \n        layout.addWidget(button2)  \n\n        main_frame = QWidget()  \n        main_frame.setLayout(layout)  \n\n        self.setCentralWidget(main_frame)  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_button</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        print(<span class=\"hljs-string\">'Button {0} clicked'</span>.format(n))  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:  \n    <span class=\"hljs-keyword\">import</span> sys  \n    app = QApplication(sys.argv)  \n    form = MyForm()  \n    form.show()  \n    app.exec_()  </code></pre>\n\n<p>解释一下，on_button是怎样处理从两个按钮传来的信号。我们使用lambda传递按钮数字给槽，也可以传递任何其他东西—甚至是按钮组件本身（假如，槽打算把传递信号的按钮修改为不可用）</p>\n\n### 二： 使用functools里的partial函数\n<pre class=\"prettyprint\"><code class=\"language-python hljs \">button1.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">1</span>))  \nbutton2.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">2</span>))  </code></pre>\n\n<p>《Rapid GUI Program with Python and QT》 P143例子。</p>\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial  \n<span class=\"hljs-keyword\">import</span> sys  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Bu1</span><span class=\"hljs-params\">(QWidget)</span>:</span>  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(Bu1, self).__init__(parent)  \n        <span class=\"hljs-comment\">#水平盒式布局  </span>\n        layout = QHBoxLayout()  \n        <span class=\"hljs-comment\">#显示  </span>\n        self.lbl = QLabel(<span class=\"hljs-string\">'no button is pressed'</span>)  \n        <span class=\"hljs-comment\">#循环5个按钮  </span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">5</span>):  \n            but = QPushButton(str(i))  \n            layout.addWidget(but)  \n            <span class=\"hljs-comment\">#信号和槽连接  </span>\n            but.clicked.connect(self.cliked)  \n\n        <span class=\"hljs-comment\">#使用封装，lambda  </span>\n        but = QPushButton(<span class=\"hljs-string\">'5'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_click(<span class=\"hljs-string\">'5'</span>))  \n        <span class=\"hljs-comment\">#使用个who变量，结果不正常，显示 False is pressed  </span>\n        <span class=\"hljs-comment\">#but.clicked.connect(lambda who=\"5\": self.on_click(who))  </span>\n\n        <span class=\"hljs-comment\">#使用封装，partial函数  </span>\n        but = QPushButton(<span class=\"hljs-string\">'6'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(partial(self.on_click, <span class=\"hljs-string\">'6'</span>))  \n\n        layout.addWidget(self.lbl)  \n        <span class=\"hljs-comment\">#设置布局  </span>\n        self.setLayout(layout)  \n\n    <span class=\"hljs-comment\">#传递额外参数     </span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">cliked</span><span class=\"hljs-params\">(self)</span>:</span>  \n        bu = self.sender()  \n        <span class=\"hljs-keyword\">if</span> isinstance(bu, QPushButton):  \n            self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % bu.text())  \n        <span class=\"hljs-keyword\">else</span>:  \n            self.lbl.setText(<span class=\"hljs-string\">'no effect'</span>)  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_click</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % n)  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:          \n    app = QApplication(sys.argv)  \n    bu =Bu1()  \n    bu.show()  \n    app.exec_()   </code></pre>\n\n三：感谢[来源](http://blog.csdn.net/fengyu09/article/details/39498777) \n\n---\n\n###\n\n\n## PyQt + echarts图表\n    echarts绘制图标会在本地保存一个`html`文件，所以使用`PyQt`将之作为一个网页页面加载即可：\n    from PyQt4.QtWebKit import *\n    from PyQt4.QtGui  import *\n    from PyQt4.QtCore import * \n    from pyecharts import Kline, Page\n    def creat_charts():\n        page = Page()\n        chart_init = {\n                \"width\": 1600,\n                \"height\": 900,\n            }\n        chart = Kline(\"K 线图\", **chart_init)\n        chart.add(\"日K\", [\"2017/7/{}\".format(i + 1) for i in range(31)], v1)\n        page.add(chart)\n        return page\n    creat_charts()_render()     # 生成`render.html`文件\n    self.view = QWebView()\n    self.create_charts().render()\n    url = QUrl(\"render.html\")   # 需要加载`QUrl`使用字符串转化\n    self.view.load(url)\n\n\n## addWidget\n在窗口布局的时候这玩意至关重要，因为要先创建一个框架，再往里面塞东西。而塞的方法就是`addWidget`。所以简单记录一下小年这一天经常用到的环套：\n\n    hbox = QtGui.QHBoxLayout()\n        vbox = QtGui.QVBoxLayout()\n    可以通过`addWidget`来塞入`QtGui.QWidget`, `QtGui.QGroupBox`, \n`QtGui.QTableWidget`  ,`QScrollArea`等\n    还可以`addWidget`诸如`QtGui.QPushButton`, `QtGui.QLabel`, \n`QtGui.QComboBox`, `QtGui.QLineEdit`等小部件\n\n    `hbox`和`vbox`可以通过`addLayout`互相添加（这两个是 框架，即页面上的“骨头”。来摆设“肌肉”->“Widget”、\"Box\"等的）\n    当然最后要显示谁，需要`self.setLayout(hbox)` 而支持`setLayout`少不了有\n`QWidget`,`QScrollArea`, 所以它们好像能够无限互相套下去…\n\n### 小部件的方法\n其实哪些方法也不用记…打开`QtDesigner`直接搜索拖拽，然后看右边的清单就行了，但这几个还是记录下来吧，在网上找太累了~\n    \n`QtGui.QComboBox`: `addItems`, '''addItem`, `currentText`\n`QtGui.QSpinBox`: `setValue`, \n\n\n### QString2String\n    def QString2PyString(self, qStr):   \n        #QString，如果内容是中文，则直接使用会有问题，要转换成 python\n        #string\n        return unicode(qStr.toUtf8(), 'utf-8', 'ignore')\n\n## QLineEdit\n之所以放这么后面是因为我觉得这东西没什么好说的，也就是一个输入框嘛，但因为出现在后面所以说是现在发现了其中有趣的东西。那就是最近在做输入密码的时候想要限制，但在程序中去判断显然并不是什么有意思的事情。然后想起来输入的时候可以直接限制住啊。于是采用了`textChanged`去`connect`一个函数，来动态监测输入。但在调试中打开错了窗口所以以为没有用就找了其他的方法。那就是在初始化的时候直接卡死，结果没有找到设置长度的.set***但找到了现用的`setValidator`其配合正则表达式的食用方法如下：\n    \n    import re\n        a = QtCore.QRegExp(\"[A-Za-z]{0,5}[1-9][0-9]{0,5}\")\n        a = QtCore.QRegExp(\"[a-zA-Z0-9]{0,12}$\")\n        self.txtPasswd.setValidator(QtGui.QRegExpValidator(a))\n    # emm,很显然，把a替换成limitRule就要顺眼一些了。\n\n不过<font color=#ff3bffl9>值得注意的是：</font>如果用`setText`将其它字符写进这个编辑小框框中的话，那么这个框框的规则就会被打破然后随便写。但要是`setText`的内容没有超出所规定的形式之外的话，那么规则照旧，依然执行。\n\n# PyQtGraph:\n[Link](http://www.pyqtgraph.org/)\n\n    import pyqtgraph.examples  \n    pyqtgraph.examples.run()  \n","source":"_posts/notes/noteOfgui.md","raw":"---\ntitle: 图形化界面 （Python Gui）\ndate: 2017-07-01 21:20\nmodified: 2018-05-15 11:40\ncategory: [note, Gui, learning]\ntags: [python, pyqt, Gui]\nslug: notesPython\n---\nauthor:Ian\n\n# Python GUI 💽\n## PyQt\n![qt](https://tse4-mm.cn.bing.net/th/id/OIP.J4_Nqrcc0x7slHHUFwKLSQHaI6?pid=ImgDet&rs=1 \"tmp\")\n\n官方说明文档：<http://pyqt.sourceforge.net/Docs/PyQt4/index.html>\n照例，先贴网址： <http://www.qaulau.com/books/PyQt4_Tutorial/index.html>\n\n## 画界面\n    #PyQt4使用designer.exe\n    import os \n    for root, dirs, files in os.walk('.'): \n        for file in files: \n            if file.endswith('.ui'): \n                os.system('pyuic4 -o ui_%s.py %s' % (file.rsplit('.', 1)[0], file))\n            elif file.endswith('.qrc'): \n                os.system('pyrcc4 -o %s_rc.py %s' % (file.rsplit('.', 1)[0], file))\n    # 注：在Win中调用pyrcc4 可能无法识别该命令，即使添加到环境变量也不行，而是\n    #pyrcc.exe才能调用简直……\n#### 窗口设置\n    resize(8, 8)\n    setWindowTitle(u'标题')\n#### 获取图标\n    def getIcon(filename):\n    \"\"\" 获取图标 \"\"\"\n        fileInfo = Qt.QFileInfo(filename) \n        fileIcon = Qt.QFileIconProvider() \n        icon = QtGui.QIcon(fileIcon.icon(fileInfo)) \n        return icon  \n    使用时：\n    self.setWindowIcon(getIcon('../hi/app.ico'))\n\n---\n\n##### Dock\n    widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.“dock标题”, QtCore.Qt.RightDockWidgetArea)\n    # 方向有： `RightDockWidgetArea`,`BottomDockWidgetArea`,`LeftDockWidgetArea`\n    # 创建dock窗口\n    # 可利用\n    self.tabifyDockWidget(dockMarketM, dockAllDataM)\n    来合并同一个方向上的dock\n    \n    # 此下还没看… \n    dockTradeM.raise_()\n    dockPositionM.raise_()\n    \n    # 连接组件之间的信号\n    widgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition)\n        \n    # 保存默认设置\n    self.saveWindowSettings('default')\n\n其实现函数为：\n\"\"\"创建停靠组件\"\"\"\n\n    def createDock(self, widgetClass, widgetName, widgetArea):\n        widget = widgetClass(self.mainEngine, self.eventEngine) \n        dock = QtGui.QDockWidget(widgetName)\n        dock.setWidget(widget)\n        dock.setObjectName(widgetName)\n        dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable)\n        self.addDockWidget(widgetArea, dock)\n        return widget, dock\n> 再本质一点的东西为：\n\n    widget1 = Ha(self)\n    dock = QtGui.QDockWidget('haha')\n    dock.setObjectName('ha1')\n    dock.setWidget(widget1)\n    dock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable)\n    self.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock)\n\n#### 动作\n    exit = QtGui.QAction(QtGui.QIcon('hello.ico'), 'exit', self)\n    exit.setShortcut('Ctrl+Q')\n    exit.setStatusTip('Exit application')\n    # 图标、文字、快捷键、提示信息\n    \n    menubar = self.menuBar()\n    file = menubar.addMenu('&File')\n    file.addAction(exit)\n    # 创建目录和工具栏，将动作添加进去。工具栏同理\n\n### 定位布局\n#### 绝对定位\n    label1 = QtGui.QLabel(u'绝对定位', self)\n    label1.move(15, 60)\n    # 创建、移动到显示位置\n\n#### 框布局 及 布局元素平均分布\n    okButton = QtGui.QPushButton(\"OK\")\n    cancelButton = QtGui.QPushButton(\"Cancel\")\n    # 创建按钮\n\n    hbox = QtGui.QHBoxLayout()\n    hbox.addStretch(1)\n    hbox.addWidget(okButton)        # 增加组件\n    hbox.addWidget(cancelButton)\n    # 创建水平栏\n    hbox.addStretch()   # 平均分布\n    \n    vbox = QtGui.QVBoxLayout()\n    vbox.addStretch(1)\n    # 创建竖列\n\n    vbox.addLayout(hbox)\n    # 将水平栏插入竖列\n    self.setLayout(vbox)     \n    # 显示最终竖列\n注意一下add时选择对类型就好了。\n\n### QTableWidget\n<p><textarea cols=\"50\" rows=\"15\" name=\"code\" class=\"python\">#!/usr/bin/env python\n#coding=utf-8\nfrom PyQt4.QtGui  import *\nfrom PyQt4.QtCore import *  \nclass MyDialog(QDialog):\n    def __init__(self, parent=None):\n        super(MyDialog, self).__init__(parent)\n        self.MyTable = QTableWidget(4,3)\n        self.MyTable.setHorizontalHeaderLabels(['姓名','身高','体重'])\n        \n        newItem = QTableWidgetItem(&quot;松鼠&quot;)\n        self.MyTable.setItem(0, 0, newItem)\n        \n        newItem = QTableWidgetItem(&quot;10cm&quot;)\n        self.MyTable.setItem(0, 1, newItem)\n        \n        newItem = QTableWidgetItem(&quot;60g&quot;)\n        self.MyTable.setItem(0, 2, newItem) \n      \n        layout = QHBoxLayout()\n        layout.addWidget(self.MyTable)\n        self.setLayout(layout)    \n        \n        \nif __name__ == '__main__':\n    import sys\n    app = QApplication(sys.argv)\n    myWindow = MyDialog()\n    myWindow.show()\n    sys.exit(app.exec_())       </textarea>\n </p>\n<p>&nbsp;</p>\n其中：\n<p>self.MyTable = QTableWidget(4,3)&nbsp; 构造了一个QTableWidget的对象，并且设置为4行，3列</p><p>self.MyTable.setHorizontalHeaderLabels(['姓名','身高','体重']) 则设置表格的表头</p><p>newItem = QTableWidgetItem(&quot;松鼠&quot;)&nbsp;&nbsp; 则是生成了一个QTableWidgetItem的对象，并让其名为&ldquo;松鼠&rdquo;</p><p>self.MyTable.setItem(0, 0, newItem)&nbsp;&nbsp;&nbsp; 将刚才生成的Item加载到第0行、0列处\n<p>&nbsp;</p>\n<p>这样一个简单的QTableWidget就构造完成了。</p>\n<p><img src=\"http://hi.csdn.net/attachment/201103/1/0_1298961912c0mN.gif\" alt=\"\" />\n</p>\n\n感谢[来源](view-source:blog.csdn.net/vah101/article/details/6215066)\n\n\n### 以上。  之后的设置字体，底色，之类用的的时候再说。\n其中： \n##### 合并单元格效果的实现：\n    self.MyTable.setSpan(0, 0, 3, 1) \n    # 其参数为： 要改变单元格的 1行数  2列数     要合并的 3行数  4列数\n\n##### 表格表头的显示与隐藏\n    self.MyTable.verticalHeader().setVisible(False)\n    self.MyTable.horizontalHeader().setVisible(False)\n    # 默认显示 且标号为： 1，2，3…\n#### 空位填补\n    .addStretch()\n    # 不过比较鸡肋，还是下面的调整窗口显示比例比较好玩\n##### 调整各部分显示比例\n    QVBoxLayout*  layout = new QVBoxLayout;\n    QPushButton*      btn = new QPushButton;\n    QTableWidget*     tableWidget = new QTableWidget;   \n    QHBoxLayout*     h_layout = new QHBoxLayout;\n    layout.addWidget(btn);\n    layout.addWidget(tableWidget);\n    layout.addLayout(h_layout)\n    layout->setStretchFactor(btn, 1);\n    layout->setStretchFactor(tableWidget, 2);\n    layout->setStretchFactor(h_layout, 2);\n上面是C++  所以下面的是俺的Python：\n    hbox1[i].addWidget(self.buttonBox[i])\n        hbox1[i].addWidget(self.paramMonitor[i])  \n        hbox1[i].addWidget(self.varMonitor[i])\n        # 设置显示比例\n        hbox1[i].setStretchFactor(self.buttonBox[i], 3)\n        hbox1[i].setStretchFactor(self.paramMonitor[i], 3)\n        hbox1[i].setStretchFactor(self.varMonitor[i], 4)\n\n### 列表内添加按钮\n<p>1、定义添加按钮的方法</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: #008080\"> 1</span> <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 列表内添加按钮</span>\n<span style=\"color: #008080\"> 2</span>     <span style=\"color: #0000ff\">def</span><span style=\"color: #000000\"> buttonForRow(self,id):\n</span><span style=\"color: #008080\"> 3</span>         widget=<span style=\"color: #000000\">QWidget()\n</span><span style=\"color: #008080\"> 4</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 修改</span>\n<span style=\"color: #008080\"> 5</span>         updateBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">修改</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\"> 6</span>         updateBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\"> 7</span> <span style=\"color: #800000\">                                          background-color : NavajoWhite;\n</span><span style=\"color: #008080\"> 8</span> <span style=\"color: #800000\">                                          height : 30px;\n</span><span style=\"color: #008080\"> 9</span> <span style=\"color: #800000\">                                          border-style: outset;\n</span><span style=\"color: #008080\">10</span> <span style=\"color: #800000\">                                          font : 13px  </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">11</span> \n<span style=\"color: #008080\">12</span>         updateBtn.clicked.connect(<span style=\"color: #0000ff\">lambda</span><span style=\"color: #000000\">:self.updateTable(id))\n</span><span style=\"color: #008080\">13</span> \n<span style=\"color: #008080\">14</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 查看</span>\n<span style=\"color: #008080\">15</span>         viewBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">查看</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">16</span>         viewBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\">17</span> <span style=\"color: #800000\">                                  background-color : DarkSeaGreen;\n</span><span style=\"color: #008080\">18</span> <span style=\"color: #800000\">                                  height : 30px;\n</span><span style=\"color: #008080\">19</span> <span style=\"color: #800000\">                                  border-style: outset;\n</span><span style=\"color: #008080\">20</span> <span style=\"color: #800000\">                                  font : 13px; </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">21</span> \n<span style=\"color: #008080\">22</span>         viewBtn.clicked.connect(<span style=\"color: #0000ff\">lambda</span><span style=\"color: #000000\">: self.viewTable(id))\n</span><span style=\"color: #008080\">23</span> \n<span style=\"color: #008080\">24</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 删除</span>\n<span style=\"color: #008080\">25</span>         deleteBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">删除</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">26</span>         deleteBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\">27</span> <span style=\"color: #800000\">                                    background-color : LightCoral;\n</span><span style=\"color: #008080\">28</span> <span style=\"color: #800000\">                                    height : 30px;\n</span><span style=\"color: #008080\">29</span> <span style=\"color: #800000\">                                    border-style: outset;\n</span><span style=\"color: #008080\">30</span> <span style=\"color: #800000\">                                    font : 13px; </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">31</span> \n<span style=\"color: #008080\">32</span> \n<span style=\"color: #008080\">33</span>         hLayout =<span style=\"color: #000000\"> QHBoxLayout()\n</span><span style=\"color: #008080\">34</span> <span style=\"color: #000000\">        hLayout.addWidget(updateBtn)\n</span><span style=\"color: #008080\">35</span> <span style=\"color: #000000\">        hLayout.addWidget(viewBtn)\n</span><span style=\"color: #008080\">36</span> <span style=\"color: #000000\">        hLayout.addWidget(deleteBtn)\n</span><span style=\"color: #008080\">37</span>         hLayout.setContentsMargins(5,2,5,2<span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">38</span> <span style=\"color: #000000\">        widget.setLayout(hLayout)\n</span><span style=\"color: #008080\">39</span>         <span style=\"color: #0000ff\">return</span> widget</pre>\n</div>\n<p>2、在向tableWidget里添加数据时插入即可</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: #008080\">1</span> <span style=\"color: #0000ff\">for</span> row_number, row_data <span style=\"color: #0000ff\">in</span><span style=\"color: #000000\"> enumerate(rsdata):\n</span><span style=\"color: #008080\">2</span> <span style=\"color: #000000\">    self.ui.tableWidget.insertRow(row_number)\n</span><span style=\"color: #008080\">3</span>     <span style=\"color: #0000ff\">for</span> i <span style=\"color: #0000ff\">in</span> range(len(row_data)+1<span style=\"color: #000000\">):\n</span><span style=\"color: #008080\">4</span>         <span style=\"color: #0000ff\">if</span> i&lt;<span style=\"color: #000000\">len(row_data):\n</span><span style=\"color: #008080\">5</span> <span style=\"color: #000000\">            self.ui.tableWidget.setItem(row_number, i, QtWidgets.QTableWidgetItem(str(row_data[i])))\n</span><span style=\"color: #008080\">6</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 添加按钮</span>\n<span style=\"color: #008080\">7</span>         <span style=\"color: #0000ff\">if</span> i==<span style=\"color: #000000\">len(row_data):\n</span><span style=\"color: #008080\">8</span>             <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 传入当前id</span>\n<span style=\"color: #008080\">9</span>             self.ui.tableWidget.setCellWidget(row_number, i,self.buttonForRow(str(row_data[0])))</pre>\n</div>\n<p>效果图</p>\n<p><img src=\"http://images2017.cnblogs.com/blog/896442/201709/896442-20170907222902741-300228307.png\" alt=\"\"></p>\n\n就像以上显示的那样[来源](https://www.cnblogs.com/yuanlipu/p/7492260.html)\n\n#### 值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox 对其进行排版，简直……\n\n        labelSymbol = QtGui.QLabel(self.CtaEngine.strategyTickDict[self.name])\n        buttonInit[i] = QtGui.QPushButton(u'初始化')\n        buttonStart[i] = QtGui.QPushButton(u'启动')\n        buttonStop[i] = QtGui.QPushButton(u'停止')\n        buttonUpdate[i] = QtGui.QPushButton(u'更新参数')\n        buttonSave[i] = QtGui.QPushButton(u'保存参数')\n\n        buttonInit[i].clicked.connect(partial(self.init, i))\n        buttonStart[i].clicked.connect(partial(self.start, i))\n        buttonStop[i].clicked.connect(partial(self.stop, i))\n        buttonUpdate[i].clicked.connect(partial(self.updateParams,i))\n        buttonSave[i].clicked.connect(partial(self.saveParams, i))\n    \n    hbox1[i] = QtGui.QHBoxLayout()\n        ##参数设置显示\n        hbox2[i] = QtGui.QHBoxLayout()\n            #hbox1[i].addWidget(labelSymbol)\n            #hbox1[i].addWidget(buttonInit[i])\n            #hbox1[i].addWidget(buttonStart[i])\n            #hbox1[i].addWidget(buttonStop[i])\n            #hbox1[i].addWidget(buttonUpdate[i])\n            #hbox1[i].addWidget(buttonSave[i])\n\n        self.buttonBox[i].setCellWidget(0, 0, buttonInit[i])\n        self.buttonBox[i].setCellWidget(0, 1, buttonStart[i])\n        self.buttonBox[i].setCellWidget(0, 2, buttonStop[i])\n\n\n---\n\n---\n\n---\n\n#### 组件之间连接信号\n    # classA(QtGui.QTableWidget):\n    #   pass\n    classA.itemDoubleClicked.connect(classB.actionFunction)\n    # 这样单纯调用还是可以的，但是数据传输… 就得继续研究一下了。\n##### 关闭事件退出提示\n    def closeEvent(self, event):\n        reply = QtGui.QMessageBox.question(self, 'Message',\"Are you sure to quit?\",\n\n            QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)\n    if reply == QtGui.QMessageBox.Yes:\n        event.accept()\n    else:\n        event.ignore()\n函数放置位置就是主窗口类下就好。\n\n### QTableWidget 清除数据\n    def updateData(self, data): #（缩进没问题吧…🙏）\n            \"\"\"将数据更新到表格中\"\"\"\n        \n        if self.name == u'RiskAlarmWidget':\n            pass\n\n        if self.updateBeginAction:\n            data = self.updateBeginAction(data)\n            if not data:\n               return\n\n        if self.updateAction:\n            self.updateAction(data)\n        else:\n            if isinstance(data, unicode) and self.dataKey:\n                # 删除模式\n                key = data\n                if key in self.dataDict:\n                    d = self.dataDict[key]\n                    row = d[self.headerList[0]].row()\n                    self.removeRow(row)\n                    del self.dataDict[key]\n            else:\n                # 如果设置了dataKey，则采用存量更新模式\n                if self.InsertMode:\n                    # 如果允许了排序功能，则插入数据前必须关闭，否则插入新的数据会变乱\n                    if self._sorting:\n                        self.setSortingEnabled(False)\n\n                    newRow = 0 if self.InsertTopRow else self.rowCount()\n                    self.insertRow(newRow)\n\n                    for n, header in enumerate(self.headerList):\n\n                        content = self.getContents(data, header)\n                        cellType = self.headerDict[header]['cellType']\n                        cell = cellType(content)\n                \n                        if self.font:\n                            cell.setFont(self.font)\n\n                        if self._saveData:            \n                            cell.data = data                \n\n                        self.setItem(newRow, n, cell)  \n        \n                    # 重新打开排序\n                    if self._sorting:\n                        self.setSortingEnabled(True)\n          \n                else:            \n                    key = data.__getattribute__(self.dataKey)\n                    if key in self.dataDict:\n                        # 已存在数据字典中，则更新相关单元格\n                        d = self.dataDict[key]\n                        for header in self.headerList:\n\n                            content = self.getContents(data, header)\n                            cell = d[header]\n                            cell.setContent(content)\n\n                            if self._saveData:            \n                # 如果设置了保存数据对象，则进行对象保存\n                                cell.data = data                    \n                    else:\n                        # 如果允许了排序功能，则插入数据前必须关闭，\n            #否则插入新的数据会变乱\n                        if self._sorting:\n                            self.setSortingEnabled(False)\n                        # 不存在数据字典中，插入新行，创建此行单元格\n                        newRow = 0 if self.InsertTopRow else self.rowCount()\n                        self.insertRow(newRow)\n \n                        d = {}\n                        for n, header in enumerate(self.headerList):\n                        \n                            content = self.getContents(data, header)\n                            cellType = self.headerDict[header]['cellType']\n                            cell = cellType(content)\n                    \n                            if self.font:\n                                cell.setFont(self.font)  \n                # 如果设置了特殊字体，则进行单元格设置\n                    \n                            if self._saveData:            \n                # 如果设置了保存数据对象，则进行对象保存\n                                cell.data = data\n                        \n                            self.setItem(newRow, n, cell)\n                            d[header] = cell\n                        self.dataDict[key] = d\n        \n                        # 重新打开排序\n                        if self._sorting:\n                            self.setSortingEnabled(True)\n\n        if self.updateAfterAction:\n            self.updateAfterAction(data)            \n\n插入后数据需要清理只需`.clearContentsText()`，这样是清理数据但保留表格，方便更新内容。`.clear()`则清理数据以及表格方便<font color=75362109>重新</font>填入新的内容\n\n---\n\n#### 调用Windows程序\n    import win32api\n        path = 'D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json'\n        win32api.ShellExecute(0, 'open', 'notepad.exe', path, '', 1)\n    # 使用记事本打开此文件\n\n---\n\n#### Json\n    with open('D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json', 'r') as f:\n    setting = json.load(f)\n    self.userID = str(setting['userID'])\n    self.password = str(setting['password'])\n\n---\n\n---\n\n### 信号槽（传输额外参数）\n一般来说，比如一个按钮吧。 在链接点击信号与槽时`buttonInit[i].clicked.connect(partial(self.init, i))`就完事了。然而，当循环创建按钮，对应同样的槽函数，只是需要执行的变量有区别时，就需要传输额外的参数。\n这时，方法有二：\n\n环境：\n\npython2.7.8\n\npyqt 4.11.1\n### 一： 使用lambda表达式\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyForm</span><span class=\"hljs-params\">(QMainWindow)</span>:</span>  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(MyForm, self).__init__(parent)  \n        button1 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button2 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button1.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">1</span>))  \n        button2.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">2</span>))  \n\n        layout = QHBoxLayout()  \n        layout.addWidget(button1)  \n        layout.addWidget(button2)  \n\n        main_frame = QWidget()  \n        main_frame.setLayout(layout)  \n\n        self.setCentralWidget(main_frame)  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_button</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        print(<span class=\"hljs-string\">'Button {0} clicked'</span>.format(n))  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:  \n    <span class=\"hljs-keyword\">import</span> sys  \n    app = QApplication(sys.argv)  \n    form = MyForm()  \n    form.show()  \n    app.exec_()  </code></pre>\n\n<p>解释一下，on_button是怎样处理从两个按钮传来的信号。我们使用lambda传递按钮数字给槽，也可以传递任何其他东西—甚至是按钮组件本身（假如，槽打算把传递信号的按钮修改为不可用）</p>\n\n### 二： 使用functools里的partial函数\n<pre class=\"prettyprint\"><code class=\"language-python hljs \">button1.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">1</span>))  \nbutton2.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">2</span>))  </code></pre>\n\n<p>《Rapid GUI Program with Python and QT》 P143例子。</p>\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial  \n<span class=\"hljs-keyword\">import</span> sys  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Bu1</span><span class=\"hljs-params\">(QWidget)</span>:</span>  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(Bu1, self).__init__(parent)  \n        <span class=\"hljs-comment\">#水平盒式布局  </span>\n        layout = QHBoxLayout()  \n        <span class=\"hljs-comment\">#显示  </span>\n        self.lbl = QLabel(<span class=\"hljs-string\">'no button is pressed'</span>)  \n        <span class=\"hljs-comment\">#循环5个按钮  </span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">5</span>):  \n            but = QPushButton(str(i))  \n            layout.addWidget(but)  \n            <span class=\"hljs-comment\">#信号和槽连接  </span>\n            but.clicked.connect(self.cliked)  \n\n        <span class=\"hljs-comment\">#使用封装，lambda  </span>\n        but = QPushButton(<span class=\"hljs-string\">'5'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_click(<span class=\"hljs-string\">'5'</span>))  \n        <span class=\"hljs-comment\">#使用个who变量，结果不正常，显示 False is pressed  </span>\n        <span class=\"hljs-comment\">#but.clicked.connect(lambda who=\"5\": self.on_click(who))  </span>\n\n        <span class=\"hljs-comment\">#使用封装，partial函数  </span>\n        but = QPushButton(<span class=\"hljs-string\">'6'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(partial(self.on_click, <span class=\"hljs-string\">'6'</span>))  \n\n        layout.addWidget(self.lbl)  \n        <span class=\"hljs-comment\">#设置布局  </span>\n        self.setLayout(layout)  \n\n    <span class=\"hljs-comment\">#传递额外参数     </span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">cliked</span><span class=\"hljs-params\">(self)</span>:</span>  \n        bu = self.sender()  \n        <span class=\"hljs-keyword\">if</span> isinstance(bu, QPushButton):  \n            self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % bu.text())  \n        <span class=\"hljs-keyword\">else</span>:  \n            self.lbl.setText(<span class=\"hljs-string\">'no effect'</span>)  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_click</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % n)  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:          \n    app = QApplication(sys.argv)  \n    bu =Bu1()  \n    bu.show()  \n    app.exec_()   </code></pre>\n\n三：感谢[来源](http://blog.csdn.net/fengyu09/article/details/39498777) \n\n---\n\n###\n\n\n## PyQt + echarts图表\n    echarts绘制图标会在本地保存一个`html`文件，所以使用`PyQt`将之作为一个网页页面加载即可：\n    from PyQt4.QtWebKit import *\n    from PyQt4.QtGui  import *\n    from PyQt4.QtCore import * \n    from pyecharts import Kline, Page\n    def creat_charts():\n        page = Page()\n        chart_init = {\n                \"width\": 1600,\n                \"height\": 900,\n            }\n        chart = Kline(\"K 线图\", **chart_init)\n        chart.add(\"日K\", [\"2017/7/{}\".format(i + 1) for i in range(31)], v1)\n        page.add(chart)\n        return page\n    creat_charts()_render()     # 生成`render.html`文件\n    self.view = QWebView()\n    self.create_charts().render()\n    url = QUrl(\"render.html\")   # 需要加载`QUrl`使用字符串转化\n    self.view.load(url)\n\n\n## addWidget\n在窗口布局的时候这玩意至关重要，因为要先创建一个框架，再往里面塞东西。而塞的方法就是`addWidget`。所以简单记录一下小年这一天经常用到的环套：\n\n    hbox = QtGui.QHBoxLayout()\n        vbox = QtGui.QVBoxLayout()\n    可以通过`addWidget`来塞入`QtGui.QWidget`, `QtGui.QGroupBox`, \n`QtGui.QTableWidget`  ,`QScrollArea`等\n    还可以`addWidget`诸如`QtGui.QPushButton`, `QtGui.QLabel`, \n`QtGui.QComboBox`, `QtGui.QLineEdit`等小部件\n\n    `hbox`和`vbox`可以通过`addLayout`互相添加（这两个是 框架，即页面上的“骨头”。来摆设“肌肉”->“Widget”、\"Box\"等的）\n    当然最后要显示谁，需要`self.setLayout(hbox)` 而支持`setLayout`少不了有\n`QWidget`,`QScrollArea`, 所以它们好像能够无限互相套下去…\n\n### 小部件的方法\n其实哪些方法也不用记…打开`QtDesigner`直接搜索拖拽，然后看右边的清单就行了，但这几个还是记录下来吧，在网上找太累了~\n    \n`QtGui.QComboBox`: `addItems`, '''addItem`, `currentText`\n`QtGui.QSpinBox`: `setValue`, \n\n\n### QString2String\n    def QString2PyString(self, qStr):   \n        #QString，如果内容是中文，则直接使用会有问题，要转换成 python\n        #string\n        return unicode(qStr.toUtf8(), 'utf-8', 'ignore')\n\n## QLineEdit\n之所以放这么后面是因为我觉得这东西没什么好说的，也就是一个输入框嘛，但因为出现在后面所以说是现在发现了其中有趣的东西。那就是最近在做输入密码的时候想要限制，但在程序中去判断显然并不是什么有意思的事情。然后想起来输入的时候可以直接限制住啊。于是采用了`textChanged`去`connect`一个函数，来动态监测输入。但在调试中打开错了窗口所以以为没有用就找了其他的方法。那就是在初始化的时候直接卡死，结果没有找到设置长度的.set***但找到了现用的`setValidator`其配合正则表达式的食用方法如下：\n    \n    import re\n        a = QtCore.QRegExp(\"[A-Za-z]{0,5}[1-9][0-9]{0,5}\")\n        a = QtCore.QRegExp(\"[a-zA-Z0-9]{0,12}$\")\n        self.txtPasswd.setValidator(QtGui.QRegExpValidator(a))\n    # emm,很显然，把a替换成limitRule就要顺眼一些了。\n\n不过<font color=#ff3bffl9>值得注意的是：</font>如果用`setText`将其它字符写进这个编辑小框框中的话，那么这个框框的规则就会被打破然后随便写。但要是`setText`的内容没有超出所规定的形式之外的话，那么规则照旧，依然执行。\n\n# PyQtGraph:\n[Link](http://www.pyqtgraph.org/)\n\n    import pyqtgraph.examples  \n    pyqtgraph.examples.run()  \n","published":1,"updated":"2021-05-08T02:56:02.688Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9js005du3yqa1uyd6tw","content":"<p>author:Ian</p>\n<h1 id=\"Python-GUI-💽\"><a href=\"#Python-GUI-💽\" class=\"headerlink\" title=\"Python GUI 💽\"></a>Python GUI 💽</h1><h2 id=\"PyQt\"><a href=\"#PyQt\" class=\"headerlink\" title=\"PyQt\"></a>PyQt</h2><p><img src=\"https://tse4-mm.cn.bing.net/th/id/OIP.J4_Nqrcc0x7slHHUFwKLSQHaI6?pid=ImgDet&rs=1\" alt=\"qt\" title=\"tmp\"></p>\n<p>官方说明文档：<a href=\"http://pyqt.sourceforge.net/Docs/PyQt4/index.html\">http://pyqt.sourceforge.net/Docs/PyQt4/index.html</a><br>照例，先贴网址： <a href=\"http://www.qaulau.com/books/PyQt4_Tutorial/index.html\">http://www.qaulau.com/books/PyQt4_Tutorial/index.html</a></p>\n<h2 id=\"画界面\"><a href=\"#画界面\" class=\"headerlink\" title=\"画界面\"></a>画界面</h2><pre><code>#PyQt4使用designer.exe\nimport os \nfor root, dirs, files in os.walk(&#39;.&#39;): \n    for file in files: \n        if file.endswith(&#39;.ui&#39;): \n            os.system(&#39;pyuic4 -o ui_%s.py %s&#39; % (file.rsplit(&#39;.&#39;, 1)[0], file))\n        elif file.endswith(&#39;.qrc&#39;): \n            os.system(&#39;pyrcc4 -o %s_rc.py %s&#39; % (file.rsplit(&#39;.&#39;, 1)[0], file))\n# 注：在Win中调用pyrcc4 可能无法识别该命令，即使添加到环境变量也不行，而是\n#pyrcc.exe才能调用简直……\n</code></pre>\n<h4 id=\"窗口设置\"><a href=\"#窗口设置\" class=\"headerlink\" title=\"窗口设置\"></a>窗口设置</h4><pre><code>resize(8, 8)\nsetWindowTitle(u&#39;标题&#39;)\n</code></pre>\n<h4 id=\"获取图标\"><a href=\"#获取图标\" class=\"headerlink\" title=\"获取图标\"></a>获取图标</h4><pre><code>def getIcon(filename):\n&quot;&quot;&quot; 获取图标 &quot;&quot;&quot;\n    fileInfo = Qt.QFileInfo(filename) \n    fileIcon = Qt.QFileIconProvider() \n    icon = QtGui.QIcon(fileIcon.icon(fileInfo)) \n    return icon  \n使用时：\nself.setWindowIcon(getIcon(&#39;../hi/app.ico&#39;))\n</code></pre>\n<hr>\n<h5 id=\"Dock\"><a href=\"#Dock\" class=\"headerlink\" title=\"Dock\"></a>Dock</h5><pre><code>widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.“dock标题”, QtCore.Qt.RightDockWidgetArea)\n# 方向有： `RightDockWidgetArea`,`BottomDockWidgetArea`,`LeftDockWidgetArea`\n# 创建dock窗口\n# 可利用\nself.tabifyDockWidget(dockMarketM, dockAllDataM)\n来合并同一个方向上的dock\n\n# 此下还没看… \ndockTradeM.raise_()\ndockPositionM.raise_()\n\n# 连接组件之间的信号\nwidgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition)\n    \n# 保存默认设置\nself.saveWindowSettings(&#39;default&#39;)\n</code></pre>\n<p>其实现函数为：<br>“””创建停靠组件”””</p>\n<pre><code>def createDock(self, widgetClass, widgetName, widgetArea):\n    widget = widgetClass(self.mainEngine, self.eventEngine) \n    dock = QtGui.QDockWidget(widgetName)\n    dock.setWidget(widget)\n    dock.setObjectName(widgetName)\n    dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable)\n    self.addDockWidget(widgetArea, dock)\n    return widget, dock\n</code></pre>\n<blockquote>\n<p>再本质一点的东西为：</p>\n</blockquote>\n<pre><code>widget1 = Ha(self)\ndock = QtGui.QDockWidget(&#39;haha&#39;)\ndock.setObjectName(&#39;ha1&#39;)\ndock.setWidget(widget1)\ndock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable)\nself.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock)\n</code></pre>\n<h4 id=\"动作\"><a href=\"#动作\" class=\"headerlink\" title=\"动作\"></a>动作</h4><pre><code>exit = QtGui.QAction(QtGui.QIcon(&#39;hello.ico&#39;), &#39;exit&#39;, self)\nexit.setShortcut(&#39;Ctrl+Q&#39;)\nexit.setStatusTip(&#39;Exit application&#39;)\n# 图标、文字、快捷键、提示信息\n\nmenubar = self.menuBar()\nfile = menubar.addMenu(&#39;&amp;File&#39;)\nfile.addAction(exit)\n# 创建目录和工具栏，将动作添加进去。工具栏同理\n</code></pre>\n<h3 id=\"定位布局\"><a href=\"#定位布局\" class=\"headerlink\" title=\"定位布局\"></a>定位布局</h3><h4 id=\"绝对定位\"><a href=\"#绝对定位\" class=\"headerlink\" title=\"绝对定位\"></a>绝对定位</h4><pre><code>label1 = QtGui.QLabel(u&#39;绝对定位&#39;, self)\nlabel1.move(15, 60)\n# 创建、移动到显示位置\n</code></pre>\n<h4 id=\"框布局-及-布局元素平均分布\"><a href=\"#框布局-及-布局元素平均分布\" class=\"headerlink\" title=\"框布局 及 布局元素平均分布\"></a>框布局 及 布局元素平均分布</h4><pre><code>okButton = QtGui.QPushButton(&quot;OK&quot;)\ncancelButton = QtGui.QPushButton(&quot;Cancel&quot;)\n# 创建按钮\n\nhbox = QtGui.QHBoxLayout()\nhbox.addStretch(1)\nhbox.addWidget(okButton)        # 增加组件\nhbox.addWidget(cancelButton)\n# 创建水平栏\nhbox.addStretch()   # 平均分布\n\nvbox = QtGui.QVBoxLayout()\nvbox.addStretch(1)\n# 创建竖列\n\nvbox.addLayout(hbox)\n# 将水平栏插入竖列\nself.setLayout(vbox)     \n# 显示最终竖列\n</code></pre>\n<p>注意一下add时选择对类型就好了。</p>\n<h3 id=\"QTableWidget\"><a href=\"#QTableWidget\" class=\"headerlink\" title=\"QTableWidget\"></a>QTableWidget</h3><p><textarea cols=\"50\" rows=\"15\" name=\"code\" class=\"python\">#!/usr/bin/env python\n#coding=utf-8\nfrom PyQt4.QtGui  import *\nfrom PyQt4.QtCore import *  \nclass MyDialog(QDialog):\n    def __init__(self, parent=None):\n        super(MyDialog, self).__init__(parent)\n        self.MyTable = QTableWidget(4,3)\n        self.MyTable.setHorizontalHeaderLabels(['姓名','身高','体重'])\n        \n        newItem = QTableWidgetItem(&quot;松鼠&quot;)\n        self.MyTable.setItem(0, 0, newItem)\n        \n        newItem = QTableWidgetItem(&quot;10cm&quot;)\n        self.MyTable.setItem(0, 1, newItem)\n        \n        newItem = QTableWidgetItem(&quot;60g&quot;)\n        self.MyTable.setItem(0, 2, newItem) \n      \n        layout = QHBoxLayout()\n        layout.addWidget(self.MyTable)\n        self.setLayout(layout)    \n        \n        \nif __name__ == '__main__':\n    import sys\n    app = QApplication(sys.argv)\n    myWindow = MyDialog()\n    myWindow.show()\n    sys.exit(app.exec_())       </textarea>\n </p>\n<p>&nbsp;</p>\n其中：\n<p>self.MyTable = QTableWidget(4,3)&nbsp; 构造了一个QTableWidget的对象，并且设置为4行，3列</p><p>self.MyTable.setHorizontalHeaderLabels(['姓名','身高','体重']) 则设置表格的表头</p><p>newItem = QTableWidgetItem(&quot;松鼠&quot;)&nbsp;&nbsp; 则是生成了一个QTableWidgetItem的对象，并让其名为&ldquo;松鼠&rdquo;</p><p>self.MyTable.setItem(0, 0, newItem)&nbsp;&nbsp;&nbsp; 将刚才生成的Item加载到第0行、0列处\n<p>&nbsp;</p>\n<p>这样一个简单的QTableWidget就构造完成了。</p>\n<p><img src=\"http://hi.csdn.net/attachment/201103/1/0_1298961912c0mN.gif\" alt=\"\" />\n</p>\n\n<p>感谢<a href=\"view-source:blog.csdn.net/vah101/article/details/6215066\">来源</a></p>\n<h3 id=\"以上。-之后的设置字体，底色，之类用的的时候再说。\"><a href=\"#以上。-之后的设置字体，底色，之类用的的时候再说。\" class=\"headerlink\" title=\"以上。  之后的设置字体，底色，之类用的的时候再说。\"></a>以上。  之后的设置字体，底色，之类用的的时候再说。</h3><p>其中： </p>\n<h5 id=\"合并单元格效果的实现：\"><a href=\"#合并单元格效果的实现：\" class=\"headerlink\" title=\"合并单元格效果的实现：\"></a>合并单元格效果的实现：</h5><pre><code>self.MyTable.setSpan(0, 0, 3, 1) \n# 其参数为： 要改变单元格的 1行数  2列数     要合并的 3行数  4列数\n</code></pre>\n<h5 id=\"表格表头的显示与隐藏\"><a href=\"#表格表头的显示与隐藏\" class=\"headerlink\" title=\"表格表头的显示与隐藏\"></a>表格表头的显示与隐藏</h5><pre><code>self.MyTable.verticalHeader().setVisible(False)\nself.MyTable.horizontalHeader().setVisible(False)\n# 默认显示 且标号为： 1，2，3…\n</code></pre>\n<h4 id=\"空位填补\"><a href=\"#空位填补\" class=\"headerlink\" title=\"空位填补\"></a>空位填补</h4><pre><code>.addStretch()\n# 不过比较鸡肋，还是下面的调整窗口显示比例比较好玩\n</code></pre>\n<h5 id=\"调整各部分显示比例\"><a href=\"#调整各部分显示比例\" class=\"headerlink\" title=\"调整各部分显示比例\"></a>调整各部分显示比例</h5><pre><code>QVBoxLayout*  layout = new QVBoxLayout;\nQPushButton*      btn = new QPushButton;\nQTableWidget*     tableWidget = new QTableWidget;   \nQHBoxLayout*     h_layout = new QHBoxLayout;\nlayout.addWidget(btn);\nlayout.addWidget(tableWidget);\nlayout.addLayout(h_layout)\nlayout-&gt;setStretchFactor(btn, 1);\nlayout-&gt;setStretchFactor(tableWidget, 2);\nlayout-&gt;setStretchFactor(h_layout, 2);\n</code></pre>\n<p>上面是C++  所以下面的是俺的Python：<br>    hbox1[i].addWidget(self.buttonBox[i])<br>        hbox1[i].addWidget(self.paramMonitor[i])<br>        hbox1[i].addWidget(self.varMonitor[i])<br>        # 设置显示比例<br>        hbox1[i].setStretchFactor(self.buttonBox[i], 3)<br>        hbox1[i].setStretchFactor(self.paramMonitor[i], 3)<br>        hbox1[i].setStretchFactor(self.varMonitor[i], 4)</p>\n<h3 id=\"列表内添加按钮\"><a href=\"#列表内添加按钮\" class=\"headerlink\" title=\"列表内添加按钮\"></a>列表内添加按钮</h3><p>1、定义添加按钮的方法</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: #008080\"> 1</span> <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 列表内添加按钮</span>\n<span style=\"color: #008080\"> 2</span>     <span style=\"color: #0000ff\">def</span><span style=\"color: #000000\"> buttonForRow(self,id):\n</span><span style=\"color: #008080\"> 3</span>         widget=<span style=\"color: #000000\">QWidget()\n</span><span style=\"color: #008080\"> 4</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 修改</span>\n<span style=\"color: #008080\"> 5</span>         updateBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">修改</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\"> 6</span>         updateBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\"> 7</span> <span style=\"color: #800000\">                                          background-color : NavajoWhite;\n</span><span style=\"color: #008080\"> 8</span> <span style=\"color: #800000\">                                          height : 30px;\n</span><span style=\"color: #008080\"> 9</span> <span style=\"color: #800000\">                                          border-style: outset;\n</span><span style=\"color: #008080\">10</span> <span style=\"color: #800000\">                                          font : 13px  </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">11</span> \n<span style=\"color: #008080\">12</span>         updateBtn.clicked.connect(<span style=\"color: #0000ff\">lambda</span><span style=\"color: #000000\">:self.updateTable(id))\n</span><span style=\"color: #008080\">13</span> \n<span style=\"color: #008080\">14</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 查看</span>\n<span style=\"color: #008080\">15</span>         viewBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">查看</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">16</span>         viewBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\">17</span> <span style=\"color: #800000\">                                  background-color : DarkSeaGreen;\n</span><span style=\"color: #008080\">18</span> <span style=\"color: #800000\">                                  height : 30px;\n</span><span style=\"color: #008080\">19</span> <span style=\"color: #800000\">                                  border-style: outset;\n</span><span style=\"color: #008080\">20</span> <span style=\"color: #800000\">                                  font : 13px; </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">21</span> \n<span style=\"color: #008080\">22</span>         viewBtn.clicked.connect(<span style=\"color: #0000ff\">lambda</span><span style=\"color: #000000\">: self.viewTable(id))\n</span><span style=\"color: #008080\">23</span> \n<span style=\"color: #008080\">24</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 删除</span>\n<span style=\"color: #008080\">25</span>         deleteBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">删除</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">26</span>         deleteBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\">27</span> <span style=\"color: #800000\">                                    background-color : LightCoral;\n</span><span style=\"color: #008080\">28</span> <span style=\"color: #800000\">                                    height : 30px;\n</span><span style=\"color: #008080\">29</span> <span style=\"color: #800000\">                                    border-style: outset;\n</span><span style=\"color: #008080\">30</span> <span style=\"color: #800000\">                                    font : 13px; </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">31</span> \n<span style=\"color: #008080\">32</span> \n<span style=\"color: #008080\">33</span>         hLayout =<span style=\"color: #000000\"> QHBoxLayout()\n</span><span style=\"color: #008080\">34</span> <span style=\"color: #000000\">        hLayout.addWidget(updateBtn)\n</span><span style=\"color: #008080\">35</span> <span style=\"color: #000000\">        hLayout.addWidget(viewBtn)\n</span><span style=\"color: #008080\">36</span> <span style=\"color: #000000\">        hLayout.addWidget(deleteBtn)\n</span><span style=\"color: #008080\">37</span>         hLayout.setContentsMargins(5,2,5,2<span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">38</span> <span style=\"color: #000000\">        widget.setLayout(hLayout)\n</span><span style=\"color: #008080\">39</span>         <span style=\"color: #0000ff\">return</span> widget</pre>\n</div>\n<p>2、在向tableWidget里添加数据时插入即可</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: #008080\">1</span> <span style=\"color: #0000ff\">for</span> row_number, row_data <span style=\"color: #0000ff\">in</span><span style=\"color: #000000\"> enumerate(rsdata):\n</span><span style=\"color: #008080\">2</span> <span style=\"color: #000000\">    self.ui.tableWidget.insertRow(row_number)\n</span><span style=\"color: #008080\">3</span>     <span style=\"color: #0000ff\">for</span> i <span style=\"color: #0000ff\">in</span> range(len(row_data)+1<span style=\"color: #000000\">):\n</span><span style=\"color: #008080\">4</span>         <span style=\"color: #0000ff\">if</span> i&lt;<span style=\"color: #000000\">len(row_data):\n</span><span style=\"color: #008080\">5</span> <span style=\"color: #000000\">            self.ui.tableWidget.setItem(row_number, i, QtWidgets.QTableWidgetItem(str(row_data[i])))\n</span><span style=\"color: #008080\">6</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 添加按钮</span>\n<span style=\"color: #008080\">7</span>         <span style=\"color: #0000ff\">if</span> i==<span style=\"color: #000000\">len(row_data):\n</span><span style=\"color: #008080\">8</span>             <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 传入当前id</span>\n<span style=\"color: #008080\">9</span>             self.ui.tableWidget.setCellWidget(row_number, i,self.buttonForRow(str(row_data[0])))</pre>\n</div>\n<p>效果图</p>\n<p><img src=\"http://images2017.cnblogs.com/blog/896442/201709/896442-20170907222902741-300228307.png\" alt=\"\"></p>\n\n<p>就像以上显示的那样<a href=\"https://www.cnblogs.com/yuanlipu/p/7492260.html\">来源</a></p>\n<h4 id=\"值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox-对其进行排版，简直……\"><a href=\"#值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox-对其进行排版，简直……\" class=\"headerlink\" title=\"值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox 对其进行排版，简直……\"></a>值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox 对其进行排版，简直……</h4><pre><code>    labelSymbol = QtGui.QLabel(self.CtaEngine.strategyTickDict[self.name])\n    buttonInit[i] = QtGui.QPushButton(u&#39;初始化&#39;)\n    buttonStart[i] = QtGui.QPushButton(u&#39;启动&#39;)\n    buttonStop[i] = QtGui.QPushButton(u&#39;停止&#39;)\n    buttonUpdate[i] = QtGui.QPushButton(u&#39;更新参数&#39;)\n    buttonSave[i] = QtGui.QPushButton(u&#39;保存参数&#39;)\n\n    buttonInit[i].clicked.connect(partial(self.init, i))\n    buttonStart[i].clicked.connect(partial(self.start, i))\n    buttonStop[i].clicked.connect(partial(self.stop, i))\n    buttonUpdate[i].clicked.connect(partial(self.updateParams,i))\n    buttonSave[i].clicked.connect(partial(self.saveParams, i))\n\nhbox1[i] = QtGui.QHBoxLayout()\n    ##参数设置显示\n    hbox2[i] = QtGui.QHBoxLayout()\n        #hbox1[i].addWidget(labelSymbol)\n        #hbox1[i].addWidget(buttonInit[i])\n        #hbox1[i].addWidget(buttonStart[i])\n        #hbox1[i].addWidget(buttonStop[i])\n        #hbox1[i].addWidget(buttonUpdate[i])\n        #hbox1[i].addWidget(buttonSave[i])\n\n    self.buttonBox[i].setCellWidget(0, 0, buttonInit[i])\n    self.buttonBox[i].setCellWidget(0, 1, buttonStart[i])\n    self.buttonBox[i].setCellWidget(0, 2, buttonStop[i])\n</code></pre>\n<hr>\n<hr>\n<hr>\n<h4 id=\"组件之间连接信号\"><a href=\"#组件之间连接信号\" class=\"headerlink\" title=\"组件之间连接信号\"></a>组件之间连接信号</h4><pre><code># classA(QtGui.QTableWidget):\n#   pass\nclassA.itemDoubleClicked.connect(classB.actionFunction)\n# 这样单纯调用还是可以的，但是数据传输… 就得继续研究一下了。\n</code></pre>\n<h5 id=\"关闭事件退出提示\"><a href=\"#关闭事件退出提示\" class=\"headerlink\" title=\"关闭事件退出提示\"></a>关闭事件退出提示</h5><pre><code>def closeEvent(self, event):\n    reply = QtGui.QMessageBox.question(self, &#39;Message&#39;,&quot;Are you sure to quit?&quot;,\n\n        QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)\nif reply == QtGui.QMessageBox.Yes:\n    event.accept()\nelse:\n    event.ignore()\n</code></pre>\n<p>函数放置位置就是主窗口类下就好。</p>\n<h3 id=\"QTableWidget-清除数据\"><a href=\"#QTableWidget-清除数据\" class=\"headerlink\" title=\"QTableWidget 清除数据\"></a>QTableWidget 清除数据</h3><pre><code>def updateData(self, data): #（缩进没问题吧…🙏）\n        &quot;&quot;&quot;将数据更新到表格中&quot;&quot;&quot;\n    \n    if self.name == u&#39;RiskAlarmWidget&#39;:\n        pass\n\n    if self.updateBeginAction:\n        data = self.updateBeginAction(data)\n        if not data:\n           return\n\n    if self.updateAction:\n        self.updateAction(data)\n    else:\n        if isinstance(data, unicode) and self.dataKey:\n            # 删除模式\n            key = data\n            if key in self.dataDict:\n                d = self.dataDict[key]\n                row = d[self.headerList[0]].row()\n                self.removeRow(row)\n                del self.dataDict[key]\n        else:\n            # 如果设置了dataKey，则采用存量更新模式\n            if self.InsertMode:\n                # 如果允许了排序功能，则插入数据前必须关闭，否则插入新的数据会变乱\n                if self._sorting:\n                    self.setSortingEnabled(False)\n\n                newRow = 0 if self.InsertTopRow else self.rowCount()\n                self.insertRow(newRow)\n\n                for n, header in enumerate(self.headerList):\n\n                    content = self.getContents(data, header)\n                    cellType = self.headerDict[header][&#39;cellType&#39;]\n                    cell = cellType(content)\n            \n                    if self.font:\n                        cell.setFont(self.font)\n\n                    if self._saveData:            \n                        cell.data = data                \n\n                    self.setItem(newRow, n, cell)  \n    \n                # 重新打开排序\n                if self._sorting:\n                    self.setSortingEnabled(True)\n      \n            else:            \n                key = data.__getattribute__(self.dataKey)\n                if key in self.dataDict:\n                    # 已存在数据字典中，则更新相关单元格\n                    d = self.dataDict[key]\n                    for header in self.headerList:\n\n                        content = self.getContents(data, header)\n                        cell = d[header]\n                        cell.setContent(content)\n\n                        if self._saveData:            \n            # 如果设置了保存数据对象，则进行对象保存\n                            cell.data = data                    \n                else:\n                    # 如果允许了排序功能，则插入数据前必须关闭，\n        #否则插入新的数据会变乱\n                    if self._sorting:\n                        self.setSortingEnabled(False)\n                    # 不存在数据字典中，插入新行，创建此行单元格\n                    newRow = 0 if self.InsertTopRow else self.rowCount()\n                    self.insertRow(newRow)\n\n                    d = &#123;&#125;\n                    for n, header in enumerate(self.headerList):\n                    \n                        content = self.getContents(data, header)\n                        cellType = self.headerDict[header][&#39;cellType&#39;]\n                        cell = cellType(content)\n                \n                        if self.font:\n                            cell.setFont(self.font)  \n            # 如果设置了特殊字体，则进行单元格设置\n                \n                        if self._saveData:            \n            # 如果设置了保存数据对象，则进行对象保存\n                            cell.data = data\n                    \n                        self.setItem(newRow, n, cell)\n                        d[header] = cell\n                    self.dataDict[key] = d\n    \n                    # 重新打开排序\n                    if self._sorting:\n                        self.setSortingEnabled(True)\n\n    if self.updateAfterAction:\n        self.updateAfterAction(data)            \n</code></pre>\n<p>插入后数据需要清理只需<code>.clearContentsText()</code>，这样是清理数据但保留表格，方便更新内容。<code>.clear()</code>则清理数据以及表格方便<font color=75362109>重新</font>填入新的内容</p>\n<hr>\n<h4 id=\"调用Windows程序\"><a href=\"#调用Windows程序\" class=\"headerlink\" title=\"调用Windows程序\"></a>调用Windows程序</h4><pre><code>import win32api\n    path = &#39;D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json&#39;\n    win32api.ShellExecute(0, &#39;open&#39;, &#39;notepad.exe&#39;, path, &#39;&#39;, 1)\n# 使用记事本打开此文件\n</code></pre>\n<hr>\n<h4 id=\"Json\"><a href=\"#Json\" class=\"headerlink\" title=\"Json\"></a>Json</h4><pre><code>with open(&#39;D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json&#39;, &#39;r&#39;) as f:\nsetting = json.load(f)\nself.userID = str(setting[&#39;userID&#39;])\nself.password = str(setting[&#39;password&#39;])\n</code></pre>\n<hr>\n<hr>\n<h3 id=\"信号槽（传输额外参数）\"><a href=\"#信号槽（传输额外参数）\" class=\"headerlink\" title=\"信号槽（传输额外参数）\"></a>信号槽（传输额外参数）</h3><p>一般来说，比如一个按钮吧。 在链接点击信号与槽时<code>buttonInit[i].clicked.connect(partial(self.init, i))</code>就完事了。然而，当循环创建按钮，对应同样的槽函数，只是需要执行的变量有区别时，就需要传输额外的参数。<br>这时，方法有二：</p>\n<p>环境：</p>\n<p>python2.7.8</p>\n<p>pyqt 4.11.1</p>\n<h3 id=\"一：-使用lambda表达式\"><a href=\"#一：-使用lambda表达式\" class=\"headerlink\" title=\"一： 使用lambda表达式\"></a>一： 使用lambda表达式</h3><pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyForm</span><span class=\"hljs-params\">(QMainWindow)</span>:</span>  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(MyForm, self).__init__(parent)  \n        button1 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button2 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button1.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">1</span>))  \n        button2.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">2</span>))  \n\n        layout = QHBoxLayout()  \n        layout.addWidget(button1)  \n        layout.addWidget(button2)  \n\n        main_frame = QWidget()  \n        main_frame.setLayout(layout)  \n\n        self.setCentralWidget(main_frame)  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_button</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        print(<span class=\"hljs-string\">'Button &#123;0&#125; clicked'</span>.format(n))  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:  \n    <span class=\"hljs-keyword\">import</span> sys  \n    app = QApplication(sys.argv)  \n    form = MyForm()  \n    form.show()  \n    app.exec_()  </code></pre>\n\n<p>解释一下，on_button是怎样处理从两个按钮传来的信号。我们使用lambda传递按钮数字给槽，也可以传递任何其他东西—甚至是按钮组件本身（假如，槽打算把传递信号的按钮修改为不可用）</p>\n\n<h3 id=\"二：-使用functools里的partial函数\"><a href=\"#二：-使用functools里的partial函数\" class=\"headerlink\" title=\"二： 使用functools里的partial函数\"></a>二： 使用functools里的partial函数</h3><pre class=\"prettyprint\"><code class=\"language-python hljs \">button1.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">1</span>))  \nbutton2.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">2</span>))  </code></pre>\n\n<p>《Rapid GUI Program with Python and QT》 P143例子。</p>\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial  \n<span class=\"hljs-keyword\">import</span> sys  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Bu1</span><span class=\"hljs-params\">(QWidget)</span>:</span>  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(Bu1, self).__init__(parent)  \n        <span class=\"hljs-comment\">#水平盒式布局  </span>\n        layout = QHBoxLayout()  \n        <span class=\"hljs-comment\">#显示  </span>\n        self.lbl = QLabel(<span class=\"hljs-string\">'no button is pressed'</span>)  \n        <span class=\"hljs-comment\">#循环5个按钮  </span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">5</span>):  \n            but = QPushButton(str(i))  \n            layout.addWidget(but)  \n            <span class=\"hljs-comment\">#信号和槽连接  </span>\n            but.clicked.connect(self.cliked)  \n\n        <span class=\"hljs-comment\">#使用封装，lambda  </span>\n        but = QPushButton(<span class=\"hljs-string\">'5'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_click(<span class=\"hljs-string\">'5'</span>))  \n        <span class=\"hljs-comment\">#使用个who变量，结果不正常，显示 False is pressed  </span>\n        <span class=\"hljs-comment\">#but.clicked.connect(lambda who=\"5\": self.on_click(who))  </span>\n\n        <span class=\"hljs-comment\">#使用封装，partial函数  </span>\n        but = QPushButton(<span class=\"hljs-string\">'6'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(partial(self.on_click, <span class=\"hljs-string\">'6'</span>))  \n\n        layout.addWidget(self.lbl)  \n        <span class=\"hljs-comment\">#设置布局  </span>\n        self.setLayout(layout)  \n\n    <span class=\"hljs-comment\">#传递额外参数     </span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">cliked</span><span class=\"hljs-params\">(self)</span>:</span>  \n        bu = self.sender()  \n        <span class=\"hljs-keyword\">if</span> isinstance(bu, QPushButton):  \n            self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % bu.text())  \n        <span class=\"hljs-keyword\">else</span>:  \n            self.lbl.setText(<span class=\"hljs-string\">'no effect'</span>)  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_click</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % n)  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:          \n    app = QApplication(sys.argv)  \n    bu =Bu1()  \n    bu.show()  \n    app.exec_()   </code></pre>\n\n<p>三：感谢<a href=\"http://blog.csdn.net/fengyu09/article/details/39498777\">来源</a> </p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h2 id=\"PyQt-echarts图表\"><a href=\"#PyQt-echarts图表\" class=\"headerlink\" title=\"PyQt + echarts图表\"></a>PyQt + echarts图表</h2><pre><code>echarts绘制图标会在本地保存一个`html`文件，所以使用`PyQt`将之作为一个网页页面加载即可：\nfrom PyQt4.QtWebKit import *\nfrom PyQt4.QtGui  import *\nfrom PyQt4.QtCore import * \nfrom pyecharts import Kline, Page\ndef creat_charts():\n    page = Page()\n    chart_init = &#123;\n            &quot;width&quot;: 1600,\n            &quot;height&quot;: 900,\n        &#125;\n    chart = Kline(&quot;K 线图&quot;, **chart_init)\n    chart.add(&quot;日K&quot;, [&quot;2017/7/&#123;&#125;&quot;.format(i + 1) for i in range(31)], v1)\n    page.add(chart)\n    return page\ncreat_charts()_render()     # 生成`render.html`文件\nself.view = QWebView()\nself.create_charts().render()\nurl = QUrl(&quot;render.html&quot;)   # 需要加载`QUrl`使用字符串转化\nself.view.load(url)\n</code></pre>\n<h2 id=\"addWidget\"><a href=\"#addWidget\" class=\"headerlink\" title=\"addWidget\"></a>addWidget</h2><p>在窗口布局的时候这玩意至关重要，因为要先创建一个框架，再往里面塞东西。而塞的方法就是<code>addWidget</code>。所以简单记录一下小年这一天经常用到的环套：</p>\n<pre><code>hbox = QtGui.QHBoxLayout()\n    vbox = QtGui.QVBoxLayout()\n可以通过`addWidget`来塞入`QtGui.QWidget`, `QtGui.QGroupBox`, \n</code></pre>\n<p><code>QtGui.QTableWidget</code>  ,<code>QScrollArea</code>等<br>    还可以<code>addWidget</code>诸如<code>QtGui.QPushButton</code>, <code>QtGui.QLabel</code>,<br><code>QtGui.QComboBox</code>, <code>QtGui.QLineEdit</code>等小部件</p>\n<pre><code>`hbox`和`vbox`可以通过`addLayout`互相添加（这两个是 框架，即页面上的“骨头”。来摆设“肌肉”-&gt;“Widget”、&quot;Box&quot;等的）\n当然最后要显示谁，需要`self.setLayout(hbox)` 而支持`setLayout`少不了有\n</code></pre>\n<p><code>QWidget</code>,<code>QScrollArea</code>, 所以它们好像能够无限互相套下去…</p>\n<h3 id=\"小部件的方法\"><a href=\"#小部件的方法\" class=\"headerlink\" title=\"小部件的方法\"></a>小部件的方法</h3><p>其实哪些方法也不用记…打开<code>QtDesigner</code>直接搜索拖拽，然后看右边的清单就行了，但这几个还是记录下来吧，在网上找太累了~</p>\n<p><code>QtGui.QComboBox</code>: <code>addItems</code>, ‘’’addItem<code>, </code>currentText<code> </code>QtGui.QSpinBox<code>: </code>setValue`, </p>\n<h3 id=\"QString2String\"><a href=\"#QString2String\" class=\"headerlink\" title=\"QString2String\"></a>QString2String</h3><pre><code>def QString2PyString(self, qStr):   \n    #QString，如果内容是中文，则直接使用会有问题，要转换成 python\n    #string\n    return unicode(qStr.toUtf8(), &#39;utf-8&#39;, &#39;ignore&#39;)\n</code></pre>\n<h2 id=\"QLineEdit\"><a href=\"#QLineEdit\" class=\"headerlink\" title=\"QLineEdit\"></a>QLineEdit</h2><p>之所以放这么后面是因为我觉得这东西没什么好说的，也就是一个输入框嘛，但因为出现在后面所以说是现在发现了其中有趣的东西。那就是最近在做输入密码的时候想要限制，但在程序中去判断显然并不是什么有意思的事情。然后想起来输入的时候可以直接限制住啊。于是采用了<code>textChanged</code>去<code>connect</code>一个函数，来动态监测输入。但在调试中打开错了窗口所以以为没有用就找了其他的方法。那就是在初始化的时候直接卡死，结果没有找到设置长度的.set***但找到了现用的<code>setValidator</code>其配合正则表达式的食用方法如下：</p>\n<pre><code>import re\n    a = QtCore.QRegExp(&quot;[A-Za-z]&#123;0,5&#125;[1-9][0-9]&#123;0,5&#125;&quot;)\n    a = QtCore.QRegExp(&quot;[a-zA-Z0-9]&#123;0,12&#125;$&quot;)\n    self.txtPasswd.setValidator(QtGui.QRegExpValidator(a))\n# emm,很显然，把a替换成limitRule就要顺眼一些了。\n</code></pre>\n<p>不过<font color=#ff3bffl9>值得注意的是：</font>如果用<code>setText</code>将其它字符写进这个编辑小框框中的话，那么这个框框的规则就会被打破然后随便写。但要是<code>setText</code>的内容没有超出所规定的形式之外的话，那么规则照旧，依然执行。</p>\n<h1 id=\"PyQtGraph\"><a href=\"#PyQtGraph\" class=\"headerlink\" title=\"PyQtGraph:\"></a>PyQtGraph:</h1><p><a href=\"http://www.pyqtgraph.org/\">Link</a></p>\n<pre><code>import pyqtgraph.examples  \npyqtgraph.examples.run()  \n</code></pre>\n","site":{"data":{}},"excerpt":"","more":"<p>author:Ian</p>\n<h1 id=\"Python-GUI-💽\"><a href=\"#Python-GUI-💽\" class=\"headerlink\" title=\"Python GUI 💽\"></a>Python GUI 💽</h1><h2 id=\"PyQt\"><a href=\"#PyQt\" class=\"headerlink\" title=\"PyQt\"></a>PyQt</h2><p><img src=\"https://tse4-mm.cn.bing.net/th/id/OIP.J4_Nqrcc0x7slHHUFwKLSQHaI6?pid=ImgDet&rs=1\" alt=\"qt\" title=\"tmp\"></p>\n<p>官方说明文档：<a href=\"http://pyqt.sourceforge.net/Docs/PyQt4/index.html\">http://pyqt.sourceforge.net/Docs/PyQt4/index.html</a><br>照例，先贴网址： <a href=\"http://www.qaulau.com/books/PyQt4_Tutorial/index.html\">http://www.qaulau.com/books/PyQt4_Tutorial/index.html</a></p>\n<h2 id=\"画界面\"><a href=\"#画界面\" class=\"headerlink\" title=\"画界面\"></a>画界面</h2><pre><code>#PyQt4使用designer.exe\nimport os \nfor root, dirs, files in os.walk(&#39;.&#39;): \n    for file in files: \n        if file.endswith(&#39;.ui&#39;): \n            os.system(&#39;pyuic4 -o ui_%s.py %s&#39; % (file.rsplit(&#39;.&#39;, 1)[0], file))\n        elif file.endswith(&#39;.qrc&#39;): \n            os.system(&#39;pyrcc4 -o %s_rc.py %s&#39; % (file.rsplit(&#39;.&#39;, 1)[0], file))\n# 注：在Win中调用pyrcc4 可能无法识别该命令，即使添加到环境变量也不行，而是\n#pyrcc.exe才能调用简直……\n</code></pre>\n<h4 id=\"窗口设置\"><a href=\"#窗口设置\" class=\"headerlink\" title=\"窗口设置\"></a>窗口设置</h4><pre><code>resize(8, 8)\nsetWindowTitle(u&#39;标题&#39;)\n</code></pre>\n<h4 id=\"获取图标\"><a href=\"#获取图标\" class=\"headerlink\" title=\"获取图标\"></a>获取图标</h4><pre><code>def getIcon(filename):\n&quot;&quot;&quot; 获取图标 &quot;&quot;&quot;\n    fileInfo = Qt.QFileInfo(filename) \n    fileIcon = Qt.QFileIconProvider() \n    icon = QtGui.QIcon(fileIcon.icon(fileInfo)) \n    return icon  \n使用时：\nself.setWindowIcon(getIcon(&#39;../hi/app.ico&#39;))\n</code></pre>\n<hr>\n<h5 id=\"Dock\"><a href=\"#Dock\" class=\"headerlink\" title=\"Dock\"></a>Dock</h5><pre><code>widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.“dock标题”, QtCore.Qt.RightDockWidgetArea)\n# 方向有： `RightDockWidgetArea`,`BottomDockWidgetArea`,`LeftDockWidgetArea`\n# 创建dock窗口\n# 可利用\nself.tabifyDockWidget(dockMarketM, dockAllDataM)\n来合并同一个方向上的dock\n\n# 此下还没看… \ndockTradeM.raise_()\ndockPositionM.raise_()\n\n# 连接组件之间的信号\nwidgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition)\n    \n# 保存默认设置\nself.saveWindowSettings(&#39;default&#39;)\n</code></pre>\n<p>其实现函数为：<br>“””创建停靠组件”””</p>\n<pre><code>def createDock(self, widgetClass, widgetName, widgetArea):\n    widget = widgetClass(self.mainEngine, self.eventEngine) \n    dock = QtGui.QDockWidget(widgetName)\n    dock.setWidget(widget)\n    dock.setObjectName(widgetName)\n    dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable)\n    self.addDockWidget(widgetArea, dock)\n    return widget, dock\n</code></pre>\n<blockquote>\n<p>再本质一点的东西为：</p>\n</blockquote>\n<pre><code>widget1 = Ha(self)\ndock = QtGui.QDockWidget(&#39;haha&#39;)\ndock.setObjectName(&#39;ha1&#39;)\ndock.setWidget(widget1)\ndock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable)\nself.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock)\n</code></pre>\n<h4 id=\"动作\"><a href=\"#动作\" class=\"headerlink\" title=\"动作\"></a>动作</h4><pre><code>exit = QtGui.QAction(QtGui.QIcon(&#39;hello.ico&#39;), &#39;exit&#39;, self)\nexit.setShortcut(&#39;Ctrl+Q&#39;)\nexit.setStatusTip(&#39;Exit application&#39;)\n# 图标、文字、快捷键、提示信息\n\nmenubar = self.menuBar()\nfile = menubar.addMenu(&#39;&amp;File&#39;)\nfile.addAction(exit)\n# 创建目录和工具栏，将动作添加进去。工具栏同理\n</code></pre>\n<h3 id=\"定位布局\"><a href=\"#定位布局\" class=\"headerlink\" title=\"定位布局\"></a>定位布局</h3><h4 id=\"绝对定位\"><a href=\"#绝对定位\" class=\"headerlink\" title=\"绝对定位\"></a>绝对定位</h4><pre><code>label1 = QtGui.QLabel(u&#39;绝对定位&#39;, self)\nlabel1.move(15, 60)\n# 创建、移动到显示位置\n</code></pre>\n<h4 id=\"框布局-及-布局元素平均分布\"><a href=\"#框布局-及-布局元素平均分布\" class=\"headerlink\" title=\"框布局 及 布局元素平均分布\"></a>框布局 及 布局元素平均分布</h4><pre><code>okButton = QtGui.QPushButton(&quot;OK&quot;)\ncancelButton = QtGui.QPushButton(&quot;Cancel&quot;)\n# 创建按钮\n\nhbox = QtGui.QHBoxLayout()\nhbox.addStretch(1)\nhbox.addWidget(okButton)        # 增加组件\nhbox.addWidget(cancelButton)\n# 创建水平栏\nhbox.addStretch()   # 平均分布\n\nvbox = QtGui.QVBoxLayout()\nvbox.addStretch(1)\n# 创建竖列\n\nvbox.addLayout(hbox)\n# 将水平栏插入竖列\nself.setLayout(vbox)     \n# 显示最终竖列\n</code></pre>\n<p>注意一下add时选择对类型就好了。</p>\n<h3 id=\"QTableWidget\"><a href=\"#QTableWidget\" class=\"headerlink\" title=\"QTableWidget\"></a>QTableWidget</h3><p><textarea cols=\"50\" rows=\"15\" name=\"code\" class=\"python\">#!/usr/bin/env python\n#coding=utf-8\nfrom PyQt4.QtGui  import *\nfrom PyQt4.QtCore import *  \nclass MyDialog(QDialog):\n    def __init__(self, parent=None):\n        super(MyDialog, self).__init__(parent)\n        self.MyTable = QTableWidget(4,3)\n        self.MyTable.setHorizontalHeaderLabels(['姓名','身高','体重'])\n        \n        newItem = QTableWidgetItem(&quot;松鼠&quot;)\n        self.MyTable.setItem(0, 0, newItem)\n        \n        newItem = QTableWidgetItem(&quot;10cm&quot;)\n        self.MyTable.setItem(0, 1, newItem)\n        \n        newItem = QTableWidgetItem(&quot;60g&quot;)\n        self.MyTable.setItem(0, 2, newItem) \n      \n        layout = QHBoxLayout()\n        layout.addWidget(self.MyTable)\n        self.setLayout(layout)    \n        \n        \nif __name__ == '__main__':\n    import sys\n    app = QApplication(sys.argv)\n    myWindow = MyDialog()\n    myWindow.show()\n    sys.exit(app.exec_())       </textarea>\n </p>\n<p>&nbsp;</p>\n其中：\n<p>self.MyTable = QTableWidget(4,3)&nbsp; 构造了一个QTableWidget的对象，并且设置为4行，3列</p><p>self.MyTable.setHorizontalHeaderLabels(['姓名','身高','体重']) 则设置表格的表头</p><p>newItem = QTableWidgetItem(&quot;松鼠&quot;)&nbsp;&nbsp; 则是生成了一个QTableWidgetItem的对象，并让其名为&ldquo;松鼠&rdquo;</p><p>self.MyTable.setItem(0, 0, newItem)&nbsp;&nbsp;&nbsp; 将刚才生成的Item加载到第0行、0列处\n<p>&nbsp;</p>\n<p>这样一个简单的QTableWidget就构造完成了。</p>\n<p><img src=\"http://hi.csdn.net/attachment/201103/1/0_1298961912c0mN.gif\" alt=\"\" />\n</p>\n\n<p>感谢<a href=\"view-source:blog.csdn.net/vah101/article/details/6215066\">来源</a></p>\n<h3 id=\"以上。-之后的设置字体，底色，之类用的的时候再说。\"><a href=\"#以上。-之后的设置字体，底色，之类用的的时候再说。\" class=\"headerlink\" title=\"以上。  之后的设置字体，底色，之类用的的时候再说。\"></a>以上。  之后的设置字体，底色，之类用的的时候再说。</h3><p>其中： </p>\n<h5 id=\"合并单元格效果的实现：\"><a href=\"#合并单元格效果的实现：\" class=\"headerlink\" title=\"合并单元格效果的实现：\"></a>合并单元格效果的实现：</h5><pre><code>self.MyTable.setSpan(0, 0, 3, 1) \n# 其参数为： 要改变单元格的 1行数  2列数     要合并的 3行数  4列数\n</code></pre>\n<h5 id=\"表格表头的显示与隐藏\"><a href=\"#表格表头的显示与隐藏\" class=\"headerlink\" title=\"表格表头的显示与隐藏\"></a>表格表头的显示与隐藏</h5><pre><code>self.MyTable.verticalHeader().setVisible(False)\nself.MyTable.horizontalHeader().setVisible(False)\n# 默认显示 且标号为： 1，2，3…\n</code></pre>\n<h4 id=\"空位填补\"><a href=\"#空位填补\" class=\"headerlink\" title=\"空位填补\"></a>空位填补</h4><pre><code>.addStretch()\n# 不过比较鸡肋，还是下面的调整窗口显示比例比较好玩\n</code></pre>\n<h5 id=\"调整各部分显示比例\"><a href=\"#调整各部分显示比例\" class=\"headerlink\" title=\"调整各部分显示比例\"></a>调整各部分显示比例</h5><pre><code>QVBoxLayout*  layout = new QVBoxLayout;\nQPushButton*      btn = new QPushButton;\nQTableWidget*     tableWidget = new QTableWidget;   \nQHBoxLayout*     h_layout = new QHBoxLayout;\nlayout.addWidget(btn);\nlayout.addWidget(tableWidget);\nlayout.addLayout(h_layout)\nlayout-&gt;setStretchFactor(btn, 1);\nlayout-&gt;setStretchFactor(tableWidget, 2);\nlayout-&gt;setStretchFactor(h_layout, 2);\n</code></pre>\n<p>上面是C++  所以下面的是俺的Python：<br>    hbox1[i].addWidget(self.buttonBox[i])<br>        hbox1[i].addWidget(self.paramMonitor[i])<br>        hbox1[i].addWidget(self.varMonitor[i])<br>        # 设置显示比例<br>        hbox1[i].setStretchFactor(self.buttonBox[i], 3)<br>        hbox1[i].setStretchFactor(self.paramMonitor[i], 3)<br>        hbox1[i].setStretchFactor(self.varMonitor[i], 4)</p>\n<h3 id=\"列表内添加按钮\"><a href=\"#列表内添加按钮\" class=\"headerlink\" title=\"列表内添加按钮\"></a>列表内添加按钮</h3><p>1、定义添加按钮的方法</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: #008080\"> 1</span> <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 列表内添加按钮</span>\n<span style=\"color: #008080\"> 2</span>     <span style=\"color: #0000ff\">def</span><span style=\"color: #000000\"> buttonForRow(self,id):\n</span><span style=\"color: #008080\"> 3</span>         widget=<span style=\"color: #000000\">QWidget()\n</span><span style=\"color: #008080\"> 4</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 修改</span>\n<span style=\"color: #008080\"> 5</span>         updateBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">修改</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\"> 6</span>         updateBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\"> 7</span> <span style=\"color: #800000\">                                          background-color : NavajoWhite;\n</span><span style=\"color: #008080\"> 8</span> <span style=\"color: #800000\">                                          height : 30px;\n</span><span style=\"color: #008080\"> 9</span> <span style=\"color: #800000\">                                          border-style: outset;\n</span><span style=\"color: #008080\">10</span> <span style=\"color: #800000\">                                          font : 13px  </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">11</span> \n<span style=\"color: #008080\">12</span>         updateBtn.clicked.connect(<span style=\"color: #0000ff\">lambda</span><span style=\"color: #000000\">:self.updateTable(id))\n</span><span style=\"color: #008080\">13</span> \n<span style=\"color: #008080\">14</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 查看</span>\n<span style=\"color: #008080\">15</span>         viewBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">查看</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">16</span>         viewBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\">17</span> <span style=\"color: #800000\">                                  background-color : DarkSeaGreen;\n</span><span style=\"color: #008080\">18</span> <span style=\"color: #800000\">                                  height : 30px;\n</span><span style=\"color: #008080\">19</span> <span style=\"color: #800000\">                                  border-style: outset;\n</span><span style=\"color: #008080\">20</span> <span style=\"color: #800000\">                                  font : 13px; </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">21</span> \n<span style=\"color: #008080\">22</span>         viewBtn.clicked.connect(<span style=\"color: #0000ff\">lambda</span><span style=\"color: #000000\">: self.viewTable(id))\n</span><span style=\"color: #008080\">23</span> \n<span style=\"color: #008080\">24</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 删除</span>\n<span style=\"color: #008080\">25</span>         deleteBtn = QPushButton(<span style=\"color: #800000\">'</span><span style=\"color: #800000\">删除</span><span style=\"color: #800000\">'</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">26</span>         deleteBtn.setStyleSheet(<span style=\"color: #800000\">'''</span><span style=\"color: #800000\"> text-align : center;\n</span><span style=\"color: #008080\">27</span> <span style=\"color: #800000\">                                    background-color : LightCoral;\n</span><span style=\"color: #008080\">28</span> <span style=\"color: #800000\">                                    height : 30px;\n</span><span style=\"color: #008080\">29</span> <span style=\"color: #800000\">                                    border-style: outset;\n</span><span style=\"color: #008080\">30</span> <span style=\"color: #800000\">                                    font : 13px; </span><span style=\"color: #800000\">'''</span><span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">31</span> \n<span style=\"color: #008080\">32</span> \n<span style=\"color: #008080\">33</span>         hLayout =<span style=\"color: #000000\"> QHBoxLayout()\n</span><span style=\"color: #008080\">34</span> <span style=\"color: #000000\">        hLayout.addWidget(updateBtn)\n</span><span style=\"color: #008080\">35</span> <span style=\"color: #000000\">        hLayout.addWidget(viewBtn)\n</span><span style=\"color: #008080\">36</span> <span style=\"color: #000000\">        hLayout.addWidget(deleteBtn)\n</span><span style=\"color: #008080\">37</span>         hLayout.setContentsMargins(5,2,5,2<span style=\"color: #000000\">)\n</span><span style=\"color: #008080\">38</span> <span style=\"color: #000000\">        widget.setLayout(hLayout)\n</span><span style=\"color: #008080\">39</span>         <span style=\"color: #0000ff\">return</span> widget</pre>\n</div>\n<p>2、在向tableWidget里添加数据时插入即可</p>\n<div class=\"cnblogs_code\">\n<pre><span style=\"color: #008080\">1</span> <span style=\"color: #0000ff\">for</span> row_number, row_data <span style=\"color: #0000ff\">in</span><span style=\"color: #000000\"> enumerate(rsdata):\n</span><span style=\"color: #008080\">2</span> <span style=\"color: #000000\">    self.ui.tableWidget.insertRow(row_number)\n</span><span style=\"color: #008080\">3</span>     <span style=\"color: #0000ff\">for</span> i <span style=\"color: #0000ff\">in</span> range(len(row_data)+1<span style=\"color: #000000\">):\n</span><span style=\"color: #008080\">4</span>         <span style=\"color: #0000ff\">if</span> i&lt;<span style=\"color: #000000\">len(row_data):\n</span><span style=\"color: #008080\">5</span> <span style=\"color: #000000\">            self.ui.tableWidget.setItem(row_number, i, QtWidgets.QTableWidgetItem(str(row_data[i])))\n</span><span style=\"color: #008080\">6</span>         <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 添加按钮</span>\n<span style=\"color: #008080\">7</span>         <span style=\"color: #0000ff\">if</span> i==<span style=\"color: #000000\">len(row_data):\n</span><span style=\"color: #008080\">8</span>             <span style=\"color: #008000\">#</span><span style=\"color: #008000\"> 传入当前id</span>\n<span style=\"color: #008080\">9</span>             self.ui.tableWidget.setCellWidget(row_number, i,self.buttonForRow(str(row_data[0])))</pre>\n</div>\n<p>效果图</p>\n<p><img src=\"http://images2017.cnblogs.com/blog/896442/201709/896442-20170907222902741-300228307.png\" alt=\"\"></p>\n\n<p>就像以上显示的那样<a href=\"https://www.cnblogs.com/yuanlipu/p/7492260.html\">来源</a></p>\n<h4 id=\"值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox-对其进行排版，简直……\"><a href=\"#值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox-对其进行排版，简直……\" class=\"headerlink\" title=\"值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox 对其进行排版，简直……\"></a>值得注意的是，再排布的时候必须只有一个表格对其进行放置（也就是说指挥它去哪儿的只能有一个人），之前我为了测试，两个hbox 对其进行排版，简直……</h4><pre><code>    labelSymbol = QtGui.QLabel(self.CtaEngine.strategyTickDict[self.name])\n    buttonInit[i] = QtGui.QPushButton(u&#39;初始化&#39;)\n    buttonStart[i] = QtGui.QPushButton(u&#39;启动&#39;)\n    buttonStop[i] = QtGui.QPushButton(u&#39;停止&#39;)\n    buttonUpdate[i] = QtGui.QPushButton(u&#39;更新参数&#39;)\n    buttonSave[i] = QtGui.QPushButton(u&#39;保存参数&#39;)\n\n    buttonInit[i].clicked.connect(partial(self.init, i))\n    buttonStart[i].clicked.connect(partial(self.start, i))\n    buttonStop[i].clicked.connect(partial(self.stop, i))\n    buttonUpdate[i].clicked.connect(partial(self.updateParams,i))\n    buttonSave[i].clicked.connect(partial(self.saveParams, i))\n\nhbox1[i] = QtGui.QHBoxLayout()\n    ##参数设置显示\n    hbox2[i] = QtGui.QHBoxLayout()\n        #hbox1[i].addWidget(labelSymbol)\n        #hbox1[i].addWidget(buttonInit[i])\n        #hbox1[i].addWidget(buttonStart[i])\n        #hbox1[i].addWidget(buttonStop[i])\n        #hbox1[i].addWidget(buttonUpdate[i])\n        #hbox1[i].addWidget(buttonSave[i])\n\n    self.buttonBox[i].setCellWidget(0, 0, buttonInit[i])\n    self.buttonBox[i].setCellWidget(0, 1, buttonStart[i])\n    self.buttonBox[i].setCellWidget(0, 2, buttonStop[i])\n</code></pre>\n<hr>\n<hr>\n<hr>\n<h4 id=\"组件之间连接信号\"><a href=\"#组件之间连接信号\" class=\"headerlink\" title=\"组件之间连接信号\"></a>组件之间连接信号</h4><pre><code># classA(QtGui.QTableWidget):\n#   pass\nclassA.itemDoubleClicked.connect(classB.actionFunction)\n# 这样单纯调用还是可以的，但是数据传输… 就得继续研究一下了。\n</code></pre>\n<h5 id=\"关闭事件退出提示\"><a href=\"#关闭事件退出提示\" class=\"headerlink\" title=\"关闭事件退出提示\"></a>关闭事件退出提示</h5><pre><code>def closeEvent(self, event):\n    reply = QtGui.QMessageBox.question(self, &#39;Message&#39;,&quot;Are you sure to quit?&quot;,\n\n        QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)\nif reply == QtGui.QMessageBox.Yes:\n    event.accept()\nelse:\n    event.ignore()\n</code></pre>\n<p>函数放置位置就是主窗口类下就好。</p>\n<h3 id=\"QTableWidget-清除数据\"><a href=\"#QTableWidget-清除数据\" class=\"headerlink\" title=\"QTableWidget 清除数据\"></a>QTableWidget 清除数据</h3><pre><code>def updateData(self, data): #（缩进没问题吧…🙏）\n        &quot;&quot;&quot;将数据更新到表格中&quot;&quot;&quot;\n    \n    if self.name == u&#39;RiskAlarmWidget&#39;:\n        pass\n\n    if self.updateBeginAction:\n        data = self.updateBeginAction(data)\n        if not data:\n           return\n\n    if self.updateAction:\n        self.updateAction(data)\n    else:\n        if isinstance(data, unicode) and self.dataKey:\n            # 删除模式\n            key = data\n            if key in self.dataDict:\n                d = self.dataDict[key]\n                row = d[self.headerList[0]].row()\n                self.removeRow(row)\n                del self.dataDict[key]\n        else:\n            # 如果设置了dataKey，则采用存量更新模式\n            if self.InsertMode:\n                # 如果允许了排序功能，则插入数据前必须关闭，否则插入新的数据会变乱\n                if self._sorting:\n                    self.setSortingEnabled(False)\n\n                newRow = 0 if self.InsertTopRow else self.rowCount()\n                self.insertRow(newRow)\n\n                for n, header in enumerate(self.headerList):\n\n                    content = self.getContents(data, header)\n                    cellType = self.headerDict[header][&#39;cellType&#39;]\n                    cell = cellType(content)\n            \n                    if self.font:\n                        cell.setFont(self.font)\n\n                    if self._saveData:            \n                        cell.data = data                \n\n                    self.setItem(newRow, n, cell)  \n    \n                # 重新打开排序\n                if self._sorting:\n                    self.setSortingEnabled(True)\n      \n            else:            \n                key = data.__getattribute__(self.dataKey)\n                if key in self.dataDict:\n                    # 已存在数据字典中，则更新相关单元格\n                    d = self.dataDict[key]\n                    for header in self.headerList:\n\n                        content = self.getContents(data, header)\n                        cell = d[header]\n                        cell.setContent(content)\n\n                        if self._saveData:            \n            # 如果设置了保存数据对象，则进行对象保存\n                            cell.data = data                    \n                else:\n                    # 如果允许了排序功能，则插入数据前必须关闭，\n        #否则插入新的数据会变乱\n                    if self._sorting:\n                        self.setSortingEnabled(False)\n                    # 不存在数据字典中，插入新行，创建此行单元格\n                    newRow = 0 if self.InsertTopRow else self.rowCount()\n                    self.insertRow(newRow)\n\n                    d = &#123;&#125;\n                    for n, header in enumerate(self.headerList):\n                    \n                        content = self.getContents(data, header)\n                        cellType = self.headerDict[header][&#39;cellType&#39;]\n                        cell = cellType(content)\n                \n                        if self.font:\n                            cell.setFont(self.font)  \n            # 如果设置了特殊字体，则进行单元格设置\n                \n                        if self._saveData:            \n            # 如果设置了保存数据对象，则进行对象保存\n                            cell.data = data\n                    \n                        self.setItem(newRow, n, cell)\n                        d[header] = cell\n                    self.dataDict[key] = d\n    \n                    # 重新打开排序\n                    if self._sorting:\n                        self.setSortingEnabled(True)\n\n    if self.updateAfterAction:\n        self.updateAfterAction(data)            \n</code></pre>\n<p>插入后数据需要清理只需<code>.clearContentsText()</code>，这样是清理数据但保留表格，方便更新内容。<code>.clear()</code>则清理数据以及表格方便<font color=75362109>重新</font>填入新的内容</p>\n<hr>\n<h4 id=\"调用Windows程序\"><a href=\"#调用Windows程序\" class=\"headerlink\" title=\"调用Windows程序\"></a>调用Windows程序</h4><pre><code>import win32api\n    path = &#39;D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json&#39;\n    win32api.ShellExecute(0, &#39;open&#39;, &#39;notepad.exe&#39;, path, &#39;&#39;, 1)\n# 使用记事本打开此文件\n</code></pre>\n<hr>\n<h4 id=\"Json\"><a href=\"#Json\" class=\"headerlink\" title=\"Json\"></a>Json</h4><pre><code>with open(&#39;D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json&#39;, &#39;r&#39;) as f:\nsetting = json.load(f)\nself.userID = str(setting[&#39;userID&#39;])\nself.password = str(setting[&#39;password&#39;])\n</code></pre>\n<hr>\n<hr>\n<h3 id=\"信号槽（传输额外参数）\"><a href=\"#信号槽（传输额外参数）\" class=\"headerlink\" title=\"信号槽（传输额外参数）\"></a>信号槽（传输额外参数）</h3><p>一般来说，比如一个按钮吧。 在链接点击信号与槽时<code>buttonInit[i].clicked.connect(partial(self.init, i))</code>就完事了。然而，当循环创建按钮，对应同样的槽函数，只是需要执行的变量有区别时，就需要传输额外的参数。<br>这时，方法有二：</p>\n<p>环境：</p>\n<p>python2.7.8</p>\n<p>pyqt 4.11.1</p>\n<h3 id=\"一：-使用lambda表达式\"><a href=\"#一：-使用lambda表达式\" class=\"headerlink\" title=\"一： 使用lambda表达式\"></a>一： 使用lambda表达式</h3><pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyForm</span><span class=\"hljs-params\">(QMainWindow)</span>:</span>  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(MyForm, self).__init__(parent)  \n        button1 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button2 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button1.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">1</span>))  \n        button2.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">2</span>))  \n\n        layout = QHBoxLayout()  \n        layout.addWidget(button1)  \n        layout.addWidget(button2)  \n\n        main_frame = QWidget()  \n        main_frame.setLayout(layout)  \n\n        self.setCentralWidget(main_frame)  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_button</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        print(<span class=\"hljs-string\">'Button &#123;0&#125; clicked'</span>.format(n))  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:  \n    <span class=\"hljs-keyword\">import</span> sys  \n    app = QApplication(sys.argv)  \n    form = MyForm()  \n    form.show()  \n    app.exec_()  </code></pre>\n\n<p>解释一下，on_button是怎样处理从两个按钮传来的信号。我们使用lambda传递按钮数字给槽，也可以传递任何其他东西—甚至是按钮组件本身（假如，槽打算把传递信号的按钮修改为不可用）</p>\n\n<h3 id=\"二：-使用functools里的partial函数\"><a href=\"#二：-使用functools里的partial函数\" class=\"headerlink\" title=\"二： 使用functools里的partial函数\"></a>二： 使用functools里的partial函数</h3><pre class=\"prettyprint\"><code class=\"language-python hljs \">button1.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">1</span>))  \nbutton2.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">2</span>))  </code></pre>\n\n<p>《Rapid GUI Program with Python and QT》 P143例子。</p>\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial  \n<span class=\"hljs-keyword\">import</span> sys  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Bu1</span><span class=\"hljs-params\">(QWidget)</span>:</span>  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(Bu1, self).__init__(parent)  \n        <span class=\"hljs-comment\">#水平盒式布局  </span>\n        layout = QHBoxLayout()  \n        <span class=\"hljs-comment\">#显示  </span>\n        self.lbl = QLabel(<span class=\"hljs-string\">'no button is pressed'</span>)  \n        <span class=\"hljs-comment\">#循环5个按钮  </span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">5</span>):  \n            but = QPushButton(str(i))  \n            layout.addWidget(but)  \n            <span class=\"hljs-comment\">#信号和槽连接  </span>\n            but.clicked.connect(self.cliked)  \n\n        <span class=\"hljs-comment\">#使用封装，lambda  </span>\n        but = QPushButton(<span class=\"hljs-string\">'5'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_click(<span class=\"hljs-string\">'5'</span>))  \n        <span class=\"hljs-comment\">#使用个who变量，结果不正常，显示 False is pressed  </span>\n        <span class=\"hljs-comment\">#but.clicked.connect(lambda who=\"5\": self.on_click(who))  </span>\n\n        <span class=\"hljs-comment\">#使用封装，partial函数  </span>\n        but = QPushButton(<span class=\"hljs-string\">'6'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(partial(self.on_click, <span class=\"hljs-string\">'6'</span>))  \n\n        layout.addWidget(self.lbl)  \n        <span class=\"hljs-comment\">#设置布局  </span>\n        self.setLayout(layout)  \n\n    <span class=\"hljs-comment\">#传递额外参数     </span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">cliked</span><span class=\"hljs-params\">(self)</span>:</span>  \n        bu = self.sender()  \n        <span class=\"hljs-keyword\">if</span> isinstance(bu, QPushButton):  \n            self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % bu.text())  \n        <span class=\"hljs-keyword\">else</span>:  \n            self.lbl.setText(<span class=\"hljs-string\">'no effect'</span>)  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_click</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % n)  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:          \n    app = QApplication(sys.argv)  \n    bu =Bu1()  \n    bu.show()  \n    app.exec_()   </code></pre>\n\n<p>三：感谢<a href=\"http://blog.csdn.net/fengyu09/article/details/39498777\">来源</a> </p>\n<hr>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h2 id=\"PyQt-echarts图表\"><a href=\"#PyQt-echarts图表\" class=\"headerlink\" title=\"PyQt + echarts图表\"></a>PyQt + echarts图表</h2><pre><code>echarts绘制图标会在本地保存一个`html`文件，所以使用`PyQt`将之作为一个网页页面加载即可：\nfrom PyQt4.QtWebKit import *\nfrom PyQt4.QtGui  import *\nfrom PyQt4.QtCore import * \nfrom pyecharts import Kline, Page\ndef creat_charts():\n    page = Page()\n    chart_init = &#123;\n            &quot;width&quot;: 1600,\n            &quot;height&quot;: 900,\n        &#125;\n    chart = Kline(&quot;K 线图&quot;, **chart_init)\n    chart.add(&quot;日K&quot;, [&quot;2017/7/&#123;&#125;&quot;.format(i + 1) for i in range(31)], v1)\n    page.add(chart)\n    return page\ncreat_charts()_render()     # 生成`render.html`文件\nself.view = QWebView()\nself.create_charts().render()\nurl = QUrl(&quot;render.html&quot;)   # 需要加载`QUrl`使用字符串转化\nself.view.load(url)\n</code></pre>\n<h2 id=\"addWidget\"><a href=\"#addWidget\" class=\"headerlink\" title=\"addWidget\"></a>addWidget</h2><p>在窗口布局的时候这玩意至关重要，因为要先创建一个框架，再往里面塞东西。而塞的方法就是<code>addWidget</code>。所以简单记录一下小年这一天经常用到的环套：</p>\n<pre><code>hbox = QtGui.QHBoxLayout()\n    vbox = QtGui.QVBoxLayout()\n可以通过`addWidget`来塞入`QtGui.QWidget`, `QtGui.QGroupBox`, \n</code></pre>\n<p><code>QtGui.QTableWidget</code>  ,<code>QScrollArea</code>等<br>    还可以<code>addWidget</code>诸如<code>QtGui.QPushButton</code>, <code>QtGui.QLabel</code>,<br><code>QtGui.QComboBox</code>, <code>QtGui.QLineEdit</code>等小部件</p>\n<pre><code>`hbox`和`vbox`可以通过`addLayout`互相添加（这两个是 框架，即页面上的“骨头”。来摆设“肌肉”-&gt;“Widget”、&quot;Box&quot;等的）\n当然最后要显示谁，需要`self.setLayout(hbox)` 而支持`setLayout`少不了有\n</code></pre>\n<p><code>QWidget</code>,<code>QScrollArea</code>, 所以它们好像能够无限互相套下去…</p>\n<h3 id=\"小部件的方法\"><a href=\"#小部件的方法\" class=\"headerlink\" title=\"小部件的方法\"></a>小部件的方法</h3><p>其实哪些方法也不用记…打开<code>QtDesigner</code>直接搜索拖拽，然后看右边的清单就行了，但这几个还是记录下来吧，在网上找太累了~</p>\n<p><code>QtGui.QComboBox</code>: <code>addItems</code>, ‘’’addItem<code>, </code>currentText<code> </code>QtGui.QSpinBox<code>: </code>setValue`, </p>\n<h3 id=\"QString2String\"><a href=\"#QString2String\" class=\"headerlink\" title=\"QString2String\"></a>QString2String</h3><pre><code>def QString2PyString(self, qStr):   \n    #QString，如果内容是中文，则直接使用会有问题，要转换成 python\n    #string\n    return unicode(qStr.toUtf8(), &#39;utf-8&#39;, &#39;ignore&#39;)\n</code></pre>\n<h2 id=\"QLineEdit\"><a href=\"#QLineEdit\" class=\"headerlink\" title=\"QLineEdit\"></a>QLineEdit</h2><p>之所以放这么后面是因为我觉得这东西没什么好说的，也就是一个输入框嘛，但因为出现在后面所以说是现在发现了其中有趣的东西。那就是最近在做输入密码的时候想要限制，但在程序中去判断显然并不是什么有意思的事情。然后想起来输入的时候可以直接限制住啊。于是采用了<code>textChanged</code>去<code>connect</code>一个函数，来动态监测输入。但在调试中打开错了窗口所以以为没有用就找了其他的方法。那就是在初始化的时候直接卡死，结果没有找到设置长度的.set***但找到了现用的<code>setValidator</code>其配合正则表达式的食用方法如下：</p>\n<pre><code>import re\n    a = QtCore.QRegExp(&quot;[A-Za-z]&#123;0,5&#125;[1-9][0-9]&#123;0,5&#125;&quot;)\n    a = QtCore.QRegExp(&quot;[a-zA-Z0-9]&#123;0,12&#125;$&quot;)\n    self.txtPasswd.setValidator(QtGui.QRegExpValidator(a))\n# emm,很显然，把a替换成limitRule就要顺眼一些了。\n</code></pre>\n<p>不过<font color=#ff3bffl9>值得注意的是：</font>如果用<code>setText</code>将其它字符写进这个编辑小框框中的话，那么这个框框的规则就会被打破然后随便写。但要是<code>setText</code>的内容没有超出所规定的形式之外的话，那么规则照旧，依然执行。</p>\n<h1 id=\"PyQtGraph\"><a href=\"#PyQtGraph\" class=\"headerlink\" title=\"PyQtGraph:\"></a>PyQtGraph:</h1><p><a href=\"http://www.pyqtgraph.org/\">Link</a></p>\n<pre><code>import pyqtgraph.examples  \npyqtgraph.examples.run()  \n</code></pre>\n"},{"title":"机器学习库","date":"2017-07-24T10:40:00.000Z","modified":"2017-08-07 11:15","slug":"notes/noteOfmachineLearning","author":"Ian","_content":"\n\n# Python 机器学习库 👽\n\n### Plotly\n与matplotlib 都是绘图工具，不过效果炫一些，我也没画过，所以只放链接，不放实例了\n    [Plotly Python Library](https://plot.ly/python/) :  <https://plot.ly/python/>\n## matplotlib\n    import matplotlib.pyplot as plt\n### 参数等太多，链接最可靠\n[pyplot参数](https://github.com/wizardforcel/matplotlib-user-guide-zh/blob/master/3.1.md)\n\n还是粘一些常用的：\n    marker 属性（下面写在分号里呦）\n    o  .  v  ^   <  >  1  2 3 4  8  s  p  *   h  H  +  x  D  d   |   _  之类\n\n[画出一些“花儿”](http://blog.csdn.net/pipisorry/article/details/40005163)\n### 绘图\n    plt.plot(x, y)\n    # 在y之后可添加参数，例如常用的label = ‘IamLabel’之类\n    # 线的样式、颜色 ：b: blue  g: green    r: red  c: cyan m: magenta\n    y: yellow   k: black    w: white\n    '-' : solid , '--' : dashed, '-.' : dashdot ':' : dotted    '   '', ' '   ': None\n    # 粗细 lw=3 更改数字\n    # 数值折点显示样式 marker = ‘o’   \n\n    plot.show()\n### 绘制图表\n#### 1\n    plt.figure(1)\n    绘图\n    plt.figure(2)\n    绘图\n#### 2（未测试）\n    plt.figure(1)   # 创建图表1\n    plt.figure(2)   # 创建图表2\n    hi1 = plt.subplot(211)  # 在图表2中创建子图1\n    hi2 = plt.subplot(212)  # 在图表2中创建子图2\n### 一表多图\n    pCapital = plt.subplot(4, 1, 1)\n        pCapital.set_ylabel(\"capital\")\n        pCapital.plot(d['capitalList'], color='r', lw=0.8)\n    plt.show()\n### 标注点\n#### eg1\n    for w, m in enumerate(self.lowestPrice):\n            if w % 120*10 == 0:\n                plt.plot([w, w], [m, self.highestPrice[w]], linestyle = '--')\n            #plt.scatter(self.dealPoints,color = 'c')\n    for i in self.dealPoints:           \n        plt.scatter([i[0]], [i[1]], color = 'c')    \n        for ii in self.ydealPoints:\n        plt.scatter([ii[0]], [ii[1]], color = 'm')\n        \n    plt.title('Tick & TradePoint')\n    plt.legend()\n    plt.show()\n\n<b>plt.legend()</b>\n    # show() 之前不加这句是不会显示出标注的呦\n#### eg2(还不晓得咋回事儿)\n    import numpy as np\n    t = 2 * np.pi / 3\n    plt.plot([t, t], [0, np.cos(t)], color='blue', linewidth=2.5, linestyle=\"--\")\n    plt.scatter([t, ], [np.cos(t), ], 50, color='blue')\n\n    plt.annotate(r'$sin(\\frac{2\\pi}{3})=\\frac{\\sqrt{3}}{2}$',\n        xy=(t, np.sin(t)), xycoords='data',\n        xytext=(+10, +30), textcoords='offset points', fontsize=16,\n        arrowprops=dict(arrowstyle=\"->\", connectionstyle=\"arc3,rad=.2\"))\n\n    plt.plot([t, t],[0, np.sin(t)], color='red', linewidth=2.5, linestyle=\"--\")\n    plt.scatter([t, ],[np.sin(t), ], 50, color='red')\n\n    plt.annotate(r'$cos(\\frac{2\\pi}{3})=-\\frac{1}{2}$',\n        xy=(t, np.cos(t)), xycoords='data',\n        xytext=(-90, -50), textcoords='offset points', fontsize=16,\n    arrowprops=dict(arrowstyle=\"->\", connectionstyle=\"arc3,rad=.2\"))\n\n### 坐标标签显示方案\n    plt.setp(plt.gca().get_xticklabels(), rotation=20, horizontalalignment='right')\n    # 貌似除了角度和right，没有了修改内容\n### 来画一个动态图吧（感觉没啥作用所以就小标题了）\n    import matplotlib.pyplot as plt\n    from matplotlib.patches import Circle\n    import numpy as np\n    import math\n    \n    plt.close()  #clf() # 清图  cla() # 清坐标轴 close() # 关窗口\n    fig=plt.figure()\n    ax=fig.add_subplot(1,1,1)\n    ax.axis(\"equal\") #设置图像显示的时候XY轴比例\n    plt.grid(True) #添加网格\n    plt.ion()   #interactive mode on打开交互模式 而不是plt.show()\n    IniObsX=0000\n    IniObsY=4000\n    IniObsAngle=135\n    IniObsSpeed=10*math.sqrt(2)   #米/秒\n    print('开始仿真')\n    try:\n        for t in range(180):\n                #障碍物船只轨迹             \n            obsX=IniObsX+IniObsSpeed*math.sin(IniObsAngle/180*math.pi)*t\n            obsY=IniObsY+IniObsSpeed*math.cos(IniObsAngle/180*math.pi)*t\n            ax.scatter(obsX,obsY,c='b',marker='.')  \n            #散点图\n            #ax.lines.pop(1)  删除轨迹\n            #下面的图,两船的距离\n            plt.pause(0.1)\n    except Exception as err:\n        print(err)\n## pandas\n### DataFrame\n    import pandas as pd\n    import numpy as np\n    a = {'a':['A','B','C'], 'b':[1,2,3], 'c':['lo', 'hel', 'hi'], 'd':[7,8,9]}\n\n    df = pd.DataFrame(a)\n    # 字典转换为dataFrame（每一个Key 和 Value构成一列，key为列标）\n    df = df.set_index('a')\n    # 将‘a‘列设置为行标\n    sr = pd.Series(a)\n    sr2 = df['b']\n\n    df[['b','c']].to_records()[1]['b']\n    df[['b','c']]\n#### columns  index\n    列，参数(行)\n\n#### 取用方法\n```python \n    dfValue.loc[indexKey][colKey]\n```\n\n#### 一个将`DataFrame`字符串化之后重新解析的程序😓\n```python \n    def parseSTR(self, _str, indexKey, colKey, setIndexNum=0, setColNum=0):\n        \"\"\"\n        通过setIndexNum来确定第几列数据为行标题， setColNum确定使用第几行数据作为列标题\n        返回通过indexKey行标题 与 colKey列标题 确定的结果\n        \"\"\"\n        rows = _str.split('\\n')\n        columns = rows[0].split(',')[1:]\n        tempRow = []\n        index = []\n        for row in rows[1:]:\n            if len(row):\n                index.append(row.split(',')[setIndexNum])\n                tempRow.append(row.split(',')[1:])\n        dfValue = pd.DataFrame(tempRow, index=index, columns=columns)\n        try:\n            return dfValue.loc[indexKey][colKey]\n        except:\n            print u'【error:】信息不全'\n            return None\n```\nEmm,有点儿…  嗯…   嗯… \n[^_^]:\n    2018年6月21日17点17分\n## numpy\n### random\n    random.seed(int类型) \n    # 理解可以为设定开始随机的开始，也就是说每次设定之后再开始取值就会得到相同的随机数()\n\n即\n    np.random.seed(1)   \n    np.random.random(1)  \n\n    np.random.seed(1)   \n    np.random.random(1)\n>array([ 0.417022])\n\n>array([ 0.417022])\n\n#### 标准差\n    a = np.arange(10)\n    np.std(a)\n    a.std()\n##### 样本标准差\n    a.std(ddof = 1)\n    np.std(a, ddof = 1)\n以上 a.std 只有当a为<type 'numpy.ndarray'>  即用numpy生成的矩阵，array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])才可有，如果是python的列表list 则只能用np.std 来算\n\n## scikit-learn\n\n## OpenCV\n### Insatll\ncaffe：\n\n    sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler\n    sudo apt-get install --no-install-recommends libboost-all-dev\n    \n    sudo apt-get install libatlas-base-dev\n\n    sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev\n\n\n## PIL\n    his = im.histogram()\nvalues = {}\n\nfor i in range(256):\n    values[i] = his[i]\n\nfor j,k in sorted(values.items(),key=lambda x:x[1],reverse = True)[:10]:\n    print j,k\n\n\n\n\n\n\n# 爬虫\n 先[链接](https://edu.hellobi.com/course/156/reviews) 为实例视频教程，貌似不错，还没看。\n\n## 问题\n虽然, 以前已经积累了一些东西, 知道\n- headers\n- cookie\n啥的, 但今天突然碰到了这个报错:\n> Caused by SSLError(SSLError(\"bad handshake: Error([('SSL routines', 'tls_process_server_certificate', 'certificate verify failed')])\n\n没见过, 之后碰到其余, 统一汇总在此.\n### SSLError HTTPS\n有人指点到: 因用`https`的缘故, 其中报 `verify failed` 所以可以通过\n```py\nrequests.get(url, verify=False)\n```\n将`verify`关闭可通过.\n\n## Selenium\n#### 从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…\n<h2>1、基本使用</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.taobao.com/')\n#### 显示等待10s\nwait = WebDriverWait(browser, 10)\n#### 等待直到元素加载出\ninput = wait.until(EC.presence_of_element_located((By.ID, 'q')))\n#### 等待直到元素可点击\nbutton = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, '.btn-search')))\nprint(input, button)\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\n#### 创建一个浏览器对象\nbrowser = webdriver.Chrome()\ntry:\n    # 开启一个浏览器并访问https://www.baidu.com\n    browser.get('https://www.baidu.com')\n    # 在打开的网页响应中根据id查找元素   获取到查询框\n    input = browser.find_element_by_id('kw')\n    # 向查询框中输入Python\n    input.send_keys('Python')\n    # 模拟回车\n    input.send_keys(Keys.ENTER)\n    # 显示等待， 等待10秒\n    wait = WebDriverWait(browser, 10)\n    # 显式等待指定某个条件，然后设置最长等待时间。如果在这个时间还没有找到元素，那么便会抛出异常\n    wait.until(EC.presence_of_element_located((By.ID,'content_left')))\n    # 输出当前的url\n    print(browser.current_url)\n    # 输出Cookies\n    print(browser.get_cookies())\n    # 输出页面响应内容\n    print(browser.page_source)\nfinally:\n    pass\n    # 关闭浏览器\n    browser.close()\n</code></pre></div><p><br></p><h2>2、Selenium声明浏览器对象</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\nbrowser = webdriver.Chrome()\nbrowser = webdriver.Firefox()\nbrowser = webdriver.Edge()\nbrowser = webdriver.PhantomJS()\nbrowser = webdriver.Safari()\n</code></pre></div><p><br></p><h2>3、查找元素</h2><h2>3.1、查找单个元素</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\n#### 使用浏览器访问淘宝\nbrowser.get('https://www.taobao.com')\n#### 在响应结果中通过id查找元素\ninput_first = browser.find_element_by_id('q')\n#### 在响应结果中通过css选择器查找元素\ninput_second = browser.find_element_by_css_selector('#q')\n#### 在响应结果中通过xpath查找元素\ninput_third = browser.find_element_by_xpath('//*[@id=\"q\"]')\nprint(input_first)\nprint(input_second)\nprint(input_third)\nbrowser.close()\n</code></pre></div><ul><li>find_element_by_name   通过name查找</li><li>find_element_by_xpath  通过xpath查找</li><li>find_element_by_link_text   通过链接查找</li><li>find_element_by_partial_link_text    通过部分链接查找</li><li>find_element_by_tag_name   通过标签名称查找</li><li>find_element_by_class_name   通过类名查找</li><li>find_element_by_css_selector  通过css选择武器查找</li></ul><p><br></p><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\n#### 使用浏览器访问淘宝\nbrowser.get('https://www.taobao.com')\n#### 第二种方式，通过使用By.xxx指定查找方式\ninput = browser.find_element(By.ID,'q')\nprint(input)\nbrowser.close()\n</code></pre></div><h2>3.2、多个元素</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\n#### 使用浏览器访问淘宝\nbrowser.get('https://www.taobao.com')\n#### 根据选择查找多个元素\ninput_first = browser.find_elements_by_css_selector('.service-bd li')\ninput_second = browser.find_elements(By.CSS_SELECTOR,'.service-bd li')\nprint(input_first)\nprint(input_second)\nbrowser.close()\n</code></pre></div><ul><li>find_elements_by_name</li><li>find_elements_by_xpath</li><li>find_elements_by_link_text</li><li>find_elements_by_partial_link_text</li><li>find_elements_by_tag_name</li><li>find_elements_by_class_name</li><li>find_elements_by_css_selector</li></ul><p><br></p><p><br></p><h2>4、元素交互操作</h2><blockquote>对获取的元素调用交互方法 </blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\n#### 使用浏览器访问淘宝\nbrowser.get('https://www.taobao.com')\n#### 根据ID查找元素\ninput_search = browser.find_element(By.ID,'q')\n#### 模拟输入PSV到输入框\ninput_search.send_keys('PSV')\ntime.sleep(2)\n#### 清空输入\ninput_search.clear()\ninput_search.send_keys('3DS')\nbutton = browser.find_element(By.CLASS_NAME,'btn-search')\n#### 模拟点击\nbutton.click()\n</code></pre></div><blockquote>更多的操作 <br><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.remote.webelement\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.remote.webelement</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>5、交互动作</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver import ActionChains\n\nbrowser = webdriver.Chrome()\nurl = 'http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'\nbrowser.get(url)\n#### 切换id为iframeResult的frame\nbrowser.switch_to.frame('iframeResult')\nsource = browser.find_element_by_css_selector('#draggable')\ntarget = browser.find_element_by_css_selector('#droppable')\nactions = ActionChains(browser)\nactions.drag_and_drop(source, target)\nactions.perform()\n</code></pre></div><blockquote>更多操作<br><br><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.common.action_chains\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.common.action_chains</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>6、执行JavaScript</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\n#### 执行JavaScript脚本\nbrowser.execute_script('window.scrollTo(0, document.body.scrollHeight)')\nbrowser.execute_script('alert(\"To Bottom\")')\n</code></pre></div><h2>7、获取元素信息</h2><h2>7.1、获取属性</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\nlogo = browser.find_element(By.ID,'zh-top-link-logo')\n#### 获取属性\nprint(logo.get_attribute('class'))\nprint(logo)\nbrowser.close()\n</code></pre></div><h2>7.2、获取文本值</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\nsubmit = browser.find_element(By.ID,'zu-top-add-question')\n#### 获取文本值\nprint(submit.text)\nprint(submit)\nbrowser.close()\n</code></pre></div><h2>7.3、获取ID、位置、标签名、大小</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\nsubmit = browser.find_element(By.ID,'zu-top-add-question')\n#### 获取id   0.04584255991652042-1\nprint(submit.id)\n#### 获取位置  {'y': 7, 'x': 675}\nprint(submit.location)\n#### 获取标签名称    button\nprint(submit.tag_name)\n#### 获取大小  {'width': 66, 'height': 32}\nprint(submit.size)\nbrowser.close()\n</code></pre></div><h2>8、Frame</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.common.exceptions import NoSuchElementException\n\nbrowser = webdriver.Chrome()\nurl = 'http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'\nbrowser.get(url)\n#### 将操作的响应数据换成iframeResult\nbrowser.switch_to.frame('iframeResult')\nsource = browser.find_element_by_css_selector('#draggable')\nprint(source)\ntry:\n    logo = browser.find_element_by_class_name('logo')\nexcept NoSuchElementException:\n    print('NO LOGO')\n#### 切换成父元素\nbrowser.switch_to.parent_frame()\nlogo = browser.find_element_by_class_name('logo')\nprint(logo)\nprint(logo.text)\n</code></pre></div><p><br></p><h2>9、等待</h2><h2>9.1、隐式等待</h2><blockquote>当使用了隐式等待执行测试的时候，如果 WebDriver没有在 DOM中找到元素，将继续等待，超出设定时间后则抛出找不到元素的异常, 换句话说，当查找元素或元素并没有立即出现的时候，隐式等待将等待一段时间再查找 DOM，默认的时间是0</blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\nbrowser = webdriver.Chrome()\n#### 等待10秒\nbrowser.implicitly_wait(10)\nbrowser.get('https://www.zhihu.com/explore')\ninput = browser.find_element_by_class_name('zu-top-add-question')\nprint(input)\n</code></pre></div><h2>9.2、显示等待</h2><blockquote>显式等待指定某个条件，然后设置最长等待时间。如果在这个时间还没有找到元素，那么便会抛出异常了。 </blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.taobao.com/')\n#### 显示等待10s\nwait = WebDriverWait(browser, 10)\n#### 等待直到元素加载出\ninput = wait.until(EC.presence_of_element_located((By.ID, 'q')))\n#### 等待直到元素可点击\nbutton = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, '.btn-search')))\nprint(input, button)\n</code></pre></div><ul><li>title_is 标题是某内容</li><li>title_contains 标题包含某内容</li><li>presence_of_element_located 元素加载出，传入定位元组，如(By.ID, 'p')</li><li>visibility_of_element_located 元素可见，传入定位元组</li><li>visibility_of 可见，传入元素对象</li><li>presence_of_all_elements_located 所有元素加载出</li><li>text_to_be_present_in_element 某个元素文本包含某文字</li><li>text_to_be_present_in_element_value 某个元素值包含某文字</li><li>frame_to_be_available_and_switch_to_it frame加载并切换</li><li>invisibility_of_element_located 元素不可见</li><li>element_to_be_clickable 元素可点击</li><li>staleness_of 判断一个元素是否仍在DOM，可判断页面是否已经刷新</li><li>element_to_be_selected 元素可选择，传元素对象</li><li>element_located_to_be_selected 元素可选择，传入定位元组</li><li>element_selection_state_to_be 传入元素对象以及状态，相等返回True，否则返回False</li><li>element_located_selection_state_to_be 传入定位元组以及状态，相等返回True，否则返回False</li><li>alert_is_present 是否出现Alert</li></ul><p>更多操作</p><blockquote><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.support.expected_conditions\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.support.expected_conditions</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>10、前进后退</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time\nfrom selenium import webdriver\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.baidu.com/')\nbrowser.get('https://www.taobao.com/')\nbrowser.get('https://www.python.org/')\nbrowser.back()\ntime.sleep(1)\nbrowser.forward()\nbrowser.close()\n</code></pre></div><p><br></p><h2>11、Cookies</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\n#### 获得cookies\nprint(browser.get_cookies())\n#### 添加cookie\nbrowser.add_cookie({'name': 'name', 'domain': 'www.zhihu.com', 'value': 'germey'})\nprint(browser.get_cookies())\n#### 删除所有cookies\nbrowser.delete_all_cookies()\nprint(browser.get_cookies())\n</code></pre></div><p><br></p><h2>12、选项卡管理</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time\nfrom selenium import webdriver\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.baidu.com')\n#### 打开一个选项卡\nbrowser.execute_script('window.open()')\nprint(browser.window_handles)\n#### 选择第二个选项卡\nbrowser.switch_to_window(browser.window_handles[1])\nbrowser.get('https://www.taobao.com')\ntime.sleep(1)\nbrowser.switch_to_window(browser.window_handles[0])\nbrowser.get('https://python.org')\n</code></pre></div><p><br></p><h2>13、异常处理</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.common.exceptions import TimeoutException, NoSuchElementException\n\nbrowser = webdriver.Chrome()\ntry:\n    browser.get('https://www.baidu.com')\nexcept TimeoutException:\n    print('Time Out')\ntry:\n    browser.find_element_by_id('hello')\nexcept NoSuchElementException:\n    print('No Element')\nfinally:\n    browser.close()\n</code></pre></div><p><br></p><blockquote>作者：蒋蜀黍  Python爱好者社区专栏作者   授权原创发布，请勿转载，谢谢。<br>出处：<a href=\"http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s/hYBdkE5IEYNZo4vwoyfT4Q\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Selenium 库学习笔记<i class=\"icon-external\"></i></a>\n\n## TensorFlow\n#### Variable\n必须用到:\n    ```init = tf.initialize_all_variables() #初始化全部变量 \n    \n随后即可:\n    ```sess.run(init)\n## Tensorflow 笔记\n\n這是在對照官網學習時的前期入門筆記，其實和官網基本沒有區別，好吧，真的沒有區別。因爲官網真的寫的太好了。\n至於我爲什麼要寫出來，是因爲我之前寫在了紙上，對於邏輯的把握很給力，所以在寫一邊。\n\n不過TensorFlow 變動真的很大，版本更迭也很快，所以，下方只是理清邏輯，具體的東西還是去官網比較好。只不過我這兒網謎之很難等上去… \n\n 總而言之一句話，先搭好架子再選擇填充材料。就是它的核心邏輯了。而改進也是在架子基礎上去優化優化器。嗯…現在理解就是這樣。\n\n### 1\n#### 导入\n    import tensorflow as tf\n步骤：①构建计算图          ②运行计算图\n\n---\n\n#### 2\n##### Build a simple computational Graph\n    node1 = tf.contant(3.0, dtype = tf.float32)\n    node2 = tf.contant(4.0) #also tf.float32 impicitly\n    print (node1, node2)\n###### 输出为：\n    Tensor (\"Cast: 0\", shape = (), dtype = float)\n    Tensor (\"Cast_1: 0\", shape = (), dtype = float)\n打印并不输出值3.0，4.0，而在评估时分别产生3.0和4.0节点。欲实际评估节点，We must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.\n\n---\n\n#### 3\n##### Creates a session object , 然后调用``` run ```方法运行足够的computational graph to envlute node1 and node2\n    sess = tf.Session()\n    print (sess.run([node1, node2]))\n###### 输出为：     \n    [3.0,   4.0]        #可见预期值\n\n---\n\n#### 4\n##### We can build more complicated computations by combining Tensor nodes with operations\n    node3 = tf.add(node1, node2)\n    print (\"node3: \", node3)\n    print (\"sess.run(node3):\", sess.run(node3))\n###### 输出为：\n    node3:  Tensor(\"Add:0\", shape = (1,dtype = float32))\n    sess.run(node3): 7.0\n\n---\n\n#### 5\n##### 更进一步的，A graph can be parameterized. To accept external input , 称为```placeholders```\n    a = tf.placeholder(tf.float32)\n    b = tf.placeholder(tf.float32)\n    adder_note = a + b      #provide a shortcut for tf.add(a, b) and can with multiple input by using\n    print (sess.run(add_note, {a:3, b:4.5}))\n    print (sess.run(add_note, {a:[1, 3],  b:[2, 4]}))\n###### 输出为：\n    7.5\n    [3.  7.]\n##### 5.1\n##### more complex by adding anther aperation. for example:\n    add_and_triple = adder_note * 3\n    print (sess.run(add_and_triple, {a:3, b:4.5}))\n###### 输出为：\n    22.5\nIn ```TensorBoard```(Tensorflow圖形化界面): 图片.jpg        是下面```a+b```` 然后连接到```adder_node```  ,随后再连接到```y(add_and_triple)```\n##### 5.2\n##### That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : ```Variables``` allow us:\n    w = tf.Variables([  .3], dtype = tf.float32)\n    b = tf.Variables([ -  .3], dtype = tf.float32)\n    x = tf.placeholder(tf.float32)\n    linear_model = w * x + b        #线性模型\n\n---\n\n#### 6\n##### 使用```tf.constant``` :调用、初始化常数  用```tf.Vaiables``` :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:\n    init = tf.global_variables_initializer()\n    sess.run(init)\n\n---\n\n#### 7\n##### x is a placeholder, we can evaluate ```lnear_model``` for several values of x simultaneausly as follow:\n    print (sess.run(linear_model, {x:[1,2,3,4]}))\n###### 輸出爲：\n    [0.        0.30000001   0.60000002  0.90000004]\n\n---\n\n#### 8 \n##### 有以上結果並不知好壞，因此編寫損失函數：\n    y = tf.placeholder(tf.float32)\n    squared_deltas = tf.square(linear_model - y)        #平方（下方差和）\n    loss = tf.reduce_sum(squred_deltas)     #差和（上方平方）\n    print (sess.run)loss, {x:[1, 2, 3, 4], y:[0, -1, -2, -3]})\n###### 輸出爲：\n    23.66       #損失值：差平方和\n\n##### 8.1\n##### We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to ```tf.Variable``` but can be charged using operation like ```tf.assign```\n##### W = -1 and b = 1 are optimal parameters:(最優參數)\n    fixW = tf.assign(W, [-1.  ])\n    fixb = tf.assign(b,[1.  ])\n    sess.run(fixW, fixb)\n    print(sess.run(loss, {x:[1, 2, 3, 4],  y:[0, -1, -2, -3]}))\n###### 輸出爲：\n    0, 0  # The final print shows the loss now is zero !\n\n---\n\n#### 9\n##### 模型保存与加载：\n###### 保存：\n    saver = tf.train.Saver()    # 生成saver\n    with tf.Session() as sess:\n    sess.run(tf.global_variables_initializer()) # 先对模型初始化\n\n    # 然后将数据丢入模型进行训练blablabla\n\n    # 训练完以后，使用saver.save 来保存\n    saver.save(sess, \"save_path/file_name\") #file_name如果不存在的话，会自动创建\n###### 加载：\n    saver = tf.train.Saver()\n    with tf.Session() as sess:  #参数可以进行初始化，也可不进行初始化。即使初始化了，初始化的值也会被restore的值给覆盖\n    sess.run(tf.global_variables_initializer())\n    saver.restore(sess, \"save_path/file_name\")  #会将已经保存的变量值resotre到 变量中。\n\n---\n\n#### 10\n##### 图形化操作：\n    >http://blog.csdn.net/u014595019/article/details/53912710\n这篇写的还不错，等之后用过之后再写。\n\n\n---\n\n---\n\n#### Variable\n必须用到:\n\t```init = tf.initialize_all_variables()\t#初始化全部变量 \n\t\n随后即可:\n\t```sess.run(init)\n## Tensorflow 笔记\n\n這是在對照官網學習時的前期入門筆記，其實和官網基本沒有區別，好吧，真的沒有區別。因爲官網真的寫的太好了。\n至於我爲什麼要寫出來，是因爲我之前寫在了紙上，對於邏輯的把握很給力，所以在寫一邊。\n\n不過TensorFlow 變動真的很大，版本更迭也很快，所以，下方只是理清邏輯，具體的東西還是去官網比較好。只不過我這兒網謎之很難等上去… \n\n 總而言之一句話，先搭好架子再選擇填充材料。就是它的核心邏輯了。而改進也是在架子基礎上去優化優化器。嗯…現在理解就是這樣。\n\n### 1\n#### 导入\n\timport tensorflow as tf\n步骤：①构建计算图\t      \t②运行计算图\n\n---\n\n#### 2\n##### Build a simple computational Graph\n\tnode1 = tf.contant(3.0, dtype = tf.float32)\n\tnode2 = tf.contant(4.0)\t#also tf.float32 impicitly\n\tprint (node1, node2)\n###### 输出为：\n\tTensor (\"Cast: 0\", shape = (), dtype = float)\n\tTensor (\"Cast_1: 0\", shape = (), dtype = float)\n打印并不输出值3.0，4.0，而在评估时分别产生3.0和4.0节点。欲实际评估节点，We must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.\n\n---\n\n#### 3\n##### Creates a session object , 然后调用``` run ```方法运行足够的computational graph to envlute node1 and node2\n\tsess = tf.Session()\n\tprint (sess.run([node1, node2]))\n###### 输出为：  \t\n\t[3.0,   4.0]\t\t#可见预期值\n\n---\n\n#### 4\n##### We can build more complicated computations by combining Tensor nodes with operations\n\tnode3 = tf.add(node1, node2)\n\tprint (\"node3: \", node3)\n\tprint (\"sess.run(node3):\", sess.run(node3))\n###### 输出为：\n\tnode3:  Tensor(\"Add:0\", shape = (1,dtype = float32))\n\tsess.run(node3): 7.0\n\n---\n\n#### 5\n##### 更进一步的，A graph can be parameterized. To accept external input , 称为```placeholders```\n\ta = tf.placeholder(tf.float32)\n\tb = tf.placeholder(tf.float32)\n\tadder_note = a + b\t\t#provide a shortcut for tf.add(a, b) and can with multiple input by using\n\tprint (sess.run(add_note, {a:3, b:4.5}))\n\tprint (sess.run(add_note, {a:[1, 3],  b:[2, 4]}))\n###### 输出为：\n\t7.5\n\t[3.  7.]\n##### 5.1\n##### more complex by adding anther aperation. for example:\n\tadd_and_triple = adder_note * 3\n\tprint (sess.run(add_and_triple, {a:3, b:4.5}))\n###### 输出为：\n\t22.5\nIn ```TensorBoard```(Tensorflow圖形化界面): 图片.jpg\t\t是下面```a+b```` 然后连接到```adder_node```  ,随后再连接到```y(add_and_triple)```\n##### 5.2\n##### That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : ```Variables``` allow us:\n\tw = tf.Variables([  .3], dtype = tf.float32)\n\tb = tf.Variables([ -  .3], dtype = tf.float32)\n\tx = tf.placeholder(tf.float32)\n\tlinear_model = w * x + b\t\t#线性模型\n\n---\n\n#### 6\n##### 使用```tf.constant``` :调用、初始化常数  用```tf.Vaiables``` :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:\n\tinit = tf.global_variables_initializer()\n\tsess.run(init)\n\n---\n\n#### 7\n##### x is a placeholder, we can evaluate ```lnear_model``` for several values of x simultaneausly as follow:\n\tprint (sess.run(linear_model, {x:[1,2,3,4]}))\n###### 輸出爲：\n\t[0.        0.30000001   0.60000002  0.90000004]\n\n---\n\n#### 8 \n##### 有以上結果並不知好壞，因此編寫損失函數：\n\ty = tf.placeholder(tf.float32)\n\tsquared_deltas = tf.square(linear_model - y)\t\t#平方（下方差和）\n\tloss = tf.reduce_sum(squred_deltas)\t\t#差和（上方平方）\n\tprint (sess.run)loss, {x:[1, 2, 3, 4], y:[0, -1, -2, -3]})\n###### 輸出爲：\n\t23.66\t\t#損失值：差平方和\n\n##### 8.1\n##### We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to ```tf.Variable``` but can be charged using operation like ```tf.assign```\n##### W = -1 and b = 1 are optimal parameters:(最優參數)\n\tfixW = tf.assign(W, [-1.  ])\n\tfixb = tf.assign(b,[1.  ])\n\tsess.run(fixW, fixb)\n\tprint(sess.run(loss, {x:[1, 2, 3, 4],  y:[0, -1, -2, -3]}))\n###### 輸出爲：\n\t0, 0  # The final print shows the loss now is zero !\n\n---\n\n#### 9\n##### 模型保存与加载：\n###### 保存：\n\tsaver = tf.train.Saver()\t# 生成saver\n\twith tf.Session() as sess:\n\tsess.run(tf.global_variables_initializer())\t# 先对模型初始化\n\n\t# 然后将数据丢入模型进行训练blablabla\n\n\t# 训练完以后，使用saver.save 来保存\n\tsaver.save(sess, \"save_path/file_name\")\t#file_name如果不存在的话，会自动创建\n###### 加载：\n\tsaver = tf.train.Saver()\n\twith tf.Session() as sess:\t#参数可以进行初始化，也可不进行初始化。即使初始化了，初始化的值也会被restore的值给覆盖\n\tsess.run(tf.global_variables_initializer())\n\tsaver.restore(sess, \"save_path/file_name\")\t#会将已经保存的变量值resotre到 变量中。\n\n---\n\n#### 10\n##### 图形化操作：\n\t<http://blog.csdn.net/u014595019/article/details/53912710>\n这篇写的还不错，等之后用过之后再写。\n","source":"_posts/notes/noteOfmachineLearning.md","raw":"---\ntitle: 机器学习库\ndate: 2017-07-24 18:40\nmodified: 2017-08-07 11:15\ncategory: [note, learning]\ntags: [ml, python]\nslug: [pandas, numpy, tensorflow]\nauthor: Ian\n---\n\n\n# Python 机器学习库 👽\n\n### Plotly\n与matplotlib 都是绘图工具，不过效果炫一些，我也没画过，所以只放链接，不放实例了\n    [Plotly Python Library](https://plot.ly/python/) :  <https://plot.ly/python/>\n## matplotlib\n    import matplotlib.pyplot as plt\n### 参数等太多，链接最可靠\n[pyplot参数](https://github.com/wizardforcel/matplotlib-user-guide-zh/blob/master/3.1.md)\n\n还是粘一些常用的：\n    marker 属性（下面写在分号里呦）\n    o  .  v  ^   <  >  1  2 3 4  8  s  p  *   h  H  +  x  D  d   |   _  之类\n\n[画出一些“花儿”](http://blog.csdn.net/pipisorry/article/details/40005163)\n### 绘图\n    plt.plot(x, y)\n    # 在y之后可添加参数，例如常用的label = ‘IamLabel’之类\n    # 线的样式、颜色 ：b: blue  g: green    r: red  c: cyan m: magenta\n    y: yellow   k: black    w: white\n    '-' : solid , '--' : dashed, '-.' : dashdot ':' : dotted    '   '', ' '   ': None\n    # 粗细 lw=3 更改数字\n    # 数值折点显示样式 marker = ‘o’   \n\n    plot.show()\n### 绘制图表\n#### 1\n    plt.figure(1)\n    绘图\n    plt.figure(2)\n    绘图\n#### 2（未测试）\n    plt.figure(1)   # 创建图表1\n    plt.figure(2)   # 创建图表2\n    hi1 = plt.subplot(211)  # 在图表2中创建子图1\n    hi2 = plt.subplot(212)  # 在图表2中创建子图2\n### 一表多图\n    pCapital = plt.subplot(4, 1, 1)\n        pCapital.set_ylabel(\"capital\")\n        pCapital.plot(d['capitalList'], color='r', lw=0.8)\n    plt.show()\n### 标注点\n#### eg1\n    for w, m in enumerate(self.lowestPrice):\n            if w % 120*10 == 0:\n                plt.plot([w, w], [m, self.highestPrice[w]], linestyle = '--')\n            #plt.scatter(self.dealPoints,color = 'c')\n    for i in self.dealPoints:           \n        plt.scatter([i[0]], [i[1]], color = 'c')    \n        for ii in self.ydealPoints:\n        plt.scatter([ii[0]], [ii[1]], color = 'm')\n        \n    plt.title('Tick & TradePoint')\n    plt.legend()\n    plt.show()\n\n<b>plt.legend()</b>\n    # show() 之前不加这句是不会显示出标注的呦\n#### eg2(还不晓得咋回事儿)\n    import numpy as np\n    t = 2 * np.pi / 3\n    plt.plot([t, t], [0, np.cos(t)], color='blue', linewidth=2.5, linestyle=\"--\")\n    plt.scatter([t, ], [np.cos(t), ], 50, color='blue')\n\n    plt.annotate(r'$sin(\\frac{2\\pi}{3})=\\frac{\\sqrt{3}}{2}$',\n        xy=(t, np.sin(t)), xycoords='data',\n        xytext=(+10, +30), textcoords='offset points', fontsize=16,\n        arrowprops=dict(arrowstyle=\"->\", connectionstyle=\"arc3,rad=.2\"))\n\n    plt.plot([t, t],[0, np.sin(t)], color='red', linewidth=2.5, linestyle=\"--\")\n    plt.scatter([t, ],[np.sin(t), ], 50, color='red')\n\n    plt.annotate(r'$cos(\\frac{2\\pi}{3})=-\\frac{1}{2}$',\n        xy=(t, np.cos(t)), xycoords='data',\n        xytext=(-90, -50), textcoords='offset points', fontsize=16,\n    arrowprops=dict(arrowstyle=\"->\", connectionstyle=\"arc3,rad=.2\"))\n\n### 坐标标签显示方案\n    plt.setp(plt.gca().get_xticklabels(), rotation=20, horizontalalignment='right')\n    # 貌似除了角度和right，没有了修改内容\n### 来画一个动态图吧（感觉没啥作用所以就小标题了）\n    import matplotlib.pyplot as plt\n    from matplotlib.patches import Circle\n    import numpy as np\n    import math\n    \n    plt.close()  #clf() # 清图  cla() # 清坐标轴 close() # 关窗口\n    fig=plt.figure()\n    ax=fig.add_subplot(1,1,1)\n    ax.axis(\"equal\") #设置图像显示的时候XY轴比例\n    plt.grid(True) #添加网格\n    plt.ion()   #interactive mode on打开交互模式 而不是plt.show()\n    IniObsX=0000\n    IniObsY=4000\n    IniObsAngle=135\n    IniObsSpeed=10*math.sqrt(2)   #米/秒\n    print('开始仿真')\n    try:\n        for t in range(180):\n                #障碍物船只轨迹             \n            obsX=IniObsX+IniObsSpeed*math.sin(IniObsAngle/180*math.pi)*t\n            obsY=IniObsY+IniObsSpeed*math.cos(IniObsAngle/180*math.pi)*t\n            ax.scatter(obsX,obsY,c='b',marker='.')  \n            #散点图\n            #ax.lines.pop(1)  删除轨迹\n            #下面的图,两船的距离\n            plt.pause(0.1)\n    except Exception as err:\n        print(err)\n## pandas\n### DataFrame\n    import pandas as pd\n    import numpy as np\n    a = {'a':['A','B','C'], 'b':[1,2,3], 'c':['lo', 'hel', 'hi'], 'd':[7,8,9]}\n\n    df = pd.DataFrame(a)\n    # 字典转换为dataFrame（每一个Key 和 Value构成一列，key为列标）\n    df = df.set_index('a')\n    # 将‘a‘列设置为行标\n    sr = pd.Series(a)\n    sr2 = df['b']\n\n    df[['b','c']].to_records()[1]['b']\n    df[['b','c']]\n#### columns  index\n    列，参数(行)\n\n#### 取用方法\n```python \n    dfValue.loc[indexKey][colKey]\n```\n\n#### 一个将`DataFrame`字符串化之后重新解析的程序😓\n```python \n    def parseSTR(self, _str, indexKey, colKey, setIndexNum=0, setColNum=0):\n        \"\"\"\n        通过setIndexNum来确定第几列数据为行标题， setColNum确定使用第几行数据作为列标题\n        返回通过indexKey行标题 与 colKey列标题 确定的结果\n        \"\"\"\n        rows = _str.split('\\n')\n        columns = rows[0].split(',')[1:]\n        tempRow = []\n        index = []\n        for row in rows[1:]:\n            if len(row):\n                index.append(row.split(',')[setIndexNum])\n                tempRow.append(row.split(',')[1:])\n        dfValue = pd.DataFrame(tempRow, index=index, columns=columns)\n        try:\n            return dfValue.loc[indexKey][colKey]\n        except:\n            print u'【error:】信息不全'\n            return None\n```\nEmm,有点儿…  嗯…   嗯… \n[^_^]:\n    2018年6月21日17点17分\n## numpy\n### random\n    random.seed(int类型) \n    # 理解可以为设定开始随机的开始，也就是说每次设定之后再开始取值就会得到相同的随机数()\n\n即\n    np.random.seed(1)   \n    np.random.random(1)  \n\n    np.random.seed(1)   \n    np.random.random(1)\n>array([ 0.417022])\n\n>array([ 0.417022])\n\n#### 标准差\n    a = np.arange(10)\n    np.std(a)\n    a.std()\n##### 样本标准差\n    a.std(ddof = 1)\n    np.std(a, ddof = 1)\n以上 a.std 只有当a为<type 'numpy.ndarray'>  即用numpy生成的矩阵，array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])才可有，如果是python的列表list 则只能用np.std 来算\n\n## scikit-learn\n\n## OpenCV\n### Insatll\ncaffe：\n\n    sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler\n    sudo apt-get install --no-install-recommends libboost-all-dev\n    \n    sudo apt-get install libatlas-base-dev\n\n    sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev\n\n\n## PIL\n    his = im.histogram()\nvalues = {}\n\nfor i in range(256):\n    values[i] = his[i]\n\nfor j,k in sorted(values.items(),key=lambda x:x[1],reverse = True)[:10]:\n    print j,k\n\n\n\n\n\n\n# 爬虫\n 先[链接](https://edu.hellobi.com/course/156/reviews) 为实例视频教程，貌似不错，还没看。\n\n## 问题\n虽然, 以前已经积累了一些东西, 知道\n- headers\n- cookie\n啥的, 但今天突然碰到了这个报错:\n> Caused by SSLError(SSLError(\"bad handshake: Error([('SSL routines', 'tls_process_server_certificate', 'certificate verify failed')])\n\n没见过, 之后碰到其余, 统一汇总在此.\n### SSLError HTTPS\n有人指点到: 因用`https`的缘故, 其中报 `verify failed` 所以可以通过\n```py\nrequests.get(url, verify=False)\n```\n将`verify`关闭可通过.\n\n## Selenium\n#### 从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…\n<h2>1、基本使用</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.taobao.com/')\n#### 显示等待10s\nwait = WebDriverWait(browser, 10)\n#### 等待直到元素加载出\ninput = wait.until(EC.presence_of_element_located((By.ID, 'q')))\n#### 等待直到元素可点击\nbutton = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, '.btn-search')))\nprint(input, button)\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\n#### 创建一个浏览器对象\nbrowser = webdriver.Chrome()\ntry:\n    # 开启一个浏览器并访问https://www.baidu.com\n    browser.get('https://www.baidu.com')\n    # 在打开的网页响应中根据id查找元素   获取到查询框\n    input = browser.find_element_by_id('kw')\n    # 向查询框中输入Python\n    input.send_keys('Python')\n    # 模拟回车\n    input.send_keys(Keys.ENTER)\n    # 显示等待， 等待10秒\n    wait = WebDriverWait(browser, 10)\n    # 显式等待指定某个条件，然后设置最长等待时间。如果在这个时间还没有找到元素，那么便会抛出异常\n    wait.until(EC.presence_of_element_located((By.ID,'content_left')))\n    # 输出当前的url\n    print(browser.current_url)\n    # 输出Cookies\n    print(browser.get_cookies())\n    # 输出页面响应内容\n    print(browser.page_source)\nfinally:\n    pass\n    # 关闭浏览器\n    browser.close()\n</code></pre></div><p><br></p><h2>2、Selenium声明浏览器对象</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\nbrowser = webdriver.Chrome()\nbrowser = webdriver.Firefox()\nbrowser = webdriver.Edge()\nbrowser = webdriver.PhantomJS()\nbrowser = webdriver.Safari()\n</code></pre></div><p><br></p><h2>3、查找元素</h2><h2>3.1、查找单个元素</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\n#### 使用浏览器访问淘宝\nbrowser.get('https://www.taobao.com')\n#### 在响应结果中通过id查找元素\ninput_first = browser.find_element_by_id('q')\n#### 在响应结果中通过css选择器查找元素\ninput_second = browser.find_element_by_css_selector('#q')\n#### 在响应结果中通过xpath查找元素\ninput_third = browser.find_element_by_xpath('//*[@id=\"q\"]')\nprint(input_first)\nprint(input_second)\nprint(input_third)\nbrowser.close()\n</code></pre></div><ul><li>find_element_by_name   通过name查找</li><li>find_element_by_xpath  通过xpath查找</li><li>find_element_by_link_text   通过链接查找</li><li>find_element_by_partial_link_text    通过部分链接查找</li><li>find_element_by_tag_name   通过标签名称查找</li><li>find_element_by_class_name   通过类名查找</li><li>find_element_by_css_selector  通过css选择武器查找</li></ul><p><br></p><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\n#### 使用浏览器访问淘宝\nbrowser.get('https://www.taobao.com')\n#### 第二种方式，通过使用By.xxx指定查找方式\ninput = browser.find_element(By.ID,'q')\nprint(input)\nbrowser.close()\n</code></pre></div><h2>3.2、多个元素</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\n#### 使用浏览器访问淘宝\nbrowser.get('https://www.taobao.com')\n#### 根据选择查找多个元素\ninput_first = browser.find_elements_by_css_selector('.service-bd li')\ninput_second = browser.find_elements(By.CSS_SELECTOR,'.service-bd li')\nprint(input_first)\nprint(input_second)\nbrowser.close()\n</code></pre></div><ul><li>find_elements_by_name</li><li>find_elements_by_xpath</li><li>find_elements_by_link_text</li><li>find_elements_by_partial_link_text</li><li>find_elements_by_tag_name</li><li>find_elements_by_class_name</li><li>find_elements_by_css_selector</li></ul><p><br></p><p><br></p><h2>4、元素交互操作</h2><blockquote>对获取的元素调用交互方法 </blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\n#### 使用浏览器访问淘宝\nbrowser.get('https://www.taobao.com')\n#### 根据ID查找元素\ninput_search = browser.find_element(By.ID,'q')\n#### 模拟输入PSV到输入框\ninput_search.send_keys('PSV')\ntime.sleep(2)\n#### 清空输入\ninput_search.clear()\ninput_search.send_keys('3DS')\nbutton = browser.find_element(By.CLASS_NAME,'btn-search')\n#### 模拟点击\nbutton.click()\n</code></pre></div><blockquote>更多的操作 <br><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.remote.webelement\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.remote.webelement</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>5、交互动作</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver import ActionChains\n\nbrowser = webdriver.Chrome()\nurl = 'http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'\nbrowser.get(url)\n#### 切换id为iframeResult的frame\nbrowser.switch_to.frame('iframeResult')\nsource = browser.find_element_by_css_selector('#draggable')\ntarget = browser.find_element_by_css_selector('#droppable')\nactions = ActionChains(browser)\nactions.drag_and_drop(source, target)\nactions.perform()\n</code></pre></div><blockquote>更多操作<br><br><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.common.action_chains\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.common.action_chains</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>6、执行JavaScript</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\n#### 执行JavaScript脚本\nbrowser.execute_script('window.scrollTo(0, document.body.scrollHeight)')\nbrowser.execute_script('alert(\"To Bottom\")')\n</code></pre></div><h2>7、获取元素信息</h2><h2>7.1、获取属性</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\nlogo = browser.find_element(By.ID,'zh-top-link-logo')\n#### 获取属性\nprint(logo.get_attribute('class'))\nprint(logo)\nbrowser.close()\n</code></pre></div><h2>7.2、获取文本值</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\nsubmit = browser.find_element(By.ID,'zu-top-add-question')\n#### 获取文本值\nprint(submit.text)\nprint(submit)\nbrowser.close()\n</code></pre></div><h2>7.3、获取ID、位置、标签名、大小</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n#### 申明一个浏览器对象\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\nsubmit = browser.find_element(By.ID,'zu-top-add-question')\n#### 获取id   0.04584255991652042-1\nprint(submit.id)\n#### 获取位置  {'y': 7, 'x': 675}\nprint(submit.location)\n#### 获取标签名称    button\nprint(submit.tag_name)\n#### 获取大小  {'width': 66, 'height': 32}\nprint(submit.size)\nbrowser.close()\n</code></pre></div><h2>8、Frame</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.common.exceptions import NoSuchElementException\n\nbrowser = webdriver.Chrome()\nurl = 'http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'\nbrowser.get(url)\n#### 将操作的响应数据换成iframeResult\nbrowser.switch_to.frame('iframeResult')\nsource = browser.find_element_by_css_selector('#draggable')\nprint(source)\ntry:\n    logo = browser.find_element_by_class_name('logo')\nexcept NoSuchElementException:\n    print('NO LOGO')\n#### 切换成父元素\nbrowser.switch_to.parent_frame()\nlogo = browser.find_element_by_class_name('logo')\nprint(logo)\nprint(logo.text)\n</code></pre></div><p><br></p><h2>9、等待</h2><h2>9.1、隐式等待</h2><blockquote>当使用了隐式等待执行测试的时候，如果 WebDriver没有在 DOM中找到元素，将继续等待，超出设定时间后则抛出找不到元素的异常, 换句话说，当查找元素或元素并没有立即出现的时候，隐式等待将等待一段时间再查找 DOM，默认的时间是0</blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\nbrowser = webdriver.Chrome()\n#### 等待10秒\nbrowser.implicitly_wait(10)\nbrowser.get('https://www.zhihu.com/explore')\ninput = browser.find_element_by_class_name('zu-top-add-question')\nprint(input)\n</code></pre></div><h2>9.2、显示等待</h2><blockquote>显式等待指定某个条件，然后设置最长等待时间。如果在这个时间还没有找到元素，那么便会抛出异常了。 </blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.taobao.com/')\n#### 显示等待10s\nwait = WebDriverWait(browser, 10)\n#### 等待直到元素加载出\ninput = wait.until(EC.presence_of_element_located((By.ID, 'q')))\n#### 等待直到元素可点击\nbutton = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, '.btn-search')))\nprint(input, button)\n</code></pre></div><ul><li>title_is 标题是某内容</li><li>title_contains 标题包含某内容</li><li>presence_of_element_located 元素加载出，传入定位元组，如(By.ID, 'p')</li><li>visibility_of_element_located 元素可见，传入定位元组</li><li>visibility_of 可见，传入元素对象</li><li>presence_of_all_elements_located 所有元素加载出</li><li>text_to_be_present_in_element 某个元素文本包含某文字</li><li>text_to_be_present_in_element_value 某个元素值包含某文字</li><li>frame_to_be_available_and_switch_to_it frame加载并切换</li><li>invisibility_of_element_located 元素不可见</li><li>element_to_be_clickable 元素可点击</li><li>staleness_of 判断一个元素是否仍在DOM，可判断页面是否已经刷新</li><li>element_to_be_selected 元素可选择，传元素对象</li><li>element_located_to_be_selected 元素可选择，传入定位元组</li><li>element_selection_state_to_be 传入元素对象以及状态，相等返回True，否则返回False</li><li>element_located_selection_state_to_be 传入定位元组以及状态，相等返回True，否则返回False</li><li>alert_is_present 是否出现Alert</li></ul><p>更多操作</p><blockquote><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.support.expected_conditions\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.support.expected_conditions</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>10、前进后退</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time\nfrom selenium import webdriver\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.baidu.com/')\nbrowser.get('https://www.taobao.com/')\nbrowser.get('https://www.python.org/')\nbrowser.back()\ntime.sleep(1)\nbrowser.forward()\nbrowser.close()\n</code></pre></div><p><br></p><h2>11、Cookies</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.zhihu.com/explore')\n#### 获得cookies\nprint(browser.get_cookies())\n#### 添加cookie\nbrowser.add_cookie({'name': 'name', 'domain': 'www.zhihu.com', 'value': 'germey'})\nprint(browser.get_cookies())\n#### 删除所有cookies\nbrowser.delete_all_cookies()\nprint(browser.get_cookies())\n</code></pre></div><p><br></p><h2>12、选项卡管理</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time\nfrom selenium import webdriver\n\nbrowser = webdriver.Chrome()\nbrowser.get('https://www.baidu.com')\n#### 打开一个选项卡\nbrowser.execute_script('window.open()')\nprint(browser.window_handles)\n#### 选择第二个选项卡\nbrowser.switch_to_window(browser.window_handles[1])\nbrowser.get('https://www.taobao.com')\ntime.sleep(1)\nbrowser.switch_to_window(browser.window_handles[0])\nbrowser.get('https://python.org')\n</code></pre></div><p><br></p><h2>13、异常处理</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.common.exceptions import TimeoutException, NoSuchElementException\n\nbrowser = webdriver.Chrome()\ntry:\n    browser.get('https://www.baidu.com')\nexcept TimeoutException:\n    print('Time Out')\ntry:\n    browser.find_element_by_id('hello')\nexcept NoSuchElementException:\n    print('No Element')\nfinally:\n    browser.close()\n</code></pre></div><p><br></p><blockquote>作者：蒋蜀黍  Python爱好者社区专栏作者   授权原创发布，请勿转载，谢谢。<br>出处：<a href=\"http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s/hYBdkE5IEYNZo4vwoyfT4Q\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Selenium 库学习笔记<i class=\"icon-external\"></i></a>\n\n## TensorFlow\n#### Variable\n必须用到:\n    ```init = tf.initialize_all_variables() #初始化全部变量 \n    \n随后即可:\n    ```sess.run(init)\n## Tensorflow 笔记\n\n這是在對照官網學習時的前期入門筆記，其實和官網基本沒有區別，好吧，真的沒有區別。因爲官網真的寫的太好了。\n至於我爲什麼要寫出來，是因爲我之前寫在了紙上，對於邏輯的把握很給力，所以在寫一邊。\n\n不過TensorFlow 變動真的很大，版本更迭也很快，所以，下方只是理清邏輯，具體的東西還是去官網比較好。只不過我這兒網謎之很難等上去… \n\n 總而言之一句話，先搭好架子再選擇填充材料。就是它的核心邏輯了。而改進也是在架子基礎上去優化優化器。嗯…現在理解就是這樣。\n\n### 1\n#### 导入\n    import tensorflow as tf\n步骤：①构建计算图          ②运行计算图\n\n---\n\n#### 2\n##### Build a simple computational Graph\n    node1 = tf.contant(3.0, dtype = tf.float32)\n    node2 = tf.contant(4.0) #also tf.float32 impicitly\n    print (node1, node2)\n###### 输出为：\n    Tensor (\"Cast: 0\", shape = (), dtype = float)\n    Tensor (\"Cast_1: 0\", shape = (), dtype = float)\n打印并不输出值3.0，4.0，而在评估时分别产生3.0和4.0节点。欲实际评估节点，We must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.\n\n---\n\n#### 3\n##### Creates a session object , 然后调用``` run ```方法运行足够的computational graph to envlute node1 and node2\n    sess = tf.Session()\n    print (sess.run([node1, node2]))\n###### 输出为：     \n    [3.0,   4.0]        #可见预期值\n\n---\n\n#### 4\n##### We can build more complicated computations by combining Tensor nodes with operations\n    node3 = tf.add(node1, node2)\n    print (\"node3: \", node3)\n    print (\"sess.run(node3):\", sess.run(node3))\n###### 输出为：\n    node3:  Tensor(\"Add:0\", shape = (1,dtype = float32))\n    sess.run(node3): 7.0\n\n---\n\n#### 5\n##### 更进一步的，A graph can be parameterized. To accept external input , 称为```placeholders```\n    a = tf.placeholder(tf.float32)\n    b = tf.placeholder(tf.float32)\n    adder_note = a + b      #provide a shortcut for tf.add(a, b) and can with multiple input by using\n    print (sess.run(add_note, {a:3, b:4.5}))\n    print (sess.run(add_note, {a:[1, 3],  b:[2, 4]}))\n###### 输出为：\n    7.5\n    [3.  7.]\n##### 5.1\n##### more complex by adding anther aperation. for example:\n    add_and_triple = adder_note * 3\n    print (sess.run(add_and_triple, {a:3, b:4.5}))\n###### 输出为：\n    22.5\nIn ```TensorBoard```(Tensorflow圖形化界面): 图片.jpg        是下面```a+b```` 然后连接到```adder_node```  ,随后再连接到```y(add_and_triple)```\n##### 5.2\n##### That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : ```Variables``` allow us:\n    w = tf.Variables([  .3], dtype = tf.float32)\n    b = tf.Variables([ -  .3], dtype = tf.float32)\n    x = tf.placeholder(tf.float32)\n    linear_model = w * x + b        #线性模型\n\n---\n\n#### 6\n##### 使用```tf.constant``` :调用、初始化常数  用```tf.Vaiables``` :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:\n    init = tf.global_variables_initializer()\n    sess.run(init)\n\n---\n\n#### 7\n##### x is a placeholder, we can evaluate ```lnear_model``` for several values of x simultaneausly as follow:\n    print (sess.run(linear_model, {x:[1,2,3,4]}))\n###### 輸出爲：\n    [0.        0.30000001   0.60000002  0.90000004]\n\n---\n\n#### 8 \n##### 有以上結果並不知好壞，因此編寫損失函數：\n    y = tf.placeholder(tf.float32)\n    squared_deltas = tf.square(linear_model - y)        #平方（下方差和）\n    loss = tf.reduce_sum(squred_deltas)     #差和（上方平方）\n    print (sess.run)loss, {x:[1, 2, 3, 4], y:[0, -1, -2, -3]})\n###### 輸出爲：\n    23.66       #損失值：差平方和\n\n##### 8.1\n##### We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to ```tf.Variable``` but can be charged using operation like ```tf.assign```\n##### W = -1 and b = 1 are optimal parameters:(最優參數)\n    fixW = tf.assign(W, [-1.  ])\n    fixb = tf.assign(b,[1.  ])\n    sess.run(fixW, fixb)\n    print(sess.run(loss, {x:[1, 2, 3, 4],  y:[0, -1, -2, -3]}))\n###### 輸出爲：\n    0, 0  # The final print shows the loss now is zero !\n\n---\n\n#### 9\n##### 模型保存与加载：\n###### 保存：\n    saver = tf.train.Saver()    # 生成saver\n    with tf.Session() as sess:\n    sess.run(tf.global_variables_initializer()) # 先对模型初始化\n\n    # 然后将数据丢入模型进行训练blablabla\n\n    # 训练完以后，使用saver.save 来保存\n    saver.save(sess, \"save_path/file_name\") #file_name如果不存在的话，会自动创建\n###### 加载：\n    saver = tf.train.Saver()\n    with tf.Session() as sess:  #参数可以进行初始化，也可不进行初始化。即使初始化了，初始化的值也会被restore的值给覆盖\n    sess.run(tf.global_variables_initializer())\n    saver.restore(sess, \"save_path/file_name\")  #会将已经保存的变量值resotre到 变量中。\n\n---\n\n#### 10\n##### 图形化操作：\n    >http://blog.csdn.net/u014595019/article/details/53912710\n这篇写的还不错，等之后用过之后再写。\n\n\n---\n\n---\n\n#### Variable\n必须用到:\n\t```init = tf.initialize_all_variables()\t#初始化全部变量 \n\t\n随后即可:\n\t```sess.run(init)\n## Tensorflow 笔记\n\n這是在對照官網學習時的前期入門筆記，其實和官網基本沒有區別，好吧，真的沒有區別。因爲官網真的寫的太好了。\n至於我爲什麼要寫出來，是因爲我之前寫在了紙上，對於邏輯的把握很給力，所以在寫一邊。\n\n不過TensorFlow 變動真的很大，版本更迭也很快，所以，下方只是理清邏輯，具體的東西還是去官網比較好。只不過我這兒網謎之很難等上去… \n\n 總而言之一句話，先搭好架子再選擇填充材料。就是它的核心邏輯了。而改進也是在架子基礎上去優化優化器。嗯…現在理解就是這樣。\n\n### 1\n#### 导入\n\timport tensorflow as tf\n步骤：①构建计算图\t      \t②运行计算图\n\n---\n\n#### 2\n##### Build a simple computational Graph\n\tnode1 = tf.contant(3.0, dtype = tf.float32)\n\tnode2 = tf.contant(4.0)\t#also tf.float32 impicitly\n\tprint (node1, node2)\n###### 输出为：\n\tTensor (\"Cast: 0\", shape = (), dtype = float)\n\tTensor (\"Cast_1: 0\", shape = (), dtype = float)\n打印并不输出值3.0，4.0，而在评估时分别产生3.0和4.0节点。欲实际评估节点，We must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.\n\n---\n\n#### 3\n##### Creates a session object , 然后调用``` run ```方法运行足够的computational graph to envlute node1 and node2\n\tsess = tf.Session()\n\tprint (sess.run([node1, node2]))\n###### 输出为：  \t\n\t[3.0,   4.0]\t\t#可见预期值\n\n---\n\n#### 4\n##### We can build more complicated computations by combining Tensor nodes with operations\n\tnode3 = tf.add(node1, node2)\n\tprint (\"node3: \", node3)\n\tprint (\"sess.run(node3):\", sess.run(node3))\n###### 输出为：\n\tnode3:  Tensor(\"Add:0\", shape = (1,dtype = float32))\n\tsess.run(node3): 7.0\n\n---\n\n#### 5\n##### 更进一步的，A graph can be parameterized. To accept external input , 称为```placeholders```\n\ta = tf.placeholder(tf.float32)\n\tb = tf.placeholder(tf.float32)\n\tadder_note = a + b\t\t#provide a shortcut for tf.add(a, b) and can with multiple input by using\n\tprint (sess.run(add_note, {a:3, b:4.5}))\n\tprint (sess.run(add_note, {a:[1, 3],  b:[2, 4]}))\n###### 输出为：\n\t7.5\n\t[3.  7.]\n##### 5.1\n##### more complex by adding anther aperation. for example:\n\tadd_and_triple = adder_note * 3\n\tprint (sess.run(add_and_triple, {a:3, b:4.5}))\n###### 输出为：\n\t22.5\nIn ```TensorBoard```(Tensorflow圖形化界面): 图片.jpg\t\t是下面```a+b```` 然后连接到```adder_node```  ,随后再连接到```y(add_and_triple)```\n##### 5.2\n##### That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : ```Variables``` allow us:\n\tw = tf.Variables([  .3], dtype = tf.float32)\n\tb = tf.Variables([ -  .3], dtype = tf.float32)\n\tx = tf.placeholder(tf.float32)\n\tlinear_model = w * x + b\t\t#线性模型\n\n---\n\n#### 6\n##### 使用```tf.constant``` :调用、初始化常数  用```tf.Vaiables``` :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:\n\tinit = tf.global_variables_initializer()\n\tsess.run(init)\n\n---\n\n#### 7\n##### x is a placeholder, we can evaluate ```lnear_model``` for several values of x simultaneausly as follow:\n\tprint (sess.run(linear_model, {x:[1,2,3,4]}))\n###### 輸出爲：\n\t[0.        0.30000001   0.60000002  0.90000004]\n\n---\n\n#### 8 \n##### 有以上結果並不知好壞，因此編寫損失函數：\n\ty = tf.placeholder(tf.float32)\n\tsquared_deltas = tf.square(linear_model - y)\t\t#平方（下方差和）\n\tloss = tf.reduce_sum(squred_deltas)\t\t#差和（上方平方）\n\tprint (sess.run)loss, {x:[1, 2, 3, 4], y:[0, -1, -2, -3]})\n###### 輸出爲：\n\t23.66\t\t#損失值：差平方和\n\n##### 8.1\n##### We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to ```tf.Variable``` but can be charged using operation like ```tf.assign```\n##### W = -1 and b = 1 are optimal parameters:(最優參數)\n\tfixW = tf.assign(W, [-1.  ])\n\tfixb = tf.assign(b,[1.  ])\n\tsess.run(fixW, fixb)\n\tprint(sess.run(loss, {x:[1, 2, 3, 4],  y:[0, -1, -2, -3]}))\n###### 輸出爲：\n\t0, 0  # The final print shows the loss now is zero !\n\n---\n\n#### 9\n##### 模型保存与加载：\n###### 保存：\n\tsaver = tf.train.Saver()\t# 生成saver\n\twith tf.Session() as sess:\n\tsess.run(tf.global_variables_initializer())\t# 先对模型初始化\n\n\t# 然后将数据丢入模型进行训练blablabla\n\n\t# 训练完以后，使用saver.save 来保存\n\tsaver.save(sess, \"save_path/file_name\")\t#file_name如果不存在的话，会自动创建\n###### 加载：\n\tsaver = tf.train.Saver()\n\twith tf.Session() as sess:\t#参数可以进行初始化，也可不进行初始化。即使初始化了，初始化的值也会被restore的值给覆盖\n\tsess.run(tf.global_variables_initializer())\n\tsaver.restore(sess, \"save_path/file_name\")\t#会将已经保存的变量值resotre到 变量中。\n\n---\n\n#### 10\n##### 图形化操作：\n\t<http://blog.csdn.net/u014595019/article/details/53912710>\n这篇写的还不错，等之后用过之后再写。\n","published":1,"updated":"2021-05-08T02:56:02.688Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9kv005zu3yqgm5875ka","content":"<h1 id=\"Python-机器学习库-👽\"><a href=\"#Python-机器学习库-👽\" class=\"headerlink\" title=\"Python 机器学习库 👽\"></a>Python 机器学习库 👽</h1><h3 id=\"Plotly\"><a href=\"#Plotly\" class=\"headerlink\" title=\"Plotly\"></a>Plotly</h3><p>与matplotlib 都是绘图工具，不过效果炫一些，我也没画过，所以只放链接，不放实例了<br>    <a href=\"https://plot.ly/python/\">Plotly Python Library</a> :  <a href=\"https://plot.ly/python/\">https://plot.ly/python/</a></p>\n<h2 id=\"matplotlib\"><a href=\"#matplotlib\" class=\"headerlink\" title=\"matplotlib\"></a>matplotlib</h2><pre><code>import matplotlib.pyplot as plt\n</code></pre>\n<h3 id=\"参数等太多，链接最可靠\"><a href=\"#参数等太多，链接最可靠\" class=\"headerlink\" title=\"参数等太多，链接最可靠\"></a>参数等太多，链接最可靠</h3><p><a href=\"https://github.com/wizardforcel/matplotlib-user-guide-zh/blob/master/3.1.md\">pyplot参数</a></p>\n<p>还是粘一些常用的：<br>    marker 属性（下面写在分号里呦）<br>    o  .  v  ^   &lt;  &gt;  1  2 3 4  8  s  p  *   h  H  +  x  D  d   |   _  之类</p>\n<p><a href=\"http://blog.csdn.net/pipisorry/article/details/40005163\">画出一些“花儿”</a></p>\n<h3 id=\"绘图\"><a href=\"#绘图\" class=\"headerlink\" title=\"绘图\"></a>绘图</h3><pre><code>plt.plot(x, y)\n# 在y之后可添加参数，例如常用的label = ‘IamLabel’之类\n# 线的样式、颜色 ：b: blue  g: green    r: red  c: cyan m: magenta\ny: yellow   k: black    w: white\n&#39;-&#39; : solid , &#39;--&#39; : dashed, &#39;-.&#39; : dashdot &#39;:&#39; : dotted    &#39;   &#39;&#39;, &#39; &#39;   &#39;: None\n# 粗细 lw=3 更改数字\n# 数值折点显示样式 marker = ‘o’   \n\nplot.show()\n</code></pre>\n<h3 id=\"绘制图表\"><a href=\"#绘制图表\" class=\"headerlink\" title=\"绘制图表\"></a>绘制图表</h3><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h4><pre><code>plt.figure(1)\n绘图\nplt.figure(2)\n绘图\n</code></pre>\n<h4 id=\"2（未测试）\"><a href=\"#2（未测试）\" class=\"headerlink\" title=\"2（未测试）\"></a>2（未测试）</h4><pre><code>plt.figure(1)   # 创建图表1\nplt.figure(2)   # 创建图表2\nhi1 = plt.subplot(211)  # 在图表2中创建子图1\nhi2 = plt.subplot(212)  # 在图表2中创建子图2\n</code></pre>\n<h3 id=\"一表多图\"><a href=\"#一表多图\" class=\"headerlink\" title=\"一表多图\"></a>一表多图</h3><pre><code>pCapital = plt.subplot(4, 1, 1)\n    pCapital.set_ylabel(&quot;capital&quot;)\n    pCapital.plot(d[&#39;capitalList&#39;], color=&#39;r&#39;, lw=0.8)\nplt.show()\n</code></pre>\n<h3 id=\"标注点\"><a href=\"#标注点\" class=\"headerlink\" title=\"标注点\"></a>标注点</h3><h4 id=\"eg1\"><a href=\"#eg1\" class=\"headerlink\" title=\"eg1\"></a>eg1</h4><pre><code>for w, m in enumerate(self.lowestPrice):\n        if w % 120*10 == 0:\n            plt.plot([w, w], [m, self.highestPrice[w]], linestyle = &#39;--&#39;)\n        #plt.scatter(self.dealPoints,color = &#39;c&#39;)\nfor i in self.dealPoints:           \n    plt.scatter([i[0]], [i[1]], color = &#39;c&#39;)    \n    for ii in self.ydealPoints:\n    plt.scatter([ii[0]], [ii[1]], color = &#39;m&#39;)\n    \nplt.title(&#39;Tick &amp; TradePoint&#39;)\nplt.legend()\nplt.show()\n</code></pre>\n<p><b>plt.legend()</b><br>    # show() 之前不加这句是不会显示出标注的呦</p>\n<h4 id=\"eg2-还不晓得咋回事儿\"><a href=\"#eg2-还不晓得咋回事儿\" class=\"headerlink\" title=\"eg2(还不晓得咋回事儿)\"></a>eg2(还不晓得咋回事儿)</h4><pre><code>import numpy as np\nt = 2 * np.pi / 3\nplt.plot([t, t], [0, np.cos(t)], color=&#39;blue&#39;, linewidth=2.5, linestyle=&quot;--&quot;)\nplt.scatter([t, ], [np.cos(t), ], 50, color=&#39;blue&#39;)\n\nplt.annotate(r&#39;$sin(\\frac&#123;2\\pi&#125;&#123;3&#125;)=\\frac&#123;\\sqrt&#123;3&#125;&#125;&#123;2&#125;$&#39;,\n    xy=(t, np.sin(t)), xycoords=&#39;data&#39;,\n    xytext=(+10, +30), textcoords=&#39;offset points&#39;, fontsize=16,\n    arrowprops=dict(arrowstyle=&quot;-&gt;&quot;, connectionstyle=&quot;arc3,rad=.2&quot;))\n\nplt.plot([t, t],[0, np.sin(t)], color=&#39;red&#39;, linewidth=2.5, linestyle=&quot;--&quot;)\nplt.scatter([t, ],[np.sin(t), ], 50, color=&#39;red&#39;)\n\nplt.annotate(r&#39;$cos(\\frac&#123;2\\pi&#125;&#123;3&#125;)=-\\frac&#123;1&#125;&#123;2&#125;$&#39;,\n    xy=(t, np.cos(t)), xycoords=&#39;data&#39;,\n    xytext=(-90, -50), textcoords=&#39;offset points&#39;, fontsize=16,\narrowprops=dict(arrowstyle=&quot;-&gt;&quot;, connectionstyle=&quot;arc3,rad=.2&quot;))\n</code></pre>\n<h3 id=\"坐标标签显示方案\"><a href=\"#坐标标签显示方案\" class=\"headerlink\" title=\"坐标标签显示方案\"></a>坐标标签显示方案</h3><pre><code>plt.setp(plt.gca().get_xticklabels(), rotation=20, horizontalalignment=&#39;right&#39;)\n# 貌似除了角度和right，没有了修改内容\n</code></pre>\n<h3 id=\"来画一个动态图吧（感觉没啥作用所以就小标题了）\"><a href=\"#来画一个动态图吧（感觉没啥作用所以就小标题了）\" class=\"headerlink\" title=\"来画一个动态图吧（感觉没啥作用所以就小标题了）\"></a>来画一个动态图吧（感觉没啥作用所以就小标题了）</h3><pre><code>import matplotlib.pyplot as plt\nfrom matplotlib.patches import Circle\nimport numpy as np\nimport math\n\nplt.close()  #clf() # 清图  cla() # 清坐标轴 close() # 关窗口\nfig=plt.figure()\nax=fig.add_subplot(1,1,1)\nax.axis(&quot;equal&quot;) #设置图像显示的时候XY轴比例\nplt.grid(True) #添加网格\nplt.ion()   #interactive mode on打开交互模式 而不是plt.show()\nIniObsX=0000\nIniObsY=4000\nIniObsAngle=135\nIniObsSpeed=10*math.sqrt(2)   #米/秒\nprint(&#39;开始仿真&#39;)\ntry:\n    for t in range(180):\n            #障碍物船只轨迹             \n        obsX=IniObsX+IniObsSpeed*math.sin(IniObsAngle/180*math.pi)*t\n        obsY=IniObsY+IniObsSpeed*math.cos(IniObsAngle/180*math.pi)*t\n        ax.scatter(obsX,obsY,c=&#39;b&#39;,marker=&#39;.&#39;)  \n        #散点图\n        #ax.lines.pop(1)  删除轨迹\n        #下面的图,两船的距离\n        plt.pause(0.1)\nexcept Exception as err:\n    print(err)\n</code></pre>\n<h2 id=\"pandas\"><a href=\"#pandas\" class=\"headerlink\" title=\"pandas\"></a>pandas</h2><h3 id=\"DataFrame\"><a href=\"#DataFrame\" class=\"headerlink\" title=\"DataFrame\"></a>DataFrame</h3><pre><code>import pandas as pd\nimport numpy as np\na = &#123;&#39;a&#39;:[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;], &#39;b&#39;:[1,2,3], &#39;c&#39;:[&#39;lo&#39;, &#39;hel&#39;, &#39;hi&#39;], &#39;d&#39;:[7,8,9]&#125;\n\ndf = pd.DataFrame(a)\n# 字典转换为dataFrame（每一个Key 和 Value构成一列，key为列标）\ndf = df.set_index(&#39;a&#39;)\n# 将‘a‘列设置为行标\nsr = pd.Series(a)\nsr2 = df[&#39;b&#39;]\n\ndf[[&#39;b&#39;,&#39;c&#39;]].to_records()[1][&#39;b&#39;]\ndf[[&#39;b&#39;,&#39;c&#39;]]\n</code></pre>\n<h4 id=\"columns-index\"><a href=\"#columns-index\" class=\"headerlink\" title=\"columns  index\"></a>columns  index</h4><pre><code>列，参数(行)\n</code></pre>\n<h4 id=\"取用方法\"><a href=\"#取用方法\" class=\"headerlink\" title=\"取用方法\"></a>取用方法</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dfValue.loc[indexKey][colKey]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"一个将DataFrame字符串化之后重新解析的程序😓\"><a href=\"#一个将DataFrame字符串化之后重新解析的程序😓\" class=\"headerlink\" title=\"一个将DataFrame字符串化之后重新解析的程序😓\"></a>一个将<code>DataFrame</code>字符串化之后重新解析的程序😓</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parseSTR</span>(<span class=\"params\">self, _str, indexKey, colKey, setIndexNum=<span class=\"number\">0</span>, setColNum=<span class=\"number\">0</span></span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    通过setIndexNum来确定第几列数据为行标题， setColNum确定使用第几行数据作为列标题</span></span><br><span class=\"line\"><span class=\"string\">    返回通过indexKey行标题 与 colKey列标题 确定的结果</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    rows = _<span class=\"built_in\">str</span>.split(<span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\">    columns = rows[<span class=\"number\">0</span>].split(<span class=\"string\">&#x27;,&#x27;</span>)[<span class=\"number\">1</span>:]</span><br><span class=\"line\">    tempRow = []</span><br><span class=\"line\">    index = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> rows[<span class=\"number\">1</span>:]:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(row):</span><br><span class=\"line\">            index.append(row.split(<span class=\"string\">&#x27;,&#x27;</span>)[setIndexNum])</span><br><span class=\"line\">            tempRow.append(row.split(<span class=\"string\">&#x27;,&#x27;</span>)[<span class=\"number\">1</span>:])</span><br><span class=\"line\">    dfValue = pd.DataFrame(tempRow, index=index, columns=columns)</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfValue.loc[indexKey][colKey]</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">u&#x27;【error:】信息不全&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">None</span></span><br></pre></td></tr></table></figure>\n<p>Emm,有点儿…  嗯…   嗯…<br>[^_^]:<br>    2018年6月21日17点17分</p>\n<h2 id=\"numpy\"><a href=\"#numpy\" class=\"headerlink\" title=\"numpy\"></a>numpy</h2><h3 id=\"random\"><a href=\"#random\" class=\"headerlink\" title=\"random\"></a>random</h3><pre><code>random.seed(int类型) \n# 理解可以为设定开始随机的开始，也就是说每次设定之后再开始取值就会得到相同的随机数()\n</code></pre>\n<p>即<br>    np.random.seed(1)<br>    np.random.random(1)  </p>\n<pre><code>np.random.seed(1)   \nnp.random.random(1)\n</code></pre>\n<blockquote>\n<p>array([ 0.417022])</p>\n</blockquote>\n<blockquote>\n<p>array([ 0.417022])</p>\n</blockquote>\n<h4 id=\"标准差\"><a href=\"#标准差\" class=\"headerlink\" title=\"标准差\"></a>标准差</h4><pre><code>a = np.arange(10)\nnp.std(a)\na.std()\n</code></pre>\n<h5 id=\"样本标准差\"><a href=\"#样本标准差\" class=\"headerlink\" title=\"样本标准差\"></a>样本标准差</h5><pre><code>a.std(ddof = 1)\nnp.std(a, ddof = 1)\n</code></pre>\n<p>以上 a.std 只有当a为&lt;type ‘numpy.ndarray’&gt;  即用numpy生成的矩阵，array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])才可有，如果是python的列表list 则只能用np.std 来算</p>\n<h2 id=\"scikit-learn\"><a href=\"#scikit-learn\" class=\"headerlink\" title=\"scikit-learn\"></a>scikit-learn</h2><h2 id=\"OpenCV\"><a href=\"#OpenCV\" class=\"headerlink\" title=\"OpenCV\"></a>OpenCV</h2><h3 id=\"Insatll\"><a href=\"#Insatll\" class=\"headerlink\" title=\"Insatll\"></a>Insatll</h3><p>caffe：</p>\n<pre><code>sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler\nsudo apt-get install --no-install-recommends libboost-all-dev\n\nsudo apt-get install libatlas-base-dev\n\nsudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev\n</code></pre>\n<h2 id=\"PIL\"><a href=\"#PIL\" class=\"headerlink\" title=\"PIL\"></a>PIL</h2><pre><code>his = im.histogram()\n</code></pre>\n<p>values = {}</p>\n<p>for i in range(256):<br>    values[i] = his[i]</p>\n<p>for j,k in sorted(values.items(),key=lambda x:x[1],reverse = True)[:10]:<br>    print j,k</p>\n<h1 id=\"爬虫\"><a href=\"#爬虫\" class=\"headerlink\" title=\"爬虫\"></a>爬虫</h1><p> 先<a href=\"https://edu.hellobi.com/course/156/reviews\">链接</a> 为实例视频教程，貌似不错，还没看。</p>\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>虽然, 以前已经积累了一些东西, 知道</p>\n<ul>\n<li>headers</li>\n<li>cookie<br>啥的, 但今天突然碰到了这个报错:<blockquote>\n<p>Caused by SSLError(SSLError(“bad handshake: Error([(‘SSL routines’, ‘tls_process_server_certificate’, ‘certificate verify failed’)])</p>\n</blockquote>\n</li>\n</ul>\n<p>没见过, 之后碰到其余, 统一汇总在此.</p>\n<h3 id=\"SSLError-HTTPS\"><a href=\"#SSLError-HTTPS\" class=\"headerlink\" title=\"SSLError HTTPS\"></a>SSLError HTTPS</h3><p>有人指点到: 因用<code>https</code>的缘故, 其中报 <code>verify failed</code> 所以可以通过</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">requests.get(url, verify=<span class=\"literal\">False</span>)</span><br></pre></td></tr></table></figure>\n<p>将<code>verify</code>关闭可通过.</p>\n<h2 id=\"Selenium\"><a href=\"#Selenium\" class=\"headerlink\" title=\"Selenium\"></a>Selenium</h2><h4 id=\"从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…\"><a href=\"#从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…\" class=\"headerlink\" title=\"从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…\"></a>从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…</h4><h2>1、基本使用</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.taobao.com/&#39;\">https://www.taobao.com/&#39;</a>)</p>\n<h4 id=\"显示等待10s\"><a href=\"#显示等待10s\" class=\"headerlink\" title=\"显示等待10s\"></a>显示等待10s</h4><p>wait = WebDriverWait(browser, 10)</p>\n<h4 id=\"等待直到元素加载出\"><a href=\"#等待直到元素加载出\" class=\"headerlink\" title=\"等待直到元素加载出\"></a>等待直到元素加载出</h4><p>input = wait.until(EC.presence_of_element_located((By.ID, ‘q’)))</p>\n<h4 id=\"等待直到元素可点击\"><a href=\"#等待直到元素可点击\" class=\"headerlink\" title=\"等待直到元素可点击\"></a>等待直到元素可点击</h4><p>button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, ‘.btn-search’)))<br>print(input, button)<br>from selenium import webdriver<br>from selenium.webdriver.common.by import By<br>from selenium.webdriver.common.keys import Keys<br>from selenium.webdriver.support import expected_conditions as EC<br>from selenium.webdriver.support.wait import WebDriverWait</p>\n<h4 id=\"创建一个浏览器对象\"><a href=\"#创建一个浏览器对象\" class=\"headerlink\" title=\"创建一个浏览器对象\"></a>创建一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>try:<br>    # 开启一个浏览器并访问<a href=\"https://www.baidu.com/\">https://www.baidu.com</a><br>    browser.get(‘<a href=\"https://www.baidu.com&/#39;\">https://www.baidu.com&#39;</a>)<br>    # 在打开的网页响应中根据id查找元素   获取到查询框<br>    input = browser.find_element_by_id(‘kw’)<br>    # 向查询框中输入Python<br>    input.send_keys(‘Python’)<br>    # 模拟回车<br>    input.send_keys(Keys.ENTER)<br>    # 显示等待， 等待10秒<br>    wait = WebDriverWait(browser, 10)<br>    # 显式等待指定某个条件，然后设置最长等待时间。如果在这个时间还没有找到元素，那么便会抛出异常<br>    wait.until(EC.presence_of_element_located((By.ID,’content_left’)))<br>    # 输出当前的url<br>    print(browser.current_url)<br>    # 输出Cookies<br>    print(browser.get_cookies())<br>    # 输出页面响应内容<br>    print(browser.page_source)<br>finally:<br>    pass<br>    # 关闭浏览器<br>    browser.close()<br></code></pre></div><p><br></p><h2>2、Selenium声明浏览器对象</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()<br>browser = webdriver.Firefox()<br>browser = webdriver.Edge()<br>browser = webdriver.PhantomJS()<br>browser = webdriver.Safari()<br></code></pre></div><p><br></p><h2>3、查找元素</h2><h2>3.1、查找单个元素</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<h4 id=\"申明一个浏览器对象\"><a href=\"#申明一个浏览器对象\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()</p>\n<h4 id=\"使用浏览器访问淘宝\"><a href=\"#使用浏览器访问淘宝\" class=\"headerlink\" title=\"使用浏览器访问淘宝\"></a>使用浏览器访问淘宝</h4><p>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)</p>\n<h4 id=\"在响应结果中通过id查找元素\"><a href=\"#在响应结果中通过id查找元素\" class=\"headerlink\" title=\"在响应结果中通过id查找元素\"></a>在响应结果中通过id查找元素</h4><p>input_first = browser.find_element_by_id(‘q’)</p>\n<h4 id=\"在响应结果中通过css选择器查找元素\"><a href=\"#在响应结果中通过css选择器查找元素\" class=\"headerlink\" title=\"在响应结果中通过css选择器查找元素\"></a>在响应结果中通过css选择器查找元素</h4><p>input_second = browser.find_element_by_css_selector(‘#q’)</p>\n<h4 id=\"在响应结果中通过xpath查找元素\"><a href=\"#在响应结果中通过xpath查找元素\" class=\"headerlink\" title=\"在响应结果中通过xpath查找元素\"></a>在响应结果中通过xpath查找元素</h4><p>input_third = browser.find_element_by_xpath(‘//*[@id=”q”]’)<br>print(input_first)<br>print(input_second)<br>print(input_third)<br>browser.close()<br></code></pre></div><ul><li>find_element_by_name   通过name查找</li><li>find_element_by_xpath  通过xpath查找</li><li>find_element_by_link_text   通过链接查找</li><li>find_element_by_partial_link_text    通过部分链接查找</li><li>find_element_by_tag_name   通过标签名称查找</li><li>find_element_by_class_name   通过类名查找</li><li>find_element_by_css_selector  通过css选择武器查找</li></ul><p><br></p><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-1\"><a href=\"#申明一个浏览器对象-1\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()</p>\n<h4 id=\"使用浏览器访问淘宝-1\"><a href=\"#使用浏览器访问淘宝-1\" class=\"headerlink\" title=\"使用浏览器访问淘宝\"></a>使用浏览器访问淘宝</h4><p>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)</p>\n<h4 id=\"第二种方式，通过使用By-xxx指定查找方式\"><a href=\"#第二种方式，通过使用By-xxx指定查找方式\" class=\"headerlink\" title=\"第二种方式，通过使用By.xxx指定查找方式\"></a>第二种方式，通过使用By.xxx指定查找方式</h4><p>input = browser.find_element(By.ID,’q’)<br>print(input)<br>browser.close()<br></code></pre></div><h2>3.2、多个元素</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-2\"><a href=\"#申明一个浏览器对象-2\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()</p>\n<h4 id=\"使用浏览器访问淘宝-2\"><a href=\"#使用浏览器访问淘宝-2\" class=\"headerlink\" title=\"使用浏览器访问淘宝\"></a>使用浏览器访问淘宝</h4><p>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)</p>\n<h4 id=\"根据选择查找多个元素\"><a href=\"#根据选择查找多个元素\" class=\"headerlink\" title=\"根据选择查找多个元素\"></a>根据选择查找多个元素</h4><p>input_first = browser.find_elements_by_css_selector(‘.service-bd li’)<br>input_second = browser.find_elements(By.CSS_SELECTOR,’.service-bd li’)<br>print(input_first)<br>print(input_second)<br>browser.close()<br></code></pre></div><ul><li>find_elements_by_name</li><li>find_elements_by_xpath</li><li>find_elements_by_link_text</li><li>find_elements_by_partial_link_text</li><li>find_elements_by_tag_name</li><li>find_elements_by_class_name</li><li>find_elements_by_css_selector</li></ul><p><br></p><p><br></p><h2>4、元素交互操作</h2><blockquote>对获取的元素调用交互方法 </blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time<br>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-3\"><a href=\"#申明一个浏览器对象-3\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()</p>\n<h4 id=\"使用浏览器访问淘宝-3\"><a href=\"#使用浏览器访问淘宝-3\" class=\"headerlink\" title=\"使用浏览器访问淘宝\"></a>使用浏览器访问淘宝</h4><p>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)</p>\n<h4 id=\"根据ID查找元素\"><a href=\"#根据ID查找元素\" class=\"headerlink\" title=\"根据ID查找元素\"></a>根据ID查找元素</h4><p>input_search = browser.find_element(By.ID,’q’)</p>\n<h4 id=\"模拟输入PSV到输入框\"><a href=\"#模拟输入PSV到输入框\" class=\"headerlink\" title=\"模拟输入PSV到输入框\"></a>模拟输入PSV到输入框</h4><p>input_search.send_keys(‘PSV’)<br>time.sleep(2)</p>\n<h4 id=\"清空输入\"><a href=\"#清空输入\" class=\"headerlink\" title=\"清空输入\"></a>清空输入</h4><p>input_search.clear()<br>input_search.send_keys(‘3DS’)<br>button = browser.find_element(By.CLASS_NAME,’btn-search’)</p>\n<h4 id=\"模拟点击\"><a href=\"#模拟点击\" class=\"headerlink\" title=\"模拟点击\"></a>模拟点击</h4><p>button.click()<br></code></pre></div><blockquote>更多的操作 <br><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.remote.webelement\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.remote.webelement</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>5、交互动作</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver import ActionChains</p>\n<p>browser = webdriver.Chrome()<br>url = ‘<a href=\"http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#39;\">http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#39;</a><br>browser.get(url)</p>\n<h4 id=\"切换id为iframeResult的frame\"><a href=\"#切换id为iframeResult的frame\" class=\"headerlink\" title=\"切换id为iframeResult的frame\"></a>切换id为iframeResult的frame</h4><p>browser.switch_to.frame(‘iframeResult’)<br>source = browser.find_element_by_css_selector(‘#draggable’)<br>target = browser.find_element_by_css_selector(‘#droppable’)<br>actions = ActionChains(browser)<br>actions.drag_and_drop(source, target)<br>actions.perform()<br></code></pre></div><blockquote>更多操作<br><br><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.common.action_chains\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.common.action_chains</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>6、执行JavaScript</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<h4 id=\"申明一个浏览器对象-4\"><a href=\"#申明一个浏览器对象-4\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)</p>\n<h4 id=\"执行JavaScript脚本\"><a href=\"#执行JavaScript脚本\" class=\"headerlink\" title=\"执行JavaScript脚本\"></a>执行JavaScript脚本</h4><p>browser.execute_script(‘window.scrollTo(0, document.body.scrollHeight)’)<br>browser.execute_script(‘alert(“To Bottom”)’)<br></code></pre></div><h2>7、获取元素信息</h2><h2>7.1、获取属性</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-5\"><a href=\"#申明一个浏览器对象-5\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)<br>logo = browser.find_element(By.ID,’zh-top-link-logo’)</p>\n<h4 id=\"获取属性\"><a href=\"#获取属性\" class=\"headerlink\" title=\"获取属性\"></a>获取属性</h4><p>print(logo.get_attribute(‘class’))<br>print(logo)<br>browser.close()<br></code></pre></div><h2>7.2、获取文本值</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-6\"><a href=\"#申明一个浏览器对象-6\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)<br>submit = browser.find_element(By.ID,’zu-top-add-question’)</p>\n<h4 id=\"获取文本值\"><a href=\"#获取文本值\" class=\"headerlink\" title=\"获取文本值\"></a>获取文本值</h4><p>print(submit.text)<br>print(submit)<br>browser.close()<br></code></pre></div><h2>7.3、获取ID、位置、标签名、大小</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-7\"><a href=\"#申明一个浏览器对象-7\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)<br>submit = browser.find_element(By.ID,’zu-top-add-question’)</p>\n<h4 id=\"获取id-0-04584255991652042-1\"><a href=\"#获取id-0-04584255991652042-1\" class=\"headerlink\" title=\"获取id   0.04584255991652042-1\"></a>获取id   0.04584255991652042-1</h4><p>print(submit.id)</p>\n<h4 id=\"获取位置-‘y’-7-‘x’-675\"><a href=\"#获取位置-‘y’-7-‘x’-675\" class=\"headerlink\" title=\"获取位置  &#123;‘y’: 7, ‘x’: 675&#125;\"></a>获取位置  &#123;‘y’: 7, ‘x’: 675&#125;</h4><p>print(submit.location)</p>\n<h4 id=\"获取标签名称-button\"><a href=\"#获取标签名称-button\" class=\"headerlink\" title=\"获取标签名称    button\"></a>获取标签名称    button</h4><p>print(submit.tag_name)</p>\n<h4 id=\"获取大小-‘width’-66-‘height’-32\"><a href=\"#获取大小-‘width’-66-‘height’-32\" class=\"headerlink\" title=\"获取大小  &#123;‘width’: 66, ‘height’: 32&#125;\"></a>获取大小  &#123;‘width’: 66, ‘height’: 32&#125;</h4><p>print(submit.size)<br>browser.close()<br></code></pre></div><h2>8、Frame</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.common.exceptions import NoSuchElementException</p>\n<p>browser = webdriver.Chrome()<br>url = ‘<a href=\"http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#39;\">http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#39;</a><br>browser.get(url)</p>\n<h4 id=\"将操作的响应数据换成iframeResult\"><a href=\"#将操作的响应数据换成iframeResult\" class=\"headerlink\" title=\"将操作的响应数据换成iframeResult\"></a>将操作的响应数据换成iframeResult</h4><p>browser.switch_to.frame(‘iframeResult’)<br>source = browser.find_element_by_css_selector(‘#draggable’)<br>print(source)<br>try:<br>    logo = browser.find_element_by_class_name(‘logo’)<br>except NoSuchElementException:<br>    print(‘NO LOGO’)</p>\n<h4 id=\"切换成父元素\"><a href=\"#切换成父元素\" class=\"headerlink\" title=\"切换成父元素\"></a>切换成父元素</h4><p>browser.switch_to.parent_frame()<br>logo = browser.find_element_by_class_name(‘logo’)<br>print(logo)<br>print(logo.text)<br></code></pre></div><p><br></p><h2>9、等待</h2><h2>9.1、隐式等待</h2><blockquote>当使用了隐式等待执行测试的时候，如果 WebDriver没有在 DOM中找到元素，将继续等待，超出设定时间后则抛出找不到元素的异常, 换句话说，当查找元素或元素并没有立即出现的时候，隐式等待将等待一段时间再查找 DOM，默认的时间是0</blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()</p>\n<h4 id=\"等待10秒\"><a href=\"#等待10秒\" class=\"headerlink\" title=\"等待10秒\"></a>等待10秒</h4><p>browser.implicitly_wait(10)<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)<br>input = browser.find_element_by_class_name(‘zu-top-add-question’)<br>print(input)<br></code></pre></div><h2>9.2、显示等待</h2><blockquote>显式等待指定某个条件，然后设置最长等待时间。如果在这个时间还没有找到元素，那么便会抛出异常了。 </blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By<br>from selenium.webdriver.support import expected_conditions as EC<br>from selenium.webdriver.support.wait import WebDriverWait</p>\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.taobao.com/&#39;\">https://www.taobao.com/&#39;</a>)</p>\n<h4 id=\"显示等待10s-1\"><a href=\"#显示等待10s-1\" class=\"headerlink\" title=\"显示等待10s\"></a>显示等待10s</h4><p>wait = WebDriverWait(browser, 10)</p>\n<h4 id=\"等待直到元素加载出-1\"><a href=\"#等待直到元素加载出-1\" class=\"headerlink\" title=\"等待直到元素加载出\"></a>等待直到元素加载出</h4><p>input = wait.until(EC.presence_of_element_located((By.ID, ‘q’)))</p>\n<h4 id=\"等待直到元素可点击-1\"><a href=\"#等待直到元素可点击-1\" class=\"headerlink\" title=\"等待直到元素可点击\"></a>等待直到元素可点击</h4><p>button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, ‘.btn-search’)))<br>print(input, button)<br></code></pre></div><ul><li>title_is 标题是某内容</li><li>title_contains 标题包含某内容</li><li>presence_of_element_located 元素加载出，传入定位元组，如(By.ID, ‘p’)</li><li>visibility_of_element_located 元素可见，传入定位元组</li><li>visibility_of 可见，传入元素对象</li><li>presence_of_all_elements_located 所有元素加载出</li><li>text_to_be_present_in_element 某个元素文本包含某文字</li><li>text_to_be_present_in_element_value 某个元素值包含某文字</li><li>frame_to_be_available_and_switch_to_it frame加载并切换</li><li>invisibility_of_element_located 元素不可见</li><li>element_to_be_clickable 元素可点击</li><li>staleness_of 判断一个元素是否仍在DOM，可判断页面是否已经刷新</li><li>element_to_be_selected 元素可选择，传元素对象</li><li>element_located_to_be_selected 元素可选择，传入定位元组</li><li>element_selection_state_to_be 传入元素对象以及状态，相等返回True，否则返回False</li><li>element_located_selection_state_to_be 传入定位元组以及状态，相等返回True，否则返回False</li><li>alert_is_present 是否出现Alert</li></ul><p>更多操作</p><blockquote><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.support.expected_conditions\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.support.expected_conditions</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>10、前进后退</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time<br>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.baidu.com/&#39;\">https://www.baidu.com/&#39;</a>)<br>browser.get(‘<a href=\"https://www.taobao.com/&#39;\">https://www.taobao.com/&#39;</a>)<br>browser.get(‘<a href=\"https://www.python.org/&#39;\">https://www.python.org/&#39;</a>)<br>browser.back()<br>time.sleep(1)<br>browser.forward()<br>browser.close()<br></code></pre></div><p><br></p><h2>11、Cookies</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)</p>\n<h4 id=\"获得cookies\"><a href=\"#获得cookies\" class=\"headerlink\" title=\"获得cookies\"></a>获得cookies</h4><p>print(browser.get_cookies())</p>\n<h4 id=\"添加cookie\"><a href=\"#添加cookie\" class=\"headerlink\" title=\"添加cookie\"></a>添加cookie</h4><p>browser.add_cookie(&#123;‘name’: ‘name’, ‘domain’: ‘<a href=\"http://www.zhihu.com&/#39;\">www.zhihu.com&#39;</a>, ‘value’: ‘germey’&#125;)<br>print(browser.get_cookies())</p>\n<h4 id=\"删除所有cookies\"><a href=\"#删除所有cookies\" class=\"headerlink\" title=\"删除所有cookies\"></a>删除所有cookies</h4><p>browser.delete_all_cookies()<br>print(browser.get_cookies())<br></code></pre></div><p><br></p><h2>12、选项卡管理</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time<br>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.baidu.com&/#39;\">https://www.baidu.com&#39;</a>)</p>\n<h4 id=\"打开一个选项卡\"><a href=\"#打开一个选项卡\" class=\"headerlink\" title=\"打开一个选项卡\"></a>打开一个选项卡</h4><p>browser.execute_script(‘window.open()’)<br>print(browser.window_handles)</p>\n<h4 id=\"选择第二个选项卡\"><a href=\"#选择第二个选项卡\" class=\"headerlink\" title=\"选择第二个选项卡\"></a>选择第二个选项卡</h4><p>browser.switch_to_window(browser.window_handles[1])<br>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)<br>time.sleep(1)<br>browser.switch_to_window(browser.window_handles[0])<br>browser.get(‘<a href=\"https://python.org&/#39;\">https://python.org&#39;</a>)<br></code></pre></div><p><br></p><h2>13、异常处理</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.common.exceptions import TimeoutException, NoSuchElementException</p>\n<p>browser = webdriver.Chrome()<br>try:<br>    browser.get(‘<a href=\"https://www.baidu.com&/#39;\">https://www.baidu.com&#39;</a>)<br>except TimeoutException:<br>    print(‘Time Out’)<br>try:<br>    browser.find_element_by_id(‘hello’)<br>except NoSuchElementException:<br>    print(‘No Element’)<br>finally:<br>    browser.close()<br></code></pre></div><p><br></p><blockquote>作者：蒋蜀黍  Python爱好者社区专栏作者   授权原创发布，请勿转载，谢谢。<br>出处：<a href=\"http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s/hYBdkE5IEYNZo4vwoyfT4Q\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Selenium 库学习笔记<i class=\"icon-external\"></i></a></p>\n<h2 id=\"TensorFlow\"><a href=\"#TensorFlow\" class=\"headerlink\" title=\"TensorFlow\"></a>TensorFlow</h2><h4 id=\"Variable\"><a href=\"#Variable\" class=\"headerlink\" title=\"Variable\"></a>Variable</h4><p>必须用到:<br>    ```init = tf.initialize_all_variables() #初始化全部变量 </p>\n<p>随后即可:<br>    ```sess.run(init)</p>\n<h2 id=\"Tensorflow-笔记\"><a href=\"#Tensorflow-笔记\" class=\"headerlink\" title=\"Tensorflow 笔记\"></a>Tensorflow 笔记</h2><p>這是在對照官網學習時的前期入門筆記，其實和官網基本沒有區別，好吧，真的沒有區別。因爲官網真的寫的太好了。<br>至於我爲什麼要寫出來，是因爲我之前寫在了紙上，對於邏輯的把握很給力，所以在寫一邊。</p>\n<p>不過TensorFlow 變動真的很大，版本更迭也很快，所以，下方只是理清邏輯，具體的東西還是去官網比較好。只不過我這兒網謎之很難等上去… </p>\n<p> 總而言之一句話，先搭好架子再選擇填充材料。就是它的核心邏輯了。而改進也是在架子基礎上去優化優化器。嗯…現在理解就是這樣。</p>\n<h3 id=\"1-1\"><a href=\"#1-1\" class=\"headerlink\" title=\"1\"></a>1</h3><h4 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h4><pre><code>import tensorflow as tf\n</code></pre>\n<p>步骤：①构建计算图          ②运行计算图</p>\n<hr>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><h5 id=\"Build-a-simple-computational-Graph\"><a href=\"#Build-a-simple-computational-Graph\" class=\"headerlink\" title=\"Build a simple computational Graph\"></a>Build a simple computational Graph</h5><pre><code>node1 = tf.contant(3.0, dtype = tf.float32)\nnode2 = tf.contant(4.0) #also tf.float32 impicitly\nprint (node1, node2)\n</code></pre>\n<h6 id=\"输出为：\"><a href=\"#输出为：\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>Tensor (&quot;Cast: 0&quot;, shape = (), dtype = float)\nTensor (&quot;Cast_1: 0&quot;, shape = (), dtype = float)\n</code></pre>\n<p>打印并不输出值3.0，4.0，而在评估时分别产生3.0和4.0节点。欲实际评估节点，We must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.</p>\n<hr>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h4><h5 id=\"Creates-a-session-object-然后调用run方法运行足够的computational-graph-to-envlute-node1-and-node2\"><a href=\"#Creates-a-session-object-然后调用run方法运行足够的computational-graph-to-envlute-node1-and-node2\" class=\"headerlink\" title=\"Creates a session object , 然后调用run方法运行足够的computational graph to envlute node1 and node2\"></a>Creates a session object , 然后调用<code>run</code>方法运行足够的computational graph to envlute node1 and node2</h5><pre><code>sess = tf.Session()\nprint (sess.run([node1, node2]))\n</code></pre>\n<h6 id=\"输出为：-1\"><a href=\"#输出为：-1\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>[3.0,   4.0]        #可见预期值\n</code></pre>\n<hr>\n<h4 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h4><h5 id=\"We-can-build-more-complicated-computations-by-combining-Tensor-nodes-with-operations\"><a href=\"#We-can-build-more-complicated-computations-by-combining-Tensor-nodes-with-operations\" class=\"headerlink\" title=\"We can build more complicated computations by combining Tensor nodes with operations\"></a>We can build more complicated computations by combining Tensor nodes with operations</h5><pre><code>node3 = tf.add(node1, node2)\nprint (&quot;node3: &quot;, node3)\nprint (&quot;sess.run(node3):&quot;, sess.run(node3))\n</code></pre>\n<h6 id=\"输出为：-2\"><a href=\"#输出为：-2\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>node3:  Tensor(&quot;Add:0&quot;, shape = (1,dtype = float32))\nsess.run(node3): 7.0\n</code></pre>\n<hr>\n<h4 id=\"5\"><a href=\"#5\" class=\"headerlink\" title=\"5\"></a>5</h4><h5 id=\"更进一步的，A-graph-can-be-parameterized-To-accept-external-input-称为placeholders\"><a href=\"#更进一步的，A-graph-can-be-parameterized-To-accept-external-input-称为placeholders\" class=\"headerlink\" title=\"更进一步的，A graph can be parameterized. To accept external input , 称为placeholders\"></a>更进一步的，A graph can be parameterized. To accept external input , 称为<code>placeholders</code></h5><pre><code>a = tf.placeholder(tf.float32)\nb = tf.placeholder(tf.float32)\nadder_note = a + b      #provide a shortcut for tf.add(a, b) and can with multiple input by using\nprint (sess.run(add_note, &#123;a:3, b:4.5&#125;))\nprint (sess.run(add_note, &#123;a:[1, 3],  b:[2, 4]&#125;))\n</code></pre>\n<h6 id=\"输出为：-3\"><a href=\"#输出为：-3\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>7.5\n[3.  7.]\n</code></pre>\n<h5 id=\"5-1\"><a href=\"#5-1\" class=\"headerlink\" title=\"5.1\"></a>5.1</h5><h5 id=\"more-complex-by-adding-anther-aperation-for-example\"><a href=\"#more-complex-by-adding-anther-aperation-for-example\" class=\"headerlink\" title=\"more complex by adding anther aperation. for example:\"></a>more complex by adding anther aperation. for example:</h5><pre><code>add_and_triple = adder_note * 3\nprint (sess.run(add_and_triple, &#123;a:3, b:4.5&#125;))\n</code></pre>\n<h6 id=\"输出为：-4\"><a href=\"#输出为：-4\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>22.5\n</code></pre>\n<p>In <code>TensorBoard</code>(Tensorflow圖形化界面): 图片.jpg        是下面<code>a+b```` 然后连接到</code>adder_node<code>  ,随后再连接到</code>y(add_and_triple)```</p>\n<h5 id=\"5-2\"><a href=\"#5-2\" class=\"headerlink\" title=\"5.2\"></a>5.2</h5><h5 id=\"That-a-model-that-can-take-arbitary-inputs-To-mode-the-modeel-trainable-need-to-modify-the-graph-to-get-new-a-outputs-with-the-some-input-Variables-allow-us\"><a href=\"#That-a-model-that-can-take-arbitary-inputs-To-mode-the-modeel-trainable-need-to-modify-the-graph-to-get-new-a-outputs-with-the-some-input-Variables-allow-us\" class=\"headerlink\" title=\"That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : Variables allow us:\"></a>That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : <code>Variables</code> allow us:</h5><pre><code>w = tf.Variables([  .3], dtype = tf.float32)\nb = tf.Variables([ -  .3], dtype = tf.float32)\nx = tf.placeholder(tf.float32)\nlinear_model = w * x + b        #线性模型\n</code></pre>\n<hr>\n<h4 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6\"></a>6</h4><h5 id=\"使用tf-constant-调用、初始化常数-用tf-Vaiables-變量不被初始化，調用欲初始化所有變量，必須calll-a-special-operation\"><a href=\"#使用tf-constant-调用、初始化常数-用tf-Vaiables-變量不被初始化，調用欲初始化所有變量，必須calll-a-special-operation\" class=\"headerlink\" title=\"使用tf.constant :调用、初始化常数  用tf.Vaiables :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:\"></a>使用<code>tf.constant</code> :调用、初始化常数  用<code>tf.Vaiables</code> :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:</h5><pre><code>init = tf.global_variables_initializer()\nsess.run(init)\n</code></pre>\n<hr>\n<h4 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h4><h5 id=\"x-is-a-placeholder-we-can-evaluate-lnear-model-for-several-values-of-x-simultaneausly-as-follow\"><a href=\"#x-is-a-placeholder-we-can-evaluate-lnear-model-for-several-values-of-x-simultaneausly-as-follow\" class=\"headerlink\" title=\"x is a placeholder, we can evaluate lnear_model for several values of x simultaneausly as follow:\"></a>x is a placeholder, we can evaluate <code>lnear_model</code> for several values of x simultaneausly as follow:</h5><pre><code>print (sess.run(linear_model, &#123;x:[1,2,3,4]&#125;))\n</code></pre>\n<h6 id=\"輸出爲：\"><a href=\"#輸出爲：\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>[0.        0.30000001   0.60000002  0.90000004]\n</code></pre>\n<hr>\n<h4 id=\"8\"><a href=\"#8\" class=\"headerlink\" title=\"8\"></a>8</h4><h5 id=\"有以上結果並不知好壞，因此編寫損失函數：\"><a href=\"#有以上結果並不知好壞，因此編寫損失函數：\" class=\"headerlink\" title=\"有以上結果並不知好壞，因此編寫損失函數：\"></a>有以上結果並不知好壞，因此編寫損失函數：</h5><pre><code>y = tf.placeholder(tf.float32)\nsquared_deltas = tf.square(linear_model - y)        #平方（下方差和）\nloss = tf.reduce_sum(squred_deltas)     #差和（上方平方）\nprint (sess.run)loss, &#123;x:[1, 2, 3, 4], y:[0, -1, -2, -3]&#125;)\n</code></pre>\n<h6 id=\"輸出爲：-1\"><a href=\"#輸出爲：-1\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>23.66       #損失值：差平方和\n</code></pre>\n<h5 id=\"8-1\"><a href=\"#8-1\" class=\"headerlink\" title=\"8.1\"></a>8.1</h5><h5 id=\"We-could-improve-this-manually-W-b-to-perfact-values-of-1-and-1-A-variable-is-initializef-to-the-value-provided-to-tf-Variable-but-can-be-charged-using-operation-like-tf-assign\"><a href=\"#We-could-improve-this-manually-W-b-to-perfact-values-of-1-and-1-A-variable-is-initializef-to-the-value-provided-to-tf-Variable-but-can-be-charged-using-operation-like-tf-assign\" class=\"headerlink\" title=\"We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to tf.Variable but can be charged using operation like tf.assign\"></a>We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to <code>tf.Variable</code> but can be charged using operation like <code>tf.assign</code></h5><h5 id=\"W-1-and-b-1-are-optimal-parameters-最優參數\"><a href=\"#W-1-and-b-1-are-optimal-parameters-最優參數\" class=\"headerlink\" title=\"W = -1 and b = 1 are optimal parameters:(最優參數)\"></a>W = -1 and b = 1 are optimal parameters:(最優參數)</h5><pre><code>fixW = tf.assign(W, [-1.  ])\nfixb = tf.assign(b,[1.  ])\nsess.run(fixW, fixb)\nprint(sess.run(loss, &#123;x:[1, 2, 3, 4],  y:[0, -1, -2, -3]&#125;))\n</code></pre>\n<h6 id=\"輸出爲：-2\"><a href=\"#輸出爲：-2\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>0, 0  # The final print shows the loss now is zero !\n</code></pre>\n<hr>\n<h4 id=\"9\"><a href=\"#9\" class=\"headerlink\" title=\"9\"></a>9</h4><h5 id=\"模型保存与加载：\"><a href=\"#模型保存与加载：\" class=\"headerlink\" title=\"模型保存与加载：\"></a>模型保存与加载：</h5><h6 id=\"保存：\"><a href=\"#保存：\" class=\"headerlink\" title=\"保存：\"></a>保存：</h6><pre><code>saver = tf.train.Saver()    # 生成saver\nwith tf.Session() as sess:\nsess.run(tf.global_variables_initializer()) # 先对模型初始化\n\n# 然后将数据丢入模型进行训练blablabla\n\n# 训练完以后，使用saver.save 来保存\nsaver.save(sess, &quot;save_path/file_name&quot;) #file_name如果不存在的话，会自动创建\n</code></pre>\n<h6 id=\"加载：\"><a href=\"#加载：\" class=\"headerlink\" title=\"加载：\"></a>加载：</h6><pre><code>saver = tf.train.Saver()\nwith tf.Session() as sess:  #参数可以进行初始化，也可不进行初始化。即使初始化了，初始化的值也会被restore的值给覆盖\nsess.run(tf.global_variables_initializer())\nsaver.restore(sess, &quot;save_path/file_name&quot;)  #会将已经保存的变量值resotre到 变量中。\n</code></pre>\n<hr>\n<h4 id=\"10\"><a href=\"#10\" class=\"headerlink\" title=\"10\"></a>10</h4><h5 id=\"图形化操作：\"><a href=\"#图形化操作：\" class=\"headerlink\" title=\"图形化操作：\"></a>图形化操作：</h5><pre><code>&gt;http://blog.csdn.net/u014595019/article/details/53912710\n</code></pre>\n<p>这篇写的还不错，等之后用过之后再写。</p>\n<hr>\n<hr>\n<h4 id=\"Variable-1\"><a href=\"#Variable-1\" class=\"headerlink\" title=\"Variable\"></a>Variable</h4><p>必须用到:<br>    ```init = tf.initialize_all_variables()    #初始化全部变量 </p>\n<p>随后即可:<br>    ```sess.run(init)</p>\n<h2 id=\"Tensorflow-笔记-1\"><a href=\"#Tensorflow-笔记-1\" class=\"headerlink\" title=\"Tensorflow 笔记\"></a>Tensorflow 笔记</h2><p>這是在對照官網學習時的前期入門筆記，其實和官網基本沒有區別，好吧，真的沒有區別。因爲官網真的寫的太好了。<br>至於我爲什麼要寫出來，是因爲我之前寫在了紙上，對於邏輯的把握很給力，所以在寫一邊。</p>\n<p>不過TensorFlow 變動真的很大，版本更迭也很快，所以，下方只是理清邏輯，具體的東西還是去官網比較好。只不過我這兒網謎之很難等上去… </p>\n<p> 總而言之一句話，先搭好架子再選擇填充材料。就是它的核心邏輯了。而改進也是在架子基礎上去優化優化器。嗯…現在理解就是這樣。</p>\n<h3 id=\"1-2\"><a href=\"#1-2\" class=\"headerlink\" title=\"1\"></a>1</h3><h4 id=\"导入-1\"><a href=\"#导入-1\" class=\"headerlink\" title=\"导入\"></a>导入</h4><pre><code>import tensorflow as tf\n</code></pre>\n<p>步骤：①构建计算图              ②运行计算图</p>\n<hr>\n<h4 id=\"2-1\"><a href=\"#2-1\" class=\"headerlink\" title=\"2\"></a>2</h4><h5 id=\"Build-a-simple-computational-Graph-1\"><a href=\"#Build-a-simple-computational-Graph-1\" class=\"headerlink\" title=\"Build a simple computational Graph\"></a>Build a simple computational Graph</h5><pre><code>node1 = tf.contant(3.0, dtype = tf.float32)\nnode2 = tf.contant(4.0)    #also tf.float32 impicitly\nprint (node1, node2)\n</code></pre>\n<h6 id=\"输出为：-5\"><a href=\"#输出为：-5\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>Tensor (&quot;Cast: 0&quot;, shape = (), dtype = float)\nTensor (&quot;Cast_1: 0&quot;, shape = (), dtype = float)\n</code></pre>\n<p>打印并不输出值3.0，4.0，而在评估时分别产生3.0和4.0节点。欲实际评估节点，We must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.</p>\n<hr>\n<h4 id=\"3-1\"><a href=\"#3-1\" class=\"headerlink\" title=\"3\"></a>3</h4><h5 id=\"Creates-a-session-object-然后调用run方法运行足够的computational-graph-to-envlute-node1-and-node2-1\"><a href=\"#Creates-a-session-object-然后调用run方法运行足够的computational-graph-to-envlute-node1-and-node2-1\" class=\"headerlink\" title=\"Creates a session object , 然后调用run方法运行足够的computational graph to envlute node1 and node2\"></a>Creates a session object , 然后调用<code>run</code>方法运行足够的computational graph to envlute node1 and node2</h5><pre><code>sess = tf.Session()\nprint (sess.run([node1, node2]))\n</code></pre>\n<h6 id=\"输出为：-6\"><a href=\"#输出为：-6\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>[3.0,   4.0]        #可见预期值\n</code></pre>\n<hr>\n<h4 id=\"4-1\"><a href=\"#4-1\" class=\"headerlink\" title=\"4\"></a>4</h4><h5 id=\"We-can-build-more-complicated-computations-by-combining-Tensor-nodes-with-operations-1\"><a href=\"#We-can-build-more-complicated-computations-by-combining-Tensor-nodes-with-operations-1\" class=\"headerlink\" title=\"We can build more complicated computations by combining Tensor nodes with operations\"></a>We can build more complicated computations by combining Tensor nodes with operations</h5><pre><code>node3 = tf.add(node1, node2)\nprint (&quot;node3: &quot;, node3)\nprint (&quot;sess.run(node3):&quot;, sess.run(node3))\n</code></pre>\n<h6 id=\"输出为：-7\"><a href=\"#输出为：-7\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>node3:  Tensor(&quot;Add:0&quot;, shape = (1,dtype = float32))\nsess.run(node3): 7.0\n</code></pre>\n<hr>\n<h4 id=\"5-1\"><a href=\"#5-1\" class=\"headerlink\" title=\"5\"></a>5</h4><h5 id=\"更进一步的，A-graph-can-be-parameterized-To-accept-external-input-称为placeholders-1\"><a href=\"#更进一步的，A-graph-can-be-parameterized-To-accept-external-input-称为placeholders-1\" class=\"headerlink\" title=\"更进一步的，A graph can be parameterized. To accept external input , 称为placeholders\"></a>更进一步的，A graph can be parameterized. To accept external input , 称为<code>placeholders</code></h5><pre><code>a = tf.placeholder(tf.float32)\nb = tf.placeholder(tf.float32)\nadder_note = a + b        #provide a shortcut for tf.add(a, b) and can with multiple input by using\nprint (sess.run(add_note, &#123;a:3, b:4.5&#125;))\nprint (sess.run(add_note, &#123;a:[1, 3],  b:[2, 4]&#125;))\n</code></pre>\n<h6 id=\"输出为：-8\"><a href=\"#输出为：-8\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>7.5\n[3.  7.]\n</code></pre>\n<h5 id=\"5-1-1\"><a href=\"#5-1-1\" class=\"headerlink\" title=\"5.1\"></a>5.1</h5><h5 id=\"more-complex-by-adding-anther-aperation-for-example-1\"><a href=\"#more-complex-by-adding-anther-aperation-for-example-1\" class=\"headerlink\" title=\"more complex by adding anther aperation. for example:\"></a>more complex by adding anther aperation. for example:</h5><pre><code>add_and_triple = adder_note * 3\nprint (sess.run(add_and_triple, &#123;a:3, b:4.5&#125;))\n</code></pre>\n<h6 id=\"输出为：-9\"><a href=\"#输出为：-9\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>22.5\n</code></pre>\n<p>In <code>TensorBoard</code>(Tensorflow圖形化界面): 图片.jpg        是下面<code>a+b```` 然后连接到</code>adder_node<code>  ,随后再连接到</code>y(add_and_triple)```</p>\n<h5 id=\"5-2-1\"><a href=\"#5-2-1\" class=\"headerlink\" title=\"5.2\"></a>5.2</h5><h5 id=\"That-a-model-that-can-take-arbitary-inputs-To-mode-the-modeel-trainable-need-to-modify-the-graph-to-get-new-a-outputs-with-the-some-input-Variables-allow-us-1\"><a href=\"#That-a-model-that-can-take-arbitary-inputs-To-mode-the-modeel-trainable-need-to-modify-the-graph-to-get-new-a-outputs-with-the-some-input-Variables-allow-us-1\" class=\"headerlink\" title=\"That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : Variables allow us:\"></a>That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : <code>Variables</code> allow us:</h5><pre><code>w = tf.Variables([  .3], dtype = tf.float32)\nb = tf.Variables([ -  .3], dtype = tf.float32)\nx = tf.placeholder(tf.float32)\nlinear_model = w * x + b        #线性模型\n</code></pre>\n<hr>\n<h4 id=\"6-1\"><a href=\"#6-1\" class=\"headerlink\" title=\"6\"></a>6</h4><h5 id=\"使用tf-constant-调用、初始化常数-用tf-Vaiables-變量不被初始化，調用欲初始化所有變量，必須calll-a-special-operation-1\"><a href=\"#使用tf-constant-调用、初始化常数-用tf-Vaiables-變量不被初始化，調用欲初始化所有變量，必須calll-a-special-operation-1\" class=\"headerlink\" title=\"使用tf.constant :调用、初始化常数  用tf.Vaiables :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:\"></a>使用<code>tf.constant</code> :调用、初始化常数  用<code>tf.Vaiables</code> :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:</h5><pre><code>init = tf.global_variables_initializer()\nsess.run(init)\n</code></pre>\n<hr>\n<h4 id=\"7-1\"><a href=\"#7-1\" class=\"headerlink\" title=\"7\"></a>7</h4><h5 id=\"x-is-a-placeholder-we-can-evaluate-lnear-model-for-several-values-of-x-simultaneausly-as-follow-1\"><a href=\"#x-is-a-placeholder-we-can-evaluate-lnear-model-for-several-values-of-x-simultaneausly-as-follow-1\" class=\"headerlink\" title=\"x is a placeholder, we can evaluate lnear_model for several values of x simultaneausly as follow:\"></a>x is a placeholder, we can evaluate <code>lnear_model</code> for several values of x simultaneausly as follow:</h5><pre><code>print (sess.run(linear_model, &#123;x:[1,2,3,4]&#125;))\n</code></pre>\n<h6 id=\"輸出爲：-3\"><a href=\"#輸出爲：-3\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>[0.        0.30000001   0.60000002  0.90000004]\n</code></pre>\n<hr>\n<h4 id=\"8-1\"><a href=\"#8-1\" class=\"headerlink\" title=\"8\"></a>8</h4><h5 id=\"有以上結果並不知好壞，因此編寫損失函數：-1\"><a href=\"#有以上結果並不知好壞，因此編寫損失函數：-1\" class=\"headerlink\" title=\"有以上結果並不知好壞，因此編寫損失函數：\"></a>有以上結果並不知好壞，因此編寫損失函數：</h5><pre><code>y = tf.placeholder(tf.float32)\nsquared_deltas = tf.square(linear_model - y)        #平方（下方差和）\nloss = tf.reduce_sum(squred_deltas)        #差和（上方平方）\nprint (sess.run)loss, &#123;x:[1, 2, 3, 4], y:[0, -1, -2, -3]&#125;)\n</code></pre>\n<h6 id=\"輸出爲：-4\"><a href=\"#輸出爲：-4\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>23.66        #損失值：差平方和\n</code></pre>\n<h5 id=\"8-1-1\"><a href=\"#8-1-1\" class=\"headerlink\" title=\"8.1\"></a>8.1</h5><h5 id=\"We-could-improve-this-manually-W-b-to-perfact-values-of-1-and-1-A-variable-is-initializef-to-the-value-provided-to-tf-Variable-but-can-be-charged-using-operation-like-tf-assign-1\"><a href=\"#We-could-improve-this-manually-W-b-to-perfact-values-of-1-and-1-A-variable-is-initializef-to-the-value-provided-to-tf-Variable-but-can-be-charged-using-operation-like-tf-assign-1\" class=\"headerlink\" title=\"We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to tf.Variable but can be charged using operation like tf.assign\"></a>We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to <code>tf.Variable</code> but can be charged using operation like <code>tf.assign</code></h5><h5 id=\"W-1-and-b-1-are-optimal-parameters-最優參數-1\"><a href=\"#W-1-and-b-1-are-optimal-parameters-最優參數-1\" class=\"headerlink\" title=\"W = -1 and b = 1 are optimal parameters:(最優參數)\"></a>W = -1 and b = 1 are optimal parameters:(最優參數)</h5><pre><code>fixW = tf.assign(W, [-1.  ])\nfixb = tf.assign(b,[1.  ])\nsess.run(fixW, fixb)\nprint(sess.run(loss, &#123;x:[1, 2, 3, 4],  y:[0, -1, -2, -3]&#125;))\n</code></pre>\n<h6 id=\"輸出爲：-5\"><a href=\"#輸出爲：-5\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>0, 0  # The final print shows the loss now is zero !\n</code></pre>\n<hr>\n<h4 id=\"9-1\"><a href=\"#9-1\" class=\"headerlink\" title=\"9\"></a>9</h4><h5 id=\"模型保存与加载：-1\"><a href=\"#模型保存与加载：-1\" class=\"headerlink\" title=\"模型保存与加载：\"></a>模型保存与加载：</h5><h6 id=\"保存：-1\"><a href=\"#保存：-1\" class=\"headerlink\" title=\"保存：\"></a>保存：</h6><pre><code>saver = tf.train.Saver()    # 生成saver\nwith tf.Session() as sess:\nsess.run(tf.global_variables_initializer())    # 先对模型初始化\n\n# 然后将数据丢入模型进行训练blablabla\n\n# 训练完以后，使用saver.save 来保存\nsaver.save(sess, &quot;save_path/file_name&quot;)    #file_name如果不存在的话，会自动创建\n</code></pre>\n<h6 id=\"加载：-1\"><a href=\"#加载：-1\" class=\"headerlink\" title=\"加载：\"></a>加载：</h6><pre><code>saver = tf.train.Saver()\nwith tf.Session() as sess:    #参数可以进行初始化，也可不进行初始化。即使初始化了，初始化的值也会被restore的值给覆盖\nsess.run(tf.global_variables_initializer())\nsaver.restore(sess, &quot;save_path/file_name&quot;)    #会将已经保存的变量值resotre到 变量中。\n</code></pre>\n<hr>\n<h4 id=\"10-1\"><a href=\"#10-1\" class=\"headerlink\" title=\"10\"></a>10</h4><h5 id=\"图形化操作：-1\"><a href=\"#图形化操作：-1\" class=\"headerlink\" title=\"图形化操作：\"></a>图形化操作：</h5><pre><code>&lt;http://blog.csdn.net/u014595019/article/details/53912710&gt;\n</code></pre>\n<p>这篇写的还不错，等之后用过之后再写。</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Python-机器学习库-👽\"><a href=\"#Python-机器学习库-👽\" class=\"headerlink\" title=\"Python 机器学习库 👽\"></a>Python 机器学习库 👽</h1><h3 id=\"Plotly\"><a href=\"#Plotly\" class=\"headerlink\" title=\"Plotly\"></a>Plotly</h3><p>与matplotlib 都是绘图工具，不过效果炫一些，我也没画过，所以只放链接，不放实例了<br>    <a href=\"https://plot.ly/python/\">Plotly Python Library</a> :  <a href=\"https://plot.ly/python/\">https://plot.ly/python/</a></p>\n<h2 id=\"matplotlib\"><a href=\"#matplotlib\" class=\"headerlink\" title=\"matplotlib\"></a>matplotlib</h2><pre><code>import matplotlib.pyplot as plt\n</code></pre>\n<h3 id=\"参数等太多，链接最可靠\"><a href=\"#参数等太多，链接最可靠\" class=\"headerlink\" title=\"参数等太多，链接最可靠\"></a>参数等太多，链接最可靠</h3><p><a href=\"https://github.com/wizardforcel/matplotlib-user-guide-zh/blob/master/3.1.md\">pyplot参数</a></p>\n<p>还是粘一些常用的：<br>    marker 属性（下面写在分号里呦）<br>    o  .  v  ^   &lt;  &gt;  1  2 3 4  8  s  p  *   h  H  +  x  D  d   |   _  之类</p>\n<p><a href=\"http://blog.csdn.net/pipisorry/article/details/40005163\">画出一些“花儿”</a></p>\n<h3 id=\"绘图\"><a href=\"#绘图\" class=\"headerlink\" title=\"绘图\"></a>绘图</h3><pre><code>plt.plot(x, y)\n# 在y之后可添加参数，例如常用的label = ‘IamLabel’之类\n# 线的样式、颜色 ：b: blue  g: green    r: red  c: cyan m: magenta\ny: yellow   k: black    w: white\n&#39;-&#39; : solid , &#39;--&#39; : dashed, &#39;-.&#39; : dashdot &#39;:&#39; : dotted    &#39;   &#39;&#39;, &#39; &#39;   &#39;: None\n# 粗细 lw=3 更改数字\n# 数值折点显示样式 marker = ‘o’   \n\nplot.show()\n</code></pre>\n<h3 id=\"绘制图表\"><a href=\"#绘制图表\" class=\"headerlink\" title=\"绘制图表\"></a>绘制图表</h3><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h4><pre><code>plt.figure(1)\n绘图\nplt.figure(2)\n绘图\n</code></pre>\n<h4 id=\"2（未测试）\"><a href=\"#2（未测试）\" class=\"headerlink\" title=\"2（未测试）\"></a>2（未测试）</h4><pre><code>plt.figure(1)   # 创建图表1\nplt.figure(2)   # 创建图表2\nhi1 = plt.subplot(211)  # 在图表2中创建子图1\nhi2 = plt.subplot(212)  # 在图表2中创建子图2\n</code></pre>\n<h3 id=\"一表多图\"><a href=\"#一表多图\" class=\"headerlink\" title=\"一表多图\"></a>一表多图</h3><pre><code>pCapital = plt.subplot(4, 1, 1)\n    pCapital.set_ylabel(&quot;capital&quot;)\n    pCapital.plot(d[&#39;capitalList&#39;], color=&#39;r&#39;, lw=0.8)\nplt.show()\n</code></pre>\n<h3 id=\"标注点\"><a href=\"#标注点\" class=\"headerlink\" title=\"标注点\"></a>标注点</h3><h4 id=\"eg1\"><a href=\"#eg1\" class=\"headerlink\" title=\"eg1\"></a>eg1</h4><pre><code>for w, m in enumerate(self.lowestPrice):\n        if w % 120*10 == 0:\n            plt.plot([w, w], [m, self.highestPrice[w]], linestyle = &#39;--&#39;)\n        #plt.scatter(self.dealPoints,color = &#39;c&#39;)\nfor i in self.dealPoints:           \n    plt.scatter([i[0]], [i[1]], color = &#39;c&#39;)    \n    for ii in self.ydealPoints:\n    plt.scatter([ii[0]], [ii[1]], color = &#39;m&#39;)\n    \nplt.title(&#39;Tick &amp; TradePoint&#39;)\nplt.legend()\nplt.show()\n</code></pre>\n<p><b>plt.legend()</b><br>    # show() 之前不加这句是不会显示出标注的呦</p>\n<h4 id=\"eg2-还不晓得咋回事儿\"><a href=\"#eg2-还不晓得咋回事儿\" class=\"headerlink\" title=\"eg2(还不晓得咋回事儿)\"></a>eg2(还不晓得咋回事儿)</h4><pre><code>import numpy as np\nt = 2 * np.pi / 3\nplt.plot([t, t], [0, np.cos(t)], color=&#39;blue&#39;, linewidth=2.5, linestyle=&quot;--&quot;)\nplt.scatter([t, ], [np.cos(t), ], 50, color=&#39;blue&#39;)\n\nplt.annotate(r&#39;$sin(\\frac&#123;2\\pi&#125;&#123;3&#125;)=\\frac&#123;\\sqrt&#123;3&#125;&#125;&#123;2&#125;$&#39;,\n    xy=(t, np.sin(t)), xycoords=&#39;data&#39;,\n    xytext=(+10, +30), textcoords=&#39;offset points&#39;, fontsize=16,\n    arrowprops=dict(arrowstyle=&quot;-&gt;&quot;, connectionstyle=&quot;arc3,rad=.2&quot;))\n\nplt.plot([t, t],[0, np.sin(t)], color=&#39;red&#39;, linewidth=2.5, linestyle=&quot;--&quot;)\nplt.scatter([t, ],[np.sin(t), ], 50, color=&#39;red&#39;)\n\nplt.annotate(r&#39;$cos(\\frac&#123;2\\pi&#125;&#123;3&#125;)=-\\frac&#123;1&#125;&#123;2&#125;$&#39;,\n    xy=(t, np.cos(t)), xycoords=&#39;data&#39;,\n    xytext=(-90, -50), textcoords=&#39;offset points&#39;, fontsize=16,\narrowprops=dict(arrowstyle=&quot;-&gt;&quot;, connectionstyle=&quot;arc3,rad=.2&quot;))\n</code></pre>\n<h3 id=\"坐标标签显示方案\"><a href=\"#坐标标签显示方案\" class=\"headerlink\" title=\"坐标标签显示方案\"></a>坐标标签显示方案</h3><pre><code>plt.setp(plt.gca().get_xticklabels(), rotation=20, horizontalalignment=&#39;right&#39;)\n# 貌似除了角度和right，没有了修改内容\n</code></pre>\n<h3 id=\"来画一个动态图吧（感觉没啥作用所以就小标题了）\"><a href=\"#来画一个动态图吧（感觉没啥作用所以就小标题了）\" class=\"headerlink\" title=\"来画一个动态图吧（感觉没啥作用所以就小标题了）\"></a>来画一个动态图吧（感觉没啥作用所以就小标题了）</h3><pre><code>import matplotlib.pyplot as plt\nfrom matplotlib.patches import Circle\nimport numpy as np\nimport math\n\nplt.close()  #clf() # 清图  cla() # 清坐标轴 close() # 关窗口\nfig=plt.figure()\nax=fig.add_subplot(1,1,1)\nax.axis(&quot;equal&quot;) #设置图像显示的时候XY轴比例\nplt.grid(True) #添加网格\nplt.ion()   #interactive mode on打开交互模式 而不是plt.show()\nIniObsX=0000\nIniObsY=4000\nIniObsAngle=135\nIniObsSpeed=10*math.sqrt(2)   #米/秒\nprint(&#39;开始仿真&#39;)\ntry:\n    for t in range(180):\n            #障碍物船只轨迹             \n        obsX=IniObsX+IniObsSpeed*math.sin(IniObsAngle/180*math.pi)*t\n        obsY=IniObsY+IniObsSpeed*math.cos(IniObsAngle/180*math.pi)*t\n        ax.scatter(obsX,obsY,c=&#39;b&#39;,marker=&#39;.&#39;)  \n        #散点图\n        #ax.lines.pop(1)  删除轨迹\n        #下面的图,两船的距离\n        plt.pause(0.1)\nexcept Exception as err:\n    print(err)\n</code></pre>\n<h2 id=\"pandas\"><a href=\"#pandas\" class=\"headerlink\" title=\"pandas\"></a>pandas</h2><h3 id=\"DataFrame\"><a href=\"#DataFrame\" class=\"headerlink\" title=\"DataFrame\"></a>DataFrame</h3><pre><code>import pandas as pd\nimport numpy as np\na = &#123;&#39;a&#39;:[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;], &#39;b&#39;:[1,2,3], &#39;c&#39;:[&#39;lo&#39;, &#39;hel&#39;, &#39;hi&#39;], &#39;d&#39;:[7,8,9]&#125;\n\ndf = pd.DataFrame(a)\n# 字典转换为dataFrame（每一个Key 和 Value构成一列，key为列标）\ndf = df.set_index(&#39;a&#39;)\n# 将‘a‘列设置为行标\nsr = pd.Series(a)\nsr2 = df[&#39;b&#39;]\n\ndf[[&#39;b&#39;,&#39;c&#39;]].to_records()[1][&#39;b&#39;]\ndf[[&#39;b&#39;,&#39;c&#39;]]\n</code></pre>\n<h4 id=\"columns-index\"><a href=\"#columns-index\" class=\"headerlink\" title=\"columns  index\"></a>columns  index</h4><pre><code>列，参数(行)\n</code></pre>\n<h4 id=\"取用方法\"><a href=\"#取用方法\" class=\"headerlink\" title=\"取用方法\"></a>取用方法</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dfValue.loc[indexKey][colKey]</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"一个将DataFrame字符串化之后重新解析的程序😓\"><a href=\"#一个将DataFrame字符串化之后重新解析的程序😓\" class=\"headerlink\" title=\"一个将DataFrame字符串化之后重新解析的程序😓\"></a>一个将<code>DataFrame</code>字符串化之后重新解析的程序😓</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">parseSTR</span>(<span class=\"params\">self, _str, indexKey, colKey, setIndexNum=<span class=\"number\">0</span>, setColNum=<span class=\"number\">0</span></span>):</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    通过setIndexNum来确定第几列数据为行标题， setColNum确定使用第几行数据作为列标题</span></span><br><span class=\"line\"><span class=\"string\">    返回通过indexKey行标题 与 colKey列标题 确定的结果</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    rows = _<span class=\"built_in\">str</span>.split(<span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\">    columns = rows[<span class=\"number\">0</span>].split(<span class=\"string\">&#x27;,&#x27;</span>)[<span class=\"number\">1</span>:]</span><br><span class=\"line\">    tempRow = []</span><br><span class=\"line\">    index = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> rows[<span class=\"number\">1</span>:]:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(row):</span><br><span class=\"line\">            index.append(row.split(<span class=\"string\">&#x27;,&#x27;</span>)[setIndexNum])</span><br><span class=\"line\">            tempRow.append(row.split(<span class=\"string\">&#x27;,&#x27;</span>)[<span class=\"number\">1</span>:])</span><br><span class=\"line\">    dfValue = pd.DataFrame(tempRow, index=index, columns=columns)</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dfValue.loc[indexKey][colKey]</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">u&#x27;【error:】信息不全&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">None</span></span><br></pre></td></tr></table></figure>\n<p>Emm,有点儿…  嗯…   嗯…<br>[^_^]:<br>    2018年6月21日17点17分</p>\n<h2 id=\"numpy\"><a href=\"#numpy\" class=\"headerlink\" title=\"numpy\"></a>numpy</h2><h3 id=\"random\"><a href=\"#random\" class=\"headerlink\" title=\"random\"></a>random</h3><pre><code>random.seed(int类型) \n# 理解可以为设定开始随机的开始，也就是说每次设定之后再开始取值就会得到相同的随机数()\n</code></pre>\n<p>即<br>    np.random.seed(1)<br>    np.random.random(1)  </p>\n<pre><code>np.random.seed(1)   \nnp.random.random(1)\n</code></pre>\n<blockquote>\n<p>array([ 0.417022])</p>\n</blockquote>\n<blockquote>\n<p>array([ 0.417022])</p>\n</blockquote>\n<h4 id=\"标准差\"><a href=\"#标准差\" class=\"headerlink\" title=\"标准差\"></a>标准差</h4><pre><code>a = np.arange(10)\nnp.std(a)\na.std()\n</code></pre>\n<h5 id=\"样本标准差\"><a href=\"#样本标准差\" class=\"headerlink\" title=\"样本标准差\"></a>样本标准差</h5><pre><code>a.std(ddof = 1)\nnp.std(a, ddof = 1)\n</code></pre>\n<p>以上 a.std 只有当a为&lt;type ‘numpy.ndarray’&gt;  即用numpy生成的矩阵，array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])才可有，如果是python的列表list 则只能用np.std 来算</p>\n<h2 id=\"scikit-learn\"><a href=\"#scikit-learn\" class=\"headerlink\" title=\"scikit-learn\"></a>scikit-learn</h2><h2 id=\"OpenCV\"><a href=\"#OpenCV\" class=\"headerlink\" title=\"OpenCV\"></a>OpenCV</h2><h3 id=\"Insatll\"><a href=\"#Insatll\" class=\"headerlink\" title=\"Insatll\"></a>Insatll</h3><p>caffe：</p>\n<pre><code>sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler\nsudo apt-get install --no-install-recommends libboost-all-dev\n\nsudo apt-get install libatlas-base-dev\n\nsudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev\n</code></pre>\n<h2 id=\"PIL\"><a href=\"#PIL\" class=\"headerlink\" title=\"PIL\"></a>PIL</h2><pre><code>his = im.histogram()\n</code></pre>\n<p>values = {}</p>\n<p>for i in range(256):<br>    values[i] = his[i]</p>\n<p>for j,k in sorted(values.items(),key=lambda x:x[1],reverse = True)[:10]:<br>    print j,k</p>\n<h1 id=\"爬虫\"><a href=\"#爬虫\" class=\"headerlink\" title=\"爬虫\"></a>爬虫</h1><p> 先<a href=\"https://edu.hellobi.com/course/156/reviews\">链接</a> 为实例视频教程，貌似不错，还没看。</p>\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>虽然, 以前已经积累了一些东西, 知道</p>\n<ul>\n<li>headers</li>\n<li>cookie<br>啥的, 但今天突然碰到了这个报错:<blockquote>\n<p>Caused by SSLError(SSLError(“bad handshake: Error([(‘SSL routines’, ‘tls_process_server_certificate’, ‘certificate verify failed’)])</p>\n</blockquote>\n</li>\n</ul>\n<p>没见过, 之后碰到其余, 统一汇总在此.</p>\n<h3 id=\"SSLError-HTTPS\"><a href=\"#SSLError-HTTPS\" class=\"headerlink\" title=\"SSLError HTTPS\"></a>SSLError HTTPS</h3><p>有人指点到: 因用<code>https</code>的缘故, 其中报 <code>verify failed</code> 所以可以通过</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">requests.get(url, verify=<span class=\"literal\">False</span>)</span><br></pre></td></tr></table></figure>\n<p>将<code>verify</code>关闭可通过.</p>\n<h2 id=\"Selenium\"><a href=\"#Selenium\" class=\"headerlink\" title=\"Selenium\"></a>Selenium</h2><h4 id=\"从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…\"><a href=\"#从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…\" class=\"headerlink\" title=\"从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…\"></a>从网页粘来的，下方有作者以及来源链接，格式就保留原有不改了…</h4><h2>1、基本使用</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.taobao.com/&#39;\">https://www.taobao.com/&#39;</a>)</p>\n<h4 id=\"显示等待10s\"><a href=\"#显示等待10s\" class=\"headerlink\" title=\"显示等待10s\"></a>显示等待10s</h4><p>wait = WebDriverWait(browser, 10)</p>\n<h4 id=\"等待直到元素加载出\"><a href=\"#等待直到元素加载出\" class=\"headerlink\" title=\"等待直到元素加载出\"></a>等待直到元素加载出</h4><p>input = wait.until(EC.presence_of_element_located((By.ID, ‘q’)))</p>\n<h4 id=\"等待直到元素可点击\"><a href=\"#等待直到元素可点击\" class=\"headerlink\" title=\"等待直到元素可点击\"></a>等待直到元素可点击</h4><p>button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, ‘.btn-search’)))<br>print(input, button)<br>from selenium import webdriver<br>from selenium.webdriver.common.by import By<br>from selenium.webdriver.common.keys import Keys<br>from selenium.webdriver.support import expected_conditions as EC<br>from selenium.webdriver.support.wait import WebDriverWait</p>\n<h4 id=\"创建一个浏览器对象\"><a href=\"#创建一个浏览器对象\" class=\"headerlink\" title=\"创建一个浏览器对象\"></a>创建一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>try:<br>    # 开启一个浏览器并访问<a href=\"https://www.baidu.com/\">https://www.baidu.com</a><br>    browser.get(‘<a href=\"https://www.baidu.com&/#39;\">https://www.baidu.com&#39;</a>)<br>    # 在打开的网页响应中根据id查找元素   获取到查询框<br>    input = browser.find_element_by_id(‘kw’)<br>    # 向查询框中输入Python<br>    input.send_keys(‘Python’)<br>    # 模拟回车<br>    input.send_keys(Keys.ENTER)<br>    # 显示等待， 等待10秒<br>    wait = WebDriverWait(browser, 10)<br>    # 显式等待指定某个条件，然后设置最长等待时间。如果在这个时间还没有找到元素，那么便会抛出异常<br>    wait.until(EC.presence_of_element_located((By.ID,’content_left’)))<br>    # 输出当前的url<br>    print(browser.current_url)<br>    # 输出Cookies<br>    print(browser.get_cookies())<br>    # 输出页面响应内容<br>    print(browser.page_source)<br>finally:<br>    pass<br>    # 关闭浏览器<br>    browser.close()<br></code></pre></div><p><br></p><h2>2、Selenium声明浏览器对象</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()<br>browser = webdriver.Firefox()<br>browser = webdriver.Edge()<br>browser = webdriver.PhantomJS()<br>browser = webdriver.Safari()<br></code></pre></div><p><br></p><h2>3、查找元素</h2><h2>3.1、查找单个元素</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<h4 id=\"申明一个浏览器对象\"><a href=\"#申明一个浏览器对象\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()</p>\n<h4 id=\"使用浏览器访问淘宝\"><a href=\"#使用浏览器访问淘宝\" class=\"headerlink\" title=\"使用浏览器访问淘宝\"></a>使用浏览器访问淘宝</h4><p>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)</p>\n<h4 id=\"在响应结果中通过id查找元素\"><a href=\"#在响应结果中通过id查找元素\" class=\"headerlink\" title=\"在响应结果中通过id查找元素\"></a>在响应结果中通过id查找元素</h4><p>input_first = browser.find_element_by_id(‘q’)</p>\n<h4 id=\"在响应结果中通过css选择器查找元素\"><a href=\"#在响应结果中通过css选择器查找元素\" class=\"headerlink\" title=\"在响应结果中通过css选择器查找元素\"></a>在响应结果中通过css选择器查找元素</h4><p>input_second = browser.find_element_by_css_selector(‘#q’)</p>\n<h4 id=\"在响应结果中通过xpath查找元素\"><a href=\"#在响应结果中通过xpath查找元素\" class=\"headerlink\" title=\"在响应结果中通过xpath查找元素\"></a>在响应结果中通过xpath查找元素</h4><p>input_third = browser.find_element_by_xpath(‘//*[@id=”q”]’)<br>print(input_first)<br>print(input_second)<br>print(input_third)<br>browser.close()<br></code></pre></div><ul><li>find_element_by_name   通过name查找</li><li>find_element_by_xpath  通过xpath查找</li><li>find_element_by_link_text   通过链接查找</li><li>find_element_by_partial_link_text    通过部分链接查找</li><li>find_element_by_tag_name   通过标签名称查找</li><li>find_element_by_class_name   通过类名查找</li><li>find_element_by_css_selector  通过css选择武器查找</li></ul><p><br></p><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-1\"><a href=\"#申明一个浏览器对象-1\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()</p>\n<h4 id=\"使用浏览器访问淘宝-1\"><a href=\"#使用浏览器访问淘宝-1\" class=\"headerlink\" title=\"使用浏览器访问淘宝\"></a>使用浏览器访问淘宝</h4><p>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)</p>\n<h4 id=\"第二种方式，通过使用By-xxx指定查找方式\"><a href=\"#第二种方式，通过使用By-xxx指定查找方式\" class=\"headerlink\" title=\"第二种方式，通过使用By.xxx指定查找方式\"></a>第二种方式，通过使用By.xxx指定查找方式</h4><p>input = browser.find_element(By.ID,’q’)<br>print(input)<br>browser.close()<br></code></pre></div><h2>3.2、多个元素</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-2\"><a href=\"#申明一个浏览器对象-2\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()</p>\n<h4 id=\"使用浏览器访问淘宝-2\"><a href=\"#使用浏览器访问淘宝-2\" class=\"headerlink\" title=\"使用浏览器访问淘宝\"></a>使用浏览器访问淘宝</h4><p>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)</p>\n<h4 id=\"根据选择查找多个元素\"><a href=\"#根据选择查找多个元素\" class=\"headerlink\" title=\"根据选择查找多个元素\"></a>根据选择查找多个元素</h4><p>input_first = browser.find_elements_by_css_selector(‘.service-bd li’)<br>input_second = browser.find_elements(By.CSS_SELECTOR,’.service-bd li’)<br>print(input_first)<br>print(input_second)<br>browser.close()<br></code></pre></div><ul><li>find_elements_by_name</li><li>find_elements_by_xpath</li><li>find_elements_by_link_text</li><li>find_elements_by_partial_link_text</li><li>find_elements_by_tag_name</li><li>find_elements_by_class_name</li><li>find_elements_by_css_selector</li></ul><p><br></p><p><br></p><h2>4、元素交互操作</h2><blockquote>对获取的元素调用交互方法 </blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time<br>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-3\"><a href=\"#申明一个浏览器对象-3\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()</p>\n<h4 id=\"使用浏览器访问淘宝-3\"><a href=\"#使用浏览器访问淘宝-3\" class=\"headerlink\" title=\"使用浏览器访问淘宝\"></a>使用浏览器访问淘宝</h4><p>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)</p>\n<h4 id=\"根据ID查找元素\"><a href=\"#根据ID查找元素\" class=\"headerlink\" title=\"根据ID查找元素\"></a>根据ID查找元素</h4><p>input_search = browser.find_element(By.ID,’q’)</p>\n<h4 id=\"模拟输入PSV到输入框\"><a href=\"#模拟输入PSV到输入框\" class=\"headerlink\" title=\"模拟输入PSV到输入框\"></a>模拟输入PSV到输入框</h4><p>input_search.send_keys(‘PSV’)<br>time.sleep(2)</p>\n<h4 id=\"清空输入\"><a href=\"#清空输入\" class=\"headerlink\" title=\"清空输入\"></a>清空输入</h4><p>input_search.clear()<br>input_search.send_keys(‘3DS’)<br>button = browser.find_element(By.CLASS_NAME,’btn-search’)</p>\n<h4 id=\"模拟点击\"><a href=\"#模拟点击\" class=\"headerlink\" title=\"模拟点击\"></a>模拟点击</h4><p>button.click()<br></code></pre></div><blockquote>更多的操作 <br><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.remote.webelement\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.remote.webelement</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>5、交互动作</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver import ActionChains</p>\n<p>browser = webdriver.Chrome()<br>url = ‘<a href=\"http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#39;\">http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#39;</a><br>browser.get(url)</p>\n<h4 id=\"切换id为iframeResult的frame\"><a href=\"#切换id为iframeResult的frame\" class=\"headerlink\" title=\"切换id为iframeResult的frame\"></a>切换id为iframeResult的frame</h4><p>browser.switch_to.frame(‘iframeResult’)<br>source = browser.find_element_by_css_selector(‘#draggable’)<br>target = browser.find_element_by_css_selector(‘#droppable’)<br>actions = ActionChains(browser)<br>actions.drag_and_drop(source, target)<br>actions.perform()<br></code></pre></div><blockquote>更多操作<br><br><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.common.action_chains\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.common.action_chains</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>6、执行JavaScript</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<h4 id=\"申明一个浏览器对象-4\"><a href=\"#申明一个浏览器对象-4\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)</p>\n<h4 id=\"执行JavaScript脚本\"><a href=\"#执行JavaScript脚本\" class=\"headerlink\" title=\"执行JavaScript脚本\"></a>执行JavaScript脚本</h4><p>browser.execute_script(‘window.scrollTo(0, document.body.scrollHeight)’)<br>browser.execute_script(‘alert(“To Bottom”)’)<br></code></pre></div><h2>7、获取元素信息</h2><h2>7.1、获取属性</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-5\"><a href=\"#申明一个浏览器对象-5\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)<br>logo = browser.find_element(By.ID,’zh-top-link-logo’)</p>\n<h4 id=\"获取属性\"><a href=\"#获取属性\" class=\"headerlink\" title=\"获取属性\"></a>获取属性</h4><p>print(logo.get_attribute(‘class’))<br>print(logo)<br>browser.close()<br></code></pre></div><h2>7.2、获取文本值</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-6\"><a href=\"#申明一个浏览器对象-6\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)<br>submit = browser.find_element(By.ID,’zu-top-add-question’)</p>\n<h4 id=\"获取文本值\"><a href=\"#获取文本值\" class=\"headerlink\" title=\"获取文本值\"></a>获取文本值</h4><p>print(submit.text)<br>print(submit)<br>browser.close()<br></code></pre></div><h2>7.3、获取ID、位置、标签名、大小</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By</p>\n<h4 id=\"申明一个浏览器对象-7\"><a href=\"#申明一个浏览器对象-7\" class=\"headerlink\" title=\"申明一个浏览器对象\"></a>申明一个浏览器对象</h4><p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)<br>submit = browser.find_element(By.ID,’zu-top-add-question’)</p>\n<h4 id=\"获取id-0-04584255991652042-1\"><a href=\"#获取id-0-04584255991652042-1\" class=\"headerlink\" title=\"获取id   0.04584255991652042-1\"></a>获取id   0.04584255991652042-1</h4><p>print(submit.id)</p>\n<h4 id=\"获取位置-‘y’-7-‘x’-675\"><a href=\"#获取位置-‘y’-7-‘x’-675\" class=\"headerlink\" title=\"获取位置  &#123;‘y’: 7, ‘x’: 675&#125;\"></a>获取位置  &#123;‘y’: 7, ‘x’: 675&#125;</h4><p>print(submit.location)</p>\n<h4 id=\"获取标签名称-button\"><a href=\"#获取标签名称-button\" class=\"headerlink\" title=\"获取标签名称    button\"></a>获取标签名称    button</h4><p>print(submit.tag_name)</p>\n<h4 id=\"获取大小-‘width’-66-‘height’-32\"><a href=\"#获取大小-‘width’-66-‘height’-32\" class=\"headerlink\" title=\"获取大小  &#123;‘width’: 66, ‘height’: 32&#125;\"></a>获取大小  &#123;‘width’: 66, ‘height’: 32&#125;</h4><p>print(submit.size)<br>browser.close()<br></code></pre></div><h2>8、Frame</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.common.exceptions import NoSuchElementException</p>\n<p>browser = webdriver.Chrome()<br>url = ‘<a href=\"http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#39;\">http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#39;</a><br>browser.get(url)</p>\n<h4 id=\"将操作的响应数据换成iframeResult\"><a href=\"#将操作的响应数据换成iframeResult\" class=\"headerlink\" title=\"将操作的响应数据换成iframeResult\"></a>将操作的响应数据换成iframeResult</h4><p>browser.switch_to.frame(‘iframeResult’)<br>source = browser.find_element_by_css_selector(‘#draggable’)<br>print(source)<br>try:<br>    logo = browser.find_element_by_class_name(‘logo’)<br>except NoSuchElementException:<br>    print(‘NO LOGO’)</p>\n<h4 id=\"切换成父元素\"><a href=\"#切换成父元素\" class=\"headerlink\" title=\"切换成父元素\"></a>切换成父元素</h4><p>browser.switch_to.parent_frame()<br>logo = browser.find_element_by_class_name(‘logo’)<br>print(logo)<br>print(logo.text)<br></code></pre></div><p><br></p><h2>9、等待</h2><h2>9.1、隐式等待</h2><blockquote>当使用了隐式等待执行测试的时候，如果 WebDriver没有在 DOM中找到元素，将继续等待，超出设定时间后则抛出找不到元素的异常, 换句话说，当查找元素或元素并没有立即出现的时候，隐式等待将等待一段时间再查找 DOM，默认的时间是0</blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()</p>\n<h4 id=\"等待10秒\"><a href=\"#等待10秒\" class=\"headerlink\" title=\"等待10秒\"></a>等待10秒</h4><p>browser.implicitly_wait(10)<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)<br>input = browser.find_element_by_class_name(‘zu-top-add-question’)<br>print(input)<br></code></pre></div><h2>9.2、显示等待</h2><blockquote>显式等待指定某个条件，然后设置最长等待时间。如果在这个时间还没有找到元素，那么便会抛出异常了。 </blockquote><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.webdriver.common.by import By<br>from selenium.webdriver.support import expected_conditions as EC<br>from selenium.webdriver.support.wait import WebDriverWait</p>\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.taobao.com/&#39;\">https://www.taobao.com/&#39;</a>)</p>\n<h4 id=\"显示等待10s-1\"><a href=\"#显示等待10s-1\" class=\"headerlink\" title=\"显示等待10s\"></a>显示等待10s</h4><p>wait = WebDriverWait(browser, 10)</p>\n<h4 id=\"等待直到元素加载出-1\"><a href=\"#等待直到元素加载出-1\" class=\"headerlink\" title=\"等待直到元素加载出\"></a>等待直到元素加载出</h4><p>input = wait.until(EC.presence_of_element_located((By.ID, ‘q’)))</p>\n<h4 id=\"等待直到元素可点击-1\"><a href=\"#等待直到元素可点击-1\" class=\"headerlink\" title=\"等待直到元素可点击\"></a>等待直到元素可点击</h4><p>button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, ‘.btn-search’)))<br>print(input, button)<br></code></pre></div><ul><li>title_is 标题是某内容</li><li>title_contains 标题包含某内容</li><li>presence_of_element_located 元素加载出，传入定位元组，如(By.ID, ‘p’)</li><li>visibility_of_element_located 元素可见，传入定位元组</li><li>visibility_of 可见，传入元素对象</li><li>presence_of_all_elements_located 所有元素加载出</li><li>text_to_be_present_in_element 某个元素文本包含某文字</li><li>text_to_be_present_in_element_value 某个元素值包含某文字</li><li>frame_to_be_available_and_switch_to_it frame加载并切换</li><li>invisibility_of_element_located 元素不可见</li><li>element_to_be_clickable 元素可点击</li><li>staleness_of 判断一个元素是否仍在DOM，可判断页面是否已经刷新</li><li>element_to_be_selected 元素可选择，传元素对象</li><li>element_located_to_be_selected 元素可选择，传入定位元组</li><li>element_selection_state_to_be 传入元素对象以及状态，相等返回True，否则返回False</li><li>element_located_selection_state_to_be 传入定位元组以及状态，相等返回True，否则返回False</li><li>alert_is_present 是否出现Alert</li></ul><p>更多操作</p><blockquote><a href=\"http://link.zhihu.com/?target=http%3A//selenium-python.readthedocs.io/api.html%23module-selenium.webdriver.support.expected_conditions\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">selenium-python.readthedocs.io</span><span class=\"invisible\">/api.html#module-selenium.webdriver.support.expected_conditions</span><span class=\"ellipsis\"></span><i class=\"icon-external\"></i></a></blockquote><p><br></p><h2>10、前进后退</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time<br>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.baidu.com/&#39;\">https://www.baidu.com/&#39;</a>)<br>browser.get(‘<a href=\"https://www.taobao.com/&#39;\">https://www.taobao.com/&#39;</a>)<br>browser.get(‘<a href=\"https://www.python.org/&#39;\">https://www.python.org/&#39;</a>)<br>browser.back()<br>time.sleep(1)<br>browser.forward()<br>browser.close()<br></code></pre></div><p><br></p><h2>11、Cookies</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.zhihu.com/explore&#39;\">https://www.zhihu.com/explore&#39;</a>)</p>\n<h4 id=\"获得cookies\"><a href=\"#获得cookies\" class=\"headerlink\" title=\"获得cookies\"></a>获得cookies</h4><p>print(browser.get_cookies())</p>\n<h4 id=\"添加cookie\"><a href=\"#添加cookie\" class=\"headerlink\" title=\"添加cookie\"></a>添加cookie</h4><p>browser.add_cookie(&#123;‘name’: ‘name’, ‘domain’: ‘<a href=\"http://www.zhihu.com&/#39;\">www.zhihu.com&#39;</a>, ‘value’: ‘germey’&#125;)<br>print(browser.get_cookies())</p>\n<h4 id=\"删除所有cookies\"><a href=\"#删除所有cookies\" class=\"headerlink\" title=\"删除所有cookies\"></a>删除所有cookies</h4><p>browser.delete_all_cookies()<br>print(browser.get_cookies())<br></code></pre></div><p><br></p><h2>12、选项卡管理</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>import time<br>from selenium import webdriver</p>\n<p>browser = webdriver.Chrome()<br>browser.get(‘<a href=\"https://www.baidu.com&/#39;\">https://www.baidu.com&#39;</a>)</p>\n<h4 id=\"打开一个选项卡\"><a href=\"#打开一个选项卡\" class=\"headerlink\" title=\"打开一个选项卡\"></a>打开一个选项卡</h4><p>browser.execute_script(‘window.open()’)<br>print(browser.window_handles)</p>\n<h4 id=\"选择第二个选项卡\"><a href=\"#选择第二个选项卡\" class=\"headerlink\" title=\"选择第二个选项卡\"></a>选择第二个选项卡</h4><p>browser.switch_to_window(browser.window_handles[1])<br>browser.get(‘<a href=\"https://www.taobao.com&/#39;\">https://www.taobao.com&#39;</a>)<br>time.sleep(1)<br>browser.switch_to_window(browser.window_handles[0])<br>browser.get(‘<a href=\"https://python.org&/#39;\">https://python.org&#39;</a>)<br></code></pre></div><p><br></p><h2>13、异常处理</h2><div class=\"highlight\"><pre><code class=\"language-text\"><span></span>from selenium import webdriver<br>from selenium.common.exceptions import TimeoutException, NoSuchElementException</p>\n<p>browser = webdriver.Chrome()<br>try:<br>    browser.get(‘<a href=\"https://www.baidu.com&/#39;\">https://www.baidu.com&#39;</a>)<br>except TimeoutException:<br>    print(‘Time Out’)<br>try:<br>    browser.find_element_by_id(‘hello’)<br>except NoSuchElementException:<br>    print(‘No Element’)<br>finally:<br>    browser.close()<br></code></pre></div><p><br></p><blockquote>作者：蒋蜀黍  Python爱好者社区专栏作者   授权原创发布，请勿转载，谢谢。<br>出处：<a href=\"http://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s/hYBdkE5IEYNZo4vwoyfT4Q\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Selenium 库学习笔记<i class=\"icon-external\"></i></a></p>\n<h2 id=\"TensorFlow\"><a href=\"#TensorFlow\" class=\"headerlink\" title=\"TensorFlow\"></a>TensorFlow</h2><h4 id=\"Variable\"><a href=\"#Variable\" class=\"headerlink\" title=\"Variable\"></a>Variable</h4><p>必须用到:<br>    ```init = tf.initialize_all_variables() #初始化全部变量 </p>\n<p>随后即可:<br>    ```sess.run(init)</p>\n<h2 id=\"Tensorflow-笔记\"><a href=\"#Tensorflow-笔记\" class=\"headerlink\" title=\"Tensorflow 笔记\"></a>Tensorflow 笔记</h2><p>這是在對照官網學習時的前期入門筆記，其實和官網基本沒有區別，好吧，真的沒有區別。因爲官網真的寫的太好了。<br>至於我爲什麼要寫出來，是因爲我之前寫在了紙上，對於邏輯的把握很給力，所以在寫一邊。</p>\n<p>不過TensorFlow 變動真的很大，版本更迭也很快，所以，下方只是理清邏輯，具體的東西還是去官網比較好。只不過我這兒網謎之很難等上去… </p>\n<p> 總而言之一句話，先搭好架子再選擇填充材料。就是它的核心邏輯了。而改進也是在架子基礎上去優化優化器。嗯…現在理解就是這樣。</p>\n<h3 id=\"1-1\"><a href=\"#1-1\" class=\"headerlink\" title=\"1\"></a>1</h3><h4 id=\"导入\"><a href=\"#导入\" class=\"headerlink\" title=\"导入\"></a>导入</h4><pre><code>import tensorflow as tf\n</code></pre>\n<p>步骤：①构建计算图          ②运行计算图</p>\n<hr>\n<h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><h5 id=\"Build-a-simple-computational-Graph\"><a href=\"#Build-a-simple-computational-Graph\" class=\"headerlink\" title=\"Build a simple computational Graph\"></a>Build a simple computational Graph</h5><pre><code>node1 = tf.contant(3.0, dtype = tf.float32)\nnode2 = tf.contant(4.0) #also tf.float32 impicitly\nprint (node1, node2)\n</code></pre>\n<h6 id=\"输出为：\"><a href=\"#输出为：\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>Tensor (&quot;Cast: 0&quot;, shape = (), dtype = float)\nTensor (&quot;Cast_1: 0&quot;, shape = (), dtype = float)\n</code></pre>\n<p>打印并不输出值3.0，4.0，而在评估时分别产生3.0和4.0节点。欲实际评估节点，We must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.</p>\n<hr>\n<h4 id=\"3\"><a href=\"#3\" class=\"headerlink\" title=\"3\"></a>3</h4><h5 id=\"Creates-a-session-object-然后调用run方法运行足够的computational-graph-to-envlute-node1-and-node2\"><a href=\"#Creates-a-session-object-然后调用run方法运行足够的computational-graph-to-envlute-node1-and-node2\" class=\"headerlink\" title=\"Creates a session object , 然后调用run方法运行足够的computational graph to envlute node1 and node2\"></a>Creates a session object , 然后调用<code>run</code>方法运行足够的computational graph to envlute node1 and node2</h5><pre><code>sess = tf.Session()\nprint (sess.run([node1, node2]))\n</code></pre>\n<h6 id=\"输出为：-1\"><a href=\"#输出为：-1\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>[3.0,   4.0]        #可见预期值\n</code></pre>\n<hr>\n<h4 id=\"4\"><a href=\"#4\" class=\"headerlink\" title=\"4\"></a>4</h4><h5 id=\"We-can-build-more-complicated-computations-by-combining-Tensor-nodes-with-operations\"><a href=\"#We-can-build-more-complicated-computations-by-combining-Tensor-nodes-with-operations\" class=\"headerlink\" title=\"We can build more complicated computations by combining Tensor nodes with operations\"></a>We can build more complicated computations by combining Tensor nodes with operations</h5><pre><code>node3 = tf.add(node1, node2)\nprint (&quot;node3: &quot;, node3)\nprint (&quot;sess.run(node3):&quot;, sess.run(node3))\n</code></pre>\n<h6 id=\"输出为：-2\"><a href=\"#输出为：-2\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>node3:  Tensor(&quot;Add:0&quot;, shape = (1,dtype = float32))\nsess.run(node3): 7.0\n</code></pre>\n<hr>\n<h4 id=\"5\"><a href=\"#5\" class=\"headerlink\" title=\"5\"></a>5</h4><h5 id=\"更进一步的，A-graph-can-be-parameterized-To-accept-external-input-称为placeholders\"><a href=\"#更进一步的，A-graph-can-be-parameterized-To-accept-external-input-称为placeholders\" class=\"headerlink\" title=\"更进一步的，A graph can be parameterized. To accept external input , 称为placeholders\"></a>更进一步的，A graph can be parameterized. To accept external input , 称为<code>placeholders</code></h5><pre><code>a = tf.placeholder(tf.float32)\nb = tf.placeholder(tf.float32)\nadder_note = a + b      #provide a shortcut for tf.add(a, b) and can with multiple input by using\nprint (sess.run(add_note, &#123;a:3, b:4.5&#125;))\nprint (sess.run(add_note, &#123;a:[1, 3],  b:[2, 4]&#125;))\n</code></pre>\n<h6 id=\"输出为：-3\"><a href=\"#输出为：-3\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>7.5\n[3.  7.]\n</code></pre>\n<h5 id=\"5-1\"><a href=\"#5-1\" class=\"headerlink\" title=\"5.1\"></a>5.1</h5><h5 id=\"more-complex-by-adding-anther-aperation-for-example\"><a href=\"#more-complex-by-adding-anther-aperation-for-example\" class=\"headerlink\" title=\"more complex by adding anther aperation. for example:\"></a>more complex by adding anther aperation. for example:</h5><pre><code>add_and_triple = adder_note * 3\nprint (sess.run(add_and_triple, &#123;a:3, b:4.5&#125;))\n</code></pre>\n<h6 id=\"输出为：-4\"><a href=\"#输出为：-4\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>22.5\n</code></pre>\n<p>In <code>TensorBoard</code>(Tensorflow圖形化界面): 图片.jpg        是下面<code>a+b```` 然后连接到</code>adder_node<code>  ,随后再连接到</code>y(add_and_triple)```</p>\n<h5 id=\"5-2\"><a href=\"#5-2\" class=\"headerlink\" title=\"5.2\"></a>5.2</h5><h5 id=\"That-a-model-that-can-take-arbitary-inputs-To-mode-the-modeel-trainable-need-to-modify-the-graph-to-get-new-a-outputs-with-the-some-input-Variables-allow-us\"><a href=\"#That-a-model-that-can-take-arbitary-inputs-To-mode-the-modeel-trainable-need-to-modify-the-graph-to-get-new-a-outputs-with-the-some-input-Variables-allow-us\" class=\"headerlink\" title=\"That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : Variables allow us:\"></a>That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : <code>Variables</code> allow us:</h5><pre><code>w = tf.Variables([  .3], dtype = tf.float32)\nb = tf.Variables([ -  .3], dtype = tf.float32)\nx = tf.placeholder(tf.float32)\nlinear_model = w * x + b        #线性模型\n</code></pre>\n<hr>\n<h4 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6\"></a>6</h4><h5 id=\"使用tf-constant-调用、初始化常数-用tf-Vaiables-變量不被初始化，調用欲初始化所有變量，必須calll-a-special-operation\"><a href=\"#使用tf-constant-调用、初始化常数-用tf-Vaiables-變量不被初始化，調用欲初始化所有變量，必須calll-a-special-operation\" class=\"headerlink\" title=\"使用tf.constant :调用、初始化常数  用tf.Vaiables :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:\"></a>使用<code>tf.constant</code> :调用、初始化常数  用<code>tf.Vaiables</code> :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:</h5><pre><code>init = tf.global_variables_initializer()\nsess.run(init)\n</code></pre>\n<hr>\n<h4 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h4><h5 id=\"x-is-a-placeholder-we-can-evaluate-lnear-model-for-several-values-of-x-simultaneausly-as-follow\"><a href=\"#x-is-a-placeholder-we-can-evaluate-lnear-model-for-several-values-of-x-simultaneausly-as-follow\" class=\"headerlink\" title=\"x is a placeholder, we can evaluate lnear_model for several values of x simultaneausly as follow:\"></a>x is a placeholder, we can evaluate <code>lnear_model</code> for several values of x simultaneausly as follow:</h5><pre><code>print (sess.run(linear_model, &#123;x:[1,2,3,4]&#125;))\n</code></pre>\n<h6 id=\"輸出爲：\"><a href=\"#輸出爲：\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>[0.        0.30000001   0.60000002  0.90000004]\n</code></pre>\n<hr>\n<h4 id=\"8\"><a href=\"#8\" class=\"headerlink\" title=\"8\"></a>8</h4><h5 id=\"有以上結果並不知好壞，因此編寫損失函數：\"><a href=\"#有以上結果並不知好壞，因此編寫損失函數：\" class=\"headerlink\" title=\"有以上結果並不知好壞，因此編寫損失函數：\"></a>有以上結果並不知好壞，因此編寫損失函數：</h5><pre><code>y = tf.placeholder(tf.float32)\nsquared_deltas = tf.square(linear_model - y)        #平方（下方差和）\nloss = tf.reduce_sum(squred_deltas)     #差和（上方平方）\nprint (sess.run)loss, &#123;x:[1, 2, 3, 4], y:[0, -1, -2, -3]&#125;)\n</code></pre>\n<h6 id=\"輸出爲：-1\"><a href=\"#輸出爲：-1\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>23.66       #損失值：差平方和\n</code></pre>\n<h5 id=\"8-1\"><a href=\"#8-1\" class=\"headerlink\" title=\"8.1\"></a>8.1</h5><h5 id=\"We-could-improve-this-manually-W-b-to-perfact-values-of-1-and-1-A-variable-is-initializef-to-the-value-provided-to-tf-Variable-but-can-be-charged-using-operation-like-tf-assign\"><a href=\"#We-could-improve-this-manually-W-b-to-perfact-values-of-1-and-1-A-variable-is-initializef-to-the-value-provided-to-tf-Variable-but-can-be-charged-using-operation-like-tf-assign\" class=\"headerlink\" title=\"We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to tf.Variable but can be charged using operation like tf.assign\"></a>We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to <code>tf.Variable</code> but can be charged using operation like <code>tf.assign</code></h5><h5 id=\"W-1-and-b-1-are-optimal-parameters-最優參數\"><a href=\"#W-1-and-b-1-are-optimal-parameters-最優參數\" class=\"headerlink\" title=\"W = -1 and b = 1 are optimal parameters:(最優參數)\"></a>W = -1 and b = 1 are optimal parameters:(最優參數)</h5><pre><code>fixW = tf.assign(W, [-1.  ])\nfixb = tf.assign(b,[1.  ])\nsess.run(fixW, fixb)\nprint(sess.run(loss, &#123;x:[1, 2, 3, 4],  y:[0, -1, -2, -3]&#125;))\n</code></pre>\n<h6 id=\"輸出爲：-2\"><a href=\"#輸出爲：-2\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>0, 0  # The final print shows the loss now is zero !\n</code></pre>\n<hr>\n<h4 id=\"9\"><a href=\"#9\" class=\"headerlink\" title=\"9\"></a>9</h4><h5 id=\"模型保存与加载：\"><a href=\"#模型保存与加载：\" class=\"headerlink\" title=\"模型保存与加载：\"></a>模型保存与加载：</h5><h6 id=\"保存：\"><a href=\"#保存：\" class=\"headerlink\" title=\"保存：\"></a>保存：</h6><pre><code>saver = tf.train.Saver()    # 生成saver\nwith tf.Session() as sess:\nsess.run(tf.global_variables_initializer()) # 先对模型初始化\n\n# 然后将数据丢入模型进行训练blablabla\n\n# 训练完以后，使用saver.save 来保存\nsaver.save(sess, &quot;save_path/file_name&quot;) #file_name如果不存在的话，会自动创建\n</code></pre>\n<h6 id=\"加载：\"><a href=\"#加载：\" class=\"headerlink\" title=\"加载：\"></a>加载：</h6><pre><code>saver = tf.train.Saver()\nwith tf.Session() as sess:  #参数可以进行初始化，也可不进行初始化。即使初始化了，初始化的值也会被restore的值给覆盖\nsess.run(tf.global_variables_initializer())\nsaver.restore(sess, &quot;save_path/file_name&quot;)  #会将已经保存的变量值resotre到 变量中。\n</code></pre>\n<hr>\n<h4 id=\"10\"><a href=\"#10\" class=\"headerlink\" title=\"10\"></a>10</h4><h5 id=\"图形化操作：\"><a href=\"#图形化操作：\" class=\"headerlink\" title=\"图形化操作：\"></a>图形化操作：</h5><pre><code>&gt;http://blog.csdn.net/u014595019/article/details/53912710\n</code></pre>\n<p>这篇写的还不错，等之后用过之后再写。</p>\n<hr>\n<hr>\n<h4 id=\"Variable-1\"><a href=\"#Variable-1\" class=\"headerlink\" title=\"Variable\"></a>Variable</h4><p>必须用到:<br>    ```init = tf.initialize_all_variables()    #初始化全部变量 </p>\n<p>随后即可:<br>    ```sess.run(init)</p>\n<h2 id=\"Tensorflow-笔记-1\"><a href=\"#Tensorflow-笔记-1\" class=\"headerlink\" title=\"Tensorflow 笔记\"></a>Tensorflow 笔记</h2><p>這是在對照官網學習時的前期入門筆記，其實和官網基本沒有區別，好吧，真的沒有區別。因爲官網真的寫的太好了。<br>至於我爲什麼要寫出來，是因爲我之前寫在了紙上，對於邏輯的把握很給力，所以在寫一邊。</p>\n<p>不過TensorFlow 變動真的很大，版本更迭也很快，所以，下方只是理清邏輯，具體的東西還是去官網比較好。只不過我這兒網謎之很難等上去… </p>\n<p> 總而言之一句話，先搭好架子再選擇填充材料。就是它的核心邏輯了。而改進也是在架子基礎上去優化優化器。嗯…現在理解就是這樣。</p>\n<h3 id=\"1-2\"><a href=\"#1-2\" class=\"headerlink\" title=\"1\"></a>1</h3><h4 id=\"导入-1\"><a href=\"#导入-1\" class=\"headerlink\" title=\"导入\"></a>导入</h4><pre><code>import tensorflow as tf\n</code></pre>\n<p>步骤：①构建计算图              ②运行计算图</p>\n<hr>\n<h4 id=\"2-1\"><a href=\"#2-1\" class=\"headerlink\" title=\"2\"></a>2</h4><h5 id=\"Build-a-simple-computational-Graph-1\"><a href=\"#Build-a-simple-computational-Graph-1\" class=\"headerlink\" title=\"Build a simple computational Graph\"></a>Build a simple computational Graph</h5><pre><code>node1 = tf.contant(3.0, dtype = tf.float32)\nnode2 = tf.contant(4.0)    #also tf.float32 impicitly\nprint (node1, node2)\n</code></pre>\n<h6 id=\"输出为：-5\"><a href=\"#输出为：-5\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>Tensor (&quot;Cast: 0&quot;, shape = (), dtype = float)\nTensor (&quot;Cast_1: 0&quot;, shape = (), dtype = float)\n</code></pre>\n<p>打印并不输出值3.0，4.0，而在评估时分别产生3.0和4.0节点。欲实际评估节点，We must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.</p>\n<hr>\n<h4 id=\"3-1\"><a href=\"#3-1\" class=\"headerlink\" title=\"3\"></a>3</h4><h5 id=\"Creates-a-session-object-然后调用run方法运行足够的computational-graph-to-envlute-node1-and-node2-1\"><a href=\"#Creates-a-session-object-然后调用run方法运行足够的computational-graph-to-envlute-node1-and-node2-1\" class=\"headerlink\" title=\"Creates a session object , 然后调用run方法运行足够的computational graph to envlute node1 and node2\"></a>Creates a session object , 然后调用<code>run</code>方法运行足够的computational graph to envlute node1 and node2</h5><pre><code>sess = tf.Session()\nprint (sess.run([node1, node2]))\n</code></pre>\n<h6 id=\"输出为：-6\"><a href=\"#输出为：-6\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>[3.0,   4.0]        #可见预期值\n</code></pre>\n<hr>\n<h4 id=\"4-1\"><a href=\"#4-1\" class=\"headerlink\" title=\"4\"></a>4</h4><h5 id=\"We-can-build-more-complicated-computations-by-combining-Tensor-nodes-with-operations-1\"><a href=\"#We-can-build-more-complicated-computations-by-combining-Tensor-nodes-with-operations-1\" class=\"headerlink\" title=\"We can build more complicated computations by combining Tensor nodes with operations\"></a>We can build more complicated computations by combining Tensor nodes with operations</h5><pre><code>node3 = tf.add(node1, node2)\nprint (&quot;node3: &quot;, node3)\nprint (&quot;sess.run(node3):&quot;, sess.run(node3))\n</code></pre>\n<h6 id=\"输出为：-7\"><a href=\"#输出为：-7\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>node3:  Tensor(&quot;Add:0&quot;, shape = (1,dtype = float32))\nsess.run(node3): 7.0\n</code></pre>\n<hr>\n<h4 id=\"5-1\"><a href=\"#5-1\" class=\"headerlink\" title=\"5\"></a>5</h4><h5 id=\"更进一步的，A-graph-can-be-parameterized-To-accept-external-input-称为placeholders-1\"><a href=\"#更进一步的，A-graph-can-be-parameterized-To-accept-external-input-称为placeholders-1\" class=\"headerlink\" title=\"更进一步的，A graph can be parameterized. To accept external input , 称为placeholders\"></a>更进一步的，A graph can be parameterized. To accept external input , 称为<code>placeholders</code></h5><pre><code>a = tf.placeholder(tf.float32)\nb = tf.placeholder(tf.float32)\nadder_note = a + b        #provide a shortcut for tf.add(a, b) and can with multiple input by using\nprint (sess.run(add_note, &#123;a:3, b:4.5&#125;))\nprint (sess.run(add_note, &#123;a:[1, 3],  b:[2, 4]&#125;))\n</code></pre>\n<h6 id=\"输出为：-8\"><a href=\"#输出为：-8\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>7.5\n[3.  7.]\n</code></pre>\n<h5 id=\"5-1-1\"><a href=\"#5-1-1\" class=\"headerlink\" title=\"5.1\"></a>5.1</h5><h5 id=\"more-complex-by-adding-anther-aperation-for-example-1\"><a href=\"#more-complex-by-adding-anther-aperation-for-example-1\" class=\"headerlink\" title=\"more complex by adding anther aperation. for example:\"></a>more complex by adding anther aperation. for example:</h5><pre><code>add_and_triple = adder_note * 3\nprint (sess.run(add_and_triple, &#123;a:3, b:4.5&#125;))\n</code></pre>\n<h6 id=\"输出为：-9\"><a href=\"#输出为：-9\" class=\"headerlink\" title=\"输出为：\"></a>输出为：</h6><pre><code>22.5\n</code></pre>\n<p>In <code>TensorBoard</code>(Tensorflow圖形化界面): 图片.jpg        是下面<code>a+b```` 然后连接到</code>adder_node<code>  ,随后再连接到</code>y(add_and_triple)```</p>\n<h5 id=\"5-2-1\"><a href=\"#5-2-1\" class=\"headerlink\" title=\"5.2\"></a>5.2</h5><h5 id=\"That-a-model-that-can-take-arbitary-inputs-To-mode-the-modeel-trainable-need-to-modify-the-graph-to-get-new-a-outputs-with-the-some-input-Variables-allow-us-1\"><a href=\"#That-a-model-that-can-take-arbitary-inputs-To-mode-the-modeel-trainable-need-to-modify-the-graph-to-get-new-a-outputs-with-the-some-input-Variables-allow-us-1\" class=\"headerlink\" title=\"That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : Variables allow us:\"></a>That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : <code>Variables</code> allow us:</h5><pre><code>w = tf.Variables([  .3], dtype = tf.float32)\nb = tf.Variables([ -  .3], dtype = tf.float32)\nx = tf.placeholder(tf.float32)\nlinear_model = w * x + b        #线性模型\n</code></pre>\n<hr>\n<h4 id=\"6-1\"><a href=\"#6-1\" class=\"headerlink\" title=\"6\"></a>6</h4><h5 id=\"使用tf-constant-调用、初始化常数-用tf-Vaiables-變量不被初始化，調用欲初始化所有變量，必須calll-a-special-operation-1\"><a href=\"#使用tf-constant-调用、初始化常数-用tf-Vaiables-變量不被初始化，調用欲初始化所有變量，必須calll-a-special-operation-1\" class=\"headerlink\" title=\"使用tf.constant :调用、初始化常数  用tf.Vaiables :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:\"></a>使用<code>tf.constant</code> :调用、初始化常数  用<code>tf.Vaiables</code> :變量不被初始化，調用欲初始化所有變量，必須calll a special operation:</h5><pre><code>init = tf.global_variables_initializer()\nsess.run(init)\n</code></pre>\n<hr>\n<h4 id=\"7-1\"><a href=\"#7-1\" class=\"headerlink\" title=\"7\"></a>7</h4><h5 id=\"x-is-a-placeholder-we-can-evaluate-lnear-model-for-several-values-of-x-simultaneausly-as-follow-1\"><a href=\"#x-is-a-placeholder-we-can-evaluate-lnear-model-for-several-values-of-x-simultaneausly-as-follow-1\" class=\"headerlink\" title=\"x is a placeholder, we can evaluate lnear_model for several values of x simultaneausly as follow:\"></a>x is a placeholder, we can evaluate <code>lnear_model</code> for several values of x simultaneausly as follow:</h5><pre><code>print (sess.run(linear_model, &#123;x:[1,2,3,4]&#125;))\n</code></pre>\n<h6 id=\"輸出爲：-3\"><a href=\"#輸出爲：-3\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>[0.        0.30000001   0.60000002  0.90000004]\n</code></pre>\n<hr>\n<h4 id=\"8-1\"><a href=\"#8-1\" class=\"headerlink\" title=\"8\"></a>8</h4><h5 id=\"有以上結果並不知好壞，因此編寫損失函數：-1\"><a href=\"#有以上結果並不知好壞，因此編寫損失函數：-1\" class=\"headerlink\" title=\"有以上結果並不知好壞，因此編寫損失函數：\"></a>有以上結果並不知好壞，因此編寫損失函數：</h5><pre><code>y = tf.placeholder(tf.float32)\nsquared_deltas = tf.square(linear_model - y)        #平方（下方差和）\nloss = tf.reduce_sum(squred_deltas)        #差和（上方平方）\nprint (sess.run)loss, &#123;x:[1, 2, 3, 4], y:[0, -1, -2, -3]&#125;)\n</code></pre>\n<h6 id=\"輸出爲：-4\"><a href=\"#輸出爲：-4\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>23.66        #損失值：差平方和\n</code></pre>\n<h5 id=\"8-1-1\"><a href=\"#8-1-1\" class=\"headerlink\" title=\"8.1\"></a>8.1</h5><h5 id=\"We-could-improve-this-manually-W-b-to-perfact-values-of-1-and-1-A-variable-is-initializef-to-the-value-provided-to-tf-Variable-but-can-be-charged-using-operation-like-tf-assign-1\"><a href=\"#We-could-improve-this-manually-W-b-to-perfact-values-of-1-and-1-A-variable-is-initializef-to-the-value-provided-to-tf-Variable-but-can-be-charged-using-operation-like-tf-assign-1\" class=\"headerlink\" title=\"We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to tf.Variable but can be charged using operation like tf.assign\"></a>We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to <code>tf.Variable</code> but can be charged using operation like <code>tf.assign</code></h5><h5 id=\"W-1-and-b-1-are-optimal-parameters-最優參數-1\"><a href=\"#W-1-and-b-1-are-optimal-parameters-最優參數-1\" class=\"headerlink\" title=\"W = -1 and b = 1 are optimal parameters:(最優參數)\"></a>W = -1 and b = 1 are optimal parameters:(最優參數)</h5><pre><code>fixW = tf.assign(W, [-1.  ])\nfixb = tf.assign(b,[1.  ])\nsess.run(fixW, fixb)\nprint(sess.run(loss, &#123;x:[1, 2, 3, 4],  y:[0, -1, -2, -3]&#125;))\n</code></pre>\n<h6 id=\"輸出爲：-5\"><a href=\"#輸出爲：-5\" class=\"headerlink\" title=\"輸出爲：\"></a>輸出爲：</h6><pre><code>0, 0  # The final print shows the loss now is zero !\n</code></pre>\n<hr>\n<h4 id=\"9-1\"><a href=\"#9-1\" class=\"headerlink\" title=\"9\"></a>9</h4><h5 id=\"模型保存与加载：-1\"><a href=\"#模型保存与加载：-1\" class=\"headerlink\" title=\"模型保存与加载：\"></a>模型保存与加载：</h5><h6 id=\"保存：-1\"><a href=\"#保存：-1\" class=\"headerlink\" title=\"保存：\"></a>保存：</h6><pre><code>saver = tf.train.Saver()    # 生成saver\nwith tf.Session() as sess:\nsess.run(tf.global_variables_initializer())    # 先对模型初始化\n\n# 然后将数据丢入模型进行训练blablabla\n\n# 训练完以后，使用saver.save 来保存\nsaver.save(sess, &quot;save_path/file_name&quot;)    #file_name如果不存在的话，会自动创建\n</code></pre>\n<h6 id=\"加载：-1\"><a href=\"#加载：-1\" class=\"headerlink\" title=\"加载：\"></a>加载：</h6><pre><code>saver = tf.train.Saver()\nwith tf.Session() as sess:    #参数可以进行初始化，也可不进行初始化。即使初始化了，初始化的值也会被restore的值给覆盖\nsess.run(tf.global_variables_initializer())\nsaver.restore(sess, &quot;save_path/file_name&quot;)    #会将已经保存的变量值resotre到 变量中。\n</code></pre>\n<hr>\n<h4 id=\"10-1\"><a href=\"#10-1\" class=\"headerlink\" title=\"10\"></a>10</h4><h5 id=\"图形化操作：-1\"><a href=\"#图形化操作：-1\" class=\"headerlink\" title=\"图形化操作：\"></a>图形化操作：</h5><pre><code>&lt;http://blog.csdn.net/u014595019/article/details/53912710&gt;\n</code></pre>\n<p>这篇写的还不错，等之后用过之后再写。</p>\n"},{"title":"Vn.Py学习笔记（Python交易平台框架）","date":"2018-05-15T02:13:48.000Z","_content":"author: Ian\n\n# Vn.Py笔记 ✏📔\n\n![vn.py](https://static.vnpy.com/static/img/index/2019-5-27/mainwindow.PNG)\n---\n\n<font color=green>一个开源Python交易软件，主使用CTP协议。当然，还有其他协议了其源项目在<http://www.vnpy.org/> </font>\n\n***\n\n---\n\n---\n\n## 初期笔记\n    报单交易过程中，\n\n    CTP使用BrokerID 从业务层面完全隔离不同经纪公司的交易、风控及结算用户的接入。\n    BrokerID具体取值咨询开户的经纪公司。\n\nCTP中 UserID为操作员代码，InversterID为投资者代码； 投资者自己下单两者同为投资者代码\n    \n    CTP-API中，OrderRef和OrderAction    前者为CTP后台提供给客户端标识一笔报\n    单的字段，从客户端可通过（FrontID、SessionID、OrderRef）唯一确定一笔报\n    单；；；后者与OrderRef功能相似，提供给客户端来标识一笔撤单。\n    前者的数据类型为字符数组，必须为阿拉伯数字字符。\n    OrderRef（OrderActionRef）取值必须保证在同一会话内发送的报单\n    OrderRef（OrderActionRef）值大于之前的最大值，开发多线程客户端尤为需要  \n    注意。\n    \nCTP-API库：\n\n    error.dtd\\error.xml 错误定义文件    ----   ThostFrfcMdApi.h \n    交易接口类定义文件  \n    ———   ThostFtfcUserApiDataType.h 类型定义文件  ------    \n    thostmduserapi.lib,thostmduserpi.dll 行情接口库文件     -----   \n    thosttraderapi.lib,thosttraderapi.dll交易接口库文件   ----- \n    \n    交易和行情接口类定义文件都包含API 和 SPI类定义，客户端使用API向CTP后台\n    发送请求，CTP后台则使用SPI向客户端回传响应及回报\n\n    行情Demo开发：\n        1.将API文件复制到工程目录；并将所有的头文件和静态、动态库连链接库\n    并将文件导入到项目工程中。\n        先继承行情接口类CThostFtdcMdspi，并实现需要实现的虚函数。  \n    OnFrontConnectde、OnFrontDisconnected、OnPspUserLogin、\n    OnRspSubMarketDAta\n\n\n/**********API工作流程*************/\n\nAPI压缩包——API含常量对应字符、类型定义、操作系统编译定义、回调函数（MdSpi）（柜台向用户端发送信息后被系统自动调用的函数）、主动函数（MdApi）（向柜台发送各种请求和指令）\n\nAPI工作流程：\n    创建MdSpi对象（回掉函数），调用MdApi类，以Create开头的静态方法，创建MdApi对象（主动函数），注册MdSpi对象指针，行情柜台前置机地址，调用MdApi对象Init方法初始化连接前置机，连接成功会通过OnFrontConnected回调通知用户，用户获得连接成功通知后，调MdApi的ReqUserLogin登陆，登陆后MdSpi的OnRsqUserLogin通知用户\n----------------------到此登陆完成---------------------\n\n    MdApi：（行情相关）\n        使用MdApi对象的SubscribeMarketData方法，传入参数为想要订阅的“合约\n    代码”，订阅成功当合约有新行情通过MdApi的OnRtnDepthMarketData回调通知   \n    用户\n----------------------至此订阅完成---------------------\n        当用户的某次请求发生错误时，会通过OnRspError通知用户        MdApi也含有退订合约、登出功能。      而一般退出程序则直接杀进程（不太安全便是）\n\n    TraderApi：（交易相关）\n        不同于以上的有 注册TraderSpi对象的指针后需要调用TraderApi对象的\n    SubscribePrivateTopic和SubscribePublicTopic方法去选择公开和私有数据流的重\n    传方法\n        对于期货柜台，每一日第一次登陆需要先查询前一日的结算单，等待查询\n    结果返回，确认，才可进行后续操作（CTP、恒生UFT），证券（LTS）无此要求\n        上一步完成后，用户可以调用ReqQryInstrument的方法查询柜台上所有可\n    以交易的合约信息（包括代码、中文名、涨跌停、最小价位变动、合约乘数等大\n    量细节），一般是在这里获得合约信息列表后，再去MdApi中订阅合约；经常有\n    人问为什么在MdApi中找不到查询可供订阅的合约代码的函数，这里尤其要注\n    意，必须通过TraderApi来获取\n        当用户报单、成交状态发生变化时，TraderApi会自动通过OnRtnOrder、\n    OnRtnTrade通知，无需额外订阅\n\n\n/************封装API****************/\n    封装后API的动作：\n        主动函数：  调用封装API主动函数，传入Python变量作为参数—>封装API将Python变量转换成C++变量—>API调用原生API主动函数传入C++变量作为参数\n        回掉函数：  交易柜台通过原生API传入参数为C++变量->封装API将C++变量转换为Python变量->封装API调用封装后的回调函数想Python程序中推送数\n\n    封装处理：\n        将回调函数Spi类和主动函数Api类封装为一个类，使用中更加方便\n        在API中包含一个缓冲队列，当回调函数收到新的数据信息时只是简单存入\n    并立即返回，而数据信息的处理和向Python中的推送则由另一个工作线程执行\n        鉴于Python中dict字典内的键和值的类型可以不同，所以利用此来代替\n    C++的结构体\n\n\n    处理示例：\n        getChar()： d(Python字典对象) key(d中想要提取的数据键名) \n    if(d.has_key(key)) 判断是否存在这个键；\n        object o = d[key]; 提取对应值   \n        extract<string> x(o); 生成提取\n    std::string类的提取器\n        if (x.check())  检测能否提取出数据  string s = x();  执行解包器，提取\n    string对象\n        const char *buffer = s.c_str();  从s中获取字符串指针bufffer     \n    strcpy_s(value, strlen(buffer) + 1, buffer);  \n    将字符串指针指向的字符串数组复制到结构体成员的指针上    对字符串指针赋值\n    必须使用strcpy_s, vs2013使用strcpy\n    编译通不过+1应该是因为C++字符串的结尾符号？不是特别确定，不加这个\n    1会出错\n            \n/**************事件驱动*****************/\n\n时间驱动： 定时调用 \n事件驱动： 新事件被推送时（如新行情、成交）则调用\n    初始化：    事件队列、引擎开关（标志）、事件线程、定时器、一个事件和处理函数对应字典（__handlers）\n    引擎运行：  循环检查引擎开关 若开则一直尝试获取事件（阻塞开，时间1s），处理事件； 若出错则pass\n    处理事件：  检测是否有对当前事件监听的处理函数，若有则循环调用相应处理函数对事件进行处理\n    计时器事件：    创建计时器事件，推入计时器事件\n    引擎启动：  打开引擎开关、启动事件处理线程、启动定时器（事件默认间隔1s）\n    停止引擎：  关闭。。。。、停止计时器、等待事件处理线程退出\n    注册事件处理：  尝试获取对应处理此类型函数列表（对应字典），若无则创建。\n    注销函数监听：  。。。。。。。。。。。。。。。。。。。。。，若无则pass，若函数存在于列表则将之移除，若函数列表为空，则引擎中移除该事件类型\n    put：       向事件队列中存入事件\n\n底层接口对接：\n    交易程序架构分：底层接口、中层引擎、顶层GUI，\n    为将某API对接到程序中需：1.将API的回调函数收到的数据—>中层引擎 等待处理 2.将API的主动函数进行一定的简化封装，便于中层引擎调用\n\n\n\n中层引擎设计：\n    进一步封装底层接口所暴露出的API函数，使得其更容易被上层的GUI和策略组件调用。\n    构造函数：\n        以主引擎成员变量形式创建事件驱动引擎ee，行情接口md和交易接口td的对象。\n        随后立即启动，当用户调用接口连接、登陆等功能、收到事件推送，ee可以立即推送到监听这些事件的组件进行处理。\n        LTS和CTP接口的持仓情况和账户情况不通过推送，需手动查询。Demo选择循环查询模式，不断更新。可选择不进行查询，降低占用网络带宽。\n        登陆成功后，查询柜台所有可交易信息，保存到dictInstrument字典中，方便后续查询\n    优化了一些函数方法的调用方式，将经纪商一起提供的接口登陆封装在一个函数中，减少了重复书写的次数。\n\n---\n\n---\n\n---\n\n---\n\n## 引擎之间执行过程\n\n### 发单为例：\n设置发单按钮 -> 将点按动作关联sendOrder发单实现函数（从输入框获取合约代码->获取合约信息对象（见下） -> *如果成功获取* -> 再获取方向价格等信息 -> 调用主引擎下发单实现 -> 主引擎转到TdApi下发单函数执行（请求编号（API管理） -> 将传入信息数据存入字典（合约代码、方向价格等） -> 报单编号（API管理） -> 用户id、单子属性（投机、立即发单、今日有效）等信息存入字典） -> self.reqOrderInsert(req（信息字典）, self.__reqid（请求编号）) -> 返回订单号（报单编号））\n\n***\n\n#### 主引擎：（负责对API的调度）\n__init__()初始化中的动作：\n    创建事件驱动引擎、创建API接口、启动事件驱动引擎、循环查询持仓和账户相关（之后学习）、创建合约存储空字典，注册插入合约对象执行函数事件类型和其处理函数。\n其中包含几乎所有的功能函数，包含了每个功能函数的实现方法\n\n#### 事件驱动引擎：\n__init__()初始化中的动作：\n    创建事件队列、创建设置事件引擎开关（关）、创建事件处理线程(目标为引擎运行)、创建计时器（将超时动作连接到\\__onTimer函数）、创建\\__handlers空字典（存储对应事件调用关系）\n统筹管理事件的执行，在其中建立起事件执行队列管理向队列中插入事件，分配事件对象类型（据此注册其执行函数）和具体事件数据（时间及日志），拥有注册事件处理监听及注销监听。最终使得整个程序有序的进行。\n\n***\n\n### 调用关系\n主引擎在初始化时即启动事件驱动引擎（调用启动函数start()（将引擎开关设为启动、启动事件处理线程、启动计时器）） -> 事件处理线程运行目标\\__run()（若开关开则将从**事件队列**中get()到事件，放到处理函数\\__process()中执行） -> \\__process()处理事件函数（检查事件类型，在\\__handlers字典中是否有对此监听处理函数，若存在则调用字典中处理函数）\n\n    事件启动引擎start()中启动定时器 -> 创建计时器事件 -> 向队列存入计时器事件\n\n***\n\n#### 获取合约信息对象：\n从合约字典中读取合约信息对象有则继续执行原本程序操作（获取名称、发单撤单），无则None\n\n\n##### 以初始化查询为例：\n主引擎初始化中注册`self.ee.register(EVENT_TDLOGIN, self.initGet)`,`EVENT_TDLOGIN`为交易服务器登陆成功事件。即此事件为登录成功后开始初始化查询。\n步骤：打开设定文件`setting.vn`，尝试读取设定字典。载入后，设定事件类型、将事件推入事件队列、查询投资者、循环查询账户和持仓。（若不存在or合约数据非今天，则发出获取合约请求。）-> 获取合约 -> 定义事件类型 -> 推入事件队列 -> API查询合约\n\n---\n\n---\n\n## ctpGateway 接入方法\n<font color=orange>考虑到现阶段大部分CTP中的ExchangeID字段返回的都是空值\nvtSymbol直接使用symbol</font>\n\n---\n\n创建CTP价格方向交易所持仓产品等类型映射，方便调用  **然后**  `class CtpGateway(VtGateway):`CTP接口中初始化动作（继承VtGateway实例化事件引擎、设定网关名称为’CTP‘、实例化ctpMdApi，ctpTdApi、初始化行情交易连接状态，循环查询允许）\n\n**连接过程**\n初始化账号密码等、连接服务器、注册服务器地址、登陆    \n订阅合约里有个设计为：尚未登陆就调用了订阅则保存订阅信号，则在成功登陆之后的登陆回报函数中重新订阅\n\n---\n\n## 数据记录器\n\n#### drBase.py中（定义数据类型）：（<font color=orange>数据记录器和CTA两模块共同使用</font>）\n    K线数据\n        构造函数（定义数据类型）：vt系统代码、合约代码、交易所代码、开高低\n    关、bar开始时间、时间、成交量持仓量\n    Tick数据\n        构造函数（定义数据类型）：vt系统代码、合约代码、交易所代码、成交数\n    据、tick时间、五档行情\n\n---\n\n#### <font color=red>DrEngine数据记录引擎</font>\n获取当前文件绝对路径\n\n    settingFileName = 'DR_setting.json'\n    path = os.path.abspath(os.path.dirname(__file__))       \n    settingFileName = os.path.join(path, settingFileName)\n初始化中动作：实例化设置主引擎、事件引擎、获取当前日期、创建主力合约代码映射字典、Tick对象字典、K线对象字典、初始化数据库插入单独线程、载入设置，订阅行情 \n\n##### 载入设置、订阅行情\n打开`DR_setting.json`文件，以json载入，其中`’working‘`决定是否启动行情记录功能。随后从json文件中循环获取合约代码订阅tick和bar\n\n启动数据插入线程（`run`函数（向MongoDB中插入数据））、注册事件监听（`procecssTickEvent`处理行情推送（<font color=green>下详</font>））\n\n##### 处理行情推送\n从事件字典中取出保存的具体事件数据、`vtSymbol`为tick识别信号（合约代码）、转化Tick格式、更新TIck数据（并发出日志）、更新分钟线数据\n\n---\n\n## 风控模块\n从配置json文件中读取设定信息  操作运作：1.检测风控设定值变化 2.每笔交易发单时使用风控模块决定该次发单是否允许   （其中流控计数在每次调用风控检测时计数、成交合约量在更新成交数据中加交易数值）\n\n---\n\n---\n\n---\n\n## CTA策略\n\n直接来到改版之后：\n    \n\n---\n\n---\n\n---\n\n## CTP交易托管API\n### 介绍\n基于C++的类库，通过使用提供接口实现相关交易功能，含：报单与报价录入、的撤销、的挂起、的激活、的修改、的查询、成交单查询、投资者查询、 投资者持仓查询、合约查询、交易日获取等\n\n含文件：交易接口、API所需数据类型、业务相关数据结构i、的头文件、动态链接库、导入库\n\n### 体系结构\n建立在TCP协议之上FTD协议与交易托管系统进行通讯\n**FTD通讯模式：** \n\n|               |                               |   \n|   :---            |               ---:                |\n|  对话通讯模式 |   - 会员端请求、接收处理、响应    |   \n|  私有通讯模式 |   - 交易所主动向特定会员发出      |   \n|  广播通讯模式 |   - 交易所主动、全员发送          |   \n\n\n\n### 接口模式\n`CThostFtdeTraderApi`和`CThostFtdeTraderSpi`，前者发送请求，后者回调响应。旗下函数方法前者以Req开头后者以OnRsp开头。请求接口第一个参数为请求的内容，不能为空。第二个参数为请求号。\n\n如果接收到的响应数据不止一个，则回调函数会被多次调用。第一个参数为响应的具体数据，第二个参数为处理结果，第三个参数为请求号，第四个参数为响应结束标志，表明是否是本次响应的最后一次回调。\n\n### 运行模式\n至少两个线程，一个为应用程序主线程，一个为交易员API工作线程，其间通讯由API工作线程驱动。\n\n### 撤单 发单\n#### 发单为例：\n在用户点击发单之后，程序从“交易”栏的`text()`获取合约代码，随后从详细合约保存字典中读取其他信息，将之保存到一个字典中之后，调用主引擎对特定接口发单。\n\n发单完成之后，马上会收到报单响应 OnRspOrderInsert，说明交易系统已经收到报单。报单进入交易系统后，如果报单的交易状态发生变化，就会收到报单回报 OnRtnOrder。如果报单被撮(部分)成交，就会收到成交回报 OnRtnTrade。通过更新\n\n\n#### 撤单时：\n程序从单元格中获取exchange、frontID、orderID、sessionID、symbol、gatewayName等信息，调用主引擎对特定接口撤单。撤单时调用Api函数为reqOrderAction其内容包括撤销、挂起、激活、修改，故还需一个Flag参数\n\nps：如果报单还停留在 Thost，Thost 可以用 Front 、SessionID、OrderRef 来定位\n如果报单停留在交易所，Thost 可以用 ExchangID、OrderSysID 来定位，然后向交易\n所转发撤单指令。\n\n### TraderApi所有方法功能\n    OnFrontConnected/Disconnected       \n    # 客户端与交易托管系统建立起通信连接时\n    OnHeartBeatWarning      \n    # 当长时间未收到报文时\n    OnRspUserLogin/Logout       \n    # 登陆注销响应\n    OnRspUserPasswordUpdate     \n    # 改密响应\n    OnRspTradingAccountPasswordUpdate       \n    # 当客户端发出资金账户口令更新指令后，交易托管系统返回响应时\n    OnRspError      \n    # 请求出错时\n    OnRspOrderInsert        \n    # 报单录入\n    OnRspOrderAction        \n    # 报单操作包括报单的撤销、报单的挂起、报单的激活、报单的修改。当客户端\n        发出过报单操作指令后，交易托管系统返回响应时\n    OnRspQueryMaxOrderVolume        \n    # 查询最大报单\n    OnRspSettlementInfoConfirm      \n    # 当客户端发出投资者结算结果确认指令后，交易托管系统返回响应时\n    \n    等……  lol 统计无力\n？\n\n---\n\n---\n\n---\n\n## CTA 策略引擎\n\n##### \\__init__()的工作：\n\n* 加载主引擎、事件引擎；获取当前日期\n* 设定是否在回测\n* 保存策略实例的字典strategyDict(key为策略名称，value为策略实例)、\n* 保存vtSymbol和策略实例映射的字典(用于推送tick数据，可能多个策略交易同一个vtSymbol因此key为vtSymbol.value为包含所有相关策略对象的list)、\n* 保存vtOrderID和strategy对象映射的字典(用于推送order和trade数据key为vtOrderID，value为strategy对象）、\n* 本地停止单编号计数、本地停止单字典(key为stopOrderID，value为stopOrder对象)、\n* 持仓缓存字典(key为vtSymbol，value为PositionBuffer对象)、\n* 成交号集合、\n* 设置引擎类型为实盘、\n* 注册事件监听\n\n\n#### 初始化策略\n从数据库中读取3天的历史TICK数据、行情更新。。。。。有的话待续\n\n#### 启动策略\n从策略实例字典中取出策略实例，调用策略函数（已经初始化，没有在进行策略交易），开启进行交易标志位。\n\n#### 停止策略\n从策略实例字典中取出策略实例，调用策略函数（            在进行策略交易），关闭策略交易标志位 -> 对该策略发出的所有限价单进行撤单 -> 发出的所有本地停止单撤单 -> \n\n#### 保存、读取策略配置\n\n\n触发策略状态变化事件（通常用于通知GUI更新）\n获取策略的参数字典\n获取策略当前的变量字典\n\n\n### 记录\n报单更新、成交更新都是先检测是否有对此监听的策略\n限价单成交处理：成交回报、报单回报、记录成交到列表、删除该限价单\n\n#### 基础功能的策略调用\n策略中发单时，需要在设置参数时考虑设置。    另获取持仓缓存数据，做平昨平今的选择。\n策略中发单时，检查报单是否有效，赋参，撤单。\n发停止单，编号，赋参，保存至字典\n撤停止单，从工作停止单字典中移除\n\n---\n\n\n#### Ta-Lib\n趋势策略分为以下部分：\n* 趋势信号（通常是基于某几个参数计算出来的指标值超过某个阈值）、\n* 信号过滤（和趋势信号类似）、\n* 出场方案（固定点数/百分比的止盈和止损，移动止损）。\n所以，Ta-lib是策略实现工具罢了。\n\n此库中提供了多种技术分析的函数，有多种指标：ADX、MACD、RSI、布林轨道等\n；K线形态识别，如“黄昏之星”、“锤形线”等。\n\n依靠此库对数据的分析，来下达发单撤单的动作即为策略。\n\n###### 策略示例：\n    基于Talib模块的双指数均线策略`class TalibDoubleSmaDemo(CtaTemplate):`\n<font color=green>就是两个指标的数据来判断当前局势罢了</font>\n1. 设定策略参数\n2. 策略变量\n3. 参数列表（保存参数名称）\n4. 变量列表（保存变量名称）\n\n\n###### 步骤\n初始化策略（加载Bar数据）、启动策略、停止策略、收到行情Tick推送（计算K线）、收到Bar推送（缓存最新收盘价到列表 -> 数量足够后转化为Numpy数组后传入talib函数SMA中计算 -> 读取当前K线和上一根K线数值，用于判断均线交叉 -> 检测持仓状态，做出相应交易动作）\n\n---\n\n### CTA回测\n##### \\__init__()的工作\n* 本地停止单编号计数    `self.stopOrderCount`\n* 本地停止单字典    `self.stopOrderDict` And `self.workingStopOrderDict`\n* 设引擎类型为回测\n* 回测相关变量定义\n* 当前最新数据，用于模拟成交使用\n\n#### 运行回测\n1. 载入历史数据\n2. 根据回测模式确定要使用数据类\n3. 初始化策略\n4. 启动策略\n5. 回放数据（从数据库中取得推到newBar或者newTick）\n\n6. 策略获得新数据，执行相应操作\n\n\n##### 基于最新数据撮合限价单\n先确定会撮合成交的价格 -> 遍历限价单字典中所有限价单 -> 判断是否会成交 -> 发生成交推送成交数据（买入 -> 增加持仓 推送委托数据、从字典中删除该限价单）\n\n#### 计算原理\n    \n\n---\n\n---\n\n---\n\n# 改版之后程序架构\n|   |   |       |   |       |       |   |       |       |       |   |   |\n|:----  |---    |   --- |   |---        |---        |----   |   --- |   --- |   --- |---    |---:   |\n|   |APIs   |       |***    |       |   |   |       |   Trader  |       |   |   |\n|`CTP`      |   |`KSGold`   |***    |`Common`   |`Condig`   |`Core`|`Gateway`   |`Setting`  |`Strategy` |`UI`   |`main`|\n|CtpMdApi、CtpTdApi | ………… | ………… |Md、Td| ……………… | ……………… |CTA、HTA、引擎、事件管理| ……………… |配置文件| ……………… | ……………… | ……………… |\n\n\n## 事件引擎\n两版都一样，作为一个程序运行最外层的生成的实例，来进行各个实例之间的数据传输。因为每个实例都将数据在事件引擎中保存，调用事件引擎中的事件队列来对进行事件运行安排。\n\n\nLike This：\n\n    class A(object):\n    \"\"\"docstring for A\"\"\"\n        def __init__(self, name):\n            super(A, self).__init__()\n            self.name = name\n            self.a = 0\n        def da(self):\n            print self.name\n            print self.a    \n    a = A('I am A')\n    a.da()\n\n\n\n\n    class B(object):\n    \"\"\"docstring for B\"\"\"\n        def __init__(self, aclass):\n            super(B, self).__init__()\n            self.aclass = aclass\n            self.aclass.a += 1\n        def dada(self):\n            self.aclass.da()\n    b = B(a)\n    b.dada()\n\n    class C(object):\n    \"\"\"docstring for B\"\"\"\n        def __init__(self, aclass):\n            super(C, self).__init__()\n            self.aclass = aclass\n            self.aclass.a += 1\n        def dada(self):\n            self.aclass.da()\n    c = C(a)\n    c.dada()\n>I am A\n\n>0\n\n>I am A\n\n>1\n\n>I am A\n\n>2\n\nB与C分别在去改变读取在A中定义的数值。  嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(*￣▽￣*)o就是这么写意和惬意。<font color=indigo>Indigo</font>色在纯黑背景下不好辨识哈哈，还是换少女粉吧\n\n---\n\n---\n\n---\n\n\n# Vn.Py 界面\n\nIcon 图标下载网:    <http://www.easyicon.net/>\n## 界面设计文档\n### 功能要求\n连接、登陆，订阅，发撤单，持仓、账户信息、成交（下单时间、成交时间、备注（下单动作者））、保留交易模块、跟随鼠标点击更新交易模块中单子内容\n\n\n### 文档编写步骤\n由需求确定功能，划分模块，模块关系，下分框架，框架实现\n\n---\n\n---\n\n### 模块\n工具栏、行情显示、策略池、账户持仓、消息栏\n\n#### 工具栏\n连接（含各个端口） 风控、帮助、登陆状态显示\n\n##### 工具功能\n\n|工具名称   |       说明        |   备注        |\n|:----      |       :----:      |    ----:      |\n|连接   |弹出端口列表       | 通过复选框选中对应端口    |\n|风控   |弹出设定列表       | 通过文本框输入设定数值    |\n|帮助   |弹出帮助窗口       |       |\n\n#### 策略池\n\n|   操作位置        |      热点操作 |           |\n|:----              |   :----:          |    ----:  |\n| 策略名称单元格    | 鼠标指针悬停      | 展开操作界面  |\n| 动作按钮      | 鼠标单击      | 执行选中  |\n| 动作按钮      | 鼠标右击      | 展开操作界面  |\n\n#### 消息栏\n分“成交”、“错误”、“日志”三个模块，选择相应模块显示对应内容\n\n| 日志              | 错误                          | 成交      |\n|:----                  |:----:                         |    :----:     |\n| 时间、内容、接口      |时间、错误代码、错误信息、接口     | 成交编号、委托编号、合约代码、名称、方向、开平、价格、成交量、成交时间、接口      |\n| 显示操作日志          | 显示当前操作错误信息              | 显示成交单信息        |\n\n\n#### 账户持仓信息\n账户显示账户信息，并具备切换账户功能\n当前选中账户 显示在旁label中。\n\n### 界面切换\n\n\n\n\n\n\n# 记录笔记\n\n照例，先贴网址： <http://www.qaulau.com/books/PyQt4_Tutorial/index.html>\n#### 窗口设置\n    resize(8, 8)\n    setWindowTitle(u'标题')\n#### 获取图标\n    def getIcon(filename):\n    \"\"\" 获取图标 \"\"\"\n        fileInfo = Qt.QFileInfo(filename) \n        fileIcon = Qt.QFileIconProvider() \n        icon = QtGui.QIcon(fileIcon.icon(fileInfo)) \n        return icon  \n    使用时：\n    self.setWindowIcon(getIcon('../hi/app.ico'))\n\n---\n\n##### Dock\n    widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.“dock\n    标题”, QtCore.Qt.RightDockWidgetArea)\n    # 方向有：  \n    RightDockWidgetArea,BottomDockWidgetArea,LeftDockWidgetArea\n    # 创建dock窗口\n    # 可利用\n    self.tabifyDockWidget(dockMarketM, dockAllDataM)\n    来合并同一个方向上的dock\n    \n    # 此下还没看… \n    dockTradeM.raise_()\n    dockPositionM.raise_()\n    \n    # 连接组件之间的信号\n    widgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition)\n        \n    # 保存默认设置\n    self.saveWindowSettings('default')\n\n其实现函数为：\n\"\"\"创建停靠组件\"\"\"\n\n    def createDock(self, widgetClass, widgetName, widgetArea):\n        widget = widgetClass(self.mainEngine, self.eventEngine) \n        dock = QtGui.QDockWidget(widgetName)\n        dock.setWidget(widget)\n        dock.setObjectName(widgetName)\n        dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable)\n        self.addDockWidget(widgetArea, dock)\n        return widget, dock\n> 再本质一点的东西为：\n\n    widget1 = Ha(self)\n    dock = QtGui.QDockWidget('haha')\n    dock.setObjectName('ha1')\n    dock.setWidget(widget1)\n    dock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable)\n    self.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock)\n\n#### 动作\n    exit = QtGui.QAction(QtGui.QIcon('hello.ico'), 'exit', self)\n    exit.setShortcut('Ctrl+Q')\n    exit.setStatusTip('Exit application')\n    # 图标、文字、快捷键、提示信息\n    \n    menubar = self.menuBar()\n    file = menubar.addMenu('&File')\n    file.addAction(exit)\n    # 创建目录和工具栏，将动作添加进去。工具栏同理\n\n### 定位布局\n#### 绝对定位\n    label1 = QtGui.QLabel(u'绝对定位', self)\n    label1.move(15, 60)\n    # 创建、移动到显示位置\n\n#### 框布局 及 布局元素平均分布\n    okButton = QtGui.QPushButton(\"OK\")\n    cancelButton = QtGui.QPushButton(\"Cancel\")\n    # 创建按钮\n\n    hbox = QtGui.QHBoxLayout()\n    hbox.addStretch(1)\n    hbox.addWidget(okButton)        # 增加组件\n    hbox.addWidget(cancelButton)\n    # 创建水平栏\n    hbox.addStretch()   # 平均分布\n    \n    vbox = QtGui.QVBoxLayout()\n    vbox.addStretch(1)\n    # 创建竖列\n\n    vbox.addLayout(hbox)\n    # 将水平栏插入竖列\n    self.setLayout(vbox)     \n    # 显示最终竖列\n注意一下add时选择对类型就好了。\n\n#### 组件之间连接信号\n    # classA(QtGui.QTableWidget):\n    #   pass\n    classA.itemDoubleClicked.connect(classB.actionFunction)\n    # 这样单纯调用还是可以的，但是数据传输… 就得继续研究一下了。\n\n#### 调用Windows程序\n    import win32api\n        path = 'D:/vnpy-    \\\n        master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json'\n        win32api.ShellExecute(0, 'open', 'notepad.exe', path, '', 1)\n    # 使用记事本打开此文件\n\n#### Json\n    with open('D:/vnpy- \\\n        master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json',\n    'r') as f:\n    setting = json.load(f)\n    self.userID = str(setting['userID'])\n    self.password = str(setting['password'])\n\n##### 关闭事件退出提示\n    def closeEvent(self, event):\n        reply = QtGui.QMessageBox.question(self, 'Message',\"Are you \n    sure to quit?\", QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)\n    if reply == QtGui.QMessageBox.Yes:\n        event.accept()\n    else:\n        event.ignore()\n函数放置位置就是主窗口类下就好。\n\n##### VS2015 快捷键\n    Ctrl + k    Ctrl + c        # 多行注释\n    Ctrl + k    Ctrl + u        # 多行取消注释\n##### 鼠标事件\npress\nmove\nrelease\ndoubleClick\nclicked()\nenterEvent 鼠标移入\nleaveEvent 鼠标移出\n回去看看具体函数\n\n## 信号槽（传输额外参数）\n一般来说，比如一个按钮吧。 在链接点击信号与槽时`buttonInit[i].clicked.connect(partial(self.init, i))`就完事了。然而，当循环创建按钮，对应同样的槽函数，只是需要执行的变量有区别时，就需要传输额外的参数。\n这时，方法有二：\n\n环境：\n\npython2.7.8\n\npyqt 4.11.1\n### 一： 使用lambda表达式\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyForm</span><span class=\"hljs-params\">(QMainWindow)</span>:</span>  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(MyForm, self).__init__(parent)  \n        button1 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button2 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button1.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">1</span>))  \n        button2.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">2</span>))  \n\n        layout = QHBoxLayout()  \n        layout.addWidget(button1)  \n        layout.addWidget(button2)  \n\n        main_frame = QWidget()  \n        main_frame.setLayout(layout)  \n\n        self.setCentralWidget(main_frame)  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_button</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        print(<span class=\"hljs-string\">'Button {0} clicked'</span>.format(n))  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:  \n    <span class=\"hljs-keyword\">import</span> sys  \n    app = QApplication(sys.argv)  \n    form = MyForm()  \n    form.show()  \n    app.exec_()  </code></pre>\n\n<p>解释一下，on_button是怎样处理从两个按钮传来的信号。我们使用lambda传递按钮数字给槽，也可以传递任何其他东西—甚至是按钮组件本身（假如，槽打算把传递信号的按钮修改为不可用）</p>\n\n### 二： 使用functools里的partial函数\n<pre class=\"prettyprint\"><code class=\"language-python hljs \">button1.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">1</span>))  \nbutton2.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">2</span>))  </code></pre>\n\n<p>《Rapid GUI Program with Python and QT》 P143例子。</p>\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial  \n<span class=\"hljs-keyword\">import</span> sys  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Bu1</span><span class=\"hljs-params\">(QWidget)</span>:</span>  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(Bu1, self).__init__(parent)  \n        <span class=\"hljs-comment\">#水平盒式布局  </span>\n        layout = QHBoxLayout()  \n        <span class=\"hljs-comment\">#显示  </span>\n        self.lbl = QLabel(<span class=\"hljs-string\">'no button is pressed'</span>)  \n        <span class=\"hljs-comment\">#循环5个按钮  </span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">5</span>):  \n            but = QPushButton(str(i))  \n            layout.addWidget(but)  \n            <span class=\"hljs-comment\">#信号和槽连接  </span>\n            but.clicked.connect(self.cliked)  \n\n        <span class=\"hljs-comment\">#使用封装，lambda  </span>\n        but = QPushButton(<span class=\"hljs-string\">'5'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_click(<span class=\"hljs-string\">'5'</span>))  \n        <span class=\"hljs-comment\">#使用个who变量，结果不正常，显示 False is pressed  </span>\n        <span class=\"hljs-comment\">#but.clicked.connect(lambda who=\"5\": self.on_click(who))  </span>\n\n        <span class=\"hljs-comment\">#使用封装，partial函数  </span>\n        but = QPushButton(<span class=\"hljs-string\">'6'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(partial(self.on_click, <span class=\"hljs-string\">'6'</span>))  \n\n        layout.addWidget(self.lbl)  \n        <span class=\"hljs-comment\">#设置布局  </span>\n        self.setLayout(layout)  \n\n    <span class=\"hljs-comment\">#传递额外参数     </span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">cliked</span><span class=\"hljs-params\">(self)</span>:</span>  \n        bu = self.sender()  \n        <span class=\"hljs-keyword\">if</span> isinstance(bu, QPushButton):  \n            self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % bu.text())  \n        <span class=\"hljs-keyword\">else</span>:  \n            self.lbl.setText(<span class=\"hljs-string\">'no effect'</span>)  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_click</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % n)  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:          \n    app = QApplication(sys.argv)  \n    bu =Bu1()  \n    bu.show()  \n    app.exec_()   </code></pre>\n\n三：感谢[来源](http://blog.csdn.net/fengyu09/article/details/39498777) \n\n---\n\n---\n\n---\n\n\n# 策略管理\n策略类，引擎，报单管理&&仓位管理\n## 引擎\n引擎中将策略事件有序添加到事件引擎和主引擎中。 读取setting.json 文件对策略参数以及是否启用进行配置。设定日期。\n使用策略实例字典保存策略名与实例关系——\n并将此字典在推送字典中与tick数据ID对应（ID对多实例。）\n再有orderID与策略对应字典，用以推送order和trade数据\n计数本地停止单 、 持仓缓存字典\n\n\n## 报单管理\n### 成交推送处理\n成交回调 - > 订单ID和策略对应字典 -> 计算策略持仓（根据策略方向，持仓增加交易笔数）-> 更新持仓缓存数据 \n\n### 报单者类\n单一合约订单缓存类——初始化buffer 存储字典_log策略日志存储\n\n\n","source":"_posts/notes/noteOfvn_py.md","raw":"---\ntitle: Vn.Py学习笔记（Python交易平台框架）\ndate: 2018-05-15 10:13:48\ncategories: [note, python, learning]\ntags: [Vn.Py, gui, socket, learning]\n---\nauthor: Ian\n\n# Vn.Py笔记 ✏📔\n\n![vn.py](https://static.vnpy.com/static/img/index/2019-5-27/mainwindow.PNG)\n---\n\n<font color=green>一个开源Python交易软件，主使用CTP协议。当然，还有其他协议了其源项目在<http://www.vnpy.org/> </font>\n\n***\n\n---\n\n---\n\n## 初期笔记\n    报单交易过程中，\n\n    CTP使用BrokerID 从业务层面完全隔离不同经纪公司的交易、风控及结算用户的接入。\n    BrokerID具体取值咨询开户的经纪公司。\n\nCTP中 UserID为操作员代码，InversterID为投资者代码； 投资者自己下单两者同为投资者代码\n    \n    CTP-API中，OrderRef和OrderAction    前者为CTP后台提供给客户端标识一笔报\n    单的字段，从客户端可通过（FrontID、SessionID、OrderRef）唯一确定一笔报\n    单；；；后者与OrderRef功能相似，提供给客户端来标识一笔撤单。\n    前者的数据类型为字符数组，必须为阿拉伯数字字符。\n    OrderRef（OrderActionRef）取值必须保证在同一会话内发送的报单\n    OrderRef（OrderActionRef）值大于之前的最大值，开发多线程客户端尤为需要  \n    注意。\n    \nCTP-API库：\n\n    error.dtd\\error.xml 错误定义文件    ----   ThostFrfcMdApi.h \n    交易接口类定义文件  \n    ———   ThostFtfcUserApiDataType.h 类型定义文件  ------    \n    thostmduserapi.lib,thostmduserpi.dll 行情接口库文件     -----   \n    thosttraderapi.lib,thosttraderapi.dll交易接口库文件   ----- \n    \n    交易和行情接口类定义文件都包含API 和 SPI类定义，客户端使用API向CTP后台\n    发送请求，CTP后台则使用SPI向客户端回传响应及回报\n\n    行情Demo开发：\n        1.将API文件复制到工程目录；并将所有的头文件和静态、动态库连链接库\n    并将文件导入到项目工程中。\n        先继承行情接口类CThostFtdcMdspi，并实现需要实现的虚函数。  \n    OnFrontConnectde、OnFrontDisconnected、OnPspUserLogin、\n    OnRspSubMarketDAta\n\n\n/**********API工作流程*************/\n\nAPI压缩包——API含常量对应字符、类型定义、操作系统编译定义、回调函数（MdSpi）（柜台向用户端发送信息后被系统自动调用的函数）、主动函数（MdApi）（向柜台发送各种请求和指令）\n\nAPI工作流程：\n    创建MdSpi对象（回掉函数），调用MdApi类，以Create开头的静态方法，创建MdApi对象（主动函数），注册MdSpi对象指针，行情柜台前置机地址，调用MdApi对象Init方法初始化连接前置机，连接成功会通过OnFrontConnected回调通知用户，用户获得连接成功通知后，调MdApi的ReqUserLogin登陆，登陆后MdSpi的OnRsqUserLogin通知用户\n----------------------到此登陆完成---------------------\n\n    MdApi：（行情相关）\n        使用MdApi对象的SubscribeMarketData方法，传入参数为想要订阅的“合约\n    代码”，订阅成功当合约有新行情通过MdApi的OnRtnDepthMarketData回调通知   \n    用户\n----------------------至此订阅完成---------------------\n        当用户的某次请求发生错误时，会通过OnRspError通知用户        MdApi也含有退订合约、登出功能。      而一般退出程序则直接杀进程（不太安全便是）\n\n    TraderApi：（交易相关）\n        不同于以上的有 注册TraderSpi对象的指针后需要调用TraderApi对象的\n    SubscribePrivateTopic和SubscribePublicTopic方法去选择公开和私有数据流的重\n    传方法\n        对于期货柜台，每一日第一次登陆需要先查询前一日的结算单，等待查询\n    结果返回，确认，才可进行后续操作（CTP、恒生UFT），证券（LTS）无此要求\n        上一步完成后，用户可以调用ReqQryInstrument的方法查询柜台上所有可\n    以交易的合约信息（包括代码、中文名、涨跌停、最小价位变动、合约乘数等大\n    量细节），一般是在这里获得合约信息列表后，再去MdApi中订阅合约；经常有\n    人问为什么在MdApi中找不到查询可供订阅的合约代码的函数，这里尤其要注\n    意，必须通过TraderApi来获取\n        当用户报单、成交状态发生变化时，TraderApi会自动通过OnRtnOrder、\n    OnRtnTrade通知，无需额外订阅\n\n\n/************封装API****************/\n    封装后API的动作：\n        主动函数：  调用封装API主动函数，传入Python变量作为参数—>封装API将Python变量转换成C++变量—>API调用原生API主动函数传入C++变量作为参数\n        回掉函数：  交易柜台通过原生API传入参数为C++变量->封装API将C++变量转换为Python变量->封装API调用封装后的回调函数想Python程序中推送数\n\n    封装处理：\n        将回调函数Spi类和主动函数Api类封装为一个类，使用中更加方便\n        在API中包含一个缓冲队列，当回调函数收到新的数据信息时只是简单存入\n    并立即返回，而数据信息的处理和向Python中的推送则由另一个工作线程执行\n        鉴于Python中dict字典内的键和值的类型可以不同，所以利用此来代替\n    C++的结构体\n\n\n    处理示例：\n        getChar()： d(Python字典对象) key(d中想要提取的数据键名) \n    if(d.has_key(key)) 判断是否存在这个键；\n        object o = d[key]; 提取对应值   \n        extract<string> x(o); 生成提取\n    std::string类的提取器\n        if (x.check())  检测能否提取出数据  string s = x();  执行解包器，提取\n    string对象\n        const char *buffer = s.c_str();  从s中获取字符串指针bufffer     \n    strcpy_s(value, strlen(buffer) + 1, buffer);  \n    将字符串指针指向的字符串数组复制到结构体成员的指针上    对字符串指针赋值\n    必须使用strcpy_s, vs2013使用strcpy\n    编译通不过+1应该是因为C++字符串的结尾符号？不是特别确定，不加这个\n    1会出错\n            \n/**************事件驱动*****************/\n\n时间驱动： 定时调用 \n事件驱动： 新事件被推送时（如新行情、成交）则调用\n    初始化：    事件队列、引擎开关（标志）、事件线程、定时器、一个事件和处理函数对应字典（__handlers）\n    引擎运行：  循环检查引擎开关 若开则一直尝试获取事件（阻塞开，时间1s），处理事件； 若出错则pass\n    处理事件：  检测是否有对当前事件监听的处理函数，若有则循环调用相应处理函数对事件进行处理\n    计时器事件：    创建计时器事件，推入计时器事件\n    引擎启动：  打开引擎开关、启动事件处理线程、启动定时器（事件默认间隔1s）\n    停止引擎：  关闭。。。。、停止计时器、等待事件处理线程退出\n    注册事件处理：  尝试获取对应处理此类型函数列表（对应字典），若无则创建。\n    注销函数监听：  。。。。。。。。。。。。。。。。。。。。。，若无则pass，若函数存在于列表则将之移除，若函数列表为空，则引擎中移除该事件类型\n    put：       向事件队列中存入事件\n\n底层接口对接：\n    交易程序架构分：底层接口、中层引擎、顶层GUI，\n    为将某API对接到程序中需：1.将API的回调函数收到的数据—>中层引擎 等待处理 2.将API的主动函数进行一定的简化封装，便于中层引擎调用\n\n\n\n中层引擎设计：\n    进一步封装底层接口所暴露出的API函数，使得其更容易被上层的GUI和策略组件调用。\n    构造函数：\n        以主引擎成员变量形式创建事件驱动引擎ee，行情接口md和交易接口td的对象。\n        随后立即启动，当用户调用接口连接、登陆等功能、收到事件推送，ee可以立即推送到监听这些事件的组件进行处理。\n        LTS和CTP接口的持仓情况和账户情况不通过推送，需手动查询。Demo选择循环查询模式，不断更新。可选择不进行查询，降低占用网络带宽。\n        登陆成功后，查询柜台所有可交易信息，保存到dictInstrument字典中，方便后续查询\n    优化了一些函数方法的调用方式，将经纪商一起提供的接口登陆封装在一个函数中，减少了重复书写的次数。\n\n---\n\n---\n\n---\n\n---\n\n## 引擎之间执行过程\n\n### 发单为例：\n设置发单按钮 -> 将点按动作关联sendOrder发单实现函数（从输入框获取合约代码->获取合约信息对象（见下） -> *如果成功获取* -> 再获取方向价格等信息 -> 调用主引擎下发单实现 -> 主引擎转到TdApi下发单函数执行（请求编号（API管理） -> 将传入信息数据存入字典（合约代码、方向价格等） -> 报单编号（API管理） -> 用户id、单子属性（投机、立即发单、今日有效）等信息存入字典） -> self.reqOrderInsert(req（信息字典）, self.__reqid（请求编号）) -> 返回订单号（报单编号））\n\n***\n\n#### 主引擎：（负责对API的调度）\n__init__()初始化中的动作：\n    创建事件驱动引擎、创建API接口、启动事件驱动引擎、循环查询持仓和账户相关（之后学习）、创建合约存储空字典，注册插入合约对象执行函数事件类型和其处理函数。\n其中包含几乎所有的功能函数，包含了每个功能函数的实现方法\n\n#### 事件驱动引擎：\n__init__()初始化中的动作：\n    创建事件队列、创建设置事件引擎开关（关）、创建事件处理线程(目标为引擎运行)、创建计时器（将超时动作连接到\\__onTimer函数）、创建\\__handlers空字典（存储对应事件调用关系）\n统筹管理事件的执行，在其中建立起事件执行队列管理向队列中插入事件，分配事件对象类型（据此注册其执行函数）和具体事件数据（时间及日志），拥有注册事件处理监听及注销监听。最终使得整个程序有序的进行。\n\n***\n\n### 调用关系\n主引擎在初始化时即启动事件驱动引擎（调用启动函数start()（将引擎开关设为启动、启动事件处理线程、启动计时器）） -> 事件处理线程运行目标\\__run()（若开关开则将从**事件队列**中get()到事件，放到处理函数\\__process()中执行） -> \\__process()处理事件函数（检查事件类型，在\\__handlers字典中是否有对此监听处理函数，若存在则调用字典中处理函数）\n\n    事件启动引擎start()中启动定时器 -> 创建计时器事件 -> 向队列存入计时器事件\n\n***\n\n#### 获取合约信息对象：\n从合约字典中读取合约信息对象有则继续执行原本程序操作（获取名称、发单撤单），无则None\n\n\n##### 以初始化查询为例：\n主引擎初始化中注册`self.ee.register(EVENT_TDLOGIN, self.initGet)`,`EVENT_TDLOGIN`为交易服务器登陆成功事件。即此事件为登录成功后开始初始化查询。\n步骤：打开设定文件`setting.vn`，尝试读取设定字典。载入后，设定事件类型、将事件推入事件队列、查询投资者、循环查询账户和持仓。（若不存在or合约数据非今天，则发出获取合约请求。）-> 获取合约 -> 定义事件类型 -> 推入事件队列 -> API查询合约\n\n---\n\n---\n\n## ctpGateway 接入方法\n<font color=orange>考虑到现阶段大部分CTP中的ExchangeID字段返回的都是空值\nvtSymbol直接使用symbol</font>\n\n---\n\n创建CTP价格方向交易所持仓产品等类型映射，方便调用  **然后**  `class CtpGateway(VtGateway):`CTP接口中初始化动作（继承VtGateway实例化事件引擎、设定网关名称为’CTP‘、实例化ctpMdApi，ctpTdApi、初始化行情交易连接状态，循环查询允许）\n\n**连接过程**\n初始化账号密码等、连接服务器、注册服务器地址、登陆    \n订阅合约里有个设计为：尚未登陆就调用了订阅则保存订阅信号，则在成功登陆之后的登陆回报函数中重新订阅\n\n---\n\n## 数据记录器\n\n#### drBase.py中（定义数据类型）：（<font color=orange>数据记录器和CTA两模块共同使用</font>）\n    K线数据\n        构造函数（定义数据类型）：vt系统代码、合约代码、交易所代码、开高低\n    关、bar开始时间、时间、成交量持仓量\n    Tick数据\n        构造函数（定义数据类型）：vt系统代码、合约代码、交易所代码、成交数\n    据、tick时间、五档行情\n\n---\n\n#### <font color=red>DrEngine数据记录引擎</font>\n获取当前文件绝对路径\n\n    settingFileName = 'DR_setting.json'\n    path = os.path.abspath(os.path.dirname(__file__))       \n    settingFileName = os.path.join(path, settingFileName)\n初始化中动作：实例化设置主引擎、事件引擎、获取当前日期、创建主力合约代码映射字典、Tick对象字典、K线对象字典、初始化数据库插入单独线程、载入设置，订阅行情 \n\n##### 载入设置、订阅行情\n打开`DR_setting.json`文件，以json载入，其中`’working‘`决定是否启动行情记录功能。随后从json文件中循环获取合约代码订阅tick和bar\n\n启动数据插入线程（`run`函数（向MongoDB中插入数据））、注册事件监听（`procecssTickEvent`处理行情推送（<font color=green>下详</font>））\n\n##### 处理行情推送\n从事件字典中取出保存的具体事件数据、`vtSymbol`为tick识别信号（合约代码）、转化Tick格式、更新TIck数据（并发出日志）、更新分钟线数据\n\n---\n\n## 风控模块\n从配置json文件中读取设定信息  操作运作：1.检测风控设定值变化 2.每笔交易发单时使用风控模块决定该次发单是否允许   （其中流控计数在每次调用风控检测时计数、成交合约量在更新成交数据中加交易数值）\n\n---\n\n---\n\n---\n\n## CTA策略\n\n直接来到改版之后：\n    \n\n---\n\n---\n\n---\n\n## CTP交易托管API\n### 介绍\n基于C++的类库，通过使用提供接口实现相关交易功能，含：报单与报价录入、的撤销、的挂起、的激活、的修改、的查询、成交单查询、投资者查询、 投资者持仓查询、合约查询、交易日获取等\n\n含文件：交易接口、API所需数据类型、业务相关数据结构i、的头文件、动态链接库、导入库\n\n### 体系结构\n建立在TCP协议之上FTD协议与交易托管系统进行通讯\n**FTD通讯模式：** \n\n|               |                               |   \n|   :---            |               ---:                |\n|  对话通讯模式 |   - 会员端请求、接收处理、响应    |   \n|  私有通讯模式 |   - 交易所主动向特定会员发出      |   \n|  广播通讯模式 |   - 交易所主动、全员发送          |   \n\n\n\n### 接口模式\n`CThostFtdeTraderApi`和`CThostFtdeTraderSpi`，前者发送请求，后者回调响应。旗下函数方法前者以Req开头后者以OnRsp开头。请求接口第一个参数为请求的内容，不能为空。第二个参数为请求号。\n\n如果接收到的响应数据不止一个，则回调函数会被多次调用。第一个参数为响应的具体数据，第二个参数为处理结果，第三个参数为请求号，第四个参数为响应结束标志，表明是否是本次响应的最后一次回调。\n\n### 运行模式\n至少两个线程，一个为应用程序主线程，一个为交易员API工作线程，其间通讯由API工作线程驱动。\n\n### 撤单 发单\n#### 发单为例：\n在用户点击发单之后，程序从“交易”栏的`text()`获取合约代码，随后从详细合约保存字典中读取其他信息，将之保存到一个字典中之后，调用主引擎对特定接口发单。\n\n发单完成之后，马上会收到报单响应 OnRspOrderInsert，说明交易系统已经收到报单。报单进入交易系统后，如果报单的交易状态发生变化，就会收到报单回报 OnRtnOrder。如果报单被撮(部分)成交，就会收到成交回报 OnRtnTrade。通过更新\n\n\n#### 撤单时：\n程序从单元格中获取exchange、frontID、orderID、sessionID、symbol、gatewayName等信息，调用主引擎对特定接口撤单。撤单时调用Api函数为reqOrderAction其内容包括撤销、挂起、激活、修改，故还需一个Flag参数\n\nps：如果报单还停留在 Thost，Thost 可以用 Front 、SessionID、OrderRef 来定位\n如果报单停留在交易所，Thost 可以用 ExchangID、OrderSysID 来定位，然后向交易\n所转发撤单指令。\n\n### TraderApi所有方法功能\n    OnFrontConnected/Disconnected       \n    # 客户端与交易托管系统建立起通信连接时\n    OnHeartBeatWarning      \n    # 当长时间未收到报文时\n    OnRspUserLogin/Logout       \n    # 登陆注销响应\n    OnRspUserPasswordUpdate     \n    # 改密响应\n    OnRspTradingAccountPasswordUpdate       \n    # 当客户端发出资金账户口令更新指令后，交易托管系统返回响应时\n    OnRspError      \n    # 请求出错时\n    OnRspOrderInsert        \n    # 报单录入\n    OnRspOrderAction        \n    # 报单操作包括报单的撤销、报单的挂起、报单的激活、报单的修改。当客户端\n        发出过报单操作指令后，交易托管系统返回响应时\n    OnRspQueryMaxOrderVolume        \n    # 查询最大报单\n    OnRspSettlementInfoConfirm      \n    # 当客户端发出投资者结算结果确认指令后，交易托管系统返回响应时\n    \n    等……  lol 统计无力\n？\n\n---\n\n---\n\n---\n\n## CTA 策略引擎\n\n##### \\__init__()的工作：\n\n* 加载主引擎、事件引擎；获取当前日期\n* 设定是否在回测\n* 保存策略实例的字典strategyDict(key为策略名称，value为策略实例)、\n* 保存vtSymbol和策略实例映射的字典(用于推送tick数据，可能多个策略交易同一个vtSymbol因此key为vtSymbol.value为包含所有相关策略对象的list)、\n* 保存vtOrderID和strategy对象映射的字典(用于推送order和trade数据key为vtOrderID，value为strategy对象）、\n* 本地停止单编号计数、本地停止单字典(key为stopOrderID，value为stopOrder对象)、\n* 持仓缓存字典(key为vtSymbol，value为PositionBuffer对象)、\n* 成交号集合、\n* 设置引擎类型为实盘、\n* 注册事件监听\n\n\n#### 初始化策略\n从数据库中读取3天的历史TICK数据、行情更新。。。。。有的话待续\n\n#### 启动策略\n从策略实例字典中取出策略实例，调用策略函数（已经初始化，没有在进行策略交易），开启进行交易标志位。\n\n#### 停止策略\n从策略实例字典中取出策略实例，调用策略函数（            在进行策略交易），关闭策略交易标志位 -> 对该策略发出的所有限价单进行撤单 -> 发出的所有本地停止单撤单 -> \n\n#### 保存、读取策略配置\n\n\n触发策略状态变化事件（通常用于通知GUI更新）\n获取策略的参数字典\n获取策略当前的变量字典\n\n\n### 记录\n报单更新、成交更新都是先检测是否有对此监听的策略\n限价单成交处理：成交回报、报单回报、记录成交到列表、删除该限价单\n\n#### 基础功能的策略调用\n策略中发单时，需要在设置参数时考虑设置。    另获取持仓缓存数据，做平昨平今的选择。\n策略中发单时，检查报单是否有效，赋参，撤单。\n发停止单，编号，赋参，保存至字典\n撤停止单，从工作停止单字典中移除\n\n---\n\n\n#### Ta-Lib\n趋势策略分为以下部分：\n* 趋势信号（通常是基于某几个参数计算出来的指标值超过某个阈值）、\n* 信号过滤（和趋势信号类似）、\n* 出场方案（固定点数/百分比的止盈和止损，移动止损）。\n所以，Ta-lib是策略实现工具罢了。\n\n此库中提供了多种技术分析的函数，有多种指标：ADX、MACD、RSI、布林轨道等\n；K线形态识别，如“黄昏之星”、“锤形线”等。\n\n依靠此库对数据的分析，来下达发单撤单的动作即为策略。\n\n###### 策略示例：\n    基于Talib模块的双指数均线策略`class TalibDoubleSmaDemo(CtaTemplate):`\n<font color=green>就是两个指标的数据来判断当前局势罢了</font>\n1. 设定策略参数\n2. 策略变量\n3. 参数列表（保存参数名称）\n4. 变量列表（保存变量名称）\n\n\n###### 步骤\n初始化策略（加载Bar数据）、启动策略、停止策略、收到行情Tick推送（计算K线）、收到Bar推送（缓存最新收盘价到列表 -> 数量足够后转化为Numpy数组后传入talib函数SMA中计算 -> 读取当前K线和上一根K线数值，用于判断均线交叉 -> 检测持仓状态，做出相应交易动作）\n\n---\n\n### CTA回测\n##### \\__init__()的工作\n* 本地停止单编号计数    `self.stopOrderCount`\n* 本地停止单字典    `self.stopOrderDict` And `self.workingStopOrderDict`\n* 设引擎类型为回测\n* 回测相关变量定义\n* 当前最新数据，用于模拟成交使用\n\n#### 运行回测\n1. 载入历史数据\n2. 根据回测模式确定要使用数据类\n3. 初始化策略\n4. 启动策略\n5. 回放数据（从数据库中取得推到newBar或者newTick）\n\n6. 策略获得新数据，执行相应操作\n\n\n##### 基于最新数据撮合限价单\n先确定会撮合成交的价格 -> 遍历限价单字典中所有限价单 -> 判断是否会成交 -> 发生成交推送成交数据（买入 -> 增加持仓 推送委托数据、从字典中删除该限价单）\n\n#### 计算原理\n    \n\n---\n\n---\n\n---\n\n# 改版之后程序架构\n|   |   |       |   |       |       |   |       |       |       |   |   |\n|:----  |---    |   --- |   |---        |---        |----   |   --- |   --- |   --- |---    |---:   |\n|   |APIs   |       |***    |       |   |   |       |   Trader  |       |   |   |\n|`CTP`      |   |`KSGold`   |***    |`Common`   |`Condig`   |`Core`|`Gateway`   |`Setting`  |`Strategy` |`UI`   |`main`|\n|CtpMdApi、CtpTdApi | ………… | ………… |Md、Td| ……………… | ……………… |CTA、HTA、引擎、事件管理| ……………… |配置文件| ……………… | ……………… | ……………… |\n\n\n## 事件引擎\n两版都一样，作为一个程序运行最外层的生成的实例，来进行各个实例之间的数据传输。因为每个实例都将数据在事件引擎中保存，调用事件引擎中的事件队列来对进行事件运行安排。\n\n\nLike This：\n\n    class A(object):\n    \"\"\"docstring for A\"\"\"\n        def __init__(self, name):\n            super(A, self).__init__()\n            self.name = name\n            self.a = 0\n        def da(self):\n            print self.name\n            print self.a    \n    a = A('I am A')\n    a.da()\n\n\n\n\n    class B(object):\n    \"\"\"docstring for B\"\"\"\n        def __init__(self, aclass):\n            super(B, self).__init__()\n            self.aclass = aclass\n            self.aclass.a += 1\n        def dada(self):\n            self.aclass.da()\n    b = B(a)\n    b.dada()\n\n    class C(object):\n    \"\"\"docstring for B\"\"\"\n        def __init__(self, aclass):\n            super(C, self).__init__()\n            self.aclass = aclass\n            self.aclass.a += 1\n        def dada(self):\n            self.aclass.da()\n    c = C(a)\n    c.dada()\n>I am A\n\n>0\n\n>I am A\n\n>1\n\n>I am A\n\n>2\n\nB与C分别在去改变读取在A中定义的数值。  嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(*￣▽￣*)o就是这么写意和惬意。<font color=indigo>Indigo</font>色在纯黑背景下不好辨识哈哈，还是换少女粉吧\n\n---\n\n---\n\n---\n\n\n# Vn.Py 界面\n\nIcon 图标下载网:    <http://www.easyicon.net/>\n## 界面设计文档\n### 功能要求\n连接、登陆，订阅，发撤单，持仓、账户信息、成交（下单时间、成交时间、备注（下单动作者））、保留交易模块、跟随鼠标点击更新交易模块中单子内容\n\n\n### 文档编写步骤\n由需求确定功能，划分模块，模块关系，下分框架，框架实现\n\n---\n\n---\n\n### 模块\n工具栏、行情显示、策略池、账户持仓、消息栏\n\n#### 工具栏\n连接（含各个端口） 风控、帮助、登陆状态显示\n\n##### 工具功能\n\n|工具名称   |       说明        |   备注        |\n|:----      |       :----:      |    ----:      |\n|连接   |弹出端口列表       | 通过复选框选中对应端口    |\n|风控   |弹出设定列表       | 通过文本框输入设定数值    |\n|帮助   |弹出帮助窗口       |       |\n\n#### 策略池\n\n|   操作位置        |      热点操作 |           |\n|:----              |   :----:          |    ----:  |\n| 策略名称单元格    | 鼠标指针悬停      | 展开操作界面  |\n| 动作按钮      | 鼠标单击      | 执行选中  |\n| 动作按钮      | 鼠标右击      | 展开操作界面  |\n\n#### 消息栏\n分“成交”、“错误”、“日志”三个模块，选择相应模块显示对应内容\n\n| 日志              | 错误                          | 成交      |\n|:----                  |:----:                         |    :----:     |\n| 时间、内容、接口      |时间、错误代码、错误信息、接口     | 成交编号、委托编号、合约代码、名称、方向、开平、价格、成交量、成交时间、接口      |\n| 显示操作日志          | 显示当前操作错误信息              | 显示成交单信息        |\n\n\n#### 账户持仓信息\n账户显示账户信息，并具备切换账户功能\n当前选中账户 显示在旁label中。\n\n### 界面切换\n\n\n\n\n\n\n# 记录笔记\n\n照例，先贴网址： <http://www.qaulau.com/books/PyQt4_Tutorial/index.html>\n#### 窗口设置\n    resize(8, 8)\n    setWindowTitle(u'标题')\n#### 获取图标\n    def getIcon(filename):\n    \"\"\" 获取图标 \"\"\"\n        fileInfo = Qt.QFileInfo(filename) \n        fileIcon = Qt.QFileIconProvider() \n        icon = QtGui.QIcon(fileIcon.icon(fileInfo)) \n        return icon  \n    使用时：\n    self.setWindowIcon(getIcon('../hi/app.ico'))\n\n---\n\n##### Dock\n    widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.“dock\n    标题”, QtCore.Qt.RightDockWidgetArea)\n    # 方向有：  \n    RightDockWidgetArea,BottomDockWidgetArea,LeftDockWidgetArea\n    # 创建dock窗口\n    # 可利用\n    self.tabifyDockWidget(dockMarketM, dockAllDataM)\n    来合并同一个方向上的dock\n    \n    # 此下还没看… \n    dockTradeM.raise_()\n    dockPositionM.raise_()\n    \n    # 连接组件之间的信号\n    widgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition)\n        \n    # 保存默认设置\n    self.saveWindowSettings('default')\n\n其实现函数为：\n\"\"\"创建停靠组件\"\"\"\n\n    def createDock(self, widgetClass, widgetName, widgetArea):\n        widget = widgetClass(self.mainEngine, self.eventEngine) \n        dock = QtGui.QDockWidget(widgetName)\n        dock.setWidget(widget)\n        dock.setObjectName(widgetName)\n        dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable)\n        self.addDockWidget(widgetArea, dock)\n        return widget, dock\n> 再本质一点的东西为：\n\n    widget1 = Ha(self)\n    dock = QtGui.QDockWidget('haha')\n    dock.setObjectName('ha1')\n    dock.setWidget(widget1)\n    dock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable)\n    self.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock)\n\n#### 动作\n    exit = QtGui.QAction(QtGui.QIcon('hello.ico'), 'exit', self)\n    exit.setShortcut('Ctrl+Q')\n    exit.setStatusTip('Exit application')\n    # 图标、文字、快捷键、提示信息\n    \n    menubar = self.menuBar()\n    file = menubar.addMenu('&File')\n    file.addAction(exit)\n    # 创建目录和工具栏，将动作添加进去。工具栏同理\n\n### 定位布局\n#### 绝对定位\n    label1 = QtGui.QLabel(u'绝对定位', self)\n    label1.move(15, 60)\n    # 创建、移动到显示位置\n\n#### 框布局 及 布局元素平均分布\n    okButton = QtGui.QPushButton(\"OK\")\n    cancelButton = QtGui.QPushButton(\"Cancel\")\n    # 创建按钮\n\n    hbox = QtGui.QHBoxLayout()\n    hbox.addStretch(1)\n    hbox.addWidget(okButton)        # 增加组件\n    hbox.addWidget(cancelButton)\n    # 创建水平栏\n    hbox.addStretch()   # 平均分布\n    \n    vbox = QtGui.QVBoxLayout()\n    vbox.addStretch(1)\n    # 创建竖列\n\n    vbox.addLayout(hbox)\n    # 将水平栏插入竖列\n    self.setLayout(vbox)     \n    # 显示最终竖列\n注意一下add时选择对类型就好了。\n\n#### 组件之间连接信号\n    # classA(QtGui.QTableWidget):\n    #   pass\n    classA.itemDoubleClicked.connect(classB.actionFunction)\n    # 这样单纯调用还是可以的，但是数据传输… 就得继续研究一下了。\n\n#### 调用Windows程序\n    import win32api\n        path = 'D:/vnpy-    \\\n        master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json'\n        win32api.ShellExecute(0, 'open', 'notepad.exe', path, '', 1)\n    # 使用记事本打开此文件\n\n#### Json\n    with open('D:/vnpy- \\\n        master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json',\n    'r') as f:\n    setting = json.load(f)\n    self.userID = str(setting['userID'])\n    self.password = str(setting['password'])\n\n##### 关闭事件退出提示\n    def closeEvent(self, event):\n        reply = QtGui.QMessageBox.question(self, 'Message',\"Are you \n    sure to quit?\", QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)\n    if reply == QtGui.QMessageBox.Yes:\n        event.accept()\n    else:\n        event.ignore()\n函数放置位置就是主窗口类下就好。\n\n##### VS2015 快捷键\n    Ctrl + k    Ctrl + c        # 多行注释\n    Ctrl + k    Ctrl + u        # 多行取消注释\n##### 鼠标事件\npress\nmove\nrelease\ndoubleClick\nclicked()\nenterEvent 鼠标移入\nleaveEvent 鼠标移出\n回去看看具体函数\n\n## 信号槽（传输额外参数）\n一般来说，比如一个按钮吧。 在链接点击信号与槽时`buttonInit[i].clicked.connect(partial(self.init, i))`就完事了。然而，当循环创建按钮，对应同样的槽函数，只是需要执行的变量有区别时，就需要传输额外的参数。\n这时，方法有二：\n\n环境：\n\npython2.7.8\n\npyqt 4.11.1\n### 一： 使用lambda表达式\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyForm</span><span class=\"hljs-params\">(QMainWindow)</span>:</span>  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(MyForm, self).__init__(parent)  \n        button1 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button2 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button1.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">1</span>))  \n        button2.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">2</span>))  \n\n        layout = QHBoxLayout()  \n        layout.addWidget(button1)  \n        layout.addWidget(button2)  \n\n        main_frame = QWidget()  \n        main_frame.setLayout(layout)  \n\n        self.setCentralWidget(main_frame)  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_button</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        print(<span class=\"hljs-string\">'Button {0} clicked'</span>.format(n))  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:  \n    <span class=\"hljs-keyword\">import</span> sys  \n    app = QApplication(sys.argv)  \n    form = MyForm()  \n    form.show()  \n    app.exec_()  </code></pre>\n\n<p>解释一下，on_button是怎样处理从两个按钮传来的信号。我们使用lambda传递按钮数字给槽，也可以传递任何其他东西—甚至是按钮组件本身（假如，槽打算把传递信号的按钮修改为不可用）</p>\n\n### 二： 使用functools里的partial函数\n<pre class=\"prettyprint\"><code class=\"language-python hljs \">button1.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">1</span>))  \nbutton2.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">2</span>))  </code></pre>\n\n<p>《Rapid GUI Program with Python and QT》 P143例子。</p>\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial  \n<span class=\"hljs-keyword\">import</span> sys  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Bu1</span><span class=\"hljs-params\">(QWidget)</span>:</span>  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(Bu1, self).__init__(parent)  \n        <span class=\"hljs-comment\">#水平盒式布局  </span>\n        layout = QHBoxLayout()  \n        <span class=\"hljs-comment\">#显示  </span>\n        self.lbl = QLabel(<span class=\"hljs-string\">'no button is pressed'</span>)  \n        <span class=\"hljs-comment\">#循环5个按钮  </span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">5</span>):  \n            but = QPushButton(str(i))  \n            layout.addWidget(but)  \n            <span class=\"hljs-comment\">#信号和槽连接  </span>\n            but.clicked.connect(self.cliked)  \n\n        <span class=\"hljs-comment\">#使用封装，lambda  </span>\n        but = QPushButton(<span class=\"hljs-string\">'5'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_click(<span class=\"hljs-string\">'5'</span>))  \n        <span class=\"hljs-comment\">#使用个who变量，结果不正常，显示 False is pressed  </span>\n        <span class=\"hljs-comment\">#but.clicked.connect(lambda who=\"5\": self.on_click(who))  </span>\n\n        <span class=\"hljs-comment\">#使用封装，partial函数  </span>\n        but = QPushButton(<span class=\"hljs-string\">'6'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(partial(self.on_click, <span class=\"hljs-string\">'6'</span>))  \n\n        layout.addWidget(self.lbl)  \n        <span class=\"hljs-comment\">#设置布局  </span>\n        self.setLayout(layout)  \n\n    <span class=\"hljs-comment\">#传递额外参数     </span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">cliked</span><span class=\"hljs-params\">(self)</span>:</span>  \n        bu = self.sender()  \n        <span class=\"hljs-keyword\">if</span> isinstance(bu, QPushButton):  \n            self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % bu.text())  \n        <span class=\"hljs-keyword\">else</span>:  \n            self.lbl.setText(<span class=\"hljs-string\">'no effect'</span>)  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_click</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % n)  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:          \n    app = QApplication(sys.argv)  \n    bu =Bu1()  \n    bu.show()  \n    app.exec_()   </code></pre>\n\n三：感谢[来源](http://blog.csdn.net/fengyu09/article/details/39498777) \n\n---\n\n---\n\n---\n\n\n# 策略管理\n策略类，引擎，报单管理&&仓位管理\n## 引擎\n引擎中将策略事件有序添加到事件引擎和主引擎中。 读取setting.json 文件对策略参数以及是否启用进行配置。设定日期。\n使用策略实例字典保存策略名与实例关系——\n并将此字典在推送字典中与tick数据ID对应（ID对多实例。）\n再有orderID与策略对应字典，用以推送order和trade数据\n计数本地停止单 、 持仓缓存字典\n\n\n## 报单管理\n### 成交推送处理\n成交回调 - > 订单ID和策略对应字典 -> 计算策略持仓（根据策略方向，持仓增加交易笔数）-> 更新持仓缓存数据 \n\n### 报单者类\n单一合约订单缓存类——初始化buffer 存储字典_log策略日志存储\n\n\n","slug":"notes/noteOfvn_py","published":1,"updated":"2021-05-08T02:56:02.688Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9ky0060u3yqcym51g86","content":"<p>author: Ian</p>\n<h1 id=\"Vn-Py笔记-✏📔\"><a href=\"#Vn-Py笔记-✏📔\" class=\"headerlink\" title=\"Vn.Py笔记 ✏📔\"></a>Vn.Py笔记 ✏📔</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><img src=\"https://static.vnpy.com/static/img/index/2019-5-27/mainwindow.PNG\" alt=\"vn.py\"></h2><p><font color=green>一个开源Python交易软件，主使用CTP协议。当然，还有其他协议了其源项目在<a href=\"http://www.vnpy.org/\">http://www.vnpy.org/</a> </font></p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"初期笔记\"><a href=\"#初期笔记\" class=\"headerlink\" title=\"初期笔记\"></a>初期笔记</h2><pre><code>报单交易过程中，\n\nCTP使用BrokerID 从业务层面完全隔离不同经纪公司的交易、风控及结算用户的接入。\nBrokerID具体取值咨询开户的经纪公司。\n</code></pre>\n<p>CTP中 UserID为操作员代码，InversterID为投资者代码； 投资者自己下单两者同为投资者代码</p>\n<pre><code>CTP-API中，OrderRef和OrderAction    前者为CTP后台提供给客户端标识一笔报\n单的字段，从客户端可通过（FrontID、SessionID、OrderRef）唯一确定一笔报\n单；；；后者与OrderRef功能相似，提供给客户端来标识一笔撤单。\n前者的数据类型为字符数组，必须为阿拉伯数字字符。\nOrderRef（OrderActionRef）取值必须保证在同一会话内发送的报单\nOrderRef（OrderActionRef）值大于之前的最大值，开发多线程客户端尤为需要  \n注意。\n</code></pre>\n<p>CTP-API库：</p>\n<pre><code>error.dtd\\error.xml 错误定义文件    ----   ThostFrfcMdApi.h \n交易接口类定义文件  \n———   ThostFtfcUserApiDataType.h 类型定义文件  ------    \nthostmduserapi.lib,thostmduserpi.dll 行情接口库文件     -----   \nthosttraderapi.lib,thosttraderapi.dll交易接口库文件   ----- \n\n交易和行情接口类定义文件都包含API 和 SPI类定义，客户端使用API向CTP后台\n发送请求，CTP后台则使用SPI向客户端回传响应及回报\n\n行情Demo开发：\n    1.将API文件复制到工程目录；并将所有的头文件和静态、动态库连链接库\n并将文件导入到项目工程中。\n    先继承行情接口类CThostFtdcMdspi，并实现需要实现的虚函数。  \nOnFrontConnectde、OnFrontDisconnected、OnPspUserLogin、\nOnRspSubMarketDAta\n</code></pre>\n<p>/<strong><strong><strong><strong><strong>API工作流程</strong></strong></strong></strong></strong>***/</p>\n<p>API压缩包——API含常量对应字符、类型定义、操作系统编译定义、回调函数（MdSpi）（柜台向用户端发送信息后被系统自动调用的函数）、主动函数（MdApi）（向柜台发送各种请求和指令）</p>\n<p>API工作流程：<br>    创建MdSpi对象（回掉函数），调用MdApi类，以Create开头的静态方法，创建MdApi对象（主动函数），注册MdSpi对象指针，行情柜台前置机地址，调用MdApi对象Init方法初始化连接前置机，连接成功会通过OnFrontConnected回调通知用户，用户获得连接成功通知后，调MdApi的ReqUserLogin登陆，登陆后MdSpi的OnRsqUserLogin通知用户<br>———————-到此登陆完成———————</p>\n<pre><code>MdApi：（行情相关）\n    使用MdApi对象的SubscribeMarketData方法，传入参数为想要订阅的“合约\n代码”，订阅成功当合约有新行情通过MdApi的OnRtnDepthMarketData回调通知   \n用户\n</code></pre>\n<p>———————-至此订阅完成———————<br>        当用户的某次请求发生错误时，会通过OnRspError通知用户        MdApi也含有退订合约、登出功能。      而一般退出程序则直接杀进程（不太安全便是）</p>\n<pre><code>TraderApi：（交易相关）\n    不同于以上的有 注册TraderSpi对象的指针后需要调用TraderApi对象的\nSubscribePrivateTopic和SubscribePublicTopic方法去选择公开和私有数据流的重\n传方法\n    对于期货柜台，每一日第一次登陆需要先查询前一日的结算单，等待查询\n结果返回，确认，才可进行后续操作（CTP、恒生UFT），证券（LTS）无此要求\n    上一步完成后，用户可以调用ReqQryInstrument的方法查询柜台上所有可\n以交易的合约信息（包括代码、中文名、涨跌停、最小价位变动、合约乘数等大\n量细节），一般是在这里获得合约信息列表后，再去MdApi中订阅合约；经常有\n人问为什么在MdApi中找不到查询可供订阅的合约代码的函数，这里尤其要注\n意，必须通过TraderApi来获取\n    当用户报单、成交状态发生变化时，TraderApi会自动通过OnRtnOrder、\nOnRtnTrade通知，无需额外订阅\n</code></pre>\n<p>/<strong><strong><strong><strong><strong><strong>封装API</strong></strong></strong></strong></strong></strong>****/<br>    封装后API的动作：<br>        主动函数：  调用封装API主动函数，传入Python变量作为参数—&gt;封装API将Python变量转换成C++变量—&gt;API调用原生API主动函数传入C++变量作为参数<br>        回掉函数：  交易柜台通过原生API传入参数为C++变量-&gt;封装API将C++变量转换为Python变量-&gt;封装API调用封装后的回调函数想Python程序中推送数</p>\n<pre><code>封装处理：\n    将回调函数Spi类和主动函数Api类封装为一个类，使用中更加方便\n    在API中包含一个缓冲队列，当回调函数收到新的数据信息时只是简单存入\n并立即返回，而数据信息的处理和向Python中的推送则由另一个工作线程执行\n    鉴于Python中dict字典内的键和值的类型可以不同，所以利用此来代替\nC++的结构体\n\n\n处理示例：\n    getChar()： d(Python字典对象) key(d中想要提取的数据键名) \nif(d.has_key(key)) 判断是否存在这个键；\n    object o = d[key]; 提取对应值   \n    extract&lt;string&gt; x(o); 生成提取\nstd::string类的提取器\n    if (x.check())  检测能否提取出数据  string s = x();  执行解包器，提取\nstring对象\n    const char *buffer = s.c_str();  从s中获取字符串指针bufffer     \nstrcpy_s(value, strlen(buffer) + 1, buffer);  \n将字符串指针指向的字符串数组复制到结构体成员的指针上    对字符串指针赋值\n必须使用strcpy_s, vs2013使用strcpy\n编译通不过+1应该是因为C++字符串的结尾符号？不是特别确定，不加这个\n1会出错\n        \n</code></pre>\n<p>/<strong><strong><strong><strong><strong><strong><strong>事件驱动</strong></strong></strong></strong></strong></strong></strong>***/</p>\n<p>时间驱动： 定时调用<br>事件驱动： 新事件被推送时（如新行情、成交）则调用<br>    初始化：    事件队列、引擎开关（标志）、事件线程、定时器、一个事件和处理函数对应字典（__handlers）<br>    引擎运行：  循环检查引擎开关 若开则一直尝试获取事件（阻塞开，时间1s），处理事件； 若出错则pass<br>    处理事件：  检测是否有对当前事件监听的处理函数，若有则循环调用相应处理函数对事件进行处理<br>    计时器事件：    创建计时器事件，推入计时器事件<br>    引擎启动：  打开引擎开关、启动事件处理线程、启动定时器（事件默认间隔1s）<br>    停止引擎：  关闭。。。。、停止计时器、等待事件处理线程退出<br>    注册事件处理：  尝试获取对应处理此类型函数列表（对应字典），若无则创建。<br>    注销函数监听：  。。。。。。。。。。。。。。。。。。。。。，若无则pass，若函数存在于列表则将之移除，若函数列表为空，则引擎中移除该事件类型<br>    put：       向事件队列中存入事件</p>\n<p>底层接口对接：<br>    交易程序架构分：底层接口、中层引擎、顶层GUI，<br>    为将某API对接到程序中需：1.将API的回调函数收到的数据—&gt;中层引擎 等待处理 2.将API的主动函数进行一定的简化封装，便于中层引擎调用</p>\n<p>中层引擎设计：<br>    进一步封装底层接口所暴露出的API函数，使得其更容易被上层的GUI和策略组件调用。<br>    构造函数：<br>        以主引擎成员变量形式创建事件驱动引擎ee，行情接口md和交易接口td的对象。<br>        随后立即启动，当用户调用接口连接、登陆等功能、收到事件推送，ee可以立即推送到监听这些事件的组件进行处理。<br>        LTS和CTP接口的持仓情况和账户情况不通过推送，需手动查询。Demo选择循环查询模式，不断更新。可选择不进行查询，降低占用网络带宽。<br>        登陆成功后，查询柜台所有可交易信息，保存到dictInstrument字典中，方便后续查询<br>    优化了一些函数方法的调用方式，将经纪商一起提供的接口登陆封装在一个函数中，减少了重复书写的次数。</p>\n<hr>\n<hr>\n<hr>\n<hr>\n<h2 id=\"引擎之间执行过程\"><a href=\"#引擎之间执行过程\" class=\"headerlink\" title=\"引擎之间执行过程\"></a>引擎之间执行过程</h2><h3 id=\"发单为例：\"><a href=\"#发单为例：\" class=\"headerlink\" title=\"发单为例：\"></a>发单为例：</h3><p>设置发单按钮 -&gt; 将点按动作关联sendOrder发单实现函数（从输入框获取合约代码-&gt;获取合约信息对象（见下） -&gt; <em>如果成功获取</em> -&gt; 再获取方向价格等信息 -&gt; 调用主引擎下发单实现 -&gt; 主引擎转到TdApi下发单函数执行（请求编号（API管理） -&gt; 将传入信息数据存入字典（合约代码、方向价格等） -&gt; 报单编号（API管理） -&gt; 用户id、单子属性（投机、立即发单、今日有效）等信息存入字典） -&gt; self.reqOrderInsert(req（信息字典）, self.__reqid（请求编号）) -&gt; 返回订单号（报单编号））</p>\n<hr>\n<h4 id=\"主引擎：（负责对API的调度）\"><a href=\"#主引擎：（负责对API的调度）\" class=\"headerlink\" title=\"主引擎：（负责对API的调度）\"></a>主引擎：（负责对API的调度）</h4><p><strong>init</strong>()初始化中的动作：<br>    创建事件驱动引擎、创建API接口、启动事件驱动引擎、循环查询持仓和账户相关（之后学习）、创建合约存储空字典，注册插入合约对象执行函数事件类型和其处理函数。<br>其中包含几乎所有的功能函数，包含了每个功能函数的实现方法</p>\n<h4 id=\"事件驱动引擎：\"><a href=\"#事件驱动引擎：\" class=\"headerlink\" title=\"事件驱动引擎：\"></a>事件驱动引擎：</h4><p><strong>init</strong>()初始化中的动作：<br>    创建事件队列、创建设置事件引擎开关（关）、创建事件处理线程(目标为引擎运行)、创建计时器（将超时动作连接到__onTimer函数）、创建__handlers空字典（存储对应事件调用关系）<br>统筹管理事件的执行，在其中建立起事件执行队列管理向队列中插入事件，分配事件对象类型（据此注册其执行函数）和具体事件数据（时间及日志），拥有注册事件处理监听及注销监听。最终使得整个程序有序的进行。</p>\n<hr>\n<h3 id=\"调用关系\"><a href=\"#调用关系\" class=\"headerlink\" title=\"调用关系\"></a>调用关系</h3><p>主引擎在初始化时即启动事件驱动引擎（调用启动函数start()（将引擎开关设为启动、启动事件处理线程、启动计时器）） -&gt; 事件处理线程运行目标__run()（若开关开则将从<strong>事件队列</strong>中get()到事件，放到处理函数__process()中执行） -&gt; __process()处理事件函数（检查事件类型，在__handlers字典中是否有对此监听处理函数，若存在则调用字典中处理函数）</p>\n<pre><code>事件启动引擎start()中启动定时器 -&gt; 创建计时器事件 -&gt; 向队列存入计时器事件\n</code></pre>\n<hr>\n<h4 id=\"获取合约信息对象：\"><a href=\"#获取合约信息对象：\" class=\"headerlink\" title=\"获取合约信息对象：\"></a>获取合约信息对象：</h4><p>从合约字典中读取合约信息对象有则继续执行原本程序操作（获取名称、发单撤单），无则None</p>\n<h5 id=\"以初始化查询为例：\"><a href=\"#以初始化查询为例：\" class=\"headerlink\" title=\"以初始化查询为例：\"></a>以初始化查询为例：</h5><p>主引擎初始化中注册<code>self.ee.register(EVENT_TDLOGIN, self.initGet)</code>,<code>EVENT_TDLOGIN</code>为交易服务器登陆成功事件。即此事件为登录成功后开始初始化查询。<br>步骤：打开设定文件<code>setting.vn</code>，尝试读取设定字典。载入后，设定事件类型、将事件推入事件队列、查询投资者、循环查询账户和持仓。（若不存在or合约数据非今天，则发出获取合约请求。）-&gt; 获取合约 -&gt; 定义事件类型 -&gt; 推入事件队列 -&gt; API查询合约</p>\n<hr>\n<hr>\n<h2 id=\"ctpGateway-接入方法\"><a href=\"#ctpGateway-接入方法\" class=\"headerlink\" title=\"ctpGateway 接入方法\"></a>ctpGateway 接入方法</h2><p><font color=orange>考虑到现阶段大部分CTP中的ExchangeID字段返回的都是空值<br>vtSymbol直接使用symbol</font></p>\n<hr>\n<p>创建CTP价格方向交易所持仓产品等类型映射，方便调用  <strong>然后</strong>  <code>class CtpGateway(VtGateway):</code>CTP接口中初始化动作（继承VtGateway实例化事件引擎、设定网关名称为’CTP‘、实例化ctpMdApi，ctpTdApi、初始化行情交易连接状态，循环查询允许）</p>\n<p><strong>连接过程</strong><br>初始化账号密码等、连接服务器、注册服务器地址、登陆<br>订阅合约里有个设计为：尚未登陆就调用了订阅则保存订阅信号，则在成功登陆之后的登陆回报函数中重新订阅</p>\n<hr>\n<h2 id=\"数据记录器\"><a href=\"#数据记录器\" class=\"headerlink\" title=\"数据记录器\"></a>数据记录器</h2><h4 id=\"drBase-py中（定义数据类型）：（数据记录器和CTA两模块共同使用）\"><a href=\"#drBase-py中（定义数据类型）：（数据记录器和CTA两模块共同使用）\" class=\"headerlink\" title=\"drBase.py中（定义数据类型）：（数据记录器和CTA两模块共同使用）\"></a>drBase.py中（定义数据类型）：（<font color=orange>数据记录器和CTA两模块共同使用</font>）</h4><pre><code>K线数据\n    构造函数（定义数据类型）：vt系统代码、合约代码、交易所代码、开高低\n关、bar开始时间、时间、成交量持仓量\nTick数据\n    构造函数（定义数据类型）：vt系统代码、合约代码、交易所代码、成交数\n据、tick时间、五档行情\n</code></pre>\n<hr>\n<h4 id=\"DrEngine数据记录引擎\"><a href=\"#DrEngine数据记录引擎\" class=\"headerlink\" title=\"DrEngine数据记录引擎\"></a><font color=red>DrEngine数据记录引擎</font></h4><p>获取当前文件绝对路径</p>\n<pre><code>settingFileName = &#39;DR_setting.json&#39;\npath = os.path.abspath(os.path.dirname(__file__))       \nsettingFileName = os.path.join(path, settingFileName)\n</code></pre>\n<p>初始化中动作：实例化设置主引擎、事件引擎、获取当前日期、创建主力合约代码映射字典、Tick对象字典、K线对象字典、初始化数据库插入单独线程、载入设置，订阅行情 </p>\n<h5 id=\"载入设置、订阅行情\"><a href=\"#载入设置、订阅行情\" class=\"headerlink\" title=\"载入设置、订阅行情\"></a>载入设置、订阅行情</h5><p>打开<code>DR_setting.json</code>文件，以json载入，其中<code>’working‘</code>决定是否启动行情记录功能。随后从json文件中循环获取合约代码订阅tick和bar</p>\n<p>启动数据插入线程（<code>run</code>函数（向MongoDB中插入数据））、注册事件监听（<code>procecssTickEvent</code>处理行情推送（<font color=green>下详</font>））</p>\n<h5 id=\"处理行情推送\"><a href=\"#处理行情推送\" class=\"headerlink\" title=\"处理行情推送\"></a>处理行情推送</h5><p>从事件字典中取出保存的具体事件数据、<code>vtSymbol</code>为tick识别信号（合约代码）、转化Tick格式、更新TIck数据（并发出日志）、更新分钟线数据</p>\n<hr>\n<h2 id=\"风控模块\"><a href=\"#风控模块\" class=\"headerlink\" title=\"风控模块\"></a>风控模块</h2><p>从配置json文件中读取设定信息  操作运作：1.检测风控设定值变化 2.每笔交易发单时使用风控模块决定该次发单是否允许   （其中流控计数在每次调用风控检测时计数、成交合约量在更新成交数据中加交易数值）</p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"CTA策略\"><a href=\"#CTA策略\" class=\"headerlink\" title=\"CTA策略\"></a>CTA策略</h2><p>直接来到改版之后：</p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"CTP交易托管API\"><a href=\"#CTP交易托管API\" class=\"headerlink\" title=\"CTP交易托管API\"></a>CTP交易托管API</h2><h3 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h3><p>基于C++的类库，通过使用提供接口实现相关交易功能，含：报单与报价录入、的撤销、的挂起、的激活、的修改、的查询、成交单查询、投资者查询、 投资者持仓查询、合约查询、交易日获取等</p>\n<p>含文件：交易接口、API所需数据类型、业务相关数据结构i、的头文件、动态链接库、导入库</p>\n<h3 id=\"体系结构\"><a href=\"#体系结构\" class=\"headerlink\" title=\"体系结构\"></a>体系结构</h3><p>建立在TCP协议之上FTD协议与交易托管系统进行通讯<br><strong>FTD通讯模式：</strong> </p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">对话通讯模式</td>\n<td align=\"right\">- 会员端请求、接收处理、响应</td>\n</tr>\n<tr>\n<td align=\"left\">私有通讯模式</td>\n<td align=\"right\">- 交易所主动向特定会员发出</td>\n</tr>\n<tr>\n<td align=\"left\">广播通讯模式</td>\n<td align=\"right\">- 交易所主动、全员发送</td>\n</tr>\n</tbody></table>\n<h3 id=\"接口模式\"><a href=\"#接口模式\" class=\"headerlink\" title=\"接口模式\"></a>接口模式</h3><p><code>CThostFtdeTraderApi</code>和<code>CThostFtdeTraderSpi</code>，前者发送请求，后者回调响应。旗下函数方法前者以Req开头后者以OnRsp开头。请求接口第一个参数为请求的内容，不能为空。第二个参数为请求号。</p>\n<p>如果接收到的响应数据不止一个，则回调函数会被多次调用。第一个参数为响应的具体数据，第二个参数为处理结果，第三个参数为请求号，第四个参数为响应结束标志，表明是否是本次响应的最后一次回调。</p>\n<h3 id=\"运行模式\"><a href=\"#运行模式\" class=\"headerlink\" title=\"运行模式\"></a>运行模式</h3><p>至少两个线程，一个为应用程序主线程，一个为交易员API工作线程，其间通讯由API工作线程驱动。</p>\n<h3 id=\"撤单-发单\"><a href=\"#撤单-发单\" class=\"headerlink\" title=\"撤单 发单\"></a>撤单 发单</h3><h4 id=\"发单为例：-1\"><a href=\"#发单为例：-1\" class=\"headerlink\" title=\"发单为例：\"></a>发单为例：</h4><p>在用户点击发单之后，程序从“交易”栏的<code>text()</code>获取合约代码，随后从详细合约保存字典中读取其他信息，将之保存到一个字典中之后，调用主引擎对特定接口发单。</p>\n<p>发单完成之后，马上会收到报单响应 OnRspOrderInsert，说明交易系统已经收到报单。报单进入交易系统后，如果报单的交易状态发生变化，就会收到报单回报 OnRtnOrder。如果报单被撮(部分)成交，就会收到成交回报 OnRtnTrade。通过更新</p>\n<h4 id=\"撤单时：\"><a href=\"#撤单时：\" class=\"headerlink\" title=\"撤单时：\"></a>撤单时：</h4><p>程序从单元格中获取exchange、frontID、orderID、sessionID、symbol、gatewayName等信息，调用主引擎对特定接口撤单。撤单时调用Api函数为reqOrderAction其内容包括撤销、挂起、激活、修改，故还需一个Flag参数</p>\n<p>ps：如果报单还停留在 Thost，Thost 可以用 Front 、SessionID、OrderRef 来定位<br>如果报单停留在交易所，Thost 可以用 ExchangID、OrderSysID 来定位，然后向交易<br>所转发撤单指令。</p>\n<h3 id=\"TraderApi所有方法功能\"><a href=\"#TraderApi所有方法功能\" class=\"headerlink\" title=\"TraderApi所有方法功能\"></a>TraderApi所有方法功能</h3><pre><code>OnFrontConnected/Disconnected       \n# 客户端与交易托管系统建立起通信连接时\nOnHeartBeatWarning      \n# 当长时间未收到报文时\nOnRspUserLogin/Logout       \n# 登陆注销响应\nOnRspUserPasswordUpdate     \n# 改密响应\nOnRspTradingAccountPasswordUpdate       \n# 当客户端发出资金账户口令更新指令后，交易托管系统返回响应时\nOnRspError      \n# 请求出错时\nOnRspOrderInsert        \n# 报单录入\nOnRspOrderAction        \n# 报单操作包括报单的撤销、报单的挂起、报单的激活、报单的修改。当客户端\n    发出过报单操作指令后，交易托管系统返回响应时\nOnRspQueryMaxOrderVolume        \n# 查询最大报单\nOnRspSettlementInfoConfirm      \n# 当客户端发出投资者结算结果确认指令后，交易托管系统返回响应时\n\n等……  lol 统计无力\n</code></pre>\n<p>？</p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"CTA-策略引擎\"><a href=\"#CTA-策略引擎\" class=\"headerlink\" title=\"CTA 策略引擎\"></a>CTA 策略引擎</h2><h5 id=\"init-的工作：\"><a href=\"#init-的工作：\" class=\"headerlink\" title=\"_init_()的工作：\"></a>_<em>init</em>_()的工作：</h5><ul>\n<li>加载主引擎、事件引擎；获取当前日期</li>\n<li>设定是否在回测</li>\n<li>保存策略实例的字典strategyDict(key为策略名称，value为策略实例)、</li>\n<li>保存vtSymbol和策略实例映射的字典(用于推送tick数据，可能多个策略交易同一个vtSymbol因此key为vtSymbol.value为包含所有相关策略对象的list)、</li>\n<li>保存vtOrderID和strategy对象映射的字典(用于推送order和trade数据key为vtOrderID，value为strategy对象）、</li>\n<li>本地停止单编号计数、本地停止单字典(key为stopOrderID，value为stopOrder对象)、</li>\n<li>持仓缓存字典(key为vtSymbol，value为PositionBuffer对象)、</li>\n<li>成交号集合、</li>\n<li>设置引擎类型为实盘、</li>\n<li>注册事件监听</li>\n</ul>\n<h4 id=\"初始化策略\"><a href=\"#初始化策略\" class=\"headerlink\" title=\"初始化策略\"></a>初始化策略</h4><p>从数据库中读取3天的历史TICK数据、行情更新。。。。。有的话待续</p>\n<h4 id=\"启动策略\"><a href=\"#启动策略\" class=\"headerlink\" title=\"启动策略\"></a>启动策略</h4><p>从策略实例字典中取出策略实例，调用策略函数（已经初始化，没有在进行策略交易），开启进行交易标志位。</p>\n<h4 id=\"停止策略\"><a href=\"#停止策略\" class=\"headerlink\" title=\"停止策略\"></a>停止策略</h4><p>从策略实例字典中取出策略实例，调用策略函数（            在进行策略交易），关闭策略交易标志位 -&gt; 对该策略发出的所有限价单进行撤单 -&gt; 发出的所有本地停止单撤单 -&gt; </p>\n<h4 id=\"保存、读取策略配置\"><a href=\"#保存、读取策略配置\" class=\"headerlink\" title=\"保存、读取策略配置\"></a>保存、读取策略配置</h4><p>触发策略状态变化事件（通常用于通知GUI更新）<br>获取策略的参数字典<br>获取策略当前的变量字典</p>\n<h3 id=\"记录\"><a href=\"#记录\" class=\"headerlink\" title=\"记录\"></a>记录</h3><p>报单更新、成交更新都是先检测是否有对此监听的策略<br>限价单成交处理：成交回报、报单回报、记录成交到列表、删除该限价单</p>\n<h4 id=\"基础功能的策略调用\"><a href=\"#基础功能的策略调用\" class=\"headerlink\" title=\"基础功能的策略调用\"></a>基础功能的策略调用</h4><p>策略中发单时，需要在设置参数时考虑设置。    另获取持仓缓存数据，做平昨平今的选择。<br>策略中发单时，检查报单是否有效，赋参，撤单。<br>发停止单，编号，赋参，保存至字典<br>撤停止单，从工作停止单字典中移除</p>\n<hr>\n<h4 id=\"Ta-Lib\"><a href=\"#Ta-Lib\" class=\"headerlink\" title=\"Ta-Lib\"></a>Ta-Lib</h4><p>趋势策略分为以下部分：</p>\n<ul>\n<li>趋势信号（通常是基于某几个参数计算出来的指标值超过某个阈值）、</li>\n<li>信号过滤（和趋势信号类似）、</li>\n<li>出场方案（固定点数/百分比的止盈和止损，移动止损）。<br>所以，Ta-lib是策略实现工具罢了。</li>\n</ul>\n<p>此库中提供了多种技术分析的函数，有多种指标：ADX、MACD、RSI、布林轨道等<br>；K线形态识别，如“黄昏之星”、“锤形线”等。</p>\n<p>依靠此库对数据的分析，来下达发单撤单的动作即为策略。</p>\n<h6 id=\"策略示例：\"><a href=\"#策略示例：\" class=\"headerlink\" title=\"策略示例：\"></a>策略示例：</h6><pre><code>基于Talib模块的双指数均线策略`class TalibDoubleSmaDemo(CtaTemplate):`\n</code></pre>\n<p><font color=green>就是两个指标的数据来判断当前局势罢了</font></p>\n<ol>\n<li>设定策略参数</li>\n<li>策略变量</li>\n<li>参数列表（保存参数名称）</li>\n<li>变量列表（保存变量名称）</li>\n</ol>\n<h6 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h6><p>初始化策略（加载Bar数据）、启动策略、停止策略、收到行情Tick推送（计算K线）、收到Bar推送（缓存最新收盘价到列表 -&gt; 数量足够后转化为Numpy数组后传入talib函数SMA中计算 -&gt; 读取当前K线和上一根K线数值，用于判断均线交叉 -&gt; 检测持仓状态，做出相应交易动作）</p>\n<hr>\n<h3 id=\"CTA回测\"><a href=\"#CTA回测\" class=\"headerlink\" title=\"CTA回测\"></a>CTA回测</h3><h5 id=\"init-的工作\"><a href=\"#init-的工作\" class=\"headerlink\" title=\"_init_()的工作\"></a>_<em>init</em>_()的工作</h5><ul>\n<li>本地停止单编号计数    <code>self.stopOrderCount</code></li>\n<li>本地停止单字典    <code>self.stopOrderDict</code> And <code>self.workingStopOrderDict</code></li>\n<li>设引擎类型为回测</li>\n<li>回测相关变量定义</li>\n<li>当前最新数据，用于模拟成交使用</li>\n</ul>\n<h4 id=\"运行回测\"><a href=\"#运行回测\" class=\"headerlink\" title=\"运行回测\"></a>运行回测</h4><ol>\n<li><p>载入历史数据</p>\n</li>\n<li><p>根据回测模式确定要使用数据类</p>\n</li>\n<li><p>初始化策略</p>\n</li>\n<li><p>启动策略</p>\n</li>\n<li><p>回放数据（从数据库中取得推到newBar或者newTick）</p>\n</li>\n<li><p>策略获得新数据，执行相应操作</p>\n</li>\n</ol>\n<h5 id=\"基于最新数据撮合限价单\"><a href=\"#基于最新数据撮合限价单\" class=\"headerlink\" title=\"基于最新数据撮合限价单\"></a>基于最新数据撮合限价单</h5><p>先确定会撮合成交的价格 -&gt; 遍历限价单字典中所有限价单 -&gt; 判断是否会成交 -&gt; 发生成交推送成交数据（买入 -&gt; 增加持仓 推送委托数据、从字典中删除该限价单）</p>\n<h4 id=\"计算原理\"><a href=\"#计算原理\" class=\"headerlink\" title=\"计算原理\"></a>计算原理</h4><hr>\n<hr>\n<hr>\n<h1 id=\"改版之后程序架构\"><a href=\"#改版之后程序架构\" class=\"headerlink\" title=\"改版之后程序架构\"></a>改版之后程序架构</h1><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"></td>\n<td>APIs</td>\n<td></td>\n<td>***</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td>Trader</td>\n<td></td>\n<td></td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>CTP</code></td>\n<td></td>\n<td><code>KSGold</code></td>\n<td>***</td>\n<td><code>Common</code></td>\n<td><code>Condig</code></td>\n<td><code>Core</code></td>\n<td><code>Gateway</code></td>\n<td><code>Setting</code></td>\n<td><code>Strategy</code></td>\n<td><code>UI</code></td>\n<td align=\"right\"><code>main</code></td>\n</tr>\n<tr>\n<td align=\"left\">CtpMdApi、CtpTdApi</td>\n<td>…………</td>\n<td>…………</td>\n<td>Md、Td</td>\n<td>………………</td>\n<td>………………</td>\n<td>CTA、HTA、引擎、事件管理</td>\n<td>………………</td>\n<td>配置文件</td>\n<td>………………</td>\n<td>………………</td>\n<td align=\"right\">………………</td>\n</tr>\n</tbody></table>\n<h2 id=\"事件引擎\"><a href=\"#事件引擎\" class=\"headerlink\" title=\"事件引擎\"></a>事件引擎</h2><p>两版都一样，作为一个程序运行最外层的生成的实例，来进行各个实例之间的数据传输。因为每个实例都将数据在事件引擎中保存，调用事件引擎中的事件队列来对进行事件运行安排。</p>\n<p>Like This：</p>\n<pre><code>class A(object):\n&quot;&quot;&quot;docstring for A&quot;&quot;&quot;\n    def __init__(self, name):\n        super(A, self).__init__()\n        self.name = name\n        self.a = 0\n    def da(self):\n        print self.name\n        print self.a    \na = A(&#39;I am A&#39;)\na.da()\n\n\n\n\nclass B(object):\n&quot;&quot;&quot;docstring for B&quot;&quot;&quot;\n    def __init__(self, aclass):\n        super(B, self).__init__()\n        self.aclass = aclass\n        self.aclass.a += 1\n    def dada(self):\n        self.aclass.da()\nb = B(a)\nb.dada()\n\nclass C(object):\n&quot;&quot;&quot;docstring for B&quot;&quot;&quot;\n    def __init__(self, aclass):\n        super(C, self).__init__()\n        self.aclass = aclass\n        self.aclass.a += 1\n    def dada(self):\n        self.aclass.da()\nc = C(a)\nc.dada()\n</code></pre>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>0</p>\n</blockquote>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>1</p>\n</blockquote>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>2</p>\n</blockquote>\n<p>B与C分别在去改变读取在A中定义的数值。  嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(<em>￣▽￣</em>)o就是这么写意和惬意。<font color=indigo>Indigo</font>色在纯黑背景下不好辨识哈哈，还是换少女粉吧</p>\n<hr>\n<hr>\n<hr>\n<h1 id=\"Vn-Py-界面\"><a href=\"#Vn-Py-界面\" class=\"headerlink\" title=\"Vn.Py 界面\"></a>Vn.Py 界面</h1><p>Icon 图标下载网:    <a href=\"http://www.easyicon.net/\">http://www.easyicon.net/</a></p>\n<h2 id=\"界面设计文档\"><a href=\"#界面设计文档\" class=\"headerlink\" title=\"界面设计文档\"></a>界面设计文档</h2><h3 id=\"功能要求\"><a href=\"#功能要求\" class=\"headerlink\" title=\"功能要求\"></a>功能要求</h3><p>连接、登陆，订阅，发撤单，持仓、账户信息、成交（下单时间、成交时间、备注（下单动作者））、保留交易模块、跟随鼠标点击更新交易模块中单子内容</p>\n<h3 id=\"文档编写步骤\"><a href=\"#文档编写步骤\" class=\"headerlink\" title=\"文档编写步骤\"></a>文档编写步骤</h3><p>由需求确定功能，划分模块，模块关系，下分框架，框架实现</p>\n<hr>\n<hr>\n<h3 id=\"模块\"><a href=\"#模块\" class=\"headerlink\" title=\"模块\"></a>模块</h3><p>工具栏、行情显示、策略池、账户持仓、消息栏</p>\n<h4 id=\"工具栏\"><a href=\"#工具栏\" class=\"headerlink\" title=\"工具栏\"></a>工具栏</h4><p>连接（含各个端口） 风控、帮助、登陆状态显示</p>\n<h5 id=\"工具功能\"><a href=\"#工具功能\" class=\"headerlink\" title=\"工具功能\"></a>工具功能</h5><table>\n<thead>\n<tr>\n<th align=\"left\">工具名称</th>\n<th align=\"center\">说明</th>\n<th align=\"right\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">连接</td>\n<td align=\"center\">弹出端口列表</td>\n<td align=\"right\">通过复选框选中对应端口</td>\n</tr>\n<tr>\n<td align=\"left\">风控</td>\n<td align=\"center\">弹出设定列表</td>\n<td align=\"right\">通过文本框输入设定数值</td>\n</tr>\n<tr>\n<td align=\"left\">帮助</td>\n<td align=\"center\">弹出帮助窗口</td>\n<td align=\"right\"></td>\n</tr>\n</tbody></table>\n<h4 id=\"策略池\"><a href=\"#策略池\" class=\"headerlink\" title=\"策略池\"></a>策略池</h4><table>\n<thead>\n<tr>\n<th align=\"left\">操作位置</th>\n<th align=\"center\">热点操作</th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">策略名称单元格</td>\n<td align=\"center\">鼠标指针悬停</td>\n<td align=\"right\">展开操作界面</td>\n</tr>\n<tr>\n<td align=\"left\">动作按钮</td>\n<td align=\"center\">鼠标单击</td>\n<td align=\"right\">执行选中</td>\n</tr>\n<tr>\n<td align=\"left\">动作按钮</td>\n<td align=\"center\">鼠标右击</td>\n<td align=\"right\">展开操作界面</td>\n</tr>\n</tbody></table>\n<h4 id=\"消息栏\"><a href=\"#消息栏\" class=\"headerlink\" title=\"消息栏\"></a>消息栏</h4><p>分“成交”、“错误”、“日志”三个模块，选择相应模块显示对应内容</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">日志</th>\n<th align=\"center\">错误</th>\n<th align=\"center\">成交</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">时间、内容、接口</td>\n<td align=\"center\">时间、错误代码、错误信息、接口</td>\n<td align=\"center\">成交编号、委托编号、合约代码、名称、方向、开平、价格、成交量、成交时间、接口</td>\n</tr>\n<tr>\n<td align=\"left\">显示操作日志</td>\n<td align=\"center\">显示当前操作错误信息</td>\n<td align=\"center\">显示成交单信息</td>\n</tr>\n</tbody></table>\n<h4 id=\"账户持仓信息\"><a href=\"#账户持仓信息\" class=\"headerlink\" title=\"账户持仓信息\"></a>账户持仓信息</h4><p>账户显示账户信息，并具备切换账户功能<br>当前选中账户 显示在旁label中。</p>\n<h3 id=\"界面切换\"><a href=\"#界面切换\" class=\"headerlink\" title=\"界面切换\"></a>界面切换</h3><h1 id=\"记录笔记\"><a href=\"#记录笔记\" class=\"headerlink\" title=\"记录笔记\"></a>记录笔记</h1><p>照例，先贴网址： <a href=\"http://www.qaulau.com/books/PyQt4_Tutorial/index.html\">http://www.qaulau.com/books/PyQt4_Tutorial/index.html</a></p>\n<h4 id=\"窗口设置\"><a href=\"#窗口设置\" class=\"headerlink\" title=\"窗口设置\"></a>窗口设置</h4><pre><code>resize(8, 8)\nsetWindowTitle(u&#39;标题&#39;)\n</code></pre>\n<h4 id=\"获取图标\"><a href=\"#获取图标\" class=\"headerlink\" title=\"获取图标\"></a>获取图标</h4><pre><code>def getIcon(filename):\n&quot;&quot;&quot; 获取图标 &quot;&quot;&quot;\n    fileInfo = Qt.QFileInfo(filename) \n    fileIcon = Qt.QFileIconProvider() \n    icon = QtGui.QIcon(fileIcon.icon(fileInfo)) \n    return icon  \n使用时：\nself.setWindowIcon(getIcon(&#39;../hi/app.ico&#39;))\n</code></pre>\n<hr>\n<h5 id=\"Dock\"><a href=\"#Dock\" class=\"headerlink\" title=\"Dock\"></a>Dock</h5><pre><code>widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.“dock\n标题”, QtCore.Qt.RightDockWidgetArea)\n# 方向有：  \nRightDockWidgetArea,BottomDockWidgetArea,LeftDockWidgetArea\n# 创建dock窗口\n# 可利用\nself.tabifyDockWidget(dockMarketM, dockAllDataM)\n来合并同一个方向上的dock\n\n# 此下还没看… \ndockTradeM.raise_()\ndockPositionM.raise_()\n\n# 连接组件之间的信号\nwidgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition)\n    \n# 保存默认设置\nself.saveWindowSettings(&#39;default&#39;)\n</code></pre>\n<p>其实现函数为：<br>“””创建停靠组件”””</p>\n<pre><code>def createDock(self, widgetClass, widgetName, widgetArea):\n    widget = widgetClass(self.mainEngine, self.eventEngine) \n    dock = QtGui.QDockWidget(widgetName)\n    dock.setWidget(widget)\n    dock.setObjectName(widgetName)\n    dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable)\n    self.addDockWidget(widgetArea, dock)\n    return widget, dock\n</code></pre>\n<blockquote>\n<p>再本质一点的东西为：</p>\n</blockquote>\n<pre><code>widget1 = Ha(self)\ndock = QtGui.QDockWidget(&#39;haha&#39;)\ndock.setObjectName(&#39;ha1&#39;)\ndock.setWidget(widget1)\ndock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable)\nself.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock)\n</code></pre>\n<h4 id=\"动作\"><a href=\"#动作\" class=\"headerlink\" title=\"动作\"></a>动作</h4><pre><code>exit = QtGui.QAction(QtGui.QIcon(&#39;hello.ico&#39;), &#39;exit&#39;, self)\nexit.setShortcut(&#39;Ctrl+Q&#39;)\nexit.setStatusTip(&#39;Exit application&#39;)\n# 图标、文字、快捷键、提示信息\n\nmenubar = self.menuBar()\nfile = menubar.addMenu(&#39;&amp;File&#39;)\nfile.addAction(exit)\n# 创建目录和工具栏，将动作添加进去。工具栏同理\n</code></pre>\n<h3 id=\"定位布局\"><a href=\"#定位布局\" class=\"headerlink\" title=\"定位布局\"></a>定位布局</h3><h4 id=\"绝对定位\"><a href=\"#绝对定位\" class=\"headerlink\" title=\"绝对定位\"></a>绝对定位</h4><pre><code>label1 = QtGui.QLabel(u&#39;绝对定位&#39;, self)\nlabel1.move(15, 60)\n# 创建、移动到显示位置\n</code></pre>\n<h4 id=\"框布局-及-布局元素平均分布\"><a href=\"#框布局-及-布局元素平均分布\" class=\"headerlink\" title=\"框布局 及 布局元素平均分布\"></a>框布局 及 布局元素平均分布</h4><pre><code>okButton = QtGui.QPushButton(&quot;OK&quot;)\ncancelButton = QtGui.QPushButton(&quot;Cancel&quot;)\n# 创建按钮\n\nhbox = QtGui.QHBoxLayout()\nhbox.addStretch(1)\nhbox.addWidget(okButton)        # 增加组件\nhbox.addWidget(cancelButton)\n# 创建水平栏\nhbox.addStretch()   # 平均分布\n\nvbox = QtGui.QVBoxLayout()\nvbox.addStretch(1)\n# 创建竖列\n\nvbox.addLayout(hbox)\n# 将水平栏插入竖列\nself.setLayout(vbox)     \n# 显示最终竖列\n</code></pre>\n<p>注意一下add时选择对类型就好了。</p>\n<h4 id=\"组件之间连接信号\"><a href=\"#组件之间连接信号\" class=\"headerlink\" title=\"组件之间连接信号\"></a>组件之间连接信号</h4><pre><code># classA(QtGui.QTableWidget):\n#   pass\nclassA.itemDoubleClicked.connect(classB.actionFunction)\n# 这样单纯调用还是可以的，但是数据传输… 就得继续研究一下了。\n</code></pre>\n<h4 id=\"调用Windows程序\"><a href=\"#调用Windows程序\" class=\"headerlink\" title=\"调用Windows程序\"></a>调用Windows程序</h4><pre><code>import win32api\n    path = &#39;D:/vnpy-    \\\n    master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json&#39;\n    win32api.ShellExecute(0, &#39;open&#39;, &#39;notepad.exe&#39;, path, &#39;&#39;, 1)\n# 使用记事本打开此文件\n</code></pre>\n<h4 id=\"Json\"><a href=\"#Json\" class=\"headerlink\" title=\"Json\"></a>Json</h4><pre><code>with open(&#39;D:/vnpy- \\\n    master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json&#39;,\n&#39;r&#39;) as f:\nsetting = json.load(f)\nself.userID = str(setting[&#39;userID&#39;])\nself.password = str(setting[&#39;password&#39;])\n</code></pre>\n<h5 id=\"关闭事件退出提示\"><a href=\"#关闭事件退出提示\" class=\"headerlink\" title=\"关闭事件退出提示\"></a>关闭事件退出提示</h5><pre><code>def closeEvent(self, event):\n    reply = QtGui.QMessageBox.question(self, &#39;Message&#39;,&quot;Are you \nsure to quit?&quot;, QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)\nif reply == QtGui.QMessageBox.Yes:\n    event.accept()\nelse:\n    event.ignore()\n</code></pre>\n<p>函数放置位置就是主窗口类下就好。</p>\n<h5 id=\"VS2015-快捷键\"><a href=\"#VS2015-快捷键\" class=\"headerlink\" title=\"VS2015 快捷键\"></a>VS2015 快捷键</h5><pre><code>Ctrl + k    Ctrl + c        # 多行注释\nCtrl + k    Ctrl + u        # 多行取消注释\n</code></pre>\n<h5 id=\"鼠标事件\"><a href=\"#鼠标事件\" class=\"headerlink\" title=\"鼠标事件\"></a>鼠标事件</h5><p>press<br>move<br>release<br>doubleClick<br>clicked()<br>enterEvent 鼠标移入<br>leaveEvent 鼠标移出<br>回去看看具体函数</p>\n<h2 id=\"信号槽（传输额外参数）\"><a href=\"#信号槽（传输额外参数）\" class=\"headerlink\" title=\"信号槽（传输额外参数）\"></a>信号槽（传输额外参数）</h2><p>一般来说，比如一个按钮吧。 在链接点击信号与槽时<code>buttonInit[i].clicked.connect(partial(self.init, i))</code>就完事了。然而，当循环创建按钮，对应同样的槽函数，只是需要执行的变量有区别时，就需要传输额外的参数。<br>这时，方法有二：</p>\n<p>环境：</p>\n<p>python2.7.8</p>\n<p>pyqt 4.11.1</p>\n<h3 id=\"一：-使用lambda表达式\"><a href=\"#一：-使用lambda表达式\" class=\"headerlink\" title=\"一： 使用lambda表达式\"></a>一： 使用lambda表达式</h3><pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyForm</span><span class=\"hljs-params\">(QMainWindow)</span>:</span>  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(MyForm, self).__init__(parent)  \n        button1 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button2 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button1.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">1</span>))  \n        button2.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">2</span>))  \n\n        layout = QHBoxLayout()  \n        layout.addWidget(button1)  \n        layout.addWidget(button2)  \n\n        main_frame = QWidget()  \n        main_frame.setLayout(layout)  \n\n        self.setCentralWidget(main_frame)  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_button</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        print(<span class=\"hljs-string\">'Button &#123;0&#125; clicked'</span>.format(n))  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:  \n    <span class=\"hljs-keyword\">import</span> sys  \n    app = QApplication(sys.argv)  \n    form = MyForm()  \n    form.show()  \n    app.exec_()  </code></pre>\n\n<p>解释一下，on_button是怎样处理从两个按钮传来的信号。我们使用lambda传递按钮数字给槽，也可以传递任何其他东西—甚至是按钮组件本身（假如，槽打算把传递信号的按钮修改为不可用）</p>\n\n<h3 id=\"二：-使用functools里的partial函数\"><a href=\"#二：-使用functools里的partial函数\" class=\"headerlink\" title=\"二： 使用functools里的partial函数\"></a>二： 使用functools里的partial函数</h3><pre class=\"prettyprint\"><code class=\"language-python hljs \">button1.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">1</span>))  \nbutton2.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">2</span>))  </code></pre>\n\n<p>《Rapid GUI Program with Python and QT》 P143例子。</p>\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial  \n<span class=\"hljs-keyword\">import</span> sys  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Bu1</span><span class=\"hljs-params\">(QWidget)</span>:</span>  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(Bu1, self).__init__(parent)  \n        <span class=\"hljs-comment\">#水平盒式布局  </span>\n        layout = QHBoxLayout()  \n        <span class=\"hljs-comment\">#显示  </span>\n        self.lbl = QLabel(<span class=\"hljs-string\">'no button is pressed'</span>)  \n        <span class=\"hljs-comment\">#循环5个按钮  </span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">5</span>):  \n            but = QPushButton(str(i))  \n            layout.addWidget(but)  \n            <span class=\"hljs-comment\">#信号和槽连接  </span>\n            but.clicked.connect(self.cliked)  \n\n        <span class=\"hljs-comment\">#使用封装，lambda  </span>\n        but = QPushButton(<span class=\"hljs-string\">'5'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_click(<span class=\"hljs-string\">'5'</span>))  \n        <span class=\"hljs-comment\">#使用个who变量，结果不正常，显示 False is pressed  </span>\n        <span class=\"hljs-comment\">#but.clicked.connect(lambda who=\"5\": self.on_click(who))  </span>\n\n        <span class=\"hljs-comment\">#使用封装，partial函数  </span>\n        but = QPushButton(<span class=\"hljs-string\">'6'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(partial(self.on_click, <span class=\"hljs-string\">'6'</span>))  \n\n        layout.addWidget(self.lbl)  \n        <span class=\"hljs-comment\">#设置布局  </span>\n        self.setLayout(layout)  \n\n    <span class=\"hljs-comment\">#传递额外参数     </span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">cliked</span><span class=\"hljs-params\">(self)</span>:</span>  \n        bu = self.sender()  \n        <span class=\"hljs-keyword\">if</span> isinstance(bu, QPushButton):  \n            self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % bu.text())  \n        <span class=\"hljs-keyword\">else</span>:  \n            self.lbl.setText(<span class=\"hljs-string\">'no effect'</span>)  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_click</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % n)  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:          \n    app = QApplication(sys.argv)  \n    bu =Bu1()  \n    bu.show()  \n    app.exec_()   </code></pre>\n\n<p>三：感谢<a href=\"http://blog.csdn.net/fengyu09/article/details/39498777\">来源</a> </p>\n<hr>\n<hr>\n<hr>\n<h1 id=\"策略管理\"><a href=\"#策略管理\" class=\"headerlink\" title=\"策略管理\"></a>策略管理</h1><p>策略类，引擎，报单管理&amp;&amp;仓位管理</p>\n<h2 id=\"引擎\"><a href=\"#引擎\" class=\"headerlink\" title=\"引擎\"></a>引擎</h2><p>引擎中将策略事件有序添加到事件引擎和主引擎中。 读取setting.json 文件对策略参数以及是否启用进行配置。设定日期。<br>使用策略实例字典保存策略名与实例关系——<br>并将此字典在推送字典中与tick数据ID对应（ID对多实例。）<br>再有orderID与策略对应字典，用以推送order和trade数据<br>计数本地停止单 、 持仓缓存字典</p>\n<h2 id=\"报单管理\"><a href=\"#报单管理\" class=\"headerlink\" title=\"报单管理\"></a>报单管理</h2><h3 id=\"成交推送处理\"><a href=\"#成交推送处理\" class=\"headerlink\" title=\"成交推送处理\"></a>成交推送处理</h3><p>成交回调 - &gt; 订单ID和策略对应字典 -&gt; 计算策略持仓（根据策略方向，持仓增加交易笔数）-&gt; 更新持仓缓存数据 </p>\n<h3 id=\"报单者类\"><a href=\"#报单者类\" class=\"headerlink\" title=\"报单者类\"></a>报单者类</h3><p>单一合约订单缓存类——初始化buffer 存储字典_log策略日志存储</p>\n","site":{"data":{}},"excerpt":"","more":"<p>author: Ian</p>\n<h1 id=\"Vn-Py笔记-✏📔\"><a href=\"#Vn-Py笔记-✏📔\" class=\"headerlink\" title=\"Vn.Py笔记 ✏📔\"></a>Vn.Py笔记 ✏📔</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><img src=\"https://static.vnpy.com/static/img/index/2019-5-27/mainwindow.PNG\" alt=\"vn.py\"></h2><p><font color=green>一个开源Python交易软件，主使用CTP协议。当然，还有其他协议了其源项目在<a href=\"http://www.vnpy.org/\">http://www.vnpy.org/</a> </font></p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"初期笔记\"><a href=\"#初期笔记\" class=\"headerlink\" title=\"初期笔记\"></a>初期笔记</h2><pre><code>报单交易过程中，\n\nCTP使用BrokerID 从业务层面完全隔离不同经纪公司的交易、风控及结算用户的接入。\nBrokerID具体取值咨询开户的经纪公司。\n</code></pre>\n<p>CTP中 UserID为操作员代码，InversterID为投资者代码； 投资者自己下单两者同为投资者代码</p>\n<pre><code>CTP-API中，OrderRef和OrderAction    前者为CTP后台提供给客户端标识一笔报\n单的字段，从客户端可通过（FrontID、SessionID、OrderRef）唯一确定一笔报\n单；；；后者与OrderRef功能相似，提供给客户端来标识一笔撤单。\n前者的数据类型为字符数组，必须为阿拉伯数字字符。\nOrderRef（OrderActionRef）取值必须保证在同一会话内发送的报单\nOrderRef（OrderActionRef）值大于之前的最大值，开发多线程客户端尤为需要  \n注意。\n</code></pre>\n<p>CTP-API库：</p>\n<pre><code>error.dtd\\error.xml 错误定义文件    ----   ThostFrfcMdApi.h \n交易接口类定义文件  \n———   ThostFtfcUserApiDataType.h 类型定义文件  ------    \nthostmduserapi.lib,thostmduserpi.dll 行情接口库文件     -----   \nthosttraderapi.lib,thosttraderapi.dll交易接口库文件   ----- \n\n交易和行情接口类定义文件都包含API 和 SPI类定义，客户端使用API向CTP后台\n发送请求，CTP后台则使用SPI向客户端回传响应及回报\n\n行情Demo开发：\n    1.将API文件复制到工程目录；并将所有的头文件和静态、动态库连链接库\n并将文件导入到项目工程中。\n    先继承行情接口类CThostFtdcMdspi，并实现需要实现的虚函数。  \nOnFrontConnectde、OnFrontDisconnected、OnPspUserLogin、\nOnRspSubMarketDAta\n</code></pre>\n<p>/<strong><strong><strong><strong><strong>API工作流程</strong></strong></strong></strong></strong>***/</p>\n<p>API压缩包——API含常量对应字符、类型定义、操作系统编译定义、回调函数（MdSpi）（柜台向用户端发送信息后被系统自动调用的函数）、主动函数（MdApi）（向柜台发送各种请求和指令）</p>\n<p>API工作流程：<br>    创建MdSpi对象（回掉函数），调用MdApi类，以Create开头的静态方法，创建MdApi对象（主动函数），注册MdSpi对象指针，行情柜台前置机地址，调用MdApi对象Init方法初始化连接前置机，连接成功会通过OnFrontConnected回调通知用户，用户获得连接成功通知后，调MdApi的ReqUserLogin登陆，登陆后MdSpi的OnRsqUserLogin通知用户<br>———————-到此登陆完成———————</p>\n<pre><code>MdApi：（行情相关）\n    使用MdApi对象的SubscribeMarketData方法，传入参数为想要订阅的“合约\n代码”，订阅成功当合约有新行情通过MdApi的OnRtnDepthMarketData回调通知   \n用户\n</code></pre>\n<p>———————-至此订阅完成———————<br>        当用户的某次请求发生错误时，会通过OnRspError通知用户        MdApi也含有退订合约、登出功能。      而一般退出程序则直接杀进程（不太安全便是）</p>\n<pre><code>TraderApi：（交易相关）\n    不同于以上的有 注册TraderSpi对象的指针后需要调用TraderApi对象的\nSubscribePrivateTopic和SubscribePublicTopic方法去选择公开和私有数据流的重\n传方法\n    对于期货柜台，每一日第一次登陆需要先查询前一日的结算单，等待查询\n结果返回，确认，才可进行后续操作（CTP、恒生UFT），证券（LTS）无此要求\n    上一步完成后，用户可以调用ReqQryInstrument的方法查询柜台上所有可\n以交易的合约信息（包括代码、中文名、涨跌停、最小价位变动、合约乘数等大\n量细节），一般是在这里获得合约信息列表后，再去MdApi中订阅合约；经常有\n人问为什么在MdApi中找不到查询可供订阅的合约代码的函数，这里尤其要注\n意，必须通过TraderApi来获取\n    当用户报单、成交状态发生变化时，TraderApi会自动通过OnRtnOrder、\nOnRtnTrade通知，无需额外订阅\n</code></pre>\n<p>/<strong><strong><strong><strong><strong><strong>封装API</strong></strong></strong></strong></strong></strong>****/<br>    封装后API的动作：<br>        主动函数：  调用封装API主动函数，传入Python变量作为参数—&gt;封装API将Python变量转换成C++变量—&gt;API调用原生API主动函数传入C++变量作为参数<br>        回掉函数：  交易柜台通过原生API传入参数为C++变量-&gt;封装API将C++变量转换为Python变量-&gt;封装API调用封装后的回调函数想Python程序中推送数</p>\n<pre><code>封装处理：\n    将回调函数Spi类和主动函数Api类封装为一个类，使用中更加方便\n    在API中包含一个缓冲队列，当回调函数收到新的数据信息时只是简单存入\n并立即返回，而数据信息的处理和向Python中的推送则由另一个工作线程执行\n    鉴于Python中dict字典内的键和值的类型可以不同，所以利用此来代替\nC++的结构体\n\n\n处理示例：\n    getChar()： d(Python字典对象) key(d中想要提取的数据键名) \nif(d.has_key(key)) 判断是否存在这个键；\n    object o = d[key]; 提取对应值   \n    extract&lt;string&gt; x(o); 生成提取\nstd::string类的提取器\n    if (x.check())  检测能否提取出数据  string s = x();  执行解包器，提取\nstring对象\n    const char *buffer = s.c_str();  从s中获取字符串指针bufffer     \nstrcpy_s(value, strlen(buffer) + 1, buffer);  \n将字符串指针指向的字符串数组复制到结构体成员的指针上    对字符串指针赋值\n必须使用strcpy_s, vs2013使用strcpy\n编译通不过+1应该是因为C++字符串的结尾符号？不是特别确定，不加这个\n1会出错\n        \n</code></pre>\n<p>/<strong><strong><strong><strong><strong><strong><strong>事件驱动</strong></strong></strong></strong></strong></strong></strong>***/</p>\n<p>时间驱动： 定时调用<br>事件驱动： 新事件被推送时（如新行情、成交）则调用<br>    初始化：    事件队列、引擎开关（标志）、事件线程、定时器、一个事件和处理函数对应字典（__handlers）<br>    引擎运行：  循环检查引擎开关 若开则一直尝试获取事件（阻塞开，时间1s），处理事件； 若出错则pass<br>    处理事件：  检测是否有对当前事件监听的处理函数，若有则循环调用相应处理函数对事件进行处理<br>    计时器事件：    创建计时器事件，推入计时器事件<br>    引擎启动：  打开引擎开关、启动事件处理线程、启动定时器（事件默认间隔1s）<br>    停止引擎：  关闭。。。。、停止计时器、等待事件处理线程退出<br>    注册事件处理：  尝试获取对应处理此类型函数列表（对应字典），若无则创建。<br>    注销函数监听：  。。。。。。。。。。。。。。。。。。。。。，若无则pass，若函数存在于列表则将之移除，若函数列表为空，则引擎中移除该事件类型<br>    put：       向事件队列中存入事件</p>\n<p>底层接口对接：<br>    交易程序架构分：底层接口、中层引擎、顶层GUI，<br>    为将某API对接到程序中需：1.将API的回调函数收到的数据—&gt;中层引擎 等待处理 2.将API的主动函数进行一定的简化封装，便于中层引擎调用</p>\n<p>中层引擎设计：<br>    进一步封装底层接口所暴露出的API函数，使得其更容易被上层的GUI和策略组件调用。<br>    构造函数：<br>        以主引擎成员变量形式创建事件驱动引擎ee，行情接口md和交易接口td的对象。<br>        随后立即启动，当用户调用接口连接、登陆等功能、收到事件推送，ee可以立即推送到监听这些事件的组件进行处理。<br>        LTS和CTP接口的持仓情况和账户情况不通过推送，需手动查询。Demo选择循环查询模式，不断更新。可选择不进行查询，降低占用网络带宽。<br>        登陆成功后，查询柜台所有可交易信息，保存到dictInstrument字典中，方便后续查询<br>    优化了一些函数方法的调用方式，将经纪商一起提供的接口登陆封装在一个函数中，减少了重复书写的次数。</p>\n<hr>\n<hr>\n<hr>\n<hr>\n<h2 id=\"引擎之间执行过程\"><a href=\"#引擎之间执行过程\" class=\"headerlink\" title=\"引擎之间执行过程\"></a>引擎之间执行过程</h2><h3 id=\"发单为例：\"><a href=\"#发单为例：\" class=\"headerlink\" title=\"发单为例：\"></a>发单为例：</h3><p>设置发单按钮 -&gt; 将点按动作关联sendOrder发单实现函数（从输入框获取合约代码-&gt;获取合约信息对象（见下） -&gt; <em>如果成功获取</em> -&gt; 再获取方向价格等信息 -&gt; 调用主引擎下发单实现 -&gt; 主引擎转到TdApi下发单函数执行（请求编号（API管理） -&gt; 将传入信息数据存入字典（合约代码、方向价格等） -&gt; 报单编号（API管理） -&gt; 用户id、单子属性（投机、立即发单、今日有效）等信息存入字典） -&gt; self.reqOrderInsert(req（信息字典）, self.__reqid（请求编号）) -&gt; 返回订单号（报单编号））</p>\n<hr>\n<h4 id=\"主引擎：（负责对API的调度）\"><a href=\"#主引擎：（负责对API的调度）\" class=\"headerlink\" title=\"主引擎：（负责对API的调度）\"></a>主引擎：（负责对API的调度）</h4><p><strong>init</strong>()初始化中的动作：<br>    创建事件驱动引擎、创建API接口、启动事件驱动引擎、循环查询持仓和账户相关（之后学习）、创建合约存储空字典，注册插入合约对象执行函数事件类型和其处理函数。<br>其中包含几乎所有的功能函数，包含了每个功能函数的实现方法</p>\n<h4 id=\"事件驱动引擎：\"><a href=\"#事件驱动引擎：\" class=\"headerlink\" title=\"事件驱动引擎：\"></a>事件驱动引擎：</h4><p><strong>init</strong>()初始化中的动作：<br>    创建事件队列、创建设置事件引擎开关（关）、创建事件处理线程(目标为引擎运行)、创建计时器（将超时动作连接到__onTimer函数）、创建__handlers空字典（存储对应事件调用关系）<br>统筹管理事件的执行，在其中建立起事件执行队列管理向队列中插入事件，分配事件对象类型（据此注册其执行函数）和具体事件数据（时间及日志），拥有注册事件处理监听及注销监听。最终使得整个程序有序的进行。</p>\n<hr>\n<h3 id=\"调用关系\"><a href=\"#调用关系\" class=\"headerlink\" title=\"调用关系\"></a>调用关系</h3><p>主引擎在初始化时即启动事件驱动引擎（调用启动函数start()（将引擎开关设为启动、启动事件处理线程、启动计时器）） -&gt; 事件处理线程运行目标__run()（若开关开则将从<strong>事件队列</strong>中get()到事件，放到处理函数__process()中执行） -&gt; __process()处理事件函数（检查事件类型，在__handlers字典中是否有对此监听处理函数，若存在则调用字典中处理函数）</p>\n<pre><code>事件启动引擎start()中启动定时器 -&gt; 创建计时器事件 -&gt; 向队列存入计时器事件\n</code></pre>\n<hr>\n<h4 id=\"获取合约信息对象：\"><a href=\"#获取合约信息对象：\" class=\"headerlink\" title=\"获取合约信息对象：\"></a>获取合约信息对象：</h4><p>从合约字典中读取合约信息对象有则继续执行原本程序操作（获取名称、发单撤单），无则None</p>\n<h5 id=\"以初始化查询为例：\"><a href=\"#以初始化查询为例：\" class=\"headerlink\" title=\"以初始化查询为例：\"></a>以初始化查询为例：</h5><p>主引擎初始化中注册<code>self.ee.register(EVENT_TDLOGIN, self.initGet)</code>,<code>EVENT_TDLOGIN</code>为交易服务器登陆成功事件。即此事件为登录成功后开始初始化查询。<br>步骤：打开设定文件<code>setting.vn</code>，尝试读取设定字典。载入后，设定事件类型、将事件推入事件队列、查询投资者、循环查询账户和持仓。（若不存在or合约数据非今天，则发出获取合约请求。）-&gt; 获取合约 -&gt; 定义事件类型 -&gt; 推入事件队列 -&gt; API查询合约</p>\n<hr>\n<hr>\n<h2 id=\"ctpGateway-接入方法\"><a href=\"#ctpGateway-接入方法\" class=\"headerlink\" title=\"ctpGateway 接入方法\"></a>ctpGateway 接入方法</h2><p><font color=orange>考虑到现阶段大部分CTP中的ExchangeID字段返回的都是空值<br>vtSymbol直接使用symbol</font></p>\n<hr>\n<p>创建CTP价格方向交易所持仓产品等类型映射，方便调用  <strong>然后</strong>  <code>class CtpGateway(VtGateway):</code>CTP接口中初始化动作（继承VtGateway实例化事件引擎、设定网关名称为’CTP‘、实例化ctpMdApi，ctpTdApi、初始化行情交易连接状态，循环查询允许）</p>\n<p><strong>连接过程</strong><br>初始化账号密码等、连接服务器、注册服务器地址、登陆<br>订阅合约里有个设计为：尚未登陆就调用了订阅则保存订阅信号，则在成功登陆之后的登陆回报函数中重新订阅</p>\n<hr>\n<h2 id=\"数据记录器\"><a href=\"#数据记录器\" class=\"headerlink\" title=\"数据记录器\"></a>数据记录器</h2><h4 id=\"drBase-py中（定义数据类型）：（数据记录器和CTA两模块共同使用）\"><a href=\"#drBase-py中（定义数据类型）：（数据记录器和CTA两模块共同使用）\" class=\"headerlink\" title=\"drBase.py中（定义数据类型）：（数据记录器和CTA两模块共同使用）\"></a>drBase.py中（定义数据类型）：（<font color=orange>数据记录器和CTA两模块共同使用</font>）</h4><pre><code>K线数据\n    构造函数（定义数据类型）：vt系统代码、合约代码、交易所代码、开高低\n关、bar开始时间、时间、成交量持仓量\nTick数据\n    构造函数（定义数据类型）：vt系统代码、合约代码、交易所代码、成交数\n据、tick时间、五档行情\n</code></pre>\n<hr>\n<h4 id=\"DrEngine数据记录引擎\"><a href=\"#DrEngine数据记录引擎\" class=\"headerlink\" title=\"DrEngine数据记录引擎\"></a><font color=red>DrEngine数据记录引擎</font></h4><p>获取当前文件绝对路径</p>\n<pre><code>settingFileName = &#39;DR_setting.json&#39;\npath = os.path.abspath(os.path.dirname(__file__))       \nsettingFileName = os.path.join(path, settingFileName)\n</code></pre>\n<p>初始化中动作：实例化设置主引擎、事件引擎、获取当前日期、创建主力合约代码映射字典、Tick对象字典、K线对象字典、初始化数据库插入单独线程、载入设置，订阅行情 </p>\n<h5 id=\"载入设置、订阅行情\"><a href=\"#载入设置、订阅行情\" class=\"headerlink\" title=\"载入设置、订阅行情\"></a>载入设置、订阅行情</h5><p>打开<code>DR_setting.json</code>文件，以json载入，其中<code>’working‘</code>决定是否启动行情记录功能。随后从json文件中循环获取合约代码订阅tick和bar</p>\n<p>启动数据插入线程（<code>run</code>函数（向MongoDB中插入数据））、注册事件监听（<code>procecssTickEvent</code>处理行情推送（<font color=green>下详</font>））</p>\n<h5 id=\"处理行情推送\"><a href=\"#处理行情推送\" class=\"headerlink\" title=\"处理行情推送\"></a>处理行情推送</h5><p>从事件字典中取出保存的具体事件数据、<code>vtSymbol</code>为tick识别信号（合约代码）、转化Tick格式、更新TIck数据（并发出日志）、更新分钟线数据</p>\n<hr>\n<h2 id=\"风控模块\"><a href=\"#风控模块\" class=\"headerlink\" title=\"风控模块\"></a>风控模块</h2><p>从配置json文件中读取设定信息  操作运作：1.检测风控设定值变化 2.每笔交易发单时使用风控模块决定该次发单是否允许   （其中流控计数在每次调用风控检测时计数、成交合约量在更新成交数据中加交易数值）</p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"CTA策略\"><a href=\"#CTA策略\" class=\"headerlink\" title=\"CTA策略\"></a>CTA策略</h2><p>直接来到改版之后：</p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"CTP交易托管API\"><a href=\"#CTP交易托管API\" class=\"headerlink\" title=\"CTP交易托管API\"></a>CTP交易托管API</h2><h3 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h3><p>基于C++的类库，通过使用提供接口实现相关交易功能，含：报单与报价录入、的撤销、的挂起、的激活、的修改、的查询、成交单查询、投资者查询、 投资者持仓查询、合约查询、交易日获取等</p>\n<p>含文件：交易接口、API所需数据类型、业务相关数据结构i、的头文件、动态链接库、导入库</p>\n<h3 id=\"体系结构\"><a href=\"#体系结构\" class=\"headerlink\" title=\"体系结构\"></a>体系结构</h3><p>建立在TCP协议之上FTD协议与交易托管系统进行通讯<br><strong>FTD通讯模式：</strong> </p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">对话通讯模式</td>\n<td align=\"right\">- 会员端请求、接收处理、响应</td>\n</tr>\n<tr>\n<td align=\"left\">私有通讯模式</td>\n<td align=\"right\">- 交易所主动向特定会员发出</td>\n</tr>\n<tr>\n<td align=\"left\">广播通讯模式</td>\n<td align=\"right\">- 交易所主动、全员发送</td>\n</tr>\n</tbody></table>\n<h3 id=\"接口模式\"><a href=\"#接口模式\" class=\"headerlink\" title=\"接口模式\"></a>接口模式</h3><p><code>CThostFtdeTraderApi</code>和<code>CThostFtdeTraderSpi</code>，前者发送请求，后者回调响应。旗下函数方法前者以Req开头后者以OnRsp开头。请求接口第一个参数为请求的内容，不能为空。第二个参数为请求号。</p>\n<p>如果接收到的响应数据不止一个，则回调函数会被多次调用。第一个参数为响应的具体数据，第二个参数为处理结果，第三个参数为请求号，第四个参数为响应结束标志，表明是否是本次响应的最后一次回调。</p>\n<h3 id=\"运行模式\"><a href=\"#运行模式\" class=\"headerlink\" title=\"运行模式\"></a>运行模式</h3><p>至少两个线程，一个为应用程序主线程，一个为交易员API工作线程，其间通讯由API工作线程驱动。</p>\n<h3 id=\"撤单-发单\"><a href=\"#撤单-发单\" class=\"headerlink\" title=\"撤单 发单\"></a>撤单 发单</h3><h4 id=\"发单为例：-1\"><a href=\"#发单为例：-1\" class=\"headerlink\" title=\"发单为例：\"></a>发单为例：</h4><p>在用户点击发单之后，程序从“交易”栏的<code>text()</code>获取合约代码，随后从详细合约保存字典中读取其他信息，将之保存到一个字典中之后，调用主引擎对特定接口发单。</p>\n<p>发单完成之后，马上会收到报单响应 OnRspOrderInsert，说明交易系统已经收到报单。报单进入交易系统后，如果报单的交易状态发生变化，就会收到报单回报 OnRtnOrder。如果报单被撮(部分)成交，就会收到成交回报 OnRtnTrade。通过更新</p>\n<h4 id=\"撤单时：\"><a href=\"#撤单时：\" class=\"headerlink\" title=\"撤单时：\"></a>撤单时：</h4><p>程序从单元格中获取exchange、frontID、orderID、sessionID、symbol、gatewayName等信息，调用主引擎对特定接口撤单。撤单时调用Api函数为reqOrderAction其内容包括撤销、挂起、激活、修改，故还需一个Flag参数</p>\n<p>ps：如果报单还停留在 Thost，Thost 可以用 Front 、SessionID、OrderRef 来定位<br>如果报单停留在交易所，Thost 可以用 ExchangID、OrderSysID 来定位，然后向交易<br>所转发撤单指令。</p>\n<h3 id=\"TraderApi所有方法功能\"><a href=\"#TraderApi所有方法功能\" class=\"headerlink\" title=\"TraderApi所有方法功能\"></a>TraderApi所有方法功能</h3><pre><code>OnFrontConnected/Disconnected       \n# 客户端与交易托管系统建立起通信连接时\nOnHeartBeatWarning      \n# 当长时间未收到报文时\nOnRspUserLogin/Logout       \n# 登陆注销响应\nOnRspUserPasswordUpdate     \n# 改密响应\nOnRspTradingAccountPasswordUpdate       \n# 当客户端发出资金账户口令更新指令后，交易托管系统返回响应时\nOnRspError      \n# 请求出错时\nOnRspOrderInsert        \n# 报单录入\nOnRspOrderAction        \n# 报单操作包括报单的撤销、报单的挂起、报单的激活、报单的修改。当客户端\n    发出过报单操作指令后，交易托管系统返回响应时\nOnRspQueryMaxOrderVolume        \n# 查询最大报单\nOnRspSettlementInfoConfirm      \n# 当客户端发出投资者结算结果确认指令后，交易托管系统返回响应时\n\n等……  lol 统计无力\n</code></pre>\n<p>？</p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"CTA-策略引擎\"><a href=\"#CTA-策略引擎\" class=\"headerlink\" title=\"CTA 策略引擎\"></a>CTA 策略引擎</h2><h5 id=\"init-的工作：\"><a href=\"#init-的工作：\" class=\"headerlink\" title=\"_init_()的工作：\"></a>_<em>init</em>_()的工作：</h5><ul>\n<li>加载主引擎、事件引擎；获取当前日期</li>\n<li>设定是否在回测</li>\n<li>保存策略实例的字典strategyDict(key为策略名称，value为策略实例)、</li>\n<li>保存vtSymbol和策略实例映射的字典(用于推送tick数据，可能多个策略交易同一个vtSymbol因此key为vtSymbol.value为包含所有相关策略对象的list)、</li>\n<li>保存vtOrderID和strategy对象映射的字典(用于推送order和trade数据key为vtOrderID，value为strategy对象）、</li>\n<li>本地停止单编号计数、本地停止单字典(key为stopOrderID，value为stopOrder对象)、</li>\n<li>持仓缓存字典(key为vtSymbol，value为PositionBuffer对象)、</li>\n<li>成交号集合、</li>\n<li>设置引擎类型为实盘、</li>\n<li>注册事件监听</li>\n</ul>\n<h4 id=\"初始化策略\"><a href=\"#初始化策略\" class=\"headerlink\" title=\"初始化策略\"></a>初始化策略</h4><p>从数据库中读取3天的历史TICK数据、行情更新。。。。。有的话待续</p>\n<h4 id=\"启动策略\"><a href=\"#启动策略\" class=\"headerlink\" title=\"启动策略\"></a>启动策略</h4><p>从策略实例字典中取出策略实例，调用策略函数（已经初始化，没有在进行策略交易），开启进行交易标志位。</p>\n<h4 id=\"停止策略\"><a href=\"#停止策略\" class=\"headerlink\" title=\"停止策略\"></a>停止策略</h4><p>从策略实例字典中取出策略实例，调用策略函数（            在进行策略交易），关闭策略交易标志位 -&gt; 对该策略发出的所有限价单进行撤单 -&gt; 发出的所有本地停止单撤单 -&gt; </p>\n<h4 id=\"保存、读取策略配置\"><a href=\"#保存、读取策略配置\" class=\"headerlink\" title=\"保存、读取策略配置\"></a>保存、读取策略配置</h4><p>触发策略状态变化事件（通常用于通知GUI更新）<br>获取策略的参数字典<br>获取策略当前的变量字典</p>\n<h3 id=\"记录\"><a href=\"#记录\" class=\"headerlink\" title=\"记录\"></a>记录</h3><p>报单更新、成交更新都是先检测是否有对此监听的策略<br>限价单成交处理：成交回报、报单回报、记录成交到列表、删除该限价单</p>\n<h4 id=\"基础功能的策略调用\"><a href=\"#基础功能的策略调用\" class=\"headerlink\" title=\"基础功能的策略调用\"></a>基础功能的策略调用</h4><p>策略中发单时，需要在设置参数时考虑设置。    另获取持仓缓存数据，做平昨平今的选择。<br>策略中发单时，检查报单是否有效，赋参，撤单。<br>发停止单，编号，赋参，保存至字典<br>撤停止单，从工作停止单字典中移除</p>\n<hr>\n<h4 id=\"Ta-Lib\"><a href=\"#Ta-Lib\" class=\"headerlink\" title=\"Ta-Lib\"></a>Ta-Lib</h4><p>趋势策略分为以下部分：</p>\n<ul>\n<li>趋势信号（通常是基于某几个参数计算出来的指标值超过某个阈值）、</li>\n<li>信号过滤（和趋势信号类似）、</li>\n<li>出场方案（固定点数/百分比的止盈和止损，移动止损）。<br>所以，Ta-lib是策略实现工具罢了。</li>\n</ul>\n<p>此库中提供了多种技术分析的函数，有多种指标：ADX、MACD、RSI、布林轨道等<br>；K线形态识别，如“黄昏之星”、“锤形线”等。</p>\n<p>依靠此库对数据的分析，来下达发单撤单的动作即为策略。</p>\n<h6 id=\"策略示例：\"><a href=\"#策略示例：\" class=\"headerlink\" title=\"策略示例：\"></a>策略示例：</h6><pre><code>基于Talib模块的双指数均线策略`class TalibDoubleSmaDemo(CtaTemplate):`\n</code></pre>\n<p><font color=green>就是两个指标的数据来判断当前局势罢了</font></p>\n<ol>\n<li>设定策略参数</li>\n<li>策略变量</li>\n<li>参数列表（保存参数名称）</li>\n<li>变量列表（保存变量名称）</li>\n</ol>\n<h6 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h6><p>初始化策略（加载Bar数据）、启动策略、停止策略、收到行情Tick推送（计算K线）、收到Bar推送（缓存最新收盘价到列表 -&gt; 数量足够后转化为Numpy数组后传入talib函数SMA中计算 -&gt; 读取当前K线和上一根K线数值，用于判断均线交叉 -&gt; 检测持仓状态，做出相应交易动作）</p>\n<hr>\n<h3 id=\"CTA回测\"><a href=\"#CTA回测\" class=\"headerlink\" title=\"CTA回测\"></a>CTA回测</h3><h5 id=\"init-的工作\"><a href=\"#init-的工作\" class=\"headerlink\" title=\"_init_()的工作\"></a>_<em>init</em>_()的工作</h5><ul>\n<li>本地停止单编号计数    <code>self.stopOrderCount</code></li>\n<li>本地停止单字典    <code>self.stopOrderDict</code> And <code>self.workingStopOrderDict</code></li>\n<li>设引擎类型为回测</li>\n<li>回测相关变量定义</li>\n<li>当前最新数据，用于模拟成交使用</li>\n</ul>\n<h4 id=\"运行回测\"><a href=\"#运行回测\" class=\"headerlink\" title=\"运行回测\"></a>运行回测</h4><ol>\n<li><p>载入历史数据</p>\n</li>\n<li><p>根据回测模式确定要使用数据类</p>\n</li>\n<li><p>初始化策略</p>\n</li>\n<li><p>启动策略</p>\n</li>\n<li><p>回放数据（从数据库中取得推到newBar或者newTick）</p>\n</li>\n<li><p>策略获得新数据，执行相应操作</p>\n</li>\n</ol>\n<h5 id=\"基于最新数据撮合限价单\"><a href=\"#基于最新数据撮合限价单\" class=\"headerlink\" title=\"基于最新数据撮合限价单\"></a>基于最新数据撮合限价单</h5><p>先确定会撮合成交的价格 -&gt; 遍历限价单字典中所有限价单 -&gt; 判断是否会成交 -&gt; 发生成交推送成交数据（买入 -&gt; 增加持仓 推送委托数据、从字典中删除该限价单）</p>\n<h4 id=\"计算原理\"><a href=\"#计算原理\" class=\"headerlink\" title=\"计算原理\"></a>计算原理</h4><hr>\n<hr>\n<hr>\n<h1 id=\"改版之后程序架构\"><a href=\"#改版之后程序架构\" class=\"headerlink\" title=\"改版之后程序架构\"></a>改版之后程序架构</h1><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th></th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"></td>\n<td>APIs</td>\n<td></td>\n<td>***</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td>Trader</td>\n<td></td>\n<td></td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>CTP</code></td>\n<td></td>\n<td><code>KSGold</code></td>\n<td>***</td>\n<td><code>Common</code></td>\n<td><code>Condig</code></td>\n<td><code>Core</code></td>\n<td><code>Gateway</code></td>\n<td><code>Setting</code></td>\n<td><code>Strategy</code></td>\n<td><code>UI</code></td>\n<td align=\"right\"><code>main</code></td>\n</tr>\n<tr>\n<td align=\"left\">CtpMdApi、CtpTdApi</td>\n<td>…………</td>\n<td>…………</td>\n<td>Md、Td</td>\n<td>………………</td>\n<td>………………</td>\n<td>CTA、HTA、引擎、事件管理</td>\n<td>………………</td>\n<td>配置文件</td>\n<td>………………</td>\n<td>………………</td>\n<td align=\"right\">………………</td>\n</tr>\n</tbody></table>\n<h2 id=\"事件引擎\"><a href=\"#事件引擎\" class=\"headerlink\" title=\"事件引擎\"></a>事件引擎</h2><p>两版都一样，作为一个程序运行最外层的生成的实例，来进行各个实例之间的数据传输。因为每个实例都将数据在事件引擎中保存，调用事件引擎中的事件队列来对进行事件运行安排。</p>\n<p>Like This：</p>\n<pre><code>class A(object):\n&quot;&quot;&quot;docstring for A&quot;&quot;&quot;\n    def __init__(self, name):\n        super(A, self).__init__()\n        self.name = name\n        self.a = 0\n    def da(self):\n        print self.name\n        print self.a    \na = A(&#39;I am A&#39;)\na.da()\n\n\n\n\nclass B(object):\n&quot;&quot;&quot;docstring for B&quot;&quot;&quot;\n    def __init__(self, aclass):\n        super(B, self).__init__()\n        self.aclass = aclass\n        self.aclass.a += 1\n    def dada(self):\n        self.aclass.da()\nb = B(a)\nb.dada()\n\nclass C(object):\n&quot;&quot;&quot;docstring for B&quot;&quot;&quot;\n    def __init__(self, aclass):\n        super(C, self).__init__()\n        self.aclass = aclass\n        self.aclass.a += 1\n    def dada(self):\n        self.aclass.da()\nc = C(a)\nc.dada()\n</code></pre>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>0</p>\n</blockquote>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>1</p>\n</blockquote>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>2</p>\n</blockquote>\n<p>B与C分别在去改变读取在A中定义的数值。  嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(<em>￣▽￣</em>)o就是这么写意和惬意。<font color=indigo>Indigo</font>色在纯黑背景下不好辨识哈哈，还是换少女粉吧</p>\n<hr>\n<hr>\n<hr>\n<h1 id=\"Vn-Py-界面\"><a href=\"#Vn-Py-界面\" class=\"headerlink\" title=\"Vn.Py 界面\"></a>Vn.Py 界面</h1><p>Icon 图标下载网:    <a href=\"http://www.easyicon.net/\">http://www.easyicon.net/</a></p>\n<h2 id=\"界面设计文档\"><a href=\"#界面设计文档\" class=\"headerlink\" title=\"界面设计文档\"></a>界面设计文档</h2><h3 id=\"功能要求\"><a href=\"#功能要求\" class=\"headerlink\" title=\"功能要求\"></a>功能要求</h3><p>连接、登陆，订阅，发撤单，持仓、账户信息、成交（下单时间、成交时间、备注（下单动作者））、保留交易模块、跟随鼠标点击更新交易模块中单子内容</p>\n<h3 id=\"文档编写步骤\"><a href=\"#文档编写步骤\" class=\"headerlink\" title=\"文档编写步骤\"></a>文档编写步骤</h3><p>由需求确定功能，划分模块，模块关系，下分框架，框架实现</p>\n<hr>\n<hr>\n<h3 id=\"模块\"><a href=\"#模块\" class=\"headerlink\" title=\"模块\"></a>模块</h3><p>工具栏、行情显示、策略池、账户持仓、消息栏</p>\n<h4 id=\"工具栏\"><a href=\"#工具栏\" class=\"headerlink\" title=\"工具栏\"></a>工具栏</h4><p>连接（含各个端口） 风控、帮助、登陆状态显示</p>\n<h5 id=\"工具功能\"><a href=\"#工具功能\" class=\"headerlink\" title=\"工具功能\"></a>工具功能</h5><table>\n<thead>\n<tr>\n<th align=\"left\">工具名称</th>\n<th align=\"center\">说明</th>\n<th align=\"right\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">连接</td>\n<td align=\"center\">弹出端口列表</td>\n<td align=\"right\">通过复选框选中对应端口</td>\n</tr>\n<tr>\n<td align=\"left\">风控</td>\n<td align=\"center\">弹出设定列表</td>\n<td align=\"right\">通过文本框输入设定数值</td>\n</tr>\n<tr>\n<td align=\"left\">帮助</td>\n<td align=\"center\">弹出帮助窗口</td>\n<td align=\"right\"></td>\n</tr>\n</tbody></table>\n<h4 id=\"策略池\"><a href=\"#策略池\" class=\"headerlink\" title=\"策略池\"></a>策略池</h4><table>\n<thead>\n<tr>\n<th align=\"left\">操作位置</th>\n<th align=\"center\">热点操作</th>\n<th align=\"right\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">策略名称单元格</td>\n<td align=\"center\">鼠标指针悬停</td>\n<td align=\"right\">展开操作界面</td>\n</tr>\n<tr>\n<td align=\"left\">动作按钮</td>\n<td align=\"center\">鼠标单击</td>\n<td align=\"right\">执行选中</td>\n</tr>\n<tr>\n<td align=\"left\">动作按钮</td>\n<td align=\"center\">鼠标右击</td>\n<td align=\"right\">展开操作界面</td>\n</tr>\n</tbody></table>\n<h4 id=\"消息栏\"><a href=\"#消息栏\" class=\"headerlink\" title=\"消息栏\"></a>消息栏</h4><p>分“成交”、“错误”、“日志”三个模块，选择相应模块显示对应内容</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">日志</th>\n<th align=\"center\">错误</th>\n<th align=\"center\">成交</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">时间、内容、接口</td>\n<td align=\"center\">时间、错误代码、错误信息、接口</td>\n<td align=\"center\">成交编号、委托编号、合约代码、名称、方向、开平、价格、成交量、成交时间、接口</td>\n</tr>\n<tr>\n<td align=\"left\">显示操作日志</td>\n<td align=\"center\">显示当前操作错误信息</td>\n<td align=\"center\">显示成交单信息</td>\n</tr>\n</tbody></table>\n<h4 id=\"账户持仓信息\"><a href=\"#账户持仓信息\" class=\"headerlink\" title=\"账户持仓信息\"></a>账户持仓信息</h4><p>账户显示账户信息，并具备切换账户功能<br>当前选中账户 显示在旁label中。</p>\n<h3 id=\"界面切换\"><a href=\"#界面切换\" class=\"headerlink\" title=\"界面切换\"></a>界面切换</h3><h1 id=\"记录笔记\"><a href=\"#记录笔记\" class=\"headerlink\" title=\"记录笔记\"></a>记录笔记</h1><p>照例，先贴网址： <a href=\"http://www.qaulau.com/books/PyQt4_Tutorial/index.html\">http://www.qaulau.com/books/PyQt4_Tutorial/index.html</a></p>\n<h4 id=\"窗口设置\"><a href=\"#窗口设置\" class=\"headerlink\" title=\"窗口设置\"></a>窗口设置</h4><pre><code>resize(8, 8)\nsetWindowTitle(u&#39;标题&#39;)\n</code></pre>\n<h4 id=\"获取图标\"><a href=\"#获取图标\" class=\"headerlink\" title=\"获取图标\"></a>获取图标</h4><pre><code>def getIcon(filename):\n&quot;&quot;&quot; 获取图标 &quot;&quot;&quot;\n    fileInfo = Qt.QFileInfo(filename) \n    fileIcon = Qt.QFileIconProvider() \n    icon = QtGui.QIcon(fileIcon.icon(fileInfo)) \n    return icon  \n使用时：\nself.setWindowIcon(getIcon(&#39;../hi/app.ico&#39;))\n</code></pre>\n<hr>\n<h5 id=\"Dock\"><a href=\"#Dock\" class=\"headerlink\" title=\"Dock\"></a>Dock</h5><pre><code>widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.“dock\n标题”, QtCore.Qt.RightDockWidgetArea)\n# 方向有：  \nRightDockWidgetArea,BottomDockWidgetArea,LeftDockWidgetArea\n# 创建dock窗口\n# 可利用\nself.tabifyDockWidget(dockMarketM, dockAllDataM)\n来合并同一个方向上的dock\n\n# 此下还没看… \ndockTradeM.raise_()\ndockPositionM.raise_()\n\n# 连接组件之间的信号\nwidgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition)\n    \n# 保存默认设置\nself.saveWindowSettings(&#39;default&#39;)\n</code></pre>\n<p>其实现函数为：<br>“””创建停靠组件”””</p>\n<pre><code>def createDock(self, widgetClass, widgetName, widgetArea):\n    widget = widgetClass(self.mainEngine, self.eventEngine) \n    dock = QtGui.QDockWidget(widgetName)\n    dock.setWidget(widget)\n    dock.setObjectName(widgetName)\n    dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable)\n    self.addDockWidget(widgetArea, dock)\n    return widget, dock\n</code></pre>\n<blockquote>\n<p>再本质一点的东西为：</p>\n</blockquote>\n<pre><code>widget1 = Ha(self)\ndock = QtGui.QDockWidget(&#39;haha&#39;)\ndock.setObjectName(&#39;ha1&#39;)\ndock.setWidget(widget1)\ndock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable)\nself.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock)\n</code></pre>\n<h4 id=\"动作\"><a href=\"#动作\" class=\"headerlink\" title=\"动作\"></a>动作</h4><pre><code>exit = QtGui.QAction(QtGui.QIcon(&#39;hello.ico&#39;), &#39;exit&#39;, self)\nexit.setShortcut(&#39;Ctrl+Q&#39;)\nexit.setStatusTip(&#39;Exit application&#39;)\n# 图标、文字、快捷键、提示信息\n\nmenubar = self.menuBar()\nfile = menubar.addMenu(&#39;&amp;File&#39;)\nfile.addAction(exit)\n# 创建目录和工具栏，将动作添加进去。工具栏同理\n</code></pre>\n<h3 id=\"定位布局\"><a href=\"#定位布局\" class=\"headerlink\" title=\"定位布局\"></a>定位布局</h3><h4 id=\"绝对定位\"><a href=\"#绝对定位\" class=\"headerlink\" title=\"绝对定位\"></a>绝对定位</h4><pre><code>label1 = QtGui.QLabel(u&#39;绝对定位&#39;, self)\nlabel1.move(15, 60)\n# 创建、移动到显示位置\n</code></pre>\n<h4 id=\"框布局-及-布局元素平均分布\"><a href=\"#框布局-及-布局元素平均分布\" class=\"headerlink\" title=\"框布局 及 布局元素平均分布\"></a>框布局 及 布局元素平均分布</h4><pre><code>okButton = QtGui.QPushButton(&quot;OK&quot;)\ncancelButton = QtGui.QPushButton(&quot;Cancel&quot;)\n# 创建按钮\n\nhbox = QtGui.QHBoxLayout()\nhbox.addStretch(1)\nhbox.addWidget(okButton)        # 增加组件\nhbox.addWidget(cancelButton)\n# 创建水平栏\nhbox.addStretch()   # 平均分布\n\nvbox = QtGui.QVBoxLayout()\nvbox.addStretch(1)\n# 创建竖列\n\nvbox.addLayout(hbox)\n# 将水平栏插入竖列\nself.setLayout(vbox)     \n# 显示最终竖列\n</code></pre>\n<p>注意一下add时选择对类型就好了。</p>\n<h4 id=\"组件之间连接信号\"><a href=\"#组件之间连接信号\" class=\"headerlink\" title=\"组件之间连接信号\"></a>组件之间连接信号</h4><pre><code># classA(QtGui.QTableWidget):\n#   pass\nclassA.itemDoubleClicked.connect(classB.actionFunction)\n# 这样单纯调用还是可以的，但是数据传输… 就得继续研究一下了。\n</code></pre>\n<h4 id=\"调用Windows程序\"><a href=\"#调用Windows程序\" class=\"headerlink\" title=\"调用Windows程序\"></a>调用Windows程序</h4><pre><code>import win32api\n    path = &#39;D:/vnpy-    \\\n    master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json&#39;\n    win32api.ShellExecute(0, &#39;open&#39;, &#39;notepad.exe&#39;, path, &#39;&#39;, 1)\n# 使用记事本打开此文件\n</code></pre>\n<h4 id=\"Json\"><a href=\"#Json\" class=\"headerlink\" title=\"Json\"></a>Json</h4><pre><code>with open(&#39;D:/vnpy- \\\n    master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json&#39;,\n&#39;r&#39;) as f:\nsetting = json.load(f)\nself.userID = str(setting[&#39;userID&#39;])\nself.password = str(setting[&#39;password&#39;])\n</code></pre>\n<h5 id=\"关闭事件退出提示\"><a href=\"#关闭事件退出提示\" class=\"headerlink\" title=\"关闭事件退出提示\"></a>关闭事件退出提示</h5><pre><code>def closeEvent(self, event):\n    reply = QtGui.QMessageBox.question(self, &#39;Message&#39;,&quot;Are you \nsure to quit?&quot;, QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)\nif reply == QtGui.QMessageBox.Yes:\n    event.accept()\nelse:\n    event.ignore()\n</code></pre>\n<p>函数放置位置就是主窗口类下就好。</p>\n<h5 id=\"VS2015-快捷键\"><a href=\"#VS2015-快捷键\" class=\"headerlink\" title=\"VS2015 快捷键\"></a>VS2015 快捷键</h5><pre><code>Ctrl + k    Ctrl + c        # 多行注释\nCtrl + k    Ctrl + u        # 多行取消注释\n</code></pre>\n<h5 id=\"鼠标事件\"><a href=\"#鼠标事件\" class=\"headerlink\" title=\"鼠标事件\"></a>鼠标事件</h5><p>press<br>move<br>release<br>doubleClick<br>clicked()<br>enterEvent 鼠标移入<br>leaveEvent 鼠标移出<br>回去看看具体函数</p>\n<h2 id=\"信号槽（传输额外参数）\"><a href=\"#信号槽（传输额外参数）\" class=\"headerlink\" title=\"信号槽（传输额外参数）\"></a>信号槽（传输额外参数）</h2><p>一般来说，比如一个按钮吧。 在链接点击信号与槽时<code>buttonInit[i].clicked.connect(partial(self.init, i))</code>就完事了。然而，当循环创建按钮，对应同样的槽函数，只是需要执行的变量有区别时，就需要传输额外的参数。<br>这时，方法有二：</p>\n<p>环境：</p>\n<p>python2.7.8</p>\n<p>pyqt 4.11.1</p>\n<h3 id=\"一：-使用lambda表达式\"><a href=\"#一：-使用lambda表达式\" class=\"headerlink\" title=\"一： 使用lambda表达式\"></a>一： 使用lambda表达式</h3><pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyForm</span><span class=\"hljs-params\">(QMainWindow)</span>:</span>  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(MyForm, self).__init__(parent)  \n        button1 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button2 = QPushButton(<span class=\"hljs-string\">'Button 1'</span>)  \n        button1.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">1</span>))  \n        button2.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_button(<span class=\"hljs-number\">2</span>))  \n\n        layout = QHBoxLayout()  \n        layout.addWidget(button1)  \n        layout.addWidget(button2)  \n\n        main_frame = QWidget()  \n        main_frame.setLayout(layout)  \n\n        self.setCentralWidget(main_frame)  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_button</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        print(<span class=\"hljs-string\">'Button &#123;0&#125; clicked'</span>.format(n))  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:  \n    <span class=\"hljs-keyword\">import</span> sys  \n    app = QApplication(sys.argv)  \n    form = MyForm()  \n    form.show()  \n    app.exec_()  </code></pre>\n\n<p>解释一下，on_button是怎样处理从两个按钮传来的信号。我们使用lambda传递按钮数字给槽，也可以传递任何其他东西—甚至是按钮组件本身（假如，槽打算把传递信号的按钮修改为不可用）</p>\n\n<h3 id=\"二：-使用functools里的partial函数\"><a href=\"#二：-使用functools里的partial函数\" class=\"headerlink\" title=\"二： 使用functools里的partial函数\"></a>二： 使用functools里的partial函数</h3><pre class=\"prettyprint\"><code class=\"language-python hljs \">button1.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">1</span>))  \nbutton2.clicked.connect(partial(self.on_button, <span class=\"hljs-number\">2</span>))  </code></pre>\n\n<p>《Rapid GUI Program with Python and QT》 P143例子。</p>\n\n<pre class=\"prettyprint\"><code class=\"language-python hljs \"><span class=\"hljs-keyword\">from</span> PyQt4.QtCore <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> PyQt4.QtGui <span class=\"hljs-keyword\">import</span> *  \n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> partial  \n<span class=\"hljs-keyword\">import</span> sys  \n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Bu1</span><span class=\"hljs-params\">(QWidget)</span>:</span>  \n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, parent=None)</span>:</span>  \n        super(Bu1, self).__init__(parent)  \n        <span class=\"hljs-comment\">#水平盒式布局  </span>\n        layout = QHBoxLayout()  \n        <span class=\"hljs-comment\">#显示  </span>\n        self.lbl = QLabel(<span class=\"hljs-string\">'no button is pressed'</span>)  \n        <span class=\"hljs-comment\">#循环5个按钮  </span>\n        <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> range(<span class=\"hljs-number\">5</span>):  \n            but = QPushButton(str(i))  \n            layout.addWidget(but)  \n            <span class=\"hljs-comment\">#信号和槽连接  </span>\n            but.clicked.connect(self.cliked)  \n\n        <span class=\"hljs-comment\">#使用封装，lambda  </span>\n        but = QPushButton(<span class=\"hljs-string\">'5'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(<span class=\"hljs-keyword\">lambda</span>: self.on_click(<span class=\"hljs-string\">'5'</span>))  \n        <span class=\"hljs-comment\">#使用个who变量，结果不正常，显示 False is pressed  </span>\n        <span class=\"hljs-comment\">#but.clicked.connect(lambda who=\"5\": self.on_click(who))  </span>\n\n        <span class=\"hljs-comment\">#使用封装，partial函数  </span>\n        but = QPushButton(<span class=\"hljs-string\">'6'</span>)  \n        layout.addWidget(but)  \n        but.clicked.connect(partial(self.on_click, <span class=\"hljs-string\">'6'</span>))  \n\n        layout.addWidget(self.lbl)  \n        <span class=\"hljs-comment\">#设置布局  </span>\n        self.setLayout(layout)  \n\n    <span class=\"hljs-comment\">#传递额外参数     </span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">cliked</span><span class=\"hljs-params\">(self)</span>:</span>  \n        bu = self.sender()  \n        <span class=\"hljs-keyword\">if</span> isinstance(bu, QPushButton):  \n            self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % bu.text())  \n        <span class=\"hljs-keyword\">else</span>:  \n            self.lbl.setText(<span class=\"hljs-string\">'no effect'</span>)  \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">on_click</span><span class=\"hljs-params\">(self, n)</span>:</span>  \n        self.lbl.setText(<span class=\"hljs-string\">'%s is pressed'</span> % n)  \n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">'__main__'</span>:          \n    app = QApplication(sys.argv)  \n    bu =Bu1()  \n    bu.show()  \n    app.exec_()   </code></pre>\n\n<p>三：感谢<a href=\"http://blog.csdn.net/fengyu09/article/details/39498777\">来源</a> </p>\n<hr>\n<hr>\n<hr>\n<h1 id=\"策略管理\"><a href=\"#策略管理\" class=\"headerlink\" title=\"策略管理\"></a>策略管理</h1><p>策略类，引擎，报单管理&amp;&amp;仓位管理</p>\n<h2 id=\"引擎\"><a href=\"#引擎\" class=\"headerlink\" title=\"引擎\"></a>引擎</h2><p>引擎中将策略事件有序添加到事件引擎和主引擎中。 读取setting.json 文件对策略参数以及是否启用进行配置。设定日期。<br>使用策略实例字典保存策略名与实例关系——<br>并将此字典在推送字典中与tick数据ID对应（ID对多实例。）<br>再有orderID与策略对应字典，用以推送order和trade数据<br>计数本地停止单 、 持仓缓存字典</p>\n<h2 id=\"报单管理\"><a href=\"#报单管理\" class=\"headerlink\" title=\"报单管理\"></a>报单管理</h2><h3 id=\"成交推送处理\"><a href=\"#成交推送处理\" class=\"headerlink\" title=\"成交推送处理\"></a>成交推送处理</h3><p>成交回调 - &gt; 订单ID和策略对应字典 -&gt; 计算策略持仓（根据策略方向，持仓增加交易笔数）-&gt; 更新持仓缓存数据 </p>\n<h3 id=\"报单者类\"><a href=\"#报单者类\" class=\"headerlink\" title=\"报单者类\"></a>报单者类</h3><p>单一合约订单缓存类——初始化buffer 存储字典_log策略日志存储</p>\n"},{"title":"Django的建站的(｡･･)ﾉﾞ","date":"2018-06-07T08:30:18.000Z","modified":"2018-05-28 17:30","slug":"notes/noteOfwebStation","_content":"author: Ian\n\n# Django 的一些东西\n![http server/client](http://lofrev.net/wp-content/photos/2017/04/http_logo_dpwnload.png)\n\n## 利用nginxfd反向代理解决跨域问题\n纠结了很久的跨域问题。。。。。。一直配置Django。。。。。问题重重，从配置方面这条路还没找到解决方案，如以后确认无误后就再放在这儿。告慰前面付出的种种艰辛 😓😀\n\n来自(这儿)[https://www.jb51.net/article/105786.htm]\n\n方法是： 打开`nginx`默认配置文件`/etc/nginx/sites-available/default`\n更改如下：\n```\n## demo listen 5017 proxy 5000 and 5001 ##\nserver {\n listen 5017; \n server_name a.xxx.com;\n access_log /var/log/nginx/a.access.log;\n error_log /var/log/nginx/a.error.log;\n root html;\n index index.html index.htm index.php;\n ## send request back to flask ##\n location / {\n  proxy_pass http://127.0.0.1:5000/ ; \n #Proxy Settings\n  proxy_redirect off;\n  proxy_set_header Host $host;\n  proxy_set_header X-Real-IP $remote_addr;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;\n  proxy_max_temp_file_size 0;\n  proxy_connect_timeout 90;\n  proxy_send_timeout 90;\n  proxy_read_timeout 90;\n  proxy_buffer_size 4k;\n  proxy_buffers 4 32k;\n  proxy_busy_buffers_size 64k;\n }\n location /proxy {\n  rewrite ^.+proxy/?(.*)$ /$1 break;\n  proxy_pass http://127.0.0.1:5001/ ; \n #Proxy Settings\n  proxy_redirect off;\n  proxy_set_header Host $host;\n  proxy_set_header X-Real-IP $remote_addr;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;\n  proxy_max_temp_file_size 0;\n  proxy_connect_timeout 90;\n  proxy_send_timeout 90;\n  proxy_read_timeout 90;\n  proxy_buffer_size 4k;\n  proxy_buffers 4 32k;\n  proxy_busy_buffers_size 64k;\n }\n}\n## End a.xxx.com ##\n```\n很显然，这种解决方法仅仅适用于同服务器，架设两个网站。进行跨域访问。\n所以这种东西……就很欠缺。  或者`nginx`也支持多服务器“并联”？ \n\n但这种解决方案依然不能解决两个“严格无关”的网站通信。 \n\n##### 摒弃`java`后的'欢乐'?时光?\n## Django 的前端相关\n[^_^]虽然我前端不用这个吧，但就一记录。届时估计还是回来翻Django官方文档的。\n摘一个看一个牛逼哄哄的东西：\nRemoving hardcoded URLs in templates\nRemember, when we wrote the link to a question in the polls/index.html template, the link was partially hardcoded like this\n```html\n    <li><a href=\"/polls/{{ question.id }}/\">{{ question.question_text }}</a></li>\n```\nThe problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the `\\{\\% url \\%\\}` template tag:\nThe problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the `\\{\\% url \\%\\}` template tag:\n```html\n    <li><a href=\"{% url 'detail' question.id %}\">{{ question.question_text }}</a></li>\n```\nThe way this works is by looking up the URL definition as specified in the polls.urls module. You can see exactly where the URL name of ‘detail’ is defined below:\n```html\n    # the 'name' value as called by the {% url %} template tag\n    path('<int:question_id>/', views.detail, name='detail'),\n```\n\nIf you want to change the URL of the polls detail view to something else, perhaps to something like polls/specifics/12/ instead of doing it in the template (or templates) you would change it in polls/urls.py:\n```html\n    # added the word 'specifics'\n    path('specifics/<int:question_id>/', views.detail, name='detail'),\n```\n##### Namespacing URL names\nThe answer is to add namespaces to your URLconf. In the polls/urls.py file, go ahead and add an app_name to set the application namespace:\n```html\n    from django.urls import path\n    \n    from . import views\n    \n    app_name = 'polls'\n    urlpatterns = [\n        path('', views.index, name='index'),\n        path('<int:question_id>/', views.detail, name='detail'),\n        path('<int:question_id>/results/', views.results, name='results'),\n        path('<int:question_id>/vote/', views.vote, name='vote'),\n    ]\n```\nChange your polls/index.html template from:\npolls/templates/polls/index.html¶\n```html\n    <li><a href=\"{% url 'detail' question.id %}\">{{ question.question_text }}</a></li>\n```\n\nto point at the namespaced detail view:\npolls/templates/polls/index.html¶\n```html\n    <li><a href=\"{% url 'polls:detail' question.id %}\">{{ question.question_text }}</a></li>\n```\n\n\n### 版本\n其中，很令人头疼的便是版本。 如果遇到什么莫名其妙的错，请查看是否是版本的原因。\n这里的版本原因并不☞一些人说的库依赖严重，好像开发者版本更迭不考虑兼容——或者说居然勤奋的接口重换那般严重。\n此处仅仅☞在运行新版本时否个方法时，或许会莫名其妙引发一个早已摒弃的函数错误。这时候就可能是在折腾版本是导致有的不同版本有文件残留。在运行时莫名其妙的被`import`了然后它有调取其他东西，但是找不到的…  \n\n这时候轻则`pip uninstall` 重则环境重建。所以可见虚拟环境还是挺有用的嘛——\n\n### MVC\n全名： `Model` 、`View`、`Controller`。模型，视图，控制器这种功能分离的软件设计规范。所以它是通用的…不要和爪哇捆绑，搞得和某个神奇技术一般…   (⊙﹏⊙)\n\n---\n\n## 简介\n在安装之后，使用`django-admin startproject `+名字来初始化一个工程。   对比到`python`中就是创建好了文档目录，还在文件中写入相关框架代码，以此支持运行。\n\n### 试一下?\n`python manage.py runserver`\n便可开启服务器，这时候访问相应端口，就一个欢迎界面，提示嗯~ o(*￣▽￣*)o，你能开跑了。\n#### 再试一下？\n在11版本中有`\\admin`地址可以访问，访问之后便是一个登陆界面.<font color=#ef0000>但</font>,并不知道用户名和密码啊~   emm… 不过好处是能看到这个页面至少保证了`django`在`render`一个`.html`页面时是正常的。而之前说的<font color=#9e0000>老版本残留</font>就会导致`render`时出错。\n\n### 结构\n根目录下，'项目名文件'是项目容器😰\n`manage.py` 命令行工具，emm 类似于`python click库`的命令行程序，使用参数干不同的事情。\n进入到项目容器中，其中`settings.py`顾名思义\n`urls.py`同上，管理各个`url`通往哪里\n`wsgl.py`某个兼容啥，现在不用管…\n\n### 得知结构之后\n然后就能\n1. 在`urls.py`里愉快的添加各个功能url。这里面就一个urlpatterns列表，使用`djangol.conf.urls.url`方法来配置。\n不过其对应的执行函数都需要一个`request`来接受请求数据。 `return`回一个页面~ 现在用到的有`django,shortcuts.render 及 render_to_response`出来的，以及`django.http.HttpResponse`出来的东西。\n\n2. 嗯…… `ulr` 链接的执行方法详情就放在新创建的`view.py`中管理。\n\n3. 而在`view`中需要渲染的html文件则放置在根目录新创建的`templates`文件夹中。通过在`setting.py`中的'TEMPLATES'列表中的不知名字典(因为它确实没取名啊😔)de`DIRS`元素来指路。\n\n### 这下可以很厉害了\n进而进行数据库配置—— 还在`setting.py`中的'DATABASES'来指路。\n但Django规定要使用模型，就要创建一个爱怕怕`app`：\n```shell\ndjango-admin startapp TestModel 🦑\n```\n再将此爱怕怕领到`setting.py`中`NSTALLED_APPS`中签一下到。\n随后在`TestModel`下的`models`中创建继承于`django.db.models.Model`的数据类，然后使用隶属于`models`下的方法来制定数据类型eg:\n```python \nname = models.CharField(max_length=20)\n```\n> 毕竟不能直接通过Python的自由类嘛… 然后也肯定不能通过python的制定类型… 毕竟python数据类型和MySQL天差地别。\n\n<font color=a00070>最后</font>\n再回到命令行中使用\n```shell\npython manage.py migrate        //创建表结构\npython manage.py makemigrations //通知更改\npython manage.py testModel      // 创建表结构 😲❓\n正式拉入编制之后就能用了。\n```\n2019年1月23日\n```\n- Change your models(in *models.py*)\n- Run *python manage.py makemigrations* to create migration for those changes\n- Run *python manage.py migrate* to apply those changes to the database\n```\nOf courses, If Null Run *python manage.py migrate* can make a models.py whitch has nothings.\n\n#### 那么这个数据库怎么操作呢？\n自然是到`urls.py`中添加🔗链接到方法的路\n再到容器里面添加t`estdb.py`来说明方法详细。\n##### 增删改查\n```python \n实例化类\n直接.save()即保存\n未实例化类，all标识查找全部\n.objects.filter(填写删选条件)\n.objects.get(获取)\n.order_by(排序条件)\n更改则是将查出来的东西直接修改.update(修改东西)\n再.save保存\n删除便是.delete()\n``.\n差不多了  之后的详细再随情况更新。\n\n### 那么数据库表多了怎么一键生成对应类呢？\n```shell\npython manage.py inspectdb  //自动生成models模型文件\npython manage.py inspectdb > app/models.py      //假设有了名为'app'的爱怕怕\n// 老一套\npython manage.py makemigrations\npython manage.py migrate\n```\n但是会将之前`models.py`中的东西删掉… 还会把数据库中的表名重命名… 按它的规矩来生成，嗯…其实也🆗的。\n\n\n\n## 我爱Java 2018年6月24日16点40分的我由衷的写到\n在`MySQL`中读取`blob`存储的字段时，使用`BinaryField`不可使用其逆向生成的模型读取方式。当然，对照表如下\n```md\n            'AutoField': 'integer AUTO_INCREMENT',\n            'BigAutoField': 'bigint AUTO_INCREMENT',\n            'BinaryField': 'longblob',\n            'BooleanField': 'bool',\n            'CharField': 'varchar(%(max_length)s)',\n            'CommaSeparatedIntegerField': 'varchar(%(max_length)s)',\n            'DateField': 'date',\n            'DateTimeField': 'datetime',\n            'DecimalField': 'numeric(%(max_digits)s, %(decimal_places)s)',\n            'DurationField': 'bigint',\n            'FileField': 'varchar(%(max_length)s)',\n            'FilePathField': 'varchar(%(max_length)s)',\n            'FloatField': 'double precision',\n            'IntegerField': 'integer',\n            'BigIntegerField': 'bigint',\n            'IPAddressField': 'char(15)',\n            'GenericIPAddressField': 'char(39)',\n            'NullBooleanField': 'bool',\n            'OneToOneField': 'integer',\n            'PositiveIntegerField': 'integer UNSIGNED',\n            'PositiveSmallIntegerField': 'smallint UNSIGNED',\n            'SlugField': 'varchar(%(max_length)s)',\n            'SmallIntegerField': 'smallint',\n            'TextField': 'longtext',\n            'TimeField': 'time',\n            'UUIDField': 'char(32)',\n\n```\n以上是一部分，具体点[这里](https://www.cnblogs.com/sun1994/p/8566988.html)\n##### 模型字段名称\n在逆向生成时，我遇到过一次将数据库名修改的先例，不过后来似乎没有修改过。  然后就是驼峰命名法的字段可能emm也是因为此我才开始写这些信息，就是，驼峰命名法的字段可能在模型字段中为全小写。  还有就是`Django`莫名其妙的的编码错误，真的是一分钟编程，一小时修改编码…而且调试起来真的…我目前的调试方式极为原始，所以感觉真的`不想编程`嗯… \n\n#### Django 返回文件下载\n```py\n    def readFile(fn, buf_size=262144):  # 大文件下载，设定缓存大小\n        f = open(fn, \"rb\")\n        while True:  # 循环读取\n            c = f.read(buf_size)\n            if c:\n                yield c\n            else:\n                break\n        f.close()\n    response = HttpResponse(readFile(filePath), content_type='APPLICATION/OCTET-STREAM')  # 设定文件头，这种设定可以让任意文件都能正确下载，而且已知文本文件不是本地打开\n    fileName = 'haya'\n    fileType = '.docx'\n    response['Content-Disposition'] = 'attachment; filename=' + fileName.encode('utf-8') + fileType.encode('utf-8')  # 设定传输给客户端的文件名称\n    response['Content-Length'] = os.path.getsize(filePath)  # 传输给客户端的文件大小\n    return response \n```\n\n#### Python Docx编辑\n##### 替换\n```docx\n    在`.docx`文件中将需要替换的位置 使用变量站位，写法{{ placheholdParaName }}\n```\n<font color=red>使用文件时，只能写做`{{placheholdParaName}}`不能有空格…另外`docx`使用`docx`中的`Document`读入即可</font>\n```py\n    tpl = DocxTemplate(self.prjRootPath + '/word_template/' + \"word_template.docx\")\n    sub1 = tpl.new_subdoc()\n    sub1.subdocx = Document(temPath + 'sub1_bond.docx')\n    subContext['sub1'] = sub1\n```\n```md\n    上述中，只能写作……难道是因为使用{{someThing}}这种写法而隐藏了？！！\n    那么，今后写彩带注释岂不是不需要使用^_^而直接使用双花括号的写法就能直接隐藏了么(⊙o⊙ ) 　凄い\n```\n**Py中**：\n```py\n    from docxtpl import DocxTemplate, InlineImage\n    from docx.shared import Mm, Inches, Pt\n    doc = DocxTemplate(\"my_word_template.docx\")\n    myimage = InlineImage(doc,\n    'C:/Users/GuPengxiang/Pictures/ha.jpg',width=Mm(20))\n    context = { 'fundName' : u'这里是基金名称', 'stars':u'五星级琉璃六', '\n    bench': u'对比基金', 'income': u'12', 'bb': u'0.1%', 'image0' : myimage}\n    doc.render(context)\n    doc.save(\"generated_doc.docx\")\n```\n#### 生成echarts图表图片\n##### 环境\n```bash\n# 更新软件列表 & 更新软件\nsudo apt-get update    \nsudo apt-get upgrade\n# 下载包\npip install pyecharts-snapshot\nwget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz\n# 解压\ntar -xzvf phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz\n# 进入路径\ncd phantomjs-2.5.0-beta-ubuntu-xenial/bin\n# 赋予权限\nchmod +x phantomjs\n# 查看版本号\nphantomjs -v  \n# 若显示版本号，如 2.1.1 则生效\n```\n##### 生成图片\n```py\nfrom pyecharts import Line, Pie, Grid\nfrom pyecharts_snapshot.main import make_a_snapshot\n\nattr = [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\nv1 = [5, 20, 36, 10, 10, 100]\nv2 = [55, 60, 16, 20, 15, 80]\nline = Line(\"折线图示例\")\nline.add(\"商家A\", attr, v1, mark_point=[\"average\"])\nline.add(\"商家B\", attr, v2, is_smooth=True, mark_line=[\"max\", \"average\"])\nline.render('test.html')\n\nmake_a_snapshot('test.html', 'test.pdf')\n# 或者直接生成\nline.render('test.png')\n```\n<font color= #f0aabb>在生成图片时，插件包文件源码中有Log，但却是print出来的，而在部署环境中不允许出现print，所以…… 得在包源码中将之屏蔽</font>\n\n##### 连续生成图片\n用以上方法来生成图片是…很慢的🐢⬅这个速度。但可以通过使用为渲染创建一个默认配置环境来避免多次生成环境配置。所以——  具体来看`pyecharts`中的[高级说明](http://pyecharts.org/#/zh-cn/prepare)🕶\n```py\n    from pyecharts import Bar, Line\n    from pyecharts.engine import create_default_environment\n    \n    bar = Bar(\"我的第一个图表\", \"这里是副标题\")\n    bar.add(\"服装\", [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"], [5, 20, 36, 10, 75, 90])\n    \n    line = Line(\"我的第一个图表\", \"这里是副标题\")\n    line.add(\"服装\", [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"], [5, 20, 36, 10, 75, 90])\n    \n    env = create_default_environment(\"html\")\n    # 为渲染创建一个默认配置环境\n    # create_default_environment(filet_ype)\n    # file_type: 'html', 'svg', 'png', 'jpeg', 'gif' or 'pdf'\n    \n    env.render_chart_to_file(bar, path='bar.html')\n    env.render_chart_to_file(line, path='line.html')\n```\n\n(*￣▽￣*)o   如上\n### 注意\n    在生成报表时， 由于采用的是浏览器截图的方式，在使用`phantomjs`时会自动判断图片是否加载完成（echarts在显示图表之前是有一段动画的……）然后再`pyecharts`中并没有关闭动画的接口，而echarts是有的。 但毕竟`echarts`是在做翻译，所以只要在\"Chart\"基类中，将`animation=False`就可以了。 我改的时候在`chart.py`文件的29行，def __init__中。\n\n\n## SSl加密，https配置\n虽然就配置过之后显得操作很简单，而且也很明显，但就配置之初着实还是费了一些功夫的。或许是因为大而全的东西懒得看，而网上搜索到的粘贴复制之词又太过片面，或许大家写的时候也就当作日记来写的，本就没准备让别人去参考。所以再加上搜索的时候俺表述词不达意，所以总是很曲折（呵，用谷歌搜外文网就不存在这问题，前面就谦虚一下🙃）\n### 之前写的文档\n1 ssl加密部署步骤说明文档\n一．申请ssl证书\n1.生成csr文件，可使用openssl工具生成\n(1)例:`openssl genrsa -des3 -out server.key 1024`   生成服务器key文件;\n(2)例:`openssl req -new -key server.key -out server.csr`    生成服务器证书请求CSR文件;\n或使用CSR文件生成工具生成(例https://www.chinassl.net/ssltools/generator-csr.html，填写信息后点击生成CSR文件即可)\n（CSR文件中包括组织部门、国家地区、算法、以及邮箱和域名等信息）\n2.申请/购买HTTPS证书， 填写与上述相同的信息，验证类型选择DNS，CSR生成选择提供CSR(即提供第一步生成的CSR文件)（例：在阿里云或腾讯等地，本文档撰写时是通过https://freessl.org/ 免费申请而来（一年有效期，单域名，））\n二、验证域名所属关系\n1.到域名管理控制台中选择云解析DNS, 选择域名，添加“记录”，记录类型选择‘TXT’，主机记录及记录值填写证书申请方提供内容。\n2.等待1分钟或10分钟后，等待生效\n3.点击验证\n三、证书下载\n验证通过后，下载网站提供证书，含（CA证书、服务器证书、服务器私钥）\n四、Apache2部署开启SSL加密\n更改httpd.conf 文件设置：\n1.Listen {内网IP}:80\n2.开启models\n(1)LoadModule ssl_module modules/mod_ssl.so\n(2)LoadModule socache_shmcb_module modules/mod_socache_shmcb.so\n(3)LoadModule rewrite_module modules/mod_rewrite.so\n(4)ServerName {与域名相同}（未测试是否必须相同）\n3.http跳转到https:\n(1)RewriteEngine on\n(2)RewriteCond %{SERVER_PORT} !^443$\n(3)RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R]\n更改extra/httpd-ssl.conf 文件设置\n1.Listen 443\n2.ServerName www.lejinrong.cn\n3.ServerAdmin admin@lejinrong\n4.SSLCertificateFile \"c:/Apache24/conf/ssl/server.crt\"\n5.SSLCertificateKeyFile \"c:/Apache24/conf/ssl/server.key\"\n第四步中crt文件指向服务器证书文件， 第五步中.key文件指向私钥文件\n(其余部署方案或许有所不同，会使用CA证书)\n\n\n1.1 注意： 确保服务器中防火墙入站规则中添加了80端口和443端口。\n\n\n\n\n2 附：\n2.1.1 本地测试方案：\n\n环境：wamp Apache 2.4.9\n前言：wamp安装好后，默认的只有http服务，以下配置启用https服务\n条件：在Apache安装目录下需要有一下文件\n         [Apache安装目录]/modules/ mod_ssl.so\n         [Apache安装目录]/bin/ openssl.exe, libeay32.dll, ssleay32.dll\n         [Apache安装目录]/conf/ openssl.cnf\n步骤：\n一、修改配置文件httpd.conf，去掉下面行首的#（载入ssl模块和其他配置文件）\nLoadModule socache_shmcb_module modules/mod_socache_shmcb.so\nLoadModule ssl_module modules/mod_ssl.so\nInclude conf/extra/httpd-ssl.conf\n二、认证文件生成（生成证书签发请求）\n进入Apache安装目录的bin目录下，输入cmd，进入DOS窗口，输入以下命令\nopenssl req -new -out server.csr -config ../conf/openssl.cnf\n回车后提示输入密码和确认密码，本机输入：keypasswd\n后面会提示输入一系列的参数\n......\nCountry Name (2 letter code) [AU]: （要求输入国家缩写，只能输入2个字母，这里输入cn）\nState or Province Name (full name) [Some-State]: （要求输入州名或省名，这里输入hubei）\nLocality Name (eg, city) []: （要求输入城市名，这里输入wuhan）\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]: （要求输入组织名或公司名，这里输入gg）\nOrganizational Unit Name (eg, section) []: （要求输入部门名，这里输入gg）\nCommon Name (eg, YOUR name) []: （要求输入服务器域名或IP地址）\nEmail Address []: （要求输入邮件地址）\nA challenge password[]:（要求输入密码）\nAn optional company name[]（要求输入公司别名，这里输入ggs）\n.....\n生成私钥，在DOS窗口下的Apache的bin目录下输入命令\nopenssl rsa -in privkey.pem -out server.key\n然后要求输入之前 privkey.pem 的密码（keypasswd)\n创建证书，输入命令\nopenssl x509 -in server.csr -out server.crt -req -signkey server.key -days 8000\n回车后，显示创建成功，有效期为 8000 天\n将Apache的bin目录下的server.csr、server.crt、server.key拷贝到Apache安装目录下的conf\\ssl，若没有ssl文件则创建\n打开Apache安装目录conf/extra/httpd-ssl.conf文件，设置SSLCertificateFile和SSLCertificateKeyFile\nSSLCertificateFile \"C:/apache2.4.9/conf/ssl/server.crt\"\nSSLCertificateKeyFile \"C:/apache2.4.9/conf/ssl/server.key\"\n最后重启Apache服务，HTTPS服务的默认监听端口为443\n \n随后在本机中安装`server.crt`至`收信人的根证书颁发机构`即可不再提示证书无效\n注意：在重启Apache时，若Apache服务启动不起来，则在Apache安装目录的bin目录下，输入httpd –t，可以根据提示来修改你的配置文件\n### 附\n现在是2018年8月25日16点01分 所以上面其实是一个月前写给别人看的文档。\n在我搜的时候由于先在本地配置，尔后再网上找CA发证书，自我感觉这个步骤没有什么问题。就今天在\n\n#### Apache配置双网站/https\n的时候，也是这样，先在本地通过不同端口测试，确定方案之后再在服务器上通过`ServerName`进行区分。\n也就是启用`httpd-vhosts.conf`之后，再\n```md\n# Virtual Hosts\n#\n# Required modules: mod_log_config\n\n# If you want to maintain multiple domains/hostnames on your\n# machine you can setup VirtualHost containers for them. Most configurations\n# use only name-based virtual hosts so the server doesn't need to worry about\n# IP addresses. This is indicated by the asterisks in the directives below.\n#\n# Please see the documentation at \n# <URL:http://httpd.apache.org/docs/2.4/vhosts/>\n# for further details before you try to setup virtual hosts.\n#\n# You may use the command line option '-S' to verify your virtual host\n# configuration.\n\n#\n# VirtualHost example:\n# Almost any Apache directive may go into a VirtualHost container.\n# The first VirtualHost section is used for all requests that do not\n# match a ServerName or ServerAlias in any <VirtualHost> block.\n#\n<VirtualHost 192.168.1.81:80>\n    ServerName www.lejinrong.cn\n    ServerAlias www.lejinrong.cn\n    ServerAdmin www.lejinrong.cn\n    #指定myweb项目的wsgi.py配置文件路径  \n    WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py\n    #配置静态变量路径\n    Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/\n    <Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static>  \n        Allow from all\n    </Directory>\n    DocumentRoot \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\"\n    <Directory \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\">  \n        Options Indexes FollowSymLinks\n        AllowOverride None\n    </Directory>\n    RewriteEngine on\n    RewriteCond %{SERVER_PORT} !^400$\n    RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R]\n    ErrorLog \"logs/dummy-host.example.com-error.log\"\n    CustomLog \"logs/dummy-host.example.com-access.log\" common\n</VirtualHost>\n\n<VirtualHost 192.168.1.81:8880>\n    ServerName lejinrong.cn\n    ServerAlias vip.lejinrong.cn\n    ServerAdmin vip.lejinrong.cn\n    #指定myweb项目的wsgi.py配置文件路径  \n    WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py\n    #配置静态变量路径\n    Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/\n    <Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static>\n        Allow from all\n    </Directory>\n    DocumentRoot \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\"\n    <Directory \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\">  \n        Options Indexes FollowSymLinks\n        AllowOverride None\n    </Directory>\n    ErrorLog \"logs/dummy-host.example.com-error.log\"\n    CustomLog \"logs/dummy-host.example.com-access.log\" common\n    RewriteEngine on\n    RewriteCond %{SERVER_PORT} !^443$\n    RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R]\n</VirtualHost>\n```\n同理，在`httpd-ssl.conf`中也是通过配置不同`VirtualHost`进行区分\n```md\n#\n# This is the Apache server configuration file providing SSL support.\n# It contains the configuration directives to instruct the server how to\n# serve pages over an https connection. For detailed information about these \n# directives see <URL:http://httpd.apache.org/docs/2.4/mod/mod_ssl.html>\n# \n# Do NOT simply read the instructions in here without understanding\n# what they do.  They're here only as hints or reminders.  If you are unsure\n# consult the online docs. You have been warned.  \n#\n# Required modules: mod_log_config, mod_setenvif, mod_ssl,\n#          socache_shmcb_module (for default value of SSLSessionCache)\n\n#\n# Pseudo Random Number Generator (PRNG):\n# Configure one or more sources to seed the PRNG of the SSL library.\n# The seed data should be of good random quality.\n# WARNING! On some platforms /dev/random blocks if not enough entropy\n# is available. This means you then cannot use the /dev/random device\n# because it would lead to very long connection times (as long as\n# it requires to make more entropy available). But usually those\n# platforms additionally provide a /dev/urandom device which doesn't\n# block. So, if available, use this one instead. Read the mod_ssl User\n# Manual for more details.\n#\n#SSLRandomSeed startup file:/dev/random  512\n#SSLRandomSeed startup file:/dev/urandom 512\n#SSLRandomSeed connect file:/dev/random  512\n#SSLRandomSeed connect file:/dev/urandom 512\n\n\n#\n# When we also provide SSL we have to listen to the \n# standard HTTP port (see above) and to the HTTPS port\n#\nListen 443\nListen 400\n#ServerName www.lejinrong.cn\n##\n##  SSL Global Context\n##\n##  All SSL configuration in this context applies both to\n##  the main server and all SSL-enabled virtual hosts.\n##\n\n#   SSL Cipher Suite:\n#   List the ciphers that the client is permitted to negotiate,\n#   and that httpd will negotiate as the client of a proxied server.\n#   See the OpenSSL documentation for a complete list of ciphers, and\n#   ensure these follow appropriate best practices for this deployment.\n#   httpd 2.2.30, 2.4.13 and later force-disable aNULL, eNULL and EXP ciphers,\n#   while OpenSSL disabled these by default in 0.9.8zf/1.0.0r/1.0.1m/1.0.2a.\nSSLCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES\nSSLProxyCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES\n\n#  By the end of 2016, only TLSv1.2 ciphers should remain in use.\n#  Older ciphers should be disallowed as soon as possible, while the\n#  kRSA ciphers do not offer forward secrecy.  These changes inhibit\n#  older clients (such as IE6 SP2 or IE8 on Windows XP, or other legacy\n#  non-browser tooling) from successfully connecting.  \n#\n#  To restrict mod_ssl to use only TLSv1.2 ciphers, and disable\n#  those protocols which do not support forward secrecy, replace\n#  the SSLCipherSuite and SSLProxyCipherSuite directives above with\n#  the following two directives, as soon as practical.\n# SSLCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA\n# SSLProxyCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA\n\n#   User agents such as web browsers are not configured for the user's\n#   own preference of either security or performance, therefore this\n#   must be the prerogative of the web server administrator who manages\n#   cpu load versus confidentiality, so enforce the server's cipher order.\nSSLHonorCipherOrder on \n\n#   SSL Protocol support:\n#   List the protocol versions which clients are allowed to connect with.\n#   Disable SSLv3 by default (cf. RFC 7525 3.1.1).  TLSv1 (1.0) should be\n#   disabled as quickly as practical.  By the end of 2016, only the TLSv1.2\n#   protocol or later should remain in use.\nSSLProtocol all -SSLv3\nSSLProxyProtocol all -SSLv3\n\n#   Pass Phrase Dialog:\n#   Configure the pass phrase gathering process.\n#   The filtering dialog program (`builtin' is an internal\n#   terminal dialog) has to provide the pass phrase on stdout.\nSSLPassPhraseDialog  builtin\n\n#   Inter-Process Session Cache:\n#   Configure the SSL Session Cache: First the mechanism \n#   to use and second the expiring timeout (in seconds).\n#SSLSessionCache         \"dbm:c:/Apache24/logs/ssl_scache\"\nSSLSessionCache        \"shmcb:c:/Apache24/logs/ssl_scache(512000)\"\nSSLSessionCacheTimeout  300\n\n#   OCSP Stapling (requires OpenSSL 0.9.8h or later)\n#\n#   This feature is disabled by default and requires at least\n#   the two directives SSLUseStapling and SSLStaplingCache.\n#   Refer to the documentation on OCSP Stapling in the SSL/TLS\n#   How-To for more information.\n#\n#   Enable stapling for all SSL-enabled servers:\n#SSLUseStapling On\n\n#   Define a relatively small cache for OCSP Stapling using\n#   the same mechanism that is used for the SSL session cache\n#   above.  If stapling is used with more than a few certificates,\n#   the size may need to be increased.  (AH01929 will be logged.)\n#SSLStaplingCache \"shmcb:c:/Apache24/logs/ssl_stapling(32768)\"\n\n#   Seconds before valid OCSP responses are expired from the cache\n#SSLStaplingStandardCacheTimeout 3600\n\n#   Seconds before invalid OCSP responses are expired from the cache\n#SSLStaplingErrorCacheTimeout 600\n\n##\n## SSL Virtual Host Context\n##\n\n<VirtualHost 192.168.1.81:400>\n\n#   General setup for the virtual host\nDocumentRoot \"c:/Apache24/htdocs\"\nServerName www.lejinrong.cn\nServerAdmin admin@lejinrong.cn\nErrorLog \"c:/Apache24/logs/error.log\"\nTransferLog \"c:/Apache24/logs/access.log\"\n\n#   SSL Engine Switch:\n#   Enable/Disable SSL for this virtual host.\nSSLEngine on\n\n#   Server Certificate:\n#   Point SSLCertificateFile at a PEM encoded certificate.  If\n#   the certificate is encrypted, then you will be prompted for a\n#   pass phrase.  Note that a kill -HUP will prompt again.  Keep\n#   in mind that if you have both an RSA and a DSA certificate you\n#   can configure both in parallel (to also allow the use of DSA\n#   ciphers, etc.)\n#   Some ECC cipher suites (http://www.ietf.org/rfc/rfc4492.txt)\n#   require an ECC certificate which can also be configured in\n#   parallel.\nSSLCertificateFile \"c:/Apache24/conf/ssl/server.crt\"\n#SSLCertificateFile \"c:/Apache24/conf/server-dsa.crt\"\n#SSLCertificateFile \"c:/Apache24/conf/server-ecc.crt\"\n\n#   Server Private Key:\n#   If the key is not combined with the certificate, use this\n#   directive to point at the key file.  Keep in mind that if\n#   you've both a RSA and a DSA private key you can configure\n#   both in parallel (to also allow the use of DSA ciphers, etc.)\n#   ECC keys, when in use, can also be configured in parallel\nSSLCertificateKeyFile \"c:/Apache24/conf/ssl/server.key\"\n#SSLCertificateKeyFile \"c:/Apache24/conf/server-dsa.key\"\n#SSLCertificateKeyFile \"c:/Apache24/conf/server-ecc.key\"\n\n#   Server Certificate Chain:\n#   Point SSLCertificateChainFile at a file containing the\n#   concatenation of PEM encoded CA certificates which form the\n#   certificate chain for the server certificate. Alternatively\n#   the referenced file can be the same as SSLCertificateFile\n#   when the CA certificates are directly appended to the server\n#   certificate for convenience.\n#SSLCertificateChainFile \"c:/Apache24/conf/server-ca.crt\"\n\n#   Certificate Authority (CA):\n#   Set the CA certificate verification path where to find CA\n#   certificates for client authentication or alternatively one\n#   huge file containing all of them (file must be PEM encoded)\n#   Note: Inside SSLCACertificatePath you need hash symlinks\n#         to point to the certificate files. Use the provided\n#         Makefile to update the hash symlinks after changes.\n#SSLCACertificatePath \"c:/Apache24/conf/ssl.crt\"\n#SSLCACertificateFile \"c:/Apache24/conf/ssl.crt/ca-bundle.crt\"\n\n#   Certificate Revocation Lists (CRL):\n#   Set the CA revocation path where to find CA CRLs for client\n#   authentication or alternatively one huge file containing all\n#   of them (file must be PEM encoded).\n#   The CRL checking mode needs to be configured explicitly\n#   through SSLCARevocationCheck (defaults to \"none\" otherwise).\n#   Note: Inside SSLCARevocationPath you need hash symlinks\n#         to point to the certificate files. Use the provided\n#         Makefile to update the hash symlinks after changes.\n#SSLCARevocationPath \"c:/Apache24/conf/ssl.crl\"\n#SSLCARevocationFile \"c:/Apache24/conf/ssl.crl/ca-bundle.crl\"\n#SSLCARevocationCheck chain\n\n#   Client Authentication (Type):\n#   Client certificate verification type and depth.  Types are\n#   none, optional, require and optional_no_ca.  Depth is a\n#   number which specifies how deeply to verify the certificate\n#   issuer chain before deciding the certificate is not valid.\n#SSLVerifyClient require\n#SSLVerifyDepth  10\n\n#   TLS-SRP mutual authentication:\n#   Enable TLS-SRP and set the path to the OpenSSL SRP verifier\n#   file (containing login information for SRP user accounts). \n#   Requires OpenSSL 1.0.1 or newer. See the mod_ssl FAQ for\n#   detailed instructions on creating this file. Example:\n#   \"openssl srp -srpvfile c:/Apache24/conf/passwd.srpv -add username\"\n#SSLSRPVerifierFile \"c:/Apache24/conf/passwd.srpv\"\n\n#   Access Control:\n#   With SSLRequire you can do per-directory access control based\n#   on arbitrary complex boolean expressions containing server\n#   variable checks and other lookup directives.  The syntax is a\n#   mixture between C and Perl.  See the mod_ssl documentation\n#   for more details.\n#<Location />\n#SSLRequire (    %{SSL_CIPHER} !~ m/^(EXP|NULL)/ \\\n#            and %{SSL_CLIENT_S_DN_O} eq \"Snake Oil, Ltd.\" \\\n#            and %{SSL_CLIENT_S_DN_OU} in {\"Staff\", \"CA\", \"Dev\"} \\\n#            and %{TIME_WDAY} >= 1 and %{TIME_WDAY} <= 5 \\\n#            and %{TIME_HOUR} >= 8 and %{TIME_HOUR} <= 20       ) \\\n#           or %{REMOTE_ADDR} =~ m/^192\\.76\\.162\\.[0-9]+$/\n#</Location>\n\n#   SSL Engine Options:\n#   Set various options for the SSL engine.\n#   o FakeBasicAuth:\n#     Translate the client X.509 into a Basic Authorisation.  This means that\n#     the standard Auth/DBMAuth methods can be used for access control.  The\n#     user name is the `one line' version of the client's X.509 certificate.\n#     Note that no password is obtained from the user. Every entry in the user\n#     file needs this password: `xxj31ZMTZzkVA'.\n#   o ExportCertData:\n#     This exports two additional environment variables: SSL_CLIENT_CERT and\n#     SSL_SERVER_CERT. These contain the PEM-encoded certificates of the\n#     server (always existing) and the client (only existing when client\n#     authentication is used). This can be used to import the certificates\n#     into CGI scripts.\n#   o StdEnvVars:\n#     This exports the standard SSL/TLS related `SSL_*' environment variables.\n#     Per default this exportation is switched off for performance reasons,\n#     because the extraction step is an expensive operation and is usually\n#     useless for serving static content. So one usually enables the\n#     exportation for CGI and SSI requests only.\n#   o StrictRequire:\n#     This denies access when \"SSLRequireSSL\" or \"SSLRequire\" applied even\n#     under a \"Satisfy any\" situation, i.e. when it applies access is denied\n#     and no other module can change it.\n#   o OptRenegotiate:\n#     This enables optimized SSL connection renegotiation handling when SSL\n#     directives are used in per-directory context. \n#SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire\n<FilesMatch \"\\.(cgi|shtml|phtml|php)$\">\n    SSLOptions +StdEnvVars\n</FilesMatch>\n<Directory \"c:/Apache24/cgi-bin\">\n    SSLOptions +StdEnvVars\n</Directory>\n\n#   SSL Protocol Adjustments:\n#   The safe and default but still SSL/TLS standard compliant shutdown\n#   approach is that mod_ssl sends the close notify alert but doesn't wait for\n#   the close notify alert from client. When you need a different shutdown\n#   approach you can use one of the following variables:\n#   o ssl-unclean-shutdown:\n#     This forces an unclean shutdown when the connection is closed, i.e. no\n#     SSL close notify alert is sent or allowed to be received.  This violates\n#     the SSL/TLS standard but is needed for some brain-dead browsers. Use\n#     this when you receive I/O errors because of the standard approach where\n#     mod_ssl sends the close notify alert.\n#   o ssl-accurate-shutdown:\n#     This forces an accurate shutdown when the connection is closed, i.e. a\n#     SSL close notify alert is send and mod_ssl waits for the close notify\n#     alert of the client. This is 100% SSL/TLS standard compliant, but in\n#     practice often causes hanging connections with brain-dead browsers. Use\n#     this only for browsers where you know that their SSL implementation\n#     works correctly. \n#   Notice: Most problems of broken clients are also related to the HTTP\n#   keep-alive facility, so you usually additionally want to disable\n#   keep-alive for those clients, too. Use variable \"nokeepalive\" for this.\n#   Similarly, one has to force some clients to use HTTP/1.0 to workaround\n#   their broken HTTP/1.1 implementation. Use variables \"downgrade-1.0\" and\n#   \"force-response-1.0\" for this.\nBrowserMatch \"MSIE [2-5]\" \\\n         nokeepalive ssl-unclean-shutdown \\\n         downgrade-1.0 force-response-1.0\n\n#   Per-Server Logging:\n#   The home of a custom SSL log file. Use this when you want a\n#   compact non-error SSL logfile on a virtual host basis.\nCustomLog \"c:/Apache24/logs/ssl_request.log\" \\\n          \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\"\n#指定myweb项目的wsgi.py配置文件路径  \nWSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py\n#配置静态变量路径\nAlias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/\n<Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static>  \n    Allow from all\n</Directory>\nDocumentRoot \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\"\n<Directory \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\">  \n    Options Indexes FollowSymLinks\n    AllowOverride None\n</Directory>\n\n</VirtualHost>\n\n<VirtualHost 192.168.1.81:443>\nDocumentRoot \"c:/Apache24/htdocs\"\nServerName www.lejinrong.cn\nServerAdmin admin@lejinrong.cn\nErrorLog \"c:/Apache24/logs/error.log\"\nTransferLog \"c:/Apache24/logs/access.log\"\nSSLEngine on\nSSLCertificateFile \"c:/Apache24/conf/ssl/server.crt\"\nSSLCertificateKeyFile \"c:/Apache24/conf/ssl/server.key\"\n<FilesMatch \"\\.(cgi|shtml|phtml|php)$\">\n    SSLOptions +StdEnvVars\n</FilesMatch>\n<Directory \"c:/Apache24/cgi-bin\">\n    SSLOptions +StdEnvVars\n</Directory>\nBrowserMatch \"MSIE [2-5]\" \\\n         nokeepalive ssl-unclean-shutdown \\\n         downgrade-1.0 force-response-1.0\nCustomLog \"c:/Apache24/logs/ssl_request.log\" \\\n          \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\"\nWSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py\nAlias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/\n<Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static>  \n    Allow from all\n</Directory>\nDocumentRoot \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\"\n<Directory \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\">  \n    Options Indexes FollowSymLinks\n    AllowOverride None\n</Directory>\n</VirtualHost>\n```\n但其实 都写了跳转，所以在`httpd-vhosts.conf`文件中的项目以及静态资源路径指定就不用指定了，只不过我懒得删…\n还有一个坑点就是 原本有一个指定项目路径以及python环境的语句：\n```md\n#WSGIPythonPath \"C:/Python27/Lib;C:/Python27/Lib/site-packages;C:/Python27/DLLs\"\n#WSGIPythonPath D:/FundEvaluationSystem_svn1\n#WSGIPythonHome \"C:/Python27\"\n```\n我不知道按照上下这两种为什么会出问题，但网上那些人不会。但中间那个是用来指向项目路径的一个取巧的办法。哦因为wsgi或许我已经在别处制订过了。所以只要在`wsgi.py`中声明`sys.path.append('D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2')`就可以将项目包括进来，而不需要通过 第二句那个制定`python`路径的东西。而用那个，会导致资源只有声明的项目1会被加载，而项目2的资源就不会声明，而将那三句话注释，只要分别在'wsgi.py'中声明项目资源，而在`.conf`文件中指向'wsgi.py'文件就可以如数加载了。\n\n(⊙﹏⊙)语序  逻辑混乱之后不加班了再整理吧~~😭\n\n\n# 前端 Vue\n`vue`的使用方式可以通过`html`页面直接引用，也能直接用`vue-cil`创建项目。 网上人称`vue`脚手架？晓不大得\n而我这里自然说的就是 `vue-cil`即 通过`vue init webpack <prjName>`来生成的项目喽\n\n系统的创建以及介绍之后使用再熟一些再写，现在先记一些零散的东西。 [^_^]2018年9月18日 21点36分\n\n### 路由配置登陆访问\n```vue\n    在`router/index.js`中：\n    \n    {\n      path: '/',\n      // 首页\n      name: 'Main',\n      component: Main,\n      meta: {\n        requireAuth: true,  // 添加该字段，表示进入这个路由是需要登录的\n      }\n    },\n```\n\n","source":"_posts/notes/noteOfwebStation.md","raw":"---\ntitle: Django的建站的(｡･･)ﾉﾞ\ndate: 2018-06-07 16:30:18\nmodified: 2018-05-28 17:30\ncategory: [web, 全栈笔记]\ntags: [django, missjava, vue, apache, ajax]\nslug: notesDjango\n---\nauthor: Ian\n\n# Django 的一些东西\n![http server/client](http://lofrev.net/wp-content/photos/2017/04/http_logo_dpwnload.png)\n\n## 利用nginxfd反向代理解决跨域问题\n纠结了很久的跨域问题。。。。。。一直配置Django。。。。。问题重重，从配置方面这条路还没找到解决方案，如以后确认无误后就再放在这儿。告慰前面付出的种种艰辛 😓😀\n\n来自(这儿)[https://www.jb51.net/article/105786.htm]\n\n方法是： 打开`nginx`默认配置文件`/etc/nginx/sites-available/default`\n更改如下：\n```\n## demo listen 5017 proxy 5000 and 5001 ##\nserver {\n listen 5017; \n server_name a.xxx.com;\n access_log /var/log/nginx/a.access.log;\n error_log /var/log/nginx/a.error.log;\n root html;\n index index.html index.htm index.php;\n ## send request back to flask ##\n location / {\n  proxy_pass http://127.0.0.1:5000/ ; \n #Proxy Settings\n  proxy_redirect off;\n  proxy_set_header Host $host;\n  proxy_set_header X-Real-IP $remote_addr;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;\n  proxy_max_temp_file_size 0;\n  proxy_connect_timeout 90;\n  proxy_send_timeout 90;\n  proxy_read_timeout 90;\n  proxy_buffer_size 4k;\n  proxy_buffers 4 32k;\n  proxy_busy_buffers_size 64k;\n }\n location /proxy {\n  rewrite ^.+proxy/?(.*)$ /$1 break;\n  proxy_pass http://127.0.0.1:5001/ ; \n #Proxy Settings\n  proxy_redirect off;\n  proxy_set_header Host $host;\n  proxy_set_header X-Real-IP $remote_addr;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;\n  proxy_max_temp_file_size 0;\n  proxy_connect_timeout 90;\n  proxy_send_timeout 90;\n  proxy_read_timeout 90;\n  proxy_buffer_size 4k;\n  proxy_buffers 4 32k;\n  proxy_busy_buffers_size 64k;\n }\n}\n## End a.xxx.com ##\n```\n很显然，这种解决方法仅仅适用于同服务器，架设两个网站。进行跨域访问。\n所以这种东西……就很欠缺。  或者`nginx`也支持多服务器“并联”？ \n\n但这种解决方案依然不能解决两个“严格无关”的网站通信。 \n\n##### 摒弃`java`后的'欢乐'?时光?\n## Django 的前端相关\n[^_^]虽然我前端不用这个吧，但就一记录。届时估计还是回来翻Django官方文档的。\n摘一个看一个牛逼哄哄的东西：\nRemoving hardcoded URLs in templates\nRemember, when we wrote the link to a question in the polls/index.html template, the link was partially hardcoded like this\n```html\n    <li><a href=\"/polls/{{ question.id }}/\">{{ question.question_text }}</a></li>\n```\nThe problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the `\\{\\% url \\%\\}` template tag:\nThe problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the `\\{\\% url \\%\\}` template tag:\n```html\n    <li><a href=\"{% url 'detail' question.id %}\">{{ question.question_text }}</a></li>\n```\nThe way this works is by looking up the URL definition as specified in the polls.urls module. You can see exactly where the URL name of ‘detail’ is defined below:\n```html\n    # the 'name' value as called by the {% url %} template tag\n    path('<int:question_id>/', views.detail, name='detail'),\n```\n\nIf you want to change the URL of the polls detail view to something else, perhaps to something like polls/specifics/12/ instead of doing it in the template (or templates) you would change it in polls/urls.py:\n```html\n    # added the word 'specifics'\n    path('specifics/<int:question_id>/', views.detail, name='detail'),\n```\n##### Namespacing URL names\nThe answer is to add namespaces to your URLconf. In the polls/urls.py file, go ahead and add an app_name to set the application namespace:\n```html\n    from django.urls import path\n    \n    from . import views\n    \n    app_name = 'polls'\n    urlpatterns = [\n        path('', views.index, name='index'),\n        path('<int:question_id>/', views.detail, name='detail'),\n        path('<int:question_id>/results/', views.results, name='results'),\n        path('<int:question_id>/vote/', views.vote, name='vote'),\n    ]\n```\nChange your polls/index.html template from:\npolls/templates/polls/index.html¶\n```html\n    <li><a href=\"{% url 'detail' question.id %}\">{{ question.question_text }}</a></li>\n```\n\nto point at the namespaced detail view:\npolls/templates/polls/index.html¶\n```html\n    <li><a href=\"{% url 'polls:detail' question.id %}\">{{ question.question_text }}</a></li>\n```\n\n\n### 版本\n其中，很令人头疼的便是版本。 如果遇到什么莫名其妙的错，请查看是否是版本的原因。\n这里的版本原因并不☞一些人说的库依赖严重，好像开发者版本更迭不考虑兼容——或者说居然勤奋的接口重换那般严重。\n此处仅仅☞在运行新版本时否个方法时，或许会莫名其妙引发一个早已摒弃的函数错误。这时候就可能是在折腾版本是导致有的不同版本有文件残留。在运行时莫名其妙的被`import`了然后它有调取其他东西，但是找不到的…  \n\n这时候轻则`pip uninstall` 重则环境重建。所以可见虚拟环境还是挺有用的嘛——\n\n### MVC\n全名： `Model` 、`View`、`Controller`。模型，视图，控制器这种功能分离的软件设计规范。所以它是通用的…不要和爪哇捆绑，搞得和某个神奇技术一般…   (⊙﹏⊙)\n\n---\n\n## 简介\n在安装之后，使用`django-admin startproject `+名字来初始化一个工程。   对比到`python`中就是创建好了文档目录，还在文件中写入相关框架代码，以此支持运行。\n\n### 试一下?\n`python manage.py runserver`\n便可开启服务器，这时候访问相应端口，就一个欢迎界面，提示嗯~ o(*￣▽￣*)o，你能开跑了。\n#### 再试一下？\n在11版本中有`\\admin`地址可以访问，访问之后便是一个登陆界面.<font color=#ef0000>但</font>,并不知道用户名和密码啊~   emm… 不过好处是能看到这个页面至少保证了`django`在`render`一个`.html`页面时是正常的。而之前说的<font color=#9e0000>老版本残留</font>就会导致`render`时出错。\n\n### 结构\n根目录下，'项目名文件'是项目容器😰\n`manage.py` 命令行工具，emm 类似于`python click库`的命令行程序，使用参数干不同的事情。\n进入到项目容器中，其中`settings.py`顾名思义\n`urls.py`同上，管理各个`url`通往哪里\n`wsgl.py`某个兼容啥，现在不用管…\n\n### 得知结构之后\n然后就能\n1. 在`urls.py`里愉快的添加各个功能url。这里面就一个urlpatterns列表，使用`djangol.conf.urls.url`方法来配置。\n不过其对应的执行函数都需要一个`request`来接受请求数据。 `return`回一个页面~ 现在用到的有`django,shortcuts.render 及 render_to_response`出来的，以及`django.http.HttpResponse`出来的东西。\n\n2. 嗯…… `ulr` 链接的执行方法详情就放在新创建的`view.py`中管理。\n\n3. 而在`view`中需要渲染的html文件则放置在根目录新创建的`templates`文件夹中。通过在`setting.py`中的'TEMPLATES'列表中的不知名字典(因为它确实没取名啊😔)de`DIRS`元素来指路。\n\n### 这下可以很厉害了\n进而进行数据库配置—— 还在`setting.py`中的'DATABASES'来指路。\n但Django规定要使用模型，就要创建一个爱怕怕`app`：\n```shell\ndjango-admin startapp TestModel 🦑\n```\n再将此爱怕怕领到`setting.py`中`NSTALLED_APPS`中签一下到。\n随后在`TestModel`下的`models`中创建继承于`django.db.models.Model`的数据类，然后使用隶属于`models`下的方法来制定数据类型eg:\n```python \nname = models.CharField(max_length=20)\n```\n> 毕竟不能直接通过Python的自由类嘛… 然后也肯定不能通过python的制定类型… 毕竟python数据类型和MySQL天差地别。\n\n<font color=a00070>最后</font>\n再回到命令行中使用\n```shell\npython manage.py migrate        //创建表结构\npython manage.py makemigrations //通知更改\npython manage.py testModel      // 创建表结构 😲❓\n正式拉入编制之后就能用了。\n```\n2019年1月23日\n```\n- Change your models(in *models.py*)\n- Run *python manage.py makemigrations* to create migration for those changes\n- Run *python manage.py migrate* to apply those changes to the database\n```\nOf courses, If Null Run *python manage.py migrate* can make a models.py whitch has nothings.\n\n#### 那么这个数据库怎么操作呢？\n自然是到`urls.py`中添加🔗链接到方法的路\n再到容器里面添加t`estdb.py`来说明方法详细。\n##### 增删改查\n```python \n实例化类\n直接.save()即保存\n未实例化类，all标识查找全部\n.objects.filter(填写删选条件)\n.objects.get(获取)\n.order_by(排序条件)\n更改则是将查出来的东西直接修改.update(修改东西)\n再.save保存\n删除便是.delete()\n``.\n差不多了  之后的详细再随情况更新。\n\n### 那么数据库表多了怎么一键生成对应类呢？\n```shell\npython manage.py inspectdb  //自动生成models模型文件\npython manage.py inspectdb > app/models.py      //假设有了名为'app'的爱怕怕\n// 老一套\npython manage.py makemigrations\npython manage.py migrate\n```\n但是会将之前`models.py`中的东西删掉… 还会把数据库中的表名重命名… 按它的规矩来生成，嗯…其实也🆗的。\n\n\n\n## 我爱Java 2018年6月24日16点40分的我由衷的写到\n在`MySQL`中读取`blob`存储的字段时，使用`BinaryField`不可使用其逆向生成的模型读取方式。当然，对照表如下\n```md\n            'AutoField': 'integer AUTO_INCREMENT',\n            'BigAutoField': 'bigint AUTO_INCREMENT',\n            'BinaryField': 'longblob',\n            'BooleanField': 'bool',\n            'CharField': 'varchar(%(max_length)s)',\n            'CommaSeparatedIntegerField': 'varchar(%(max_length)s)',\n            'DateField': 'date',\n            'DateTimeField': 'datetime',\n            'DecimalField': 'numeric(%(max_digits)s, %(decimal_places)s)',\n            'DurationField': 'bigint',\n            'FileField': 'varchar(%(max_length)s)',\n            'FilePathField': 'varchar(%(max_length)s)',\n            'FloatField': 'double precision',\n            'IntegerField': 'integer',\n            'BigIntegerField': 'bigint',\n            'IPAddressField': 'char(15)',\n            'GenericIPAddressField': 'char(39)',\n            'NullBooleanField': 'bool',\n            'OneToOneField': 'integer',\n            'PositiveIntegerField': 'integer UNSIGNED',\n            'PositiveSmallIntegerField': 'smallint UNSIGNED',\n            'SlugField': 'varchar(%(max_length)s)',\n            'SmallIntegerField': 'smallint',\n            'TextField': 'longtext',\n            'TimeField': 'time',\n            'UUIDField': 'char(32)',\n\n```\n以上是一部分，具体点[这里](https://www.cnblogs.com/sun1994/p/8566988.html)\n##### 模型字段名称\n在逆向生成时，我遇到过一次将数据库名修改的先例，不过后来似乎没有修改过。  然后就是驼峰命名法的字段可能emm也是因为此我才开始写这些信息，就是，驼峰命名法的字段可能在模型字段中为全小写。  还有就是`Django`莫名其妙的的编码错误，真的是一分钟编程，一小时修改编码…而且调试起来真的…我目前的调试方式极为原始，所以感觉真的`不想编程`嗯… \n\n#### Django 返回文件下载\n```py\n    def readFile(fn, buf_size=262144):  # 大文件下载，设定缓存大小\n        f = open(fn, \"rb\")\n        while True:  # 循环读取\n            c = f.read(buf_size)\n            if c:\n                yield c\n            else:\n                break\n        f.close()\n    response = HttpResponse(readFile(filePath), content_type='APPLICATION/OCTET-STREAM')  # 设定文件头，这种设定可以让任意文件都能正确下载，而且已知文本文件不是本地打开\n    fileName = 'haya'\n    fileType = '.docx'\n    response['Content-Disposition'] = 'attachment; filename=' + fileName.encode('utf-8') + fileType.encode('utf-8')  # 设定传输给客户端的文件名称\n    response['Content-Length'] = os.path.getsize(filePath)  # 传输给客户端的文件大小\n    return response \n```\n\n#### Python Docx编辑\n##### 替换\n```docx\n    在`.docx`文件中将需要替换的位置 使用变量站位，写法{{ placheholdParaName }}\n```\n<font color=red>使用文件时，只能写做`{{placheholdParaName}}`不能有空格…另外`docx`使用`docx`中的`Document`读入即可</font>\n```py\n    tpl = DocxTemplate(self.prjRootPath + '/word_template/' + \"word_template.docx\")\n    sub1 = tpl.new_subdoc()\n    sub1.subdocx = Document(temPath + 'sub1_bond.docx')\n    subContext['sub1'] = sub1\n```\n```md\n    上述中，只能写作……难道是因为使用{{someThing}}这种写法而隐藏了？！！\n    那么，今后写彩带注释岂不是不需要使用^_^而直接使用双花括号的写法就能直接隐藏了么(⊙o⊙ ) 　凄い\n```\n**Py中**：\n```py\n    from docxtpl import DocxTemplate, InlineImage\n    from docx.shared import Mm, Inches, Pt\n    doc = DocxTemplate(\"my_word_template.docx\")\n    myimage = InlineImage(doc,\n    'C:/Users/GuPengxiang/Pictures/ha.jpg',width=Mm(20))\n    context = { 'fundName' : u'这里是基金名称', 'stars':u'五星级琉璃六', '\n    bench': u'对比基金', 'income': u'12', 'bb': u'0.1%', 'image0' : myimage}\n    doc.render(context)\n    doc.save(\"generated_doc.docx\")\n```\n#### 生成echarts图表图片\n##### 环境\n```bash\n# 更新软件列表 & 更新软件\nsudo apt-get update    \nsudo apt-get upgrade\n# 下载包\npip install pyecharts-snapshot\nwget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz\n# 解压\ntar -xzvf phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz\n# 进入路径\ncd phantomjs-2.5.0-beta-ubuntu-xenial/bin\n# 赋予权限\nchmod +x phantomjs\n# 查看版本号\nphantomjs -v  \n# 若显示版本号，如 2.1.1 则生效\n```\n##### 生成图片\n```py\nfrom pyecharts import Line, Pie, Grid\nfrom pyecharts_snapshot.main import make_a_snapshot\n\nattr = [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"]\nv1 = [5, 20, 36, 10, 10, 100]\nv2 = [55, 60, 16, 20, 15, 80]\nline = Line(\"折线图示例\")\nline.add(\"商家A\", attr, v1, mark_point=[\"average\"])\nline.add(\"商家B\", attr, v2, is_smooth=True, mark_line=[\"max\", \"average\"])\nline.render('test.html')\n\nmake_a_snapshot('test.html', 'test.pdf')\n# 或者直接生成\nline.render('test.png')\n```\n<font color= #f0aabb>在生成图片时，插件包文件源码中有Log，但却是print出来的，而在部署环境中不允许出现print，所以…… 得在包源码中将之屏蔽</font>\n\n##### 连续生成图片\n用以上方法来生成图片是…很慢的🐢⬅这个速度。但可以通过使用为渲染创建一个默认配置环境来避免多次生成环境配置。所以——  具体来看`pyecharts`中的[高级说明](http://pyecharts.org/#/zh-cn/prepare)🕶\n```py\n    from pyecharts import Bar, Line\n    from pyecharts.engine import create_default_environment\n    \n    bar = Bar(\"我的第一个图表\", \"这里是副标题\")\n    bar.add(\"服装\", [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"], [5, 20, 36, 10, 75, 90])\n    \n    line = Line(\"我的第一个图表\", \"这里是副标题\")\n    line.add(\"服装\", [\"衬衫\", \"羊毛衫\", \"雪纺衫\", \"裤子\", \"高跟鞋\", \"袜子\"], [5, 20, 36, 10, 75, 90])\n    \n    env = create_default_environment(\"html\")\n    # 为渲染创建一个默认配置环境\n    # create_default_environment(filet_ype)\n    # file_type: 'html', 'svg', 'png', 'jpeg', 'gif' or 'pdf'\n    \n    env.render_chart_to_file(bar, path='bar.html')\n    env.render_chart_to_file(line, path='line.html')\n```\n\n(*￣▽￣*)o   如上\n### 注意\n    在生成报表时， 由于采用的是浏览器截图的方式，在使用`phantomjs`时会自动判断图片是否加载完成（echarts在显示图表之前是有一段动画的……）然后再`pyecharts`中并没有关闭动画的接口，而echarts是有的。 但毕竟`echarts`是在做翻译，所以只要在\"Chart\"基类中，将`animation=False`就可以了。 我改的时候在`chart.py`文件的29行，def __init__中。\n\n\n## SSl加密，https配置\n虽然就配置过之后显得操作很简单，而且也很明显，但就配置之初着实还是费了一些功夫的。或许是因为大而全的东西懒得看，而网上搜索到的粘贴复制之词又太过片面，或许大家写的时候也就当作日记来写的，本就没准备让别人去参考。所以再加上搜索的时候俺表述词不达意，所以总是很曲折（呵，用谷歌搜外文网就不存在这问题，前面就谦虚一下🙃）\n### 之前写的文档\n1 ssl加密部署步骤说明文档\n一．申请ssl证书\n1.生成csr文件，可使用openssl工具生成\n(1)例:`openssl genrsa -des3 -out server.key 1024`   生成服务器key文件;\n(2)例:`openssl req -new -key server.key -out server.csr`    生成服务器证书请求CSR文件;\n或使用CSR文件生成工具生成(例https://www.chinassl.net/ssltools/generator-csr.html，填写信息后点击生成CSR文件即可)\n（CSR文件中包括组织部门、国家地区、算法、以及邮箱和域名等信息）\n2.申请/购买HTTPS证书， 填写与上述相同的信息，验证类型选择DNS，CSR生成选择提供CSR(即提供第一步生成的CSR文件)（例：在阿里云或腾讯等地，本文档撰写时是通过https://freessl.org/ 免费申请而来（一年有效期，单域名，））\n二、验证域名所属关系\n1.到域名管理控制台中选择云解析DNS, 选择域名，添加“记录”，记录类型选择‘TXT’，主机记录及记录值填写证书申请方提供内容。\n2.等待1分钟或10分钟后，等待生效\n3.点击验证\n三、证书下载\n验证通过后，下载网站提供证书，含（CA证书、服务器证书、服务器私钥）\n四、Apache2部署开启SSL加密\n更改httpd.conf 文件设置：\n1.Listen {内网IP}:80\n2.开启models\n(1)LoadModule ssl_module modules/mod_ssl.so\n(2)LoadModule socache_shmcb_module modules/mod_socache_shmcb.so\n(3)LoadModule rewrite_module modules/mod_rewrite.so\n(4)ServerName {与域名相同}（未测试是否必须相同）\n3.http跳转到https:\n(1)RewriteEngine on\n(2)RewriteCond %{SERVER_PORT} !^443$\n(3)RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R]\n更改extra/httpd-ssl.conf 文件设置\n1.Listen 443\n2.ServerName www.lejinrong.cn\n3.ServerAdmin admin@lejinrong\n4.SSLCertificateFile \"c:/Apache24/conf/ssl/server.crt\"\n5.SSLCertificateKeyFile \"c:/Apache24/conf/ssl/server.key\"\n第四步中crt文件指向服务器证书文件， 第五步中.key文件指向私钥文件\n(其余部署方案或许有所不同，会使用CA证书)\n\n\n1.1 注意： 确保服务器中防火墙入站规则中添加了80端口和443端口。\n\n\n\n\n2 附：\n2.1.1 本地测试方案：\n\n环境：wamp Apache 2.4.9\n前言：wamp安装好后，默认的只有http服务，以下配置启用https服务\n条件：在Apache安装目录下需要有一下文件\n         [Apache安装目录]/modules/ mod_ssl.so\n         [Apache安装目录]/bin/ openssl.exe, libeay32.dll, ssleay32.dll\n         [Apache安装目录]/conf/ openssl.cnf\n步骤：\n一、修改配置文件httpd.conf，去掉下面行首的#（载入ssl模块和其他配置文件）\nLoadModule socache_shmcb_module modules/mod_socache_shmcb.so\nLoadModule ssl_module modules/mod_ssl.so\nInclude conf/extra/httpd-ssl.conf\n二、认证文件生成（生成证书签发请求）\n进入Apache安装目录的bin目录下，输入cmd，进入DOS窗口，输入以下命令\nopenssl req -new -out server.csr -config ../conf/openssl.cnf\n回车后提示输入密码和确认密码，本机输入：keypasswd\n后面会提示输入一系列的参数\n......\nCountry Name (2 letter code) [AU]: （要求输入国家缩写，只能输入2个字母，这里输入cn）\nState or Province Name (full name) [Some-State]: （要求输入州名或省名，这里输入hubei）\nLocality Name (eg, city) []: （要求输入城市名，这里输入wuhan）\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]: （要求输入组织名或公司名，这里输入gg）\nOrganizational Unit Name (eg, section) []: （要求输入部门名，这里输入gg）\nCommon Name (eg, YOUR name) []: （要求输入服务器域名或IP地址）\nEmail Address []: （要求输入邮件地址）\nA challenge password[]:（要求输入密码）\nAn optional company name[]（要求输入公司别名，这里输入ggs）\n.....\n生成私钥，在DOS窗口下的Apache的bin目录下输入命令\nopenssl rsa -in privkey.pem -out server.key\n然后要求输入之前 privkey.pem 的密码（keypasswd)\n创建证书，输入命令\nopenssl x509 -in server.csr -out server.crt -req -signkey server.key -days 8000\n回车后，显示创建成功，有效期为 8000 天\n将Apache的bin目录下的server.csr、server.crt、server.key拷贝到Apache安装目录下的conf\\ssl，若没有ssl文件则创建\n打开Apache安装目录conf/extra/httpd-ssl.conf文件，设置SSLCertificateFile和SSLCertificateKeyFile\nSSLCertificateFile \"C:/apache2.4.9/conf/ssl/server.crt\"\nSSLCertificateKeyFile \"C:/apache2.4.9/conf/ssl/server.key\"\n最后重启Apache服务，HTTPS服务的默认监听端口为443\n \n随后在本机中安装`server.crt`至`收信人的根证书颁发机构`即可不再提示证书无效\n注意：在重启Apache时，若Apache服务启动不起来，则在Apache安装目录的bin目录下，输入httpd –t，可以根据提示来修改你的配置文件\n### 附\n现在是2018年8月25日16点01分 所以上面其实是一个月前写给别人看的文档。\n在我搜的时候由于先在本地配置，尔后再网上找CA发证书，自我感觉这个步骤没有什么问题。就今天在\n\n#### Apache配置双网站/https\n的时候，也是这样，先在本地通过不同端口测试，确定方案之后再在服务器上通过`ServerName`进行区分。\n也就是启用`httpd-vhosts.conf`之后，再\n```md\n# Virtual Hosts\n#\n# Required modules: mod_log_config\n\n# If you want to maintain multiple domains/hostnames on your\n# machine you can setup VirtualHost containers for them. Most configurations\n# use only name-based virtual hosts so the server doesn't need to worry about\n# IP addresses. This is indicated by the asterisks in the directives below.\n#\n# Please see the documentation at \n# <URL:http://httpd.apache.org/docs/2.4/vhosts/>\n# for further details before you try to setup virtual hosts.\n#\n# You may use the command line option '-S' to verify your virtual host\n# configuration.\n\n#\n# VirtualHost example:\n# Almost any Apache directive may go into a VirtualHost container.\n# The first VirtualHost section is used for all requests that do not\n# match a ServerName or ServerAlias in any <VirtualHost> block.\n#\n<VirtualHost 192.168.1.81:80>\n    ServerName www.lejinrong.cn\n    ServerAlias www.lejinrong.cn\n    ServerAdmin www.lejinrong.cn\n    #指定myweb项目的wsgi.py配置文件路径  \n    WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py\n    #配置静态变量路径\n    Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/\n    <Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static>  \n        Allow from all\n    </Directory>\n    DocumentRoot \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\"\n    <Directory \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\">  \n        Options Indexes FollowSymLinks\n        AllowOverride None\n    </Directory>\n    RewriteEngine on\n    RewriteCond %{SERVER_PORT} !^400$\n    RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R]\n    ErrorLog \"logs/dummy-host.example.com-error.log\"\n    CustomLog \"logs/dummy-host.example.com-access.log\" common\n</VirtualHost>\n\n<VirtualHost 192.168.1.81:8880>\n    ServerName lejinrong.cn\n    ServerAlias vip.lejinrong.cn\n    ServerAdmin vip.lejinrong.cn\n    #指定myweb项目的wsgi.py配置文件路径  \n    WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py\n    #配置静态变量路径\n    Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/\n    <Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static>\n        Allow from all\n    </Directory>\n    DocumentRoot \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\"\n    <Directory \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\">  \n        Options Indexes FollowSymLinks\n        AllowOverride None\n    </Directory>\n    ErrorLog \"logs/dummy-host.example.com-error.log\"\n    CustomLog \"logs/dummy-host.example.com-access.log\" common\n    RewriteEngine on\n    RewriteCond %{SERVER_PORT} !^443$\n    RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R]\n</VirtualHost>\n```\n同理，在`httpd-ssl.conf`中也是通过配置不同`VirtualHost`进行区分\n```md\n#\n# This is the Apache server configuration file providing SSL support.\n# It contains the configuration directives to instruct the server how to\n# serve pages over an https connection. For detailed information about these \n# directives see <URL:http://httpd.apache.org/docs/2.4/mod/mod_ssl.html>\n# \n# Do NOT simply read the instructions in here without understanding\n# what they do.  They're here only as hints or reminders.  If you are unsure\n# consult the online docs. You have been warned.  \n#\n# Required modules: mod_log_config, mod_setenvif, mod_ssl,\n#          socache_shmcb_module (for default value of SSLSessionCache)\n\n#\n# Pseudo Random Number Generator (PRNG):\n# Configure one or more sources to seed the PRNG of the SSL library.\n# The seed data should be of good random quality.\n# WARNING! On some platforms /dev/random blocks if not enough entropy\n# is available. This means you then cannot use the /dev/random device\n# because it would lead to very long connection times (as long as\n# it requires to make more entropy available). But usually those\n# platforms additionally provide a /dev/urandom device which doesn't\n# block. So, if available, use this one instead. Read the mod_ssl User\n# Manual for more details.\n#\n#SSLRandomSeed startup file:/dev/random  512\n#SSLRandomSeed startup file:/dev/urandom 512\n#SSLRandomSeed connect file:/dev/random  512\n#SSLRandomSeed connect file:/dev/urandom 512\n\n\n#\n# When we also provide SSL we have to listen to the \n# standard HTTP port (see above) and to the HTTPS port\n#\nListen 443\nListen 400\n#ServerName www.lejinrong.cn\n##\n##  SSL Global Context\n##\n##  All SSL configuration in this context applies both to\n##  the main server and all SSL-enabled virtual hosts.\n##\n\n#   SSL Cipher Suite:\n#   List the ciphers that the client is permitted to negotiate,\n#   and that httpd will negotiate as the client of a proxied server.\n#   See the OpenSSL documentation for a complete list of ciphers, and\n#   ensure these follow appropriate best practices for this deployment.\n#   httpd 2.2.30, 2.4.13 and later force-disable aNULL, eNULL and EXP ciphers,\n#   while OpenSSL disabled these by default in 0.9.8zf/1.0.0r/1.0.1m/1.0.2a.\nSSLCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES\nSSLProxyCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES\n\n#  By the end of 2016, only TLSv1.2 ciphers should remain in use.\n#  Older ciphers should be disallowed as soon as possible, while the\n#  kRSA ciphers do not offer forward secrecy.  These changes inhibit\n#  older clients (such as IE6 SP2 or IE8 on Windows XP, or other legacy\n#  non-browser tooling) from successfully connecting.  \n#\n#  To restrict mod_ssl to use only TLSv1.2 ciphers, and disable\n#  those protocols which do not support forward secrecy, replace\n#  the SSLCipherSuite and SSLProxyCipherSuite directives above with\n#  the following two directives, as soon as practical.\n# SSLCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA\n# SSLProxyCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA\n\n#   User agents such as web browsers are not configured for the user's\n#   own preference of either security or performance, therefore this\n#   must be the prerogative of the web server administrator who manages\n#   cpu load versus confidentiality, so enforce the server's cipher order.\nSSLHonorCipherOrder on \n\n#   SSL Protocol support:\n#   List the protocol versions which clients are allowed to connect with.\n#   Disable SSLv3 by default (cf. RFC 7525 3.1.1).  TLSv1 (1.0) should be\n#   disabled as quickly as practical.  By the end of 2016, only the TLSv1.2\n#   protocol or later should remain in use.\nSSLProtocol all -SSLv3\nSSLProxyProtocol all -SSLv3\n\n#   Pass Phrase Dialog:\n#   Configure the pass phrase gathering process.\n#   The filtering dialog program (`builtin' is an internal\n#   terminal dialog) has to provide the pass phrase on stdout.\nSSLPassPhraseDialog  builtin\n\n#   Inter-Process Session Cache:\n#   Configure the SSL Session Cache: First the mechanism \n#   to use and second the expiring timeout (in seconds).\n#SSLSessionCache         \"dbm:c:/Apache24/logs/ssl_scache\"\nSSLSessionCache        \"shmcb:c:/Apache24/logs/ssl_scache(512000)\"\nSSLSessionCacheTimeout  300\n\n#   OCSP Stapling (requires OpenSSL 0.9.8h or later)\n#\n#   This feature is disabled by default and requires at least\n#   the two directives SSLUseStapling and SSLStaplingCache.\n#   Refer to the documentation on OCSP Stapling in the SSL/TLS\n#   How-To for more information.\n#\n#   Enable stapling for all SSL-enabled servers:\n#SSLUseStapling On\n\n#   Define a relatively small cache for OCSP Stapling using\n#   the same mechanism that is used for the SSL session cache\n#   above.  If stapling is used with more than a few certificates,\n#   the size may need to be increased.  (AH01929 will be logged.)\n#SSLStaplingCache \"shmcb:c:/Apache24/logs/ssl_stapling(32768)\"\n\n#   Seconds before valid OCSP responses are expired from the cache\n#SSLStaplingStandardCacheTimeout 3600\n\n#   Seconds before invalid OCSP responses are expired from the cache\n#SSLStaplingErrorCacheTimeout 600\n\n##\n## SSL Virtual Host Context\n##\n\n<VirtualHost 192.168.1.81:400>\n\n#   General setup for the virtual host\nDocumentRoot \"c:/Apache24/htdocs\"\nServerName www.lejinrong.cn\nServerAdmin admin@lejinrong.cn\nErrorLog \"c:/Apache24/logs/error.log\"\nTransferLog \"c:/Apache24/logs/access.log\"\n\n#   SSL Engine Switch:\n#   Enable/Disable SSL for this virtual host.\nSSLEngine on\n\n#   Server Certificate:\n#   Point SSLCertificateFile at a PEM encoded certificate.  If\n#   the certificate is encrypted, then you will be prompted for a\n#   pass phrase.  Note that a kill -HUP will prompt again.  Keep\n#   in mind that if you have both an RSA and a DSA certificate you\n#   can configure both in parallel (to also allow the use of DSA\n#   ciphers, etc.)\n#   Some ECC cipher suites (http://www.ietf.org/rfc/rfc4492.txt)\n#   require an ECC certificate which can also be configured in\n#   parallel.\nSSLCertificateFile \"c:/Apache24/conf/ssl/server.crt\"\n#SSLCertificateFile \"c:/Apache24/conf/server-dsa.crt\"\n#SSLCertificateFile \"c:/Apache24/conf/server-ecc.crt\"\n\n#   Server Private Key:\n#   If the key is not combined with the certificate, use this\n#   directive to point at the key file.  Keep in mind that if\n#   you've both a RSA and a DSA private key you can configure\n#   both in parallel (to also allow the use of DSA ciphers, etc.)\n#   ECC keys, when in use, can also be configured in parallel\nSSLCertificateKeyFile \"c:/Apache24/conf/ssl/server.key\"\n#SSLCertificateKeyFile \"c:/Apache24/conf/server-dsa.key\"\n#SSLCertificateKeyFile \"c:/Apache24/conf/server-ecc.key\"\n\n#   Server Certificate Chain:\n#   Point SSLCertificateChainFile at a file containing the\n#   concatenation of PEM encoded CA certificates which form the\n#   certificate chain for the server certificate. Alternatively\n#   the referenced file can be the same as SSLCertificateFile\n#   when the CA certificates are directly appended to the server\n#   certificate for convenience.\n#SSLCertificateChainFile \"c:/Apache24/conf/server-ca.crt\"\n\n#   Certificate Authority (CA):\n#   Set the CA certificate verification path where to find CA\n#   certificates for client authentication or alternatively one\n#   huge file containing all of them (file must be PEM encoded)\n#   Note: Inside SSLCACertificatePath you need hash symlinks\n#         to point to the certificate files. Use the provided\n#         Makefile to update the hash symlinks after changes.\n#SSLCACertificatePath \"c:/Apache24/conf/ssl.crt\"\n#SSLCACertificateFile \"c:/Apache24/conf/ssl.crt/ca-bundle.crt\"\n\n#   Certificate Revocation Lists (CRL):\n#   Set the CA revocation path where to find CA CRLs for client\n#   authentication or alternatively one huge file containing all\n#   of them (file must be PEM encoded).\n#   The CRL checking mode needs to be configured explicitly\n#   through SSLCARevocationCheck (defaults to \"none\" otherwise).\n#   Note: Inside SSLCARevocationPath you need hash symlinks\n#         to point to the certificate files. Use the provided\n#         Makefile to update the hash symlinks after changes.\n#SSLCARevocationPath \"c:/Apache24/conf/ssl.crl\"\n#SSLCARevocationFile \"c:/Apache24/conf/ssl.crl/ca-bundle.crl\"\n#SSLCARevocationCheck chain\n\n#   Client Authentication (Type):\n#   Client certificate verification type and depth.  Types are\n#   none, optional, require and optional_no_ca.  Depth is a\n#   number which specifies how deeply to verify the certificate\n#   issuer chain before deciding the certificate is not valid.\n#SSLVerifyClient require\n#SSLVerifyDepth  10\n\n#   TLS-SRP mutual authentication:\n#   Enable TLS-SRP and set the path to the OpenSSL SRP verifier\n#   file (containing login information for SRP user accounts). \n#   Requires OpenSSL 1.0.1 or newer. See the mod_ssl FAQ for\n#   detailed instructions on creating this file. Example:\n#   \"openssl srp -srpvfile c:/Apache24/conf/passwd.srpv -add username\"\n#SSLSRPVerifierFile \"c:/Apache24/conf/passwd.srpv\"\n\n#   Access Control:\n#   With SSLRequire you can do per-directory access control based\n#   on arbitrary complex boolean expressions containing server\n#   variable checks and other lookup directives.  The syntax is a\n#   mixture between C and Perl.  See the mod_ssl documentation\n#   for more details.\n#<Location />\n#SSLRequire (    %{SSL_CIPHER} !~ m/^(EXP|NULL)/ \\\n#            and %{SSL_CLIENT_S_DN_O} eq \"Snake Oil, Ltd.\" \\\n#            and %{SSL_CLIENT_S_DN_OU} in {\"Staff\", \"CA\", \"Dev\"} \\\n#            and %{TIME_WDAY} >= 1 and %{TIME_WDAY} <= 5 \\\n#            and %{TIME_HOUR} >= 8 and %{TIME_HOUR} <= 20       ) \\\n#           or %{REMOTE_ADDR} =~ m/^192\\.76\\.162\\.[0-9]+$/\n#</Location>\n\n#   SSL Engine Options:\n#   Set various options for the SSL engine.\n#   o FakeBasicAuth:\n#     Translate the client X.509 into a Basic Authorisation.  This means that\n#     the standard Auth/DBMAuth methods can be used for access control.  The\n#     user name is the `one line' version of the client's X.509 certificate.\n#     Note that no password is obtained from the user. Every entry in the user\n#     file needs this password: `xxj31ZMTZzkVA'.\n#   o ExportCertData:\n#     This exports two additional environment variables: SSL_CLIENT_CERT and\n#     SSL_SERVER_CERT. These contain the PEM-encoded certificates of the\n#     server (always existing) and the client (only existing when client\n#     authentication is used). This can be used to import the certificates\n#     into CGI scripts.\n#   o StdEnvVars:\n#     This exports the standard SSL/TLS related `SSL_*' environment variables.\n#     Per default this exportation is switched off for performance reasons,\n#     because the extraction step is an expensive operation and is usually\n#     useless for serving static content. So one usually enables the\n#     exportation for CGI and SSI requests only.\n#   o StrictRequire:\n#     This denies access when \"SSLRequireSSL\" or \"SSLRequire\" applied even\n#     under a \"Satisfy any\" situation, i.e. when it applies access is denied\n#     and no other module can change it.\n#   o OptRenegotiate:\n#     This enables optimized SSL connection renegotiation handling when SSL\n#     directives are used in per-directory context. \n#SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire\n<FilesMatch \"\\.(cgi|shtml|phtml|php)$\">\n    SSLOptions +StdEnvVars\n</FilesMatch>\n<Directory \"c:/Apache24/cgi-bin\">\n    SSLOptions +StdEnvVars\n</Directory>\n\n#   SSL Protocol Adjustments:\n#   The safe and default but still SSL/TLS standard compliant shutdown\n#   approach is that mod_ssl sends the close notify alert but doesn't wait for\n#   the close notify alert from client. When you need a different shutdown\n#   approach you can use one of the following variables:\n#   o ssl-unclean-shutdown:\n#     This forces an unclean shutdown when the connection is closed, i.e. no\n#     SSL close notify alert is sent or allowed to be received.  This violates\n#     the SSL/TLS standard but is needed for some brain-dead browsers. Use\n#     this when you receive I/O errors because of the standard approach where\n#     mod_ssl sends the close notify alert.\n#   o ssl-accurate-shutdown:\n#     This forces an accurate shutdown when the connection is closed, i.e. a\n#     SSL close notify alert is send and mod_ssl waits for the close notify\n#     alert of the client. This is 100% SSL/TLS standard compliant, but in\n#     practice often causes hanging connections with brain-dead browsers. Use\n#     this only for browsers where you know that their SSL implementation\n#     works correctly. \n#   Notice: Most problems of broken clients are also related to the HTTP\n#   keep-alive facility, so you usually additionally want to disable\n#   keep-alive for those clients, too. Use variable \"nokeepalive\" for this.\n#   Similarly, one has to force some clients to use HTTP/1.0 to workaround\n#   their broken HTTP/1.1 implementation. Use variables \"downgrade-1.0\" and\n#   \"force-response-1.0\" for this.\nBrowserMatch \"MSIE [2-5]\" \\\n         nokeepalive ssl-unclean-shutdown \\\n         downgrade-1.0 force-response-1.0\n\n#   Per-Server Logging:\n#   The home of a custom SSL log file. Use this when you want a\n#   compact non-error SSL logfile on a virtual host basis.\nCustomLog \"c:/Apache24/logs/ssl_request.log\" \\\n          \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\"\n#指定myweb项目的wsgi.py配置文件路径  \nWSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py\n#配置静态变量路径\nAlias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/\n<Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static>  \n    Allow from all\n</Directory>\nDocumentRoot \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\"\n<Directory \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\">  \n    Options Indexes FollowSymLinks\n    AllowOverride None\n</Directory>\n\n</VirtualHost>\n\n<VirtualHost 192.168.1.81:443>\nDocumentRoot \"c:/Apache24/htdocs\"\nServerName www.lejinrong.cn\nServerAdmin admin@lejinrong.cn\nErrorLog \"c:/Apache24/logs/error.log\"\nTransferLog \"c:/Apache24/logs/access.log\"\nSSLEngine on\nSSLCertificateFile \"c:/Apache24/conf/ssl/server.crt\"\nSSLCertificateKeyFile \"c:/Apache24/conf/ssl/server.key\"\n<FilesMatch \"\\.(cgi|shtml|phtml|php)$\">\n    SSLOptions +StdEnvVars\n</FilesMatch>\n<Directory \"c:/Apache24/cgi-bin\">\n    SSLOptions +StdEnvVars\n</Directory>\nBrowserMatch \"MSIE [2-5]\" \\\n         nokeepalive ssl-unclean-shutdown \\\n         downgrade-1.0 force-response-1.0\nCustomLog \"c:/Apache24/logs/ssl_request.log\" \\\n          \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\"\nWSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py\nAlias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/\n<Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static>  \n    Allow from all\n</Directory>\nDocumentRoot \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\"\n<Directory \"D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\">  \n    Options Indexes FollowSymLinks\n    AllowOverride None\n</Directory>\n</VirtualHost>\n```\n但其实 都写了跳转，所以在`httpd-vhosts.conf`文件中的项目以及静态资源路径指定就不用指定了，只不过我懒得删…\n还有一个坑点就是 原本有一个指定项目路径以及python环境的语句：\n```md\n#WSGIPythonPath \"C:/Python27/Lib;C:/Python27/Lib/site-packages;C:/Python27/DLLs\"\n#WSGIPythonPath D:/FundEvaluationSystem_svn1\n#WSGIPythonHome \"C:/Python27\"\n```\n我不知道按照上下这两种为什么会出问题，但网上那些人不会。但中间那个是用来指向项目路径的一个取巧的办法。哦因为wsgi或许我已经在别处制订过了。所以只要在`wsgi.py`中声明`sys.path.append('D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2')`就可以将项目包括进来，而不需要通过 第二句那个制定`python`路径的东西。而用那个，会导致资源只有声明的项目1会被加载，而项目2的资源就不会声明，而将那三句话注释，只要分别在'wsgi.py'中声明项目资源，而在`.conf`文件中指向'wsgi.py'文件就可以如数加载了。\n\n(⊙﹏⊙)语序  逻辑混乱之后不加班了再整理吧~~😭\n\n\n# 前端 Vue\n`vue`的使用方式可以通过`html`页面直接引用，也能直接用`vue-cil`创建项目。 网上人称`vue`脚手架？晓不大得\n而我这里自然说的就是 `vue-cil`即 通过`vue init webpack <prjName>`来生成的项目喽\n\n系统的创建以及介绍之后使用再熟一些再写，现在先记一些零散的东西。 [^_^]2018年9月18日 21点36分\n\n### 路由配置登陆访问\n```vue\n    在`router/index.js`中：\n    \n    {\n      path: '/',\n      // 首页\n      name: 'Main',\n      component: Main,\n      meta: {\n        requireAuth: true,  // 添加该字段，表示进入这个路由是需要登录的\n      }\n    },\n```\n\n","published":1,"updated":"2021-05-08T02:56:02.692Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9l20062u3yq000bax23","content":"<p>author: Ian</p>\n<h1 id=\"Django-的一些东西\"><a href=\"#Django-的一些东西\" class=\"headerlink\" title=\"Django 的一些东西\"></a>Django 的一些东西</h1><p><img src=\"http://lofrev.net/wp-content/photos/2017/04/http_logo_dpwnload.png\" alt=\"http server/client\"></p>\n<h2 id=\"利用nginxfd反向代理解决跨域问题\"><a href=\"#利用nginxfd反向代理解决跨域问题\" class=\"headerlink\" title=\"利用nginxfd反向代理解决跨域问题\"></a>利用nginxfd反向代理解决跨域问题</h2><p>纠结了很久的跨域问题。。。。。。一直配置Django。。。。。问题重重，从配置方面这条路还没找到解决方案，如以后确认无误后就再放在这儿。告慰前面付出的种种艰辛 😓😀</p>\n<p>来自(这儿)[<a href=\"https://www.jb51.net/article/105786.htm]\">https://www.jb51.net/article/105786.htm]</a></p>\n<p>方法是： 打开<code>nginx</code>默认配置文件<code>/etc/nginx/sites-available/default</code><br>更改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## demo listen 5017 proxy 5000 and 5001 ##</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\"> listen 5017; </span><br><span class=\"line\"> server_name a.xxx.com;</span><br><span class=\"line\"> access_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;a.access.log;</span><br><span class=\"line\"> error_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;a.error.log;</span><br><span class=\"line\"> root html;</span><br><span class=\"line\"> index index.html index.htm index.php;</span><br><span class=\"line\"> ## send request back to flask ##</span><br><span class=\"line\"> location &#x2F; &#123;</span><br><span class=\"line\">  proxy_pass http:&#x2F;&#x2F;127.0.0.1:5000&#x2F; ; </span><br><span class=\"line\"> #Proxy Settings</span><br><span class=\"line\">  proxy_redirect off;</span><br><span class=\"line\">  proxy_set_header Host $host;</span><br><span class=\"line\">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">  proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;</span><br><span class=\"line\">  proxy_max_temp_file_size 0;</span><br><span class=\"line\">  proxy_connect_timeout 90;</span><br><span class=\"line\">  proxy_send_timeout 90;</span><br><span class=\"line\">  proxy_read_timeout 90;</span><br><span class=\"line\">  proxy_buffer_size 4k;</span><br><span class=\"line\">  proxy_buffers 4 32k;</span><br><span class=\"line\">  proxy_busy_buffers_size 64k;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> location &#x2F;proxy &#123;</span><br><span class=\"line\">  rewrite ^.+proxy&#x2F;?(.*)$ &#x2F;$1 break;</span><br><span class=\"line\">  proxy_pass http:&#x2F;&#x2F;127.0.0.1:5001&#x2F; ; </span><br><span class=\"line\"> #Proxy Settings</span><br><span class=\"line\">  proxy_redirect off;</span><br><span class=\"line\">  proxy_set_header Host $host;</span><br><span class=\"line\">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">  proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;</span><br><span class=\"line\">  proxy_max_temp_file_size 0;</span><br><span class=\"line\">  proxy_connect_timeout 90;</span><br><span class=\"line\">  proxy_send_timeout 90;</span><br><span class=\"line\">  proxy_read_timeout 90;</span><br><span class=\"line\">  proxy_buffer_size 4k;</span><br><span class=\"line\">  proxy_buffers 4 32k;</span><br><span class=\"line\">  proxy_busy_buffers_size 64k;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">## End a.xxx.com ##</span><br></pre></td></tr></table></figure>\n<p>很显然，这种解决方法仅仅适用于同服务器，架设两个网站。进行跨域访问。<br>所以这种东西……就很欠缺。  或者<code>nginx</code>也支持多服务器“并联”？ </p>\n<p>但这种解决方案依然不能解决两个“严格无关”的网站通信。 </p>\n<h5 id=\"摒弃java后的’欢乐’-时光\"><a href=\"#摒弃java后的’欢乐’-时光\" class=\"headerlink\" title=\"摒弃java后的’欢乐’?时光?\"></a>摒弃<code>java</code>后的’欢乐’?时光?</h5><h2 id=\"Django-的前端相关\"><a href=\"#Django-的前端相关\" class=\"headerlink\" title=\"Django 的前端相关\"></a>Django 的前端相关</h2><p>[^_^]虽然我前端不用这个吧，但就一记录。届时估计还是回来翻Django官方文档的。<br>摘一个看一个牛逼哄哄的东西：<br>Removing hardcoded URLs in templates<br>Remember, when we wrote the link to a question in the polls/index.html template, the link was partially hardcoded like this</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/polls/&#123;&#123; question.id &#125;&#125;/&quot;</span>&gt;</span>&#123;&#123; question.question_text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>The problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the <code>\\&#123;\\% url \\%\\&#125;</code> template tag:<br>The problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the <code>\\&#123;\\% url \\%\\&#125;</code> template tag:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;detail&#x27; question.id %&#125;&quot;</span>&gt;</span>&#123;&#123; question.question_text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>The way this works is by looking up the URL definition as specified in the polls.urls module. You can see exactly where the URL name of ‘detail’ is defined below:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># the &#x27;name&#x27; value as called by the &#123;% url %&#125; template tag</span><br><span class=\"line\">path(&#x27;<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/&#x27;, views.detail, name=&#x27;detail&#x27;),</span><br></pre></td></tr></table></figure>\n\n<p>If you want to change the URL of the polls detail view to something else, perhaps to something like polls/specifics/12/ instead of doing it in the template (or templates) you would change it in polls/urls.py:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># added the word &#x27;specifics&#x27;</span><br><span class=\"line\">path(&#x27;specifics/<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/&#x27;, views.detail, name=&#x27;detail&#x27;),</span><br></pre></td></tr></table></figure>\n<h5 id=\"Namespacing-URL-names\"><a href=\"#Namespacing-URL-names\" class=\"headerlink\" title=\"Namespacing URL names\"></a>Namespacing URL names</h5><p>The answer is to add namespaces to your URLconf. In the polls/urls.py file, go ahead and add an app_name to set the application namespace:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from django.urls import path</span><br><span class=\"line\"></span><br><span class=\"line\">from . import views</span><br><span class=\"line\"></span><br><span class=\"line\">app_name = &#x27;polls&#x27;</span><br><span class=\"line\">urlpatterns = [</span><br><span class=\"line\">    path(&#x27;&#x27;, views.index, name=&#x27;index&#x27;),</span><br><span class=\"line\">    path(&#x27;<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/&#x27;, views.detail, name=&#x27;detail&#x27;),</span><br><span class=\"line\">    path(&#x27;<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/results/&#x27;, views.results, name=&#x27;results&#x27;),</span><br><span class=\"line\">    path(&#x27;<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/vote/&#x27;, views.vote, name=&#x27;vote&#x27;),</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>Change your polls/index.html template from:<br>polls/templates/polls/index.html¶</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;detail&#x27; question.id %&#125;&quot;</span>&gt;</span>&#123;&#123; question.question_text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>to point at the namespaced detail view:<br>polls/templates/polls/index.html¶</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;polls:detail&#x27; question.id %&#125;&quot;</span>&gt;</span>&#123;&#123; question.question_text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"版本\"><a href=\"#版本\" class=\"headerlink\" title=\"版本\"></a>版本</h3><p>其中，很令人头疼的便是版本。 如果遇到什么莫名其妙的错，请查看是否是版本的原因。<br>这里的版本原因并不☞一些人说的库依赖严重，好像开发者版本更迭不考虑兼容——或者说居然勤奋的接口重换那般严重。<br>此处仅仅☞在运行新版本时否个方法时，或许会莫名其妙引发一个早已摒弃的函数错误。这时候就可能是在折腾版本是导致有的不同版本有文件残留。在运行时莫名其妙的被<code>import</code>了然后它有调取其他东西，但是找不到的…  </p>\n<p>这时候轻则<code>pip uninstall</code> 重则环境重建。所以可见虚拟环境还是挺有用的嘛——</p>\n<h3 id=\"MVC\"><a href=\"#MVC\" class=\"headerlink\" title=\"MVC\"></a>MVC</h3><p>全名： <code>Model</code> 、<code>View</code>、<code>Controller</code>。模型，视图，控制器这种功能分离的软件设计规范。所以它是通用的…不要和爪哇捆绑，搞得和某个神奇技术一般…   (⊙﹏⊙)</p>\n<hr>\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>在安装之后，使用<code>django-admin startproject </code>+名字来初始化一个工程。   对比到<code>python</code>中就是创建好了文档目录，还在文件中写入相关框架代码，以此支持运行。</p>\n<h3 id=\"试一下\"><a href=\"#试一下\" class=\"headerlink\" title=\"试一下?\"></a>试一下?</h3><p><code>python manage.py runserver</code><br>便可开启服务器，这时候访问相应端口，就一个欢迎界面，提示嗯~ o(<em>￣▽￣</em>)o，你能开跑了。</p>\n<h4 id=\"再试一下？\"><a href=\"#再试一下？\" class=\"headerlink\" title=\"再试一下？\"></a>再试一下？</h4><p>在11版本中有<code>\\admin</code>地址可以访问，访问之后便是一个登陆界面.<font color=#ef0000>但</font>,并不知道用户名和密码啊~   emm… 不过好处是能看到这个页面至少保证了<code>django</code>在<code>render</code>一个<code>.html</code>页面时是正常的。而之前说的<font color=#9e0000>老版本残留</font>就会导致<code>render</code>时出错。</p>\n<h3 id=\"结构\"><a href=\"#结构\" class=\"headerlink\" title=\"结构\"></a>结构</h3><p>根目录下，’项目名文件’是项目容器😰<br><code>manage.py</code> 命令行工具，emm 类似于<code>python click库</code>的命令行程序，使用参数干不同的事情。<br>进入到项目容器中，其中<code>settings.py</code>顾名思义<br><code>urls.py</code>同上，管理各个<code>url</code>通往哪里<br><code>wsgl.py</code>某个兼容啥，现在不用管…</p>\n<h3 id=\"得知结构之后\"><a href=\"#得知结构之后\" class=\"headerlink\" title=\"得知结构之后\"></a>得知结构之后</h3><p>然后就能</p>\n<ol>\n<li><p>在<code>urls.py</code>里愉快的添加各个功能url。这里面就一个urlpatterns列表，使用<code>djangol.conf.urls.url</code>方法来配置。<br>不过其对应的执行函数都需要一个<code>request</code>来接受请求数据。 <code>return</code>回一个页面~ 现在用到的有<code>django,shortcuts.render 及 render_to_response</code>出来的，以及<code>django.http.HttpResponse</code>出来的东西。</p>\n</li>\n<li><p>嗯…… <code>ulr</code> 链接的执行方法详情就放在新创建的<code>view.py</code>中管理。</p>\n</li>\n<li><p>而在<code>view</code>中需要渲染的html文件则放置在根目录新创建的<code>templates</code>文件夹中。通过在<code>setting.py</code>中的’TEMPLATES’列表中的不知名字典(因为它确实没取名啊😔)de<code>DIRS</code>元素来指路。</p>\n</li>\n</ol>\n<h3 id=\"这下可以很厉害了\"><a href=\"#这下可以很厉害了\" class=\"headerlink\" title=\"这下可以很厉害了\"></a>这下可以很厉害了</h3><p>进而进行数据库配置—— 还在<code>setting.py</code>中的’DATABASES’来指路。<br>但Django规定要使用模型，就要创建一个爱怕怕<code>app</code>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">django-admin startapp TestModel 🦑</span><br></pre></td></tr></table></figure>\n<p>再将此爱怕怕领到<code>setting.py</code>中<code>NSTALLED_APPS</code>中签一下到。<br>随后在<code>TestModel</code>下的<code>models</code>中创建继承于<code>django.db.models.Model</code>的数据类，然后使用隶属于<code>models</code>下的方法来制定数据类型eg:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">name = models.CharField(max_length=<span class=\"number\">20</span>)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>毕竟不能直接通过Python的自由类嘛… 然后也肯定不能通过python的制定类型… 毕竟python数据类型和MySQL天差地别。</p>\n</blockquote>\n<p><font color=a00070>最后</font><br>再回到命令行中使用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python manage.py migrate        //创建表结构</span><br><span class=\"line\">python manage.py makemigrations //通知更改</span><br><span class=\"line\">python manage.py testModel      // 创建表结构 😲❓</span><br><span class=\"line\">正式拉入编制之后就能用了。</span><br></pre></td></tr></table></figure>\n<p>2019年1月23日</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- Change your models(in *models.py*)</span><br><span class=\"line\">- Run *python manage.py makemigrations* to create migration for those changes</span><br><span class=\"line\">- Run *python manage.py migrate* to apply those changes to the database</span><br></pre></td></tr></table></figure>\n<p>Of courses, If Null Run <em>python manage.py migrate</em> can make a models.py whitch has nothings.</p>\n<h4 id=\"那么这个数据库怎么操作呢？\"><a href=\"#那么这个数据库怎么操作呢？\" class=\"headerlink\" title=\"那么这个数据库怎么操作呢？\"></a>那么这个数据库怎么操作呢？</h4><p>自然是到<code>urls.py</code>中添加🔗链接到方法的路<br>再到容器里面添加t<code>estdb.py</code>来说明方法详细。</p>\n<h5 id=\"增删改查\"><a href=\"#增删改查\" class=\"headerlink\" title=\"增删改查\"></a>增删改查</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">实例化类</span><br><span class=\"line\">直接.save()即保存</span><br><span class=\"line\">未实例化类，<span class=\"built_in\">all</span>标识查找全部</span><br><span class=\"line\">.objects.<span class=\"built_in\">filter</span>(填写删选条件)</span><br><span class=\"line\">.objects.get(获取)</span><br><span class=\"line\">.order_by(排序条件)</span><br><span class=\"line\">更改则是将查出来的东西直接修改.update(修改东西)</span><br><span class=\"line\">再.save保存</span><br><span class=\"line\">删除便是.delete()</span><br><span class=\"line\">``.</span><br><span class=\"line\">差不多了  之后的详细再随情况更新。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 那么数据库表多了怎么一键生成对应类呢？</span></span><br><span class=\"line\">```shell</span><br><span class=\"line\">python manage.py inspectdb  //自动生成models模型文件</span><br><span class=\"line\">python manage.py inspectdb &gt; app/models.py      //假设有了名为<span class=\"string\">&#x27;app&#x27;</span>的爱怕怕</span><br><span class=\"line\">// 老一套</span><br><span class=\"line\">python manage.py makemigrations</span><br><span class=\"line\">python manage.py migrate</span><br></pre></td></tr></table></figure>\n<p>但是会将之前<code>models.py</code>中的东西删掉… 还会把数据库中的表名重命名… 按它的规矩来生成，嗯…其实也🆗的。</p>\n<h2 id=\"我爱Java-2018年6月24日16点40分的我由衷的写到\"><a href=\"#我爱Java-2018年6月24日16点40分的我由衷的写到\" class=\"headerlink\" title=\"我爱Java 2018年6月24日16点40分的我由衷的写到\"></a>我爱Java 2018年6月24日16点40分的我由衷的写到</h2><p>在<code>MySQL</code>中读取<code>blob</code>存储的字段时，使用<code>BinaryField</code>不可使用其逆向生成的模型读取方式。当然，对照表如下</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x27;AutoField&#x27;: &#x27;integer AUTO<span class=\"emphasis\">_INCREMENT&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;BigAutoField&#x27;: &#x27;bigint AUTO_</span>INCREMENT&#x27;,</span><br><span class=\"line\">&#x27;BinaryField&#x27;: &#x27;longblob&#x27;,</span><br><span class=\"line\">&#x27;BooleanField&#x27;: &#x27;bool&#x27;,</span><br><span class=\"line\">&#x27;CharField&#x27;: &#x27;varchar(%(max<span class=\"emphasis\">_length)s)&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;CommaSeparatedIntegerField&#x27;: &#x27;varchar(%(max_</span>length)s)&#x27;,</span><br><span class=\"line\">&#x27;DateField&#x27;: &#x27;date&#x27;,</span><br><span class=\"line\">&#x27;DateTimeField&#x27;: &#x27;datetime&#x27;,</span><br><span class=\"line\">&#x27;DecimalField&#x27;: &#x27;numeric(%(max<span class=\"emphasis\">_digits)s, %(decimal_</span>places)s)&#x27;,</span><br><span class=\"line\">&#x27;DurationField&#x27;: &#x27;bigint&#x27;,</span><br><span class=\"line\">&#x27;FileField&#x27;: &#x27;varchar(%(max<span class=\"emphasis\">_length)s)&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;FilePathField&#x27;: &#x27;varchar(%(max_</span>length)s)&#x27;,</span><br><span class=\"line\">&#x27;FloatField&#x27;: &#x27;double precision&#x27;,</span><br><span class=\"line\">&#x27;IntegerField&#x27;: &#x27;integer&#x27;,</span><br><span class=\"line\">&#x27;BigIntegerField&#x27;: &#x27;bigint&#x27;,</span><br><span class=\"line\">&#x27;IPAddressField&#x27;: &#x27;char(15)&#x27;,</span><br><span class=\"line\">&#x27;GenericIPAddressField&#x27;: &#x27;char(39)&#x27;,</span><br><span class=\"line\">&#x27;NullBooleanField&#x27;: &#x27;bool&#x27;,</span><br><span class=\"line\">&#x27;OneToOneField&#x27;: &#x27;integer&#x27;,</span><br><span class=\"line\">&#x27;PositiveIntegerField&#x27;: &#x27;integer UNSIGNED&#x27;,</span><br><span class=\"line\">&#x27;PositiveSmallIntegerField&#x27;: &#x27;smallint UNSIGNED&#x27;,</span><br><span class=\"line\">&#x27;SlugField&#x27;: &#x27;varchar(%(max<span class=\"emphasis\">_length)s)&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;SmallIntegerField&#x27;: &#x27;smallint&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;TextField&#x27;: &#x27;longtext&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;TimeField&#x27;: &#x27;time&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;UUIDField&#x27;: &#x27;char(32)&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\"></span></span><br></pre></td></tr></table></figure>\n<p>以上是一部分，具体点<a href=\"https://www.cnblogs.com/sun1994/p/8566988.html\">这里</a></p>\n<h5 id=\"模型字段名称\"><a href=\"#模型字段名称\" class=\"headerlink\" title=\"模型字段名称\"></a>模型字段名称</h5><p>在逆向生成时，我遇到过一次将数据库名修改的先例，不过后来似乎没有修改过。  然后就是驼峰命名法的字段可能emm也是因为此我才开始写这些信息，就是，驼峰命名法的字段可能在模型字段中为全小写。  还有就是<code>Django</code>莫名其妙的的编码错误，真的是一分钟编程，一小时修改编码…而且调试起来真的…我目前的调试方式极为原始，所以感觉真的<code>不想编程</code>嗯… </p>\n<h4 id=\"Django-返回文件下载\"><a href=\"#Django-返回文件下载\" class=\"headerlink\" title=\"Django 返回文件下载\"></a>Django 返回文件下载</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">readFile</span>(<span class=\"params\">fn, buf_size=<span class=\"number\">262144</span></span>):</span>  <span class=\"comment\"># 大文件下载，设定缓存大小</span></span><br><span class=\"line\">    f = <span class=\"built_in\">open</span>(fn, <span class=\"string\">&quot;rb&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:  <span class=\"comment\"># 循环读取</span></span><br><span class=\"line\">        c = f.read(buf_size)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> c:</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> c</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">response = HttpResponse(readFile(filePath), content_type=<span class=\"string\">&#x27;APPLICATION/OCTET-STREAM&#x27;</span>)  <span class=\"comment\"># 设定文件头，这种设定可以让任意文件都能正确下载，而且已知文本文件不是本地打开</span></span><br><span class=\"line\">fileName = <span class=\"string\">&#x27;haya&#x27;</span></span><br><span class=\"line\">fileType = <span class=\"string\">&#x27;.docx&#x27;</span></span><br><span class=\"line\">response[<span class=\"string\">&#x27;Content-Disposition&#x27;</span>] = <span class=\"string\">&#x27;attachment; filename=&#x27;</span> + fileName.encode(<span class=\"string\">&#x27;utf-8&#x27;</span>) + fileType.encode(<span class=\"string\">&#x27;utf-8&#x27;</span>)  <span class=\"comment\"># 设定传输给客户端的文件名称</span></span><br><span class=\"line\">response[<span class=\"string\">&#x27;Content-Length&#x27;</span>] = os.path.getsize(filePath)  <span class=\"comment\"># 传输给客户端的文件大小</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> response </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Python-Docx编辑\"><a href=\"#Python-Docx编辑\" class=\"headerlink\" title=\"Python Docx编辑\"></a>Python Docx编辑</h4><h5 id=\"替换\"><a href=\"#替换\" class=\"headerlink\" title=\"替换\"></a>替换</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在&#96;.docx&#96;文件中将需要替换的位置 使用变量站位，写法&#123;&#123; placheholdParaName &#125;&#125;</span><br></pre></td></tr></table></figure>\n<p><font color=red>使用文件时，只能写做<code>&#123;&#123;placheholdParaName&#125;&#125;</code>不能有空格…另外<code>docx</code>使用<code>docx</code>中的<code>Document</code>读入即可</font></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tpl = DocxTemplate(self.prjRootPath + <span class=\"string\">&#x27;/word_template/&#x27;</span> + <span class=\"string\">&quot;word_template.docx&quot;</span>)</span><br><span class=\"line\">sub1 = tpl.new_subdoc()</span><br><span class=\"line\">sub1.subdocx = Document(temPath + <span class=\"string\">&#x27;sub1_bond.docx&#x27;</span>)</span><br><span class=\"line\">subContext[<span class=\"string\">&#x27;sub1&#x27;</span>] = sub1</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">上述中，只能写作……难道是因为使用&#123;&#123;someThing&#125;&#125;这种写法而隐藏了？！！</span><br><span class=\"line\">那么，今后写彩带注释岂不是不需要使用^<span class=\"emphasis\">_^而直接使用双花括号的写法就能直接隐藏了么(⊙o⊙ ) 　凄い</span></span><br></pre></td></tr></table></figure>\n<p><strong>Py中</strong>：</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> docxtpl <span class=\"keyword\">import</span> DocxTemplate, InlineImage</span><br><span class=\"line\"><span class=\"keyword\">from</span> docx.shared <span class=\"keyword\">import</span> Mm, Inches, Pt</span><br><span class=\"line\">doc = DocxTemplate(<span class=\"string\">&quot;my_word_template.docx&quot;</span>)</span><br><span class=\"line\">myimage = InlineImage(doc,</span><br><span class=\"line\"><span class=\"string\">&#x27;C:/Users/GuPengxiang/Pictures/ha.jpg&#x27;</span>,width=Mm(<span class=\"number\">20</span>))</span><br><span class=\"line\">context = &#123; <span class=\"string\">&#x27;fundName&#x27;</span> : <span class=\"string\">u&#x27;这里是基金名称&#x27;</span>, <span class=\"string\">&#x27;stars&#x27;</span>:<span class=\"string\">u&#x27;五星级琉璃六&#x27;</span>, <span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">bench&#x27;</span>: <span class=\"string\">u&#x27;对比基金&#x27;</span>, <span class=\"string\">&#x27;income&#x27;</span>: <span class=\"string\">u&#x27;12&#x27;</span>, <span class=\"string\">&#x27;bb&#x27;</span>: <span class=\"string\">u&#x27;0.1%&#x27;</span>, <span class=\"string\">&#x27;image0&#x27;</span> : myimage&#125;</span><br><span class=\"line\">doc.render(context)</span><br><span class=\"line\">doc.save(<span class=\"string\">&quot;generated_doc.docx&quot;</span>)</span><br></pre></td></tr></table></figure>\n<h4 id=\"生成echarts图表图片\"><a href=\"#生成echarts图表图片\" class=\"headerlink\" title=\"生成echarts图表图片\"></a>生成echarts图表图片</h4><h5 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 更新软件列表 &amp; 更新软件</span></span><br><span class=\"line\">sudo apt-get update    </span><br><span class=\"line\">sudo apt-get upgrade</span><br><span class=\"line\"><span class=\"comment\"># 下载包</span></span><br><span class=\"line\">pip install pyecharts-snapshot</span><br><span class=\"line\">wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># 解压</span></span><br><span class=\"line\">tar -xzvf phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># 进入路径</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> phantomjs-2.5.0-beta-ubuntu-xenial/bin</span><br><span class=\"line\"><span class=\"comment\"># 赋予权限</span></span><br><span class=\"line\">chmod +x phantomjs</span><br><span class=\"line\"><span class=\"comment\"># 查看版本号</span></span><br><span class=\"line\">phantomjs -v  </span><br><span class=\"line\"><span class=\"comment\"># 若显示版本号，如 2.1.1 则生效</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"生成图片\"><a href=\"#生成图片\" class=\"headerlink\" title=\"生成图片\"></a>生成图片</h5><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pyecharts <span class=\"keyword\">import</span> Line, Pie, Grid</span><br><span class=\"line\"><span class=\"keyword\">from</span> pyecharts_snapshot.main <span class=\"keyword\">import</span> make_a_snapshot</span><br><span class=\"line\"></span><br><span class=\"line\">attr = [<span class=\"string\">&quot;衬衫&quot;</span>, <span class=\"string\">&quot;羊毛衫&quot;</span>, <span class=\"string\">&quot;雪纺衫&quot;</span>, <span class=\"string\">&quot;裤子&quot;</span>, <span class=\"string\">&quot;高跟鞋&quot;</span>, <span class=\"string\">&quot;袜子&quot;</span>]</span><br><span class=\"line\">v1 = [<span class=\"number\">5</span>, <span class=\"number\">20</span>, <span class=\"number\">36</span>, <span class=\"number\">10</span>, <span class=\"number\">10</span>, <span class=\"number\">100</span>]</span><br><span class=\"line\">v2 = [<span class=\"number\">55</span>, <span class=\"number\">60</span>, <span class=\"number\">16</span>, <span class=\"number\">20</span>, <span class=\"number\">15</span>, <span class=\"number\">80</span>]</span><br><span class=\"line\">line = Line(<span class=\"string\">&quot;折线图示例&quot;</span>)</span><br><span class=\"line\">line.add(<span class=\"string\">&quot;商家A&quot;</span>, attr, v1, mark_point=[<span class=\"string\">&quot;average&quot;</span>])</span><br><span class=\"line\">line.add(<span class=\"string\">&quot;商家B&quot;</span>, attr, v2, is_smooth=<span class=\"literal\">True</span>, mark_line=[<span class=\"string\">&quot;max&quot;</span>, <span class=\"string\">&quot;average&quot;</span>])</span><br><span class=\"line\">line.render(<span class=\"string\">&#x27;test.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">make_a_snapshot(<span class=\"string\">&#x27;test.html&#x27;</span>, <span class=\"string\">&#x27;test.pdf&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 或者直接生成</span></span><br><span class=\"line\">line.render(<span class=\"string\">&#x27;test.png&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p><font color= #f0aabb>在生成图片时，插件包文件源码中有Log，但却是print出来的，而在部署环境中不允许出现print，所以…… 得在包源码中将之屏蔽</font></p>\n<h5 id=\"连续生成图片\"><a href=\"#连续生成图片\" class=\"headerlink\" title=\"连续生成图片\"></a>连续生成图片</h5><p>用以上方法来生成图片是…很慢的🐢⬅这个速度。但可以通过使用为渲染创建一个默认配置环境来避免多次生成环境配置。所以——  具体来看<code>pyecharts</code>中的<a href=\"http://pyecharts.org/#/zh-cn/prepare\">高级说明</a>🕶</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pyecharts <span class=\"keyword\">import</span> Bar, Line</span><br><span class=\"line\"><span class=\"keyword\">from</span> pyecharts.engine <span class=\"keyword\">import</span> create_default_environment</span><br><span class=\"line\"></span><br><span class=\"line\">bar = Bar(<span class=\"string\">&quot;我的第一个图表&quot;</span>, <span class=\"string\">&quot;这里是副标题&quot;</span>)</span><br><span class=\"line\">bar.add(<span class=\"string\">&quot;服装&quot;</span>, [<span class=\"string\">&quot;衬衫&quot;</span>, <span class=\"string\">&quot;羊毛衫&quot;</span>, <span class=\"string\">&quot;雪纺衫&quot;</span>, <span class=\"string\">&quot;裤子&quot;</span>, <span class=\"string\">&quot;高跟鞋&quot;</span>, <span class=\"string\">&quot;袜子&quot;</span>], [<span class=\"number\">5</span>, <span class=\"number\">20</span>, <span class=\"number\">36</span>, <span class=\"number\">10</span>, <span class=\"number\">75</span>, <span class=\"number\">90</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">line = Line(<span class=\"string\">&quot;我的第一个图表&quot;</span>, <span class=\"string\">&quot;这里是副标题&quot;</span>)</span><br><span class=\"line\">line.add(<span class=\"string\">&quot;服装&quot;</span>, [<span class=\"string\">&quot;衬衫&quot;</span>, <span class=\"string\">&quot;羊毛衫&quot;</span>, <span class=\"string\">&quot;雪纺衫&quot;</span>, <span class=\"string\">&quot;裤子&quot;</span>, <span class=\"string\">&quot;高跟鞋&quot;</span>, <span class=\"string\">&quot;袜子&quot;</span>], [<span class=\"number\">5</span>, <span class=\"number\">20</span>, <span class=\"number\">36</span>, <span class=\"number\">10</span>, <span class=\"number\">75</span>, <span class=\"number\">90</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">env = create_default_environment(<span class=\"string\">&quot;html&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 为渲染创建一个默认配置环境</span></span><br><span class=\"line\"><span class=\"comment\"># create_default_environment(filet_ype)</span></span><br><span class=\"line\"><span class=\"comment\"># file_type: &#x27;html&#x27;, &#x27;svg&#x27;, &#x27;png&#x27;, &#x27;jpeg&#x27;, &#x27;gif&#x27; or &#x27;pdf&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">env.render_chart_to_file(bar, path=<span class=\"string\">&#x27;bar.html&#x27;</span>)</span><br><span class=\"line\">env.render_chart_to_file(line, path=<span class=\"string\">&#x27;line.html&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>(<em>￣▽￣</em>)o   如上</p>\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><pre><code>在生成报表时， 由于采用的是浏览器截图的方式，在使用`phantomjs`时会自动判断图片是否加载完成（echarts在显示图表之前是有一段动画的……）然后再`pyecharts`中并没有关闭动画的接口，而echarts是有的。 但毕竟`echarts`是在做翻译，所以只要在&quot;Chart&quot;基类中，将`animation=False`就可以了。 我改的时候在`chart.py`文件的29行，def __init__中。\n</code></pre>\n<h2 id=\"SSl加密，https配置\"><a href=\"#SSl加密，https配置\" class=\"headerlink\" title=\"SSl加密，https配置\"></a>SSl加密，https配置</h2><p>虽然就配置过之后显得操作很简单，而且也很明显，但就配置之初着实还是费了一些功夫的。或许是因为大而全的东西懒得看，而网上搜索到的粘贴复制之词又太过片面，或许大家写的时候也就当作日记来写的，本就没准备让别人去参考。所以再加上搜索的时候俺表述词不达意，所以总是很曲折（呵，用谷歌搜外文网就不存在这问题，前面就谦虚一下🙃）</p>\n<h3 id=\"之前写的文档\"><a href=\"#之前写的文档\" class=\"headerlink\" title=\"之前写的文档\"></a>之前写的文档</h3><p>1 ssl加密部署步骤说明文档<br>一．申请ssl证书<br>1.生成csr文件，可使用openssl工具生成<br>(1)例:<code>openssl genrsa -des3 -out server.key 1024</code>   生成服务器key文件;<br>(2)例:<code>openssl req -new -key server.key -out server.csr</code>    生成服务器证书请求CSR文件;<br>或使用CSR文件生成工具生成(例<a href=\"https://www.chinassl.net/ssltools/generator-csr.html%EF%BC%8C%E5%A1%AB%E5%86%99%E4%BF%A1%E6%81%AF%E5%90%8E%E7%82%B9%E5%87%BB%E7%94%9F%E6%88%90CSR%E6%96%87%E4%BB%B6%E5%8D%B3%E5%8F%AF\">https://www.chinassl.net/ssltools/generator-csr.html，填写信息后点击生成CSR文件即可</a>)<br>（CSR文件中包括组织部门、国家地区、算法、以及邮箱和域名等信息）<br>2.申请/购买HTTPS证书， 填写与上述相同的信息，验证类型选择DNS，CSR生成选择提供CSR(即提供第一步生成的CSR文件)（例：在阿里云或腾讯等地，本文档撰写时是通过<a href=\"https://freessl.org/\">https://freessl.org/</a> 免费申请而来（一年有效期，单域名，））<br>二、验证域名所属关系<br>1.到域名管理控制台中选择云解析DNS, 选择域名，添加“记录”，记录类型选择‘TXT’，主机记录及记录值填写证书申请方提供内容。<br>2.等待1分钟或10分钟后，等待生效<br>3.点击验证<br>三、证书下载<br>验证通过后，下载网站提供证书，含（CA证书、服务器证书、服务器私钥）<br>四、Apache2部署开启SSL加密<br>更改httpd.conf 文件设置：<br>1.Listen {内网IP}:80<br>2.开启models<br>(1)LoadModule ssl_module modules/mod_ssl.so<br>(2)LoadModule socache_shmcb_module modules/mod_socache_shmcb.so<br>(3)LoadModule rewrite_module modules/mod_rewrite.so<br>(4)ServerName {与域名相同}（未测试是否必须相同）<br>3.http跳转到https:<br>(1)RewriteEngine on<br>(2)RewriteCond %{SERVER_PORT} !^443$<br>(3)RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R]<br>更改extra/httpd-ssl.conf 文件设置<br>1.Listen 443<br>2.ServerName <a href=\"http://www.lejinrong.cn/\">www.lejinrong.cn</a><br>3.ServerAdmin admin@lejinrong<br>4.SSLCertificateFile “c:/Apache24/conf/ssl/server.crt”<br>5.SSLCertificateKeyFile “c:/Apache24/conf/ssl/server.key”<br>第四步中crt文件指向服务器证书文件， 第五步中.key文件指向私钥文件<br>(其余部署方案或许有所不同，会使用CA证书)</p>\n<p>1.1 注意： 确保服务器中防火墙入站规则中添加了80端口和443端口。</p>\n<p>2 附：<br>2.1.1 本地测试方案：</p>\n<p>环境：wamp Apache 2.4.9<br>前言：wamp安装好后，默认的只有http服务，以下配置启用https服务<br>条件：在Apache安装目录下需要有一下文件<br>         [Apache安装目录]/modules/ mod_ssl.so<br>         [Apache安装目录]/bin/ openssl.exe, libeay32.dll, ssleay32.dll<br>         [Apache安装目录]/conf/ openssl.cnf<br>步骤：<br>一、修改配置文件httpd.conf，去掉下面行首的#（载入ssl模块和其他配置文件）<br>LoadModule socache_shmcb_module modules/mod_socache_shmcb.so<br>LoadModule ssl_module modules/mod_ssl.so<br>Include conf/extra/httpd-ssl.conf<br>二、认证文件生成（生成证书签发请求）<br>进入Apache安装目录的bin目录下，输入cmd，进入DOS窗口，输入以下命令<br>openssl req -new -out server.csr -config ../conf/openssl.cnf<br>回车后提示输入密码和确认密码，本机输入：keypasswd<br>后面会提示输入一系列的参数<br>……<br>Country Name (2 letter code) [AU]: （要求输入国家缩写，只能输入2个字母，这里输入cn）<br>State or Province Name (full name) [Some-State]: （要求输入州名或省名，这里输入hubei）<br>Locality Name (eg, city) []: （要求输入城市名，这里输入wuhan）<br>Organization Name (eg, company) [Internet Widgits Pty Ltd]: （要求输入组织名或公司名，这里输入gg）<br>Organizational Unit Name (eg, section) []: （要求输入部门名，这里输入gg）<br>Common Name (eg, YOUR name) []: （要求输入服务器域名或IP地址）<br>Email Address []: （要求输入邮件地址）<br>A challenge password[]:（要求输入密码）<br>An optional company name[]（要求输入公司别名，这里输入ggs）<br>…..<br>生成私钥，在DOS窗口下的Apache的bin目录下输入命令<br>openssl rsa -in privkey.pem -out server.key<br>然后要求输入之前 privkey.pem 的密码（keypasswd)<br>创建证书，输入命令<br>openssl x509 -in server.csr -out server.crt -req -signkey server.key -days 8000<br>回车后，显示创建成功，有效期为 8000 天<br>将Apache的bin目录下的server.csr、server.crt、server.key拷贝到Apache安装目录下的conf\\ssl，若没有ssl文件则创建<br>打开Apache安装目录conf/extra/httpd-ssl.conf文件，设置SSLCertificateFile和SSLCertificateKeyFile<br>SSLCertificateFile “C:/apache2.4.9/conf/ssl/server.crt”<br>SSLCertificateKeyFile “C:/apache2.4.9/conf/ssl/server.key”<br>最后重启Apache服务，HTTPS服务的默认监听端口为443<br> <br>随后在本机中安装<code>server.crt</code>至<code>收信人的根证书颁发机构</code>即可不再提示证书无效<br>注意：在重启Apache时，若Apache服务启动不起来，则在Apache安装目录的bin目录下，输入httpd –t，可以根据提示来修改你的配置文件</p>\n<h3 id=\"附\"><a href=\"#附\" class=\"headerlink\" title=\"附\"></a>附</h3><p>现在是2018年8月25日16点01分 所以上面其实是一个月前写给别人看的文档。<br>在我搜的时候由于先在本地配置，尔后再网上找CA发证书，自我感觉这个步骤没有什么问题。就今天在</p>\n<h4 id=\"Apache配置双网站-https\"><a href=\"#Apache配置双网站-https\" class=\"headerlink\" title=\"Apache配置双网站/https\"></a>Apache配置双网站/https</h4><p>的时候，也是这样，先在本地通过不同端口测试，确定方案之后再在服务器上通过<code>ServerName</code>进行区分。<br>也就是启用<code>httpd-vhosts.conf</code>之后，再</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\"># Virtual Hosts</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># Required modules: mod<span class=\"emphasis\">_log_</span>config</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\"># If you want to maintain multiple domains/hostnames on your</span></span><br><span class=\"line\"><span class=\"section\"># machine you can setup VirtualHost containers for them. Most configurations</span></span><br><span class=\"line\"><span class=\"section\"># use only name-based virtual hosts so the server doesn&#x27;t need to worry about</span></span><br><span class=\"line\"><span class=\"section\"># IP addresses. This is indicated by the asterisks in the directives below.</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># Please see the documentation at </span></span><br><span class=\"line\"><span class=\"section\"># <span class=\"xml\">&lt;URL:http://httpd.apache.org/docs/2.4/vhosts/&gt;</span></span></span><br><span class=\"line\"><span class=\"section\"># for further details before you try to setup virtual hosts.</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># You may use the command line option &#x27;-S&#x27; to verify your virtual host</span></span><br><span class=\"line\"><span class=\"section\"># configuration.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># VirtualHost example:</span></span><br><span class=\"line\"><span class=\"section\"># Almost any Apache directive may go into a VirtualHost container.</span></span><br><span class=\"line\"><span class=\"section\"># The first VirtualHost section is used for all requests that do not</span></span><br><span class=\"line\"><span class=\"section\"># match a ServerName or ServerAlias in any <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span>&gt;</span></span> block.</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span> <span class=\"attr\">192.168.1.81:80</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"code\">    ServerName www.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    ServerAlias www.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    ServerAdmin www.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    #指定myweb项目的wsgi.py配置文件路径  </span></span><br><span class=\"line\"><span class=\"code\">    WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py</span></span><br><span class=\"line\"><span class=\"code\">    #配置静态变量路径</span></span><br><span class=\"line\"><span class=\"code\">    Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/</span></span><br><span class=\"line\"><span class=\"code\">    &lt;Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static&gt;  </span></span><br><span class=\"line\"><span class=\"code\">        Allow from all</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/Directory&gt;</span></span><br><span class=\"line\"><span class=\"code\">    DocumentRoot &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2&quot;</span></span><br><span class=\"line\"><span class=\"code\">    &lt;Directory &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2&quot;&gt;  </span></span><br><span class=\"line\"><span class=\"code\">        Options Indexes FollowSymLinks</span></span><br><span class=\"line\"><span class=\"code\">        AllowOverride None</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/Directory&gt;</span></span><br><span class=\"line\"><span class=\"code\">    RewriteEngine on</span></span><br><span class=\"line\"><span class=\"code\">    RewriteCond %&#123;SERVER_PORT&#125; !^400$</span></span><br><span class=\"line\"><span class=\"code\">    RewriteRule ^/?(.*)$ https://%&#123;SERVER_NAME&#125;/$1 [L,R]</span></span><br><span class=\"line\"><span class=\"code\">    ErrorLog &quot;logs/dummy-host.example.com-error.log&quot;</span></span><br><span class=\"line\"><span class=\"code\">    CustomLog &quot;logs/dummy-host.example.com-access.log&quot; common</span></span><br><span class=\"line\"><span class=\"code\">&lt;/VirtualHost&gt;</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">&lt;VirtualHost 192.168.1.81:8880&gt;</span></span><br><span class=\"line\"><span class=\"code\">    ServerName lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    ServerAlias vip.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    ServerAdmin vip.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    #指定myweb项目的wsgi.py配置文件路径  </span></span><br><span class=\"line\"><span class=\"code\">    WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py</span></span><br><span class=\"line\"><span class=\"code\">    #配置静态变量路径</span></span><br><span class=\"line\"><span class=\"code\">    Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/</span></span><br><span class=\"line\"><span class=\"code\">    &lt;Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static&gt;</span></span><br><span class=\"line\"><span class=\"code\">        Allow from all</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/Directory&gt;</span></span><br><span class=\"line\"><span class=\"code\">    DocumentRoot &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3&quot;</span></span><br><span class=\"line\"><span class=\"code\">    &lt;Directory &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3&quot;&gt;  </span></span><br><span class=\"line\"><span class=\"code\">        Options Indexes FollowSymLinks</span></span><br><span class=\"line\"><span class=\"code\">        AllowOverride None</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/Directory&gt;</span></span><br><span class=\"line\"><span class=\"code\">    ErrorLog &quot;logs/dummy-host.example.com-error.log&quot;</span></span><br><span class=\"line\"><span class=\"code\">    CustomLog &quot;logs/dummy-host.example.com-access.log&quot; common</span></span><br><span class=\"line\"><span class=\"code\">    RewriteEngine on</span></span><br><span class=\"line\"><span class=\"code\">    RewriteCond %&#123;SERVER_PORT&#125; !^443$</span></span><br><span class=\"line\"><span class=\"code\">    RewriteRule ^/?(.*)$ https://%&#123;SERVER_NAME&#125;/$1 [L,R]</span></span><br><span class=\"line\"><span class=\"code\">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure>\n<p>同理，在<code>httpd-ssl.conf</code>中也是通过配置不同<code>VirtualHost</code>进行区分</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># This is the Apache server configuration file providing SSL support.</span></span><br><span class=\"line\"><span class=\"section\"># It contains the configuration directives to instruct the server how to</span></span><br><span class=\"line\"><span class=\"section\"># serve pages over an https connection. For detailed information about these </span></span><br><span class=\"line\"><span class=\"section\"># directives see <span class=\"xml\">&lt;URL:http://httpd.apache.org/docs/2.4/mod/mod_ssl.html&gt;</span></span></span><br><span class=\"line\"><span class=\"section\"># </span></span><br><span class=\"line\"><span class=\"section\"># Do NOT simply read the instructions in here without understanding</span></span><br><span class=\"line\"><span class=\"section\"># what they do.  They&#x27;re here only as hints or reminders.  If you are unsure</span></span><br><span class=\"line\"><span class=\"section\"># consult the online docs. You have been warned.  </span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># Required modules: mod<span class=\"emphasis\">_log_</span>config, mod<span class=\"emphasis\">_setenvif, mod_</span>ssl,</span></span><br><span class=\"line\"><span class=\"section\">#          socache<span class=\"emphasis\">_shmcb_</span>module (for default value of SSLSessionCache)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># Pseudo Random Number Generator (PRNG):</span></span><br><span class=\"line\"><span class=\"section\"># Configure one or more sources to seed the PRNG of the SSL library.</span></span><br><span class=\"line\"><span class=\"section\"># The seed data should be of good random quality.</span></span><br><span class=\"line\"><span class=\"section\"># WARNING! On some platforms /dev/random blocks if not enough entropy</span></span><br><span class=\"line\"><span class=\"section\"># is available. This means you then cannot use the /dev/random device</span></span><br><span class=\"line\"><span class=\"section\"># because it would lead to very long connection times (as long as</span></span><br><span class=\"line\"><span class=\"section\"># it requires to make more entropy available). But usually those</span></span><br><span class=\"line\"><span class=\"section\"># platforms additionally provide a /dev/urandom device which doesn&#x27;t</span></span><br><span class=\"line\"><span class=\"section\"># block. So, if available, use this one instead. Read the mod<span class=\"emphasis\">_ssl User</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"># Manual for more details.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRandomSeed startup file:/dev/random  512</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRandomSeed startup file:/dev/urandom 512</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRandomSeed connect file:/dev/random  512</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRandomSeed connect file:/dev/urandom 512</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"># When we also provide SSL we have to listen to the </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"># standard HTTP port (see above) and to the HTTPS port</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">Listen 443</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">Listen 400</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#ServerName www.lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##  SSL Global Context</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##  All SSL configuration in this context applies both to</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##  the main server and all SSL-enabled virtual hosts.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   SSL Cipher Suite:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   List the ciphers that the client is permitted to negotiate,</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   and that httpd will negotiate as the client of a proxied server.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   See the OpenSSL documentation for a complete list of ciphers, and</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   ensure these follow appropriate best practices for this deployment.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   httpd 2.2.30, 2.4.13 and later force-disable aNULL, eNULL and EXP ciphers,</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   while OpenSSL disabled these by default in 0.9.8zf/1.0.0r/1.0.1m/1.0.2a.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLProxyCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  By the end of 2016, only TLSv1.2 ciphers should remain in use.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  Older ciphers should be disallowed as soon as possible, while the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  kRSA ciphers do not offer forward secrecy.  These changes inhibit</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  older clients (such as IE6 SP2 or IE8 on Windows XP, or other legacy</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  non-browser tooling) from successfully connecting.  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  To restrict mod_</span>ssl to use only TLSv1.2 ciphers, and disable</span></span><br><span class=\"line\"><span class=\"section\">#  those protocols which do not support forward secrecy, replace</span></span><br><span class=\"line\"><span class=\"section\">#  the SSLCipherSuite and SSLProxyCipherSuite directives above with</span></span><br><span class=\"line\"><span class=\"section\">#  the following two directives, as soon as practical.</span></span><br><span class=\"line\"><span class=\"section\"># SSLCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA</span></span><br><span class=\"line\"><span class=\"section\"># SSLProxyCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   User agents such as web browsers are not configured for the user&#x27;s</span></span><br><span class=\"line\"><span class=\"section\">#   own preference of either security or performance, therefore this</span></span><br><span class=\"line\"><span class=\"section\">#   must be the prerogative of the web server administrator who manages</span></span><br><span class=\"line\"><span class=\"section\">#   cpu load versus confidentiality, so enforce the server&#x27;s cipher order.</span></span><br><span class=\"line\">SSLHonorCipherOrder on </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   SSL Protocol support:</span></span><br><span class=\"line\"><span class=\"section\">#   List the protocol versions which clients are allowed to connect with.</span></span><br><span class=\"line\"><span class=\"section\">#   Disable SSLv3 by default (cf. RFC 7525 3.1.1).  TLSv1 (1.0) should be</span></span><br><span class=\"line\"><span class=\"section\">#   disabled as quickly as practical.  By the end of 2016, only the TLSv1.2</span></span><br><span class=\"line\"><span class=\"section\">#   protocol or later should remain in use.</span></span><br><span class=\"line\">SSLProtocol all -SSLv3</span><br><span class=\"line\">SSLProxyProtocol all -SSLv3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   Pass Phrase Dialog:</span></span><br><span class=\"line\"><span class=\"section\">#   Configure the pass phrase gathering process.</span></span><br><span class=\"line\"><span class=\"section\">#   The filtering dialog program (`builtin&#x27; is an internal</span></span><br><span class=\"line\"><span class=\"section\">#   terminal dialog) has to provide the pass phrase on stdout.</span></span><br><span class=\"line\">SSLPassPhraseDialog  builtin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   Inter-Process Session Cache:</span></span><br><span class=\"line\"><span class=\"section\">#   Configure the SSL Session Cache: First the mechanism </span></span><br><span class=\"line\"><span class=\"section\">#   to use and second the expiring timeout (in seconds).</span></span><br><span class=\"line\"><span class=\"section\">#SSLSessionCache         &quot;dbm:c:/Apache24/logs/ssl<span class=\"emphasis\">_scache&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLSessionCache        &quot;shmcb:c:/Apache24/logs/ssl_</span>scache(512000)&quot;</span></span><br><span class=\"line\">SSLSessionCacheTimeout  300</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   OCSP Stapling (requires OpenSSL 0.9.8h or later)</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\">#   This feature is disabled by default and requires at least</span></span><br><span class=\"line\"><span class=\"section\">#   the two directives SSLUseStapling and SSLStaplingCache.</span></span><br><span class=\"line\"><span class=\"section\">#   Refer to the documentation on OCSP Stapling in the SSL/TLS</span></span><br><span class=\"line\"><span class=\"section\">#   How-To for more information.</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\">#   Enable stapling for all SSL-enabled servers:</span></span><br><span class=\"line\"><span class=\"section\">#SSLUseStapling On</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   Define a relatively small cache for OCSP Stapling using</span></span><br><span class=\"line\"><span class=\"section\">#   the same mechanism that is used for the SSL session cache</span></span><br><span class=\"line\"><span class=\"section\">#   above.  If stapling is used with more than a few certificates,</span></span><br><span class=\"line\"><span class=\"section\">#   the size may need to be increased.  (AH01929 will be logged.)</span></span><br><span class=\"line\"><span class=\"section\">#SSLStaplingCache &quot;shmcb:c:/Apache24/logs/ssl<span class=\"emphasis\">_stapling(32768)&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Seconds before valid OCSP responses are expired from the cache</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLStaplingStandardCacheTimeout 3600</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Seconds before invalid OCSP responses are expired from the cache</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLStaplingErrorCacheTimeout 600</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">## SSL Virtual Host Context</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span> <span class=\"attr\">192.168.1.81:400</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   General setup for the virtual host</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">DocumentRoot &quot;c:/Apache24/htdocs&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ServerName www.lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ServerAdmin admin@lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ErrorLog &quot;c:/Apache24/logs/error.log&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">TransferLog &quot;c:/Apache24/logs/access.log&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   SSL Engine Switch:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Enable/Disable SSL for this virtual host.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLEngine on</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Server Certificate:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Point SSLCertificateFile at a PEM encoded certificate.  If</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   the certificate is encrypted, then you will be prompted for a</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   pass phrase.  Note that a kill -HUP will prompt again.  Keep</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   in mind that if you have both an RSA and a DSA certificate you</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   can configure both in parallel (to also allow the use of DSA</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   ciphers, etc.)</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Some ECC cipher suites (http://www.ietf.org/rfc/rfc4492.txt)</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   require an ECC certificate which can also be configured in</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   parallel.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCertificateFile &quot;c:/Apache24/conf/ssl/server.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateFile &quot;c:/Apache24/conf/server-dsa.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateFile &quot;c:/Apache24/conf/server-ecc.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Server Private Key:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   If the key is not combined with the certificate, use this</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   directive to point at the key file.  Keep in mind that if</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   you&#x27;ve both a RSA and a DSA private key you can configure</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   both in parallel (to also allow the use of DSA ciphers, etc.)</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   ECC keys, when in use, can also be configured in parallel</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCertificateKeyFile &quot;c:/Apache24/conf/ssl/server.key&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateKeyFile &quot;c:/Apache24/conf/server-dsa.key&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateKeyFile &quot;c:/Apache24/conf/server-ecc.key&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Server Certificate Chain:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Point SSLCertificateChainFile at a file containing the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   concatenation of PEM encoded CA certificates which form the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   certificate chain for the server certificate. Alternatively</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   the referenced file can be the same as SSLCertificateFile</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   when the CA certificates are directly appended to the server</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   certificate for convenience.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateChainFile &quot;c:/Apache24/conf/server-ca.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Certificate Authority (CA):</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Set the CA certificate verification path where to find CA</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   certificates for client authentication or alternatively one</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   huge file containing all of them (file must be PEM encoded)</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Note: Inside SSLCACertificatePath you need hash symlinks</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#         to point to the certificate files. Use the provided</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#         Makefile to update the hash symlinks after changes.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCACertificatePath &quot;c:/Apache24/conf/ssl.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCACertificateFile &quot;c:/Apache24/conf/ssl.crt/ca-bundle.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Certificate Revocation Lists (CRL):</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Set the CA revocation path where to find CA CRLs for client</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   authentication or alternatively one huge file containing all</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   of them (file must be PEM encoded).</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   The CRL checking mode needs to be configured explicitly</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   through SSLCARevocationCheck (defaults to &quot;none&quot; otherwise).</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Note: Inside SSLCARevocationPath you need hash symlinks</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#         to point to the certificate files. Use the provided</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#         Makefile to update the hash symlinks after changes.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCARevocationPath &quot;c:/Apache24/conf/ssl.crl&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCARevocationFile &quot;c:/Apache24/conf/ssl.crl/ca-bundle.crl&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCARevocationCheck chain</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Client Authentication (Type):</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Client certificate verification type and depth.  Types are</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   none, optional, require and optional_</span>no<span class=\"emphasis\">_ca.  Depth is a</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   number which specifies how deeply to verify the certificate</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   issuer chain before deciding the certificate is not valid.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLVerifyClient require</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLVerifyDepth  10</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   TLS-SRP mutual authentication:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Enable TLS-SRP and set the path to the OpenSSL SRP verifier</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   file (containing login information for SRP user accounts). </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Requires OpenSSL 1.0.1 or newer. See the mod_</span>ssl FAQ for</span></span><br><span class=\"line\"><span class=\"section\">#   detailed instructions on creating this file. Example:</span></span><br><span class=\"line\"><span class=\"section\">#   &quot;openssl srp -srpvfile c:/Apache24/conf/passwd.srpv -add username&quot;</span></span><br><span class=\"line\"><span class=\"section\">#SSLSRPVerifierFile &quot;c:/Apache24/conf/passwd.srpv&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   Access Control:</span></span><br><span class=\"line\"><span class=\"section\">#   With SSLRequire you can do per-directory access control based</span></span><br><span class=\"line\"><span class=\"section\">#   on arbitrary complex boolean expressions containing server</span></span><br><span class=\"line\"><span class=\"section\">#   variable checks and other lookup directives.  The syntax is a</span></span><br><span class=\"line\"><span class=\"section\">#   mixture between C and Perl.  See the mod<span class=\"emphasis\">_ssl documentation</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   for more details.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Location</span> /&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRequire (    %&#123;SSL_</span>CIPHER&#125; !~ m/^(EXP|NULL)/ \\</span></span><br><span class=\"line\"><span class=\"section\">#            and %&#123;SSL<span class=\"emphasis\">_CLIENT_</span>S<span class=\"emphasis\">_DN_</span>O&#125; eq &quot;Snake Oil, Ltd.&quot; \\</span></span><br><span class=\"line\"><span class=\"section\">#            and %&#123;SSL<span class=\"emphasis\">_CLIENT_</span>S<span class=\"emphasis\">_DN_</span>OU&#125; in &#123;&quot;Staff&quot;, &quot;CA&quot;, &quot;Dev&quot;&#125; \\</span></span><br><span class=\"line\"><span class=\"section\">#            and %&#123;TIME<span class=\"emphasis\">_WDAY&#125; &gt;= 1 and %&#123;TIME_</span>WDAY&#125; &lt;= 5 \\</span></span><br><span class=\"line\"><span class=\"section\">#            and %&#123;TIME<span class=\"emphasis\">_HOUR&#125; &gt;= 8 and %&#123;TIME_</span>HOUR&#125; &lt;= 20       ) \\</span></span><br><span class=\"line\"><span class=\"section\">#           or %&#123;REMOTE<span class=\"emphasis\">_ADDR&#125; =~ m/^192\\.76\\.162\\.[0-9]+$/</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Location</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   SSL Engine Options:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Set various options for the SSL engine.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o FakeBasicAuth:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     Translate the client X.509 into a Basic Authorisation.  This means that</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     the standard Auth/DBMAuth methods can be used for access control.  The</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     user name is the `one line&#x27; version of the client&#x27;s X.509 certificate.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     Note that no password is obtained from the user. Every entry in the user</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     file needs this password: `xxj31ZMTZzkVA&#x27;.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o ExportCertData:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This exports two additional environment variables: SSL_</span>CLIENT<span class=\"emphasis\">_CERT and</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     SSL_</span>SERVER<span class=\"emphasis\">_CERT. These contain the PEM-encoded certificates of the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     server (always existing) and the client (only existing when client</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     authentication is used). This can be used to import the certificates</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     into CGI scripts.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o StdEnvVars:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This exports the standard SSL/TLS related `SSL_</span><span class=\"emphasis\">*&#x27; environment variables.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     Per default this exportation is switched off for performance reasons,</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     because the extraction step is an expensive operation and is usually</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     useless for serving static content. So one usually enables the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     exportation for CGI and SSI requests only.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o StrictRequire:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This denies access when &quot;SSLRequireSSL&quot; or &quot;SSLRequire&quot; applied even</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     under a &quot;Satisfy any&quot; situation, i.e. when it applies access is denied</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     and no other module can change it.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o OptRenegotiate:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This enables optimized SSL connection renegotiation handling when SSL</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     directives are used in per-directory context. </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">FilesMatch</span> &quot;\\<span class=\"attr\">.</span>(<span class=\"attr\">cgi</span>|<span class=\"attr\">shtml</span>|<span class=\"attr\">phtml</span>|<span class=\"attr\">php</span>)$&quot;&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    SSLOptions +StdEnvVars</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">FilesMatch</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> &quot;<span class=\"attr\">c:</span>/<span class=\"attr\">Apache24</span>/<span class=\"attr\">cgi-bin</span>&quot;&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    SSLOptions +StdEnvVars</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   SSL Protocol Adjustments:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   The safe and default but still SSL/TLS standard compliant shutdown</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   approach is that mod_ssl sends the close notify alert but doesn&#x27;t wait for</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   the close notify alert from client. When you need a different shutdown</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   approach you can use one of the following variables:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o ssl-unclean-shutdown:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This forces an unclean shutdown when the connection is closed, i.e. no</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     SSL close notify alert is sent or allowed to be received.  This violates</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     the SSL/TLS standard but is needed for some brain-dead browsers. Use</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     this when you receive I/O errors because of the standard approach where</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     mod_ssl sends the close notify alert.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o ssl-accurate-shutdown:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This forces an accurate shutdown when the connection is closed, i.e. a</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     SSL close notify alert is send and mod_ssl waits for the close notify</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     alert of the client. This is 100% SSL/TLS standard compliant, but in</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     practice often causes hanging connections with brain-dead browsers. Use</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     this only for browsers where you know that their SSL implementation</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     works correctly. </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Notice: Most problems of broken clients are also related to the HTTP</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   keep-alive facility, so you usually additionally want to disable</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   keep-alive for those clients, too. Use variable &quot;nokeepalive&quot; for this.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Similarly, one has to force some clients to use HTTP/1.0 to workaround</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   their broken HTTP/1.1 implementation. Use variables &quot;downgrade-1.0&quot; and</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   &quot;force-response-1.0&quot; for this.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">BrowserMatch &quot;MSIE [2-5]&quot; \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">         nokeepalive ssl-unclean-shutdown \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">         downgrade-1.0 force-response-1.0</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Per-Server Logging:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   The home of a custom SSL log file. Use this when you want a</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   compact non-error SSL logfile on a virtual host basis.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">CustomLog &quot;c:/Apache24/logs/ssl_request.log&quot; \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">          &quot;%t %h %&#123;SSL_PROTOCOL&#125;x %&#123;SSL_CIPHER&#125;x \\&quot;%r\\&quot; %b&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#指定myweb项目的wsgi.py配置文件路径  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#配置静态变量路径</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> <span class=\"attr\">D:</span>/<span class=\"attr\">FundEvaluationSystem_svn1</span>/<span class=\"attr\">Fund_Evaluation_System_V2</span>/<span class=\"attr\">static</span>&gt;</span></span>  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    Allow from all</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">DocumentRoot &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> &quot;<span class=\"attr\">D:</span>/<span class=\"attr\">FundEvaluationSystem_svn1</span>/<span class=\"attr\">Fund_Evaluation_System_V2</span>&quot;&gt;</span></span>  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    Options Indexes FollowSymLinks</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    AllowOverride None</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">VirtualHost</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span> <span class=\"attr\">192.168.1.81:443</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">DocumentRoot &quot;c:/Apache24/htdocs&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ServerName www.lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ServerAdmin admin@lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ErrorLog &quot;c:/Apache24/logs/error.log&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">TransferLog &quot;c:/Apache24/logs/access.log&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLEngine on</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCertificateFile &quot;c:/Apache24/conf/ssl/server.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCertificateKeyFile &quot;c:/Apache24/conf/ssl/server.key&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">FilesMatch</span> &quot;\\<span class=\"attr\">.</span>(<span class=\"attr\">cgi</span>|<span class=\"attr\">shtml</span>|<span class=\"attr\">phtml</span>|<span class=\"attr\">php</span>)$&quot;&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    SSLOptions +StdEnvVars</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">FilesMatch</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> &quot;<span class=\"attr\">c:</span>/<span class=\"attr\">Apache24</span>/<span class=\"attr\">cgi-bin</span>&quot;&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    SSLOptions +StdEnvVars</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">BrowserMatch &quot;MSIE [2-5]&quot; \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">         nokeepalive ssl-unclean-shutdown \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">         downgrade-1.0 force-response-1.0</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">CustomLog &quot;c:/Apache24/logs/ssl_request.log&quot; \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">          &quot;%t %h %&#123;SSL_PROTOCOL&#125;x %&#123;SSL_CIPHER&#125;x \\&quot;%r\\&quot; %b&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> <span class=\"attr\">D:</span>/<span class=\"attr\">FundEvaluationSystem_svn1</span>/<span class=\"attr\">Fund_Evaluation_System_V3</span>/<span class=\"attr\">static</span>&gt;</span></span>  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    Allow from all</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">DocumentRoot &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> &quot;<span class=\"attr\">D:</span>/<span class=\"attr\">FundEvaluationSystem_svn1</span>/<span class=\"attr\">Fund_Evaluation_System_V3</span>&quot;&gt;</span></span>  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    Options Indexes FollowSymLinks</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    AllowOverride None</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">VirtualHost</span>&gt;</span></span></span></span></span><br></pre></td></tr></table></figure>\n<p>但其实 都写了跳转，所以在<code>httpd-vhosts.conf</code>文件中的项目以及静态资源路径指定就不用指定了，只不过我懒得删…<br>还有一个坑点就是 原本有一个指定项目路径以及python环境的语句：</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">#WSGIPythonPath &quot;C:/Python27/Lib;C:/Python27/Lib/site-packages;C:/Python27/DLLs&quot;</span></span><br><span class=\"line\"><span class=\"section\">#WSGIPythonPath D:/FundEvaluationSystem<span class=\"emphasis\">_svn1</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#WSGIPythonHome &quot;C:/Python27&quot;</span></span></span><br></pre></td></tr></table></figure>\n<p>我不知道按照上下这两种为什么会出问题，但网上那些人不会。但中间那个是用来指向项目路径的一个取巧的办法。哦因为wsgi或许我已经在别处制订过了。所以只要在<code>wsgi.py</code>中声明<code>sys.path.append(&#39;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2&#39;)</code>就可以将项目包括进来，而不需要通过 第二句那个制定<code>python</code>路径的东西。而用那个，会导致资源只有声明的项目1会被加载，而项目2的资源就不会声明，而将那三句话注释，只要分别在’wsgi.py’中声明项目资源，而在<code>.conf</code>文件中指向’wsgi.py’文件就可以如数加载了。</p>\n<p>(⊙﹏⊙)语序  逻辑混乱之后不加班了再整理吧~~😭</p>\n<h1 id=\"前端-Vue\"><a href=\"#前端-Vue\" class=\"headerlink\" title=\"前端 Vue\"></a>前端 Vue</h1><p><code>vue</code>的使用方式可以通过<code>html</code>页面直接引用，也能直接用<code>vue-cil</code>创建项目。 网上人称<code>vue</code>脚手架？晓不大得<br>而我这里自然说的就是 <code>vue-cil</code>即 通过<code>vue init webpack &lt;prjName&gt;</code>来生成的项目喽</p>\n<p>系统的创建以及介绍之后使用再熟一些再写，现在先记一些零散的东西。 [^_^]2018年9月18日 21点36分</p>\n<h3 id=\"路由配置登陆访问\"><a href=\"#路由配置登陆访问\" class=\"headerlink\" title=\"路由配置登陆访问\"></a>路由配置登陆访问</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在&#96;router&#x2F;index.js&#96;中：</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  path: &#39;&#x2F;&#39;,</span><br><span class=\"line\">  &#x2F;&#x2F; 首页</span><br><span class=\"line\">  name: &#39;Main&#39;,</span><br><span class=\"line\">  component: Main,</span><br><span class=\"line\">  meta: &#123;</span><br><span class=\"line\">    requireAuth: true,  &#x2F;&#x2F; 添加该字段，表示进入这个路由是需要登录的</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>author: Ian</p>\n<h1 id=\"Django-的一些东西\"><a href=\"#Django-的一些东西\" class=\"headerlink\" title=\"Django 的一些东西\"></a>Django 的一些东西</h1><p><img src=\"http://lofrev.net/wp-content/photos/2017/04/http_logo_dpwnload.png\" alt=\"http server/client\"></p>\n<h2 id=\"利用nginxfd反向代理解决跨域问题\"><a href=\"#利用nginxfd反向代理解决跨域问题\" class=\"headerlink\" title=\"利用nginxfd反向代理解决跨域问题\"></a>利用nginxfd反向代理解决跨域问题</h2><p>纠结了很久的跨域问题。。。。。。一直配置Django。。。。。问题重重，从配置方面这条路还没找到解决方案，如以后确认无误后就再放在这儿。告慰前面付出的种种艰辛 😓😀</p>\n<p>来自(这儿)[<a href=\"https://www.jb51.net/article/105786.htm]\">https://www.jb51.net/article/105786.htm]</a></p>\n<p>方法是： 打开<code>nginx</code>默认配置文件<code>/etc/nginx/sites-available/default</code><br>更改如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## demo listen 5017 proxy 5000 and 5001 ##</span><br><span class=\"line\">server &#123;</span><br><span class=\"line\"> listen 5017; </span><br><span class=\"line\"> server_name a.xxx.com;</span><br><span class=\"line\"> access_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;a.access.log;</span><br><span class=\"line\"> error_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;a.error.log;</span><br><span class=\"line\"> root html;</span><br><span class=\"line\"> index index.html index.htm index.php;</span><br><span class=\"line\"> ## send request back to flask ##</span><br><span class=\"line\"> location &#x2F; &#123;</span><br><span class=\"line\">  proxy_pass http:&#x2F;&#x2F;127.0.0.1:5000&#x2F; ; </span><br><span class=\"line\"> #Proxy Settings</span><br><span class=\"line\">  proxy_redirect off;</span><br><span class=\"line\">  proxy_set_header Host $host;</span><br><span class=\"line\">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">  proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;</span><br><span class=\"line\">  proxy_max_temp_file_size 0;</span><br><span class=\"line\">  proxy_connect_timeout 90;</span><br><span class=\"line\">  proxy_send_timeout 90;</span><br><span class=\"line\">  proxy_read_timeout 90;</span><br><span class=\"line\">  proxy_buffer_size 4k;</span><br><span class=\"line\">  proxy_buffers 4 32k;</span><br><span class=\"line\">  proxy_busy_buffers_size 64k;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> location &#x2F;proxy &#123;</span><br><span class=\"line\">  rewrite ^.+proxy&#x2F;?(.*)$ &#x2F;$1 break;</span><br><span class=\"line\">  proxy_pass http:&#x2F;&#x2F;127.0.0.1:5001&#x2F; ; </span><br><span class=\"line\"> #Proxy Settings</span><br><span class=\"line\">  proxy_redirect off;</span><br><span class=\"line\">  proxy_set_header Host $host;</span><br><span class=\"line\">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class=\"line\">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class=\"line\">  proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;</span><br><span class=\"line\">  proxy_max_temp_file_size 0;</span><br><span class=\"line\">  proxy_connect_timeout 90;</span><br><span class=\"line\">  proxy_send_timeout 90;</span><br><span class=\"line\">  proxy_read_timeout 90;</span><br><span class=\"line\">  proxy_buffer_size 4k;</span><br><span class=\"line\">  proxy_buffers 4 32k;</span><br><span class=\"line\">  proxy_busy_buffers_size 64k;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">## End a.xxx.com ##</span><br></pre></td></tr></table></figure>\n<p>很显然，这种解决方法仅仅适用于同服务器，架设两个网站。进行跨域访问。<br>所以这种东西……就很欠缺。  或者<code>nginx</code>也支持多服务器“并联”？ </p>\n<p>但这种解决方案依然不能解决两个“严格无关”的网站通信。 </p>\n<h5 id=\"摒弃java后的’欢乐’-时光\"><a href=\"#摒弃java后的’欢乐’-时光\" class=\"headerlink\" title=\"摒弃java后的’欢乐’?时光?\"></a>摒弃<code>java</code>后的’欢乐’?时光?</h5><h2 id=\"Django-的前端相关\"><a href=\"#Django-的前端相关\" class=\"headerlink\" title=\"Django 的前端相关\"></a>Django 的前端相关</h2><p>[^_^]虽然我前端不用这个吧，但就一记录。届时估计还是回来翻Django官方文档的。<br>摘一个看一个牛逼哄哄的东西：<br>Removing hardcoded URLs in templates<br>Remember, when we wrote the link to a question in the polls/index.html template, the link was partially hardcoded like this</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/polls/&#123;&#123; question.id &#125;&#125;/&quot;</span>&gt;</span>&#123;&#123; question.question_text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>The problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the <code>\\&#123;\\% url \\%\\&#125;</code> template tag:<br>The problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the <code>\\&#123;\\% url \\%\\&#125;</code> template tag:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;detail&#x27; question.id %&#125;&quot;</span>&gt;</span>&#123;&#123; question.question_text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>The way this works is by looking up the URL definition as specified in the polls.urls module. You can see exactly where the URL name of ‘detail’ is defined below:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># the &#x27;name&#x27; value as called by the &#123;% url %&#125; template tag</span><br><span class=\"line\">path(&#x27;<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/&#x27;, views.detail, name=&#x27;detail&#x27;),</span><br></pre></td></tr></table></figure>\n\n<p>If you want to change the URL of the polls detail view to something else, perhaps to something like polls/specifics/12/ instead of doing it in the template (or templates) you would change it in polls/urls.py:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># added the word &#x27;specifics&#x27;</span><br><span class=\"line\">path(&#x27;specifics/<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/&#x27;, views.detail, name=&#x27;detail&#x27;),</span><br></pre></td></tr></table></figure>\n<h5 id=\"Namespacing-URL-names\"><a href=\"#Namespacing-URL-names\" class=\"headerlink\" title=\"Namespacing URL names\"></a>Namespacing URL names</h5><p>The answer is to add namespaces to your URLconf. In the polls/urls.py file, go ahead and add an app_name to set the application namespace:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from django.urls import path</span><br><span class=\"line\"></span><br><span class=\"line\">from . import views</span><br><span class=\"line\"></span><br><span class=\"line\">app_name = &#x27;polls&#x27;</span><br><span class=\"line\">urlpatterns = [</span><br><span class=\"line\">    path(&#x27;&#x27;, views.index, name=&#x27;index&#x27;),</span><br><span class=\"line\">    path(&#x27;<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/&#x27;, views.detail, name=&#x27;detail&#x27;),</span><br><span class=\"line\">    path(&#x27;<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/results/&#x27;, views.results, name=&#x27;results&#x27;),</span><br><span class=\"line\">    path(&#x27;<span class=\"tag\">&lt;<span class=\"name\">int:question_id</span>&gt;</span>/vote/&#x27;, views.vote, name=&#x27;vote&#x27;),</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>Change your polls/index.html template from:<br>polls/templates/polls/index.html¶</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;detail&#x27; question.id %&#125;&quot;</span>&gt;</span>&#123;&#123; question.question_text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>to point at the namespaced detail view:<br>polls/templates/polls/index.html¶</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;% url &#x27;polls:detail&#x27; question.id %&#125;&quot;</span>&gt;</span>&#123;&#123; question.question_text &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"版本\"><a href=\"#版本\" class=\"headerlink\" title=\"版本\"></a>版本</h3><p>其中，很令人头疼的便是版本。 如果遇到什么莫名其妙的错，请查看是否是版本的原因。<br>这里的版本原因并不☞一些人说的库依赖严重，好像开发者版本更迭不考虑兼容——或者说居然勤奋的接口重换那般严重。<br>此处仅仅☞在运行新版本时否个方法时，或许会莫名其妙引发一个早已摒弃的函数错误。这时候就可能是在折腾版本是导致有的不同版本有文件残留。在运行时莫名其妙的被<code>import</code>了然后它有调取其他东西，但是找不到的…  </p>\n<p>这时候轻则<code>pip uninstall</code> 重则环境重建。所以可见虚拟环境还是挺有用的嘛——</p>\n<h3 id=\"MVC\"><a href=\"#MVC\" class=\"headerlink\" title=\"MVC\"></a>MVC</h3><p>全名： <code>Model</code> 、<code>View</code>、<code>Controller</code>。模型，视图，控制器这种功能分离的软件设计规范。所以它是通用的…不要和爪哇捆绑，搞得和某个神奇技术一般…   (⊙﹏⊙)</p>\n<hr>\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>在安装之后，使用<code>django-admin startproject </code>+名字来初始化一个工程。   对比到<code>python</code>中就是创建好了文档目录，还在文件中写入相关框架代码，以此支持运行。</p>\n<h3 id=\"试一下\"><a href=\"#试一下\" class=\"headerlink\" title=\"试一下?\"></a>试一下?</h3><p><code>python manage.py runserver</code><br>便可开启服务器，这时候访问相应端口，就一个欢迎界面，提示嗯~ o(<em>￣▽￣</em>)o，你能开跑了。</p>\n<h4 id=\"再试一下？\"><a href=\"#再试一下？\" class=\"headerlink\" title=\"再试一下？\"></a>再试一下？</h4><p>在11版本中有<code>\\admin</code>地址可以访问，访问之后便是一个登陆界面.<font color=#ef0000>但</font>,并不知道用户名和密码啊~   emm… 不过好处是能看到这个页面至少保证了<code>django</code>在<code>render</code>一个<code>.html</code>页面时是正常的。而之前说的<font color=#9e0000>老版本残留</font>就会导致<code>render</code>时出错。</p>\n<h3 id=\"结构\"><a href=\"#结构\" class=\"headerlink\" title=\"结构\"></a>结构</h3><p>根目录下，’项目名文件’是项目容器😰<br><code>manage.py</code> 命令行工具，emm 类似于<code>python click库</code>的命令行程序，使用参数干不同的事情。<br>进入到项目容器中，其中<code>settings.py</code>顾名思义<br><code>urls.py</code>同上，管理各个<code>url</code>通往哪里<br><code>wsgl.py</code>某个兼容啥，现在不用管…</p>\n<h3 id=\"得知结构之后\"><a href=\"#得知结构之后\" class=\"headerlink\" title=\"得知结构之后\"></a>得知结构之后</h3><p>然后就能</p>\n<ol>\n<li><p>在<code>urls.py</code>里愉快的添加各个功能url。这里面就一个urlpatterns列表，使用<code>djangol.conf.urls.url</code>方法来配置。<br>不过其对应的执行函数都需要一个<code>request</code>来接受请求数据。 <code>return</code>回一个页面~ 现在用到的有<code>django,shortcuts.render 及 render_to_response</code>出来的，以及<code>django.http.HttpResponse</code>出来的东西。</p>\n</li>\n<li><p>嗯…… <code>ulr</code> 链接的执行方法详情就放在新创建的<code>view.py</code>中管理。</p>\n</li>\n<li><p>而在<code>view</code>中需要渲染的html文件则放置在根目录新创建的<code>templates</code>文件夹中。通过在<code>setting.py</code>中的’TEMPLATES’列表中的不知名字典(因为它确实没取名啊😔)de<code>DIRS</code>元素来指路。</p>\n</li>\n</ol>\n<h3 id=\"这下可以很厉害了\"><a href=\"#这下可以很厉害了\" class=\"headerlink\" title=\"这下可以很厉害了\"></a>这下可以很厉害了</h3><p>进而进行数据库配置—— 还在<code>setting.py</code>中的’DATABASES’来指路。<br>但Django规定要使用模型，就要创建一个爱怕怕<code>app</code>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">django-admin startapp TestModel 🦑</span><br></pre></td></tr></table></figure>\n<p>再将此爱怕怕领到<code>setting.py</code>中<code>NSTALLED_APPS</code>中签一下到。<br>随后在<code>TestModel</code>下的<code>models</code>中创建继承于<code>django.db.models.Model</code>的数据类，然后使用隶属于<code>models</code>下的方法来制定数据类型eg:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">name = models.CharField(max_length=<span class=\"number\">20</span>)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>毕竟不能直接通过Python的自由类嘛… 然后也肯定不能通过python的制定类型… 毕竟python数据类型和MySQL天差地别。</p>\n</blockquote>\n<p><font color=a00070>最后</font><br>再回到命令行中使用</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python manage.py migrate        //创建表结构</span><br><span class=\"line\">python manage.py makemigrations //通知更改</span><br><span class=\"line\">python manage.py testModel      // 创建表结构 😲❓</span><br><span class=\"line\">正式拉入编制之后就能用了。</span><br></pre></td></tr></table></figure>\n<p>2019年1月23日</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- Change your models(in *models.py*)</span><br><span class=\"line\">- Run *python manage.py makemigrations* to create migration for those changes</span><br><span class=\"line\">- Run *python manage.py migrate* to apply those changes to the database</span><br></pre></td></tr></table></figure>\n<p>Of courses, If Null Run <em>python manage.py migrate</em> can make a models.py whitch has nothings.</p>\n<h4 id=\"那么这个数据库怎么操作呢？\"><a href=\"#那么这个数据库怎么操作呢？\" class=\"headerlink\" title=\"那么这个数据库怎么操作呢？\"></a>那么这个数据库怎么操作呢？</h4><p>自然是到<code>urls.py</code>中添加🔗链接到方法的路<br>再到容器里面添加t<code>estdb.py</code>来说明方法详细。</p>\n<h5 id=\"增删改查\"><a href=\"#增删改查\" class=\"headerlink\" title=\"增删改查\"></a>增删改查</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">实例化类</span><br><span class=\"line\">直接.save()即保存</span><br><span class=\"line\">未实例化类，<span class=\"built_in\">all</span>标识查找全部</span><br><span class=\"line\">.objects.<span class=\"built_in\">filter</span>(填写删选条件)</span><br><span class=\"line\">.objects.get(获取)</span><br><span class=\"line\">.order_by(排序条件)</span><br><span class=\"line\">更改则是将查出来的东西直接修改.update(修改东西)</span><br><span class=\"line\">再.save保存</span><br><span class=\"line\">删除便是.delete()</span><br><span class=\"line\">``.</span><br><span class=\"line\">差不多了  之后的详细再随情况更新。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### 那么数据库表多了怎么一键生成对应类呢？</span></span><br><span class=\"line\">```shell</span><br><span class=\"line\">python manage.py inspectdb  //自动生成models模型文件</span><br><span class=\"line\">python manage.py inspectdb &gt; app/models.py      //假设有了名为<span class=\"string\">&#x27;app&#x27;</span>的爱怕怕</span><br><span class=\"line\">// 老一套</span><br><span class=\"line\">python manage.py makemigrations</span><br><span class=\"line\">python manage.py migrate</span><br></pre></td></tr></table></figure>\n<p>但是会将之前<code>models.py</code>中的东西删掉… 还会把数据库中的表名重命名… 按它的规矩来生成，嗯…其实也🆗的。</p>\n<h2 id=\"我爱Java-2018年6月24日16点40分的我由衷的写到\"><a href=\"#我爱Java-2018年6月24日16点40分的我由衷的写到\" class=\"headerlink\" title=\"我爱Java 2018年6月24日16点40分的我由衷的写到\"></a>我爱Java 2018年6月24日16点40分的我由衷的写到</h2><p>在<code>MySQL</code>中读取<code>blob</code>存储的字段时，使用<code>BinaryField</code>不可使用其逆向生成的模型读取方式。当然，对照表如下</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x27;AutoField&#x27;: &#x27;integer AUTO<span class=\"emphasis\">_INCREMENT&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;BigAutoField&#x27;: &#x27;bigint AUTO_</span>INCREMENT&#x27;,</span><br><span class=\"line\">&#x27;BinaryField&#x27;: &#x27;longblob&#x27;,</span><br><span class=\"line\">&#x27;BooleanField&#x27;: &#x27;bool&#x27;,</span><br><span class=\"line\">&#x27;CharField&#x27;: &#x27;varchar(%(max<span class=\"emphasis\">_length)s)&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;CommaSeparatedIntegerField&#x27;: &#x27;varchar(%(max_</span>length)s)&#x27;,</span><br><span class=\"line\">&#x27;DateField&#x27;: &#x27;date&#x27;,</span><br><span class=\"line\">&#x27;DateTimeField&#x27;: &#x27;datetime&#x27;,</span><br><span class=\"line\">&#x27;DecimalField&#x27;: &#x27;numeric(%(max<span class=\"emphasis\">_digits)s, %(decimal_</span>places)s)&#x27;,</span><br><span class=\"line\">&#x27;DurationField&#x27;: &#x27;bigint&#x27;,</span><br><span class=\"line\">&#x27;FileField&#x27;: &#x27;varchar(%(max<span class=\"emphasis\">_length)s)&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;FilePathField&#x27;: &#x27;varchar(%(max_</span>length)s)&#x27;,</span><br><span class=\"line\">&#x27;FloatField&#x27;: &#x27;double precision&#x27;,</span><br><span class=\"line\">&#x27;IntegerField&#x27;: &#x27;integer&#x27;,</span><br><span class=\"line\">&#x27;BigIntegerField&#x27;: &#x27;bigint&#x27;,</span><br><span class=\"line\">&#x27;IPAddressField&#x27;: &#x27;char(15)&#x27;,</span><br><span class=\"line\">&#x27;GenericIPAddressField&#x27;: &#x27;char(39)&#x27;,</span><br><span class=\"line\">&#x27;NullBooleanField&#x27;: &#x27;bool&#x27;,</span><br><span class=\"line\">&#x27;OneToOneField&#x27;: &#x27;integer&#x27;,</span><br><span class=\"line\">&#x27;PositiveIntegerField&#x27;: &#x27;integer UNSIGNED&#x27;,</span><br><span class=\"line\">&#x27;PositiveSmallIntegerField&#x27;: &#x27;smallint UNSIGNED&#x27;,</span><br><span class=\"line\">&#x27;SlugField&#x27;: &#x27;varchar(%(max<span class=\"emphasis\">_length)s)&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;SmallIntegerField&#x27;: &#x27;smallint&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;TextField&#x27;: &#x27;longtext&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;TimeField&#x27;: &#x27;time&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\">&#x27;UUIDField&#x27;: &#x27;char(32)&#x27;,</span></span><br><span class=\"line\"><span class=\"emphasis\"></span></span><br></pre></td></tr></table></figure>\n<p>以上是一部分，具体点<a href=\"https://www.cnblogs.com/sun1994/p/8566988.html\">这里</a></p>\n<h5 id=\"模型字段名称\"><a href=\"#模型字段名称\" class=\"headerlink\" title=\"模型字段名称\"></a>模型字段名称</h5><p>在逆向生成时，我遇到过一次将数据库名修改的先例，不过后来似乎没有修改过。  然后就是驼峰命名法的字段可能emm也是因为此我才开始写这些信息，就是，驼峰命名法的字段可能在模型字段中为全小写。  还有就是<code>Django</code>莫名其妙的的编码错误，真的是一分钟编程，一小时修改编码…而且调试起来真的…我目前的调试方式极为原始，所以感觉真的<code>不想编程</code>嗯… </p>\n<h4 id=\"Django-返回文件下载\"><a href=\"#Django-返回文件下载\" class=\"headerlink\" title=\"Django 返回文件下载\"></a>Django 返回文件下载</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">readFile</span>(<span class=\"params\">fn, buf_size=<span class=\"number\">262144</span></span>):</span>  <span class=\"comment\"># 大文件下载，设定缓存大小</span></span><br><span class=\"line\">    f = <span class=\"built_in\">open</span>(fn, <span class=\"string\">&quot;rb&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:  <span class=\"comment\"># 循环读取</span></span><br><span class=\"line\">        c = f.read(buf_size)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> c:</span><br><span class=\"line\">            <span class=\"keyword\">yield</span> c</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\">    f.close()</span><br><span class=\"line\">response = HttpResponse(readFile(filePath), content_type=<span class=\"string\">&#x27;APPLICATION/OCTET-STREAM&#x27;</span>)  <span class=\"comment\"># 设定文件头，这种设定可以让任意文件都能正确下载，而且已知文本文件不是本地打开</span></span><br><span class=\"line\">fileName = <span class=\"string\">&#x27;haya&#x27;</span></span><br><span class=\"line\">fileType = <span class=\"string\">&#x27;.docx&#x27;</span></span><br><span class=\"line\">response[<span class=\"string\">&#x27;Content-Disposition&#x27;</span>] = <span class=\"string\">&#x27;attachment; filename=&#x27;</span> + fileName.encode(<span class=\"string\">&#x27;utf-8&#x27;</span>) + fileType.encode(<span class=\"string\">&#x27;utf-8&#x27;</span>)  <span class=\"comment\"># 设定传输给客户端的文件名称</span></span><br><span class=\"line\">response[<span class=\"string\">&#x27;Content-Length&#x27;</span>] = os.path.getsize(filePath)  <span class=\"comment\"># 传输给客户端的文件大小</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> response </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Python-Docx编辑\"><a href=\"#Python-Docx编辑\" class=\"headerlink\" title=\"Python Docx编辑\"></a>Python Docx编辑</h4><h5 id=\"替换\"><a href=\"#替换\" class=\"headerlink\" title=\"替换\"></a>替换</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在&#96;.docx&#96;文件中将需要替换的位置 使用变量站位，写法&#123;&#123; placheholdParaName &#125;&#125;</span><br></pre></td></tr></table></figure>\n<p><font color=red>使用文件时，只能写做<code>&#123;&#123;placheholdParaName&#125;&#125;</code>不能有空格…另外<code>docx</code>使用<code>docx</code>中的<code>Document</code>读入即可</font></p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tpl = DocxTemplate(self.prjRootPath + <span class=\"string\">&#x27;/word_template/&#x27;</span> + <span class=\"string\">&quot;word_template.docx&quot;</span>)</span><br><span class=\"line\">sub1 = tpl.new_subdoc()</span><br><span class=\"line\">sub1.subdocx = Document(temPath + <span class=\"string\">&#x27;sub1_bond.docx&#x27;</span>)</span><br><span class=\"line\">subContext[<span class=\"string\">&#x27;sub1&#x27;</span>] = sub1</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">上述中，只能写作……难道是因为使用&#123;&#123;someThing&#125;&#125;这种写法而隐藏了？！！</span><br><span class=\"line\">那么，今后写彩带注释岂不是不需要使用^<span class=\"emphasis\">_^而直接使用双花括号的写法就能直接隐藏了么(⊙o⊙ ) 　凄い</span></span><br></pre></td></tr></table></figure>\n<p><strong>Py中</strong>：</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> docxtpl <span class=\"keyword\">import</span> DocxTemplate, InlineImage</span><br><span class=\"line\"><span class=\"keyword\">from</span> docx.shared <span class=\"keyword\">import</span> Mm, Inches, Pt</span><br><span class=\"line\">doc = DocxTemplate(<span class=\"string\">&quot;my_word_template.docx&quot;</span>)</span><br><span class=\"line\">myimage = InlineImage(doc,</span><br><span class=\"line\"><span class=\"string\">&#x27;C:/Users/GuPengxiang/Pictures/ha.jpg&#x27;</span>,width=Mm(<span class=\"number\">20</span>))</span><br><span class=\"line\">context = &#123; <span class=\"string\">&#x27;fundName&#x27;</span> : <span class=\"string\">u&#x27;这里是基金名称&#x27;</span>, <span class=\"string\">&#x27;stars&#x27;</span>:<span class=\"string\">u&#x27;五星级琉璃六&#x27;</span>, <span class=\"string\">&#x27;</span></span><br><span class=\"line\"><span class=\"string\">bench&#x27;</span>: <span class=\"string\">u&#x27;对比基金&#x27;</span>, <span class=\"string\">&#x27;income&#x27;</span>: <span class=\"string\">u&#x27;12&#x27;</span>, <span class=\"string\">&#x27;bb&#x27;</span>: <span class=\"string\">u&#x27;0.1%&#x27;</span>, <span class=\"string\">&#x27;image0&#x27;</span> : myimage&#125;</span><br><span class=\"line\">doc.render(context)</span><br><span class=\"line\">doc.save(<span class=\"string\">&quot;generated_doc.docx&quot;</span>)</span><br></pre></td></tr></table></figure>\n<h4 id=\"生成echarts图表图片\"><a href=\"#生成echarts图表图片\" class=\"headerlink\" title=\"生成echarts图表图片\"></a>生成echarts图表图片</h4><h5 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h5><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 更新软件列表 &amp; 更新软件</span></span><br><span class=\"line\">sudo apt-get update    </span><br><span class=\"line\">sudo apt-get upgrade</span><br><span class=\"line\"><span class=\"comment\"># 下载包</span></span><br><span class=\"line\">pip install pyecharts-snapshot</span><br><span class=\"line\">wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># 解压</span></span><br><span class=\"line\">tar -xzvf phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># 进入路径</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> phantomjs-2.5.0-beta-ubuntu-xenial/bin</span><br><span class=\"line\"><span class=\"comment\"># 赋予权限</span></span><br><span class=\"line\">chmod +x phantomjs</span><br><span class=\"line\"><span class=\"comment\"># 查看版本号</span></span><br><span class=\"line\">phantomjs -v  </span><br><span class=\"line\"><span class=\"comment\"># 若显示版本号，如 2.1.1 则生效</span></span><br></pre></td></tr></table></figure>\n<h5 id=\"生成图片\"><a href=\"#生成图片\" class=\"headerlink\" title=\"生成图片\"></a>生成图片</h5><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pyecharts <span class=\"keyword\">import</span> Line, Pie, Grid</span><br><span class=\"line\"><span class=\"keyword\">from</span> pyecharts_snapshot.main <span class=\"keyword\">import</span> make_a_snapshot</span><br><span class=\"line\"></span><br><span class=\"line\">attr = [<span class=\"string\">&quot;衬衫&quot;</span>, <span class=\"string\">&quot;羊毛衫&quot;</span>, <span class=\"string\">&quot;雪纺衫&quot;</span>, <span class=\"string\">&quot;裤子&quot;</span>, <span class=\"string\">&quot;高跟鞋&quot;</span>, <span class=\"string\">&quot;袜子&quot;</span>]</span><br><span class=\"line\">v1 = [<span class=\"number\">5</span>, <span class=\"number\">20</span>, <span class=\"number\">36</span>, <span class=\"number\">10</span>, <span class=\"number\">10</span>, <span class=\"number\">100</span>]</span><br><span class=\"line\">v2 = [<span class=\"number\">55</span>, <span class=\"number\">60</span>, <span class=\"number\">16</span>, <span class=\"number\">20</span>, <span class=\"number\">15</span>, <span class=\"number\">80</span>]</span><br><span class=\"line\">line = Line(<span class=\"string\">&quot;折线图示例&quot;</span>)</span><br><span class=\"line\">line.add(<span class=\"string\">&quot;商家A&quot;</span>, attr, v1, mark_point=[<span class=\"string\">&quot;average&quot;</span>])</span><br><span class=\"line\">line.add(<span class=\"string\">&quot;商家B&quot;</span>, attr, v2, is_smooth=<span class=\"literal\">True</span>, mark_line=[<span class=\"string\">&quot;max&quot;</span>, <span class=\"string\">&quot;average&quot;</span>])</span><br><span class=\"line\">line.render(<span class=\"string\">&#x27;test.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">make_a_snapshot(<span class=\"string\">&#x27;test.html&#x27;</span>, <span class=\"string\">&#x27;test.pdf&#x27;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 或者直接生成</span></span><br><span class=\"line\">line.render(<span class=\"string\">&#x27;test.png&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p><font color= #f0aabb>在生成图片时，插件包文件源码中有Log，但却是print出来的，而在部署环境中不允许出现print，所以…… 得在包源码中将之屏蔽</font></p>\n<h5 id=\"连续生成图片\"><a href=\"#连续生成图片\" class=\"headerlink\" title=\"连续生成图片\"></a>连续生成图片</h5><p>用以上方法来生成图片是…很慢的🐢⬅这个速度。但可以通过使用为渲染创建一个默认配置环境来避免多次生成环境配置。所以——  具体来看<code>pyecharts</code>中的<a href=\"http://pyecharts.org/#/zh-cn/prepare\">高级说明</a>🕶</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pyecharts <span class=\"keyword\">import</span> Bar, Line</span><br><span class=\"line\"><span class=\"keyword\">from</span> pyecharts.engine <span class=\"keyword\">import</span> create_default_environment</span><br><span class=\"line\"></span><br><span class=\"line\">bar = Bar(<span class=\"string\">&quot;我的第一个图表&quot;</span>, <span class=\"string\">&quot;这里是副标题&quot;</span>)</span><br><span class=\"line\">bar.add(<span class=\"string\">&quot;服装&quot;</span>, [<span class=\"string\">&quot;衬衫&quot;</span>, <span class=\"string\">&quot;羊毛衫&quot;</span>, <span class=\"string\">&quot;雪纺衫&quot;</span>, <span class=\"string\">&quot;裤子&quot;</span>, <span class=\"string\">&quot;高跟鞋&quot;</span>, <span class=\"string\">&quot;袜子&quot;</span>], [<span class=\"number\">5</span>, <span class=\"number\">20</span>, <span class=\"number\">36</span>, <span class=\"number\">10</span>, <span class=\"number\">75</span>, <span class=\"number\">90</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">line = Line(<span class=\"string\">&quot;我的第一个图表&quot;</span>, <span class=\"string\">&quot;这里是副标题&quot;</span>)</span><br><span class=\"line\">line.add(<span class=\"string\">&quot;服装&quot;</span>, [<span class=\"string\">&quot;衬衫&quot;</span>, <span class=\"string\">&quot;羊毛衫&quot;</span>, <span class=\"string\">&quot;雪纺衫&quot;</span>, <span class=\"string\">&quot;裤子&quot;</span>, <span class=\"string\">&quot;高跟鞋&quot;</span>, <span class=\"string\">&quot;袜子&quot;</span>], [<span class=\"number\">5</span>, <span class=\"number\">20</span>, <span class=\"number\">36</span>, <span class=\"number\">10</span>, <span class=\"number\">75</span>, <span class=\"number\">90</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">env = create_default_environment(<span class=\"string\">&quot;html&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># 为渲染创建一个默认配置环境</span></span><br><span class=\"line\"><span class=\"comment\"># create_default_environment(filet_ype)</span></span><br><span class=\"line\"><span class=\"comment\"># file_type: &#x27;html&#x27;, &#x27;svg&#x27;, &#x27;png&#x27;, &#x27;jpeg&#x27;, &#x27;gif&#x27; or &#x27;pdf&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">env.render_chart_to_file(bar, path=<span class=\"string\">&#x27;bar.html&#x27;</span>)</span><br><span class=\"line\">env.render_chart_to_file(line, path=<span class=\"string\">&#x27;line.html&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<p>(<em>￣▽￣</em>)o   如上</p>\n<h3 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h3><pre><code>在生成报表时， 由于采用的是浏览器截图的方式，在使用`phantomjs`时会自动判断图片是否加载完成（echarts在显示图表之前是有一段动画的……）然后再`pyecharts`中并没有关闭动画的接口，而echarts是有的。 但毕竟`echarts`是在做翻译，所以只要在&quot;Chart&quot;基类中，将`animation=False`就可以了。 我改的时候在`chart.py`文件的29行，def __init__中。\n</code></pre>\n<h2 id=\"SSl加密，https配置\"><a href=\"#SSl加密，https配置\" class=\"headerlink\" title=\"SSl加密，https配置\"></a>SSl加密，https配置</h2><p>虽然就配置过之后显得操作很简单，而且也很明显，但就配置之初着实还是费了一些功夫的。或许是因为大而全的东西懒得看，而网上搜索到的粘贴复制之词又太过片面，或许大家写的时候也就当作日记来写的，本就没准备让别人去参考。所以再加上搜索的时候俺表述词不达意，所以总是很曲折（呵，用谷歌搜外文网就不存在这问题，前面就谦虚一下🙃）</p>\n<h3 id=\"之前写的文档\"><a href=\"#之前写的文档\" class=\"headerlink\" title=\"之前写的文档\"></a>之前写的文档</h3><p>1 ssl加密部署步骤说明文档<br>一．申请ssl证书<br>1.生成csr文件，可使用openssl工具生成<br>(1)例:<code>openssl genrsa -des3 -out server.key 1024</code>   生成服务器key文件;<br>(2)例:<code>openssl req -new -key server.key -out server.csr</code>    生成服务器证书请求CSR文件;<br>或使用CSR文件生成工具生成(例<a href=\"https://www.chinassl.net/ssltools/generator-csr.html%EF%BC%8C%E5%A1%AB%E5%86%99%E4%BF%A1%E6%81%AF%E5%90%8E%E7%82%B9%E5%87%BB%E7%94%9F%E6%88%90CSR%E6%96%87%E4%BB%B6%E5%8D%B3%E5%8F%AF\">https://www.chinassl.net/ssltools/generator-csr.html，填写信息后点击生成CSR文件即可</a>)<br>（CSR文件中包括组织部门、国家地区、算法、以及邮箱和域名等信息）<br>2.申请/购买HTTPS证书， 填写与上述相同的信息，验证类型选择DNS，CSR生成选择提供CSR(即提供第一步生成的CSR文件)（例：在阿里云或腾讯等地，本文档撰写时是通过<a href=\"https://freessl.org/\">https://freessl.org/</a> 免费申请而来（一年有效期，单域名，））<br>二、验证域名所属关系<br>1.到域名管理控制台中选择云解析DNS, 选择域名，添加“记录”，记录类型选择‘TXT’，主机记录及记录值填写证书申请方提供内容。<br>2.等待1分钟或10分钟后，等待生效<br>3.点击验证<br>三、证书下载<br>验证通过后，下载网站提供证书，含（CA证书、服务器证书、服务器私钥）<br>四、Apache2部署开启SSL加密<br>更改httpd.conf 文件设置：<br>1.Listen {内网IP}:80<br>2.开启models<br>(1)LoadModule ssl_module modules/mod_ssl.so<br>(2)LoadModule socache_shmcb_module modules/mod_socache_shmcb.so<br>(3)LoadModule rewrite_module modules/mod_rewrite.so<br>(4)ServerName {与域名相同}（未测试是否必须相同）<br>3.http跳转到https:<br>(1)RewriteEngine on<br>(2)RewriteCond %{SERVER_PORT} !^443$<br>(3)RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R]<br>更改extra/httpd-ssl.conf 文件设置<br>1.Listen 443<br>2.ServerName <a href=\"http://www.lejinrong.cn/\">www.lejinrong.cn</a><br>3.ServerAdmin admin@lejinrong<br>4.SSLCertificateFile “c:/Apache24/conf/ssl/server.crt”<br>5.SSLCertificateKeyFile “c:/Apache24/conf/ssl/server.key”<br>第四步中crt文件指向服务器证书文件， 第五步中.key文件指向私钥文件<br>(其余部署方案或许有所不同，会使用CA证书)</p>\n<p>1.1 注意： 确保服务器中防火墙入站规则中添加了80端口和443端口。</p>\n<p>2 附：<br>2.1.1 本地测试方案：</p>\n<p>环境：wamp Apache 2.4.9<br>前言：wamp安装好后，默认的只有http服务，以下配置启用https服务<br>条件：在Apache安装目录下需要有一下文件<br>         [Apache安装目录]/modules/ mod_ssl.so<br>         [Apache安装目录]/bin/ openssl.exe, libeay32.dll, ssleay32.dll<br>         [Apache安装目录]/conf/ openssl.cnf<br>步骤：<br>一、修改配置文件httpd.conf，去掉下面行首的#（载入ssl模块和其他配置文件）<br>LoadModule socache_shmcb_module modules/mod_socache_shmcb.so<br>LoadModule ssl_module modules/mod_ssl.so<br>Include conf/extra/httpd-ssl.conf<br>二、认证文件生成（生成证书签发请求）<br>进入Apache安装目录的bin目录下，输入cmd，进入DOS窗口，输入以下命令<br>openssl req -new -out server.csr -config ../conf/openssl.cnf<br>回车后提示输入密码和确认密码，本机输入：keypasswd<br>后面会提示输入一系列的参数<br>……<br>Country Name (2 letter code) [AU]: （要求输入国家缩写，只能输入2个字母，这里输入cn）<br>State or Province Name (full name) [Some-State]: （要求输入州名或省名，这里输入hubei）<br>Locality Name (eg, city) []: （要求输入城市名，这里输入wuhan）<br>Organization Name (eg, company) [Internet Widgits Pty Ltd]: （要求输入组织名或公司名，这里输入gg）<br>Organizational Unit Name (eg, section) []: （要求输入部门名，这里输入gg）<br>Common Name (eg, YOUR name) []: （要求输入服务器域名或IP地址）<br>Email Address []: （要求输入邮件地址）<br>A challenge password[]:（要求输入密码）<br>An optional company name[]（要求输入公司别名，这里输入ggs）<br>…..<br>生成私钥，在DOS窗口下的Apache的bin目录下输入命令<br>openssl rsa -in privkey.pem -out server.key<br>然后要求输入之前 privkey.pem 的密码（keypasswd)<br>创建证书，输入命令<br>openssl x509 -in server.csr -out server.crt -req -signkey server.key -days 8000<br>回车后，显示创建成功，有效期为 8000 天<br>将Apache的bin目录下的server.csr、server.crt、server.key拷贝到Apache安装目录下的conf\\ssl，若没有ssl文件则创建<br>打开Apache安装目录conf/extra/httpd-ssl.conf文件，设置SSLCertificateFile和SSLCertificateKeyFile<br>SSLCertificateFile “C:/apache2.4.9/conf/ssl/server.crt”<br>SSLCertificateKeyFile “C:/apache2.4.9/conf/ssl/server.key”<br>最后重启Apache服务，HTTPS服务的默认监听端口为443<br> <br>随后在本机中安装<code>server.crt</code>至<code>收信人的根证书颁发机构</code>即可不再提示证书无效<br>注意：在重启Apache时，若Apache服务启动不起来，则在Apache安装目录的bin目录下，输入httpd –t，可以根据提示来修改你的配置文件</p>\n<h3 id=\"附\"><a href=\"#附\" class=\"headerlink\" title=\"附\"></a>附</h3><p>现在是2018年8月25日16点01分 所以上面其实是一个月前写给别人看的文档。<br>在我搜的时候由于先在本地配置，尔后再网上找CA发证书，自我感觉这个步骤没有什么问题。就今天在</p>\n<h4 id=\"Apache配置双网站-https\"><a href=\"#Apache配置双网站-https\" class=\"headerlink\" title=\"Apache配置双网站/https\"></a>Apache配置双网站/https</h4><p>的时候，也是这样，先在本地通过不同端口测试，确定方案之后再在服务器上通过<code>ServerName</code>进行区分。<br>也就是启用<code>httpd-vhosts.conf</code>之后，再</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\"># Virtual Hosts</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># Required modules: mod<span class=\"emphasis\">_log_</span>config</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\"># If you want to maintain multiple domains/hostnames on your</span></span><br><span class=\"line\"><span class=\"section\"># machine you can setup VirtualHost containers for them. Most configurations</span></span><br><span class=\"line\"><span class=\"section\"># use only name-based virtual hosts so the server doesn&#x27;t need to worry about</span></span><br><span class=\"line\"><span class=\"section\"># IP addresses. This is indicated by the asterisks in the directives below.</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># Please see the documentation at </span></span><br><span class=\"line\"><span class=\"section\"># <span class=\"xml\">&lt;URL:http://httpd.apache.org/docs/2.4/vhosts/&gt;</span></span></span><br><span class=\"line\"><span class=\"section\"># for further details before you try to setup virtual hosts.</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># You may use the command line option &#x27;-S&#x27; to verify your virtual host</span></span><br><span class=\"line\"><span class=\"section\"># configuration.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># VirtualHost example:</span></span><br><span class=\"line\"><span class=\"section\"># Almost any Apache directive may go into a VirtualHost container.</span></span><br><span class=\"line\"><span class=\"section\"># The first VirtualHost section is used for all requests that do not</span></span><br><span class=\"line\"><span class=\"section\"># match a ServerName or ServerAlias in any <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span>&gt;</span></span> block.</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span> <span class=\"attr\">192.168.1.81:80</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"code\">    ServerName www.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    ServerAlias www.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    ServerAdmin www.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    #指定myweb项目的wsgi.py配置文件路径  </span></span><br><span class=\"line\"><span class=\"code\">    WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py</span></span><br><span class=\"line\"><span class=\"code\">    #配置静态变量路径</span></span><br><span class=\"line\"><span class=\"code\">    Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/</span></span><br><span class=\"line\"><span class=\"code\">    &lt;Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static&gt;  </span></span><br><span class=\"line\"><span class=\"code\">        Allow from all</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/Directory&gt;</span></span><br><span class=\"line\"><span class=\"code\">    DocumentRoot &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2&quot;</span></span><br><span class=\"line\"><span class=\"code\">    &lt;Directory &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2&quot;&gt;  </span></span><br><span class=\"line\"><span class=\"code\">        Options Indexes FollowSymLinks</span></span><br><span class=\"line\"><span class=\"code\">        AllowOverride None</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/Directory&gt;</span></span><br><span class=\"line\"><span class=\"code\">    RewriteEngine on</span></span><br><span class=\"line\"><span class=\"code\">    RewriteCond %&#123;SERVER_PORT&#125; !^400$</span></span><br><span class=\"line\"><span class=\"code\">    RewriteRule ^/?(.*)$ https://%&#123;SERVER_NAME&#125;/$1 [L,R]</span></span><br><span class=\"line\"><span class=\"code\">    ErrorLog &quot;logs/dummy-host.example.com-error.log&quot;</span></span><br><span class=\"line\"><span class=\"code\">    CustomLog &quot;logs/dummy-host.example.com-access.log&quot; common</span></span><br><span class=\"line\"><span class=\"code\">&lt;/VirtualHost&gt;</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">&lt;VirtualHost 192.168.1.81:8880&gt;</span></span><br><span class=\"line\"><span class=\"code\">    ServerName lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    ServerAlias vip.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    ServerAdmin vip.lejinrong.cn</span></span><br><span class=\"line\"><span class=\"code\">    #指定myweb项目的wsgi.py配置文件路径  </span></span><br><span class=\"line\"><span class=\"code\">    WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py</span></span><br><span class=\"line\"><span class=\"code\">    #配置静态变量路径</span></span><br><span class=\"line\"><span class=\"code\">    Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/</span></span><br><span class=\"line\"><span class=\"code\">    &lt;Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static&gt;</span></span><br><span class=\"line\"><span class=\"code\">        Allow from all</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/Directory&gt;</span></span><br><span class=\"line\"><span class=\"code\">    DocumentRoot &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3&quot;</span></span><br><span class=\"line\"><span class=\"code\">    &lt;Directory &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3&quot;&gt;  </span></span><br><span class=\"line\"><span class=\"code\">        Options Indexes FollowSymLinks</span></span><br><span class=\"line\"><span class=\"code\">        AllowOverride None</span></span><br><span class=\"line\"><span class=\"code\">    &lt;/Directory&gt;</span></span><br><span class=\"line\"><span class=\"code\">    ErrorLog &quot;logs/dummy-host.example.com-error.log&quot;</span></span><br><span class=\"line\"><span class=\"code\">    CustomLog &quot;logs/dummy-host.example.com-access.log&quot; common</span></span><br><span class=\"line\"><span class=\"code\">    RewriteEngine on</span></span><br><span class=\"line\"><span class=\"code\">    RewriteCond %&#123;SERVER_PORT&#125; !^443$</span></span><br><span class=\"line\"><span class=\"code\">    RewriteRule ^/?(.*)$ https://%&#123;SERVER_NAME&#125;/$1 [L,R]</span></span><br><span class=\"line\"><span class=\"code\">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure>\n<p>同理，在<code>httpd-ssl.conf</code>中也是通过配置不同<code>VirtualHost</code>进行区分</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># This is the Apache server configuration file providing SSL support.</span></span><br><span class=\"line\"><span class=\"section\"># It contains the configuration directives to instruct the server how to</span></span><br><span class=\"line\"><span class=\"section\"># serve pages over an https connection. For detailed information about these </span></span><br><span class=\"line\"><span class=\"section\"># directives see <span class=\"xml\">&lt;URL:http://httpd.apache.org/docs/2.4/mod/mod_ssl.html&gt;</span></span></span><br><span class=\"line\"><span class=\"section\"># </span></span><br><span class=\"line\"><span class=\"section\"># Do NOT simply read the instructions in here without understanding</span></span><br><span class=\"line\"><span class=\"section\"># what they do.  They&#x27;re here only as hints or reminders.  If you are unsure</span></span><br><span class=\"line\"><span class=\"section\"># consult the online docs. You have been warned.  </span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># Required modules: mod<span class=\"emphasis\">_log_</span>config, mod<span class=\"emphasis\">_setenvif, mod_</span>ssl,</span></span><br><span class=\"line\"><span class=\"section\">#          socache<span class=\"emphasis\">_shmcb_</span>module (for default value of SSLSessionCache)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\"># Pseudo Random Number Generator (PRNG):</span></span><br><span class=\"line\"><span class=\"section\"># Configure one or more sources to seed the PRNG of the SSL library.</span></span><br><span class=\"line\"><span class=\"section\"># The seed data should be of good random quality.</span></span><br><span class=\"line\"><span class=\"section\"># WARNING! On some platforms /dev/random blocks if not enough entropy</span></span><br><span class=\"line\"><span class=\"section\"># is available. This means you then cannot use the /dev/random device</span></span><br><span class=\"line\"><span class=\"section\"># because it would lead to very long connection times (as long as</span></span><br><span class=\"line\"><span class=\"section\"># it requires to make more entropy available). But usually those</span></span><br><span class=\"line\"><span class=\"section\"># platforms additionally provide a /dev/urandom device which doesn&#x27;t</span></span><br><span class=\"line\"><span class=\"section\"># block. So, if available, use this one instead. Read the mod<span class=\"emphasis\">_ssl User</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"># Manual for more details.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRandomSeed startup file:/dev/random  512</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRandomSeed startup file:/dev/urandom 512</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRandomSeed connect file:/dev/random  512</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRandomSeed connect file:/dev/urandom 512</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"># When we also provide SSL we have to listen to the </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"># standard HTTP port (see above) and to the HTTPS port</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">Listen 443</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">Listen 400</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#ServerName www.lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##  SSL Global Context</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##  All SSL configuration in this context applies both to</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##  the main server and all SSL-enabled virtual hosts.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   SSL Cipher Suite:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   List the ciphers that the client is permitted to negotiate,</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   and that httpd will negotiate as the client of a proxied server.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   See the OpenSSL documentation for a complete list of ciphers, and</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   ensure these follow appropriate best practices for this deployment.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   httpd 2.2.30, 2.4.13 and later force-disable aNULL, eNULL and EXP ciphers,</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   while OpenSSL disabled these by default in 0.9.8zf/1.0.0r/1.0.1m/1.0.2a.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLProxyCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  By the end of 2016, only TLSv1.2 ciphers should remain in use.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  Older ciphers should be disallowed as soon as possible, while the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  kRSA ciphers do not offer forward secrecy.  These changes inhibit</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  older clients (such as IE6 SP2 or IE8 on Windows XP, or other legacy</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  non-browser tooling) from successfully connecting.  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#  To restrict mod_</span>ssl to use only TLSv1.2 ciphers, and disable</span></span><br><span class=\"line\"><span class=\"section\">#  those protocols which do not support forward secrecy, replace</span></span><br><span class=\"line\"><span class=\"section\">#  the SSLCipherSuite and SSLProxyCipherSuite directives above with</span></span><br><span class=\"line\"><span class=\"section\">#  the following two directives, as soon as practical.</span></span><br><span class=\"line\"><span class=\"section\"># SSLCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA</span></span><br><span class=\"line\"><span class=\"section\"># SSLProxyCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   User agents such as web browsers are not configured for the user&#x27;s</span></span><br><span class=\"line\"><span class=\"section\">#   own preference of either security or performance, therefore this</span></span><br><span class=\"line\"><span class=\"section\">#   must be the prerogative of the web server administrator who manages</span></span><br><span class=\"line\"><span class=\"section\">#   cpu load versus confidentiality, so enforce the server&#x27;s cipher order.</span></span><br><span class=\"line\">SSLHonorCipherOrder on </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   SSL Protocol support:</span></span><br><span class=\"line\"><span class=\"section\">#   List the protocol versions which clients are allowed to connect with.</span></span><br><span class=\"line\"><span class=\"section\">#   Disable SSLv3 by default (cf. RFC 7525 3.1.1).  TLSv1 (1.0) should be</span></span><br><span class=\"line\"><span class=\"section\">#   disabled as quickly as practical.  By the end of 2016, only the TLSv1.2</span></span><br><span class=\"line\"><span class=\"section\">#   protocol or later should remain in use.</span></span><br><span class=\"line\">SSLProtocol all -SSLv3</span><br><span class=\"line\">SSLProxyProtocol all -SSLv3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   Pass Phrase Dialog:</span></span><br><span class=\"line\"><span class=\"section\">#   Configure the pass phrase gathering process.</span></span><br><span class=\"line\"><span class=\"section\">#   The filtering dialog program (`builtin&#x27; is an internal</span></span><br><span class=\"line\"><span class=\"section\">#   terminal dialog) has to provide the pass phrase on stdout.</span></span><br><span class=\"line\">SSLPassPhraseDialog  builtin</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   Inter-Process Session Cache:</span></span><br><span class=\"line\"><span class=\"section\">#   Configure the SSL Session Cache: First the mechanism </span></span><br><span class=\"line\"><span class=\"section\">#   to use and second the expiring timeout (in seconds).</span></span><br><span class=\"line\"><span class=\"section\">#SSLSessionCache         &quot;dbm:c:/Apache24/logs/ssl<span class=\"emphasis\">_scache&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLSessionCache        &quot;shmcb:c:/Apache24/logs/ssl_</span>scache(512000)&quot;</span></span><br><span class=\"line\">SSLSessionCacheTimeout  300</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   OCSP Stapling (requires OpenSSL 0.9.8h or later)</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\">#   This feature is disabled by default and requires at least</span></span><br><span class=\"line\"><span class=\"section\">#   the two directives SSLUseStapling and SSLStaplingCache.</span></span><br><span class=\"line\"><span class=\"section\">#   Refer to the documentation on OCSP Stapling in the SSL/TLS</span></span><br><span class=\"line\"><span class=\"section\">#   How-To for more information.</span></span><br><span class=\"line\"><span class=\"section\">#</span></span><br><span class=\"line\"><span class=\"section\">#   Enable stapling for all SSL-enabled servers:</span></span><br><span class=\"line\"><span class=\"section\">#SSLUseStapling On</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   Define a relatively small cache for OCSP Stapling using</span></span><br><span class=\"line\"><span class=\"section\">#   the same mechanism that is used for the SSL session cache</span></span><br><span class=\"line\"><span class=\"section\">#   above.  If stapling is used with more than a few certificates,</span></span><br><span class=\"line\"><span class=\"section\">#   the size may need to be increased.  (AH01929 will be logged.)</span></span><br><span class=\"line\"><span class=\"section\">#SSLStaplingCache &quot;shmcb:c:/Apache24/logs/ssl<span class=\"emphasis\">_stapling(32768)&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Seconds before valid OCSP responses are expired from the cache</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLStaplingStandardCacheTimeout 3600</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Seconds before invalid OCSP responses are expired from the cache</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLStaplingErrorCacheTimeout 600</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">## SSL Virtual Host Context</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">##</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span> <span class=\"attr\">192.168.1.81:400</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   General setup for the virtual host</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">DocumentRoot &quot;c:/Apache24/htdocs&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ServerName www.lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ServerAdmin admin@lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ErrorLog &quot;c:/Apache24/logs/error.log&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">TransferLog &quot;c:/Apache24/logs/access.log&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   SSL Engine Switch:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Enable/Disable SSL for this virtual host.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLEngine on</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Server Certificate:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Point SSLCertificateFile at a PEM encoded certificate.  If</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   the certificate is encrypted, then you will be prompted for a</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   pass phrase.  Note that a kill -HUP will prompt again.  Keep</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   in mind that if you have both an RSA and a DSA certificate you</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   can configure both in parallel (to also allow the use of DSA</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   ciphers, etc.)</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Some ECC cipher suites (http://www.ietf.org/rfc/rfc4492.txt)</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   require an ECC certificate which can also be configured in</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   parallel.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCertificateFile &quot;c:/Apache24/conf/ssl/server.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateFile &quot;c:/Apache24/conf/server-dsa.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateFile &quot;c:/Apache24/conf/server-ecc.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Server Private Key:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   If the key is not combined with the certificate, use this</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   directive to point at the key file.  Keep in mind that if</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   you&#x27;ve both a RSA and a DSA private key you can configure</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   both in parallel (to also allow the use of DSA ciphers, etc.)</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   ECC keys, when in use, can also be configured in parallel</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCertificateKeyFile &quot;c:/Apache24/conf/ssl/server.key&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateKeyFile &quot;c:/Apache24/conf/server-dsa.key&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateKeyFile &quot;c:/Apache24/conf/server-ecc.key&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Server Certificate Chain:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Point SSLCertificateChainFile at a file containing the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   concatenation of PEM encoded CA certificates which form the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   certificate chain for the server certificate. Alternatively</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   the referenced file can be the same as SSLCertificateFile</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   when the CA certificates are directly appended to the server</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   certificate for convenience.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCertificateChainFile &quot;c:/Apache24/conf/server-ca.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Certificate Authority (CA):</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Set the CA certificate verification path where to find CA</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   certificates for client authentication or alternatively one</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   huge file containing all of them (file must be PEM encoded)</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Note: Inside SSLCACertificatePath you need hash symlinks</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#         to point to the certificate files. Use the provided</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#         Makefile to update the hash symlinks after changes.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCACertificatePath &quot;c:/Apache24/conf/ssl.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCACertificateFile &quot;c:/Apache24/conf/ssl.crt/ca-bundle.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Certificate Revocation Lists (CRL):</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Set the CA revocation path where to find CA CRLs for client</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   authentication or alternatively one huge file containing all</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   of them (file must be PEM encoded).</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   The CRL checking mode needs to be configured explicitly</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   through SSLCARevocationCheck (defaults to &quot;none&quot; otherwise).</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Note: Inside SSLCARevocationPath you need hash symlinks</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#         to point to the certificate files. Use the provided</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#         Makefile to update the hash symlinks after changes.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCARevocationPath &quot;c:/Apache24/conf/ssl.crl&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCARevocationFile &quot;c:/Apache24/conf/ssl.crl/ca-bundle.crl&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLCARevocationCheck chain</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Client Authentication (Type):</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Client certificate verification type and depth.  Types are</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   none, optional, require and optional_</span>no<span class=\"emphasis\">_ca.  Depth is a</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   number which specifies how deeply to verify the certificate</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   issuer chain before deciding the certificate is not valid.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLVerifyClient require</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLVerifyDepth  10</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   TLS-SRP mutual authentication:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Enable TLS-SRP and set the path to the OpenSSL SRP verifier</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   file (containing login information for SRP user accounts). </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Requires OpenSSL 1.0.1 or newer. See the mod_</span>ssl FAQ for</span></span><br><span class=\"line\"><span class=\"section\">#   detailed instructions on creating this file. Example:</span></span><br><span class=\"line\"><span class=\"section\">#   &quot;openssl srp -srpvfile c:/Apache24/conf/passwd.srpv -add username&quot;</span></span><br><span class=\"line\"><span class=\"section\">#SSLSRPVerifierFile &quot;c:/Apache24/conf/passwd.srpv&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">#   Access Control:</span></span><br><span class=\"line\"><span class=\"section\">#   With SSLRequire you can do per-directory access control based</span></span><br><span class=\"line\"><span class=\"section\">#   on arbitrary complex boolean expressions containing server</span></span><br><span class=\"line\"><span class=\"section\">#   variable checks and other lookup directives.  The syntax is a</span></span><br><span class=\"line\"><span class=\"section\">#   mixture between C and Perl.  See the mod<span class=\"emphasis\">_ssl documentation</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   for more details.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Location</span> /&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLRequire (    %&#123;SSL_</span>CIPHER&#125; !~ m/^(EXP|NULL)/ \\</span></span><br><span class=\"line\"><span class=\"section\">#            and %&#123;SSL<span class=\"emphasis\">_CLIENT_</span>S<span class=\"emphasis\">_DN_</span>O&#125; eq &quot;Snake Oil, Ltd.&quot; \\</span></span><br><span class=\"line\"><span class=\"section\">#            and %&#123;SSL<span class=\"emphasis\">_CLIENT_</span>S<span class=\"emphasis\">_DN_</span>OU&#125; in &#123;&quot;Staff&quot;, &quot;CA&quot;, &quot;Dev&quot;&#125; \\</span></span><br><span class=\"line\"><span class=\"section\">#            and %&#123;TIME<span class=\"emphasis\">_WDAY&#125; &gt;= 1 and %&#123;TIME_</span>WDAY&#125; &lt;= 5 \\</span></span><br><span class=\"line\"><span class=\"section\">#            and %&#123;TIME<span class=\"emphasis\">_HOUR&#125; &gt;= 8 and %&#123;TIME_</span>HOUR&#125; &lt;= 20       ) \\</span></span><br><span class=\"line\"><span class=\"section\">#           or %&#123;REMOTE<span class=\"emphasis\">_ADDR&#125; =~ m/^192\\.76\\.162\\.[0-9]+$/</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Location</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   SSL Engine Options:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Set various options for the SSL engine.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o FakeBasicAuth:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     Translate the client X.509 into a Basic Authorisation.  This means that</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     the standard Auth/DBMAuth methods can be used for access control.  The</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     user name is the `one line&#x27; version of the client&#x27;s X.509 certificate.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     Note that no password is obtained from the user. Every entry in the user</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     file needs this password: `xxj31ZMTZzkVA&#x27;.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o ExportCertData:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This exports two additional environment variables: SSL_</span>CLIENT<span class=\"emphasis\">_CERT and</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     SSL_</span>SERVER<span class=\"emphasis\">_CERT. These contain the PEM-encoded certificates of the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     server (always existing) and the client (only existing when client</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     authentication is used). This can be used to import the certificates</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     into CGI scripts.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o StdEnvVars:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This exports the standard SSL/TLS related `SSL_</span><span class=\"emphasis\">*&#x27; environment variables.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     Per default this exportation is switched off for performance reasons,</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     because the extraction step is an expensive operation and is usually</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     useless for serving static content. So one usually enables the</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     exportation for CGI and SSI requests only.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o StrictRequire:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This denies access when &quot;SSLRequireSSL&quot; or &quot;SSLRequire&quot; applied even</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     under a &quot;Satisfy any&quot; situation, i.e. when it applies access is denied</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     and no other module can change it.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o OptRenegotiate:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This enables optimized SSL connection renegotiation handling when SSL</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     directives are used in per-directory context. </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">FilesMatch</span> &quot;\\<span class=\"attr\">.</span>(<span class=\"attr\">cgi</span>|<span class=\"attr\">shtml</span>|<span class=\"attr\">phtml</span>|<span class=\"attr\">php</span>)$&quot;&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    SSLOptions +StdEnvVars</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">FilesMatch</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> &quot;<span class=\"attr\">c:</span>/<span class=\"attr\">Apache24</span>/<span class=\"attr\">cgi-bin</span>&quot;&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    SSLOptions +StdEnvVars</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   SSL Protocol Adjustments:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   The safe and default but still SSL/TLS standard compliant shutdown</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   approach is that mod_ssl sends the close notify alert but doesn&#x27;t wait for</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   the close notify alert from client. When you need a different shutdown</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   approach you can use one of the following variables:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o ssl-unclean-shutdown:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This forces an unclean shutdown when the connection is closed, i.e. no</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     SSL close notify alert is sent or allowed to be received.  This violates</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     the SSL/TLS standard but is needed for some brain-dead browsers. Use</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     this when you receive I/O errors because of the standard approach where</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     mod_ssl sends the close notify alert.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   o ssl-accurate-shutdown:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     This forces an accurate shutdown when the connection is closed, i.e. a</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     SSL close notify alert is send and mod_ssl waits for the close notify</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     alert of the client. This is 100% SSL/TLS standard compliant, but in</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     practice often causes hanging connections with brain-dead browsers. Use</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     this only for browsers where you know that their SSL implementation</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#     works correctly. </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Notice: Most problems of broken clients are also related to the HTTP</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   keep-alive facility, so you usually additionally want to disable</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   keep-alive for those clients, too. Use variable &quot;nokeepalive&quot; for this.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Similarly, one has to force some clients to use HTTP/1.0 to workaround</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   their broken HTTP/1.1 implementation. Use variables &quot;downgrade-1.0&quot; and</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   &quot;force-response-1.0&quot; for this.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">BrowserMatch &quot;MSIE [2-5]&quot; \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">         nokeepalive ssl-unclean-shutdown \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">         downgrade-1.0 force-response-1.0</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   Per-Server Logging:</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   The home of a custom SSL log file. Use this when you want a</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#   compact non-error SSL logfile on a virtual host basis.</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">CustomLog &quot;c:/Apache24/logs/ssl_request.log&quot; \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">          &quot;%t %h %&#123;SSL_PROTOCOL&#125;x %&#123;SSL_CIPHER&#125;x \\&quot;%r\\&quot; %b&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#指定myweb项目的wsgi.py配置文件路径  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#配置静态变量路径</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> <span class=\"attr\">D:</span>/<span class=\"attr\">FundEvaluationSystem_svn1</span>/<span class=\"attr\">Fund_Evaluation_System_V2</span>/<span class=\"attr\">static</span>&gt;</span></span>  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    Allow from all</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">DocumentRoot &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> &quot;<span class=\"attr\">D:</span>/<span class=\"attr\">FundEvaluationSystem_svn1</span>/<span class=\"attr\">Fund_Evaluation_System_V2</span>&quot;&gt;</span></span>  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    Options Indexes FollowSymLinks</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    AllowOverride None</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">VirtualHost</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">VirtualHost</span> <span class=\"attr\">192.168.1.81:443</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">DocumentRoot &quot;c:/Apache24/htdocs&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ServerName www.lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ServerAdmin admin@lejinrong.cn</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">ErrorLog &quot;c:/Apache24/logs/error.log&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">TransferLog &quot;c:/Apache24/logs/access.log&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLEngine on</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCertificateFile &quot;c:/Apache24/conf/ssl/server.crt&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">SSLCertificateKeyFile &quot;c:/Apache24/conf/ssl/server.key&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">FilesMatch</span> &quot;\\<span class=\"attr\">.</span>(<span class=\"attr\">cgi</span>|<span class=\"attr\">shtml</span>|<span class=\"attr\">phtml</span>|<span class=\"attr\">php</span>)$&quot;&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    SSLOptions +StdEnvVars</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">FilesMatch</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> &quot;<span class=\"attr\">c:</span>/<span class=\"attr\">Apache24</span>/<span class=\"attr\">cgi-bin</span>&quot;&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    SSLOptions +StdEnvVars</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">BrowserMatch &quot;MSIE [2-5]&quot; \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">         nokeepalive ssl-unclean-shutdown \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">         downgrade-1.0 force-response-1.0</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">CustomLog &quot;c:/Apache24/logs/ssl_request.log&quot; \\</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">          &quot;%t %h %&#123;SSL_PROTOCOL&#125;x %&#123;SSL_CIPHER&#125;x \\&quot;%r\\&quot; %b&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> <span class=\"attr\">D:</span>/<span class=\"attr\">FundEvaluationSystem_svn1</span>/<span class=\"attr\">Fund_Evaluation_System_V3</span>/<span class=\"attr\">static</span>&gt;</span></span>  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    Allow from all</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">DocumentRoot &quot;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3&quot;</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Directory</span> &quot;<span class=\"attr\">D:</span>/<span class=\"attr\">FundEvaluationSystem_svn1</span>/<span class=\"attr\">Fund_Evaluation_System_V3</span>&quot;&gt;</span></span>  </span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    Options Indexes FollowSymLinks</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">    AllowOverride None</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">Directory</span>&gt;</span></span></span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">VirtualHost</span>&gt;</span></span></span></span></span><br></pre></td></tr></table></figure>\n<p>但其实 都写了跳转，所以在<code>httpd-vhosts.conf</code>文件中的项目以及静态资源路径指定就不用指定了，只不过我懒得删…<br>还有一个坑点就是 原本有一个指定项目路径以及python环境的语句：</p>\n<figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">#WSGIPythonPath &quot;C:/Python27/Lib;C:/Python27/Lib/site-packages;C:/Python27/DLLs&quot;</span></span><br><span class=\"line\"><span class=\"section\">#WSGIPythonPath D:/FundEvaluationSystem<span class=\"emphasis\">_svn1</span></span></span><br><span class=\"line\"><span class=\"section\"><span class=\"emphasis\">#WSGIPythonHome &quot;C:/Python27&quot;</span></span></span><br></pre></td></tr></table></figure>\n<p>我不知道按照上下这两种为什么会出问题，但网上那些人不会。但中间那个是用来指向项目路径的一个取巧的办法。哦因为wsgi或许我已经在别处制订过了。所以只要在<code>wsgi.py</code>中声明<code>sys.path.append(&#39;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2&#39;)</code>就可以将项目包括进来，而不需要通过 第二句那个制定<code>python</code>路径的东西。而用那个，会导致资源只有声明的项目1会被加载，而项目2的资源就不会声明，而将那三句话注释，只要分别在’wsgi.py’中声明项目资源，而在<code>.conf</code>文件中指向’wsgi.py’文件就可以如数加载了。</p>\n<p>(⊙﹏⊙)语序  逻辑混乱之后不加班了再整理吧~~😭</p>\n<h1 id=\"前端-Vue\"><a href=\"#前端-Vue\" class=\"headerlink\" title=\"前端 Vue\"></a>前端 Vue</h1><p><code>vue</code>的使用方式可以通过<code>html</code>页面直接引用，也能直接用<code>vue-cil</code>创建项目。 网上人称<code>vue</code>脚手架？晓不大得<br>而我这里自然说的就是 <code>vue-cil</code>即 通过<code>vue init webpack &lt;prjName&gt;</code>来生成的项目喽</p>\n<p>系统的创建以及介绍之后使用再熟一些再写，现在先记一些零散的东西。 [^_^]2018年9月18日 21点36分</p>\n<h3 id=\"路由配置登陆访问\"><a href=\"#路由配置登陆访问\" class=\"headerlink\" title=\"路由配置登陆访问\"></a>路由配置登陆访问</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在&#96;router&#x2F;index.js&#96;中：</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  path: &#39;&#x2F;&#39;,</span><br><span class=\"line\">  &#x2F;&#x2F; 首页</span><br><span class=\"line\">  name: &#39;Main&#39;,</span><br><span class=\"line\">  component: Main,</span><br><span class=\"line\">  meta: &#123;</span><br><span class=\"line\">    requireAuth: true,  &#x2F;&#x2F; 添加该字段，表示进入这个路由是需要登录的</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Python笔记(notes of Python)","date":"2017-07-01T13:20:00.000Z","modified":"2018-05-28 17:30","slug":"notes/noteOfpython","_content":"author:Ian\n\n![python](https://www.python.org/static/img/python-logo@2x.png)\n\n## PiP Not Found Issue\n使用`pip`安装某包时， 提示让更新， 按提示操作更新没效果没反应再用就提示`ModuleNotFoundError: No module named 'pip'` (ˉ▽ˉ；)...\n\n## ModuleNotFoundError: No module named 'pip'\n### 升级`PiP`时出现问题可由下方命令修复\n```\npython -m ensurepip\npython -m pip install --upgrade pip\n```\n## SSL校验\n安装EasyOCR时,\n`reader = easyocr.Reader(['ch_sim','en'])`\n下载到接近90,结果报错了.... 估计是SSL问题加入以下两条,不知如何.\n```py\nimport ssl\nssl._create_default_https_context = ssl._create_unverified_context\n```\n\nfrom http.client\n`To revert to the previous, unverified, behavior ssl._create_unverified_context() can be passed to the context parameter.`\n\n### 使用国内镜像下载Python\n```shell\n\tpip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpy等包名)\n    # 一键更新pip 包资源(利用管道grep传输查询到的需要更新包名，传输到install命令)\n    pip3 freeze --local | grep -v '^\\-e' | cut -d = -f 1  | xargs -n1 pip3 install -U\n    # 权限不够的话就在`pip3 install` 之前加`sudo`反正我不习惯用`root`\n```\n\n### 声明参数类型\npython3 在定义函数的时候可以声明函数类型啦：虽然不做限制，但作为`label`还是蛮好的。\n```py\nimport io\n\ndef add(x:int, y:int) -> int:\n    return x + y\n\ndef write(f: io.BytesIO, data: bytes) -> bool:\n    try:\n        f.write(data)\n    except IOError:\n        return False\n    else:\n        return True\n```\n终于不会之后写的忘了，要调用函数还得看半天这个函数应该怎么用…\n\n### 时间处理\n以下可以做周、月的加减处理\nrelativedelta examples\nLet’s begin our trip:\n\n```\nfrom datetime import *; from dateutil.relativedelta import *\nimport calendar\n```\n\n#### Store some values:\n\n```\nNOW = datetime.now()\nTODAY = date.today()\nNOW\n```\n> datetime.datetime(2003, 9, 17, 20, 54, 47, 282310)\n```\nTODAY\n```\n> datetime.date(2003, 9, 17)\n\n#### Next month\n\n>>> NOW+relativedelta(months=+1)\n```\ndatetime.datetime(2003, 10, 17, 20, 54, 47, 282310)\n```\n\n### 合并字典\n```python\na = {}\nb = {'a': 1}\nc = {**a, **b}\n\n```\nkey重复`b`中覆盖`a`, 否则单纯合并。\n\n### 聊胜于无的小玩意 preety tools\n##### 彩色输出\n模块名儿忘了，以后贴2019.03.01  03:08\none minute later:\n`pip3 install ansicolors`\n```\nfrom colors import red, green, blue\nprint(red('This is red'))\nprint(green('This is green'))\nprint(blue('This is blue'))\n\nfrom colors import color\nfor i in range(256):\n    print(color('Color #%d' % i, fg=i))\n```\n以上程序只能写在`.py`文件中,运行，而不能在…‘偷懒模式‘中。\n#### Python3 ThreadPoolExecutor 线程池内库\n在`python3`之后不久，有关线程池的使用就被集成到内库之中。\n`from concurrent.futures import ThreadPoolExecutor`\n使用方法：\n```\n    ThreadPoolExecutor(max_workers=12)\n    # 设置线程池大小\n    .submit(func_name, (para))    # 提交任务\n    .done()    # 查看任务是否完成\n    .cancel()    # 没有被放入线程池中才能生效\n    .result()    # 获取该任务返回值\n\n    from concurrent.futures import as_completed\n    # 用于取出所有任务结果，省去一直用.done去查看的繁琐。但该方法\n# 是一个生成器，所以任务未完成会阻塞。 还有 wait map 等用法就去看文档吧。\n```\n##### 安装错误？\n居然有`pip3 install XX`的错误…这也是因为有旧版`pip3`存留。需要\n```shell\n$bash -d pip3 \n$bash -r pip3\n```\n来清理shell中旧版pip缓存。\n\n### IDE?\n其实要不要IDE都无所为，因为本就是脚本，要IDE只能说打开一个陌生项目查看时能够跳转函数。至于`vim`大概不能跳转吧，毕竟跳转需要把文件都加载才能实现。emm  来来，IDE的话就`PyCharm`除了编程页面颜色难看之外其他功能都不错，另外不支持中文路径，不过应该不是由于`Python`语言造成的，因为蟒蛇脚本是可以在中文路径下运行di<date:2018年5月28日17点16分>\n#### print语句： 含有自动换行，所以要想不换行的话需要在结尾加一个\",\"如：\t  \n\tfor i in range(0,5):\n\n\t\tprint i,\n\n而Python3版本则应该也可以 print(a,b,c);然而Python2.7不行\n\n#### 根据字典中值大小排列：\n\tsorted(dict2.iteritems(),key=lambda item:item[1],reverse=True) \n\t# item[0]即根据键来排列[1]为根据对应值\n\n#### format：如:\n\tprint('my name is{0},and my age is{1}'.format('song',18))\n\n##### or:\n\turl = 'http://www.google.com/page={}/'\n\n\tnewsurl = url.format(i)\n\t# 旋即其后内容则代替{}位置\n另，在{a}{b}{c}可通過format(a=1,b=2,c=3)來賦值\n\n\n---\n\n\n### BeautifulSoup\n#### select语句：在内容前加'#'可以获得其内容，如：\n\tsoup.select('artibodyTitle')[0].text\n\tselect().contents\n\t\"\"\"\n\t把标签变成不同list，同List中的不同元素 然后用[0]可取得第一个元素内容，而不与后方的内容合到一起\n\t*.strip()可将取出的‘\\t\\t’移除\n\t\"\"\"\n\t.select('time-source span a')\n\t# 从time-source中的<span下<a下取得内容e\n\t.select('.productPrice')[0].text\n\t# 獲取class=\"productPrice\"下價格內容\n\n\n---\n\n\n### datetime字符串转时间  时间转字符串:\n\tfrom datetime import datetime\n\tdt = datetime.strptime(timesource,'%Y年%m月%d日%H:%M')(****年*月*日*22:03)\n\tdt.strftime('%Y-%m-%d')\n\n---\n\n### 保存數據到xlsx，sqlite3、csv：\n\t.to_excel('name.xlsx')：输出为excle文件\n\timport sqlite3  #保存到数据库\n\twith sqlite3.connect('name.sqlite') as db:\n\t\tdf.to_sql('name',con = db)\n#####  从数据库取出\n\twith sqlite3.connect('name.sqlite') as db:\n\t\tdf2 = pandas.read_sql_query('SELECT' * FROM name',con = db)\n#### 類型錯誤 TypeError: a bytes-like object is required, not 'str'\n\tcsv_file = open(\"rent.csv\",\"wb\")    \n\tcsv_writer = csv.writer(csv_file, delimiter=',')    #创建writer对象，指定文件与分隔符\n\twriter.writerow(['title', 'summary', 'year', 'id', 'count', 'link'])\n\nPython2.7 轉到 3.5下時提示由此錯誤，代碼爲\n##### 原因，解決方法：\n\t因爲Python3.5 對於str與bytes類型區分變得敏感，所以原本在2.7下正常的代碼不能正常運行。\n\t雖然，利用str.encode() 或者 str = bytes(str, encoding = 'utf-8')可以轉換格式\n\t然而錯誤依然有……解決辦法則是放棄論壇裏的說法，找到官網Demo\n##### 更改如下：\n```python\n\tcsvfile = open('goodsList.csv', 'w', newline='')\n\tspamwriter = csv.writer(csvfile, delimiter=',')\n\tspamwriter.writerow([productTitle, productPrice, productShop])\n```\n細節在於，在打開文件的時候去除`wb`裏面的`b`即不用二進制模式打開。\n\n\n---\n\n### Image下：\n获取图像分辨率：\n```python\n\tim = Image.open(0.0)\n\twidth = im.size[0]\n\theight = im.size[1]\n```\n\n---\n\n### Pandas:\n```python \n\tbox = pd.read_csv(\"filename.csv, index_col=\"Date\", parse_dates=Ture) \n\t#读入文件，讲Date作为日期\n\tbox.columns = ['',''] \n\t# 更改列名\n\tbox['new'] = box['1']+box['2']\n\t# 新增一列为1与2之和\n\tbox.resample('d', 'sum') \n\t# 重新按照‘d’:每天，进行采样  方式为取和('w','sum')所有数据在一周内进行取和\n```\n\n## 闲语：\n#### while True与while 1的区别：\n在Python2 中，循环判断一亿次，我的小电脑的执行速度是\n\t\n    while one: 9.97739481926\n    while_true: 18.8063299656\n    while 1 以压倒性胜利。\n    \n到了Python3中，则成了\n\t\n    while one: 16.101972927001043\n    while_true: 16.25536527499935\n    \n>嗯，不错，不分伯仲——个鬼啊。整体变差了好吧。0.0   原因待明。\n\n[^_^]:\n\thello你好啊.你还认识我吗？我感觉不成.我去,居然成了:怎么回事！！！难道就win比较傻[2018年5月18日不是今天写的啊，只是发现这么个东西，然后，也发现注释不能有空格]\n\n\n\n# Python 小记 📖\n先贴一个客观的教程文档网站<http://www.runoob.com/python/python-tutorial.html>\n#### Windows 下添加环境变量，CMD中Python2 与Python3 共存\nWindows 下 把python2 路径加入到环境变量中，再修改python2.exe可以和python3区分方便在CMD中调用，但代价就是经常命令报错……\n\n不过也可以使用py -2来区分，所以还是不改名字了吧\nWindows 下 用`py -2 -m pip install ***`以及`py -3 -m pip install ***`来区分安装到python2 或者 python3.\n\n### 变量\n类下直接定义的变量可以继承，然而并不能被自己的函数所调用，意义不明…\n\n被继承的类可以调用继承类中定义的self.* 变量，俺认为这是因为它们在实例时都被当成了self 本身。另外，优先调用自己中的self变量，没有，才会去被继承类中去查找（先后顺序可得前方解答）。\n\n## 变换数据类型\nPython 在从服务器接收或者发送数据时需要字符类型转换，'''struct'''便是为此而工作\n#### struct.pack\n```py\n    import struct\n    a = 20\n    b = 400\n    str = struct.pack(\"ii\", a, b)  \n    #转换后的str虽然是字符串类型，但相当于其他语言中的字节流（字节数组），可以在网络\n    #上传输\n    print 'length:', len(str)\n    print str\n    print repr(str)\n```\n> ---- result\n> length: 8\n        >    #----这里是乱码\n> '/x14/x00/x00/x00/x90/x01/x00/x00'\n\n格式符”i”表示转换为int，’ii’表示有两个int变量。进行转换后的结果长度为8个字节（int类型占用4个字节，两个int为8个字节），可以看到输出的结果是乱码，因为结果是二进制数据，所以显示为乱码。可以使用python的内置函数repr来获取可识别的字符串，其中十六进制的0x00000014, 0x00001009分别表示20和400。\n\n#### struct.unpack\n```py\n    str = struct.pack(\"ii\", 20, 400)\n    a1, a2 = struct.unpack(\"ii\", str)\n    print 'a1:', a1\n    print 'a2:', a2\n```\n> ---- result:\n> a1: 20\n> a2: 400\n\nstruct.unpack做的工作刚好与struct.pack相反，用于将字节流转换成python数据类型。它的函数原型为：struct.unpack(fmt, string)，该函数返回一个元组。\n\n#### struct.calcsize\n```python\n    struct.calcsize('i')\n    struct.calcsize('ii')\n    struct.calcsize('iic')\n    struct.calcsize('iicd')\n```\n> 4\n> 8\n> 9\n> 24\n\n`struct.calcsize`用于计算格式字符串所对应的结果的长度，如：`struct.calcsize(‘ii’)`，返回`8`。因为两个`int`类型所占用的长度是`8`个字节。\n\n#### struct.pack_into, struct.unpack_from\n```python\n    import struct\n    from ctypes import create_string_buffer\n\n    buf = create_string_buffer(12)\n    print repr(buf.raw)\n    struct.pack_into(\"iii\", buf, 0, 1, 2, -1)\n    print repr(buf.raw)\n    print struct.unpack_from('iii', buf, 0)\n```\n\n>---- result\n>'/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00'\n>'/x01/x00/x00/x00/x02/x00/x00/x00/xff/xff/xff/xff'\n>(1, 2, -1)\n\n## Python3 \n在<font color=red>Python3</font>中，转换字符串时，不能直接`pack('8s', 'i am str')`, 需要将字符串转换成二进制所以在语法中标记`pack('8s', b'i am str')`使用`'b'`来进行标记\n\n以上来自[Darkbull](http://python.jobbole.com/81554/) 这是转贴地址，不知道为什么我看的转贴挂的原帖地址失效了 😰\n\n---\n\n---\n\n---\n\n### 一不小心发现的语法\n<font color=red>py2.7</font>\n\n    while 'a' in a or b:\n        break\n    # 没错，意思就是如果a或者是b包含‘a’的话…     \n\n### \\* 与 ** 方法:\n呃，原来`*`在MarkDown里面是斜体的意思啊——需要斜体显示的前后各一个星号\n\n    def a(* a, **b):\n        balabala\n这里的*a， a在函数中被赋值为一个元组，b被赋值为一个字典。所以在调用的时候嘞，只能把能往一个元组里塞的放在前面，而能够生成字典的放在后面\n    \n    a(1,2,3,4,5,6,7,8,9,a:'a',b:1,c:'nihao')\n就像这么一样来调用。  另外，def a()函数中还能在前方再新加一个输入\n\n    def aa(jiushishuowo, *a, **b):\n        pass\n这样的话，那么在调用的时候第一个逗号前面的内容会赋值给它。over，回去拿快递了~~~\n\n🐶 年假前再来补充一下：约定名*args, **kwargs\n\n#### 获取文件路径\n    path = os.path.abspath(os.path.dirname(__file__))\n    # 获取当前运行文件的路径。需在本地有此文件，在命令行中出错\n    \n    for root, subdirs, files in os.walk(path):\n    # 遍历所有path下文件  path为要遍历的路径\n\n#### 同获取路径\n    os.path.abspath('./')\n    os.path.abspath('Deskop')\n    os.path.abspath('Deskop') + os.path.sep\n>'C:\\\\Users\\\\Administrator'\n\n>'C:\\\\Users\\\\Administrator\\\\Deskop'\n\n>'C:\\\\Users\\\\Administrator\\\\Deskop\\\\'\n\n### 获取指定目录下所有文件名列表\n    os.listdir('D\\IFData')\n\n---\n\n##### \\__dict__\n    class Province:\n        country = 'China'\n\n        def __init__(self, name, count):\n            self.name = name\n            self.count = count\n\n        def func(self, *args, **kwargs):\n            print 'func'\n\n    print Province.__dict__     # 类输出\n    obj1 = Province('HuBei', 100)\n    print obj1.__dict__         # 对象1\n    obj2 = Province('hulala', 3888)\n    print obj2.__dict__         # 对象2\n\n>`{'country': 'China', '__module__': '__main__', 'func': <function func at 0x049EF470>, '__init__': <function __init__ at 0x049EF4F0>, '__doc__': None}`\n\n>`{'count': 100, 'name': 'HuBei'}`\n\n>`{'count': 3888, 'name': 'hulala'}`\n\n类输出的是全局的函数，变量等信息。 \n对象输出的只是对象拥有的普通变量而已\n\n呃(⊙﹏⊙)，等下再去拿吧…  差点忘了说，这个__dict__与字典相配合来回赋值简直舒服… 步骤为：将某个变量=一个类（数据类（就是能够a.b这么调用的数值））然后这个变量就能a.b的这么使用了。  而后也能通过a.__dict__（这是一个字典）再将所需要的数值取出来，转赋值为别的东西。  反正我是用到了… 在想要实现一个函数来保存一个变量的某些属性的时候。（呃(⊙﹏⊙)用爱去理解我所描述的场合吧。）\n\n\n### IF ELSE\n    # 执行时会将IF前面整个表达式作为判断结果后的执行对象，\n    # 而不是仅仅替换某一个数字或者变量。  即 下方表达式运算结果\n    # 不是  `4`       和      `5`  而是如下所示\n    a = 1 + 3 if 1 == 2 else 2 + 1\n    a\n    a = 1 + 3 if 1 == 1 else 2 + 1\n    a\n> 3\n\n> 4\n\n---\n\n---\n\n---\n\n### Python 2 中的object新式类和经典类\n    # 作者：邹冲\n    # 链接：https://www.zhihu.com/question/19754936/answer/202650790\n    class A:\n        def foo(self):\n        print('called A.foo()')\n\n    class B(A):\n        pass\n\n    class C(A):\n        def foo(self):\n        print('called C.foo()')\n\n    class D(B, C): \n        pass\n\n    if __name__ == '__main__':\n        d = D() \n        d.foo()\n\n> B、C 是 A 的子类，D 多继承了 B、C 两个类，其中 C 重写了 A 中的 foo() 方法。\n\n> 如果 A 是经典类（如上代码），当调用 D 的实例的 foo() 方法时，Python 会按照深度优先的方法去搜索 foo() ，路径是 B-A-C ，执行的是 A 中的 foo() ；\n\n> 如果 A 是新式类，当调用 D 的实例的 foo() 方法时，Python 会按照广度优先的方法去搜索 foo() ，路径是 B-C-A ，执行的是 C 中的 foo() 。\n\n> 因为 D 是直接继承 C 的，从逻辑上说，执行 C 中的 foo() 更加合理，因此新式类对多继承的处理更为合乎逻辑。\n\n> 在 Python 3.x 中的新式类貌似已经兼容了经典类，无论 A 是否继承 object 类， D 实例中的 foo() 都会执行 C 中的 foo() 。但是在 Python 2.7 中这种差异仍然存在，因此还是推荐使用新式类，要继承 object 类。\n\n#### .items()\n一个字典 a，其a.items()为将每对对应值组为一个元组。即使键值也为一个字典也是将此字典作为元组元素。(￣▽￣)\" emm\n\n---\n\n---\n\n### Queue\n队列，先进先出型。可存数字、字符…嘛，Python里啥都一样。所以啥都能存。用于事件按顺序执行。示例如~：\n    \n    import Queue\n    mqueue = Queue.Queue(maxsize = 3)\n    mqueue.put(10)\n    mqueue.put(15)\n    mqueue.put(12)\n    # 此时如果再往里存呢，就会卡住… 持续等待有空位置\n    # 所以\n    mqueue.get()        #取出第一个存入\n    mqueue.put('14sas4')  #继续存\n    ## 在接触的项目中，是借用字典，来将处理函数作为Value，将Keys，put到队\n    列中，再进行取出执行。\n\n如果队列中没有数值之后再`get`也会卡住……\n所以以下东西就显得比较重要了：\n    \n\n### series和dataframe\n先贴来源：<http://blog.csdn.net/ly_ysys629/article/details/54944153>\n\n##### 属性\n    series    ：.index, .values, .name, .index.name\n    dataframe ：.columns, .index, .values\n\n##### <font color=red>series</font>:\n一组数组（列表或元组），series除了一组数据外还包括一组索引（即只有行索引），索引可自行定义也可利用Series(),自动生成索引;\n##### <font color=red>dataframe</font>:\n是表格型数据，既有行索引又有列索引，每列数据可以为不同类型数据（数值、字符串、布尔型值），可利用DataFrame（其他数据，dataframe属性)指定dataframe的属性创建dataframe。\n\n##### 实例\n##### series\n    #创建series\n    import pandas as pd\n    obj_list=[1,2,3,4]\n    obj_tuple=(4,5,6,7)\n    obj_dict={'a':[1,2],'b':[2,3],'c':[3,4],'d':[4,5]}\n    obj_series_list=pd.Series(obj_list)#通过列表创建series\n    obj_series_tuple=pd.Series(obj_tuple,index=list('abcd'))\n    #通过元组创建series\n    obj_series_dict=pd.Series(obj_dict)#通过字典创建series\n    #定义属性\n    obj_series_list.index.name='zimu'\n    obj_series_list.name='data'\n\n    print \"#通过列表创建series\"\n    print obj_series_list\n    print \"#通过元组创建series\"\n    print obj_series_tuple\n    print \"#通过字典创建series\"\n    print obj_series_dict\n    #显示series类型及属性\n    print type(obj_series_list),obj_series_list.dtype\n    print obj_series_list.index,obj_series_list.index.name\n    print obj_series_list.values,obj_series_list.name\n\n> #通过列表创建series\n\n>zimu\n\n>0    1\n\n>1    2\n\n>2    3\n\n>3    4\n\n>Name: data, dtype: int64\n\n---\n\n>#通过元组创建series\n\n    a    4\n    b    5\n    c    6\n    d    7\n    dtype: int32\n\n---\n\n>#通过字典创建series\n\n    a    [1, 2]\n    b    [2, 3]\n    c    [3, 4]\n    d    [4, 5]\n    dtype: object\n    <class 'pandas.core.series.Series'> int64\n    RangeIndex(start=0, stop=4, step=1, name=u'zimu') zimu\n    [1 2 3 4] data\n\n##### dataframe\n    #创建dataframe\n    import pandas as pd\n    import numpy as np\n    obj_dict={'a':[1,2],'b':[2,3],'c':[3,4],'d':[4,5]}\n    obj_array=np.array([[1,2,3,4],[3,4,5,6]])\n    obj_series_1=pd.Series([11,12,13,14])\n    obj_series_2=pd.Series([21,22,23,24])\n    obj_dataframe_dict=pd.DataFrame(obj_dict)\n    #通过字典创建dataframe\n    obj_dataframe_array=pd.DataFrame(obj_array,index=['one','two'])\n    #通过矩阵创建dataframe\n    obj_dataframe_series=pd.DataFrame([obj_series_1,obj_series_2])\n    #通过series创建dataframe\n    obj_dataframe_dataframe=pd.DataFrame(obj_dataframe_series,index=\n        [0,1,'one'],columns=[0,1,2,'a'])\n    #通过其他dataframe创建dataframe\n    print \"#通过字典创建dataframe\"\n    print obj_dataframe_dict\n    print \"#通过矩阵创建dataframe\"\n    print obj_dataframe_array\n    print \"#通过series创建dataframe\"\n    print obj_dataframe_series\n    print \"#通过其他dataframe创建dataframe\"\n    print obj_dataframe_dataframe\n    #dataframe属性\n    print obj_dataframe_dataframe.dtypes\n    print obj_dataframe_dataframe.values\n    print obj_dataframe_dataframe.columns\n    print obj_dataframe_dataframe.index\n> 输出结果为：\n    #通过字典创建dataframe\n       a  b  c  d\n    0  1  2  3  4\n    1  2  3  4  5\n    #通过矩阵创建dataframe\n         0  1  2  3\n    one  1  2  3  4\n    two  3  4  5  6\n    #通过series创建dataframe\n        0   1   2   3\n    0  11  12  13  14\n    1  21  22  23  24\n    #通过其他dataframe创建dataframe\n            0     1     2   a\n    0    11.0  12.0  13.0 NaN\n    1    21.0  22.0  23.0 NaN\n    one   NaN   NaN   NaN NaN\n    0    float64\n    1    float64\n    2    float64\n    a    float64\n    dtype: object\n    [[ 11.  12.  13.  nan]\n     [ 21.  22.  23.  nan]\n     [ nan  nan  nan  nan]]\n    Index([0, 1, 2, u'a'], dtype='object')\n    Index([0, 1, u'one'], dtype='object')\n取数据的话，便是`obj_dataframe_dict['a'][0]`取出数值即为`1`\n### 自命名创建方式\n    df4 = pd.DataFrame(np.random.randn(6, 4), \n        index=[u'第二', 4, 3, 2, 1, 0], columns=[u'第一',5,4,1])\n    #行为：     第一，      5，         4，         1\n    #列为：第二 -0.091305   ...\n    #       4   ...\n    #       3\n    #       2\n    #       1\n    #       0                                       ...\n### 查看\n    .dtypes     查看各行数据格式\n    .head()     查看前几行（默认5）\n    .tail()         查看后几行\n    .index      查看数据框引索\n    .columns        查看列名\n    .values     数据值\n    .T          转置\n    .sort           排序  .sort(columns = '***')根据***列数据进行排序\n\n\n###### <font color=green>取数据方法见上</font>\n\n### zip 和 数组变字典\n    a = [1,2,3]\n    b = [4,5,6]\n    c = [4,5,6,7,8]\n    zipped = zip(a,b)\n>[(1, 4), (2, 5), (3, 6)]\n\n    zip(a,c)\n>[(1, 4), (2, 5), (3, 6)]\n\n    zip(*zipped)\n>[(1, 2, 3), (4, 5, 6)]\n\nzip 也可以二维矩阵变换（矩阵的行列互换） \n因为其作用为按序号重组数组。（其英语翻译为拉链……）\n\n#### 数组变字典~：\n    dic(zip(a, b))\n    # a中值为key b中值为values\n\n### 字典操作\n    dict= sorted(dic.items(), key=lambda d:d[0]) \n    # 将字典按照键值升序排列\n    # d： 无所谓的参数\n    # d[0]：0为升序，1为降序\n    # 如果是字符型，那么‘1’‘10’‘12’… 才是‘2’’20‘，因为Python的比较是按照\n        # 按序提取第一个字符进行比较。所以要排序，还是得用int\n    # 排序之后被转换为list类型。\n    for i in orderIDic:\n                spamwriter.writerow(orderIDic[i])\n    # 变为\n    for i in orderIDic:\n                spamwriter.writerow(i[1])\n\n---\n\n#### namedtuple\n    import collections\n    person = collections.namedtuple('P', 'name age gender')\n    # P: 类名   后面空格隔开的为变量名称\n    \n    bob = person(name = 'B', age = 30, gender = 'male')\n    jane = Person(name = 'J', age = 29, gender = 'female')\n    for people in [bob, jane]:\n        print (\"%s is %d years old %s\" % people)\n\n元组的命名—— 命名之后可以由bob.name 来调用 （看了那个Python面向对象进阶， 老多`__hahah__()`函数之后，所以这明显是当成基本类的变量在用了。  emm 这么么说也不贴切 😔  果然理解程度还是跟不上的…    emm 现在需要跟进的不是怎么用Python了，而是python的用法了，走起~  继续写future笔记去了—— 这个得看的明白点儿😄）\n\n\n---\n\n---\n\n### CSV\n#### 读取\n    import csv\n    reader = csv.reader(open('test.csv', 'rb')) \n    for item in reader:\n        print item\n##### 官方是这么教你的\n    #我记得我写过一次，怎么不见了…\n    import csv\n    with open('names.csv') as csvfile:\n        reader = csv.DictReader(csvfilr)\n        for row in reader:\n            print (row['first_name'], row['last_name'])\n#### 写入\n    import csv\n    writer = csv.writer(open('test2.csv', 'wb'))\n    writer.writerow(['col1', 'col2', 'col3'])\n    data = [range(3)  for i in range(3)]\n    for item in data:\n        writer.writerow(item)\n##### 官方教你这么写\n    import csv\n    with open('names.csv') as csvfile:\n        fieldnames = ['first_name', 'last_name']\n        writer = csv.DictWriter(csvfile, fieldnames = fieldnames)\n        \n        writer.writeheader()\n        writer.writerow('first_name' : 'Naled', 'last_name' : 'Beans')\n\n须注意之处：writer.writerow()方法中的参数是list类型，如果你想在A1列写入'hello'，则必须是writer.writerow('hello')，不然'hello'会被看成是个list从而被分写入5列。写入CSV时，CSV文件的创建必须加上'b'参数，即csv.writer(open('test.csv', 'wb'))，不然会出现隔行的现象。网上搜到的解释是：python正常写入文件的时候，每行的结束默认添加'\\n’，即0x0D，而writerow命令的结束会再增加一个0x0D0A，因此对于windows系统来说，就是两行，而采用’b'参数，用二进制进行文件写入，系统默认是不添加0x0D的。\n#### 关闭\n    csvfile.close()\n\n值得注意的是上面的文档是覆盖型创建，即，写数据只能在关闭文档之前完成，之后再打开文件，再写就会覆盖掉之前（清空再写） 下面的txt  `mode = 'a'` 就属于添加型写入了，再关闭之后再打开会在最后一条开始继续添加。然后将csv中的'w'替换成‘a’就行了。记得带上'b'要不会出现数据隔行…隔行显示\n##### 官方还叫你这么写嘞\n    with open('na1me.csv', 'ab') as csvfile:\n        spamwriter = csv.writer(csvfile, delimiter = ',')\n        spamwriter.writerow(['adasd', 'w.c.w', 'lol'])\n### txt保存\n    # 基本与CSV一致，emm其实都是保存为文档，就只有个后缀区别…\n    def text_save(content,filename,mode='a'):\n        # Try to save a list variable in txt file.\n        file = open(filename,mode)\n        file.write(str(content)+'\\n')\n        file.close()\n    text_save(np.mean(self.trueRange[start: ]), 'atr.txt')\n\n关于保存路径呢，windows 下必须<font color=green>?</font>用  ‘.\\\\.\\\\..’没错，当前路径（相对路径）和绝对路径都是这样用的\n\n`mode` `b`代表二进制模式打开，而`a`就有用了，表示有此文件就打开，没的话就创建。\n\n### json\n    和上述txt文件保存差不过，嗯应该说完全一样。因为我是用的是`json.dumps`\n#### dumps、loads\n        这两个语句前者是将字典转化为str格式，后者是将str转换为字典。所以保  \n    存到文件也不过是 字典 -> str ->(用`write`写入)-> 本地文件， 反之。\n        与之相对比的是`dump`和`load`这个是直接保存至文件，但`s`多好用\n    需注意的是`dumps`有`indent`参数可用来指明转换为`str`之后的缩进参    \n    数。一般`4`（所以说这里说的是空格数？）。  哦，`loads`直接加载文件也\n    行，不用读出来`str`再去转换\n    \n\n### Shelve \n    对象的持久化存储——\n    目的：Shelve模块为任意能够pickle的Python对象实现持久化存储，并提供一个类似字典的\n接口。\n---\n\n---\n\n---\n\n## 列表List\n<font color=red>需提前定义，不能像变量一样随用随写…</font>\n\n以下来自于 [Python 列表(List)操作方法详解](http://www.jb51.net/article/47978.htm)\n### 列表操作包含以下函数:\n    cmp(list1, list2)       # 比较两个列表的元素 \n    len(list)               # 列表元素个数 \n    max(list)               # 返回列表元素最大值 \n    min(list)               # 返回列表元素最小值 \n    list(seq)               # 将元组转换为列表 \n    \n### 列表操作包含以下方法:\n    list.append(obj)        # 在列表末尾添加新的对象\n    list.count(obj)         # 统计某个元素在列表中出现的次数\n    list.extend(seq)        # 在列表末尾一次性\n        # 追加另一个序列中的多个值（用新列表扩展原来的列表）\n    list.index(obj)         # 从列表中找出某个值第一个匹配项的索引位置\n    list.insert(index, obj) # 将对象插入列表\n    list.pop(obj=list[-1])      #移除列表中的一个元素（默认最后一个元素）\n        #，并且返回该元素的值\n    list.remove(obj)        # 移除列表中某个值的第一个匹配项\n    list.reverse()          # 反向列表中元素\n    list.sort([func])           # 对原列表进行排序\n\n## 字符串连接\n来自<http://www.cnblogs.com/chenjingyi/p/5741901.html>\n### 方法一\n    website = 'python' + 'tab' + '.com'\n### 方法二\n    listStr = ['python', 'tab', '.com'] \n    website = ''.join(listStr)\n### 方法三\n    website = '%s%s%s' % ('python', 'tab', '.com')\n结论： 连接个数少使用一，个数多使用二。  推荐，使用三 ~ ，~\n\n## 手动编译Py文件\n    import compileall\n    compileall.compile_dir(目录)\n\n---\n\n---\n\n---\n\n## 时间\n#### datetime\n    from datetime import datetime\n    a = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0) \n    a.year  \n    a.hour      #int 型变量\n>2017   \n\n>0\n\n>获取当前本机电脑💻时间，replace为自定义某个数值。单独调用某个信息如a.year、a.hour\n\n#### datetime 类型变量可直接相减获得间隔日\n    a = datetime.datetime.now()\n    # datetime.datetime(2017, 10, 18, 8, 52, 27, 5000)\n    b = datetime(2005, 2, 6)\n    # datetime.datetime(2005, 2, 6, 0, 0)\n    c = a - b \n    # datetime.timedelta(4637, 31947, 5000)\n    c.days  # int 型\n>4637\n#### timedelta\ntimedelta为datetime类型相减而来（datetime不能相加…），然后嘞，datetime.timedelta(1,35340)这是它的样子，前是天数，后是秒数。也就是说所有相减就是告诉你相距多少天零多少秒，都是标准单位（误）。要取出可 `.days`   和  `seconds``\n    \n### 格式化输出当前时间\n    import time\n    print time.strftime('%Y-%m-%d %H:%M:%S',time.localtime(time.time()))\n>2017-08-21 10:54:31\n\n### time\n    import time\n    time.time()     # 返回当前时间的时间戳（1970纪元后经过的浮点秒数）\n    # 返回值为float 可直接拿来运算，还是很舒服的。\n\n---\n\n---\n\n\n### 线程 threading\n#### 用于实现定时器\n    import threading\n    def hel():\n        print \"so you sucsessful to kill 5 seconde\"\n    time = threading.Timer(5, hel)\n    time.start()\n>so you sucsessful to kill 5 seconde\n在命令行中按下回车后消失，很有意思，并且当第二调用时time.start()时就会——\n\n>RuntimeError: threads can only be started once\n#### 循环调用\n以上的不能循环调用的话就没啥价值了，所以下面有个妖艳用法为：\n\n    def fun():\n        print \"So jian\"\n        global timer\n        timer = threading.Timer(5.5, fun)\n        timer.start()\n    timer = threading.Timer(1, fun)\n    timer.start()\n    # 通过自调自的方法循环创建时间线程，另外，timer.cancel()可停止定时器工作。\n    # 值得注意的是，上面不循环调用的 在执行完函数之后依然会持续运行\n    # 所以得记得关闭。\n比方说这个妖艳……呃 本来打算在调用函数里写上cancel但是…依然之后不能再次start()\n\n#### 线程<font color=#10e5a6>池</font>\n自实现或者使用`threadpool.ThreadPool`:\n```py\n    import time\n    import threadpool  \n    def sayhello(str):\n        print \"Hello \",str\n            time.sleep(2)\n\n    name_list =['dd','aa','bb','cc']\n    start_time = time.time()\n    pool = threadpool.ThreadPool(10) \n    requests = threadpool.makeRequests(sayhello, name_list) \n    for req in requests:\n        pool.putRequest(req) \n    pool.wait() \n    print '%d second'% (time.time()-start_time)\n```\n\n\n---\n\n---\n\n---\n    \n# Math 库\n    import math\n### 数值取整 \n    ceil、floor    还有一个不是此库中的round\n找来翻译就是 ： 小区、地板、回合………… 好吧，是（抹灰泥装镶板、最低的，最小的、周围，围绕）\n\n    # 使用方法为：\n    math.ceil(3.12)\n    math.floor(3.24)\n    round(3.51)\n    round(3.10999999999, 10)\n    #取值时的参考步长，好像（😭）是10就是最大步长了，再大没意义\n    # 手动赋值超过9位也就是10位小数的时候在PyCharm里直接赋值调试就自己约了，\n    # 而一般产生精度漂移都是十几位小数开外的。emm   就这么表达了，看得懂\n>4.0\n\n>3.0\n\n>4.0\n\n>3.11\n\n---\n\n---\n\n---\n\n---\n\n# 令程序有序执行的方法\n## 对象（伪类）间变量传递\nLike This：\n\n    class A(object):\n    \"\"\"docstring for A\"\"\"\n        def __init__(self, name):\n            super(A, self).__init__()\n            self.name = name\n            self.a = 0\n        def da(self):\n            print self.name\n            print self.a    \n    a = A('I am A')\n    a.da()\n\n\n    class B(object):\n    \"\"\"docstring for B\"\"\"\n        def __init__(self, aclass):\n            super(B, self).__init__()\n            self.aclass = aclass\n            self.aclass.a += 1\n        def dada(self):\n            self.aclass.da()\n    b = B(a)\n    b.dada()\n\n    class C(object):\n    \"\"\"docstring for B\"\"\"\n        def __init__(self, aclass):\n            super(C, self).__init__()\n            self.aclass = aclass\n            self.aclass.a += 1\n        def dada(self):\n            self.aclass.da()\n    c = C(a)\n    c.dada()\n>I am A\n\n>0\n\n>I am A\n\n>1\n\n>I am A\n\n>2\n\nB与C分别在去改变读取在A中定义的数值。  嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(*￣▽￣*)o就是这么写意和惬意。在VN.PY中有记录，不过还是拿过来吧，毕竟python用法\n\n---\n\n## 字典中建立函数映射，方便调用~\n    def add(x, y):\n        return x + y\n    def sub(x, y):\n        return x - y\n    a = {'add':add, 'sub':sub}\n    a\n    a['add'](1, 2)\n    a['sub'](1, 2)\n>{'add': <function add at 0x02D162B0>, 'sub': <function sub at 0x02D16530>}\n\n>3\n\n>-1\n\n### collections 模块\n#### namedtuple\n    给元组元素命名（貌似写过这个笔记欸，不过现在才发现这几个都是在一个模块下的）\n#### deque\n    #双端队列  快速插入 以及取出\n    l.insert(0, v)\n    l.pop(0)\n\n    l.popleft()\n    l.appendleft()\n    # 数据量大时，速度优于原生list\n###### a Game:  \n    import sys\n    import time\n    from collections import deque\n    fancy_loading = deque('>--------------------')\n    while True:\n        print '\\r%s' % ''.join(fancy_loading),\n        fancy_loading.rotate(1)\n        sys.stdout.flush()\n        time.sleep(0.08)\n        Result:\n    # 一个无尽循环的跑马灯\n#### Counter\n    # 计数器\n    from collections import Counter\n    s = '''A Counter is a dict subclass for counting hashable objects. \n        It is an unordered collection where elements are stored as \n        dictionary keys and their counts are stored as dictionary values. \n        Counts are allowed to be any integer value including zero or \n        negative counts. The Counter class is similar to bags or multisets in other         \n        languages.'''.lower()\n    c = Counter(s)\n    print c.most_common(5)\n>[(' ', 54), ('e', 32), ('s', 25), ('a', 24), ('t', 24)]\n\n#### OrderDict\n    # 有序字典：记录了数据存入时的先后顺序\n    # 不过发现一个骚操作：\n#### defaultdict\n    # 默认字典： 当key不存在时，返回此结果\n\n---\n\n## 线程\n    创建线程： 使用Threading模块创建，从threading.Thread继承，然后重写__init__ 和run 方法\n```python \n    import threading\n    import time\n \n    exitFlag = 0\n \n    class myThread (threading.Thread):   #继承父类threading.Thread\n        def __init__(self, threadID, name, counter):        \n            threading.Thread.__init__(self)\n            self.threadID = threadID\n            self.name = name\n            self.counter = counter\n        def run(self):      \n        #把要执行的代码写到run函数里面 线程在创建后会直接运行run函数 \n            print \"Starting \" + self.name\n            写到这儿\n            print \"Exiting \" + self.name\n\n    thread1 = myThread(1, \"Thread - 1\" , 1)\n    thread1 = myThread(2, \"Thread - 2\" , 2)\n    # 开启\n    thread1.start()\n    thread2.start()\n```\n\n### 线程同步    \n不同线程对某个数据同时修改就很刺激，所以需要同步。（当然也可以选择不）\n其实也简单，如下：\n    \n    import threading\n    threadingLock = threading.Lock()\n    # 从这儿领一把锁\n    # 然后在 run()函数中，“写到这儿——也就是工作函数之前，写上\n    threadingLock.acquire()\n    # 随后在工作函数之后\n    # threadingLock.release()\n\n然后拿到小锁子的函数就能运行，运行完了把小锁子释放掉。为啥不是钥匙🔑……好吧。我就称呼它我就称呼它梭子吧——\n\n## 队列\n```md\n    线程优先级队列\n    Queue.qsize()\t    返回队列的里站了几个\n    Queue.empty()           如果队列为空，返回True,反之False\n    Queue.full()            如果队列满了，返回True,反之False\n    Queue.full 与 maxsize   大小对应\n    Queue.get([block[, timeout]]) \n    \t获取队列,timeout`等待时间\n    \n    Queue.get_nowait() 相当 \n    Queue.get(False)\n    \n    Queue.put(item) 写入队列，timeout 等待时间\n    \n    Queue.put_nowait(item) 相当\n    Queue.put(item, False)\n    \n    Queue.task_done()       在完成一项工作之后，\n    Queue.task_done()       函数向任务已经完成的队列发送一个信号\n    Queue.join()            实际上意味着等到队列为空，再执行别的操作\n```\n\n来段儿示例：来自[这儿](http://www.runoob.com/python/python-multithreading.html)\n```python\n    #!/usr/bin/python\n    # -*- coding: UTF-8 -*-\n \n    import Queue\n    import threading\n    import time\n \n    exitFlag = 0\n \n    class myThread (threading.Thread):\n        def __init__(self, threadID, name, q):\n            threading.Thread.__init__(self)\n            self.threadID = threadID\n            self.name = name\n            self.q = q\n        def run(self):\n            print \"Starting \" + self.name\n            process_data(self.name, self.q)\n            print \"Exiting \" + self.name\n    \n    def process_data(threadName, q):\n        while not exitFlag:\n            queueLock.acquire()\n            if not workQueue.empty():\n                data = q.get()  \n                queueLock.release()\n                print \"%s processing %s\" % (threadName, data)   \n            else:\n                queueLock.release()\n            time.sleep(1)\n \n    threadList = [\"Thread-1\", \"Thread-2\", \"Thread-3\"]\n    nameList = [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"]\n    queueLock = threading.Lock()\n    workQueue = Queue.Queue(10)\n    threads = []\n    threadID = 1\n \n    # 创建新线程\n    for tName in threadList:\n        thread = myThread(threadID, tName, workQueue)\n        thread.start()\n        threads.append(thread)\n        threadID += 1\n \n    # 填充队列\n    queueLock.acquire()\n    for word in nameList:\n        workQueue.put(word)\n    queueLock.release()\n \n    # 等待队列清空\n    while not workQueue.empty():    \n        pass\n \n    # 通知线程是时候退出\n    exitFlag = 1\n \n    # 等待所有线程完成\n    for t in threads:\n        t.join()\n    print \"Exiting Main Thread\"\n```\n\n>Starting Thread-1\n\n>Starting Thread-2\n\n>Starting Thread-3\n\n>Thread-1 processing One\n\n>Thread-2 processing Two\n\n>Thread-3 processing Three\n\n>Thread-1 processing Four\n\n>Thread-2 processing Five\n\n>Exiting Thread-3\n\n>Exiting Thread-1\n\n>Exiting Thread-2\n\n>Exiting Main Thread\n\n呃， 以上就是我现知道的终极用法，当然其基础于：\n\n    workQueue = Queue.Queue(10)     \n    # 创建+设定队列长度（emm 小心卡死就是了）\n    # 只要满了再往里塞绝对死，无意外……(lll￢ω￢)\n    workQueue.put(word) \n    # 往里塞。  基础就是塞个数字，高级就是塞个线程\n    workQueue.get() \n    # 顺序往外取\n    # 括号里里面可以写进参数，然而，依然按照顺序往外取，插队办理啥的不存在\n    # 另外，队列空的话取依然会死……\n\n### 一些方法\n```python\n    q = queue.Queue(maxsize=0) \n    q.qsize() #查看队列大小 \n    q.empty() #判断队列是否为空 \n    q.full() \n    #如果maxsize设置了大小(eg:2)，如果q.put()了2个元素，则返回真，反之，则为假 \n    q.get_nowait() \n    # 如果队列中没有元素了，只用q.get()\n    （当然，可以设置`q.get(block=False）`）会使程序卡住，用q.get_nowait()则会报错而不卡住 \n    q.put_nowait() \n    # 如果maxsize设置了大小，用q.put()超过范围则会卡住（当然\n    # 可以设置属性q.put(block=False)）。用q.put_nowait()则会报错而不卡住\n```\n---\n\n### 老夫的Demo\n\n***消费生产者关系***\n```python\nimport threading\nimport queue\nimport threadpool\nimport time\n\npool = threadpool.ThreadPool(2)\n\nque = queue.Queue()\n\ndataList = [1,2,3,4,5,6,7,8,9,0]\ndataList1 = [1,2,3,'a', 'b']\ndataList2 = [4,5,6]\ndataList3 = [7,8,9,0]\n\nprintLock = threading.Lock()\n\nworkList = [dataList1, dataList2, dataList3]\n\ndef worker():    \n   ## 消费者\n   #printLock.acquire()\n    aaa = que.get()\n    print(aaa)\n    for i in aaa:\n        print (i)\n    #printLock.release()\n    time.sleep(5)\n\ndef geter(task):\n    ## 生产者\n    print(\"emm, put in_:\", task)\n    time.sleep(1)\n    que.put(task)\n    \n    a = threading.Thread(target=worker)\n    a.start()\n\nfor i in workList:\n    geter(i)\n```\n\n---\n\n---\n\n## 进程\n```python\nimport multiprocessing\nimport time\ndef worker_1(interval, lock, low):\n    print (\"worker_1\")\n    print (time.time())\n    lock.acquire()\n    time.sleep(0.1)\n    print(\"I got the lock\")\n    time.sleep(interval)\n    print(low)\n    print (\"end worker_1\")\n    lock.release()\ndef worker_2(interval, lock):\n    print (\"worker_2\")\n    print (time.time())   \n    lock.acquire()\n    print(\"I got the lock\")\n    time.sleep(interval)\n    print (\"end worker_2\")\n    lock.release()\ndef worker_3(interval, lock):\n    print (\"worker_3\")\n    print (time.time())\n    lock.acquire()\n    print(\"I got the lock\")\n    time.sleep(interval)\n    print (\"end worker_3\")\n    lock.release()\nif __name__ == \"__main__\":\n    printLock = multiprocessing.Lock()\n    # 🔒 来自关爱的小锁子 \n    p1 = multiprocessing.Process(target = worker_1, args = (2, printLock, [\"asd\", {'s':1}, [1,2,3]])).start()\n    p2 = multiprocessing.Process(target = worker_2, args = (3, printLock)).start()\n    p3 = multiprocessing.Process(target = worker_3, args = (4, printLock)).start()\n    w = {'a':p1, 'b':p2, 'c':p3}\n    # 创建三个进程去运行这三个函数\n    #p1.start()\n    #p2.start()\n    #p3.start()\n    #for i in w:\n    #    w[i].start()\n    # 启动进程\n\n    print(\"The number of CPU is:\" + str(multiprocessing.cpu_count()))   \n    for p in multiprocessing.active_children():\n        print(\"child   p.name:\" + p.name + \"\\tp.id\" + str(p.pid))\n    print (\"Main All Done\")\n    \n    # dt 2018年5月18日11点22分\n```\n>worker_1\n>1526613489.1864893\n>worker_2\n>1526613489.1932006\n>The number of CPU is:4\n>child   p.name:Process-3        p.id208\n>child   p.name:Process-1        p.id206\n>child   p.name:Process-2        p.id207\n>Main All Done\n>worker_3\n>1526613489.1968668\n>I got the lock\n>['asd', {'s': 1}, [1, 2, 3]]\n>end worker_1\n>I got the lock\n>\n>end worker_2\n>I got the lock\n>end worker_3\n\n<font color=ca5a00>插一句话</font>\n线程和进程的关系，貌似与电脑双系统和系统再开虚拟机的关系emm  对于资源利用的角度上。\n\n##### 没有传参的进程\n```python \nimport multiprocessing\n\ndef sayHello():\n    print('hello~ I can see you')\n\nif __name__ == '__main__':\n    p1 = multiprocessing.Process(target=sayHello)\n    p2 = multiprocessing.Process(target=sayHello)\n    p3 = multiprocessing.Process(target=sayHello)\n    p1.start()\n    p2.start()\n    p3.start()\n\n```\n如果只是单纯运行，这样就可以了，之所以做这个测试是因为我忌惮于那个`args`的传参，毕竟`()`里面若有元素存在就必须要有逗号…   看来没有传参的话就不需要了\n一个参数`a`的时候: `(a, )`emmm🤔\n### 将进程定义为类\n    import multiprocessing\n    import time\n    class ClockProcess(multiprocessing.Process):\n        def __init__(self, interval):\n            multiprocessing.Process.__init__(self)\n            self.interval = interval\n        def run(self):\n            n = 5\n            while n > 0:\n                print(\"the time is {0}\".format(time.ctime()))\n                time.sleep(self.interval)\n                n -= 1 \n    if __name__ == '__main__':\n        p = ClockProcess(3)\n        p.start()\n\n<font color=red>以上，`p.start()`被调用时，自动调用`run()`   另外时间戳都是瞎戳的，所以… emm 这都一年之前的东西了，现在才想起来戳时间有点儿纪念意义(⊙﹏⊙) </font> \n>2018年5月18日\n>\n#### 属性\n    daemon ：是否伴随主程序结束而结束\n    Lock: 锁：（如下， 防止访问共享资源时冲突，如以上打印时间时出现的不连续打印😰）\n    def worker(lock, var):\n        try:\n            ***\n        finally:\n            lock.release()\n    lock = multiprocessing.Lock()\n    var = '我是变量'\n    p = multiptocessing.Process(target = worker, args = (lock, var))\n    \n    \n## <font color=#cc0000>***警个告***</font>\n创建进程分支的函数选择只能隶属于`__main__`下或者是隶属与创建进程的函数级别相同的级别，例如今天在main下一个函数中选择目标函数为此函数的函数就不可以… 如下：\n```python \n    def a():\n        def c(para):\n            pass\n    \t*(target=b, args=(1,)) \t🌹\n        *(target=c, args=(1,)) \t❌\n    \t\n    def b(para):\n        pass\n```\nemm，上述表述的很明确，但是昨天又重新犯了这个问题… 进程的执行者放到了类中的某个函数，然后又提出到`__main__\n`中函数，所以都不能执行，最终放到`__main__``外，与它同级，也就是def 前无空格。 才能“受命”。\n\n#### 通过队列来存储不同进程产生的结果\n{来自}(https://blog.csdn.net/u014556057/article/details/66974452)\n```\n# -*- coding:utf-8 -*-\nfrom multiprocessing import Process, Queue, Lock\n\nL = [1, 2, 3]\n\n\ndef add(q, lock, a, b):\n    lock.acquire()  # 加锁避免写入时出现不可预知的错误\n    L1 = range(a, b)\n    lock.release()\n    q.put(L1)\n    print L1\n\nif __name__ == '__main__':\n    q = Queue()\n    lock = Lock()\n    p1 = Process(target=add, args=(q, lock, 20, 30))\n    p2 = Process(target=add, args=(q, lock, 30, 40))\n    p1.start()\n    p2.start()\n    p1.join()\n    p2.join()\n\n    L += q.get() + q.get()\n    print L\n\n```\n> [20, 21, 22, 23, 24, 25, 26, 27, 28, 29]\n> [30, 31, 32, 33, 34, 35, 36, 37, 38, 39]\n> [1, 2, 3, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]\n\n\n---\n\n---\n\n## 再加一个协程\n### 基础实现：\n```python \n# yield\ndef creatAor():\n    mylist = range(3)\n    for i in mylist:\n        yield i*i\n\nmygenerator = creatAor()  # 生成一个生成器\nprint (mygenerator)\nfor i in mygenerator:\n    print (i)\n```\n\n> <generator object creatAor at 0x7f54ed368f10>\n> 0\n> 1\n> 4\n\n当调用函数时，其返回并不立马执行（显示）——emm 经过十几分钟😰的观察👀说那么玄乎，.其实就是在函数执行过程中，在`yield`处把后面紧接的东西记录下来，之后最后生成一个可迭代的对象。 所以网上说时生成器也不可厚非，但表达真的是……不过貌似.不仅仅是记录后面紧跟的东西…\n\n```python\n$ vim \ndef creatAor():\n    mylist = range(3)\n    print(\"so jia nei?\")\n    for i in mylist:\n        print(\"pre a hou ga\")\n        yield i*i\n        print (\"nihoua\")\n    print (\"2333333\")\n\nmygenerator = creatAor()\nprint (mygenerator)\nfor i in mygenerator:\n    print (i)\n```\n\n> <generator object creatAor at 0x7fe2585a8f10>\n> so jia nei?\n> pre a hou ga\n> 0\n> nihoua\n> pre a hou ga\n> 1\n> nihoua\n> pre a hou ga\n> 4\n> nihoua\n> 2333333\n\n所以看这苗头像是重新执行了一次函数，但是将后面紧跟的东西也进行了记录\n\n应用到协程中，便是：\n\n```python \nimport time\n\ndef consumer():\n    r = ''\n    while True:\n        n = yield r\n        if not n:\n            return\n        print('[CONSUMER] Consuming %s....' % n)\n        time.sleep(1)\n        r = '200 OK'\n\ndef produce(c):\n    c.next()\n    n = 0\n    while n < 5:\n        n = n + 1\n        print('[PRODUCER] Producing %s...' % n)\n        r = c.send(n)\n        print('[PRODUCER] Consumer return: %s\\n' % r)\n    c.close()\n\nif __name__=='__main__':\n    c = consumer()\n    produce(c)\n    for i in c:\n        print(i)\n```\n\n> [PRODUCER] Producing 1...\n> [CONSUMER] Consuming 1....\n> [PRODUCER] Consumer return: 200 OK\n> \n> [PRODUCER] Producing 2...\n> [CONSUMER] Consuming 2....\n> [PRODUCER] Consumer return: 200 OK\n> \n> [PRODUCER] Producing 3...\n> [CONSUMER] Consuming 3....\n> [PRODUCER] Consumer return: 200 OK\n> ...\n> ...\n\n\n那么，是什么道理呢？\n#### send next 方法的背后今生\n```python\ndef my():\n    value = yield 1\n    value = yield value\n    print('finally: ', value)\nge = my()\nprint(ge.next())\nprint(ge.send(2))\nprint(ge.send(3))\n```\n\n> 1\n> 2\n> ('finally: ', 3)\n> Traceback (most recent call last):\n>   File \"yield_emm3.py\", line 8, in <module>\n>     print(ge.send(3))\n> StopIteration\n\n\n可知：\n 当`next`时，`yield`挂起，但将之后的`1`返回。而后`send`激活了之前挂起赋值动作，但此时`yield 1`被替换为`send`来的`2`所以`value`被置为`2`. 再第三次调用，完成赋值动作之后，由于只被挂起两次动作，而这里调取了三次，所以报错 停止递归 。若直接递归则得到1 和 None.   \n\n所以 `next`与`send`都是用来激活挂起动作而使用的，但`send`好在可以与之交互。\n<font color=red>在`send``之前需先`next`否则提示`can't send * to a just-started generator`</font>(⊙﹏⊙)  我上面阐述的挂起，激活，是不是出现了什么偏差…\n> 2018年5月18日16点30分\n\n### 较完善方案：\n\n```python \n# 1\nimport gevent\ndef f(n):\n    for i in range(n):\n       print gevent.getcurrent(), i\n\ng2 = gevent.spawn(f, 5)\ng3 = gevent.spawn(f, 5)\n\ng1.join()\ng3.join()\n\n# 2\nimport gevent\nfrom gevent import monkey; monkey.patch_all()\nimport urllib2\n\ndef f(url):\n    print 'GET: %s' % url\n    resp = urllib2.urlopen(url)\n    data = resp.read()\n    print '[%d] bytes received from %s\\n' %(len(data), url)\n    \ngevent.joinall([\n    gevent.spawn(f, 'http://www.cnblogs.com/kaituorensheng/'),\n    gevent.spawn(f, 'https://www.python.org/'),\n    gevent.spawn(f, 'https://www.baidu.com'),\n])\n\n# 3\nfrom gevent import monkey  \nmonkey.patch_all()  \nimport gevent  \nfrom gevent import Greenlet  \n  \nclass Task(Greenlet):  \n    def __init__(self, name):  \n        Greenlet.__init__(self)  \n        self.name = name      \n    def _run(self):  \n        print \"Task %s: some task...\" % self.name  \n  \nt1 = Task(\"task1\")  \nt2 = Task(\"task2\")  \nt1.start()  \nt2.start()  \n# here we are waiting all tasks  \ngevent.joinall([t1,t2])  \n```\n\n和线程 进程 差不多一个用法，只不过没锁，也不需要锁。\n\n\n\n---\n\n---\n\n---\n\n### futures\n####  futures.ThreadPoolExecutor\n```py\nwith futures.ThreadPoolExecutor(16) as executor:\n    executor.map(run, urls)\n    # 这里是个爬虫，urls就是一个前方run函数的输入变量\n```\n\n---\n\n---\n\n---\n\n## 父类中的变量与类中变量\n在使用`self.a` 的时候——呃其实是实例化之后a.a时，会只在父类中寻找相关变量，而解决办法居然是将`super(A, self).__init__(CtaEngine, setting)`移动到变量定义之后，所以谁说这玩意放前面和放后面没有区别的！（欸?😘 这个之后有过说明，不过忘记写在哪儿了，再说一下，就是super....表示父类的初始化动作，__init__因为这个函数名子父相同不会重写，会合并。）\n\n### 列表的增删添\n    append      # 在最后添加一元素\n    extend      # c.extend(a) 将列表a中元素加到c中去。可自加\n    +           # 连接两方数组元素 c = a + c        然而创建新对象，耗内存… 所以没啥\n用\n    \n    del         # 删除对应下标元素 del c[0] 删除c列表第一位元素\n    pop         # c.pop()   删除最后一位元素\n    remove      # 删除指定值元素，有相同值时只会删除第一位\n    [ : ]           # 使用切片进行删除\n    insert      # c.insert(0, 1)将1插入到c的最前方，可插列表，插入还是列表\n\n\n### 一个函数的有效方式只在循环中执行一次 - 代码日志\n[这](https://codeday.me/bug/20170901/65228.html)是原链接\nemm 代码反正照着输入是不会有结果的，但感觉挺有戏先保留，以后技术提升再来看\n#### 自己的方法\n自己的方法很简单，很暴力，就是用字典啊—— 当执行过一次之后直接把调用关系扭到别的地方，反正只要是知道结果的判断都可以用字典来代替么。\n\n### 函数调用函数 and 语法糖 @\n    import time\n \n    def timehel(hell):\n        def wrapper():\n                start = time.clock()\n                hell()\n                end =time.clock()\n                print 'used:', end - start\n            return wrapper\n\n@timehel\ndef foo():\n    print 'a ho ga'\n>a ho ga\n\n>used:  0.000489465229975\n\n其上@timehel 和 foo = timehel(foo)等价（感谢[被遗忘的博客](http://www.cnblogs.com/rollenholt/archive/2012/05/02/2479833.html)）… 就是把下方函数当成输入，然后执行通俗来翻译就是： \n\n    @：呼叫timehel   来执行下面这孙子。\n    \n这里是官方教你怎么用： \n    <https://wiki.python.org/moin/PythonDecoratorLibrary>\n\n其中 函数中定义函数就类似于“父子关系”，也或者叫另辟空间。每次执行父函数时，子函数会有也尽在此时会有被执行的机会，会不会被执行，就看其在其父亲面前的表现了（他爸有没有叫他（有没有调用…））。\n\n### 变量作用域\n因为从这个@ 这儿学到的，所以：\n\n    def hel(x):\n        def inner():\n            print x\n        return inner\n    p1 = hel(1)\n    p1 = hel(1)\n\n    p1()\n>1\n\n    p2()\n>2\n\n闭包——如果没有inner这东西，下面绝不会输出东西，反而会报错。 直接`p1`,`p2`又不会再输出任何东西，只有在定义时会运行一次。 对比于`def hel(x):   print x`    其中内层原因 先不深究，就脑补成外层需运行时才能去找那些变量，而其中的函数会主动去外围找所需的变量。\n#### 应用案例\n    import time\n\n    def coseTime(func):\n        print func\n        def inner(*args, **kwargs):\n            print args, kwargs\n            start = time.clock()\n            func(*args, **kwargs)\n            end = time.clock()\n            print args, kwargs\n    \n            print ('Running time: %s Seconds' % (end-start))\n        return inner\n\n    @coseTime\n    def hel(x):\n        print ('hello~')\n\n    hel(12)\n><function hel at 0x02BC5070>\n>(12,) {}\n>hello~\n>(12,) {}\n>Running time: 0.000446197317167 Seconds\n\n用来无视变量来记录 函数运行所需时间的——同时输出其在运行时接入的变量\n\n\n---\n\n---\n\n## functools\n就姑且放这儿吧，毕竟也算是为了有序执行而接触到的\n\n### partial\n    import functools\n    def add(a, b):\n        print a, b\n        return a, b\n    addplus = functools.partial(add, 3)\n    addplus(7)\n>3   7\n\n    addplus(add, b = 6)\n    addplus(7)\n>7   6\n\n这函数作用是 提前给定函数一个变量值…The functools module is for higher-order functions: functions that act on or return other functions. In general, any callable object can be treated as a function for the purposes of this module. \n\n我的接触场景是在PyQt 中信号槽循环连接时，用了partial在connect之后`.connect(partial(self.start, i))`去唯一化相同功能的复用。不过我之前也应该写过类似的，那时我找的解决办法时在连接调用时传参(在Python GUI里面应该会写有吧，假如两三个月前我没脑子短期性失忆的话😭)。emm那个传参是利用Qt机制 不知道孰优孰劣😄 \n\n    运气好，直接翻到：\n        ——那里的应用场景是在鼠标点击按钮捕获点击事件click时传递的参数~\n# lambda\n使用方法为：\n\n    func = lambda x:x*x\n    # :前x表示函数输入，:后为返回值，x*x是这个函数收到输入后所执行的动作\n    w = lambda x:func(x)\n    \n---\n\n---\n\n---\n\n---\n\n---\n\n# 网络编程\n## socket\n    import socket\n    # 服务端\n    s = socket.socket()\n    host = socket.gethostname()\n    port = 12345\n    s.bind((host, port))\n    s.listen(5)\n    while True:\n        c, addr = s.accept()\n        print \"link address is\", addr\n        c.send('welcome here')\n        c.close()\n    # 客户端\n    s = socket.socket()\n    host = socket.gethostname()\n    port = 12345\n    s.connect((host, port))\n    # 此时服务端便弹出 link address is：('192.168.*.*', 64*5)\n    print s.recv(1024)\n    # 客户端显示welcome here\n\n## select :   与Socket配合的跨平台的异步io模型\n\nimport select\nimport socket\nimport Queue\n\n#create a socket\nserver = socket.socket(socket.AF_INET,socket.SOCK_STREAM)\nserver.setblocking(False)\n#set option reused\nserver.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR  , 1)\n\nserver_address= ('192.168.1.102',10001)\nserver.bind(server_address)\n\nserver.listen(10)\n\n#sockets from which we except to read\ninputs = [server]\n\n#sockets from which we expect to write\noutputs = []\n\n#Outgoing message queues (socket:Queue)\nmessage_queues = {}\n\n#A optional parameter for select is TIMEOUT\ntimeout = 20\n\nwhile inputs:\n    print \"waiting for next event\"\n    readable , writable , exceptional = select.select(inputs, outputs, inputs, timeout)\n\n    # When timeout reached , select return three empty lists\n    if not (readable or writable or exceptional) :\n        print \"Time out ! \"\n        break;    \n    for s in readable :\n        if s is server:\n            # A \"readable\" socket is ready to accept a connection\n            connection, client_address = s.accept()\n            print \"    connection from \", client_address\n            connection.setblocking(0)\n            inputs.append(connection)\n            message_queues[connection] = Queue.Queue()\n        else:\n            data = s.recv(1024)\n            if data :\n                print \" received \" , data , \"from \",s.getpeername()\n                message_queues[s].put(data)\n                # Add output channel for response    \n                if s not in outputs:\n                    outputs.append(s)\n            else:\n                #Interpret empty result as closed connection\n                print \"  closing\", client_address\n                if s in outputs :\n                    outputs.remove(s)\n                inputs.remove(s)\n                s.close()\n                #remove message queue \n                del message_queues[s]\n    for s in writable:\n        try:\n            next_msg = message_queues[s].get_nowait()\n        except Queue.Empty:\n            print \" \" , s.getpeername() , 'queue empty'\n            outputs.remove(s)\n        else:\n            print \" sending \" , next_msg , \" to \", s.getpeername()\n            s.send(next_msg)\n    \n    for s in exceptional:\n        print \" exception condition on \", s.getpeername()\n        #stop listening for input on the connection\n        inputs.remove(s)\n        if s in outputs:\n            outputs.remove(s)\n        s.close()\n        #Remove message queue\n        del message_queues[s]\n[糖拌咸鱼 - 记录学习的点点滴滴~](http://www.cnblogs.com/coser/archive/2012/01/06/2315216.html)\n\n简单来说一下`select`的作用：\n    返回值：三个列表\n    select方法用来监视文件描述符(当文件描述符条件不满足时，select会阻塞)，当某个文件描述符状态改变后，会返回三个列表\n        1、当参数1 序列中的fd满足“可读”条件时，则获取发生变化的fd并添加到fd_r_list中\n        2、当参数2 序列中含有fd时，则将该序列中所有的fd添加到 fd_w_list中\n        3、当参数3 序列中的fd发生错误时，则将该发生错误的fd添加到 fd_e_list中\n        4、当超时时间为空，则select会一直阻塞，直到监听的句柄发生变化\n       当超时时间 ＝ n(正整数)时，那么如果监听的句柄均无任何变化，则select会阻塞n秒，之后返回三个空列表，如果监听的句柄有变化，则直接执行。\n    `epoll`很好的改进了`select` 具体请看(深入理解python中的select模块)[http://blog.csdn.net/songfreeman/article/details/51179213]\n\n---\n\n---\n\n---\n\n## 引用模块\naction.py中引用model.py为例\n### 同一文件夹下\n    from model import *\n    # or\n    import model\n### 其下级文件\"here\"下\n    # 在model.py 文件中创建__init__.py空文件\n    from here import model\n    # or\n    form here.model import *\n### 在上级文件下\n    import sys\n    sys.path.append(\"..\")\n    # 添加上级文件 路径\n    # import model\n### 在上级文件的下级文件中（也就是在隔壁“wang”文件中）\n    # 需要创建__init__.py空文件\n    # 添加上级文件路径\n    import wang.model\n\n\n## 解决编码问题\n    import sys\n    reload(sys) \n    sys.setdefaultencoding('utf8')\n    # 这段直接塞它嘴里\n\n### 输出提示打印乱码\n    #coding: utf-8  \n    n=raw_input(unicode('请输入文字','utf-8').encode('gbk'))  \n    print n  \n\n### 内存异常占用\n    import sys\n    v = 1\n    sys.getsizeof(v)\n    # 可以读出 此变量emm 或者说 对象的内存占用大小\n\n## 异常\n### plan1 ：\n    try:\n    #正常的操作\n    except:\n    #发生异常，执行这块代码\n    else:\n    #如果没有异常执行这块代码(在执行完try下函数没有异常发生)\n### 列表的坑\n当a 为一个列表\n    a = [1, 2, 3]\n    b = a \n    c = a\n    d = a\n    b.append(4)\n\n这时，abcd四个列表都变成[1, 2, 3, 4]，emm…  所以直接以后不要把一个列表赋值给两个变量…除非不涉及修改，慎重慎重。。不过python中列表有`copy`一说，不过还没试过\n\n### \\@staticmethod\n    定义类中的的这个方法为静态方法，同理的还有`@classmethod`类方法。\n### 常见异常\n    1.AssertionError：当assert断言条件为假的时候抛出的异常\n    2.AttributeError：当访问的对象属性不存在的时候抛出的异常\n    3.IndexError：超出对象索引的范围时抛出的异常\n    4.KeyError：在字典中查找一个不存在的key抛出的异常\n    5.NameError：访问一个不存在的变量时抛出的异常\n    6.OSError：操作系统产生的异常\n    7.SyntaxError：语法错误时会抛出此异常\n    8.TypeError：类型错误，通常是不通类型之间的操作会出现此异常\n    9.ZeroDivisionError：进行数学运算时除数为0时会出现此异常··\n\n---\n\n---\n\n---\n\n# 事件模式中，事件篡改事故\n在循环创建事件时，将`event` `put`到队列中，此时，被处理一半，因为不在一个线程所以下一个循环来临就将`event`的内容进行了修改。 杜绝此方法除了添加锁，只好将事件`copy`之后再传入时间引擎。如此便可暂防止事件处理一半被修改的事情发生。 \n\n---\n\n---\n\n---\n\n# 代码块注释\n[Surrounding Blocks of Code with Language Constructs](https://www.jetbrains.com/help/pycharm/surrounding-blocks-of-code-with-language-constructs.html)\n### VisualStudio模式：\n    #region Description(说明)\n    print \"code here\"\n    #endregion\n### NetBeans模式：\n    // <editor-fold desc=\"Description\">\n    code here\n    // </editor-fold>\n\n# 类\n    以后详谈，本着一切皆对象的原则，所以对于类的了解决定了Python的认知，先记一个\n    def __init__(self):\n            super(Proformance, self).__init__()\n    #这个super表示了继承类和被继承类的 __init__调用时序，其它重名函数是覆盖，这个……\n## 数据类\n用一个类来表示一个数据类型（这几天想着这个表示不同数据类型的组合方法恰类似于C中的结构体，然后`Python`中的数组元素存储各种东西什么类啊、数组套数组啊，字典存储啊，恰巧与C中的指针指向指针……emm ）如：\n    \n    class A(object):\n        def __init__(self):\n        self.a = 'a'\n        self.b = 'b'\n    A().__dict__\n>{'a': 'a', 'b': 'b'}\n\n但是`A().__dict__['a'] = 'It is a'` 虽然不会报错，但之后再次调用`A().__dict__`显示结果还是一样，但：\n\n    a = A()\n    a.__dict__['a'] = 'It is a'\n    a.__dict__\n>{'a': 'It is a', 'b': 'b'} \n\n这样我就用过一次，在不确定数据类会有几个元素甚至不知道会是什么名称的时候来创建的，毕竟：(这样的方式可以随便添加嘛)\n\n    a.__dict__['w'] = 'It is www'\n    a.__dict__\n>{'a': 'It is a', 'b': 'b', 'w': 'It is www'\n\n### 若出现docx模块pyInstaller打包问题\n大概的解决步骤是这样的：\n找到python-docx包安装路径下的一个名为default.docx的文件，我是通过everything这个强大的搜索工具全局搜索找到这个文件的，它在我本地所在的路径是：E:\\code\\env\\.env\\Lib\\site-packages\\docx\\templates \n把找到的default.docx文件复制到我的py脚本文件所在的目录下。\n修改脚本中创建Document对象的方式：\n从原来的创建方式：\ndocument = Document()\n修改为：\nimport os\ndocument = Document(docx=os.path.join(os.getcwd(), 'default.docx'))\n再次用pyinstaller工具打包脚本为exe文件\n把default.docx文件复制到与生成的exe文件相同的路径下，再次运行exe文件，顺利运行通过，没有再出现之前的报错，问题得到解决。\n作者：(m2fox)[https://www.jianshu.com/p/94ac13f6633e]\n來源：简书\n\n#### 拼接List字符串\n将list中的元素拼接起来，并使用`,`隔开可这么来：\n    \n    import itertools \n    list = ['123', '567']\n    xlist = \",\".join(list)\n    or\n    ylist = \",\".join(*list)\n    s = .join(itertools.chain(kwargs.keys()))\n    \n区别在于x为一个元素添加一个`,`，y为把列表中的素也拆分之后再添加\n\n### SimpleHTTPServer\n小型的局域网嘛☺，很常用，不过在Python3中有了变化…\n```py\n    $ Python2\n    python -m SimpleHTTPServer \n    ---\n    $ Python3\n    python -m http.server\n```\n<font color=#126590>顺带一提</font>：`-m`是可以在外执行内库的操作，🦑大概是这个意思吧—— 用`pdb`的时候也是这么用的…\n\n### 老夫的月份生成\n```python \n# -*- coding:utf-8 -*-\nimport datetime\nimport copy\n\ndef splitMonth(start, end):\n    start = str2Date(start)\n    end = str2Date(end)\n    _delta = end - start\n    datelist = []\n    if _delta.days > 10:\n        # 拆分\n        # 按*月*拆分（10日间隔）\n        n = 0\n        _start = copy.copy(start)\n        while _delta.days > 0:\n            n += 1\n            if _start.day < 10:\n                _end = datetime.date(_start.year, _start.month, 10)\n                if end > _end:\n                    datelist.append((date2str(_start), date2str(_end)))\n                    _start = _end + datetime.timedelta(1)\n                else:\n                    datelist.append((date2str(_start), date2str(end)))\n                    break\n            elif _start.day < 20:\n                _end = datetime.date(_start.year, _start.month, 20)\n                if end > _end:\n                    datelist.append((date2str(_start), date2str(_end)))\n                    _start = _end + datetime.timedelta(1)\n                else:\n                    datelist.append((date2str(_start), date2str(end)))\n                    break\n            else:\n                _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(15)\n                _end = datetime.date(_end.year, _end.month, 1) - datetime.timedelta(1)\n                if end > _end:\n                    datelist.append((date2str(_start), date2str(_end)))\n                    _start = _end + datetime.timedelta(1)\n                else:\n                    datelist.append(date2str(_start), date2str(end))\n                    break\n\n            _delta = end - _start + datetime.timedelta(1)\n\n        return datelist\n    else:\n        return [(date2str(start), date2str(end))]\ndef splitMouthBySE_N(start, end, n):\n    start = str2Date(start)\n    end = str2Date(end)\n    _delta = end - start\n    datelist = []\n    if _delta.days > n:\n        # 拆分\n        # 按*月*拆分（10日间隔）\n        _start = copy.copy(start)\n        while _delta.days > 0:\n            _loop = 0\n            for _n in range(int(30/n)):\n                _loop = _loop + n\n                if _start.day < _loop:\n                    if _start.month == 2 and _loop > 28:\n                        if _start.year%4:\n                            _end = datetime.date(_start.year, _start.month, 28)\n                        else:\n                            _end = datetime.date(_start.year, _start.month, 29)\n                    else:\n                        _end = datetime.date(_start.year, _start.month, _loop)\n                    if end > _end:\n                        datelist.append((date2str(_start), date2str(_end)))\n                        _start = _end + datetime.timedelta(1)\n                    else:\n                        datelist.append((date2str(_start), date2str(end)))\n                        _delta = datetime.timedelta(0)\n                        break\n                    _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(15)\n                else:\n                    continue\n            else:\n                _end = datetime.date(_end.year, _end.month, 1) - datetime.timedelta(1)\n                if end > _end:\n                    if _start > _end:\n                        _delta = end - _start + datetime.timedelta(1)\n                    else:\n                        datelist.append((date2str(_start), date2str(_end)))\n                    _start = _end + datetime.timedelta(1)\n                else:\n                    datelist.append((date2str(_start), date2str(end)))\n                    _delta = datetime.timedelta(0)\n                    break\n\n                _delta = end - _start + datetime.timedelta(1)\n\n        return datelist\n    else:\n        return [(date2str(start), date2str(end))]\ndef gropdate(datelist, itemNum=0, gropNum=0):\n    #将传入datelist[(str(start1), str(end1)), (str(start2), str(end2))...] -> 传入为月碎片\n    # 打按月对月碎片进行打组。 \n    # 传入参数 itemNum: 一个组含几个月, gropNum: 将这些碎片打为几组\n    _dic = collections.OrderedDict()\n    for i in datelist:\n        # 按月分组\n        keyName = i[0].split('-')[1]\n        if keyName not in _dic:\n            _dic[keyName] = []\n        _dic[keyName].append(i)\n    monthList = []\n    groups = []\n    groupListTemp = []\n    groupList = []\n    for i in _dic.keys():\n        # 得到月份列表\n        monthList.append(i) #[1,2,3...,7,8,9]\n    monthNum = len(monthList)\n\n    if gropNum:\n        itemNum = round(float(monthNum)/gropNum)\n        itemNum = int(itemNum)\n    if itemNum:\n        slipNum = int(monthNum/itemNum)\n        start = 0\n        end = int(itemNum)\n        for mon in range(slipNum):\n            groups.append(monthList[int(start):int(end)])\n            start = copy.copy(end)\n            end = end + itemNum\n        if monthNum%itemNum:\n            groups.append(monthList[start:monthNum])    # 非整除补足\n        for i in groups:\n            for ii in i:\n                groupListTemp.append(_dic[ii])\n            groupList.append(groupListTemp)\n            groupListTemp = []\n        return groupList\n    else:\n        return None\n        \n# region 日期`date`格式与`str`转换处理\ndef date2str(_date):\n    # datetime.date 转换为 str    (有为了适配原程序的补零操作…)\n    if _date.month < 10:\n        strDate = str(_date.year) + '-' + '0'+str(_date.month) + '-' + str(_date.day)\n    else:\n        strDate = str(_date.year) + '-' + str(_date.month) + '-' + str(_date.day)\n    if _date.day < 10:\n        strDate = strDate[:-1] + '0'+str(_date.day)\n    return strDate\ndef str2Date(_str):\n    # str 转换为 datetime.date\n    y, m, d = _str.split('-')\n    return datetime.date(int(y), int(m), int(d))\n\n# endregion \n\n\nif __name__ == '__main__':\n    print(splitMouthBySE_N('2016-01-02', '2018-03-01', 5))\n```\n\n## Python3.6之后的奇淫技巧\n1. 可使用下划线将长数字隔开，便于阅读  `10000`=`10_000`\n2. 字符串操作除了 `%`和`format`之外还有`f`操作\n```python\n$ %\ns = \"%s is %d\" % ('two', 2)\n$ format\ns = \"{fruit} is {color}\".format(fruit='apple', color='red')\n$ f\nname = 'Bob'\nf'Hello, {name}!'\n### 甚至\na = 5\nb = 10\nf'Five plus ten is {a + b} and not {2 * (a + b)}.'\n#### 精度\nPI = 3.141592653\nf\"Pi is {PI:.2f}\"\n>>> 'Pi is 3.14'\n>>> error = 50159747054\n##### 以16进制格式化\nf'Programmer Error: {error:#x}'\n>>>'Programmer Error: 0xbadc0ffee'\n\n##### 以二进制格式化\nf'Programmer Error: {error:#b}'\n>>> 'Programmer Error: 0b101110101101110000001111111111101110'\n```\n3.变量注释 `def my_add(a: int, b: int) -> int:   \\n  return 0` 仅仅用来注释，其实传参出参<font color=#9aaa00>并不受控制…</font>\n\n---\n\n# 魔法方法\n假设定义类  `EmmNe`, `EmmNe`拥有`self.aaa`与`self.aaadict`、列表`self.aaalist` 且`__init__`允许两个传参\n\n<font color=#feaaaa>\\_\\_len\\_\\_</font>:\n```python\ndef __len__(self):\n    return len(self.aaa)\n# 则在外`len`此实例化对象时，会返回这个结果\n```\n<font color=#feaaaa>\\_\\_getitem\\_\\_</font>:\n```python\ndef __getitem__(self, key)\n    return self.aaadict[key]\nen = EmmNe(1, 2)\nprint(en[`])\n> 2\n#就像上面那样。 不过还有下面的用法\ndef __getitem__(self, index):\n    retrun self.aaalist[index]\nw = Emm(1,2)\nfor i in w:\n    print (i)\n# 则输出列表中内容\n```\n<font color=#feaaaa>\\_\\_setitem\\_\\_</font>:\n```python\ndef __setitem__(self, key, value)\n    return self.aaadict[key] = value\n# 拥有此方法，则在外可将实例对象当作字典操作:\nenp['a'] = 'asd'\n# 就像这样\n\n```\n### collectionss\n总结一句话： `collections`出品， 必属精品。\n马上能想到的 有序字典，还有那啥都是出自此个模块之下。\n今天用的 计数也是出自此处      反正之后 这个里面能实现的功能，那就放弃手写吧————😓\nfrom collections import Counter\n\n### Function Annotations\nAnnotations are stored in the __annotations__ attribute of the function as a dictionary and have no effect on any other part of the function. Parameter annotations are defined by a colon after the parameter name, followed by an expression evaluating to the value of the annotation. Return annotations are defined by a literal ->, followed by an expression, between the parameter list and the colon denoting the end of the def statement. The following example has a positional argument, a keyword argument, and the return value annotated:\n```python \n>>>\ndef f(ham: str, eggs: str = 'eggs') -> str:\n    print(\"Annotations:\", f.__annotations__)\n    print(\"Arguments:\", ham, eggs)\n    return ham + ' and ' + eggs\n\nf('spam')\n\n>>> Annotations: {'ham': <class 'str'>, 'return': <class 'str'>, 'eggs': <class 'str'>}\n>>> Arguments: spam eggs\n>>> 'spam and eggs'\n```\n### Logger\n模块名： logging\n上手容易，功能丰富，性能肯定也好过自己✍\n另外，懒———\n```\nimport sys\nimport logging\nimport logging_error\n\nlogger1 = logging.getLogger('loger1')\nlogger2 = logging.getLogger('loger2')\n#实例化两个logger,默认名称为：`root`\n\"\"\"\n我居然以为root是程序执行处的名字，以为放到函数中就会显示函数名。emm\n所以才有了下面多层函数嵌套…，以及调用外部`import`\n\"\"\"\n\nformatter = logging.Formatter('[%(name)s]%(asctime)s %(levelname)-8s: %(message)s')\n#定义日志格式：\n\"\"\"\n%(name)s Logger的名字\n%(levelno)s 数字形式的日志级别\n%(levelname)s 文本形式的日志级别\n%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有\n%(filename)s 调用日志输出函数的模块的文件名\n%(module)s 调用日志输出函数的模块名|\n%(funcName)s 调用日志输出函数的函数名|\n%(lineno)d 调用日志输出函数的语句所在的代码行\n%(created)f 当前时间，用UNIX标准的表示时间的浮点数表示|\n%(relativeCreated)d 输出日志信息时的，自Logger创建以来的毫秒数|\n%(asctime)s 字符串形式的当前时间。默认格式是“2003-07-08 16:49:45,896”。逗号后面的是毫秒\n%(thread)d 线程ID。可能没有\n%(threadName)s 线程名。可能没有\n%(process)d 进程ID。可能没有\n%(message)s 用户输出的消息\n\"\"\"\n\nfileHandler = logging.FileHandler('loger.log')\nfileHandler.setFormatter(formatter)\n\nconsoleHandler = logging.StreamHandler(sys.stdout)\nconsoleHandler.formatter = formatter\n#配置文件、终端日志处理器。可以使用不同格式，来区分处理\n\nlogger1.addHandler(fileHandler)\nlogger2.addHandler(fileHandler)\nlogger1.addHandler(consoleHandler)\nlogger2.addHandler(consoleHandler)\n#为日志机添加处理器\n\nlogger1.setLevel(logging.INFO)\n#logger2.setLevel()\n#设置各日志机打印等级\n\n\nlogger1.debug('debugO')\nlogger1.info('info')\nlogger2.info('info')\nlogger1.error('error')\ndef warn_msg():\n    logger1.warn('warn msg')\n    warn_msg2()\ndef warn_msg2():\n    logger2.warn(u'warn 信息')\n    logging_error.error_demo()\nwarn_msg()\n```\n当然，logger还有别的调用方法，不过这应该就够了，\n具体要怎么实现，就去找官方文档了。\n预防针： 多种配置方法、日志重复输出:[见此](http://python.jobbole.com/86887/)\n\n## lambda函数\n### 排序\n```py\naaa\n>>> [{'time': 1}, {'time': 3}, {'time': 2}]\nsorted(aaa, key = lambda x: x[\"time\"])\n>>> [{'time': 1}, {'time': 2}, {'time': 3}]\nsorted(aaa, key = lambda x: x[\"time\"], reverse=True)\n>>> [{'time': 3}, {'time': 2}, {'time': 1}]\n```\n\n## Mock \n使用: unittest\n```python\n    mock.patch.object: Mock # 一个类, 后接方法\n    mock.patch: Mock # 一个方法, 按路径\n\n    @mock.patch(\"databases.wx_service.get_user_base_info\")\n    @mock.patch.object(wx_service.WeChat_OAP, \"send_template_msg\")\n    def test_create_weawarning(self, mock_send_template_msg, mock_get_user_base_info):\n        # 装饰器生效从内到外, 传入参数顺序, 从左到右\n        pass\n        mock_send_template_msg.return_value = ''/{}/[]/() 皆可  设定mock返回值\n        mock_get_user_base_info.side_effect = [''/{}/[]/(), ''/{}/[]/()] 设定每次调用mock函数依次返回返回值\n```\n\n","source":"_posts/notes/noteOfpython.md","raw":"---\ntitle: Python笔记(notes of Python)\ndate: 2017-07-01 21:20\nmodified: 2018-05-28 17:30\ncategory: [note, python, learning]\ntags: [python, learning]\nslug: notesPython\n---\nauthor:Ian\n\n![python](https://www.python.org/static/img/python-logo@2x.png)\n\n## PiP Not Found Issue\n使用`pip`安装某包时， 提示让更新， 按提示操作更新没效果没反应再用就提示`ModuleNotFoundError: No module named 'pip'` (ˉ▽ˉ；)...\n\n## ModuleNotFoundError: No module named 'pip'\n### 升级`PiP`时出现问题可由下方命令修复\n```\npython -m ensurepip\npython -m pip install --upgrade pip\n```\n## SSL校验\n安装EasyOCR时,\n`reader = easyocr.Reader(['ch_sim','en'])`\n下载到接近90,结果报错了.... 估计是SSL问题加入以下两条,不知如何.\n```py\nimport ssl\nssl._create_default_https_context = ssl._create_unverified_context\n```\n\nfrom http.client\n`To revert to the previous, unverified, behavior ssl._create_unverified_context() can be passed to the context parameter.`\n\n### 使用国内镜像下载Python\n```shell\n\tpip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpy等包名)\n    # 一键更新pip 包资源(利用管道grep传输查询到的需要更新包名，传输到install命令)\n    pip3 freeze --local | grep -v '^\\-e' | cut -d = -f 1  | xargs -n1 pip3 install -U\n    # 权限不够的话就在`pip3 install` 之前加`sudo`反正我不习惯用`root`\n```\n\n### 声明参数类型\npython3 在定义函数的时候可以声明函数类型啦：虽然不做限制，但作为`label`还是蛮好的。\n```py\nimport io\n\ndef add(x:int, y:int) -> int:\n    return x + y\n\ndef write(f: io.BytesIO, data: bytes) -> bool:\n    try:\n        f.write(data)\n    except IOError:\n        return False\n    else:\n        return True\n```\n终于不会之后写的忘了，要调用函数还得看半天这个函数应该怎么用…\n\n### 时间处理\n以下可以做周、月的加减处理\nrelativedelta examples\nLet’s begin our trip:\n\n```\nfrom datetime import *; from dateutil.relativedelta import *\nimport calendar\n```\n\n#### Store some values:\n\n```\nNOW = datetime.now()\nTODAY = date.today()\nNOW\n```\n> datetime.datetime(2003, 9, 17, 20, 54, 47, 282310)\n```\nTODAY\n```\n> datetime.date(2003, 9, 17)\n\n#### Next month\n\n>>> NOW+relativedelta(months=+1)\n```\ndatetime.datetime(2003, 10, 17, 20, 54, 47, 282310)\n```\n\n### 合并字典\n```python\na = {}\nb = {'a': 1}\nc = {**a, **b}\n\n```\nkey重复`b`中覆盖`a`, 否则单纯合并。\n\n### 聊胜于无的小玩意 preety tools\n##### 彩色输出\n模块名儿忘了，以后贴2019.03.01  03:08\none minute later:\n`pip3 install ansicolors`\n```\nfrom colors import red, green, blue\nprint(red('This is red'))\nprint(green('This is green'))\nprint(blue('This is blue'))\n\nfrom colors import color\nfor i in range(256):\n    print(color('Color #%d' % i, fg=i))\n```\n以上程序只能写在`.py`文件中,运行，而不能在…‘偷懒模式‘中。\n#### Python3 ThreadPoolExecutor 线程池内库\n在`python3`之后不久，有关线程池的使用就被集成到内库之中。\n`from concurrent.futures import ThreadPoolExecutor`\n使用方法：\n```\n    ThreadPoolExecutor(max_workers=12)\n    # 设置线程池大小\n    .submit(func_name, (para))    # 提交任务\n    .done()    # 查看任务是否完成\n    .cancel()    # 没有被放入线程池中才能生效\n    .result()    # 获取该任务返回值\n\n    from concurrent.futures import as_completed\n    # 用于取出所有任务结果，省去一直用.done去查看的繁琐。但该方法\n# 是一个生成器，所以任务未完成会阻塞。 还有 wait map 等用法就去看文档吧。\n```\n##### 安装错误？\n居然有`pip3 install XX`的错误…这也是因为有旧版`pip3`存留。需要\n```shell\n$bash -d pip3 \n$bash -r pip3\n```\n来清理shell中旧版pip缓存。\n\n### IDE?\n其实要不要IDE都无所为，因为本就是脚本，要IDE只能说打开一个陌生项目查看时能够跳转函数。至于`vim`大概不能跳转吧，毕竟跳转需要把文件都加载才能实现。emm  来来，IDE的话就`PyCharm`除了编程页面颜色难看之外其他功能都不错，另外不支持中文路径，不过应该不是由于`Python`语言造成的，因为蟒蛇脚本是可以在中文路径下运行di<date:2018年5月28日17点16分>\n#### print语句： 含有自动换行，所以要想不换行的话需要在结尾加一个\",\"如：\t  \n\tfor i in range(0,5):\n\n\t\tprint i,\n\n而Python3版本则应该也可以 print(a,b,c);然而Python2.7不行\n\n#### 根据字典中值大小排列：\n\tsorted(dict2.iteritems(),key=lambda item:item[1],reverse=True) \n\t# item[0]即根据键来排列[1]为根据对应值\n\n#### format：如:\n\tprint('my name is{0},and my age is{1}'.format('song',18))\n\n##### or:\n\turl = 'http://www.google.com/page={}/'\n\n\tnewsurl = url.format(i)\n\t# 旋即其后内容则代替{}位置\n另，在{a}{b}{c}可通過format(a=1,b=2,c=3)來賦值\n\n\n---\n\n\n### BeautifulSoup\n#### select语句：在内容前加'#'可以获得其内容，如：\n\tsoup.select('artibodyTitle')[0].text\n\tselect().contents\n\t\"\"\"\n\t把标签变成不同list，同List中的不同元素 然后用[0]可取得第一个元素内容，而不与后方的内容合到一起\n\t*.strip()可将取出的‘\\t\\t’移除\n\t\"\"\"\n\t.select('time-source span a')\n\t# 从time-source中的<span下<a下取得内容e\n\t.select('.productPrice')[0].text\n\t# 獲取class=\"productPrice\"下價格內容\n\n\n---\n\n\n### datetime字符串转时间  时间转字符串:\n\tfrom datetime import datetime\n\tdt = datetime.strptime(timesource,'%Y年%m月%d日%H:%M')(****年*月*日*22:03)\n\tdt.strftime('%Y-%m-%d')\n\n---\n\n### 保存數據到xlsx，sqlite3、csv：\n\t.to_excel('name.xlsx')：输出为excle文件\n\timport sqlite3  #保存到数据库\n\twith sqlite3.connect('name.sqlite') as db:\n\t\tdf.to_sql('name',con = db)\n#####  从数据库取出\n\twith sqlite3.connect('name.sqlite') as db:\n\t\tdf2 = pandas.read_sql_query('SELECT' * FROM name',con = db)\n#### 類型錯誤 TypeError: a bytes-like object is required, not 'str'\n\tcsv_file = open(\"rent.csv\",\"wb\")    \n\tcsv_writer = csv.writer(csv_file, delimiter=',')    #创建writer对象，指定文件与分隔符\n\twriter.writerow(['title', 'summary', 'year', 'id', 'count', 'link'])\n\nPython2.7 轉到 3.5下時提示由此錯誤，代碼爲\n##### 原因，解決方法：\n\t因爲Python3.5 對於str與bytes類型區分變得敏感，所以原本在2.7下正常的代碼不能正常運行。\n\t雖然，利用str.encode() 或者 str = bytes(str, encoding = 'utf-8')可以轉換格式\n\t然而錯誤依然有……解決辦法則是放棄論壇裏的說法，找到官網Demo\n##### 更改如下：\n```python\n\tcsvfile = open('goodsList.csv', 'w', newline='')\n\tspamwriter = csv.writer(csvfile, delimiter=',')\n\tspamwriter.writerow([productTitle, productPrice, productShop])\n```\n細節在於，在打開文件的時候去除`wb`裏面的`b`即不用二進制模式打開。\n\n\n---\n\n### Image下：\n获取图像分辨率：\n```python\n\tim = Image.open(0.0)\n\twidth = im.size[0]\n\theight = im.size[1]\n```\n\n---\n\n### Pandas:\n```python \n\tbox = pd.read_csv(\"filename.csv, index_col=\"Date\", parse_dates=Ture) \n\t#读入文件，讲Date作为日期\n\tbox.columns = ['',''] \n\t# 更改列名\n\tbox['new'] = box['1']+box['2']\n\t# 新增一列为1与2之和\n\tbox.resample('d', 'sum') \n\t# 重新按照‘d’:每天，进行采样  方式为取和('w','sum')所有数据在一周内进行取和\n```\n\n## 闲语：\n#### while True与while 1的区别：\n在Python2 中，循环判断一亿次，我的小电脑的执行速度是\n\t\n    while one: 9.97739481926\n    while_true: 18.8063299656\n    while 1 以压倒性胜利。\n    \n到了Python3中，则成了\n\t\n    while one: 16.101972927001043\n    while_true: 16.25536527499935\n    \n>嗯，不错，不分伯仲——个鬼啊。整体变差了好吧。0.0   原因待明。\n\n[^_^]:\n\thello你好啊.你还认识我吗？我感觉不成.我去,居然成了:怎么回事！！！难道就win比较傻[2018年5月18日不是今天写的啊，只是发现这么个东西，然后，也发现注释不能有空格]\n\n\n\n# Python 小记 📖\n先贴一个客观的教程文档网站<http://www.runoob.com/python/python-tutorial.html>\n#### Windows 下添加环境变量，CMD中Python2 与Python3 共存\nWindows 下 把python2 路径加入到环境变量中，再修改python2.exe可以和python3区分方便在CMD中调用，但代价就是经常命令报错……\n\n不过也可以使用py -2来区分，所以还是不改名字了吧\nWindows 下 用`py -2 -m pip install ***`以及`py -3 -m pip install ***`来区分安装到python2 或者 python3.\n\n### 变量\n类下直接定义的变量可以继承，然而并不能被自己的函数所调用，意义不明…\n\n被继承的类可以调用继承类中定义的self.* 变量，俺认为这是因为它们在实例时都被当成了self 本身。另外，优先调用自己中的self变量，没有，才会去被继承类中去查找（先后顺序可得前方解答）。\n\n## 变换数据类型\nPython 在从服务器接收或者发送数据时需要字符类型转换，'''struct'''便是为此而工作\n#### struct.pack\n```py\n    import struct\n    a = 20\n    b = 400\n    str = struct.pack(\"ii\", a, b)  \n    #转换后的str虽然是字符串类型，但相当于其他语言中的字节流（字节数组），可以在网络\n    #上传输\n    print 'length:', len(str)\n    print str\n    print repr(str)\n```\n> ---- result\n> length: 8\n        >    #----这里是乱码\n> '/x14/x00/x00/x00/x90/x01/x00/x00'\n\n格式符”i”表示转换为int，’ii’表示有两个int变量。进行转换后的结果长度为8个字节（int类型占用4个字节，两个int为8个字节），可以看到输出的结果是乱码，因为结果是二进制数据，所以显示为乱码。可以使用python的内置函数repr来获取可识别的字符串，其中十六进制的0x00000014, 0x00001009分别表示20和400。\n\n#### struct.unpack\n```py\n    str = struct.pack(\"ii\", 20, 400)\n    a1, a2 = struct.unpack(\"ii\", str)\n    print 'a1:', a1\n    print 'a2:', a2\n```\n> ---- result:\n> a1: 20\n> a2: 400\n\nstruct.unpack做的工作刚好与struct.pack相反，用于将字节流转换成python数据类型。它的函数原型为：struct.unpack(fmt, string)，该函数返回一个元组。\n\n#### struct.calcsize\n```python\n    struct.calcsize('i')\n    struct.calcsize('ii')\n    struct.calcsize('iic')\n    struct.calcsize('iicd')\n```\n> 4\n> 8\n> 9\n> 24\n\n`struct.calcsize`用于计算格式字符串所对应的结果的长度，如：`struct.calcsize(‘ii’)`，返回`8`。因为两个`int`类型所占用的长度是`8`个字节。\n\n#### struct.pack_into, struct.unpack_from\n```python\n    import struct\n    from ctypes import create_string_buffer\n\n    buf = create_string_buffer(12)\n    print repr(buf.raw)\n    struct.pack_into(\"iii\", buf, 0, 1, 2, -1)\n    print repr(buf.raw)\n    print struct.unpack_from('iii', buf, 0)\n```\n\n>---- result\n>'/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00'\n>'/x01/x00/x00/x00/x02/x00/x00/x00/xff/xff/xff/xff'\n>(1, 2, -1)\n\n## Python3 \n在<font color=red>Python3</font>中，转换字符串时，不能直接`pack('8s', 'i am str')`, 需要将字符串转换成二进制所以在语法中标记`pack('8s', b'i am str')`使用`'b'`来进行标记\n\n以上来自[Darkbull](http://python.jobbole.com/81554/) 这是转贴地址，不知道为什么我看的转贴挂的原帖地址失效了 😰\n\n---\n\n---\n\n---\n\n### 一不小心发现的语法\n<font color=red>py2.7</font>\n\n    while 'a' in a or b:\n        break\n    # 没错，意思就是如果a或者是b包含‘a’的话…     \n\n### \\* 与 ** 方法:\n呃，原来`*`在MarkDown里面是斜体的意思啊——需要斜体显示的前后各一个星号\n\n    def a(* a, **b):\n        balabala\n这里的*a， a在函数中被赋值为一个元组，b被赋值为一个字典。所以在调用的时候嘞，只能把能往一个元组里塞的放在前面，而能够生成字典的放在后面\n    \n    a(1,2,3,4,5,6,7,8,9,a:'a',b:1,c:'nihao')\n就像这么一样来调用。  另外，def a()函数中还能在前方再新加一个输入\n\n    def aa(jiushishuowo, *a, **b):\n        pass\n这样的话，那么在调用的时候第一个逗号前面的内容会赋值给它。over，回去拿快递了~~~\n\n🐶 年假前再来补充一下：约定名*args, **kwargs\n\n#### 获取文件路径\n    path = os.path.abspath(os.path.dirname(__file__))\n    # 获取当前运行文件的路径。需在本地有此文件，在命令行中出错\n    \n    for root, subdirs, files in os.walk(path):\n    # 遍历所有path下文件  path为要遍历的路径\n\n#### 同获取路径\n    os.path.abspath('./')\n    os.path.abspath('Deskop')\n    os.path.abspath('Deskop') + os.path.sep\n>'C:\\\\Users\\\\Administrator'\n\n>'C:\\\\Users\\\\Administrator\\\\Deskop'\n\n>'C:\\\\Users\\\\Administrator\\\\Deskop\\\\'\n\n### 获取指定目录下所有文件名列表\n    os.listdir('D\\IFData')\n\n---\n\n##### \\__dict__\n    class Province:\n        country = 'China'\n\n        def __init__(self, name, count):\n            self.name = name\n            self.count = count\n\n        def func(self, *args, **kwargs):\n            print 'func'\n\n    print Province.__dict__     # 类输出\n    obj1 = Province('HuBei', 100)\n    print obj1.__dict__         # 对象1\n    obj2 = Province('hulala', 3888)\n    print obj2.__dict__         # 对象2\n\n>`{'country': 'China', '__module__': '__main__', 'func': <function func at 0x049EF470>, '__init__': <function __init__ at 0x049EF4F0>, '__doc__': None}`\n\n>`{'count': 100, 'name': 'HuBei'}`\n\n>`{'count': 3888, 'name': 'hulala'}`\n\n类输出的是全局的函数，变量等信息。 \n对象输出的只是对象拥有的普通变量而已\n\n呃(⊙﹏⊙)，等下再去拿吧…  差点忘了说，这个__dict__与字典相配合来回赋值简直舒服… 步骤为：将某个变量=一个类（数据类（就是能够a.b这么调用的数值））然后这个变量就能a.b的这么使用了。  而后也能通过a.__dict__（这是一个字典）再将所需要的数值取出来，转赋值为别的东西。  反正我是用到了… 在想要实现一个函数来保存一个变量的某些属性的时候。（呃(⊙﹏⊙)用爱去理解我所描述的场合吧。）\n\n\n### IF ELSE\n    # 执行时会将IF前面整个表达式作为判断结果后的执行对象，\n    # 而不是仅仅替换某一个数字或者变量。  即 下方表达式运算结果\n    # 不是  `4`       和      `5`  而是如下所示\n    a = 1 + 3 if 1 == 2 else 2 + 1\n    a\n    a = 1 + 3 if 1 == 1 else 2 + 1\n    a\n> 3\n\n> 4\n\n---\n\n---\n\n---\n\n### Python 2 中的object新式类和经典类\n    # 作者：邹冲\n    # 链接：https://www.zhihu.com/question/19754936/answer/202650790\n    class A:\n        def foo(self):\n        print('called A.foo()')\n\n    class B(A):\n        pass\n\n    class C(A):\n        def foo(self):\n        print('called C.foo()')\n\n    class D(B, C): \n        pass\n\n    if __name__ == '__main__':\n        d = D() \n        d.foo()\n\n> B、C 是 A 的子类，D 多继承了 B、C 两个类，其中 C 重写了 A 中的 foo() 方法。\n\n> 如果 A 是经典类（如上代码），当调用 D 的实例的 foo() 方法时，Python 会按照深度优先的方法去搜索 foo() ，路径是 B-A-C ，执行的是 A 中的 foo() ；\n\n> 如果 A 是新式类，当调用 D 的实例的 foo() 方法时，Python 会按照广度优先的方法去搜索 foo() ，路径是 B-C-A ，执行的是 C 中的 foo() 。\n\n> 因为 D 是直接继承 C 的，从逻辑上说，执行 C 中的 foo() 更加合理，因此新式类对多继承的处理更为合乎逻辑。\n\n> 在 Python 3.x 中的新式类貌似已经兼容了经典类，无论 A 是否继承 object 类， D 实例中的 foo() 都会执行 C 中的 foo() 。但是在 Python 2.7 中这种差异仍然存在，因此还是推荐使用新式类，要继承 object 类。\n\n#### .items()\n一个字典 a，其a.items()为将每对对应值组为一个元组。即使键值也为一个字典也是将此字典作为元组元素。(￣▽￣)\" emm\n\n---\n\n---\n\n### Queue\n队列，先进先出型。可存数字、字符…嘛，Python里啥都一样。所以啥都能存。用于事件按顺序执行。示例如~：\n    \n    import Queue\n    mqueue = Queue.Queue(maxsize = 3)\n    mqueue.put(10)\n    mqueue.put(15)\n    mqueue.put(12)\n    # 此时如果再往里存呢，就会卡住… 持续等待有空位置\n    # 所以\n    mqueue.get()        #取出第一个存入\n    mqueue.put('14sas4')  #继续存\n    ## 在接触的项目中，是借用字典，来将处理函数作为Value，将Keys，put到队\n    列中，再进行取出执行。\n\n如果队列中没有数值之后再`get`也会卡住……\n所以以下东西就显得比较重要了：\n    \n\n### series和dataframe\n先贴来源：<http://blog.csdn.net/ly_ysys629/article/details/54944153>\n\n##### 属性\n    series    ：.index, .values, .name, .index.name\n    dataframe ：.columns, .index, .values\n\n##### <font color=red>series</font>:\n一组数组（列表或元组），series除了一组数据外还包括一组索引（即只有行索引），索引可自行定义也可利用Series(),自动生成索引;\n##### <font color=red>dataframe</font>:\n是表格型数据，既有行索引又有列索引，每列数据可以为不同类型数据（数值、字符串、布尔型值），可利用DataFrame（其他数据，dataframe属性)指定dataframe的属性创建dataframe。\n\n##### 实例\n##### series\n    #创建series\n    import pandas as pd\n    obj_list=[1,2,3,4]\n    obj_tuple=(4,5,6,7)\n    obj_dict={'a':[1,2],'b':[2,3],'c':[3,4],'d':[4,5]}\n    obj_series_list=pd.Series(obj_list)#通过列表创建series\n    obj_series_tuple=pd.Series(obj_tuple,index=list('abcd'))\n    #通过元组创建series\n    obj_series_dict=pd.Series(obj_dict)#通过字典创建series\n    #定义属性\n    obj_series_list.index.name='zimu'\n    obj_series_list.name='data'\n\n    print \"#通过列表创建series\"\n    print obj_series_list\n    print \"#通过元组创建series\"\n    print obj_series_tuple\n    print \"#通过字典创建series\"\n    print obj_series_dict\n    #显示series类型及属性\n    print type(obj_series_list),obj_series_list.dtype\n    print obj_series_list.index,obj_series_list.index.name\n    print obj_series_list.values,obj_series_list.name\n\n> #通过列表创建series\n\n>zimu\n\n>0    1\n\n>1    2\n\n>2    3\n\n>3    4\n\n>Name: data, dtype: int64\n\n---\n\n>#通过元组创建series\n\n    a    4\n    b    5\n    c    6\n    d    7\n    dtype: int32\n\n---\n\n>#通过字典创建series\n\n    a    [1, 2]\n    b    [2, 3]\n    c    [3, 4]\n    d    [4, 5]\n    dtype: object\n    <class 'pandas.core.series.Series'> int64\n    RangeIndex(start=0, stop=4, step=1, name=u'zimu') zimu\n    [1 2 3 4] data\n\n##### dataframe\n    #创建dataframe\n    import pandas as pd\n    import numpy as np\n    obj_dict={'a':[1,2],'b':[2,3],'c':[3,4],'d':[4,5]}\n    obj_array=np.array([[1,2,3,4],[3,4,5,6]])\n    obj_series_1=pd.Series([11,12,13,14])\n    obj_series_2=pd.Series([21,22,23,24])\n    obj_dataframe_dict=pd.DataFrame(obj_dict)\n    #通过字典创建dataframe\n    obj_dataframe_array=pd.DataFrame(obj_array,index=['one','two'])\n    #通过矩阵创建dataframe\n    obj_dataframe_series=pd.DataFrame([obj_series_1,obj_series_2])\n    #通过series创建dataframe\n    obj_dataframe_dataframe=pd.DataFrame(obj_dataframe_series,index=\n        [0,1,'one'],columns=[0,1,2,'a'])\n    #通过其他dataframe创建dataframe\n    print \"#通过字典创建dataframe\"\n    print obj_dataframe_dict\n    print \"#通过矩阵创建dataframe\"\n    print obj_dataframe_array\n    print \"#通过series创建dataframe\"\n    print obj_dataframe_series\n    print \"#通过其他dataframe创建dataframe\"\n    print obj_dataframe_dataframe\n    #dataframe属性\n    print obj_dataframe_dataframe.dtypes\n    print obj_dataframe_dataframe.values\n    print obj_dataframe_dataframe.columns\n    print obj_dataframe_dataframe.index\n> 输出结果为：\n    #通过字典创建dataframe\n       a  b  c  d\n    0  1  2  3  4\n    1  2  3  4  5\n    #通过矩阵创建dataframe\n         0  1  2  3\n    one  1  2  3  4\n    two  3  4  5  6\n    #通过series创建dataframe\n        0   1   2   3\n    0  11  12  13  14\n    1  21  22  23  24\n    #通过其他dataframe创建dataframe\n            0     1     2   a\n    0    11.0  12.0  13.0 NaN\n    1    21.0  22.0  23.0 NaN\n    one   NaN   NaN   NaN NaN\n    0    float64\n    1    float64\n    2    float64\n    a    float64\n    dtype: object\n    [[ 11.  12.  13.  nan]\n     [ 21.  22.  23.  nan]\n     [ nan  nan  nan  nan]]\n    Index([0, 1, 2, u'a'], dtype='object')\n    Index([0, 1, u'one'], dtype='object')\n取数据的话，便是`obj_dataframe_dict['a'][0]`取出数值即为`1`\n### 自命名创建方式\n    df4 = pd.DataFrame(np.random.randn(6, 4), \n        index=[u'第二', 4, 3, 2, 1, 0], columns=[u'第一',5,4,1])\n    #行为：     第一，      5，         4，         1\n    #列为：第二 -0.091305   ...\n    #       4   ...\n    #       3\n    #       2\n    #       1\n    #       0                                       ...\n### 查看\n    .dtypes     查看各行数据格式\n    .head()     查看前几行（默认5）\n    .tail()         查看后几行\n    .index      查看数据框引索\n    .columns        查看列名\n    .values     数据值\n    .T          转置\n    .sort           排序  .sort(columns = '***')根据***列数据进行排序\n\n\n###### <font color=green>取数据方法见上</font>\n\n### zip 和 数组变字典\n    a = [1,2,3]\n    b = [4,5,6]\n    c = [4,5,6,7,8]\n    zipped = zip(a,b)\n>[(1, 4), (2, 5), (3, 6)]\n\n    zip(a,c)\n>[(1, 4), (2, 5), (3, 6)]\n\n    zip(*zipped)\n>[(1, 2, 3), (4, 5, 6)]\n\nzip 也可以二维矩阵变换（矩阵的行列互换） \n因为其作用为按序号重组数组。（其英语翻译为拉链……）\n\n#### 数组变字典~：\n    dic(zip(a, b))\n    # a中值为key b中值为values\n\n### 字典操作\n    dict= sorted(dic.items(), key=lambda d:d[0]) \n    # 将字典按照键值升序排列\n    # d： 无所谓的参数\n    # d[0]：0为升序，1为降序\n    # 如果是字符型，那么‘1’‘10’‘12’… 才是‘2’’20‘，因为Python的比较是按照\n        # 按序提取第一个字符进行比较。所以要排序，还是得用int\n    # 排序之后被转换为list类型。\n    for i in orderIDic:\n                spamwriter.writerow(orderIDic[i])\n    # 变为\n    for i in orderIDic:\n                spamwriter.writerow(i[1])\n\n---\n\n#### namedtuple\n    import collections\n    person = collections.namedtuple('P', 'name age gender')\n    # P: 类名   后面空格隔开的为变量名称\n    \n    bob = person(name = 'B', age = 30, gender = 'male')\n    jane = Person(name = 'J', age = 29, gender = 'female')\n    for people in [bob, jane]:\n        print (\"%s is %d years old %s\" % people)\n\n元组的命名—— 命名之后可以由bob.name 来调用 （看了那个Python面向对象进阶， 老多`__hahah__()`函数之后，所以这明显是当成基本类的变量在用了。  emm 这么么说也不贴切 😔  果然理解程度还是跟不上的…    emm 现在需要跟进的不是怎么用Python了，而是python的用法了，走起~  继续写future笔记去了—— 这个得看的明白点儿😄）\n\n\n---\n\n---\n\n### CSV\n#### 读取\n    import csv\n    reader = csv.reader(open('test.csv', 'rb')) \n    for item in reader:\n        print item\n##### 官方是这么教你的\n    #我记得我写过一次，怎么不见了…\n    import csv\n    with open('names.csv') as csvfile:\n        reader = csv.DictReader(csvfilr)\n        for row in reader:\n            print (row['first_name'], row['last_name'])\n#### 写入\n    import csv\n    writer = csv.writer(open('test2.csv', 'wb'))\n    writer.writerow(['col1', 'col2', 'col3'])\n    data = [range(3)  for i in range(3)]\n    for item in data:\n        writer.writerow(item)\n##### 官方教你这么写\n    import csv\n    with open('names.csv') as csvfile:\n        fieldnames = ['first_name', 'last_name']\n        writer = csv.DictWriter(csvfile, fieldnames = fieldnames)\n        \n        writer.writeheader()\n        writer.writerow('first_name' : 'Naled', 'last_name' : 'Beans')\n\n须注意之处：writer.writerow()方法中的参数是list类型，如果你想在A1列写入'hello'，则必须是writer.writerow('hello')，不然'hello'会被看成是个list从而被分写入5列。写入CSV时，CSV文件的创建必须加上'b'参数，即csv.writer(open('test.csv', 'wb'))，不然会出现隔行的现象。网上搜到的解释是：python正常写入文件的时候，每行的结束默认添加'\\n’，即0x0D，而writerow命令的结束会再增加一个0x0D0A，因此对于windows系统来说，就是两行，而采用’b'参数，用二进制进行文件写入，系统默认是不添加0x0D的。\n#### 关闭\n    csvfile.close()\n\n值得注意的是上面的文档是覆盖型创建，即，写数据只能在关闭文档之前完成，之后再打开文件，再写就会覆盖掉之前（清空再写） 下面的txt  `mode = 'a'` 就属于添加型写入了，再关闭之后再打开会在最后一条开始继续添加。然后将csv中的'w'替换成‘a’就行了。记得带上'b'要不会出现数据隔行…隔行显示\n##### 官方还叫你这么写嘞\n    with open('na1me.csv', 'ab') as csvfile:\n        spamwriter = csv.writer(csvfile, delimiter = ',')\n        spamwriter.writerow(['adasd', 'w.c.w', 'lol'])\n### txt保存\n    # 基本与CSV一致，emm其实都是保存为文档，就只有个后缀区别…\n    def text_save(content,filename,mode='a'):\n        # Try to save a list variable in txt file.\n        file = open(filename,mode)\n        file.write(str(content)+'\\n')\n        file.close()\n    text_save(np.mean(self.trueRange[start: ]), 'atr.txt')\n\n关于保存路径呢，windows 下必须<font color=green>?</font>用  ‘.\\\\.\\\\..’没错，当前路径（相对路径）和绝对路径都是这样用的\n\n`mode` `b`代表二进制模式打开，而`a`就有用了，表示有此文件就打开，没的话就创建。\n\n### json\n    和上述txt文件保存差不过，嗯应该说完全一样。因为我是用的是`json.dumps`\n#### dumps、loads\n        这两个语句前者是将字典转化为str格式，后者是将str转换为字典。所以保  \n    存到文件也不过是 字典 -> str ->(用`write`写入)-> 本地文件， 反之。\n        与之相对比的是`dump`和`load`这个是直接保存至文件，但`s`多好用\n    需注意的是`dumps`有`indent`参数可用来指明转换为`str`之后的缩进参    \n    数。一般`4`（所以说这里说的是空格数？）。  哦，`loads`直接加载文件也\n    行，不用读出来`str`再去转换\n    \n\n### Shelve \n    对象的持久化存储——\n    目的：Shelve模块为任意能够pickle的Python对象实现持久化存储，并提供一个类似字典的\n接口。\n---\n\n---\n\n---\n\n## 列表List\n<font color=red>需提前定义，不能像变量一样随用随写…</font>\n\n以下来自于 [Python 列表(List)操作方法详解](http://www.jb51.net/article/47978.htm)\n### 列表操作包含以下函数:\n    cmp(list1, list2)       # 比较两个列表的元素 \n    len(list)               # 列表元素个数 \n    max(list)               # 返回列表元素最大值 \n    min(list)               # 返回列表元素最小值 \n    list(seq)               # 将元组转换为列表 \n    \n### 列表操作包含以下方法:\n    list.append(obj)        # 在列表末尾添加新的对象\n    list.count(obj)         # 统计某个元素在列表中出现的次数\n    list.extend(seq)        # 在列表末尾一次性\n        # 追加另一个序列中的多个值（用新列表扩展原来的列表）\n    list.index(obj)         # 从列表中找出某个值第一个匹配项的索引位置\n    list.insert(index, obj) # 将对象插入列表\n    list.pop(obj=list[-1])      #移除列表中的一个元素（默认最后一个元素）\n        #，并且返回该元素的值\n    list.remove(obj)        # 移除列表中某个值的第一个匹配项\n    list.reverse()          # 反向列表中元素\n    list.sort([func])           # 对原列表进行排序\n\n## 字符串连接\n来自<http://www.cnblogs.com/chenjingyi/p/5741901.html>\n### 方法一\n    website = 'python' + 'tab' + '.com'\n### 方法二\n    listStr = ['python', 'tab', '.com'] \n    website = ''.join(listStr)\n### 方法三\n    website = '%s%s%s' % ('python', 'tab', '.com')\n结论： 连接个数少使用一，个数多使用二。  推荐，使用三 ~ ，~\n\n## 手动编译Py文件\n    import compileall\n    compileall.compile_dir(目录)\n\n---\n\n---\n\n---\n\n## 时间\n#### datetime\n    from datetime import datetime\n    a = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0) \n    a.year  \n    a.hour      #int 型变量\n>2017   \n\n>0\n\n>获取当前本机电脑💻时间，replace为自定义某个数值。单独调用某个信息如a.year、a.hour\n\n#### datetime 类型变量可直接相减获得间隔日\n    a = datetime.datetime.now()\n    # datetime.datetime(2017, 10, 18, 8, 52, 27, 5000)\n    b = datetime(2005, 2, 6)\n    # datetime.datetime(2005, 2, 6, 0, 0)\n    c = a - b \n    # datetime.timedelta(4637, 31947, 5000)\n    c.days  # int 型\n>4637\n#### timedelta\ntimedelta为datetime类型相减而来（datetime不能相加…），然后嘞，datetime.timedelta(1,35340)这是它的样子，前是天数，后是秒数。也就是说所有相减就是告诉你相距多少天零多少秒，都是标准单位（误）。要取出可 `.days`   和  `seconds``\n    \n### 格式化输出当前时间\n    import time\n    print time.strftime('%Y-%m-%d %H:%M:%S',time.localtime(time.time()))\n>2017-08-21 10:54:31\n\n### time\n    import time\n    time.time()     # 返回当前时间的时间戳（1970纪元后经过的浮点秒数）\n    # 返回值为float 可直接拿来运算，还是很舒服的。\n\n---\n\n---\n\n\n### 线程 threading\n#### 用于实现定时器\n    import threading\n    def hel():\n        print \"so you sucsessful to kill 5 seconde\"\n    time = threading.Timer(5, hel)\n    time.start()\n>so you sucsessful to kill 5 seconde\n在命令行中按下回车后消失，很有意思，并且当第二调用时time.start()时就会——\n\n>RuntimeError: threads can only be started once\n#### 循环调用\n以上的不能循环调用的话就没啥价值了，所以下面有个妖艳用法为：\n\n    def fun():\n        print \"So jian\"\n        global timer\n        timer = threading.Timer(5.5, fun)\n        timer.start()\n    timer = threading.Timer(1, fun)\n    timer.start()\n    # 通过自调自的方法循环创建时间线程，另外，timer.cancel()可停止定时器工作。\n    # 值得注意的是，上面不循环调用的 在执行完函数之后依然会持续运行\n    # 所以得记得关闭。\n比方说这个妖艳……呃 本来打算在调用函数里写上cancel但是…依然之后不能再次start()\n\n#### 线程<font color=#10e5a6>池</font>\n自实现或者使用`threadpool.ThreadPool`:\n```py\n    import time\n    import threadpool  \n    def sayhello(str):\n        print \"Hello \",str\n            time.sleep(2)\n\n    name_list =['dd','aa','bb','cc']\n    start_time = time.time()\n    pool = threadpool.ThreadPool(10) \n    requests = threadpool.makeRequests(sayhello, name_list) \n    for req in requests:\n        pool.putRequest(req) \n    pool.wait() \n    print '%d second'% (time.time()-start_time)\n```\n\n\n---\n\n---\n\n---\n    \n# Math 库\n    import math\n### 数值取整 \n    ceil、floor    还有一个不是此库中的round\n找来翻译就是 ： 小区、地板、回合………… 好吧，是（抹灰泥装镶板、最低的，最小的、周围，围绕）\n\n    # 使用方法为：\n    math.ceil(3.12)\n    math.floor(3.24)\n    round(3.51)\n    round(3.10999999999, 10)\n    #取值时的参考步长，好像（😭）是10就是最大步长了，再大没意义\n    # 手动赋值超过9位也就是10位小数的时候在PyCharm里直接赋值调试就自己约了，\n    # 而一般产生精度漂移都是十几位小数开外的。emm   就这么表达了，看得懂\n>4.0\n\n>3.0\n\n>4.0\n\n>3.11\n\n---\n\n---\n\n---\n\n---\n\n# 令程序有序执行的方法\n## 对象（伪类）间变量传递\nLike This：\n\n    class A(object):\n    \"\"\"docstring for A\"\"\"\n        def __init__(self, name):\n            super(A, self).__init__()\n            self.name = name\n            self.a = 0\n        def da(self):\n            print self.name\n            print self.a    \n    a = A('I am A')\n    a.da()\n\n\n    class B(object):\n    \"\"\"docstring for B\"\"\"\n        def __init__(self, aclass):\n            super(B, self).__init__()\n            self.aclass = aclass\n            self.aclass.a += 1\n        def dada(self):\n            self.aclass.da()\n    b = B(a)\n    b.dada()\n\n    class C(object):\n    \"\"\"docstring for B\"\"\"\n        def __init__(self, aclass):\n            super(C, self).__init__()\n            self.aclass = aclass\n            self.aclass.a += 1\n        def dada(self):\n            self.aclass.da()\n    c = C(a)\n    c.dada()\n>I am A\n\n>0\n\n>I am A\n\n>1\n\n>I am A\n\n>2\n\nB与C分别在去改变读取在A中定义的数值。  嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(*￣▽￣*)o就是这么写意和惬意。在VN.PY中有记录，不过还是拿过来吧，毕竟python用法\n\n---\n\n## 字典中建立函数映射，方便调用~\n    def add(x, y):\n        return x + y\n    def sub(x, y):\n        return x - y\n    a = {'add':add, 'sub':sub}\n    a\n    a['add'](1, 2)\n    a['sub'](1, 2)\n>{'add': <function add at 0x02D162B0>, 'sub': <function sub at 0x02D16530>}\n\n>3\n\n>-1\n\n### collections 模块\n#### namedtuple\n    给元组元素命名（貌似写过这个笔记欸，不过现在才发现这几个都是在一个模块下的）\n#### deque\n    #双端队列  快速插入 以及取出\n    l.insert(0, v)\n    l.pop(0)\n\n    l.popleft()\n    l.appendleft()\n    # 数据量大时，速度优于原生list\n###### a Game:  \n    import sys\n    import time\n    from collections import deque\n    fancy_loading = deque('>--------------------')\n    while True:\n        print '\\r%s' % ''.join(fancy_loading),\n        fancy_loading.rotate(1)\n        sys.stdout.flush()\n        time.sleep(0.08)\n        Result:\n    # 一个无尽循环的跑马灯\n#### Counter\n    # 计数器\n    from collections import Counter\n    s = '''A Counter is a dict subclass for counting hashable objects. \n        It is an unordered collection where elements are stored as \n        dictionary keys and their counts are stored as dictionary values. \n        Counts are allowed to be any integer value including zero or \n        negative counts. The Counter class is similar to bags or multisets in other         \n        languages.'''.lower()\n    c = Counter(s)\n    print c.most_common(5)\n>[(' ', 54), ('e', 32), ('s', 25), ('a', 24), ('t', 24)]\n\n#### OrderDict\n    # 有序字典：记录了数据存入时的先后顺序\n    # 不过发现一个骚操作：\n#### defaultdict\n    # 默认字典： 当key不存在时，返回此结果\n\n---\n\n## 线程\n    创建线程： 使用Threading模块创建，从threading.Thread继承，然后重写__init__ 和run 方法\n```python \n    import threading\n    import time\n \n    exitFlag = 0\n \n    class myThread (threading.Thread):   #继承父类threading.Thread\n        def __init__(self, threadID, name, counter):        \n            threading.Thread.__init__(self)\n            self.threadID = threadID\n            self.name = name\n            self.counter = counter\n        def run(self):      \n        #把要执行的代码写到run函数里面 线程在创建后会直接运行run函数 \n            print \"Starting \" + self.name\n            写到这儿\n            print \"Exiting \" + self.name\n\n    thread1 = myThread(1, \"Thread - 1\" , 1)\n    thread1 = myThread(2, \"Thread - 2\" , 2)\n    # 开启\n    thread1.start()\n    thread2.start()\n```\n\n### 线程同步    \n不同线程对某个数据同时修改就很刺激，所以需要同步。（当然也可以选择不）\n其实也简单，如下：\n    \n    import threading\n    threadingLock = threading.Lock()\n    # 从这儿领一把锁\n    # 然后在 run()函数中，“写到这儿——也就是工作函数之前，写上\n    threadingLock.acquire()\n    # 随后在工作函数之后\n    # threadingLock.release()\n\n然后拿到小锁子的函数就能运行，运行完了把小锁子释放掉。为啥不是钥匙🔑……好吧。我就称呼它我就称呼它梭子吧——\n\n## 队列\n```md\n    线程优先级队列\n    Queue.qsize()\t    返回队列的里站了几个\n    Queue.empty()           如果队列为空，返回True,反之False\n    Queue.full()            如果队列满了，返回True,反之False\n    Queue.full 与 maxsize   大小对应\n    Queue.get([block[, timeout]]) \n    \t获取队列,timeout`等待时间\n    \n    Queue.get_nowait() 相当 \n    Queue.get(False)\n    \n    Queue.put(item) 写入队列，timeout 等待时间\n    \n    Queue.put_nowait(item) 相当\n    Queue.put(item, False)\n    \n    Queue.task_done()       在完成一项工作之后，\n    Queue.task_done()       函数向任务已经完成的队列发送一个信号\n    Queue.join()            实际上意味着等到队列为空，再执行别的操作\n```\n\n来段儿示例：来自[这儿](http://www.runoob.com/python/python-multithreading.html)\n```python\n    #!/usr/bin/python\n    # -*- coding: UTF-8 -*-\n \n    import Queue\n    import threading\n    import time\n \n    exitFlag = 0\n \n    class myThread (threading.Thread):\n        def __init__(self, threadID, name, q):\n            threading.Thread.__init__(self)\n            self.threadID = threadID\n            self.name = name\n            self.q = q\n        def run(self):\n            print \"Starting \" + self.name\n            process_data(self.name, self.q)\n            print \"Exiting \" + self.name\n    \n    def process_data(threadName, q):\n        while not exitFlag:\n            queueLock.acquire()\n            if not workQueue.empty():\n                data = q.get()  \n                queueLock.release()\n                print \"%s processing %s\" % (threadName, data)   \n            else:\n                queueLock.release()\n            time.sleep(1)\n \n    threadList = [\"Thread-1\", \"Thread-2\", \"Thread-3\"]\n    nameList = [\"One\", \"Two\", \"Three\", \"Four\", \"Five\"]\n    queueLock = threading.Lock()\n    workQueue = Queue.Queue(10)\n    threads = []\n    threadID = 1\n \n    # 创建新线程\n    for tName in threadList:\n        thread = myThread(threadID, tName, workQueue)\n        thread.start()\n        threads.append(thread)\n        threadID += 1\n \n    # 填充队列\n    queueLock.acquire()\n    for word in nameList:\n        workQueue.put(word)\n    queueLock.release()\n \n    # 等待队列清空\n    while not workQueue.empty():    \n        pass\n \n    # 通知线程是时候退出\n    exitFlag = 1\n \n    # 等待所有线程完成\n    for t in threads:\n        t.join()\n    print \"Exiting Main Thread\"\n```\n\n>Starting Thread-1\n\n>Starting Thread-2\n\n>Starting Thread-3\n\n>Thread-1 processing One\n\n>Thread-2 processing Two\n\n>Thread-3 processing Three\n\n>Thread-1 processing Four\n\n>Thread-2 processing Five\n\n>Exiting Thread-3\n\n>Exiting Thread-1\n\n>Exiting Thread-2\n\n>Exiting Main Thread\n\n呃， 以上就是我现知道的终极用法，当然其基础于：\n\n    workQueue = Queue.Queue(10)     \n    # 创建+设定队列长度（emm 小心卡死就是了）\n    # 只要满了再往里塞绝对死，无意外……(lll￢ω￢)\n    workQueue.put(word) \n    # 往里塞。  基础就是塞个数字，高级就是塞个线程\n    workQueue.get() \n    # 顺序往外取\n    # 括号里里面可以写进参数，然而，依然按照顺序往外取，插队办理啥的不存在\n    # 另外，队列空的话取依然会死……\n\n### 一些方法\n```python\n    q = queue.Queue(maxsize=0) \n    q.qsize() #查看队列大小 \n    q.empty() #判断队列是否为空 \n    q.full() \n    #如果maxsize设置了大小(eg:2)，如果q.put()了2个元素，则返回真，反之，则为假 \n    q.get_nowait() \n    # 如果队列中没有元素了，只用q.get()\n    （当然，可以设置`q.get(block=False）`）会使程序卡住，用q.get_nowait()则会报错而不卡住 \n    q.put_nowait() \n    # 如果maxsize设置了大小，用q.put()超过范围则会卡住（当然\n    # 可以设置属性q.put(block=False)）。用q.put_nowait()则会报错而不卡住\n```\n---\n\n### 老夫的Demo\n\n***消费生产者关系***\n```python\nimport threading\nimport queue\nimport threadpool\nimport time\n\npool = threadpool.ThreadPool(2)\n\nque = queue.Queue()\n\ndataList = [1,2,3,4,5,6,7,8,9,0]\ndataList1 = [1,2,3,'a', 'b']\ndataList2 = [4,5,6]\ndataList3 = [7,8,9,0]\n\nprintLock = threading.Lock()\n\nworkList = [dataList1, dataList2, dataList3]\n\ndef worker():    \n   ## 消费者\n   #printLock.acquire()\n    aaa = que.get()\n    print(aaa)\n    for i in aaa:\n        print (i)\n    #printLock.release()\n    time.sleep(5)\n\ndef geter(task):\n    ## 生产者\n    print(\"emm, put in_:\", task)\n    time.sleep(1)\n    que.put(task)\n    \n    a = threading.Thread(target=worker)\n    a.start()\n\nfor i in workList:\n    geter(i)\n```\n\n---\n\n---\n\n## 进程\n```python\nimport multiprocessing\nimport time\ndef worker_1(interval, lock, low):\n    print (\"worker_1\")\n    print (time.time())\n    lock.acquire()\n    time.sleep(0.1)\n    print(\"I got the lock\")\n    time.sleep(interval)\n    print(low)\n    print (\"end worker_1\")\n    lock.release()\ndef worker_2(interval, lock):\n    print (\"worker_2\")\n    print (time.time())   \n    lock.acquire()\n    print(\"I got the lock\")\n    time.sleep(interval)\n    print (\"end worker_2\")\n    lock.release()\ndef worker_3(interval, lock):\n    print (\"worker_3\")\n    print (time.time())\n    lock.acquire()\n    print(\"I got the lock\")\n    time.sleep(interval)\n    print (\"end worker_3\")\n    lock.release()\nif __name__ == \"__main__\":\n    printLock = multiprocessing.Lock()\n    # 🔒 来自关爱的小锁子 \n    p1 = multiprocessing.Process(target = worker_1, args = (2, printLock, [\"asd\", {'s':1}, [1,2,3]])).start()\n    p2 = multiprocessing.Process(target = worker_2, args = (3, printLock)).start()\n    p3 = multiprocessing.Process(target = worker_3, args = (4, printLock)).start()\n    w = {'a':p1, 'b':p2, 'c':p3}\n    # 创建三个进程去运行这三个函数\n    #p1.start()\n    #p2.start()\n    #p3.start()\n    #for i in w:\n    #    w[i].start()\n    # 启动进程\n\n    print(\"The number of CPU is:\" + str(multiprocessing.cpu_count()))   \n    for p in multiprocessing.active_children():\n        print(\"child   p.name:\" + p.name + \"\\tp.id\" + str(p.pid))\n    print (\"Main All Done\")\n    \n    # dt 2018年5月18日11点22分\n```\n>worker_1\n>1526613489.1864893\n>worker_2\n>1526613489.1932006\n>The number of CPU is:4\n>child   p.name:Process-3        p.id208\n>child   p.name:Process-1        p.id206\n>child   p.name:Process-2        p.id207\n>Main All Done\n>worker_3\n>1526613489.1968668\n>I got the lock\n>['asd', {'s': 1}, [1, 2, 3]]\n>end worker_1\n>I got the lock\n>\n>end worker_2\n>I got the lock\n>end worker_3\n\n<font color=ca5a00>插一句话</font>\n线程和进程的关系，貌似与电脑双系统和系统再开虚拟机的关系emm  对于资源利用的角度上。\n\n##### 没有传参的进程\n```python \nimport multiprocessing\n\ndef sayHello():\n    print('hello~ I can see you')\n\nif __name__ == '__main__':\n    p1 = multiprocessing.Process(target=sayHello)\n    p2 = multiprocessing.Process(target=sayHello)\n    p3 = multiprocessing.Process(target=sayHello)\n    p1.start()\n    p2.start()\n    p3.start()\n\n```\n如果只是单纯运行，这样就可以了，之所以做这个测试是因为我忌惮于那个`args`的传参，毕竟`()`里面若有元素存在就必须要有逗号…   看来没有传参的话就不需要了\n一个参数`a`的时候: `(a, )`emmm🤔\n### 将进程定义为类\n    import multiprocessing\n    import time\n    class ClockProcess(multiprocessing.Process):\n        def __init__(self, interval):\n            multiprocessing.Process.__init__(self)\n            self.interval = interval\n        def run(self):\n            n = 5\n            while n > 0:\n                print(\"the time is {0}\".format(time.ctime()))\n                time.sleep(self.interval)\n                n -= 1 \n    if __name__ == '__main__':\n        p = ClockProcess(3)\n        p.start()\n\n<font color=red>以上，`p.start()`被调用时，自动调用`run()`   另外时间戳都是瞎戳的，所以… emm 这都一年之前的东西了，现在才想起来戳时间有点儿纪念意义(⊙﹏⊙) </font> \n>2018年5月18日\n>\n#### 属性\n    daemon ：是否伴随主程序结束而结束\n    Lock: 锁：（如下， 防止访问共享资源时冲突，如以上打印时间时出现的不连续打印😰）\n    def worker(lock, var):\n        try:\n            ***\n        finally:\n            lock.release()\n    lock = multiprocessing.Lock()\n    var = '我是变量'\n    p = multiptocessing.Process(target = worker, args = (lock, var))\n    \n    \n## <font color=#cc0000>***警个告***</font>\n创建进程分支的函数选择只能隶属于`__main__`下或者是隶属与创建进程的函数级别相同的级别，例如今天在main下一个函数中选择目标函数为此函数的函数就不可以… 如下：\n```python \n    def a():\n        def c(para):\n            pass\n    \t*(target=b, args=(1,)) \t🌹\n        *(target=c, args=(1,)) \t❌\n    \t\n    def b(para):\n        pass\n```\nemm，上述表述的很明确，但是昨天又重新犯了这个问题… 进程的执行者放到了类中的某个函数，然后又提出到`__main__\n`中函数，所以都不能执行，最终放到`__main__``外，与它同级，也就是def 前无空格。 才能“受命”。\n\n#### 通过队列来存储不同进程产生的结果\n{来自}(https://blog.csdn.net/u014556057/article/details/66974452)\n```\n# -*- coding:utf-8 -*-\nfrom multiprocessing import Process, Queue, Lock\n\nL = [1, 2, 3]\n\n\ndef add(q, lock, a, b):\n    lock.acquire()  # 加锁避免写入时出现不可预知的错误\n    L1 = range(a, b)\n    lock.release()\n    q.put(L1)\n    print L1\n\nif __name__ == '__main__':\n    q = Queue()\n    lock = Lock()\n    p1 = Process(target=add, args=(q, lock, 20, 30))\n    p2 = Process(target=add, args=(q, lock, 30, 40))\n    p1.start()\n    p2.start()\n    p1.join()\n    p2.join()\n\n    L += q.get() + q.get()\n    print L\n\n```\n> [20, 21, 22, 23, 24, 25, 26, 27, 28, 29]\n> [30, 31, 32, 33, 34, 35, 36, 37, 38, 39]\n> [1, 2, 3, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]\n\n\n---\n\n---\n\n## 再加一个协程\n### 基础实现：\n```python \n# yield\ndef creatAor():\n    mylist = range(3)\n    for i in mylist:\n        yield i*i\n\nmygenerator = creatAor()  # 生成一个生成器\nprint (mygenerator)\nfor i in mygenerator:\n    print (i)\n```\n\n> <generator object creatAor at 0x7f54ed368f10>\n> 0\n> 1\n> 4\n\n当调用函数时，其返回并不立马执行（显示）——emm 经过十几分钟😰的观察👀说那么玄乎，.其实就是在函数执行过程中，在`yield`处把后面紧接的东西记录下来，之后最后生成一个可迭代的对象。 所以网上说时生成器也不可厚非，但表达真的是……不过貌似.不仅仅是记录后面紧跟的东西…\n\n```python\n$ vim \ndef creatAor():\n    mylist = range(3)\n    print(\"so jia nei?\")\n    for i in mylist:\n        print(\"pre a hou ga\")\n        yield i*i\n        print (\"nihoua\")\n    print (\"2333333\")\n\nmygenerator = creatAor()\nprint (mygenerator)\nfor i in mygenerator:\n    print (i)\n```\n\n> <generator object creatAor at 0x7fe2585a8f10>\n> so jia nei?\n> pre a hou ga\n> 0\n> nihoua\n> pre a hou ga\n> 1\n> nihoua\n> pre a hou ga\n> 4\n> nihoua\n> 2333333\n\n所以看这苗头像是重新执行了一次函数，但是将后面紧跟的东西也进行了记录\n\n应用到协程中，便是：\n\n```python \nimport time\n\ndef consumer():\n    r = ''\n    while True:\n        n = yield r\n        if not n:\n            return\n        print('[CONSUMER] Consuming %s....' % n)\n        time.sleep(1)\n        r = '200 OK'\n\ndef produce(c):\n    c.next()\n    n = 0\n    while n < 5:\n        n = n + 1\n        print('[PRODUCER] Producing %s...' % n)\n        r = c.send(n)\n        print('[PRODUCER] Consumer return: %s\\n' % r)\n    c.close()\n\nif __name__=='__main__':\n    c = consumer()\n    produce(c)\n    for i in c:\n        print(i)\n```\n\n> [PRODUCER] Producing 1...\n> [CONSUMER] Consuming 1....\n> [PRODUCER] Consumer return: 200 OK\n> \n> [PRODUCER] Producing 2...\n> [CONSUMER] Consuming 2....\n> [PRODUCER] Consumer return: 200 OK\n> \n> [PRODUCER] Producing 3...\n> [CONSUMER] Consuming 3....\n> [PRODUCER] Consumer return: 200 OK\n> ...\n> ...\n\n\n那么，是什么道理呢？\n#### send next 方法的背后今生\n```python\ndef my():\n    value = yield 1\n    value = yield value\n    print('finally: ', value)\nge = my()\nprint(ge.next())\nprint(ge.send(2))\nprint(ge.send(3))\n```\n\n> 1\n> 2\n> ('finally: ', 3)\n> Traceback (most recent call last):\n>   File \"yield_emm3.py\", line 8, in <module>\n>     print(ge.send(3))\n> StopIteration\n\n\n可知：\n 当`next`时，`yield`挂起，但将之后的`1`返回。而后`send`激活了之前挂起赋值动作，但此时`yield 1`被替换为`send`来的`2`所以`value`被置为`2`. 再第三次调用，完成赋值动作之后，由于只被挂起两次动作，而这里调取了三次，所以报错 停止递归 。若直接递归则得到1 和 None.   \n\n所以 `next`与`send`都是用来激活挂起动作而使用的，但`send`好在可以与之交互。\n<font color=red>在`send``之前需先`next`否则提示`can't send * to a just-started generator`</font>(⊙﹏⊙)  我上面阐述的挂起，激活，是不是出现了什么偏差…\n> 2018年5月18日16点30分\n\n### 较完善方案：\n\n```python \n# 1\nimport gevent\ndef f(n):\n    for i in range(n):\n       print gevent.getcurrent(), i\n\ng2 = gevent.spawn(f, 5)\ng3 = gevent.spawn(f, 5)\n\ng1.join()\ng3.join()\n\n# 2\nimport gevent\nfrom gevent import monkey; monkey.patch_all()\nimport urllib2\n\ndef f(url):\n    print 'GET: %s' % url\n    resp = urllib2.urlopen(url)\n    data = resp.read()\n    print '[%d] bytes received from %s\\n' %(len(data), url)\n    \ngevent.joinall([\n    gevent.spawn(f, 'http://www.cnblogs.com/kaituorensheng/'),\n    gevent.spawn(f, 'https://www.python.org/'),\n    gevent.spawn(f, 'https://www.baidu.com'),\n])\n\n# 3\nfrom gevent import monkey  \nmonkey.patch_all()  \nimport gevent  \nfrom gevent import Greenlet  \n  \nclass Task(Greenlet):  \n    def __init__(self, name):  \n        Greenlet.__init__(self)  \n        self.name = name      \n    def _run(self):  \n        print \"Task %s: some task...\" % self.name  \n  \nt1 = Task(\"task1\")  \nt2 = Task(\"task2\")  \nt1.start()  \nt2.start()  \n# here we are waiting all tasks  \ngevent.joinall([t1,t2])  \n```\n\n和线程 进程 差不多一个用法，只不过没锁，也不需要锁。\n\n\n\n---\n\n---\n\n---\n\n### futures\n####  futures.ThreadPoolExecutor\n```py\nwith futures.ThreadPoolExecutor(16) as executor:\n    executor.map(run, urls)\n    # 这里是个爬虫，urls就是一个前方run函数的输入变量\n```\n\n---\n\n---\n\n---\n\n## 父类中的变量与类中变量\n在使用`self.a` 的时候——呃其实是实例化之后a.a时，会只在父类中寻找相关变量，而解决办法居然是将`super(A, self).__init__(CtaEngine, setting)`移动到变量定义之后，所以谁说这玩意放前面和放后面没有区别的！（欸?😘 这个之后有过说明，不过忘记写在哪儿了，再说一下，就是super....表示父类的初始化动作，__init__因为这个函数名子父相同不会重写，会合并。）\n\n### 列表的增删添\n    append      # 在最后添加一元素\n    extend      # c.extend(a) 将列表a中元素加到c中去。可自加\n    +           # 连接两方数组元素 c = a + c        然而创建新对象，耗内存… 所以没啥\n用\n    \n    del         # 删除对应下标元素 del c[0] 删除c列表第一位元素\n    pop         # c.pop()   删除最后一位元素\n    remove      # 删除指定值元素，有相同值时只会删除第一位\n    [ : ]           # 使用切片进行删除\n    insert      # c.insert(0, 1)将1插入到c的最前方，可插列表，插入还是列表\n\n\n### 一个函数的有效方式只在循环中执行一次 - 代码日志\n[这](https://codeday.me/bug/20170901/65228.html)是原链接\nemm 代码反正照着输入是不会有结果的，但感觉挺有戏先保留，以后技术提升再来看\n#### 自己的方法\n自己的方法很简单，很暴力，就是用字典啊—— 当执行过一次之后直接把调用关系扭到别的地方，反正只要是知道结果的判断都可以用字典来代替么。\n\n### 函数调用函数 and 语法糖 @\n    import time\n \n    def timehel(hell):\n        def wrapper():\n                start = time.clock()\n                hell()\n                end =time.clock()\n                print 'used:', end - start\n            return wrapper\n\n@timehel\ndef foo():\n    print 'a ho ga'\n>a ho ga\n\n>used:  0.000489465229975\n\n其上@timehel 和 foo = timehel(foo)等价（感谢[被遗忘的博客](http://www.cnblogs.com/rollenholt/archive/2012/05/02/2479833.html)）… 就是把下方函数当成输入，然后执行通俗来翻译就是： \n\n    @：呼叫timehel   来执行下面这孙子。\n    \n这里是官方教你怎么用： \n    <https://wiki.python.org/moin/PythonDecoratorLibrary>\n\n其中 函数中定义函数就类似于“父子关系”，也或者叫另辟空间。每次执行父函数时，子函数会有也尽在此时会有被执行的机会，会不会被执行，就看其在其父亲面前的表现了（他爸有没有叫他（有没有调用…））。\n\n### 变量作用域\n因为从这个@ 这儿学到的，所以：\n\n    def hel(x):\n        def inner():\n            print x\n        return inner\n    p1 = hel(1)\n    p1 = hel(1)\n\n    p1()\n>1\n\n    p2()\n>2\n\n闭包——如果没有inner这东西，下面绝不会输出东西，反而会报错。 直接`p1`,`p2`又不会再输出任何东西，只有在定义时会运行一次。 对比于`def hel(x):   print x`    其中内层原因 先不深究，就脑补成外层需运行时才能去找那些变量，而其中的函数会主动去外围找所需的变量。\n#### 应用案例\n    import time\n\n    def coseTime(func):\n        print func\n        def inner(*args, **kwargs):\n            print args, kwargs\n            start = time.clock()\n            func(*args, **kwargs)\n            end = time.clock()\n            print args, kwargs\n    \n            print ('Running time: %s Seconds' % (end-start))\n        return inner\n\n    @coseTime\n    def hel(x):\n        print ('hello~')\n\n    hel(12)\n><function hel at 0x02BC5070>\n>(12,) {}\n>hello~\n>(12,) {}\n>Running time: 0.000446197317167 Seconds\n\n用来无视变量来记录 函数运行所需时间的——同时输出其在运行时接入的变量\n\n\n---\n\n---\n\n## functools\n就姑且放这儿吧，毕竟也算是为了有序执行而接触到的\n\n### partial\n    import functools\n    def add(a, b):\n        print a, b\n        return a, b\n    addplus = functools.partial(add, 3)\n    addplus(7)\n>3   7\n\n    addplus(add, b = 6)\n    addplus(7)\n>7   6\n\n这函数作用是 提前给定函数一个变量值…The functools module is for higher-order functions: functions that act on or return other functions. In general, any callable object can be treated as a function for the purposes of this module. \n\n我的接触场景是在PyQt 中信号槽循环连接时，用了partial在connect之后`.connect(partial(self.start, i))`去唯一化相同功能的复用。不过我之前也应该写过类似的，那时我找的解决办法时在连接调用时传参(在Python GUI里面应该会写有吧，假如两三个月前我没脑子短期性失忆的话😭)。emm那个传参是利用Qt机制 不知道孰优孰劣😄 \n\n    运气好，直接翻到：\n        ——那里的应用场景是在鼠标点击按钮捕获点击事件click时传递的参数~\n# lambda\n使用方法为：\n\n    func = lambda x:x*x\n    # :前x表示函数输入，:后为返回值，x*x是这个函数收到输入后所执行的动作\n    w = lambda x:func(x)\n    \n---\n\n---\n\n---\n\n---\n\n---\n\n# 网络编程\n## socket\n    import socket\n    # 服务端\n    s = socket.socket()\n    host = socket.gethostname()\n    port = 12345\n    s.bind((host, port))\n    s.listen(5)\n    while True:\n        c, addr = s.accept()\n        print \"link address is\", addr\n        c.send('welcome here')\n        c.close()\n    # 客户端\n    s = socket.socket()\n    host = socket.gethostname()\n    port = 12345\n    s.connect((host, port))\n    # 此时服务端便弹出 link address is：('192.168.*.*', 64*5)\n    print s.recv(1024)\n    # 客户端显示welcome here\n\n## select :   与Socket配合的跨平台的异步io模型\n\nimport select\nimport socket\nimport Queue\n\n#create a socket\nserver = socket.socket(socket.AF_INET,socket.SOCK_STREAM)\nserver.setblocking(False)\n#set option reused\nserver.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR  , 1)\n\nserver_address= ('192.168.1.102',10001)\nserver.bind(server_address)\n\nserver.listen(10)\n\n#sockets from which we except to read\ninputs = [server]\n\n#sockets from which we expect to write\noutputs = []\n\n#Outgoing message queues (socket:Queue)\nmessage_queues = {}\n\n#A optional parameter for select is TIMEOUT\ntimeout = 20\n\nwhile inputs:\n    print \"waiting for next event\"\n    readable , writable , exceptional = select.select(inputs, outputs, inputs, timeout)\n\n    # When timeout reached , select return three empty lists\n    if not (readable or writable or exceptional) :\n        print \"Time out ! \"\n        break;    \n    for s in readable :\n        if s is server:\n            # A \"readable\" socket is ready to accept a connection\n            connection, client_address = s.accept()\n            print \"    connection from \", client_address\n            connection.setblocking(0)\n            inputs.append(connection)\n            message_queues[connection] = Queue.Queue()\n        else:\n            data = s.recv(1024)\n            if data :\n                print \" received \" , data , \"from \",s.getpeername()\n                message_queues[s].put(data)\n                # Add output channel for response    \n                if s not in outputs:\n                    outputs.append(s)\n            else:\n                #Interpret empty result as closed connection\n                print \"  closing\", client_address\n                if s in outputs :\n                    outputs.remove(s)\n                inputs.remove(s)\n                s.close()\n                #remove message queue \n                del message_queues[s]\n    for s in writable:\n        try:\n            next_msg = message_queues[s].get_nowait()\n        except Queue.Empty:\n            print \" \" , s.getpeername() , 'queue empty'\n            outputs.remove(s)\n        else:\n            print \" sending \" , next_msg , \" to \", s.getpeername()\n            s.send(next_msg)\n    \n    for s in exceptional:\n        print \" exception condition on \", s.getpeername()\n        #stop listening for input on the connection\n        inputs.remove(s)\n        if s in outputs:\n            outputs.remove(s)\n        s.close()\n        #Remove message queue\n        del message_queues[s]\n[糖拌咸鱼 - 记录学习的点点滴滴~](http://www.cnblogs.com/coser/archive/2012/01/06/2315216.html)\n\n简单来说一下`select`的作用：\n    返回值：三个列表\n    select方法用来监视文件描述符(当文件描述符条件不满足时，select会阻塞)，当某个文件描述符状态改变后，会返回三个列表\n        1、当参数1 序列中的fd满足“可读”条件时，则获取发生变化的fd并添加到fd_r_list中\n        2、当参数2 序列中含有fd时，则将该序列中所有的fd添加到 fd_w_list中\n        3、当参数3 序列中的fd发生错误时，则将该发生错误的fd添加到 fd_e_list中\n        4、当超时时间为空，则select会一直阻塞，直到监听的句柄发生变化\n       当超时时间 ＝ n(正整数)时，那么如果监听的句柄均无任何变化，则select会阻塞n秒，之后返回三个空列表，如果监听的句柄有变化，则直接执行。\n    `epoll`很好的改进了`select` 具体请看(深入理解python中的select模块)[http://blog.csdn.net/songfreeman/article/details/51179213]\n\n---\n\n---\n\n---\n\n## 引用模块\naction.py中引用model.py为例\n### 同一文件夹下\n    from model import *\n    # or\n    import model\n### 其下级文件\"here\"下\n    # 在model.py 文件中创建__init__.py空文件\n    from here import model\n    # or\n    form here.model import *\n### 在上级文件下\n    import sys\n    sys.path.append(\"..\")\n    # 添加上级文件 路径\n    # import model\n### 在上级文件的下级文件中（也就是在隔壁“wang”文件中）\n    # 需要创建__init__.py空文件\n    # 添加上级文件路径\n    import wang.model\n\n\n## 解决编码问题\n    import sys\n    reload(sys) \n    sys.setdefaultencoding('utf8')\n    # 这段直接塞它嘴里\n\n### 输出提示打印乱码\n    #coding: utf-8  \n    n=raw_input(unicode('请输入文字','utf-8').encode('gbk'))  \n    print n  \n\n### 内存异常占用\n    import sys\n    v = 1\n    sys.getsizeof(v)\n    # 可以读出 此变量emm 或者说 对象的内存占用大小\n\n## 异常\n### plan1 ：\n    try:\n    #正常的操作\n    except:\n    #发生异常，执行这块代码\n    else:\n    #如果没有异常执行这块代码(在执行完try下函数没有异常发生)\n### 列表的坑\n当a 为一个列表\n    a = [1, 2, 3]\n    b = a \n    c = a\n    d = a\n    b.append(4)\n\n这时，abcd四个列表都变成[1, 2, 3, 4]，emm…  所以直接以后不要把一个列表赋值给两个变量…除非不涉及修改，慎重慎重。。不过python中列表有`copy`一说，不过还没试过\n\n### \\@staticmethod\n    定义类中的的这个方法为静态方法，同理的还有`@classmethod`类方法。\n### 常见异常\n    1.AssertionError：当assert断言条件为假的时候抛出的异常\n    2.AttributeError：当访问的对象属性不存在的时候抛出的异常\n    3.IndexError：超出对象索引的范围时抛出的异常\n    4.KeyError：在字典中查找一个不存在的key抛出的异常\n    5.NameError：访问一个不存在的变量时抛出的异常\n    6.OSError：操作系统产生的异常\n    7.SyntaxError：语法错误时会抛出此异常\n    8.TypeError：类型错误，通常是不通类型之间的操作会出现此异常\n    9.ZeroDivisionError：进行数学运算时除数为0时会出现此异常··\n\n---\n\n---\n\n---\n\n# 事件模式中，事件篡改事故\n在循环创建事件时，将`event` `put`到队列中，此时，被处理一半，因为不在一个线程所以下一个循环来临就将`event`的内容进行了修改。 杜绝此方法除了添加锁，只好将事件`copy`之后再传入时间引擎。如此便可暂防止事件处理一半被修改的事情发生。 \n\n---\n\n---\n\n---\n\n# 代码块注释\n[Surrounding Blocks of Code with Language Constructs](https://www.jetbrains.com/help/pycharm/surrounding-blocks-of-code-with-language-constructs.html)\n### VisualStudio模式：\n    #region Description(说明)\n    print \"code here\"\n    #endregion\n### NetBeans模式：\n    // <editor-fold desc=\"Description\">\n    code here\n    // </editor-fold>\n\n# 类\n    以后详谈，本着一切皆对象的原则，所以对于类的了解决定了Python的认知，先记一个\n    def __init__(self):\n            super(Proformance, self).__init__()\n    #这个super表示了继承类和被继承类的 __init__调用时序，其它重名函数是覆盖，这个……\n## 数据类\n用一个类来表示一个数据类型（这几天想着这个表示不同数据类型的组合方法恰类似于C中的结构体，然后`Python`中的数组元素存储各种东西什么类啊、数组套数组啊，字典存储啊，恰巧与C中的指针指向指针……emm ）如：\n    \n    class A(object):\n        def __init__(self):\n        self.a = 'a'\n        self.b = 'b'\n    A().__dict__\n>{'a': 'a', 'b': 'b'}\n\n但是`A().__dict__['a'] = 'It is a'` 虽然不会报错，但之后再次调用`A().__dict__`显示结果还是一样，但：\n\n    a = A()\n    a.__dict__['a'] = 'It is a'\n    a.__dict__\n>{'a': 'It is a', 'b': 'b'} \n\n这样我就用过一次，在不确定数据类会有几个元素甚至不知道会是什么名称的时候来创建的，毕竟：(这样的方式可以随便添加嘛)\n\n    a.__dict__['w'] = 'It is www'\n    a.__dict__\n>{'a': 'It is a', 'b': 'b', 'w': 'It is www'\n\n### 若出现docx模块pyInstaller打包问题\n大概的解决步骤是这样的：\n找到python-docx包安装路径下的一个名为default.docx的文件，我是通过everything这个强大的搜索工具全局搜索找到这个文件的，它在我本地所在的路径是：E:\\code\\env\\.env\\Lib\\site-packages\\docx\\templates \n把找到的default.docx文件复制到我的py脚本文件所在的目录下。\n修改脚本中创建Document对象的方式：\n从原来的创建方式：\ndocument = Document()\n修改为：\nimport os\ndocument = Document(docx=os.path.join(os.getcwd(), 'default.docx'))\n再次用pyinstaller工具打包脚本为exe文件\n把default.docx文件复制到与生成的exe文件相同的路径下，再次运行exe文件，顺利运行通过，没有再出现之前的报错，问题得到解决。\n作者：(m2fox)[https://www.jianshu.com/p/94ac13f6633e]\n來源：简书\n\n#### 拼接List字符串\n将list中的元素拼接起来，并使用`,`隔开可这么来：\n    \n    import itertools \n    list = ['123', '567']\n    xlist = \",\".join(list)\n    or\n    ylist = \",\".join(*list)\n    s = .join(itertools.chain(kwargs.keys()))\n    \n区别在于x为一个元素添加一个`,`，y为把列表中的素也拆分之后再添加\n\n### SimpleHTTPServer\n小型的局域网嘛☺，很常用，不过在Python3中有了变化…\n```py\n    $ Python2\n    python -m SimpleHTTPServer \n    ---\n    $ Python3\n    python -m http.server\n```\n<font color=#126590>顺带一提</font>：`-m`是可以在外执行内库的操作，🦑大概是这个意思吧—— 用`pdb`的时候也是这么用的…\n\n### 老夫的月份生成\n```python \n# -*- coding:utf-8 -*-\nimport datetime\nimport copy\n\ndef splitMonth(start, end):\n    start = str2Date(start)\n    end = str2Date(end)\n    _delta = end - start\n    datelist = []\n    if _delta.days > 10:\n        # 拆分\n        # 按*月*拆分（10日间隔）\n        n = 0\n        _start = copy.copy(start)\n        while _delta.days > 0:\n            n += 1\n            if _start.day < 10:\n                _end = datetime.date(_start.year, _start.month, 10)\n                if end > _end:\n                    datelist.append((date2str(_start), date2str(_end)))\n                    _start = _end + datetime.timedelta(1)\n                else:\n                    datelist.append((date2str(_start), date2str(end)))\n                    break\n            elif _start.day < 20:\n                _end = datetime.date(_start.year, _start.month, 20)\n                if end > _end:\n                    datelist.append((date2str(_start), date2str(_end)))\n                    _start = _end + datetime.timedelta(1)\n                else:\n                    datelist.append((date2str(_start), date2str(end)))\n                    break\n            else:\n                _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(15)\n                _end = datetime.date(_end.year, _end.month, 1) - datetime.timedelta(1)\n                if end > _end:\n                    datelist.append((date2str(_start), date2str(_end)))\n                    _start = _end + datetime.timedelta(1)\n                else:\n                    datelist.append(date2str(_start), date2str(end))\n                    break\n\n            _delta = end - _start + datetime.timedelta(1)\n\n        return datelist\n    else:\n        return [(date2str(start), date2str(end))]\ndef splitMouthBySE_N(start, end, n):\n    start = str2Date(start)\n    end = str2Date(end)\n    _delta = end - start\n    datelist = []\n    if _delta.days > n:\n        # 拆分\n        # 按*月*拆分（10日间隔）\n        _start = copy.copy(start)\n        while _delta.days > 0:\n            _loop = 0\n            for _n in range(int(30/n)):\n                _loop = _loop + n\n                if _start.day < _loop:\n                    if _start.month == 2 and _loop > 28:\n                        if _start.year%4:\n                            _end = datetime.date(_start.year, _start.month, 28)\n                        else:\n                            _end = datetime.date(_start.year, _start.month, 29)\n                    else:\n                        _end = datetime.date(_start.year, _start.month, _loop)\n                    if end > _end:\n                        datelist.append((date2str(_start), date2str(_end)))\n                        _start = _end + datetime.timedelta(1)\n                    else:\n                        datelist.append((date2str(_start), date2str(end)))\n                        _delta = datetime.timedelta(0)\n                        break\n                    _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(15)\n                else:\n                    continue\n            else:\n                _end = datetime.date(_end.year, _end.month, 1) - datetime.timedelta(1)\n                if end > _end:\n                    if _start > _end:\n                        _delta = end - _start + datetime.timedelta(1)\n                    else:\n                        datelist.append((date2str(_start), date2str(_end)))\n                    _start = _end + datetime.timedelta(1)\n                else:\n                    datelist.append((date2str(_start), date2str(end)))\n                    _delta = datetime.timedelta(0)\n                    break\n\n                _delta = end - _start + datetime.timedelta(1)\n\n        return datelist\n    else:\n        return [(date2str(start), date2str(end))]\ndef gropdate(datelist, itemNum=0, gropNum=0):\n    #将传入datelist[(str(start1), str(end1)), (str(start2), str(end2))...] -> 传入为月碎片\n    # 打按月对月碎片进行打组。 \n    # 传入参数 itemNum: 一个组含几个月, gropNum: 将这些碎片打为几组\n    _dic = collections.OrderedDict()\n    for i in datelist:\n        # 按月分组\n        keyName = i[0].split('-')[1]\n        if keyName not in _dic:\n            _dic[keyName] = []\n        _dic[keyName].append(i)\n    monthList = []\n    groups = []\n    groupListTemp = []\n    groupList = []\n    for i in _dic.keys():\n        # 得到月份列表\n        monthList.append(i) #[1,2,3...,7,8,9]\n    monthNum = len(monthList)\n\n    if gropNum:\n        itemNum = round(float(monthNum)/gropNum)\n        itemNum = int(itemNum)\n    if itemNum:\n        slipNum = int(monthNum/itemNum)\n        start = 0\n        end = int(itemNum)\n        for mon in range(slipNum):\n            groups.append(monthList[int(start):int(end)])\n            start = copy.copy(end)\n            end = end + itemNum\n        if monthNum%itemNum:\n            groups.append(monthList[start:monthNum])    # 非整除补足\n        for i in groups:\n            for ii in i:\n                groupListTemp.append(_dic[ii])\n            groupList.append(groupListTemp)\n            groupListTemp = []\n        return groupList\n    else:\n        return None\n        \n# region 日期`date`格式与`str`转换处理\ndef date2str(_date):\n    # datetime.date 转换为 str    (有为了适配原程序的补零操作…)\n    if _date.month < 10:\n        strDate = str(_date.year) + '-' + '0'+str(_date.month) + '-' + str(_date.day)\n    else:\n        strDate = str(_date.year) + '-' + str(_date.month) + '-' + str(_date.day)\n    if _date.day < 10:\n        strDate = strDate[:-1] + '0'+str(_date.day)\n    return strDate\ndef str2Date(_str):\n    # str 转换为 datetime.date\n    y, m, d = _str.split('-')\n    return datetime.date(int(y), int(m), int(d))\n\n# endregion \n\n\nif __name__ == '__main__':\n    print(splitMouthBySE_N('2016-01-02', '2018-03-01', 5))\n```\n\n## Python3.6之后的奇淫技巧\n1. 可使用下划线将长数字隔开，便于阅读  `10000`=`10_000`\n2. 字符串操作除了 `%`和`format`之外还有`f`操作\n```python\n$ %\ns = \"%s is %d\" % ('two', 2)\n$ format\ns = \"{fruit} is {color}\".format(fruit='apple', color='red')\n$ f\nname = 'Bob'\nf'Hello, {name}!'\n### 甚至\na = 5\nb = 10\nf'Five plus ten is {a + b} and not {2 * (a + b)}.'\n#### 精度\nPI = 3.141592653\nf\"Pi is {PI:.2f}\"\n>>> 'Pi is 3.14'\n>>> error = 50159747054\n##### 以16进制格式化\nf'Programmer Error: {error:#x}'\n>>>'Programmer Error: 0xbadc0ffee'\n\n##### 以二进制格式化\nf'Programmer Error: {error:#b}'\n>>> 'Programmer Error: 0b101110101101110000001111111111101110'\n```\n3.变量注释 `def my_add(a: int, b: int) -> int:   \\n  return 0` 仅仅用来注释，其实传参出参<font color=#9aaa00>并不受控制…</font>\n\n---\n\n# 魔法方法\n假设定义类  `EmmNe`, `EmmNe`拥有`self.aaa`与`self.aaadict`、列表`self.aaalist` 且`__init__`允许两个传参\n\n<font color=#feaaaa>\\_\\_len\\_\\_</font>:\n```python\ndef __len__(self):\n    return len(self.aaa)\n# 则在外`len`此实例化对象时，会返回这个结果\n```\n<font color=#feaaaa>\\_\\_getitem\\_\\_</font>:\n```python\ndef __getitem__(self, key)\n    return self.aaadict[key]\nen = EmmNe(1, 2)\nprint(en[`])\n> 2\n#就像上面那样。 不过还有下面的用法\ndef __getitem__(self, index):\n    retrun self.aaalist[index]\nw = Emm(1,2)\nfor i in w:\n    print (i)\n# 则输出列表中内容\n```\n<font color=#feaaaa>\\_\\_setitem\\_\\_</font>:\n```python\ndef __setitem__(self, key, value)\n    return self.aaadict[key] = value\n# 拥有此方法，则在外可将实例对象当作字典操作:\nenp['a'] = 'asd'\n# 就像这样\n\n```\n### collectionss\n总结一句话： `collections`出品， 必属精品。\n马上能想到的 有序字典，还有那啥都是出自此个模块之下。\n今天用的 计数也是出自此处      反正之后 这个里面能实现的功能，那就放弃手写吧————😓\nfrom collections import Counter\n\n### Function Annotations\nAnnotations are stored in the __annotations__ attribute of the function as a dictionary and have no effect on any other part of the function. Parameter annotations are defined by a colon after the parameter name, followed by an expression evaluating to the value of the annotation. Return annotations are defined by a literal ->, followed by an expression, between the parameter list and the colon denoting the end of the def statement. The following example has a positional argument, a keyword argument, and the return value annotated:\n```python \n>>>\ndef f(ham: str, eggs: str = 'eggs') -> str:\n    print(\"Annotations:\", f.__annotations__)\n    print(\"Arguments:\", ham, eggs)\n    return ham + ' and ' + eggs\n\nf('spam')\n\n>>> Annotations: {'ham': <class 'str'>, 'return': <class 'str'>, 'eggs': <class 'str'>}\n>>> Arguments: spam eggs\n>>> 'spam and eggs'\n```\n### Logger\n模块名： logging\n上手容易，功能丰富，性能肯定也好过自己✍\n另外，懒———\n```\nimport sys\nimport logging\nimport logging_error\n\nlogger1 = logging.getLogger('loger1')\nlogger2 = logging.getLogger('loger2')\n#实例化两个logger,默认名称为：`root`\n\"\"\"\n我居然以为root是程序执行处的名字，以为放到函数中就会显示函数名。emm\n所以才有了下面多层函数嵌套…，以及调用外部`import`\n\"\"\"\n\nformatter = logging.Formatter('[%(name)s]%(asctime)s %(levelname)-8s: %(message)s')\n#定义日志格式：\n\"\"\"\n%(name)s Logger的名字\n%(levelno)s 数字形式的日志级别\n%(levelname)s 文本形式的日志级别\n%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有\n%(filename)s 调用日志输出函数的模块的文件名\n%(module)s 调用日志输出函数的模块名|\n%(funcName)s 调用日志输出函数的函数名|\n%(lineno)d 调用日志输出函数的语句所在的代码行\n%(created)f 当前时间，用UNIX标准的表示时间的浮点数表示|\n%(relativeCreated)d 输出日志信息时的，自Logger创建以来的毫秒数|\n%(asctime)s 字符串形式的当前时间。默认格式是“2003-07-08 16:49:45,896”。逗号后面的是毫秒\n%(thread)d 线程ID。可能没有\n%(threadName)s 线程名。可能没有\n%(process)d 进程ID。可能没有\n%(message)s 用户输出的消息\n\"\"\"\n\nfileHandler = logging.FileHandler('loger.log')\nfileHandler.setFormatter(formatter)\n\nconsoleHandler = logging.StreamHandler(sys.stdout)\nconsoleHandler.formatter = formatter\n#配置文件、终端日志处理器。可以使用不同格式，来区分处理\n\nlogger1.addHandler(fileHandler)\nlogger2.addHandler(fileHandler)\nlogger1.addHandler(consoleHandler)\nlogger2.addHandler(consoleHandler)\n#为日志机添加处理器\n\nlogger1.setLevel(logging.INFO)\n#logger2.setLevel()\n#设置各日志机打印等级\n\n\nlogger1.debug('debugO')\nlogger1.info('info')\nlogger2.info('info')\nlogger1.error('error')\ndef warn_msg():\n    logger1.warn('warn msg')\n    warn_msg2()\ndef warn_msg2():\n    logger2.warn(u'warn 信息')\n    logging_error.error_demo()\nwarn_msg()\n```\n当然，logger还有别的调用方法，不过这应该就够了，\n具体要怎么实现，就去找官方文档了。\n预防针： 多种配置方法、日志重复输出:[见此](http://python.jobbole.com/86887/)\n\n## lambda函数\n### 排序\n```py\naaa\n>>> [{'time': 1}, {'time': 3}, {'time': 2}]\nsorted(aaa, key = lambda x: x[\"time\"])\n>>> [{'time': 1}, {'time': 2}, {'time': 3}]\nsorted(aaa, key = lambda x: x[\"time\"], reverse=True)\n>>> [{'time': 3}, {'time': 2}, {'time': 1}]\n```\n\n## Mock \n使用: unittest\n```python\n    mock.patch.object: Mock # 一个类, 后接方法\n    mock.patch: Mock # 一个方法, 按路径\n\n    @mock.patch(\"databases.wx_service.get_user_base_info\")\n    @mock.patch.object(wx_service.WeChat_OAP, \"send_template_msg\")\n    def test_create_weawarning(self, mock_send_template_msg, mock_get_user_base_info):\n        # 装饰器生效从内到外, 传入参数顺序, 从左到右\n        pass\n        mock_send_template_msg.return_value = ''/{}/[]/() 皆可  设定mock返回值\n        mock_get_user_base_info.side_effect = [''/{}/[]/(), ''/{}/[]/()] 设定每次调用mock函数依次返回返回值\n```\n\n","published":1,"updated":"2021-05-08T02:56:02.688Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckp2ml9mx006yu3yqc0886uy8","content":"<p>author:Ian</p>\n<p><img src=\"https://www.python.org/static/img/python-logo@2x.png\" alt=\"python\"></p>\n<h2 id=\"PiP-Not-Found-Issue\"><a href=\"#PiP-Not-Found-Issue\" class=\"headerlink\" title=\"PiP Not Found Issue\"></a>PiP Not Found Issue</h2><p>使用<code>pip</code>安装某包时， 提示让更新， 按提示操作更新没效果没反应再用就提示<code>ModuleNotFoundError: No module named &#39;pip&#39;</code> (ˉ▽ˉ；)…</p>\n<h2 id=\"ModuleNotFoundError-No-module-named-‘pip’\"><a href=\"#ModuleNotFoundError-No-module-named-‘pip’\" class=\"headerlink\" title=\"ModuleNotFoundError: No module named ‘pip’\"></a>ModuleNotFoundError: No module named ‘pip’</h2><h3 id=\"升级PiP时出现问题可由下方命令修复\"><a href=\"#升级PiP时出现问题可由下方命令修复\" class=\"headerlink\" title=\"升级PiP时出现问题可由下方命令修复\"></a>升级<code>PiP</code>时出现问题可由下方命令修复</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python -m ensurepip</span><br><span class=\"line\">python -m pip install --upgrade pip</span><br></pre></td></tr></table></figure>\n<h2 id=\"SSL校验\"><a href=\"#SSL校验\" class=\"headerlink\" title=\"SSL校验\"></a>SSL校验</h2><p>安装EasyOCR时,<br><code>reader = easyocr.Reader([&#39;ch_sim&#39;,&#39;en&#39;])</code><br>下载到接近90,结果报错了…. 估计是SSL问题加入以下两条,不知如何.</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> ssl</span><br><span class=\"line\">ssl._create_default_https_context = ssl._create_unverified_context</span><br></pre></td></tr></table></figure>\n\n<p>from http.client<br><code>To revert to the previous, unverified, behavior ssl._create_unverified_context() can be passed to the context parameter.</code></p>\n<h3 id=\"使用国内镜像下载Python\"><a href=\"#使用国内镜像下载Python\" class=\"headerlink\" title=\"使用国内镜像下载Python\"></a>使用国内镜像下载Python</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpy等包名)</span><br><span class=\"line\"><span class=\"meta\">   #</span><span class=\"bash\"> 一键更新pip 包资源(利用管道grep传输查询到的需要更新包名，传输到install命令)</span></span><br><span class=\"line\">   pip3 freeze --local | grep -v &#x27;^\\-e&#x27; | cut -d = -f 1  | xargs -n1 pip3 install -U</span><br><span class=\"line\"><span class=\"meta\">   #</span><span class=\"bash\"> 权限不够的话就在`pip3 install` 之前加`sudo`反正我不习惯用`root`</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"声明参数类型\"><a href=\"#声明参数类型\" class=\"headerlink\" title=\"声明参数类型\"></a>声明参数类型</h3><p>python3 在定义函数的时候可以声明函数类型啦：虽然不做限制，但作为<code>label</code>还是蛮好的。</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> io</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span>(<span class=\"params\">x:<span class=\"built_in\">int</span>, y:<span class=\"built_in\">int</span></span>) -&gt; <span class=\"built_in\">int</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write</span>(<span class=\"params\">f: io.BytesIO, data: <span class=\"built_in\">bytes</span></span>) -&gt; <span class=\"built_in\">bool</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        f.write(data)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> IOError:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br></pre></td></tr></table></figure>\n<p>终于不会之后写的忘了，要调用函数还得看半天这个函数应该怎么用…</p>\n<h3 id=\"时间处理\"><a href=\"#时间处理\" class=\"headerlink\" title=\"时间处理\"></a>时间处理</h3><p>以下可以做周、月的加减处理<br>relativedelta examples<br>Let’s begin our trip:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from datetime import *; from dateutil.relativedelta import *</span><br><span class=\"line\">import calendar</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Store-some-values\"><a href=\"#Store-some-values\" class=\"headerlink\" title=\"Store some values:\"></a>Store some values:</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NOW &#x3D; datetime.now()</span><br><span class=\"line\">TODAY &#x3D; date.today()</span><br><span class=\"line\">NOW</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>datetime.datetime(2003, 9, 17, 20, 54, 47, 282310)</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TODAY</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>datetime.date(2003, 9, 17)</p>\n</blockquote>\n<h4 id=\"Next-month\"><a href=\"#Next-month\" class=\"headerlink\" title=\"Next month\"></a>Next month</h4><blockquote>\n<blockquote>\n<blockquote>\n<p>NOW+relativedelta(months=+1)</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">datetime.datetime(2003, 10, 17, 20, 54, 47, 282310)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"合并字典\"><a href=\"#合并字典\" class=\"headerlink\" title=\"合并字典\"></a>合并字典</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = &#123;&#125;</span><br><span class=\"line\">b = &#123;<span class=\"string\">&#x27;a&#x27;</span>: <span class=\"number\">1</span>&#125;</span><br><span class=\"line\">c = &#123;**a, **b&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>key重复<code>b</code>中覆盖<code>a</code>, 否则单纯合并。</p>\n<h3 id=\"聊胜于无的小玩意-preety-tools\"><a href=\"#聊胜于无的小玩意-preety-tools\" class=\"headerlink\" title=\"聊胜于无的小玩意 preety tools\"></a>聊胜于无的小玩意 preety tools</h3><h5 id=\"彩色输出\"><a href=\"#彩色输出\" class=\"headerlink\" title=\"彩色输出\"></a>彩色输出</h5><p>模块名儿忘了，以后贴2019.03.01  03:08<br>one minute later:<br><code>pip3 install ansicolors</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from colors import red, green, blue</span><br><span class=\"line\">print(red(&#39;This is red&#39;))</span><br><span class=\"line\">print(green(&#39;This is green&#39;))</span><br><span class=\"line\">print(blue(&#39;This is blue&#39;))</span><br><span class=\"line\"></span><br><span class=\"line\">from colors import color</span><br><span class=\"line\">for i in range(256):</span><br><span class=\"line\">    print(color(&#39;Color #%d&#39; % i, fg&#x3D;i))</span><br></pre></td></tr></table></figure>\n<p>以上程序只能写在<code>.py</code>文件中,运行，而不能在…‘偷懒模式‘中。</p>\n<h4 id=\"Python3-ThreadPoolExecutor-线程池内库\"><a href=\"#Python3-ThreadPoolExecutor-线程池内库\" class=\"headerlink\" title=\"Python3 ThreadPoolExecutor 线程池内库\"></a>Python3 ThreadPoolExecutor 线程池内库</h4><p>在<code>python3</code>之后不久，有关线程池的使用就被集成到内库之中。<br><code>from concurrent.futures import ThreadPoolExecutor</code><br>使用方法：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    ThreadPoolExecutor(max_workers&#x3D;12)</span><br><span class=\"line\">    # 设置线程池大小</span><br><span class=\"line\">    .submit(func_name, (para))    # 提交任务</span><br><span class=\"line\">    .done()    # 查看任务是否完成</span><br><span class=\"line\">    .cancel()    # 没有被放入线程池中才能生效</span><br><span class=\"line\">    .result()    # 获取该任务返回值</span><br><span class=\"line\"></span><br><span class=\"line\">    from concurrent.futures import as_completed</span><br><span class=\"line\">    # 用于取出所有任务结果，省去一直用.done去查看的繁琐。但该方法</span><br><span class=\"line\"># 是一个生成器，所以任务未完成会阻塞。 还有 wait map 等用法就去看文档吧。</span><br></pre></td></tr></table></figure>\n<h5 id=\"安装错误？\"><a href=\"#安装错误？\" class=\"headerlink\" title=\"安装错误？\"></a>安装错误？</h5><p>居然有<code>pip3 install XX</code>的错误…这也是因为有旧版<code>pip3</code>存留。需要</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">bash -d pip3</span> </span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">bash -r pip3</span></span><br></pre></td></tr></table></figure>\n<p>来清理shell中旧版pip缓存。</p>\n<h3 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE?\"></a>IDE?</h3><p>其实要不要IDE都无所为，因为本就是脚本，要IDE只能说打开一个陌生项目查看时能够跳转函数。至于<code>vim</code>大概不能跳转吧，毕竟跳转需要把文件都加载才能实现。emm  来来，IDE的话就<code>PyCharm</code>除了编程页面颜色难看之外其他功能都不错，另外不支持中文路径，不过应该不是由于<code>Python</code>语言造成的，因为蟒蛇脚本是可以在中文路径下运行di<a href=\"date:2018年5月28日17点16分\">date:2018年5月28日17点16分</a></p>\n<h4 id=\"print语句：-含有自动换行，所以要想不换行的话需要在结尾加一个”-”如：\"><a href=\"#print语句：-含有自动换行，所以要想不换行的话需要在结尾加一个”-”如：\" class=\"headerlink\" title=\"print语句： 含有自动换行，所以要想不换行的话需要在结尾加一个”,”如：\"></a>print语句： 含有自动换行，所以要想不换行的话需要在结尾加一个”,”如：</h4><pre><code>for i in range(0,5):\n\n    print i,\n</code></pre>\n<p>而Python3版本则应该也可以 print(a,b,c);然而Python2.7不行</p>\n<h4 id=\"根据字典中值大小排列：\"><a href=\"#根据字典中值大小排列：\" class=\"headerlink\" title=\"根据字典中值大小排列：\"></a>根据字典中值大小排列：</h4><pre><code>sorted(dict2.iteritems(),key=lambda item:item[1],reverse=True) \n# item[0]即根据键来排列[1]为根据对应值\n</code></pre>\n<h4 id=\"format：如\"><a href=\"#format：如\" class=\"headerlink\" title=\"format：如:\"></a>format：如:</h4><pre><code>print(&#39;my name is&#123;0&#125;,and my age is&#123;1&#125;&#39;.format(&#39;song&#39;,18))\n</code></pre>\n<h5 id=\"or\"><a href=\"#or\" class=\"headerlink\" title=\"or:\"></a>or:</h5><pre><code>url = &#39;http://www.google.com/page=&#123;&#125;/&#39;\n\nnewsurl = url.format(i)\n# 旋即其后内容则代替&#123;&#125;位置\n</code></pre>\n<p>另，在{a}{b}{c}可通過format(a=1,b=2,c=3)來賦值</p>\n<hr>\n<h3 id=\"BeautifulSoup\"><a href=\"#BeautifulSoup\" class=\"headerlink\" title=\"BeautifulSoup\"></a>BeautifulSoup</h3><h4 id=\"select语句：在内容前加’-’可以获得其内容，如：\"><a href=\"#select语句：在内容前加’-’可以获得其内容，如：\" class=\"headerlink\" title=\"select语句：在内容前加’#’可以获得其内容，如：\"></a>select语句：在内容前加’#’可以获得其内容，如：</h4><pre><code>soup.select(&#39;artibodyTitle&#39;)[0].text\nselect().contents\n&quot;&quot;&quot;\n把标签变成不同list，同List中的不同元素 然后用[0]可取得第一个元素内容，而不与后方的内容合到一起\n*.strip()可将取出的‘\\t\\t’移除\n&quot;&quot;&quot;\n.select(&#39;time-source span a&#39;)\n# 从time-source中的&lt;span下&lt;a下取得内容e\n.select(&#39;.productPrice&#39;)[0].text\n# 獲取class=&quot;productPrice&quot;下價格內容\n</code></pre>\n<hr>\n<h3 id=\"datetime字符串转时间-时间转字符串\"><a href=\"#datetime字符串转时间-时间转字符串\" class=\"headerlink\" title=\"datetime字符串转时间  时间转字符串:\"></a>datetime字符串转时间  时间转字符串:</h3><pre><code>from datetime import datetime\ndt = datetime.strptime(timesource,&#39;%Y年%m月%d日%H:%M&#39;)(****年*月*日*22:03)\ndt.strftime(&#39;%Y-%m-%d&#39;)\n</code></pre>\n<hr>\n<h3 id=\"保存數據到xlsx，sqlite3、csv：\"><a href=\"#保存數據到xlsx，sqlite3、csv：\" class=\"headerlink\" title=\"保存數據到xlsx，sqlite3、csv：\"></a>保存數據到xlsx，sqlite3、csv：</h3><pre><code>.to_excel(&#39;name.xlsx&#39;)：输出为excle文件\nimport sqlite3  #保存到数据库\nwith sqlite3.connect(&#39;name.sqlite&#39;) as db:\n    df.to_sql(&#39;name&#39;,con = db)\n</code></pre>\n<h5 id=\"从数据库取出\"><a href=\"#从数据库取出\" class=\"headerlink\" title=\"从数据库取出\"></a>从数据库取出</h5><pre><code>with sqlite3.connect(&#39;name.sqlite&#39;) as db:\n    df2 = pandas.read_sql_query(&#39;SELECT&#39; * FROM name&#39;,con = db)\n</code></pre>\n<h4 id=\"類型錯誤-TypeError-a-bytes-like-object-is-required-not-‘str’\"><a href=\"#類型錯誤-TypeError-a-bytes-like-object-is-required-not-‘str’\" class=\"headerlink\" title=\"類型錯誤 TypeError: a bytes-like object is required, not ‘str’\"></a>類型錯誤 TypeError: a bytes-like object is required, not ‘str’</h4><pre><code>csv_file = open(&quot;rent.csv&quot;,&quot;wb&quot;)    \ncsv_writer = csv.writer(csv_file, delimiter=&#39;,&#39;)    #创建writer对象，指定文件与分隔符\nwriter.writerow([&#39;title&#39;, &#39;summary&#39;, &#39;year&#39;, &#39;id&#39;, &#39;count&#39;, &#39;link&#39;])\n</code></pre>\n<p>Python2.7 轉到 3.5下時提示由此錯誤，代碼爲</p>\n<h5 id=\"原因，解決方法：\"><a href=\"#原因，解決方法：\" class=\"headerlink\" title=\"原因，解決方法：\"></a>原因，解決方法：</h5><pre><code>因爲Python3.5 對於str與bytes類型區分變得敏感，所以原本在2.7下正常的代碼不能正常運行。\n雖然，利用str.encode() 或者 str = bytes(str, encoding = &#39;utf-8&#39;)可以轉換格式\n然而錯誤依然有……解決辦法則是放棄論壇裏的說法，找到官網Demo\n</code></pre>\n<h5 id=\"更改如下：\"><a href=\"#更改如下：\" class=\"headerlink\" title=\"更改如下：\"></a>更改如下：</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">csvfile = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;goodsList.csv&#x27;</span>, <span class=\"string\">&#x27;w&#x27;</span>, newline=<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">spamwriter = csv.writer(csvfile, delimiter=<span class=\"string\">&#x27;,&#x27;</span>)</span><br><span class=\"line\">spamwriter.writerow([productTitle, productPrice, productShop])</span><br></pre></td></tr></table></figure>\n<p>細節在於，在打開文件的時候去除<code>wb</code>裏面的<code>b</code>即不用二進制模式打開。</p>\n<hr>\n<h3 id=\"Image下：\"><a href=\"#Image下：\" class=\"headerlink\" title=\"Image下：\"></a>Image下：</h3><p>获取图像分辨率：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">im = Image.<span class=\"built_in\">open</span>(<span class=\"number\">0.0</span>)</span><br><span class=\"line\">width = im.size[<span class=\"number\">0</span>]</span><br><span class=\"line\">height = im.size[<span class=\"number\">1</span>]</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"Pandas\"><a href=\"#Pandas\" class=\"headerlink\" title=\"Pandas:\"></a>Pandas:</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">box = pd.read_csv(<span class=\"string\">&quot;filename.csv, index_col=&quot;</span>Date<span class=\"string\">&quot;, parse_dates=Ture) </span></span><br><span class=\"line\"><span class=\"string\">#读入文件，讲Date作为日期</span></span><br><span class=\"line\"><span class=\"string\">box.columns = [&#x27;&#x27;,&#x27;&#x27;] </span></span><br><span class=\"line\"><span class=\"string\"># 更改列名</span></span><br><span class=\"line\"><span class=\"string\">box[&#x27;new&#x27;] = box[&#x27;1&#x27;]+box[&#x27;2&#x27;]</span></span><br><span class=\"line\"><span class=\"string\"># 新增一列为1与2之和</span></span><br><span class=\"line\"><span class=\"string\">box.resample(&#x27;d&#x27;, &#x27;sum&#x27;) </span></span><br><span class=\"line\"><span class=\"string\"># 重新按照‘d’:每天，进行采样  方式为取和(&#x27;w&#x27;,&#x27;sum&#x27;)所有数据在一周内进行取和</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"闲语：\"><a href=\"#闲语：\" class=\"headerlink\" title=\"闲语：\"></a>闲语：</h2><h4 id=\"while-True与while-1的区别：\"><a href=\"#while-True与while-1的区别：\" class=\"headerlink\" title=\"while True与while 1的区别：\"></a>while True与while 1的区别：</h4><p>在Python2 中，循环判断一亿次，我的小电脑的执行速度是</p>\n<pre><code>while one: 9.97739481926\nwhile_true: 18.8063299656\nwhile 1 以压倒性胜利。\n</code></pre>\n<p>到了Python3中，则成了</p>\n<pre><code>while one: 16.101972927001043\nwhile_true: 16.25536527499935\n</code></pre>\n<blockquote>\n<p>嗯，不错，不分伯仲——个鬼啊。整体变差了好吧。0.0   原因待明。</p>\n</blockquote>\n<h1 id=\"Python-小记-📖\"><a href=\"#Python-小记-📖\" class=\"headerlink\" title=\"Python 小记 📖\"></a>Python 小记 📖</h1><p>先贴一个客观的教程文档网站<a href=\"http://www.runoob.com/python/python-tutorial.html\">http://www.runoob.com/python/python-tutorial.html</a></p>\n<h4 id=\"Windows-下添加环境变量，CMD中Python2-与Python3-共存\"><a href=\"#Windows-下添加环境变量，CMD中Python2-与Python3-共存\" class=\"headerlink\" title=\"Windows 下添加环境变量，CMD中Python2 与Python3 共存\"></a>Windows 下添加环境变量，CMD中Python2 与Python3 共存</h4><p>Windows 下 把python2 路径加入到环境变量中，再修改python2.exe可以和python3区分方便在CMD中调用，但代价就是经常命令报错……</p>\n<p>不过也可以使用py -2来区分，所以还是不改名字了吧<br>Windows 下 用<code>py -2 -m pip install ***</code>以及<code>py -3 -m pip install ***</code>来区分安装到python2 或者 python3.</p>\n<h3 id=\"变量\"><a href=\"#变量\" class=\"headerlink\" title=\"变量\"></a>变量</h3><p>类下直接定义的变量可以继承，然而并不能被自己的函数所调用，意义不明…</p>\n<p>被继承的类可以调用继承类中定义的self.* 变量，俺认为这是因为它们在实例时都被当成了self 本身。另外，优先调用自己中的self变量，没有，才会去被继承类中去查找（先后顺序可得前方解答）。</p>\n<h2 id=\"变换数据类型\"><a href=\"#变换数据类型\" class=\"headerlink\" title=\"变换数据类型\"></a>变换数据类型</h2><p>Python 在从服务器接收或者发送数据时需要字符类型转换，’’’struct’’’便是为此而工作</p>\n<h4 id=\"struct-pack\"><a href=\"#struct-pack\" class=\"headerlink\" title=\"struct.pack\"></a>struct.pack</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\">a = <span class=\"number\">20</span></span><br><span class=\"line\">b = <span class=\"number\">400</span></span><br><span class=\"line\"><span class=\"built_in\">str</span> = struct.pack(<span class=\"string\">&quot;ii&quot;</span>, a, b)  </span><br><span class=\"line\"><span class=\"comment\">#转换后的str虽然是字符串类型，但相当于其他语言中的字节流（字节数组），可以在网络</span></span><br><span class=\"line\"><span class=\"comment\">#上传输</span></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&#x27;length:&#x27;</span>, <span class=\"built_in\">len</span>(<span class=\"built_in\">str</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"built_in\">str</span></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"built_in\">repr</span>(<span class=\"built_in\">str</span>)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>—- result<br>length: 8<br>   #—-这里是乱码<br>‘/x14/x00/x00/x00/x90/x01/x00/x00’</p>\n</blockquote>\n<p>格式符”i”表示转换为int，’ii’表示有两个int变量。进行转换后的结果长度为8个字节（int类型占用4个字节，两个int为8个字节），可以看到输出的结果是乱码，因为结果是二进制数据，所以显示为乱码。可以使用python的内置函数repr来获取可识别的字符串，其中十六进制的0x00000014, 0x00001009分别表示20和400。</p>\n<h4 id=\"struct-unpack\"><a href=\"#struct-unpack\" class=\"headerlink\" title=\"struct.unpack\"></a>struct.unpack</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">str</span> = struct.pack(<span class=\"string\">&quot;ii&quot;</span>, <span class=\"number\">20</span>, <span class=\"number\">400</span>)</span><br><span class=\"line\">a1, a2 = struct.unpack(<span class=\"string\">&quot;ii&quot;</span>, <span class=\"built_in\">str</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&#x27;a1:&#x27;</span>, a1</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&#x27;a2:&#x27;</span>, a2</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>—- result:<br>a1: 20<br>a2: 400</p>\n</blockquote>\n<p>struct.unpack做的工作刚好与struct.pack相反，用于将字节流转换成python数据类型。它的函数原型为：struct.unpack(fmt, string)，该函数返回一个元组。</p>\n<h4 id=\"struct-calcsize\"><a href=\"#struct-calcsize\" class=\"headerlink\" title=\"struct.calcsize\"></a>struct.calcsize</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">struct.calcsize(<span class=\"string\">&#x27;i&#x27;</span>)</span><br><span class=\"line\">struct.calcsize(<span class=\"string\">&#x27;ii&#x27;</span>)</span><br><span class=\"line\">struct.calcsize(<span class=\"string\">&#x27;iic&#x27;</span>)</span><br><span class=\"line\">struct.calcsize(<span class=\"string\">&#x27;iicd&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>4<br>8<br>9<br>24</p>\n</blockquote>\n<p><code>struct.calcsize</code>用于计算格式字符串所对应的结果的长度，如：<code>struct.calcsize(‘ii’)</code>，返回<code>8</code>。因为两个<code>int</code>类型所占用的长度是<code>8</code>个字节。</p>\n<h4 id=\"struct-pack-into-struct-unpack-from\"><a href=\"#struct-pack-into-struct-unpack-from\" class=\"headerlink\" title=\"struct.pack_into, struct.unpack_from\"></a>struct.pack_into, struct.unpack_from</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">from</span> ctypes <span class=\"keyword\">import</span> create_string_buffer</span><br><span class=\"line\"></span><br><span class=\"line\">buf = create_string_buffer(<span class=\"number\">12</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"built_in\">repr</span>(buf.raw)</span><br><span class=\"line\">struct.pack_into(<span class=\"string\">&quot;iii&quot;</span>, buf, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, -<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"built_in\">repr</span>(buf.raw)</span><br><span class=\"line\"><span class=\"built_in\">print</span> struct.unpack_from(<span class=\"string\">&#x27;iii&#x27;</span>, buf, <span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>—- result<br>‘/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00’<br>‘/x01/x00/x00/x00/x02/x00/x00/x00/xff/xff/xff/xff’<br>(1, 2, -1)</p>\n</blockquote>\n<h2 id=\"Python3\"><a href=\"#Python3\" class=\"headerlink\" title=\"Python3\"></a>Python3</h2><p>在<font color=red>Python3</font>中，转换字符串时，不能直接<code>pack(&#39;8s&#39;, &#39;i am str&#39;)</code>, 需要将字符串转换成二进制所以在语法中标记<code>pack(&#39;8s&#39;, b&#39;i am str&#39;)</code>使用<code>&#39;b&#39;</code>来进行标记</p>\n<p>以上来自<a href=\"http://python.jobbole.com/81554/\">Darkbull</a> 这是转贴地址，不知道为什么我看的转贴挂的原帖地址失效了 😰</p>\n<hr>\n<hr>\n<hr>\n<h3 id=\"一不小心发现的语法\"><a href=\"#一不小心发现的语法\" class=\"headerlink\" title=\"一不小心发现的语法\"></a>一不小心发现的语法</h3><p><font color=red>py2.7</font></p>\n<pre><code>while &#39;a&#39; in a or b:\n    break\n# 没错，意思就是如果a或者是b包含‘a’的话…     \n</code></pre>\n<h3 id=\"与-方法\"><a href=\"#与-方法\" class=\"headerlink\" title=\"* 与 ** 方法:\"></a>* 与 ** 方法:</h3><p>呃，原来<code>*</code>在MarkDown里面是斜体的意思啊——需要斜体显示的前后各一个星号</p>\n<pre><code>def a(* a, **b):\n    balabala\n</code></pre>\n<p>这里的*a， a在函数中被赋值为一个元组，b被赋值为一个字典。所以在调用的时候嘞，只能把能往一个元组里塞的放在前面，而能够生成字典的放在后面</p>\n<pre><code>a(1,2,3,4,5,6,7,8,9,a:&#39;a&#39;,b:1,c:&#39;nihao&#39;)\n</code></pre>\n<p>就像这么一样来调用。  另外，def a()函数中还能在前方再新加一个输入</p>\n<pre><code>def aa(jiushishuowo, *a, **b):\n    pass\n</code></pre>\n<p>这样的话，那么在调用的时候第一个逗号前面的内容会赋值给它。over，回去拿快递了~~~</p>\n<p>🐶 年假前再来补充一下：约定名*args, **kwargs</p>\n<h4 id=\"获取文件路径\"><a href=\"#获取文件路径\" class=\"headerlink\" title=\"获取文件路径\"></a>获取文件路径</h4><pre><code>path = os.path.abspath(os.path.dirname(__file__))\n# 获取当前运行文件的路径。需在本地有此文件，在命令行中出错\n\nfor root, subdirs, files in os.walk(path):\n# 遍历所有path下文件  path为要遍历的路径\n</code></pre>\n<h4 id=\"同获取路径\"><a href=\"#同获取路径\" class=\"headerlink\" title=\"同获取路径\"></a>同获取路径</h4><pre><code>os.path.abspath(&#39;./&#39;)\nos.path.abspath(&#39;Deskop&#39;)\nos.path.abspath(&#39;Deskop&#39;) + os.path.sep\n</code></pre>\n<blockquote>\n<p>‘C:\\Users\\Administrator’</p>\n</blockquote>\n<blockquote>\n<p>‘C:\\Users\\Administrator\\Deskop’</p>\n</blockquote>\n<blockquote>\n<p>‘C:\\Users\\Administrator\\Deskop\\‘</p>\n</blockquote>\n<h3 id=\"获取指定目录下所有文件名列表\"><a href=\"#获取指定目录下所有文件名列表\" class=\"headerlink\" title=\"获取指定目录下所有文件名列表\"></a>获取指定目录下所有文件名列表</h3><pre><code>os.listdir(&#39;D\\IFData&#39;)\n</code></pre>\n<hr>\n<h5 id=\"dict\"><a href=\"#dict\" class=\"headerlink\" title=\"_dict_\"></a>_<em>dict</em>_</h5><pre><code>class Province:\n    country = &#39;China&#39;\n\n    def __init__(self, name, count):\n        self.name = name\n        self.count = count\n\n    def func(self, *args, **kwargs):\n        print &#39;func&#39;\n\nprint Province.__dict__     # 类输出\nobj1 = Province(&#39;HuBei&#39;, 100)\nprint obj1.__dict__         # 对象1\nobj2 = Province(&#39;hulala&#39;, 3888)\nprint obj2.__dict__         # 对象2\n</code></pre>\n<blockquote>\n<p><code>&#123;&#39;country&#39;: &#39;China&#39;, &#39;__module__&#39;: &#39;__main__&#39;, &#39;func&#39;: &lt;function func at 0x049EF470&gt;, &#39;__init__&#39;: &lt;function __init__ at 0x049EF4F0&gt;, &#39;__doc__&#39;: None&#125;</code></p>\n</blockquote>\n<blockquote>\n<p><code>&#123;&#39;count&#39;: 100, &#39;name&#39;: &#39;HuBei&#39;&#125;</code></p>\n</blockquote>\n<blockquote>\n<p><code>&#123;&#39;count&#39;: 3888, &#39;name&#39;: &#39;hulala&#39;&#125;</code></p>\n</blockquote>\n<p>类输出的是全局的函数，变量等信息。<br>对象输出的只是对象拥有的普通变量而已</p>\n<p>呃(⊙﹏⊙)，等下再去拿吧…  差点忘了说，这个__dict__与字典相配合来回赋值简直舒服… 步骤为：将某个变量=一个类（数据类（就是能够a.b这么调用的数值））然后这个变量就能a.b的这么使用了。  而后也能通过a.__dict__（这是一个字典）再将所需要的数值取出来，转赋值为别的东西。  反正我是用到了… 在想要实现一个函数来保存一个变量的某些属性的时候。（呃(⊙﹏⊙)用爱去理解我所描述的场合吧。）</p>\n<h3 id=\"IF-ELSE\"><a href=\"#IF-ELSE\" class=\"headerlink\" title=\"IF ELSE\"></a>IF ELSE</h3><pre><code># 执行时会将IF前面整个表达式作为判断结果后的执行对象，\n# 而不是仅仅替换某一个数字或者变量。  即 下方表达式运算结果\n# 不是  `4`       和      `5`  而是如下所示\na = 1 + 3 if 1 == 2 else 2 + 1\na\na = 1 + 3 if 1 == 1 else 2 + 1\na\n</code></pre>\n<blockquote>\n<p>3</p>\n</blockquote>\n<blockquote>\n<p>4</p>\n</blockquote>\n<hr>\n<hr>\n<hr>\n<h3 id=\"Python-2-中的object新式类和经典类\"><a href=\"#Python-2-中的object新式类和经典类\" class=\"headerlink\" title=\"Python 2 中的object新式类和经典类\"></a>Python 2 中的object新式类和经典类</h3><pre><code># 作者：邹冲\n# 链接：https://www.zhihu.com/question/19754936/answer/202650790\nclass A:\n    def foo(self):\n    print(&#39;called A.foo()&#39;)\n\nclass B(A):\n    pass\n\nclass C(A):\n    def foo(self):\n    print(&#39;called C.foo()&#39;)\n\nclass D(B, C): \n    pass\n\nif __name__ == &#39;__main__&#39;:\n    d = D() \n    d.foo()\n</code></pre>\n<blockquote>\n<p>B、C 是 A 的子类，D 多继承了 B、C 两个类，其中 C 重写了 A 中的 foo() 方法。</p>\n</blockquote>\n<blockquote>\n<p>如果 A 是经典类（如上代码），当调用 D 的实例的 foo() 方法时，Python 会按照深度优先的方法去搜索 foo() ，路径是 B-A-C ，执行的是 A 中的 foo() ；</p>\n</blockquote>\n<blockquote>\n<p>如果 A 是新式类，当调用 D 的实例的 foo() 方法时，Python 会按照广度优先的方法去搜索 foo() ，路径是 B-C-A ，执行的是 C 中的 foo() 。</p>\n</blockquote>\n<blockquote>\n<p>因为 D 是直接继承 C 的，从逻辑上说，执行 C 中的 foo() 更加合理，因此新式类对多继承的处理更为合乎逻辑。</p>\n</blockquote>\n<blockquote>\n<p>在 Python 3.x 中的新式类貌似已经兼容了经典类，无论 A 是否继承 object 类， D 实例中的 foo() 都会执行 C 中的 foo() 。但是在 Python 2.7 中这种差异仍然存在，因此还是推荐使用新式类，要继承 object 类。</p>\n</blockquote>\n<h4 id=\"items\"><a href=\"#items\" class=\"headerlink\" title=\".items()\"></a>.items()</h4><p>一个字典 a，其a.items()为将每对对应值组为一个元组。即使键值也为一个字典也是将此字典作为元组元素。(￣▽￣)” emm</p>\n<hr>\n<hr>\n<h3 id=\"Queue\"><a href=\"#Queue\" class=\"headerlink\" title=\"Queue\"></a>Queue</h3><p>队列，先进先出型。可存数字、字符…嘛，Python里啥都一样。所以啥都能存。用于事件按顺序执行。示例如~：</p>\n<pre><code>import Queue\nmqueue = Queue.Queue(maxsize = 3)\nmqueue.put(10)\nmqueue.put(15)\nmqueue.put(12)\n# 此时如果再往里存呢，就会卡住… 持续等待有空位置\n# 所以\nmqueue.get()        #取出第一个存入\nmqueue.put(&#39;14sas4&#39;)  #继续存\n## 在接触的项目中，是借用字典，来将处理函数作为Value，将Keys，put到队\n列中，再进行取出执行。\n</code></pre>\n<p>如果队列中没有数值之后再<code>get</code>也会卡住……<br>所以以下东西就显得比较重要了：</p>\n<h3 id=\"series和dataframe\"><a href=\"#series和dataframe\" class=\"headerlink\" title=\"series和dataframe\"></a>series和dataframe</h3><p>先贴来源：<a href=\"http://blog.csdn.net/ly_ysys629/article/details/54944153\">http://blog.csdn.net/ly_ysys629/article/details/54944153</a></p>\n<h5 id=\"属性\"><a href=\"#属性\" class=\"headerlink\" title=\"属性\"></a>属性</h5><pre><code>series    ：.index, .values, .name, .index.name\ndataframe ：.columns, .index, .values\n</code></pre>\n<h5 id=\"series\"><a href=\"#series\" class=\"headerlink\" title=\"series:\"></a><font color=red>series</font>:</h5><p>一组数组（列表或元组），series除了一组数据外还包括一组索引（即只有行索引），索引可自行定义也可利用Series(),自动生成索引;</p>\n<h5 id=\"dataframe\"><a href=\"#dataframe\" class=\"headerlink\" title=\"dataframe:\"></a><font color=red>dataframe</font>:</h5><p>是表格型数据，既有行索引又有列索引，每列数据可以为不同类型数据（数值、字符串、布尔型值），可利用DataFrame（其他数据，dataframe属性)指定dataframe的属性创建dataframe。</p>\n<h5 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h5><h5 id=\"series-1\"><a href=\"#series-1\" class=\"headerlink\" title=\"series\"></a>series</h5><pre><code>#创建series\nimport pandas as pd\nobj_list=[1,2,3,4]\nobj_tuple=(4,5,6,7)\nobj_dict=&#123;&#39;a&#39;:[1,2],&#39;b&#39;:[2,3],&#39;c&#39;:[3,4],&#39;d&#39;:[4,5]&#125;\nobj_series_list=pd.Series(obj_list)#通过列表创建series\nobj_series_tuple=pd.Series(obj_tuple,index=list(&#39;abcd&#39;))\n#通过元组创建series\nobj_series_dict=pd.Series(obj_dict)#通过字典创建series\n#定义属性\nobj_series_list.index.name=&#39;zimu&#39;\nobj_series_list.name=&#39;data&#39;\n\nprint &quot;#通过列表创建series&quot;\nprint obj_series_list\nprint &quot;#通过元组创建series&quot;\nprint obj_series_tuple\nprint &quot;#通过字典创建series&quot;\nprint obj_series_dict\n#显示series类型及属性\nprint type(obj_series_list),obj_series_list.dtype\nprint obj_series_list.index,obj_series_list.index.name\nprint obj_series_list.values,obj_series_list.name\n</code></pre>\n<blockquote>\n<p>#通过列表创建series</p>\n</blockquote>\n<blockquote>\n<p>zimu</p>\n</blockquote>\n<blockquote>\n<p>0    1</p>\n</blockquote>\n<blockquote>\n<p>1    2</p>\n</blockquote>\n<blockquote>\n<p>2    3</p>\n</blockquote>\n<blockquote>\n<p>3    4</p>\n</blockquote>\n<blockquote>\n<p>Name: data, dtype: int64</p>\n</blockquote>\n<hr>\n<blockquote>\n<p>#通过元组创建series</p>\n</blockquote>\n<pre><code>a    4\nb    5\nc    6\nd    7\ndtype: int32\n</code></pre>\n<hr>\n<blockquote>\n<p>#通过字典创建series</p>\n</blockquote>\n<pre><code>a    [1, 2]\nb    [2, 3]\nc    [3, 4]\nd    [4, 5]\ndtype: object\n&lt;class &#39;pandas.core.series.Series&#39;&gt; int64\nRangeIndex(start=0, stop=4, step=1, name=u&#39;zimu&#39;) zimu\n[1 2 3 4] data\n</code></pre>\n<h5 id=\"dataframe-1\"><a href=\"#dataframe-1\" class=\"headerlink\" title=\"dataframe\"></a>dataframe</h5><pre><code>#创建dataframe\nimport pandas as pd\nimport numpy as np\nobj_dict=&#123;&#39;a&#39;:[1,2],&#39;b&#39;:[2,3],&#39;c&#39;:[3,4],&#39;d&#39;:[4,5]&#125;\nobj_array=np.array([[1,2,3,4],[3,4,5,6]])\nobj_series_1=pd.Series([11,12,13,14])\nobj_series_2=pd.Series([21,22,23,24])\nobj_dataframe_dict=pd.DataFrame(obj_dict)\n#通过字典创建dataframe\nobj_dataframe_array=pd.DataFrame(obj_array,index=[&#39;one&#39;,&#39;two&#39;])\n#通过矩阵创建dataframe\nobj_dataframe_series=pd.DataFrame([obj_series_1,obj_series_2])\n#通过series创建dataframe\nobj_dataframe_dataframe=pd.DataFrame(obj_dataframe_series,index=\n    [0,1,&#39;one&#39;],columns=[0,1,2,&#39;a&#39;])\n#通过其他dataframe创建dataframe\nprint &quot;#通过字典创建dataframe&quot;\nprint obj_dataframe_dict\nprint &quot;#通过矩阵创建dataframe&quot;\nprint obj_dataframe_array\nprint &quot;#通过series创建dataframe&quot;\nprint obj_dataframe_series\nprint &quot;#通过其他dataframe创建dataframe&quot;\nprint obj_dataframe_dataframe\n#dataframe属性\nprint obj_dataframe_dataframe.dtypes\nprint obj_dataframe_dataframe.values\nprint obj_dataframe_dataframe.columns\nprint obj_dataframe_dataframe.index\n</code></pre>\n<blockquote>\n<p>输出结果为：<br>    #通过字典创建dataframe<br>       a  b  c  d<br>    0  1  2  3  4<br>    1  2  3  4  5<br>    #通过矩阵创建dataframe<br>         0  1  2  3<br>    one  1  2  3  4<br>    two  3  4  5  6<br>    #通过series创建dataframe<br>        0   1   2   3<br>    0  11  12  13  14<br>    1  21  22  23  24<br>    #通过其他dataframe创建dataframe<br>            0     1     2   a<br>    0    11.0  12.0  13.0 NaN<br>    1    21.0  22.0  23.0 NaN<br>    one   NaN   NaN   NaN NaN<br>    0    float64<br>    1    float64<br>    2    float64<br>    a    float64<br>    dtype: object<br>    [[ 11.  12.  13.  nan]<br>     [ 21.  22.  23.  nan]<br>     [ nan  nan  nan  nan]]<br>    Index([0, 1, 2, u’a’], dtype=’object’)<br>    Index([0, 1, u’one’], dtype=’object’)<br>取数据的话，便是<code>obj_dataframe_dict[&#39;a&#39;][0]</code>取出数值即为<code>1</code></p>\n</blockquote>\n<h3 id=\"自命名创建方式\"><a href=\"#自命名创建方式\" class=\"headerlink\" title=\"自命名创建方式\"></a>自命名创建方式</h3><pre><code>df4 = pd.DataFrame(np.random.randn(6, 4), \n    index=[u&#39;第二&#39;, 4, 3, 2, 1, 0], columns=[u&#39;第一&#39;,5,4,1])\n#行为：     第一，      5，         4，         1\n#列为：第二 -0.091305   ...\n#       4   ...\n#       3\n#       2\n#       1\n#       0                                       ...\n</code></pre>\n<h3 id=\"查看\"><a href=\"#查看\" class=\"headerlink\" title=\"查看\"></a>查看</h3><pre><code>.dtypes     查看各行数据格式\n.head()     查看前几行（默认5）\n.tail()         查看后几行\n.index      查看数据框引索\n.columns        查看列名\n.values     数据值\n.T          转置\n.sort           排序  .sort(columns = &#39;***&#39;)根据***列数据进行排序\n</code></pre>\n<h6 id=\"取数据方法见上\"><a href=\"#取数据方法见上\" class=\"headerlink\" title=\"取数据方法见上\"></a><font color=green>取数据方法见上</font></h6><h3 id=\"zip-和-数组变字典\"><a href=\"#zip-和-数组变字典\" class=\"headerlink\" title=\"zip 和 数组变字典\"></a>zip 和 数组变字典</h3><pre><code>a = [1,2,3]\nb = [4,5,6]\nc = [4,5,6,7,8]\nzipped = zip(a,b)\n</code></pre>\n<blockquote>\n<p>[(1, 4), (2, 5), (3, 6)]</p>\n</blockquote>\n<pre><code>zip(a,c)\n</code></pre>\n<blockquote>\n<p>[(1, 4), (2, 5), (3, 6)]</p>\n</blockquote>\n<pre><code>zip(*zipped)\n</code></pre>\n<blockquote>\n<p>[(1, 2, 3), (4, 5, 6)]</p>\n</blockquote>\n<p>zip 也可以二维矩阵变换（矩阵的行列互换）<br>因为其作用为按序号重组数组。（其英语翻译为拉链……）</p>\n<h4 id=\"数组变字典-：\"><a href=\"#数组变字典-：\" class=\"headerlink\" title=\"数组变字典~：\"></a>数组变字典~：</h4><pre><code>dic(zip(a, b))\n# a中值为key b中值为values\n</code></pre>\n<h3 id=\"字典操作\"><a href=\"#字典操作\" class=\"headerlink\" title=\"字典操作\"></a>字典操作</h3><pre><code>dict= sorted(dic.items(), key=lambda d:d[0]) \n# 将字典按照键值升序排列\n# d： 无所谓的参数\n# d[0]：0为升序，1为降序\n# 如果是字符型，那么‘1’‘10’‘12’… 才是‘2’’20‘，因为Python的比较是按照\n    # 按序提取第一个字符进行比较。所以要排序，还是得用int\n# 排序之后被转换为list类型。\nfor i in orderIDic:\n            spamwriter.writerow(orderIDic[i])\n# 变为\nfor i in orderIDic:\n            spamwriter.writerow(i[1])\n</code></pre>\n<hr>\n<h4 id=\"namedtuple\"><a href=\"#namedtuple\" class=\"headerlink\" title=\"namedtuple\"></a>namedtuple</h4><pre><code>import collections\nperson = collections.namedtuple(&#39;P&#39;, &#39;name age gender&#39;)\n# P: 类名   后面空格隔开的为变量名称\n\nbob = person(name = &#39;B&#39;, age = 30, gender = &#39;male&#39;)\njane = Person(name = &#39;J&#39;, age = 29, gender = &#39;female&#39;)\nfor people in [bob, jane]:\n    print (&quot;%s is %d years old %s&quot; % people)\n</code></pre>\n<p>元组的命名—— 命名之后可以由bob.name 来调用 （看了那个Python面向对象进阶， 老多<code>__hahah__()</code>函数之后，所以这明显是当成基本类的变量在用了。  emm 这么么说也不贴切 😔  果然理解程度还是跟不上的…    emm 现在需要跟进的不是怎么用Python了，而是python的用法了，走起~  继续写future笔记去了—— 这个得看的明白点儿😄）</p>\n<hr>\n<hr>\n<h3 id=\"CSV\"><a href=\"#CSV\" class=\"headerlink\" title=\"CSV\"></a>CSV</h3><h4 id=\"读取\"><a href=\"#读取\" class=\"headerlink\" title=\"读取\"></a>读取</h4><pre><code>import csv\nreader = csv.reader(open(&#39;test.csv&#39;, &#39;rb&#39;)) \nfor item in reader:\n    print item\n</code></pre>\n<h5 id=\"官方是这么教你的\"><a href=\"#官方是这么教你的\" class=\"headerlink\" title=\"官方是这么教你的\"></a>官方是这么教你的</h5><pre><code>#我记得我写过一次，怎么不见了…\nimport csv\nwith open(&#39;names.csv&#39;) as csvfile:\n    reader = csv.DictReader(csvfilr)\n    for row in reader:\n        print (row[&#39;first_name&#39;], row[&#39;last_name&#39;])\n</code></pre>\n<h4 id=\"写入\"><a href=\"#写入\" class=\"headerlink\" title=\"写入\"></a>写入</h4><pre><code>import csv\nwriter = csv.writer(open(&#39;test2.csv&#39;, &#39;wb&#39;))\nwriter.writerow([&#39;col1&#39;, &#39;col2&#39;, &#39;col3&#39;])\ndata = [range(3)  for i in range(3)]\nfor item in data:\n    writer.writerow(item)\n</code></pre>\n<h5 id=\"官方教你这么写\"><a href=\"#官方教你这么写\" class=\"headerlink\" title=\"官方教你这么写\"></a>官方教你这么写</h5><pre><code>import csv\nwith open(&#39;names.csv&#39;) as csvfile:\n    fieldnames = [&#39;first_name&#39;, &#39;last_name&#39;]\n    writer = csv.DictWriter(csvfile, fieldnames = fieldnames)\n    \n    writer.writeheader()\n    writer.writerow(&#39;first_name&#39; : &#39;Naled&#39;, &#39;last_name&#39; : &#39;Beans&#39;)\n</code></pre>\n<p>须注意之处：writer.writerow()方法中的参数是list类型，如果你想在A1列写入’hello’，则必须是writer.writerow(‘hello’)，不然’hello’会被看成是个list从而被分写入5列。写入CSV时，CSV文件的创建必须加上’b’参数，即csv.writer(open(‘test.csv’, ‘wb’))，不然会出现隔行的现象。网上搜到的解释是：python正常写入文件的时候，每行的结束默认添加’\\n’，即0x0D，而writerow命令的结束会再增加一个0x0D0A，因此对于windows系统来说，就是两行，而采用’b’参数，用二进制进行文件写入，系统默认是不添加0x0D的。</p>\n<h4 id=\"关闭\"><a href=\"#关闭\" class=\"headerlink\" title=\"关闭\"></a>关闭</h4><pre><code>csvfile.close()\n</code></pre>\n<p>值得注意的是上面的文档是覆盖型创建，即，写数据只能在关闭文档之前完成，之后再打开文件，再写就会覆盖掉之前（清空再写） 下面的txt  <code>mode = &#39;a&#39;</code> 就属于添加型写入了，再关闭之后再打开会在最后一条开始继续添加。然后将csv中的’w’替换成‘a’就行了。记得带上’b’要不会出现数据隔行…隔行显示</p>\n<h5 id=\"官方还叫你这么写嘞\"><a href=\"#官方还叫你这么写嘞\" class=\"headerlink\" title=\"官方还叫你这么写嘞\"></a>官方还叫你这么写嘞</h5><pre><code>with open(&#39;na1me.csv&#39;, &#39;ab&#39;) as csvfile:\n    spamwriter = csv.writer(csvfile, delimiter = &#39;,&#39;)\n    spamwriter.writerow([&#39;adasd&#39;, &#39;w.c.w&#39;, &#39;lol&#39;])\n</code></pre>\n<h3 id=\"txt保存\"><a href=\"#txt保存\" class=\"headerlink\" title=\"txt保存\"></a>txt保存</h3><pre><code># 基本与CSV一致，emm其实都是保存为文档，就只有个后缀区别…\ndef text_save(content,filename,mode=&#39;a&#39;):\n    # Try to save a list variable in txt file.\n    file = open(filename,mode)\n    file.write(str(content)+&#39;\\n&#39;)\n    file.close()\ntext_save(np.mean(self.trueRange[start: ]), &#39;atr.txt&#39;)\n</code></pre>\n<p>关于保存路径呢，windows 下必须<font color=green>?</font>用  ‘.\\.\\..’没错，当前路径（相对路径）和绝对路径都是这样用的</p>\n<p><code>mode</code> <code>b</code>代表二进制模式打开，而<code>a</code>就有用了，表示有此文件就打开，没的话就创建。</p>\n<h3 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json\"></a>json</h3><pre><code>和上述txt文件保存差不过，嗯应该说完全一样。因为我是用的是`json.dumps`\n</code></pre>\n<h4 id=\"dumps、loads\"><a href=\"#dumps、loads\" class=\"headerlink\" title=\"dumps、loads\"></a>dumps、loads</h4><pre><code>    这两个语句前者是将字典转化为str格式，后者是将str转换为字典。所以保  \n存到文件也不过是 字典 -&gt; str -&gt;(用`write`写入)-&gt; 本地文件， 反之。\n    与之相对比的是`dump`和`load`这个是直接保存至文件，但`s`多好用\n需注意的是`dumps`有`indent`参数可用来指明转换为`str`之后的缩进参    \n数。一般`4`（所以说这里说的是空格数？）。  哦，`loads`直接加载文件也\n行，不用读出来`str`再去转换\n</code></pre>\n<h3 id=\"Shelve\"><a href=\"#Shelve\" class=\"headerlink\" title=\"Shelve\"></a>Shelve</h3><pre><code>对象的持久化存储——\n目的：Shelve模块为任意能够pickle的Python对象实现持久化存储，并提供一个类似字典的\n</code></pre>\n<h2 id=\"接口。\"><a href=\"#接口。\" class=\"headerlink\" title=\"接口。\"></a>接口。</h2><hr>\n<hr>\n<h2 id=\"列表List\"><a href=\"#列表List\" class=\"headerlink\" title=\"列表List\"></a>列表List</h2><p><font color=red>需提前定义，不能像变量一样随用随写…</font></p>\n<p>以下来自于 <a href=\"http://www.jb51.net/article/47978.htm\">Python 列表(List)操作方法详解</a></p>\n<h3 id=\"列表操作包含以下函数\"><a href=\"#列表操作包含以下函数\" class=\"headerlink\" title=\"列表操作包含以下函数:\"></a>列表操作包含以下函数:</h3><pre><code>cmp(list1, list2)       # 比较两个列表的元素 \nlen(list)               # 列表元素个数 \nmax(list)               # 返回列表元素最大值 \nmin(list)               # 返回列表元素最小值 \nlist(seq)               # 将元组转换为列表 \n</code></pre>\n<h3 id=\"列表操作包含以下方法\"><a href=\"#列表操作包含以下方法\" class=\"headerlink\" title=\"列表操作包含以下方法:\"></a>列表操作包含以下方法:</h3><pre><code>list.append(obj)        # 在列表末尾添加新的对象\nlist.count(obj)         # 统计某个元素在列表中出现的次数\nlist.extend(seq)        # 在列表末尾一次性\n    # 追加另一个序列中的多个值（用新列表扩展原来的列表）\nlist.index(obj)         # 从列表中找出某个值第一个匹配项的索引位置\nlist.insert(index, obj) # 将对象插入列表\nlist.pop(obj=list[-1])      #移除列表中的一个元素（默认最后一个元素）\n    #，并且返回该元素的值\nlist.remove(obj)        # 移除列表中某个值的第一个匹配项\nlist.reverse()          # 反向列表中元素\nlist.sort([func])           # 对原列表进行排序\n</code></pre>\n<h2 id=\"字符串连接\"><a href=\"#字符串连接\" class=\"headerlink\" title=\"字符串连接\"></a>字符串连接</h2><p>来自<a href=\"http://www.cnblogs.com/chenjingyi/p/5741901.html\">http://www.cnblogs.com/chenjingyi/p/5741901.html</a></p>\n<h3 id=\"方法一\"><a href=\"#方法一\" class=\"headerlink\" title=\"方法一\"></a>方法一</h3><pre><code>website = &#39;python&#39; + &#39;tab&#39; + &#39;.com&#39;\n</code></pre>\n<h3 id=\"方法二\"><a href=\"#方法二\" class=\"headerlink\" title=\"方法二\"></a>方法二</h3><pre><code>listStr = [&#39;python&#39;, &#39;tab&#39;, &#39;.com&#39;] \nwebsite = &#39;&#39;.join(listStr)\n</code></pre>\n<h3 id=\"方法三\"><a href=\"#方法三\" class=\"headerlink\" title=\"方法三\"></a>方法三</h3><pre><code>website = &#39;%s%s%s&#39; % (&#39;python&#39;, &#39;tab&#39;, &#39;.com&#39;)\n</code></pre>\n<p>结论： 连接个数少使用一，个数多使用二。  推荐，使用三 ~ ，~</p>\n<h2 id=\"手动编译Py文件\"><a href=\"#手动编译Py文件\" class=\"headerlink\" title=\"手动编译Py文件\"></a>手动编译Py文件</h2><pre><code>import compileall\ncompileall.compile_dir(目录)\n</code></pre>\n<hr>\n<hr>\n<hr>\n<h2 id=\"时间\"><a href=\"#时间\" class=\"headerlink\" title=\"时间\"></a>时间</h2><h4 id=\"datetime\"><a href=\"#datetime\" class=\"headerlink\" title=\"datetime\"></a>datetime</h4><pre><code>from datetime import datetime\na = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0) \na.year  \na.hour      #int 型变量\n</code></pre>\n<blockquote>\n<p>2017   </p>\n</blockquote>\n<blockquote>\n<p>0</p>\n</blockquote>\n<blockquote>\n<p>获取当前本机电脑💻时间，replace为自定义某个数值。单独调用某个信息如a.year、a.hour</p>\n</blockquote>\n<h4 id=\"datetime-类型变量可直接相减获得间隔日\"><a href=\"#datetime-类型变量可直接相减获得间隔日\" class=\"headerlink\" title=\"datetime 类型变量可直接相减获得间隔日\"></a>datetime 类型变量可直接相减获得间隔日</h4><pre><code>a = datetime.datetime.now()\n# datetime.datetime(2017, 10, 18, 8, 52, 27, 5000)\nb = datetime(2005, 2, 6)\n# datetime.datetime(2005, 2, 6, 0, 0)\nc = a - b \n# datetime.timedelta(4637, 31947, 5000)\nc.days  # int 型\n</code></pre>\n<blockquote>\n<p>4637</p>\n</blockquote>\n<h4 id=\"timedelta\"><a href=\"#timedelta\" class=\"headerlink\" title=\"timedelta\"></a>timedelta</h4><p>timedelta为datetime类型相减而来（datetime不能相加…），然后嘞，datetime.timedelta(1,35340)这是它的样子，前是天数，后是秒数。也就是说所有相减就是告诉你相距多少天零多少秒，都是标准单位（误）。要取出可 <code>.days</code>   和  `seconds``</p>\n<h3 id=\"格式化输出当前时间\"><a href=\"#格式化输出当前时间\" class=\"headerlink\" title=\"格式化输出当前时间\"></a>格式化输出当前时间</h3><pre><code>import time\nprint time.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;,time.localtime(time.time()))\n</code></pre>\n<blockquote>\n<p>2017-08-21 10:54:31</p>\n</blockquote>\n<h3 id=\"time\"><a href=\"#time\" class=\"headerlink\" title=\"time\"></a>time</h3><pre><code>import time\ntime.time()     # 返回当前时间的时间戳（1970纪元后经过的浮点秒数）\n# 返回值为float 可直接拿来运算，还是很舒服的。\n</code></pre>\n<hr>\n<hr>\n<h3 id=\"线程-threading\"><a href=\"#线程-threading\" class=\"headerlink\" title=\"线程 threading\"></a>线程 threading</h3><h4 id=\"用于实现定时器\"><a href=\"#用于实现定时器\" class=\"headerlink\" title=\"用于实现定时器\"></a>用于实现定时器</h4><pre><code>import threading\ndef hel():\n    print &quot;so you sucsessful to kill 5 seconde&quot;\ntime = threading.Timer(5, hel)\ntime.start()\n</code></pre>\n<blockquote>\n<p>so you sucsessful to kill 5 seconde<br>在命令行中按下回车后消失，很有意思，并且当第二调用时time.start()时就会——</p>\n</blockquote>\n<blockquote>\n<p>RuntimeError: threads can only be started once</p>\n</blockquote>\n<h4 id=\"循环调用\"><a href=\"#循环调用\" class=\"headerlink\" title=\"循环调用\"></a>循环调用</h4><p>以上的不能循环调用的话就没啥价值了，所以下面有个妖艳用法为：</p>\n<pre><code>def fun():\n    print &quot;So jian&quot;\n    global timer\n    timer = threading.Timer(5.5, fun)\n    timer.start()\ntimer = threading.Timer(1, fun)\ntimer.start()\n# 通过自调自的方法循环创建时间线程，另外，timer.cancel()可停止定时器工作。\n# 值得注意的是，上面不循环调用的 在执行完函数之后依然会持续运行\n# 所以得记得关闭。\n</code></pre>\n<p>比方说这个妖艳……呃 本来打算在调用函数里写上cancel但是…依然之后不能再次start()</p>\n<h4 id=\"线程池\"><a href=\"#线程池\" class=\"headerlink\" title=\"线程池\"></a>线程<font color=#10e5a6>池</font></h4><p>自实现或者使用<code>threadpool.ThreadPool</code>:</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> threadpool  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sayhello</span>(<span class=\"params\"><span class=\"built_in\">str</span></span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;Hello &quot;</span>,<span class=\"built_in\">str</span></span><br><span class=\"line\">        time.sleep(<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">name_list =[<span class=\"string\">&#x27;dd&#x27;</span>,<span class=\"string\">&#x27;aa&#x27;</span>,<span class=\"string\">&#x27;bb&#x27;</span>,<span class=\"string\">&#x27;cc&#x27;</span>]</span><br><span class=\"line\">start_time = time.time()</span><br><span class=\"line\">pool = threadpool.ThreadPool(<span class=\"number\">10</span>) </span><br><span class=\"line\">requests = threadpool.makeRequests(sayhello, name_list) </span><br><span class=\"line\"><span class=\"keyword\">for</span> req <span class=\"keyword\">in</span> requests:</span><br><span class=\"line\">    pool.putRequest(req) </span><br><span class=\"line\">pool.wait() </span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&#x27;%d second&#x27;</span>% (time.time()-start_time)</span><br></pre></td></tr></table></figure>\n\n\n<hr>\n<hr>\n<hr>\n<h1 id=\"Math-库\"><a href=\"#Math-库\" class=\"headerlink\" title=\"Math 库\"></a>Math 库</h1><pre><code>import math\n</code></pre>\n<h3 id=\"数值取整\"><a href=\"#数值取整\" class=\"headerlink\" title=\"数值取整\"></a>数值取整</h3><pre><code>ceil、floor    还有一个不是此库中的round\n</code></pre>\n<p>找来翻译就是 ： 小区、地板、回合………… 好吧，是（抹灰泥装镶板、最低的，最小的、周围，围绕）</p>\n<pre><code># 使用方法为：\nmath.ceil(3.12)\nmath.floor(3.24)\nround(3.51)\nround(3.10999999999, 10)\n#取值时的参考步长，好像（😭）是10就是最大步长了，再大没意义\n# 手动赋值超过9位也就是10位小数的时候在PyCharm里直接赋值调试就自己约了，\n# 而一般产生精度漂移都是十几位小数开外的。emm   就这么表达了，看得懂\n</code></pre>\n<blockquote>\n<p>4.0</p>\n</blockquote>\n<blockquote>\n<p>3.0</p>\n</blockquote>\n<blockquote>\n<p>4.0</p>\n</blockquote>\n<blockquote>\n<p>3.11</p>\n</blockquote>\n<hr>\n<hr>\n<hr>\n<hr>\n<h1 id=\"令程序有序执行的方法\"><a href=\"#令程序有序执行的方法\" class=\"headerlink\" title=\"令程序有序执行的方法\"></a>令程序有序执行的方法</h1><h2 id=\"对象（伪类）间变量传递\"><a href=\"#对象（伪类）间变量传递\" class=\"headerlink\" title=\"对象（伪类）间变量传递\"></a>对象（伪类）间变量传递</h2><p>Like This：</p>\n<pre><code>class A(object):\n&quot;&quot;&quot;docstring for A&quot;&quot;&quot;\n    def __init__(self, name):\n        super(A, self).__init__()\n        self.name = name\n        self.a = 0\n    def da(self):\n        print self.name\n        print self.a    \na = A(&#39;I am A&#39;)\na.da()\n\n\nclass B(object):\n&quot;&quot;&quot;docstring for B&quot;&quot;&quot;\n    def __init__(self, aclass):\n        super(B, self).__init__()\n        self.aclass = aclass\n        self.aclass.a += 1\n    def dada(self):\n        self.aclass.da()\nb = B(a)\nb.dada()\n\nclass C(object):\n&quot;&quot;&quot;docstring for B&quot;&quot;&quot;\n    def __init__(self, aclass):\n        super(C, self).__init__()\n        self.aclass = aclass\n        self.aclass.a += 1\n    def dada(self):\n        self.aclass.da()\nc = C(a)\nc.dada()\n</code></pre>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>0</p>\n</blockquote>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>1</p>\n</blockquote>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>2</p>\n</blockquote>\n<p>B与C分别在去改变读取在A中定义的数值。  嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(<em>￣▽￣</em>)o就是这么写意和惬意。在VN.PY中有记录，不过还是拿过来吧，毕竟python用法</p>\n<hr>\n<h2 id=\"字典中建立函数映射，方便调用\"><a href=\"#字典中建立函数映射，方便调用\" class=\"headerlink\" title=\"字典中建立函数映射，方便调用~\"></a>字典中建立函数映射，方便调用~</h2><pre><code>def add(x, y):\n    return x + y\ndef sub(x, y):\n    return x - y\na = &#123;&#39;add&#39;:add, &#39;sub&#39;:sub&#125;\na\na[&#39;add&#39;](1, 2)\na[&#39;sub&#39;](1, 2)\n</code></pre>\n<blockquote>\n<p>{‘add’: &lt;function add at 0x02D162B0&gt;, ‘sub’: &lt;function sub at 0x02D16530&gt;}</p>\n</blockquote>\n<blockquote>\n<p>3</p>\n</blockquote>\n<blockquote>\n<p>-1</p>\n</blockquote>\n<h3 id=\"collections-模块\"><a href=\"#collections-模块\" class=\"headerlink\" title=\"collections 模块\"></a>collections 模块</h3><h4 id=\"namedtuple-1\"><a href=\"#namedtuple-1\" class=\"headerlink\" title=\"namedtuple\"></a>namedtuple</h4><pre><code>给元组元素命名（貌似写过这个笔记欸，不过现在才发现这几个都是在一个模块下的）\n</code></pre>\n<h4 id=\"deque\"><a href=\"#deque\" class=\"headerlink\" title=\"deque\"></a>deque</h4><pre><code>#双端队列  快速插入 以及取出\nl.insert(0, v)\nl.pop(0)\n\nl.popleft()\nl.appendleft()\n# 数据量大时，速度优于原生list\n</code></pre>\n<h6 id=\"a-Game\"><a href=\"#a-Game\" class=\"headerlink\" title=\"a Game:\"></a>a Game:</h6><pre><code>import sys\nimport time\nfrom collections import deque\nfancy_loading = deque(&#39;&gt;--------------------&#39;)\nwhile True:\n    print &#39;\\r%s&#39; % &#39;&#39;.join(fancy_loading),\n    fancy_loading.rotate(1)\n    sys.stdout.flush()\n    time.sleep(0.08)\n    Result:\n# 一个无尽循环的跑马灯\n</code></pre>\n<h4 id=\"Counter\"><a href=\"#Counter\" class=\"headerlink\" title=\"Counter\"></a>Counter</h4><pre><code># 计数器\nfrom collections import Counter\ns = &#39;&#39;&#39;A Counter is a dict subclass for counting hashable objects. \n    It is an unordered collection where elements are stored as \n    dictionary keys and their counts are stored as dictionary values. \n    Counts are allowed to be any integer value including zero or \n    negative counts. The Counter class is similar to bags or multisets in other         \n    languages.&#39;&#39;&#39;.lower()\nc = Counter(s)\nprint c.most_common(5)\n</code></pre>\n<blockquote>\n<p>[(‘ ‘, 54), (‘e’, 32), (‘s’, 25), (‘a’, 24), (‘t’, 24)]</p>\n</blockquote>\n<h4 id=\"OrderDict\"><a href=\"#OrderDict\" class=\"headerlink\" title=\"OrderDict\"></a>OrderDict</h4><pre><code># 有序字典：记录了数据存入时的先后顺序\n# 不过发现一个骚操作：\n</code></pre>\n<h4 id=\"defaultdict\"><a href=\"#defaultdict\" class=\"headerlink\" title=\"defaultdict\"></a>defaultdict</h4><pre><code># 默认字典： 当key不存在时，返回此结果\n</code></pre>\n<hr>\n<h2 id=\"线程\"><a href=\"#线程\" class=\"headerlink\" title=\"线程\"></a>线程</h2><pre><code>创建线程： 使用Threading模块创建，从threading.Thread继承，然后重写__init__ 和run 方法\n</code></pre>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"> </span><br><span class=\"line\">exitFlag = <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myThread</span> (<span class=\"params\">threading.Thread</span>):</span>   <span class=\"comment\">#继承父类threading.Thread</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, threadID, name, counter</span>):</span>        </span><br><span class=\"line\">        threading.Thread.__init__(self)</span><br><span class=\"line\">        self.threadID = threadID</span><br><span class=\"line\">        self.name = name</span><br><span class=\"line\">        self.counter = counter</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span>(<span class=\"params\">self</span>):</span>      </span><br><span class=\"line\">    <span class=\"comment\">#把要执行的代码写到run函数里面 线程在创建后会直接运行run函数 </span></span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Starting &quot;</span> + self.name</span><br><span class=\"line\">        写到这儿</span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Exiting &quot;</span> + self.name</span><br><span class=\"line\"></span><br><span class=\"line\">thread1 = myThread(<span class=\"number\">1</span>, <span class=\"string\">&quot;Thread - 1&quot;</span> , <span class=\"number\">1</span>)</span><br><span class=\"line\">thread1 = myThread(<span class=\"number\">2</span>, <span class=\"string\">&quot;Thread - 2&quot;</span> , <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"comment\"># 开启</span></span><br><span class=\"line\">thread1.start()</span><br><span class=\"line\">thread2.start()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"线程同步\"><a href=\"#线程同步\" class=\"headerlink\" title=\"线程同步\"></a>线程同步</h3><p>不同线程对某个数据同时修改就很刺激，所以需要同步。（当然也可以选择不）<br>其实也简单，如下：</p>\n<pre><code>import threading\nthreadingLock = threading.Lock()\n# 从这儿领一把锁\n# 然后在 run()函数中，“写到这儿——也就是工作函数之前，写上\nthreadingLock.acquire()\n# 随后在工作函数之后\n# threadingLock.release()\n</code></pre>\n<p>然后拿到小锁子的函数就能运行，运行完了把小锁子释放掉。为啥不是钥匙🔑……好吧。我就称呼它我就称呼它梭子吧——</p>\n<h2 id=\"队列\"><a href=\"#队列\" class=\"headerlink\" title=\"队列\"></a>队列</h2><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">线程优先级队列</span><br><span class=\"line\">Queue.qsize()\t    返回队列的里站了几个</span><br><span class=\"line\">Queue.empty()           如果队列为空，返回True,反之False</span><br><span class=\"line\">Queue.full()            如果队列满了，返回True,反之False</span><br><span class=\"line\">Queue.full 与 maxsize   大小对应</span><br><span class=\"line\">Queue.get([block[, timeout]]) </span><br><span class=\"line\"><span class=\"code\">\t获取队列,timeout`等待时间</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">Queue.get_nowait() 相当 </span></span><br><span class=\"line\"><span class=\"code\">Queue.get(False)</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">Queue.put(item) 写入队列，timeout 等待时间</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">Queue.put_nowait(item) 相当</span></span><br><span class=\"line\"><span class=\"code\">Queue.put(item, False)</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">Queue.task_done()       在完成一项工作之后，</span></span><br><span class=\"line\"><span class=\"code\">Queue.task_done()       函数向任务已经完成的队列发送一个信号</span></span><br><span class=\"line\"><span class=\"code\">Queue.join()            实际上意味着等到队列为空，再执行别的操作</span></span><br></pre></td></tr></table></figure>\n\n<p>来段儿示例：来自<a href=\"http://www.runoob.com/python/python-multithreading.html\">这儿</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: UTF-8 -*-</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> Queue</span><br><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"> </span><br><span class=\"line\">exitFlag = <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myThread</span> (<span class=\"params\">threading.Thread</span>):</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, threadID, name, q</span>):</span></span><br><span class=\"line\">        threading.Thread.__init__(self)</span><br><span class=\"line\">        self.threadID = threadID</span><br><span class=\"line\">        self.name = name</span><br><span class=\"line\">        self.q = q</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Starting &quot;</span> + self.name</span><br><span class=\"line\">        process_data(self.name, self.q)</span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Exiting &quot;</span> + self.name</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_data</span>(<span class=\"params\">threadName, q</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">not</span> exitFlag:</span><br><span class=\"line\">        queueLock.acquire()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> workQueue.empty():</span><br><span class=\"line\">            data = q.get()  </span><br><span class=\"line\">            queueLock.release()</span><br><span class=\"line\">            <span class=\"built_in\">print</span> <span class=\"string\">&quot;%s processing %s&quot;</span> % (threadName, data)   </span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            queueLock.release()</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\"> </span><br><span class=\"line\">threadList = [<span class=\"string\">&quot;Thread-1&quot;</span>, <span class=\"string\">&quot;Thread-2&quot;</span>, <span class=\"string\">&quot;Thread-3&quot;</span>]</span><br><span class=\"line\">nameList = [<span class=\"string\">&quot;One&quot;</span>, <span class=\"string\">&quot;Two&quot;</span>, <span class=\"string\">&quot;Three&quot;</span>, <span class=\"string\">&quot;Four&quot;</span>, <span class=\"string\">&quot;Five&quot;</span>]</span><br><span class=\"line\">queueLock = threading.Lock()</span><br><span class=\"line\">workQueue = Queue.Queue(<span class=\"number\">10</span>)</span><br><span class=\"line\">threads = []</span><br><span class=\"line\">threadID = <span class=\"number\">1</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 创建新线程</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> tName <span class=\"keyword\">in</span> threadList:</span><br><span class=\"line\">    thread = myThread(threadID, tName, workQueue)</span><br><span class=\"line\">    thread.start()</span><br><span class=\"line\">    threads.append(thread)</span><br><span class=\"line\">    threadID += <span class=\"number\">1</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 填充队列</span></span><br><span class=\"line\">queueLock.acquire()</span><br><span class=\"line\"><span class=\"keyword\">for</span> word <span class=\"keyword\">in</span> nameList:</span><br><span class=\"line\">    workQueue.put(word)</span><br><span class=\"line\">queueLock.release()</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 等待队列清空</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">not</span> workQueue.empty():    </span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 通知线程是时候退出</span></span><br><span class=\"line\">exitFlag = <span class=\"number\">1</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 等待所有线程完成</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">    t.join()</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;Exiting Main Thread&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Starting Thread-1</p>\n</blockquote>\n<blockquote>\n<p>Starting Thread-2</p>\n</blockquote>\n<blockquote>\n<p>Starting Thread-3</p>\n</blockquote>\n<blockquote>\n<p>Thread-1 processing One</p>\n</blockquote>\n<blockquote>\n<p>Thread-2 processing Two</p>\n</blockquote>\n<blockquote>\n<p>Thread-3 processing Three</p>\n</blockquote>\n<blockquote>\n<p>Thread-1 processing Four</p>\n</blockquote>\n<blockquote>\n<p>Thread-2 processing Five</p>\n</blockquote>\n<blockquote>\n<p>Exiting Thread-3</p>\n</blockquote>\n<blockquote>\n<p>Exiting Thread-1</p>\n</blockquote>\n<blockquote>\n<p>Exiting Thread-2</p>\n</blockquote>\n<blockquote>\n<p>Exiting Main Thread</p>\n</blockquote>\n<p>呃， 以上就是我现知道的终极用法，当然其基础于：</p>\n<pre><code>workQueue = Queue.Queue(10)     \n# 创建+设定队列长度（emm 小心卡死就是了）\n# 只要满了再往里塞绝对死，无意外……(lll￢ω￢)\nworkQueue.put(word) \n# 往里塞。  基础就是塞个数字，高级就是塞个线程\nworkQueue.get() \n# 顺序往外取\n# 括号里里面可以写进参数，然而，依然按照顺序往外取，插队办理啥的不存在\n# 另外，队列空的话取依然会死……\n</code></pre>\n<h3 id=\"一些方法\"><a href=\"#一些方法\" class=\"headerlink\" title=\"一些方法\"></a>一些方法</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">q = queue.Queue(maxsize=<span class=\"number\">0</span>) </span><br><span class=\"line\">q.qsize() <span class=\"comment\">#查看队列大小 </span></span><br><span class=\"line\">q.empty() <span class=\"comment\">#判断队列是否为空 </span></span><br><span class=\"line\">q.full() </span><br><span class=\"line\"><span class=\"comment\">#如果maxsize设置了大小(eg:2)，如果q.put()了2个元素，则返回真，反之，则为假 </span></span><br><span class=\"line\">q.get_nowait() </span><br><span class=\"line\"><span class=\"comment\"># 如果队列中没有元素了，只用q.get()</span></span><br><span class=\"line\">（当然，可以设置`q.get(block=<span class=\"literal\">False</span>）`）会使程序卡住，用q.get_nowait()则会报错而不卡住 </span><br><span class=\"line\">q.put_nowait() </span><br><span class=\"line\"><span class=\"comment\"># 如果maxsize设置了大小，用q.put()超过范围则会卡住（当然</span></span><br><span class=\"line\"><span class=\"comment\"># 可以设置属性q.put(block=False)）。用q.put_nowait()则会报错而不卡住</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"老夫的Demo\"><a href=\"#老夫的Demo\" class=\"headerlink\" title=\"老夫的Demo\"></a>老夫的Demo</h3><p><em><strong>消费生产者关系</strong></em></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> queue</span><br><span class=\"line\"><span class=\"keyword\">import</span> threadpool</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\">pool = threadpool.ThreadPool(<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">que = queue.Queue()</span><br><span class=\"line\"></span><br><span class=\"line\">dataList = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>,<span class=\"number\">0</span>]</span><br><span class=\"line\">dataList1 = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>]</span><br><span class=\"line\">dataList2 = [<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>]</span><br><span class=\"line\">dataList3 = [<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>,<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">printLock = threading.Lock()</span><br><span class=\"line\"></span><br><span class=\"line\">workList = [dataList1, dataList2, dataList3]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker</span>():</span>    </span><br><span class=\"line\">   <span class=\"comment\">## 消费者</span></span><br><span class=\"line\">   <span class=\"comment\">#printLock.acquire()</span></span><br><span class=\"line\">    aaa = que.get()</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(aaa)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> aaa:</span><br><span class=\"line\">        <span class=\"built_in\">print</span> (i)</span><br><span class=\"line\">    <span class=\"comment\">#printLock.release()</span></span><br><span class=\"line\">    time.sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">geter</span>(<span class=\"params\">task</span>):</span></span><br><span class=\"line\">    <span class=\"comment\">## 生产者</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;emm, put in_:&quot;</span>, task)</span><br><span class=\"line\">    time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">    que.put(task)</span><br><span class=\"line\">    </span><br><span class=\"line\">    a = threading.Thread(target=worker)</span><br><span class=\"line\">    a.start()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> workList:</span><br><span class=\"line\">    geter(i)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<hr>\n<h2 id=\"进程\"><a href=\"#进程\" class=\"headerlink\" title=\"进程\"></a>进程</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> multiprocessing</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker_1</span>(<span class=\"params\">interval, lock, low</span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;worker_1&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (time.time())</span><br><span class=\"line\">    lock.acquire()</span><br><span class=\"line\">    time.sleep(<span class=\"number\">0.1</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;I got the lock&quot;</span>)</span><br><span class=\"line\">    time.sleep(interval)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(low)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;end worker_1&quot;</span>)</span><br><span class=\"line\">    lock.release()</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker_2</span>(<span class=\"params\">interval, lock</span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;worker_2&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (time.time())   </span><br><span class=\"line\">    lock.acquire()</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;I got the lock&quot;</span>)</span><br><span class=\"line\">    time.sleep(interval)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;end worker_2&quot;</span>)</span><br><span class=\"line\">    lock.release()</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker_3</span>(<span class=\"params\">interval, lock</span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;worker_3&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (time.time())</span><br><span class=\"line\">    lock.acquire()</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;I got the lock&quot;</span>)</span><br><span class=\"line\">    time.sleep(interval)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;end worker_3&quot;</span>)</span><br><span class=\"line\">    lock.release()</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    printLock = multiprocessing.Lock()</span><br><span class=\"line\">    <span class=\"comment\"># 🔒 来自关爱的小锁子 </span></span><br><span class=\"line\">    p1 = multiprocessing.Process(target = worker_1, args = (<span class=\"number\">2</span>, printLock, [<span class=\"string\">&quot;asd&quot;</span>, &#123;<span class=\"string\">&#x27;s&#x27;</span>:<span class=\"number\">1</span>&#125;, [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]])).start()</span><br><span class=\"line\">    p2 = multiprocessing.Process(target = worker_2, args = (<span class=\"number\">3</span>, printLock)).start()</span><br><span class=\"line\">    p3 = multiprocessing.Process(target = worker_3, args = (<span class=\"number\">4</span>, printLock)).start()</span><br><span class=\"line\">    w = &#123;<span class=\"string\">&#x27;a&#x27;</span>:p1, <span class=\"string\">&#x27;b&#x27;</span>:p2, <span class=\"string\">&#x27;c&#x27;</span>:p3&#125;</span><br><span class=\"line\">    <span class=\"comment\"># 创建三个进程去运行这三个函数</span></span><br><span class=\"line\">    <span class=\"comment\">#p1.start()</span></span><br><span class=\"line\">    <span class=\"comment\">#p2.start()</span></span><br><span class=\"line\">    <span class=\"comment\">#p3.start()</span></span><br><span class=\"line\">    <span class=\"comment\">#for i in w:</span></span><br><span class=\"line\">    <span class=\"comment\">#    w[i].start()</span></span><br><span class=\"line\">    <span class=\"comment\"># 启动进程</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;The number of CPU is:&quot;</span> + <span class=\"built_in\">str</span>(multiprocessing.cpu_count()))   </span><br><span class=\"line\">    <span class=\"keyword\">for</span> p <span class=\"keyword\">in</span> multiprocessing.active_children():</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;child   p.name:&quot;</span> + p.name + <span class=\"string\">&quot;\\tp.id&quot;</span> + <span class=\"built_in\">str</span>(p.pid))</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;Main All Done&quot;</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># dt 2018年5月18日11点22分</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>worker_1<br>1526613489.1864893<br>worker_2<br>1526613489.1932006<br>The number of CPU is:4<br>child   p.name:Process-3        p.id208<br>child   p.name:Process-1        p.id206<br>child   p.name:Process-2        p.id207<br>Main All Done<br>worker_3<br>1526613489.1968668<br>I got the lock<br>[‘asd’, {‘s’: 1}, [1, 2, 3]]<br>end worker_1<br>I got the lock</p>\n<p>end worker_2<br>I got the lock<br>end worker_3</p>\n</blockquote>\n<p><font color=ca5a00>插一句话</font><br>线程和进程的关系，貌似与电脑双系统和系统再开虚拟机的关系emm  对于资源利用的角度上。</p>\n<h5 id=\"没有传参的进程\"><a href=\"#没有传参的进程\" class=\"headerlink\" title=\"没有传参的进程\"></a>没有传参的进程</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> multiprocessing</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sayHello</span>():</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;hello~ I can see you&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    p1 = multiprocessing.Process(target=sayHello)</span><br><span class=\"line\">    p2 = multiprocessing.Process(target=sayHello)</span><br><span class=\"line\">    p3 = multiprocessing.Process(target=sayHello)</span><br><span class=\"line\">    p1.start()</span><br><span class=\"line\">    p2.start()</span><br><span class=\"line\">    p3.start()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>如果只是单纯运行，这样就可以了，之所以做这个测试是因为我忌惮于那个<code>args</code>的传参，毕竟<code>()</code>里面若有元素存在就必须要有逗号…   看来没有传参的话就不需要了<br>一个参数<code>a</code>的时候: <code>(a, )</code>emmm🤔</p>\n<h3 id=\"将进程定义为类\"><a href=\"#将进程定义为类\" class=\"headerlink\" title=\"将进程定义为类\"></a>将进程定义为类</h3><pre><code>import multiprocessing\nimport time\nclass ClockProcess(multiprocessing.Process):\n    def __init__(self, interval):\n        multiprocessing.Process.__init__(self)\n        self.interval = interval\n    def run(self):\n        n = 5\n        while n &gt; 0:\n            print(&quot;the time is &#123;0&#125;&quot;.format(time.ctime()))\n            time.sleep(self.interval)\n            n -= 1 \nif __name__ == &#39;__main__&#39;:\n    p = ClockProcess(3)\n    p.start()\n</code></pre>\n<p><font color=red>以上，<code>p.start()</code>被调用时，自动调用<code>run()</code>   另外时间戳都是瞎戳的，所以… emm 这都一年之前的东西了，现在才想起来戳时间有点儿纪念意义(⊙﹏⊙) </font> </p>\n<blockquote>\n<p>2018年5月18日</p>\n</blockquote>\n<h4 id=\"属性-1\"><a href=\"#属性-1\" class=\"headerlink\" title=\"属性\"></a>属性</h4><pre><code>daemon ：是否伴随主程序结束而结束\nLock: 锁：（如下， 防止访问共享资源时冲突，如以上打印时间时出现的不连续打印😰）\ndef worker(lock, var):\n    try:\n        ***\n    finally:\n        lock.release()\nlock = multiprocessing.Lock()\nvar = &#39;我是变量&#39;\np = multiptocessing.Process(target = worker, args = (lock, var))\n</code></pre>\n<h2 id=\"警个告\"><a href=\"#警个告\" class=\"headerlink\" title=\"警个告\"></a><font color=#cc0000><em><strong>警个告</strong></em></font></h2><p>创建进程分支的函数选择只能隶属于<code>__main__</code>下或者是隶属与创建进程的函数级别相同的级别，例如今天在main下一个函数中选择目标函数为此函数的函数就不可以… 如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">a</span>():</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">c</span>(<span class=\"params\">para</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">\t*(target=b, args=(<span class=\"number\">1</span>,)) \t🌹</span><br><span class=\"line\">    *(target=c, args=(<span class=\"number\">1</span>,)) \t❌</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">b</span>(<span class=\"params\">para</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n<p>emm，上述表述的很明确，但是昨天又重新犯了这个问题… 进程的执行者放到了类中的某个函数，然后又提出到<code>__main__ </code>中函数，所以都不能执行，最终放到`__main__``外，与它同级，也就是def 前无空格。 才能“受命”。</p>\n<h4 id=\"通过队列来存储不同进程产生的结果\"><a href=\"#通过队列来存储不同进程产生的结果\" class=\"headerlink\" title=\"通过队列来存储不同进程产生的结果\"></a>通过队列来存储不同进程产生的结果</h4><p>{来自}(<a href=\"https://blog.csdn.net/u014556057/article/details/66974452\">https://blog.csdn.net/u014556057/article/details/66974452</a>)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># -*- coding:utf-8 -*-</span><br><span class=\"line\">from multiprocessing import Process, Queue, Lock</span><br><span class=\"line\"></span><br><span class=\"line\">L &#x3D; [1, 2, 3]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">def add(q, lock, a, b):</span><br><span class=\"line\">    lock.acquire()  # 加锁避免写入时出现不可预知的错误</span><br><span class=\"line\">    L1 &#x3D; range(a, b)</span><br><span class=\"line\">    lock.release()</span><br><span class=\"line\">    q.put(L1)</span><br><span class=\"line\">    print L1</span><br><span class=\"line\"></span><br><span class=\"line\">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class=\"line\">    q &#x3D; Queue()</span><br><span class=\"line\">    lock &#x3D; Lock()</span><br><span class=\"line\">    p1 &#x3D; Process(target&#x3D;add, args&#x3D;(q, lock, 20, 30))</span><br><span class=\"line\">    p2 &#x3D; Process(target&#x3D;add, args&#x3D;(q, lock, 30, 40))</span><br><span class=\"line\">    p1.start()</span><br><span class=\"line\">    p2.start()</span><br><span class=\"line\">    p1.join()</span><br><span class=\"line\">    p2.join()</span><br><span class=\"line\"></span><br><span class=\"line\">    L +&#x3D; q.get() + q.get()</span><br><span class=\"line\">    print L</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>[20, 21, 22, 23, 24, 25, 26, 27, 28, 29]<br>[30, 31, 32, 33, 34, 35, 36, 37, 38, 39]<br>[1, 2, 3, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]</p>\n</blockquote>\n<hr>\n<hr>\n<h2 id=\"再加一个协程\"><a href=\"#再加一个协程\" class=\"headerlink\" title=\"再加一个协程\"></a>再加一个协程</h2><h3 id=\"基础实现：\"><a href=\"#基础实现：\" class=\"headerlink\" title=\"基础实现：\"></a>基础实现：</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># yield</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">creatAor</span>():</span></span><br><span class=\"line\">    mylist = <span class=\"built_in\">range</span>(<span class=\"number\">3</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> mylist:</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> i*i</span><br><span class=\"line\"></span><br><span class=\"line\">mygenerator = creatAor()  <span class=\"comment\"># 生成一个生成器</span></span><br><span class=\"line\"><span class=\"built_in\">print</span> (mygenerator)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> mygenerator:</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (i)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>&lt;generator object creatAor at 0x7f54ed368f10&gt;<br>0<br>1<br>4</p>\n</blockquote>\n<p>当调用函数时，其返回并不立马执行（显示）——emm 经过十几分钟😰的观察👀说那么玄乎，.其实就是在函数执行过程中，在<code>yield</code>处把后面紧接的东西记录下来，之后最后生成一个可迭代的对象。 所以网上说时生成器也不可厚非，但表达真的是……不过貌似.不仅仅是记录后面紧跟的东西…</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vim </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">creatAor</span>():</span></span><br><span class=\"line\">    mylist = <span class=\"built_in\">range</span>(<span class=\"number\">3</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;so jia nei?&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> mylist:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;pre a hou ga&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> i*i</span><br><span class=\"line\">        <span class=\"built_in\">print</span> (<span class=\"string\">&quot;nihoua&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;2333333&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">mygenerator = creatAor()</span><br><span class=\"line\"><span class=\"built_in\">print</span> (mygenerator)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> mygenerator:</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (i)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>&lt;generator object creatAor at 0x7fe2585a8f10&gt;<br>so jia nei?<br>pre a hou ga<br>0<br>nihoua<br>pre a hou ga<br>1<br>nihoua<br>pre a hou ga<br>4<br>nihoua<br>2333333</p>\n</blockquote>\n<p>所以看这苗头像是重新执行了一次函数，但是将后面紧跟的东西也进行了记录</p>\n<p>应用到协程中，便是：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">consumer</span>():</span></span><br><span class=\"line\">    r = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        n = <span class=\"keyword\">yield</span> r</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> n:</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;[CONSUMER] Consuming %s....&#x27;</span> % n)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">        r = <span class=\"string\">&#x27;200 OK&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">produce</span>(<span class=\"params\">c</span>):</span></span><br><span class=\"line\">    c.<span class=\"built_in\">next</span>()</span><br><span class=\"line\">    n = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> n &lt; <span class=\"number\">5</span>:</span><br><span class=\"line\">        n = n + <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;[PRODUCER] Producing %s...&#x27;</span> % n)</span><br><span class=\"line\">        r = c.send(n)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;[PRODUCER] Consumer return: %s\\n&#x27;</span> % r)</span><br><span class=\"line\">    c.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    c = consumer()</span><br><span class=\"line\">    produce(c)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> c:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(i)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>[PRODUCER] Producing 1…<br>[CONSUMER] Consuming 1….<br>[PRODUCER] Consumer return: 200 OK</p>\n<p>[PRODUCER] Producing 2…<br>[CONSUMER] Consuming 2….<br>[PRODUCER] Consumer return: 200 OK</p>\n<p>[PRODUCER] Producing 3…<br>[CONSUMER] Consuming 3….<br>[PRODUCER] Consumer return: 200 OK<br>…<br>…</p>\n</blockquote>\n<p>那么，是什么道理呢？</p>\n<h4 id=\"send-next-方法的背后今生\"><a href=\"#send-next-方法的背后今生\" class=\"headerlink\" title=\"send next 方法的背后今生\"></a>send next 方法的背后今生</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">my</span>():</span></span><br><span class=\"line\">    value = <span class=\"keyword\">yield</span> <span class=\"number\">1</span></span><br><span class=\"line\">    value = <span class=\"keyword\">yield</span> value</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;finally: &#x27;</span>, value)</span><br><span class=\"line\">ge = my()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(ge.<span class=\"built_in\">next</span>())</span><br><span class=\"line\"><span class=\"built_in\">print</span>(ge.send(<span class=\"number\">2</span>))</span><br><span class=\"line\"><span class=\"built_in\">print</span>(ge.send(<span class=\"number\">3</span>))</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>1<br>2<br>(‘finally: ‘, 3)<br>Traceback (most recent call last):<br>  File “yield_emm3.py”, line 8, in <module><br>    print(ge.send(3))<br>StopIteration</p>\n</blockquote>\n<p>可知：<br> 当<code>next</code>时，<code>yield</code>挂起，但将之后的<code>1</code>返回。而后<code>send</code>激活了之前挂起赋值动作，但此时<code>yield 1</code>被替换为<code>send</code>来的<code>2</code>所以<code>value</code>被置为<code>2</code>. 再第三次调用，完成赋值动作之后，由于只被挂起两次动作，而这里调取了三次，所以报错 停止递归 。若直接递归则得到1 和 None.   </p>\n<p>所以 <code>next</code>与<code>send</code>都是用来激活挂起动作而使用的，但<code>send</code>好在可以与之交互。<br><font color=red>在<code>send``之前需先</code>next<code>否则提示</code>can’t send * to a just-started generator`</font>(⊙﹏⊙)  我上面阐述的挂起，激活，是不是出现了什么偏差…</p>\n<blockquote>\n<p>2018年5月18日16点30分</p>\n</blockquote>\n<h3 id=\"较完善方案：\"><a href=\"#较完善方案：\" class=\"headerlink\" title=\"较完善方案：\"></a>较完善方案：</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> gevent</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f</span>(<span class=\"params\">n</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(n):</span><br><span class=\"line\">       <span class=\"built_in\">print</span> gevent.getcurrent(), i</span><br><span class=\"line\"></span><br><span class=\"line\">g2 = gevent.spawn(f, <span class=\"number\">5</span>)</span><br><span class=\"line\">g3 = gevent.spawn(f, <span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">g1.join()</span><br><span class=\"line\">g3.join()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> gevent</span><br><span class=\"line\"><span class=\"keyword\">from</span> gevent <span class=\"keyword\">import</span> monkey; monkey.patch_all()</span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f</span>(<span class=\"params\">url</span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&#x27;GET: %s&#x27;</span> % url</span><br><span class=\"line\">    resp = urllib2.urlopen(url)</span><br><span class=\"line\">    data = resp.read()</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&#x27;[%d] bytes received from %s\\n&#x27;</span> %(<span class=\"built_in\">len</span>(data), url)</span><br><span class=\"line\">    </span><br><span class=\"line\">gevent.joinall([</span><br><span class=\"line\">    gevent.spawn(f, <span class=\"string\">&#x27;http://www.cnblogs.com/kaituorensheng/&#x27;</span>),</span><br><span class=\"line\">    gevent.spawn(f, <span class=\"string\">&#x27;https://www.python.org/&#x27;</span>),</span><br><span class=\"line\">    gevent.spawn(f, <span class=\"string\">&#x27;https://www.baidu.com&#x27;</span>),</span><br><span class=\"line\">])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> gevent <span class=\"keyword\">import</span> monkey  </span><br><span class=\"line\">monkey.patch_all()  </span><br><span class=\"line\"><span class=\"keyword\">import</span> gevent  </span><br><span class=\"line\"><span class=\"keyword\">from</span> gevent <span class=\"keyword\">import</span> Greenlet  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Task</span>(<span class=\"params\">Greenlet</span>):</span>  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, name</span>):</span>  </span><br><span class=\"line\">        Greenlet.__init__(self)  </span><br><span class=\"line\">        self.name = name      </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_run</span>(<span class=\"params\">self</span>):</span>  </span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Task %s: some task...&quot;</span> % self.name  </span><br><span class=\"line\">  </span><br><span class=\"line\">t1 = Task(<span class=\"string\">&quot;task1&quot;</span>)  </span><br><span class=\"line\">t2 = Task(<span class=\"string\">&quot;task2&quot;</span>)  </span><br><span class=\"line\">t1.start()  </span><br><span class=\"line\">t2.start()  </span><br><span class=\"line\"><span class=\"comment\"># here we are waiting all tasks  </span></span><br><span class=\"line\">gevent.joinall([t1,t2])  </span><br></pre></td></tr></table></figure>\n\n<p>和线程 进程 差不多一个用法，只不过没锁，也不需要锁。</p>\n<hr>\n<hr>\n<hr>\n<h3 id=\"futures\"><a href=\"#futures\" class=\"headerlink\" title=\"futures\"></a>futures</h3><h4 id=\"futures-ThreadPoolExecutor\"><a href=\"#futures-ThreadPoolExecutor\" class=\"headerlink\" title=\"futures.ThreadPoolExecutor\"></a>futures.ThreadPoolExecutor</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">with</span> futures.ThreadPoolExecutor(<span class=\"number\">16</span>) <span class=\"keyword\">as</span> executor:</span><br><span class=\"line\">    executor.<span class=\"built_in\">map</span>(run, urls)</span><br><span class=\"line\">    <span class=\"comment\"># 这里是个爬虫，urls就是一个前方run函数的输入变量</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<hr>\n<hr>\n<h2 id=\"父类中的变量与类中变量\"><a href=\"#父类中的变量与类中变量\" class=\"headerlink\" title=\"父类中的变量与类中变量\"></a>父类中的变量与类中变量</h2><p>在使用<code>self.a</code> 的时候——呃其实是实例化之后a.a时，会只在父类中寻找相关变量，而解决办法居然是将<code>super(A, self).__init__(CtaEngine, setting)</code>移动到变量定义之后，所以谁说这玩意放前面和放后面没有区别的！（欸?😘 这个之后有过说明，不过忘记写在哪儿了，再说一下，就是super….表示父类的初始化动作，__init__因为这个函数名子父相同不会重写，会合并。）</p>\n<h3 id=\"列表的增删添\"><a href=\"#列表的增删添\" class=\"headerlink\" title=\"列表的增删添\"></a>列表的增删添</h3><pre><code>append      # 在最后添加一元素\nextend      # c.extend(a) 将列表a中元素加到c中去。可自加\n+           # 连接两方数组元素 c = a + c        然而创建新对象，耗内存… 所以没啥\n</code></pre>\n<p>用</p>\n<pre><code>del         # 删除对应下标元素 del c[0] 删除c列表第一位元素\npop         # c.pop()   删除最后一位元素\nremove      # 删除指定值元素，有相同值时只会删除第一位\n[ : ]           # 使用切片进行删除\ninsert      # c.insert(0, 1)将1插入到c的最前方，可插列表，插入还是列表\n</code></pre>\n<h3 id=\"一个函数的有效方式只在循环中执行一次-代码日志\"><a href=\"#一个函数的有效方式只在循环中执行一次-代码日志\" class=\"headerlink\" title=\"一个函数的有效方式只在循环中执行一次 - 代码日志\"></a>一个函数的有效方式只在循环中执行一次 - 代码日志</h3><p><a href=\"https://codeday.me/bug/20170901/65228.html\">这</a>是原链接<br>emm 代码反正照着输入是不会有结果的，但感觉挺有戏先保留，以后技术提升再来看</p>\n<h4 id=\"自己的方法\"><a href=\"#自己的方法\" class=\"headerlink\" title=\"自己的方法\"></a>自己的方法</h4><p>自己的方法很简单，很暴力，就是用字典啊—— 当执行过一次之后直接把调用关系扭到别的地方，反正只要是知道结果的判断都可以用字典来代替么。</p>\n<h3 id=\"函数调用函数-and-语法糖\"><a href=\"#函数调用函数-and-语法糖\" class=\"headerlink\" title=\"函数调用函数 and 语法糖 @\"></a>函数调用函数 and 语法糖 @</h3><pre><code>import time\n\ndef timehel(hell):\n    def wrapper():\n            start = time.clock()\n            hell()\n            end =time.clock()\n            print &#39;used:&#39;, end - start\n        return wrapper\n</code></pre>\n<p>@timehel<br>def foo():<br>    print ‘a ho ga’</p>\n<blockquote>\n<p>a ho ga</p>\n</blockquote>\n<blockquote>\n<p>used:  0.000489465229975</p>\n</blockquote>\n<p>其上@timehel 和 foo = timehel(foo)等价（感谢<a href=\"http://www.cnblogs.com/rollenholt/archive/2012/05/02/2479833.html\">被遗忘的博客</a>）… 就是把下方函数当成输入，然后执行通俗来翻译就是： </p>\n<pre><code>@：呼叫timehel   来执行下面这孙子。\n</code></pre>\n<p>这里是官方教你怎么用：<br>    <a href=\"https://wiki.python.org/moin/PythonDecoratorLibrary\">https://wiki.python.org/moin/PythonDecoratorLibrary</a></p>\n<p>其中 函数中定义函数就类似于“父子关系”，也或者叫另辟空间。每次执行父函数时，子函数会有也尽在此时会有被执行的机会，会不会被执行，就看其在其父亲面前的表现了（他爸有没有叫他（有没有调用…））。</p>\n<h3 id=\"变量作用域\"><a href=\"#变量作用域\" class=\"headerlink\" title=\"变量作用域\"></a>变量作用域</h3><p>因为从这个@ 这儿学到的，所以：</p>\n<pre><code>def hel(x):\n    def inner():\n        print x\n    return inner\np1 = hel(1)\np1 = hel(1)\n\np1()\n</code></pre>\n<blockquote>\n<p>1</p>\n</blockquote>\n<pre><code>p2()\n</code></pre>\n<blockquote>\n<p>2</p>\n</blockquote>\n<p>闭包——如果没有inner这东西，下面绝不会输出东西，反而会报错。 直接<code>p1</code>,<code>p2</code>又不会再输出任何东西，只有在定义时会运行一次。 对比于<code>def hel(x):   print x</code>    其中内层原因 先不深究，就脑补成外层需运行时才能去找那些变量，而其中的函数会主动去外围找所需的变量。</p>\n<h4 id=\"应用案例\"><a href=\"#应用案例\" class=\"headerlink\" title=\"应用案例\"></a>应用案例</h4><pre><code>import time\n\ndef coseTime(func):\n    print func\n    def inner(*args, **kwargs):\n        print args, kwargs\n        start = time.clock()\n        func(*args, **kwargs)\n        end = time.clock()\n        print args, kwargs\n\n        print (&#39;Running time: %s Seconds&#39; % (end-start))\n    return inner\n\n@coseTime\ndef hel(x):\n    print (&#39;hello~&#39;)\n\nhel(12)\n</code></pre>\n<blockquote>\n<p>&lt;function hel at 0x02BC5070&gt;<br>(12,) {}<br>hello~<br>(12,) {}<br>Running time: 0.000446197317167 Seconds</p>\n</blockquote>\n<p>用来无视变量来记录 函数运行所需时间的——同时输出其在运行时接入的变量</p>\n<hr>\n<hr>\n<h2 id=\"functools\"><a href=\"#functools\" class=\"headerlink\" title=\"functools\"></a>functools</h2><p>就姑且放这儿吧，毕竟也算是为了有序执行而接触到的</p>\n<h3 id=\"partial\"><a href=\"#partial\" class=\"headerlink\" title=\"partial\"></a>partial</h3><pre><code>import functools\ndef add(a, b):\n    print a, b\n    return a, b\naddplus = functools.partial(add, 3)\naddplus(7)\n</code></pre>\n<blockquote>\n<p>3   7</p>\n</blockquote>\n<pre><code>addplus(add, b = 6)\naddplus(7)\n</code></pre>\n<blockquote>\n<p>7   6</p>\n</blockquote>\n<p>这函数作用是 提前给定函数一个变量值…The functools module is for higher-order functions: functions that act on or return other functions. In general, any callable object can be treated as a function for the purposes of this module. </p>\n<p>我的接触场景是在PyQt 中信号槽循环连接时，用了partial在connect之后<code>.connect(partial(self.start, i))</code>去唯一化相同功能的复用。不过我之前也应该写过类似的，那时我找的解决办法时在连接调用时传参(在Python GUI里面应该会写有吧，假如两三个月前我没脑子短期性失忆的话😭)。emm那个传参是利用Qt机制 不知道孰优孰劣😄 </p>\n<pre><code>运气好，直接翻到：\n    ——那里的应用场景是在鼠标点击按钮捕获点击事件click时传递的参数~\n</code></pre>\n<h1 id=\"lambda\"><a href=\"#lambda\" class=\"headerlink\" title=\"lambda\"></a>lambda</h1><p>使用方法为：</p>\n<pre><code>func = lambda x:x*x\n# :前x表示函数输入，:后为返回值，x*x是这个函数收到输入后所执行的动作\nw = lambda x:func(x)\n</code></pre>\n<hr>\n<hr>\n<hr>\n<hr>\n<hr>\n<h1 id=\"网络编程\"><a href=\"#网络编程\" class=\"headerlink\" title=\"网络编程\"></a>网络编程</h1><h2 id=\"socket\"><a href=\"#socket\" class=\"headerlink\" title=\"socket\"></a>socket</h2><pre><code>import socket\n# 服务端\ns = socket.socket()\nhost = socket.gethostname()\nport = 12345\ns.bind((host, port))\ns.listen(5)\nwhile True:\n    c, addr = s.accept()\n    print &quot;link address is&quot;, addr\n    c.send(&#39;welcome here&#39;)\n    c.close()\n# 客户端\ns = socket.socket()\nhost = socket.gethostname()\nport = 12345\ns.connect((host, port))\n# 此时服务端便弹出 link address is：(&#39;192.168.*.*&#39;, 64*5)\nprint s.recv(1024)\n# 客户端显示welcome here\n</code></pre>\n<h2 id=\"select-与Socket配合的跨平台的异步io模型\"><a href=\"#select-与Socket配合的跨平台的异步io模型\" class=\"headerlink\" title=\"select :   与Socket配合的跨平台的异步io模型\"></a>select :   与Socket配合的跨平台的异步io模型</h2><p>import select<br>import socket<br>import Queue</p>\n<p>#create a socket<br>server = socket.socket(socket.AF_INET,socket.SOCK_STREAM)<br>server.setblocking(False)<br>#set option reused<br>server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR  , 1)</p>\n<p>server_address= (‘192.168.1.102’,10001)<br>server.bind(server_address)</p>\n<p>server.listen(10)</p>\n<p>#sockets from which we except to read<br>inputs = [server]</p>\n<p>#sockets from which we expect to write<br>outputs = []</p>\n<p>#Outgoing message queues (socket:Queue)<br>message_queues = {}</p>\n<p>#A optional parameter for select is TIMEOUT<br>timeout = 20</p>\n<p>while inputs:<br>    print “waiting for next event”<br>    readable , writable , exceptional = select.select(inputs, outputs, inputs, timeout)</p>\n<pre><code># When timeout reached , select return three empty lists\nif not (readable or writable or exceptional) :\n    print &quot;Time out ! &quot;\n    break;    \nfor s in readable :\n    if s is server:\n        # A &quot;readable&quot; socket is ready to accept a connection\n        connection, client_address = s.accept()\n        print &quot;    connection from &quot;, client_address\n        connection.setblocking(0)\n        inputs.append(connection)\n        message_queues[connection] = Queue.Queue()\n    else:\n        data = s.recv(1024)\n        if data :\n            print &quot; received &quot; , data , &quot;from &quot;,s.getpeername()\n            message_queues[s].put(data)\n            # Add output channel for response    \n            if s not in outputs:\n                outputs.append(s)\n        else:\n            #Interpret empty result as closed connection\n            print &quot;  closing&quot;, client_address\n            if s in outputs :\n                outputs.remove(s)\n            inputs.remove(s)\n            s.close()\n            #remove message queue \n            del message_queues[s]\nfor s in writable:\n    try:\n        next_msg = message_queues[s].get_nowait()\n    except Queue.Empty:\n        print &quot; &quot; , s.getpeername() , &#39;queue empty&#39;\n        outputs.remove(s)\n    else:\n        print &quot; sending &quot; , next_msg , &quot; to &quot;, s.getpeername()\n        s.send(next_msg)\n\nfor s in exceptional:\n    print &quot; exception condition on &quot;, s.getpeername()\n    #stop listening for input on the connection\n    inputs.remove(s)\n    if s in outputs:\n        outputs.remove(s)\n    s.close()\n    #Remove message queue\n    del message_queues[s]\n</code></pre>\n<p><a href=\"http://www.cnblogs.com/coser/archive/2012/01/06/2315216.html\">糖拌咸鱼 - 记录学习的点点滴滴~</a></p>\n<p>简单来说一下<code>select</code>的作用：<br>    返回值：三个列表<br>    select方法用来监视文件描述符(当文件描述符条件不满足时，select会阻塞)，当某个文件描述符状态改变后，会返回三个列表<br>        1、当参数1 序列中的fd满足“可读”条件时，则获取发生变化的fd并添加到fd_r_list中<br>        2、当参数2 序列中含有fd时，则将该序列中所有的fd添加到 fd_w_list中<br>        3、当参数3 序列中的fd发生错误时，则将该发生错误的fd添加到 fd_e_list中<br>        4、当超时时间为空，则select会一直阻塞，直到监听的句柄发生变化<br>       当超时时间 ＝ n(正整数)时，那么如果监听的句柄均无任何变化，则select会阻塞n秒，之后返回三个空列表，如果监听的句柄有变化，则直接执行。<br>    <code>epoll</code>很好的改进了<code>select</code> 具体请看(深入理解python中的select模块)[<a href=\"http://blog.csdn.net/songfreeman/article/details/51179213]\">http://blog.csdn.net/songfreeman/article/details/51179213]</a></p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"引用模块\"><a href=\"#引用模块\" class=\"headerlink\" title=\"引用模块\"></a>引用模块</h2><p>action.py中引用model.py为例</p>\n<h3 id=\"同一文件夹下\"><a href=\"#同一文件夹下\" class=\"headerlink\" title=\"同一文件夹下\"></a>同一文件夹下</h3><pre><code>from model import *\n# or\nimport model\n</code></pre>\n<h3 id=\"其下级文件”here”下\"><a href=\"#其下级文件”here”下\" class=\"headerlink\" title=\"其下级文件”here”下\"></a>其下级文件”here”下</h3><pre><code># 在model.py 文件中创建__init__.py空文件\nfrom here import model\n# or\nform here.model import *\n</code></pre>\n<h3 id=\"在上级文件下\"><a href=\"#在上级文件下\" class=\"headerlink\" title=\"在上级文件下\"></a>在上级文件下</h3><pre><code>import sys\nsys.path.append(&quot;..&quot;)\n# 添加上级文件 路径\n# import model\n</code></pre>\n<h3 id=\"在上级文件的下级文件中（也就是在隔壁“wang”文件中）\"><a href=\"#在上级文件的下级文件中（也就是在隔壁“wang”文件中）\" class=\"headerlink\" title=\"在上级文件的下级文件中（也就是在隔壁“wang”文件中）\"></a>在上级文件的下级文件中（也就是在隔壁“wang”文件中）</h3><pre><code># 需要创建__init__.py空文件\n# 添加上级文件路径\nimport wang.model\n</code></pre>\n<h2 id=\"解决编码问题\"><a href=\"#解决编码问题\" class=\"headerlink\" title=\"解决编码问题\"></a>解决编码问题</h2><pre><code>import sys\nreload(sys) \nsys.setdefaultencoding(&#39;utf8&#39;)\n# 这段直接塞它嘴里\n</code></pre>\n<h3 id=\"输出提示打印乱码\"><a href=\"#输出提示打印乱码\" class=\"headerlink\" title=\"输出提示打印乱码\"></a>输出提示打印乱码</h3><pre><code>#coding: utf-8  \nn=raw_input(unicode(&#39;请输入文字&#39;,&#39;utf-8&#39;).encode(&#39;gbk&#39;))  \nprint n  \n</code></pre>\n<h3 id=\"内存异常占用\"><a href=\"#内存异常占用\" class=\"headerlink\" title=\"内存异常占用\"></a>内存异常占用</h3><pre><code>import sys\nv = 1\nsys.getsizeof(v)\n# 可以读出 此变量emm 或者说 对象的内存占用大小\n</code></pre>\n<h2 id=\"异常\"><a href=\"#异常\" class=\"headerlink\" title=\"异常\"></a>异常</h2><h3 id=\"plan1-：\"><a href=\"#plan1-：\" class=\"headerlink\" title=\"plan1 ：\"></a>plan1 ：</h3><pre><code>try:\n#正常的操作\nexcept:\n#发生异常，执行这块代码\nelse:\n#如果没有异常执行这块代码(在执行完try下函数没有异常发生)\n</code></pre>\n<h3 id=\"列表的坑\"><a href=\"#列表的坑\" class=\"headerlink\" title=\"列表的坑\"></a>列表的坑</h3><p>当a 为一个列表<br>    a = [1, 2, 3]<br>    b = a<br>    c = a<br>    d = a<br>    b.append(4)</p>\n<p>这时，abcd四个列表都变成[1, 2, 3, 4]，emm…  所以直接以后不要把一个列表赋值给两个变量…除非不涉及修改，慎重慎重。。不过python中列表有<code>copy</code>一说，不过还没试过</p>\n<h3 id=\"staticmethod\"><a href=\"#staticmethod\" class=\"headerlink\" title=\"@staticmethod\"></a>@staticmethod</h3><pre><code>定义类中的的这个方法为静态方法，同理的还有`@classmethod`类方法。\n</code></pre>\n<h3 id=\"常见异常\"><a href=\"#常见异常\" class=\"headerlink\" title=\"常见异常\"></a>常见异常</h3><pre><code>1.AssertionError：当assert断言条件为假的时候抛出的异常\n2.AttributeError：当访问的对象属性不存在的时候抛出的异常\n3.IndexError：超出对象索引的范围时抛出的异常\n4.KeyError：在字典中查找一个不存在的key抛出的异常\n5.NameError：访问一个不存在的变量时抛出的异常\n6.OSError：操作系统产生的异常\n7.SyntaxError：语法错误时会抛出此异常\n8.TypeError：类型错误，通常是不通类型之间的操作会出现此异常\n9.ZeroDivisionError：进行数学运算时除数为0时会出现此异常··\n</code></pre>\n<hr>\n<hr>\n<hr>\n<h1 id=\"事件模式中，事件篡改事故\"><a href=\"#事件模式中，事件篡改事故\" class=\"headerlink\" title=\"事件模式中，事件篡改事故\"></a>事件模式中，事件篡改事故</h1><p>在循环创建事件时，将<code>event</code> <code>put</code>到队列中，此时，被处理一半，因为不在一个线程所以下一个循环来临就将<code>event</code>的内容进行了修改。 杜绝此方法除了添加锁，只好将事件<code>copy</code>之后再传入时间引擎。如此便可暂防止事件处理一半被修改的事情发生。 </p>\n<hr>\n<hr>\n<hr>\n<h1 id=\"代码块注释\"><a href=\"#代码块注释\" class=\"headerlink\" title=\"代码块注释\"></a>代码块注释</h1><p><a href=\"https://www.jetbrains.com/help/pycharm/surrounding-blocks-of-code-with-language-constructs.html\">Surrounding Blocks of Code with Language Constructs</a></p>\n<h3 id=\"VisualStudio模式：\"><a href=\"#VisualStudio模式：\" class=\"headerlink\" title=\"VisualStudio模式：\"></a>VisualStudio模式：</h3><pre><code>#region Description(说明)\nprint &quot;code here&quot;\n#endregion\n</code></pre>\n<h3 id=\"NetBeans模式：\"><a href=\"#NetBeans模式：\" class=\"headerlink\" title=\"NetBeans模式：\"></a>NetBeans模式：</h3><pre><code>// &lt;editor-fold desc=&quot;Description&quot;&gt;\ncode here\n// &lt;/editor-fold&gt;\n</code></pre>\n<h1 id=\"类\"><a href=\"#类\" class=\"headerlink\" title=\"类\"></a>类</h1><pre><code>以后详谈，本着一切皆对象的原则，所以对于类的了解决定了Python的认知，先记一个\ndef __init__(self):\n        super(Proformance, self).__init__()\n#这个super表示了继承类和被继承类的 __init__调用时序，其它重名函数是覆盖，这个……\n</code></pre>\n<h2 id=\"数据类\"><a href=\"#数据类\" class=\"headerlink\" title=\"数据类\"></a>数据类</h2><p>用一个类来表示一个数据类型（这几天想着这个表示不同数据类型的组合方法恰类似于C中的结构体，然后<code>Python</code>中的数组元素存储各种东西什么类啊、数组套数组啊，字典存储啊，恰巧与C中的指针指向指针……emm ）如：</p>\n<pre><code>class A(object):\n    def __init__(self):\n    self.a = &#39;a&#39;\n    self.b = &#39;b&#39;\nA().__dict__\n</code></pre>\n<blockquote>\n<p>{‘a’: ‘a’, ‘b’: ‘b’}</p>\n</blockquote>\n<p>但是<code>A().__dict__[&#39;a&#39;] = &#39;It is a&#39;</code> 虽然不会报错，但之后再次调用<code>A().__dict__</code>显示结果还是一样，但：</p>\n<pre><code>a = A()\na.__dict__[&#39;a&#39;] = &#39;It is a&#39;\na.__dict__\n</code></pre>\n<blockquote>\n<p>{‘a’: ‘It is a’, ‘b’: ‘b’} </p>\n</blockquote>\n<p>这样我就用过一次，在不确定数据类会有几个元素甚至不知道会是什么名称的时候来创建的，毕竟：(这样的方式可以随便添加嘛)</p>\n<pre><code>a.__dict__[&#39;w&#39;] = &#39;It is www&#39;\na.__dict__\n</code></pre>\n<blockquote>\n<p>{‘a’: ‘It is a’, ‘b’: ‘b’, ‘w’: ‘It is www’</p>\n</blockquote>\n<h3 id=\"若出现docx模块pyInstaller打包问题\"><a href=\"#若出现docx模块pyInstaller打包问题\" class=\"headerlink\" title=\"若出现docx模块pyInstaller打包问题\"></a>若出现docx模块pyInstaller打包问题</h3><p>大概的解决步骤是这样的：<br>找到python-docx包安装路径下的一个名为default.docx的文件，我是通过everything这个强大的搜索工具全局搜索找到这个文件的，它在我本地所在的路径是：E:\\code\\env.env\\Lib\\site-packages\\docx\\templates<br>把找到的default.docx文件复制到我的py脚本文件所在的目录下。<br>修改脚本中创建Document对象的方式：<br>从原来的创建方式：<br>document = Document()<br>修改为：<br>import os<br>document = Document(docx=os.path.join(os.getcwd(), ‘default.docx’))<br>再次用pyinstaller工具打包脚本为exe文件<br>把default.docx文件复制到与生成的exe文件相同的路径下，再次运行exe文件，顺利运行通过，没有再出现之前的报错，问题得到解决。<br>作者：(m2fox)[<a href=\"https://www.jianshu.com/p/94ac13f6633e]\">https://www.jianshu.com/p/94ac13f6633e]</a><br>來源：简书</p>\n<h4 id=\"拼接List字符串\"><a href=\"#拼接List字符串\" class=\"headerlink\" title=\"拼接List字符串\"></a>拼接List字符串</h4><p>将list中的元素拼接起来，并使用<code>,</code>隔开可这么来：</p>\n<pre><code>import itertools \nlist = [&#39;123&#39;, &#39;567&#39;]\nxlist = &quot;,&quot;.join(list)\nor\nylist = &quot;,&quot;.join(*list)\ns = .join(itertools.chain(kwargs.keys()))\n</code></pre>\n<p>区别在于x为一个元素添加一个<code>,</code>，y为把列表中的素也拆分之后再添加</p>\n<h3 id=\"SimpleHTTPServer\"><a href=\"#SimpleHTTPServer\" class=\"headerlink\" title=\"SimpleHTTPServer\"></a>SimpleHTTPServer</h3><p>小型的局域网嘛☺，很常用，不过在Python3中有了变化…</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ Python2</span><br><span class=\"line\">python -m SimpleHTTPServer </span><br><span class=\"line\">---</span><br><span class=\"line\">$ Python3</span><br><span class=\"line\">python -m http.server</span><br></pre></td></tr></table></figure>\n<p><font color=#126590>顺带一提</font>：<code>-m</code>是可以在外执行内库的操作，🦑大概是这个意思吧—— 用<code>pdb</code>的时候也是这么用的…</p>\n<h3 id=\"老夫的月份生成\"><a href=\"#老夫的月份生成\" class=\"headerlink\" title=\"老夫的月份生成\"></a>老夫的月份生成</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> copy</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">splitMonth</span>(<span class=\"params\">start, end</span>):</span></span><br><span class=\"line\">    start = str2Date(start)</span><br><span class=\"line\">    end = str2Date(end)</span><br><span class=\"line\">    _delta = end - start</span><br><span class=\"line\">    datelist = []</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _delta.days &gt; <span class=\"number\">10</span>:</span><br><span class=\"line\">        <span class=\"comment\"># 拆分</span></span><br><span class=\"line\">        <span class=\"comment\"># 按*月*拆分（10日间隔）</span></span><br><span class=\"line\">        n = <span class=\"number\">0</span></span><br><span class=\"line\">        _start = copy.copy(start)</span><br><span class=\"line\">        <span class=\"keyword\">while</span> _delta.days &gt; <span class=\"number\">0</span>:</span><br><span class=\"line\">            n += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> _start.day &lt; <span class=\"number\">10</span>:</span><br><span class=\"line\">                _end = datetime.date(_start.year, _start.month, <span class=\"number\">10</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                    _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(end)))</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">elif</span> _start.day &lt; <span class=\"number\">20</span>:</span><br><span class=\"line\">                _end = datetime.date(_start.year, _start.month, <span class=\"number\">20</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                    _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(end)))</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(<span class=\"number\">15</span>)</span><br><span class=\"line\">                _end = datetime.date(_end.year, _end.month, <span class=\"number\">1</span>) - datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                    _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    datelist.append(date2str(_start), date2str(end))</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">            _delta = end - _start + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> datelist</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [(date2str(start), date2str(end))]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">splitMouthBySE_N</span>(<span class=\"params\">start, end, n</span>):</span></span><br><span class=\"line\">    start = str2Date(start)</span><br><span class=\"line\">    end = str2Date(end)</span><br><span class=\"line\">    _delta = end - start</span><br><span class=\"line\">    datelist = []</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _delta.days &gt; n:</span><br><span class=\"line\">        <span class=\"comment\"># 拆分</span></span><br><span class=\"line\">        <span class=\"comment\"># 按*月*拆分（10日间隔）</span></span><br><span class=\"line\">        _start = copy.copy(start)</span><br><span class=\"line\">        <span class=\"keyword\">while</span> _delta.days &gt; <span class=\"number\">0</span>:</span><br><span class=\"line\">            _loop = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> _n <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">int</span>(<span class=\"number\">30</span>/n)):</span><br><span class=\"line\">                _loop = _loop + n</span><br><span class=\"line\">                <span class=\"keyword\">if</span> _start.day &lt; _loop:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> _start.month == <span class=\"number\">2</span> <span class=\"keyword\">and</span> _loop &gt; <span class=\"number\">28</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> _start.year%<span class=\"number\">4</span>:</span><br><span class=\"line\">                            _end = datetime.date(_start.year, _start.month, <span class=\"number\">28</span>)</span><br><span class=\"line\">                        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                            _end = datetime.date(_start.year, _start.month, <span class=\"number\">29</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                        _end = datetime.date(_start.year, _start.month, _loop)</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                        datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                        _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                        datelist.append((date2str(_start), date2str(end)))</span><br><span class=\"line\">                        _delta = datetime.timedelta(<span class=\"number\">0</span>)</span><br><span class=\"line\">                        <span class=\"keyword\">break</span></span><br><span class=\"line\">                    _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(<span class=\"number\">15</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                _end = datetime.date(_end.year, _end.month, <span class=\"number\">1</span>) - datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> _start &gt; _end:</span><br><span class=\"line\">                        _delta = end - _start + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                        datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                    _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(end)))</span><br><span class=\"line\">                    _delta = datetime.timedelta(<span class=\"number\">0</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                _delta = end - _start + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> datelist</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [(date2str(start), date2str(end))]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">gropdate</span>(<span class=\"params\">datelist, itemNum=<span class=\"number\">0</span>, gropNum=<span class=\"number\">0</span></span>):</span></span><br><span class=\"line\">    <span class=\"comment\">#将传入datelist[(str(start1), str(end1)), (str(start2), str(end2))...] -&gt; 传入为月碎片</span></span><br><span class=\"line\">    <span class=\"comment\"># 打按月对月碎片进行打组。 </span></span><br><span class=\"line\">    <span class=\"comment\"># 传入参数 itemNum: 一个组含几个月, gropNum: 将这些碎片打为几组</span></span><br><span class=\"line\">    _dic = collections.OrderedDict()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> datelist:</span><br><span class=\"line\">        <span class=\"comment\"># 按月分组</span></span><br><span class=\"line\">        keyName = i[<span class=\"number\">0</span>].split(<span class=\"string\">&#x27;-&#x27;</span>)[<span class=\"number\">1</span>]</span><br><span class=\"line\">        <span class=\"keyword\">if</span> keyName <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> _dic:</span><br><span class=\"line\">            _dic[keyName] = []</span><br><span class=\"line\">        _dic[keyName].append(i)</span><br><span class=\"line\">    monthList = []</span><br><span class=\"line\">    groups = []</span><br><span class=\"line\">    groupListTemp = []</span><br><span class=\"line\">    groupList = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> _dic.keys():</span><br><span class=\"line\">        <span class=\"comment\"># 得到月份列表</span></span><br><span class=\"line\">        monthList.append(i) <span class=\"comment\">#[1,2,3...,7,8,9]</span></span><br><span class=\"line\">    monthNum = <span class=\"built_in\">len</span>(monthList)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> gropNum:</span><br><span class=\"line\">        itemNum = <span class=\"built_in\">round</span>(<span class=\"built_in\">float</span>(monthNum)/gropNum)</span><br><span class=\"line\">        itemNum = <span class=\"built_in\">int</span>(itemNum)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> itemNum:</span><br><span class=\"line\">        slipNum = <span class=\"built_in\">int</span>(monthNum/itemNum)</span><br><span class=\"line\">        start = <span class=\"number\">0</span></span><br><span class=\"line\">        end = <span class=\"built_in\">int</span>(itemNum)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> mon <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(slipNum):</span><br><span class=\"line\">            groups.append(monthList[<span class=\"built_in\">int</span>(start):<span class=\"built_in\">int</span>(end)])</span><br><span class=\"line\">            start = copy.copy(end)</span><br><span class=\"line\">            end = end + itemNum</span><br><span class=\"line\">        <span class=\"keyword\">if</span> monthNum%itemNum:</span><br><span class=\"line\">            groups.append(monthList[start:monthNum])    <span class=\"comment\"># 非整除补足</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> groups:</span><br><span class=\"line\">            <span class=\"keyword\">for</span> ii <span class=\"keyword\">in</span> i:</span><br><span class=\"line\">                groupListTemp.append(_dic[ii])</span><br><span class=\"line\">            groupList.append(groupListTemp)</span><br><span class=\"line\">            groupListTemp = []</span><br><span class=\"line\">        <span class=\"keyword\">return</span> groupList</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">None</span></span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"comment\"># region 日期`date`格式与`str`转换处理</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">date2str</span>(<span class=\"params\">_date</span>):</span></span><br><span class=\"line\">    <span class=\"comment\"># datetime.date 转换为 str    (有为了适配原程序的补零操作…)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> _date.month &lt; <span class=\"number\">10</span>:</span><br><span class=\"line\">        strDate = <span class=\"built_in\">str</span>(_date.year) + <span class=\"string\">&#x27;-&#x27;</span> + <span class=\"string\">&#x27;0&#x27;</span>+<span class=\"built_in\">str</span>(_date.month) + <span class=\"string\">&#x27;-&#x27;</span> + <span class=\"built_in\">str</span>(_date.day)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        strDate = <span class=\"built_in\">str</span>(_date.year) + <span class=\"string\">&#x27;-&#x27;</span> + <span class=\"built_in\">str</span>(_date.month) + <span class=\"string\">&#x27;-&#x27;</span> + <span class=\"built_in\">str</span>(_date.day)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _date.day &lt; <span class=\"number\">10</span>:</span><br><span class=\"line\">        strDate = strDate[:-<span class=\"number\">1</span>] + <span class=\"string\">&#x27;0&#x27;</span>+<span class=\"built_in\">str</span>(_date.day)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> strDate</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">str2Date</span>(<span class=\"params\">_str</span>):</span></span><br><span class=\"line\">    <span class=\"comment\"># str 转换为 datetime.date</span></span><br><span class=\"line\">    y, m, d = _<span class=\"built_in\">str</span>.split(<span class=\"string\">&#x27;-&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> datetime.date(<span class=\"built_in\">int</span>(y), <span class=\"built_in\">int</span>(m), <span class=\"built_in\">int</span>(d))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># endregion </span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(splitMouthBySE_N(<span class=\"string\">&#x27;2016-01-02&#x27;</span>, <span class=\"string\">&#x27;2018-03-01&#x27;</span>, <span class=\"number\">5</span>))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Python3-6之后的奇淫技巧\"><a href=\"#Python3-6之后的奇淫技巧\" class=\"headerlink\" title=\"Python3.6之后的奇淫技巧\"></a>Python3.6之后的奇淫技巧</h2><ol>\n<li>可使用下划线将长数字隔开，便于阅读  <code>10000</code>=<code>10_000</code></li>\n<li>字符串操作除了 <code>%</code>和<code>format</code>之外还有<code>f</code>操作<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ %</span><br><span class=\"line\">s = <span class=\"string\">&quot;%s is %d&quot;</span> % (<span class=\"string\">&#x27;two&#x27;</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">$ <span class=\"built_in\">format</span></span><br><span class=\"line\">s = <span class=\"string\">&quot;&#123;fruit&#125; is &#123;color&#125;&quot;</span>.<span class=\"built_in\">format</span>(fruit=<span class=\"string\">&#x27;apple&#x27;</span>, color=<span class=\"string\">&#x27;red&#x27;</span>)</span><br><span class=\"line\">$ f</span><br><span class=\"line\">name = <span class=\"string\">&#x27;Bob&#x27;</span></span><br><span class=\"line\"><span class=\"string\">f&#x27;Hello, <span class=\"subst\">&#123;name&#125;</span>!&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">### 甚至</span></span><br><span class=\"line\">a = <span class=\"number\">5</span></span><br><span class=\"line\">b = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"string\">f&#x27;Five plus ten is <span class=\"subst\">&#123;a + b&#125;</span> and not <span class=\"subst\">&#123;<span class=\"number\">2</span> * (a + b)&#125;</span>.&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#### 精度</span></span><br><span class=\"line\">PI = <span class=\"number\">3.141592653</span></span><br><span class=\"line\"><span class=\"string\">f&quot;Pi is <span class=\"subst\">&#123;PI:<span class=\"number\">.2</span>f&#125;</span>&quot;</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"string\">&#x27;Pi is 3.14&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>error = <span class=\"number\">50159747054</span></span><br><span class=\"line\"><span class=\"comment\">##### 以16进制格式化</span></span><br><span class=\"line\">f&#x27;Programmer Error: &#123;error:#x&#125;&#x27;</span><br><span class=\"line\">&gt;&gt;&gt;<span class=\"string\">&#x27;Programmer Error: 0xbadc0ffee&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##### 以二进制格式化</span></span><br><span class=\"line\">f&#x27;Programmer Error: &#123;error:#b&#125;&#x27;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"string\">&#x27;Programmer Error: 0b101110101101110000001111111111101110&#x27;</span></span><br></pre></td></tr></table></figure></li>\n<li>变量注释 <code>def my_add(a: int, b: int) -&gt; int:   \\n  return 0</code> 仅仅用来注释，其实传参出参<font color=#9aaa00>并不受控制…</font></li>\n</ol>\n<hr>\n<h1 id=\"魔法方法\"><a href=\"#魔法方法\" class=\"headerlink\" title=\"魔法方法\"></a>魔法方法</h1><p>假设定义类  <code>EmmNe</code>, <code>EmmNe</code>拥有<code>self.aaa</code>与<code>self.aaadict</code>、列表<code>self.aaalist</code> 且<code>__init__</code>允许两个传参</p>\n<p><font color=#feaaaa>__len__</font>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">len</span>(self.aaa)</span><br><span class=\"line\"><span class=\"comment\"># 则在外`len`此实例化对象时，会返回这个结果</span></span><br></pre></td></tr></table></figure>\n<p><font color=#feaaaa>__getitem__</font>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span>(<span class=\"params\">self, key</span>)</span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"title\">return</span> <span class=\"title\">self</span>.<span class=\"title\">aaadict</span>[<span class=\"title\">key</span>]</span></span><br><span class=\"line\">en = EmmNe(1, 2)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(en[`])</span><br><span class=\"line\">&gt; <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"comment\">#就像上面那样。 不过还有下面的用法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span>(<span class=\"params\">self, index</span>):</span></span><br><span class=\"line\">    retrun self.aaalist[index]</span><br><span class=\"line\">w = Emm(<span class=\"number\">1</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> w:</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (i)</span><br><span class=\"line\"><span class=\"comment\"># 则输出列表中内容</span></span><br></pre></td></tr></table></figure>\n<p><font color=#feaaaa>__setitem__</font>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__setitem__</span>(<span class=\"params\">self, key, value</span>)</span></span><br><span class=\"line\">    return self.aaadict[key] = value</span><br><span class=\"line\"><span class=\"comment\"># 拥有此方法，则在外可将实例对象当作字典操作:</span></span><br><span class=\"line\">enp[<span class=\"string\">&#x27;a&#x27;</span>] = <span class=\"string\">&#x27;asd&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 就像这样</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"collectionss\"><a href=\"#collectionss\" class=\"headerlink\" title=\"collectionss\"></a>collectionss</h3><p>总结一句话： <code>collections</code>出品， 必属精品。<br>马上能想到的 有序字典，还有那啥都是出自此个模块之下。<br>今天用的 计数也是出自此处      反正之后 这个里面能实现的功能，那就放弃手写吧————😓<br>from collections import Counter</p>\n<h3 id=\"Function-Annotations\"><a href=\"#Function-Annotations\" class=\"headerlink\" title=\"Function Annotations\"></a>Function Annotations</h3><p>Annotations are stored in the <strong>annotations</strong> attribute of the function as a dictionary and have no effect on any other part of the function. Parameter annotations are defined by a colon after the parameter name, followed by an expression evaluating to the value of the annotation. Return annotations are defined by a literal -&gt;, followed by an expression, between the parameter list and the colon denoting the end of the def statement. The following example has a positional argument, a keyword argument, and the return value annotated:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f</span>(<span class=\"params\">ham: <span class=\"built_in\">str</span>, eggs: <span class=\"built_in\">str</span> = <span class=\"string\">&#x27;eggs&#x27;</span></span>) -&gt; <span class=\"built_in\">str</span>:</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Annotations:&quot;</span>, f.__annotations__)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Arguments:&quot;</span>, ham, eggs)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ham + <span class=\"string\">&#x27; and &#x27;</span> + eggs</span><br><span class=\"line\"></span><br><span class=\"line\">f(<span class=\"string\">&#x27;spam&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt; Annotations: &#123;&#x27;ham&#x27;: &lt;class &#x27;str&#x27;&gt;, &#x27;return&#x27;: &lt;class &#x27;str&#x27;&gt;, &#x27;eggs&#x27;: &lt;class &#x27;str&#x27;&gt;&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Arguments: spam eggs</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"string\">&#x27;spam and eggs&#x27;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Logger\"><a href=\"#Logger\" class=\"headerlink\" title=\"Logger\"></a>Logger</h3><p>模块名： logging<br>上手容易，功能丰富，性能肯定也好过自己✍<br>另外，懒———</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import sys</span><br><span class=\"line\">import logging</span><br><span class=\"line\">import logging_error</span><br><span class=\"line\"></span><br><span class=\"line\">logger1 &#x3D; logging.getLogger(&#39;loger1&#39;)</span><br><span class=\"line\">logger2 &#x3D; logging.getLogger(&#39;loger2&#39;)</span><br><span class=\"line\">#实例化两个logger,默认名称为：&#96;root&#96;</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\">我居然以为root是程序执行处的名字，以为放到函数中就会显示函数名。emm</span><br><span class=\"line\">所以才有了下面多层函数嵌套…，以及调用外部&#96;import&#96;</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">formatter &#x3D; logging.Formatter(&#39;[%(name)s]%(asctime)s %(levelname)-8s: %(message)s&#39;)</span><br><span class=\"line\">#定义日志格式：</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\">%(name)s Logger的名字</span><br><span class=\"line\">%(levelno)s 数字形式的日志级别</span><br><span class=\"line\">%(levelname)s 文本形式的日志级别</span><br><span class=\"line\">%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</span><br><span class=\"line\">%(filename)s 调用日志输出函数的模块的文件名</span><br><span class=\"line\">%(module)s 调用日志输出函数的模块名|</span><br><span class=\"line\">%(funcName)s 调用日志输出函数的函数名|</span><br><span class=\"line\">%(lineno)d 调用日志输出函数的语句所在的代码行</span><br><span class=\"line\">%(created)f 当前时间，用UNIX标准的表示时间的浮点数表示|</span><br><span class=\"line\">%(relativeCreated)d 输出日志信息时的，自Logger创建以来的毫秒数|</span><br><span class=\"line\">%(asctime)s 字符串形式的当前时间。默认格式是“2003-07-08 16:49:45,896”。逗号后面的是毫秒</span><br><span class=\"line\">%(thread)d 线程ID。可能没有</span><br><span class=\"line\">%(threadName)s 线程名。可能没有</span><br><span class=\"line\">%(process)d 进程ID。可能没有</span><br><span class=\"line\">%(message)s 用户输出的消息</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">fileHandler &#x3D; logging.FileHandler(&#39;loger.log&#39;)</span><br><span class=\"line\">fileHandler.setFormatter(formatter)</span><br><span class=\"line\"></span><br><span class=\"line\">consoleHandler &#x3D; logging.StreamHandler(sys.stdout)</span><br><span class=\"line\">consoleHandler.formatter &#x3D; formatter</span><br><span class=\"line\">#配置文件、终端日志处理器。可以使用不同格式，来区分处理</span><br><span class=\"line\"></span><br><span class=\"line\">logger1.addHandler(fileHandler)</span><br><span class=\"line\">logger2.addHandler(fileHandler)</span><br><span class=\"line\">logger1.addHandler(consoleHandler)</span><br><span class=\"line\">logger2.addHandler(consoleHandler)</span><br><span class=\"line\">#为日志机添加处理器</span><br><span class=\"line\"></span><br><span class=\"line\">logger1.setLevel(logging.INFO)</span><br><span class=\"line\">#logger2.setLevel()</span><br><span class=\"line\">#设置各日志机打印等级</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">logger1.debug(&#39;debugO&#39;)</span><br><span class=\"line\">logger1.info(&#39;info&#39;)</span><br><span class=\"line\">logger2.info(&#39;info&#39;)</span><br><span class=\"line\">logger1.error(&#39;error&#39;)</span><br><span class=\"line\">def warn_msg():</span><br><span class=\"line\">    logger1.warn(&#39;warn msg&#39;)</span><br><span class=\"line\">    warn_msg2()</span><br><span class=\"line\">def warn_msg2():</span><br><span class=\"line\">    logger2.warn(u&#39;warn 信息&#39;)</span><br><span class=\"line\">    logging_error.error_demo()</span><br><span class=\"line\">warn_msg()</span><br></pre></td></tr></table></figure>\n<p>当然，logger还有别的调用方法，不过这应该就够了，<br>具体要怎么实现，就去找官方文档了。<br>预防针： 多种配置方法、日志重复输出:<a href=\"http://python.jobbole.com/86887/\">见此</a></p>\n<h2 id=\"lambda函数\"><a href=\"#lambda函数\" class=\"headerlink\" title=\"lambda函数\"></a>lambda函数</h2><h3 id=\"排序\"><a href=\"#排序\" class=\"headerlink\" title=\"排序\"></a>排序</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">aaa</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>[&#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">1</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">3</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">2</span>&#125;]</span><br><span class=\"line\"><span class=\"built_in\">sorted</span>(aaa, key = <span class=\"keyword\">lambda</span> x: x[<span class=\"string\">&quot;time&quot;</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>[&#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">1</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">2</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">3</span>&#125;]</span><br><span class=\"line\"><span class=\"built_in\">sorted</span>(aaa, key = <span class=\"keyword\">lambda</span> x: x[<span class=\"string\">&quot;time&quot;</span>], reverse=<span class=\"literal\">True</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>[&#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">3</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">2</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">1</span>&#125;]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Mock\"><a href=\"#Mock\" class=\"headerlink\" title=\"Mock\"></a>Mock</h2><p>使用: unittest</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mock.patch.<span class=\"built_in\">object</span>: Mock <span class=\"comment\"># 一个类, 后接方法</span></span><br><span class=\"line\">mock.patch: Mock <span class=\"comment\"># 一个方法, 按路径</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@mock.patch(<span class=\"params\"><span class=\"string\">&quot;databases.wx_service.get_user_base_info&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"meta\">@mock.patch.object(<span class=\"params\">wx_service.WeChat_OAP, <span class=\"string\">&quot;send_template_msg&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test_create_weawarning</span>(<span class=\"params\">self, mock_send_template_msg, mock_get_user_base_info</span>):</span></span><br><span class=\"line\">    <span class=\"comment\"># 装饰器生效从内到外, 传入参数顺序, 从左到右</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\">    mock_send_template_msg.return_value = <span class=\"string\">&#x27;&#x27;</span>/&#123;&#125;/[]/() 皆可  设定mock返回值</span><br><span class=\"line\">    mock_get_user_base_info.side_effect = [<span class=\"string\">&#x27;&#x27;</span>/&#123;&#125;/[]/(), <span class=\"string\">&#x27;&#x27;</span>/&#123;&#125;/[]/()] 设定每次调用mock函数依次返回返回值</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<p>author:Ian</p>\n<p><img src=\"https://www.python.org/static/img/python-logo@2x.png\" alt=\"python\"></p>\n<h2 id=\"PiP-Not-Found-Issue\"><a href=\"#PiP-Not-Found-Issue\" class=\"headerlink\" title=\"PiP Not Found Issue\"></a>PiP Not Found Issue</h2><p>使用<code>pip</code>安装某包时， 提示让更新， 按提示操作更新没效果没反应再用就提示<code>ModuleNotFoundError: No module named &#39;pip&#39;</code> (ˉ▽ˉ；)…</p>\n<h2 id=\"ModuleNotFoundError-No-module-named-‘pip’\"><a href=\"#ModuleNotFoundError-No-module-named-‘pip’\" class=\"headerlink\" title=\"ModuleNotFoundError: No module named ‘pip’\"></a>ModuleNotFoundError: No module named ‘pip’</h2><h3 id=\"升级PiP时出现问题可由下方命令修复\"><a href=\"#升级PiP时出现问题可由下方命令修复\" class=\"headerlink\" title=\"升级PiP时出现问题可由下方命令修复\"></a>升级<code>PiP</code>时出现问题可由下方命令修复</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python -m ensurepip</span><br><span class=\"line\">python -m pip install --upgrade pip</span><br></pre></td></tr></table></figure>\n<h2 id=\"SSL校验\"><a href=\"#SSL校验\" class=\"headerlink\" title=\"SSL校验\"></a>SSL校验</h2><p>安装EasyOCR时,<br><code>reader = easyocr.Reader([&#39;ch_sim&#39;,&#39;en&#39;])</code><br>下载到接近90,结果报错了…. 估计是SSL问题加入以下两条,不知如何.</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> ssl</span><br><span class=\"line\">ssl._create_default_https_context = ssl._create_unverified_context</span><br></pre></td></tr></table></figure>\n\n<p>from http.client<br><code>To revert to the previous, unverified, behavior ssl._create_unverified_context() can be passed to the context parameter.</code></p>\n<h3 id=\"使用国内镜像下载Python\"><a href=\"#使用国内镜像下载Python\" class=\"headerlink\" title=\"使用国内镜像下载Python\"></a>使用国内镜像下载Python</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpy等包名)</span><br><span class=\"line\"><span class=\"meta\">   #</span><span class=\"bash\"> 一键更新pip 包资源(利用管道grep传输查询到的需要更新包名，传输到install命令)</span></span><br><span class=\"line\">   pip3 freeze --local | grep -v &#x27;^\\-e&#x27; | cut -d = -f 1  | xargs -n1 pip3 install -U</span><br><span class=\"line\"><span class=\"meta\">   #</span><span class=\"bash\"> 权限不够的话就在`pip3 install` 之前加`sudo`反正我不习惯用`root`</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"声明参数类型\"><a href=\"#声明参数类型\" class=\"headerlink\" title=\"声明参数类型\"></a>声明参数类型</h3><p>python3 在定义函数的时候可以声明函数类型啦：虽然不做限制，但作为<code>label</code>还是蛮好的。</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> io</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">add</span>(<span class=\"params\">x:<span class=\"built_in\">int</span>, y:<span class=\"built_in\">int</span></span>) -&gt; <span class=\"built_in\">int</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">write</span>(<span class=\"params\">f: io.BytesIO, data: <span class=\"built_in\">bytes</span></span>) -&gt; <span class=\"built_in\">bool</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        f.write(data)</span><br><span class=\"line\">    <span class=\"keyword\">except</span> IOError:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br></pre></td></tr></table></figure>\n<p>终于不会之后写的忘了，要调用函数还得看半天这个函数应该怎么用…</p>\n<h3 id=\"时间处理\"><a href=\"#时间处理\" class=\"headerlink\" title=\"时间处理\"></a>时间处理</h3><p>以下可以做周、月的加减处理<br>relativedelta examples<br>Let’s begin our trip:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from datetime import *; from dateutil.relativedelta import *</span><br><span class=\"line\">import calendar</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"Store-some-values\"><a href=\"#Store-some-values\" class=\"headerlink\" title=\"Store some values:\"></a>Store some values:</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NOW &#x3D; datetime.now()</span><br><span class=\"line\">TODAY &#x3D; date.today()</span><br><span class=\"line\">NOW</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>datetime.datetime(2003, 9, 17, 20, 54, 47, 282310)</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TODAY</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>datetime.date(2003, 9, 17)</p>\n</blockquote>\n<h4 id=\"Next-month\"><a href=\"#Next-month\" class=\"headerlink\" title=\"Next month\"></a>Next month</h4><blockquote>\n<blockquote>\n<blockquote>\n<p>NOW+relativedelta(months=+1)</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">datetime.datetime(2003, 10, 17, 20, 54, 47, 282310)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"合并字典\"><a href=\"#合并字典\" class=\"headerlink\" title=\"合并字典\"></a>合并字典</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = &#123;&#125;</span><br><span class=\"line\">b = &#123;<span class=\"string\">&#x27;a&#x27;</span>: <span class=\"number\">1</span>&#125;</span><br><span class=\"line\">c = &#123;**a, **b&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>key重复<code>b</code>中覆盖<code>a</code>, 否则单纯合并。</p>\n<h3 id=\"聊胜于无的小玩意-preety-tools\"><a href=\"#聊胜于无的小玩意-preety-tools\" class=\"headerlink\" title=\"聊胜于无的小玩意 preety tools\"></a>聊胜于无的小玩意 preety tools</h3><h5 id=\"彩色输出\"><a href=\"#彩色输出\" class=\"headerlink\" title=\"彩色输出\"></a>彩色输出</h5><p>模块名儿忘了，以后贴2019.03.01  03:08<br>one minute later:<br><code>pip3 install ansicolors</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">from colors import red, green, blue</span><br><span class=\"line\">print(red(&#39;This is red&#39;))</span><br><span class=\"line\">print(green(&#39;This is green&#39;))</span><br><span class=\"line\">print(blue(&#39;This is blue&#39;))</span><br><span class=\"line\"></span><br><span class=\"line\">from colors import color</span><br><span class=\"line\">for i in range(256):</span><br><span class=\"line\">    print(color(&#39;Color #%d&#39; % i, fg&#x3D;i))</span><br></pre></td></tr></table></figure>\n<p>以上程序只能写在<code>.py</code>文件中,运行，而不能在…‘偷懒模式‘中。</p>\n<h4 id=\"Python3-ThreadPoolExecutor-线程池内库\"><a href=\"#Python3-ThreadPoolExecutor-线程池内库\" class=\"headerlink\" title=\"Python3 ThreadPoolExecutor 线程池内库\"></a>Python3 ThreadPoolExecutor 线程池内库</h4><p>在<code>python3</code>之后不久，有关线程池的使用就被集成到内库之中。<br><code>from concurrent.futures import ThreadPoolExecutor</code><br>使用方法：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    ThreadPoolExecutor(max_workers&#x3D;12)</span><br><span class=\"line\">    # 设置线程池大小</span><br><span class=\"line\">    .submit(func_name, (para))    # 提交任务</span><br><span class=\"line\">    .done()    # 查看任务是否完成</span><br><span class=\"line\">    .cancel()    # 没有被放入线程池中才能生效</span><br><span class=\"line\">    .result()    # 获取该任务返回值</span><br><span class=\"line\"></span><br><span class=\"line\">    from concurrent.futures import as_completed</span><br><span class=\"line\">    # 用于取出所有任务结果，省去一直用.done去查看的繁琐。但该方法</span><br><span class=\"line\"># 是一个生成器，所以任务未完成会阻塞。 还有 wait map 等用法就去看文档吧。</span><br></pre></td></tr></table></figure>\n<h5 id=\"安装错误？\"><a href=\"#安装错误？\" class=\"headerlink\" title=\"安装错误？\"></a>安装错误？</h5><p>居然有<code>pip3 install XX</code>的错误…这也是因为有旧版<code>pip3</code>存留。需要</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">bash -d pip3</span> </span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">bash -r pip3</span></span><br></pre></td></tr></table></figure>\n<p>来清理shell中旧版pip缓存。</p>\n<h3 id=\"IDE\"><a href=\"#IDE\" class=\"headerlink\" title=\"IDE?\"></a>IDE?</h3><p>其实要不要IDE都无所为，因为本就是脚本，要IDE只能说打开一个陌生项目查看时能够跳转函数。至于<code>vim</code>大概不能跳转吧，毕竟跳转需要把文件都加载才能实现。emm  来来，IDE的话就<code>PyCharm</code>除了编程页面颜色难看之外其他功能都不错，另外不支持中文路径，不过应该不是由于<code>Python</code>语言造成的，因为蟒蛇脚本是可以在中文路径下运行di<a href=\"date:2018年5月28日17点16分\">date:2018年5月28日17点16分</a></p>\n<h4 id=\"print语句：-含有自动换行，所以要想不换行的话需要在结尾加一个”-”如：\"><a href=\"#print语句：-含有自动换行，所以要想不换行的话需要在结尾加一个”-”如：\" class=\"headerlink\" title=\"print语句： 含有自动换行，所以要想不换行的话需要在结尾加一个”,”如：\"></a>print语句： 含有自动换行，所以要想不换行的话需要在结尾加一个”,”如：</h4><pre><code>for i in range(0,5):\n\n    print i,\n</code></pre>\n<p>而Python3版本则应该也可以 print(a,b,c);然而Python2.7不行</p>\n<h4 id=\"根据字典中值大小排列：\"><a href=\"#根据字典中值大小排列：\" class=\"headerlink\" title=\"根据字典中值大小排列：\"></a>根据字典中值大小排列：</h4><pre><code>sorted(dict2.iteritems(),key=lambda item:item[1],reverse=True) \n# item[0]即根据键来排列[1]为根据对应值\n</code></pre>\n<h4 id=\"format：如\"><a href=\"#format：如\" class=\"headerlink\" title=\"format：如:\"></a>format：如:</h4><pre><code>print(&#39;my name is&#123;0&#125;,and my age is&#123;1&#125;&#39;.format(&#39;song&#39;,18))\n</code></pre>\n<h5 id=\"or\"><a href=\"#or\" class=\"headerlink\" title=\"or:\"></a>or:</h5><pre><code>url = &#39;http://www.google.com/page=&#123;&#125;/&#39;\n\nnewsurl = url.format(i)\n# 旋即其后内容则代替&#123;&#125;位置\n</code></pre>\n<p>另，在{a}{b}{c}可通過format(a=1,b=2,c=3)來賦值</p>\n<hr>\n<h3 id=\"BeautifulSoup\"><a href=\"#BeautifulSoup\" class=\"headerlink\" title=\"BeautifulSoup\"></a>BeautifulSoup</h3><h4 id=\"select语句：在内容前加’-’可以获得其内容，如：\"><a href=\"#select语句：在内容前加’-’可以获得其内容，如：\" class=\"headerlink\" title=\"select语句：在内容前加’#’可以获得其内容，如：\"></a>select语句：在内容前加’#’可以获得其内容，如：</h4><pre><code>soup.select(&#39;artibodyTitle&#39;)[0].text\nselect().contents\n&quot;&quot;&quot;\n把标签变成不同list，同List中的不同元素 然后用[0]可取得第一个元素内容，而不与后方的内容合到一起\n*.strip()可将取出的‘\\t\\t’移除\n&quot;&quot;&quot;\n.select(&#39;time-source span a&#39;)\n# 从time-source中的&lt;span下&lt;a下取得内容e\n.select(&#39;.productPrice&#39;)[0].text\n# 獲取class=&quot;productPrice&quot;下價格內容\n</code></pre>\n<hr>\n<h3 id=\"datetime字符串转时间-时间转字符串\"><a href=\"#datetime字符串转时间-时间转字符串\" class=\"headerlink\" title=\"datetime字符串转时间  时间转字符串:\"></a>datetime字符串转时间  时间转字符串:</h3><pre><code>from datetime import datetime\ndt = datetime.strptime(timesource,&#39;%Y年%m月%d日%H:%M&#39;)(****年*月*日*22:03)\ndt.strftime(&#39;%Y-%m-%d&#39;)\n</code></pre>\n<hr>\n<h3 id=\"保存數據到xlsx，sqlite3、csv：\"><a href=\"#保存數據到xlsx，sqlite3、csv：\" class=\"headerlink\" title=\"保存數據到xlsx，sqlite3、csv：\"></a>保存數據到xlsx，sqlite3、csv：</h3><pre><code>.to_excel(&#39;name.xlsx&#39;)：输出为excle文件\nimport sqlite3  #保存到数据库\nwith sqlite3.connect(&#39;name.sqlite&#39;) as db:\n    df.to_sql(&#39;name&#39;,con = db)\n</code></pre>\n<h5 id=\"从数据库取出\"><a href=\"#从数据库取出\" class=\"headerlink\" title=\"从数据库取出\"></a>从数据库取出</h5><pre><code>with sqlite3.connect(&#39;name.sqlite&#39;) as db:\n    df2 = pandas.read_sql_query(&#39;SELECT&#39; * FROM name&#39;,con = db)\n</code></pre>\n<h4 id=\"類型錯誤-TypeError-a-bytes-like-object-is-required-not-‘str’\"><a href=\"#類型錯誤-TypeError-a-bytes-like-object-is-required-not-‘str’\" class=\"headerlink\" title=\"類型錯誤 TypeError: a bytes-like object is required, not ‘str’\"></a>類型錯誤 TypeError: a bytes-like object is required, not ‘str’</h4><pre><code>csv_file = open(&quot;rent.csv&quot;,&quot;wb&quot;)    \ncsv_writer = csv.writer(csv_file, delimiter=&#39;,&#39;)    #创建writer对象，指定文件与分隔符\nwriter.writerow([&#39;title&#39;, &#39;summary&#39;, &#39;year&#39;, &#39;id&#39;, &#39;count&#39;, &#39;link&#39;])\n</code></pre>\n<p>Python2.7 轉到 3.5下時提示由此錯誤，代碼爲</p>\n<h5 id=\"原因，解決方法：\"><a href=\"#原因，解決方法：\" class=\"headerlink\" title=\"原因，解決方法：\"></a>原因，解決方法：</h5><pre><code>因爲Python3.5 對於str與bytes類型區分變得敏感，所以原本在2.7下正常的代碼不能正常運行。\n雖然，利用str.encode() 或者 str = bytes(str, encoding = &#39;utf-8&#39;)可以轉換格式\n然而錯誤依然有……解決辦法則是放棄論壇裏的說法，找到官網Demo\n</code></pre>\n<h5 id=\"更改如下：\"><a href=\"#更改如下：\" class=\"headerlink\" title=\"更改如下：\"></a>更改如下：</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">csvfile = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;goodsList.csv&#x27;</span>, <span class=\"string\">&#x27;w&#x27;</span>, newline=<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">spamwriter = csv.writer(csvfile, delimiter=<span class=\"string\">&#x27;,&#x27;</span>)</span><br><span class=\"line\">spamwriter.writerow([productTitle, productPrice, productShop])</span><br></pre></td></tr></table></figure>\n<p>細節在於，在打開文件的時候去除<code>wb</code>裏面的<code>b</code>即不用二進制模式打開。</p>\n<hr>\n<h3 id=\"Image下：\"><a href=\"#Image下：\" class=\"headerlink\" title=\"Image下：\"></a>Image下：</h3><p>获取图像分辨率：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">im = Image.<span class=\"built_in\">open</span>(<span class=\"number\">0.0</span>)</span><br><span class=\"line\">width = im.size[<span class=\"number\">0</span>]</span><br><span class=\"line\">height = im.size[<span class=\"number\">1</span>]</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h3 id=\"Pandas\"><a href=\"#Pandas\" class=\"headerlink\" title=\"Pandas:\"></a>Pandas:</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">box = pd.read_csv(<span class=\"string\">&quot;filename.csv, index_col=&quot;</span>Date<span class=\"string\">&quot;, parse_dates=Ture) </span></span><br><span class=\"line\"><span class=\"string\">#读入文件，讲Date作为日期</span></span><br><span class=\"line\"><span class=\"string\">box.columns = [&#x27;&#x27;,&#x27;&#x27;] </span></span><br><span class=\"line\"><span class=\"string\"># 更改列名</span></span><br><span class=\"line\"><span class=\"string\">box[&#x27;new&#x27;] = box[&#x27;1&#x27;]+box[&#x27;2&#x27;]</span></span><br><span class=\"line\"><span class=\"string\"># 新增一列为1与2之和</span></span><br><span class=\"line\"><span class=\"string\">box.resample(&#x27;d&#x27;, &#x27;sum&#x27;) </span></span><br><span class=\"line\"><span class=\"string\"># 重新按照‘d’:每天，进行采样  方式为取和(&#x27;w&#x27;,&#x27;sum&#x27;)所有数据在一周内进行取和</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"闲语：\"><a href=\"#闲语：\" class=\"headerlink\" title=\"闲语：\"></a>闲语：</h2><h4 id=\"while-True与while-1的区别：\"><a href=\"#while-True与while-1的区别：\" class=\"headerlink\" title=\"while True与while 1的区别：\"></a>while True与while 1的区别：</h4><p>在Python2 中，循环判断一亿次，我的小电脑的执行速度是</p>\n<pre><code>while one: 9.97739481926\nwhile_true: 18.8063299656\nwhile 1 以压倒性胜利。\n</code></pre>\n<p>到了Python3中，则成了</p>\n<pre><code>while one: 16.101972927001043\nwhile_true: 16.25536527499935\n</code></pre>\n<blockquote>\n<p>嗯，不错，不分伯仲——个鬼啊。整体变差了好吧。0.0   原因待明。</p>\n</blockquote>\n<h1 id=\"Python-小记-📖\"><a href=\"#Python-小记-📖\" class=\"headerlink\" title=\"Python 小记 📖\"></a>Python 小记 📖</h1><p>先贴一个客观的教程文档网站<a href=\"http://www.runoob.com/python/python-tutorial.html\">http://www.runoob.com/python/python-tutorial.html</a></p>\n<h4 id=\"Windows-下添加环境变量，CMD中Python2-与Python3-共存\"><a href=\"#Windows-下添加环境变量，CMD中Python2-与Python3-共存\" class=\"headerlink\" title=\"Windows 下添加环境变量，CMD中Python2 与Python3 共存\"></a>Windows 下添加环境变量，CMD中Python2 与Python3 共存</h4><p>Windows 下 把python2 路径加入到环境变量中，再修改python2.exe可以和python3区分方便在CMD中调用，但代价就是经常命令报错……</p>\n<p>不过也可以使用py -2来区分，所以还是不改名字了吧<br>Windows 下 用<code>py -2 -m pip install ***</code>以及<code>py -3 -m pip install ***</code>来区分安装到python2 或者 python3.</p>\n<h3 id=\"变量\"><a href=\"#变量\" class=\"headerlink\" title=\"变量\"></a>变量</h3><p>类下直接定义的变量可以继承，然而并不能被自己的函数所调用，意义不明…</p>\n<p>被继承的类可以调用继承类中定义的self.* 变量，俺认为这是因为它们在实例时都被当成了self 本身。另外，优先调用自己中的self变量，没有，才会去被继承类中去查找（先后顺序可得前方解答）。</p>\n<h2 id=\"变换数据类型\"><a href=\"#变换数据类型\" class=\"headerlink\" title=\"变换数据类型\"></a>变换数据类型</h2><p>Python 在从服务器接收或者发送数据时需要字符类型转换，’’’struct’’’便是为此而工作</p>\n<h4 id=\"struct-pack\"><a href=\"#struct-pack\" class=\"headerlink\" title=\"struct.pack\"></a>struct.pack</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\">a = <span class=\"number\">20</span></span><br><span class=\"line\">b = <span class=\"number\">400</span></span><br><span class=\"line\"><span class=\"built_in\">str</span> = struct.pack(<span class=\"string\">&quot;ii&quot;</span>, a, b)  </span><br><span class=\"line\"><span class=\"comment\">#转换后的str虽然是字符串类型，但相当于其他语言中的字节流（字节数组），可以在网络</span></span><br><span class=\"line\"><span class=\"comment\">#上传输</span></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&#x27;length:&#x27;</span>, <span class=\"built_in\">len</span>(<span class=\"built_in\">str</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"built_in\">str</span></span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"built_in\">repr</span>(<span class=\"built_in\">str</span>)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>—- result<br>length: 8<br>   #—-这里是乱码<br>‘/x14/x00/x00/x00/x90/x01/x00/x00’</p>\n</blockquote>\n<p>格式符”i”表示转换为int，’ii’表示有两个int变量。进行转换后的结果长度为8个字节（int类型占用4个字节，两个int为8个字节），可以看到输出的结果是乱码，因为结果是二进制数据，所以显示为乱码。可以使用python的内置函数repr来获取可识别的字符串，其中十六进制的0x00000014, 0x00001009分别表示20和400。</p>\n<h4 id=\"struct-unpack\"><a href=\"#struct-unpack\" class=\"headerlink\" title=\"struct.unpack\"></a>struct.unpack</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">str</span> = struct.pack(<span class=\"string\">&quot;ii&quot;</span>, <span class=\"number\">20</span>, <span class=\"number\">400</span>)</span><br><span class=\"line\">a1, a2 = struct.unpack(<span class=\"string\">&quot;ii&quot;</span>, <span class=\"built_in\">str</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&#x27;a1:&#x27;</span>, a1</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&#x27;a2:&#x27;</span>, a2</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>—- result:<br>a1: 20<br>a2: 400</p>\n</blockquote>\n<p>struct.unpack做的工作刚好与struct.pack相反，用于将字节流转换成python数据类型。它的函数原型为：struct.unpack(fmt, string)，该函数返回一个元组。</p>\n<h4 id=\"struct-calcsize\"><a href=\"#struct-calcsize\" class=\"headerlink\" title=\"struct.calcsize\"></a>struct.calcsize</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">struct.calcsize(<span class=\"string\">&#x27;i&#x27;</span>)</span><br><span class=\"line\">struct.calcsize(<span class=\"string\">&#x27;ii&#x27;</span>)</span><br><span class=\"line\">struct.calcsize(<span class=\"string\">&#x27;iic&#x27;</span>)</span><br><span class=\"line\">struct.calcsize(<span class=\"string\">&#x27;iicd&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>4<br>8<br>9<br>24</p>\n</blockquote>\n<p><code>struct.calcsize</code>用于计算格式字符串所对应的结果的长度，如：<code>struct.calcsize(‘ii’)</code>，返回<code>8</code>。因为两个<code>int</code>类型所占用的长度是<code>8</code>个字节。</p>\n<h4 id=\"struct-pack-into-struct-unpack-from\"><a href=\"#struct-pack-into-struct-unpack-from\" class=\"headerlink\" title=\"struct.pack_into, struct.unpack_from\"></a>struct.pack_into, struct.unpack_from</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> struct</span><br><span class=\"line\"><span class=\"keyword\">from</span> ctypes <span class=\"keyword\">import</span> create_string_buffer</span><br><span class=\"line\"></span><br><span class=\"line\">buf = create_string_buffer(<span class=\"number\">12</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"built_in\">repr</span>(buf.raw)</span><br><span class=\"line\">struct.pack_into(<span class=\"string\">&quot;iii&quot;</span>, buf, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, -<span class=\"number\">1</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"built_in\">repr</span>(buf.raw)</span><br><span class=\"line\"><span class=\"built_in\">print</span> struct.unpack_from(<span class=\"string\">&#x27;iii&#x27;</span>, buf, <span class=\"number\">0</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>—- result<br>‘/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00’<br>‘/x01/x00/x00/x00/x02/x00/x00/x00/xff/xff/xff/xff’<br>(1, 2, -1)</p>\n</blockquote>\n<h2 id=\"Python3\"><a href=\"#Python3\" class=\"headerlink\" title=\"Python3\"></a>Python3</h2><p>在<font color=red>Python3</font>中，转换字符串时，不能直接<code>pack(&#39;8s&#39;, &#39;i am str&#39;)</code>, 需要将字符串转换成二进制所以在语法中标记<code>pack(&#39;8s&#39;, b&#39;i am str&#39;)</code>使用<code>&#39;b&#39;</code>来进行标记</p>\n<p>以上来自<a href=\"http://python.jobbole.com/81554/\">Darkbull</a> 这是转贴地址，不知道为什么我看的转贴挂的原帖地址失效了 😰</p>\n<hr>\n<hr>\n<hr>\n<h3 id=\"一不小心发现的语法\"><a href=\"#一不小心发现的语法\" class=\"headerlink\" title=\"一不小心发现的语法\"></a>一不小心发现的语法</h3><p><font color=red>py2.7</font></p>\n<pre><code>while &#39;a&#39; in a or b:\n    break\n# 没错，意思就是如果a或者是b包含‘a’的话…     \n</code></pre>\n<h3 id=\"与-方法\"><a href=\"#与-方法\" class=\"headerlink\" title=\"* 与 ** 方法:\"></a>* 与 ** 方法:</h3><p>呃，原来<code>*</code>在MarkDown里面是斜体的意思啊——需要斜体显示的前后各一个星号</p>\n<pre><code>def a(* a, **b):\n    balabala\n</code></pre>\n<p>这里的*a， a在函数中被赋值为一个元组，b被赋值为一个字典。所以在调用的时候嘞，只能把能往一个元组里塞的放在前面，而能够生成字典的放在后面</p>\n<pre><code>a(1,2,3,4,5,6,7,8,9,a:&#39;a&#39;,b:1,c:&#39;nihao&#39;)\n</code></pre>\n<p>就像这么一样来调用。  另外，def a()函数中还能在前方再新加一个输入</p>\n<pre><code>def aa(jiushishuowo, *a, **b):\n    pass\n</code></pre>\n<p>这样的话，那么在调用的时候第一个逗号前面的内容会赋值给它。over，回去拿快递了~~~</p>\n<p>🐶 年假前再来补充一下：约定名*args, **kwargs</p>\n<h4 id=\"获取文件路径\"><a href=\"#获取文件路径\" class=\"headerlink\" title=\"获取文件路径\"></a>获取文件路径</h4><pre><code>path = os.path.abspath(os.path.dirname(__file__))\n# 获取当前运行文件的路径。需在本地有此文件，在命令行中出错\n\nfor root, subdirs, files in os.walk(path):\n# 遍历所有path下文件  path为要遍历的路径\n</code></pre>\n<h4 id=\"同获取路径\"><a href=\"#同获取路径\" class=\"headerlink\" title=\"同获取路径\"></a>同获取路径</h4><pre><code>os.path.abspath(&#39;./&#39;)\nos.path.abspath(&#39;Deskop&#39;)\nos.path.abspath(&#39;Deskop&#39;) + os.path.sep\n</code></pre>\n<blockquote>\n<p>‘C:\\Users\\Administrator’</p>\n</blockquote>\n<blockquote>\n<p>‘C:\\Users\\Administrator\\Deskop’</p>\n</blockquote>\n<blockquote>\n<p>‘C:\\Users\\Administrator\\Deskop\\‘</p>\n</blockquote>\n<h3 id=\"获取指定目录下所有文件名列表\"><a href=\"#获取指定目录下所有文件名列表\" class=\"headerlink\" title=\"获取指定目录下所有文件名列表\"></a>获取指定目录下所有文件名列表</h3><pre><code>os.listdir(&#39;D\\IFData&#39;)\n</code></pre>\n<hr>\n<h5 id=\"dict\"><a href=\"#dict\" class=\"headerlink\" title=\"_dict_\"></a>_<em>dict</em>_</h5><pre><code>class Province:\n    country = &#39;China&#39;\n\n    def __init__(self, name, count):\n        self.name = name\n        self.count = count\n\n    def func(self, *args, **kwargs):\n        print &#39;func&#39;\n\nprint Province.__dict__     # 类输出\nobj1 = Province(&#39;HuBei&#39;, 100)\nprint obj1.__dict__         # 对象1\nobj2 = Province(&#39;hulala&#39;, 3888)\nprint obj2.__dict__         # 对象2\n</code></pre>\n<blockquote>\n<p><code>&#123;&#39;country&#39;: &#39;China&#39;, &#39;__module__&#39;: &#39;__main__&#39;, &#39;func&#39;: &lt;function func at 0x049EF470&gt;, &#39;__init__&#39;: &lt;function __init__ at 0x049EF4F0&gt;, &#39;__doc__&#39;: None&#125;</code></p>\n</blockquote>\n<blockquote>\n<p><code>&#123;&#39;count&#39;: 100, &#39;name&#39;: &#39;HuBei&#39;&#125;</code></p>\n</blockquote>\n<blockquote>\n<p><code>&#123;&#39;count&#39;: 3888, &#39;name&#39;: &#39;hulala&#39;&#125;</code></p>\n</blockquote>\n<p>类输出的是全局的函数，变量等信息。<br>对象输出的只是对象拥有的普通变量而已</p>\n<p>呃(⊙﹏⊙)，等下再去拿吧…  差点忘了说，这个__dict__与字典相配合来回赋值简直舒服… 步骤为：将某个变量=一个类（数据类（就是能够a.b这么调用的数值））然后这个变量就能a.b的这么使用了。  而后也能通过a.__dict__（这是一个字典）再将所需要的数值取出来，转赋值为别的东西。  反正我是用到了… 在想要实现一个函数来保存一个变量的某些属性的时候。（呃(⊙﹏⊙)用爱去理解我所描述的场合吧。）</p>\n<h3 id=\"IF-ELSE\"><a href=\"#IF-ELSE\" class=\"headerlink\" title=\"IF ELSE\"></a>IF ELSE</h3><pre><code># 执行时会将IF前面整个表达式作为判断结果后的执行对象，\n# 而不是仅仅替换某一个数字或者变量。  即 下方表达式运算结果\n# 不是  `4`       和      `5`  而是如下所示\na = 1 + 3 if 1 == 2 else 2 + 1\na\na = 1 + 3 if 1 == 1 else 2 + 1\na\n</code></pre>\n<blockquote>\n<p>3</p>\n</blockquote>\n<blockquote>\n<p>4</p>\n</blockquote>\n<hr>\n<hr>\n<hr>\n<h3 id=\"Python-2-中的object新式类和经典类\"><a href=\"#Python-2-中的object新式类和经典类\" class=\"headerlink\" title=\"Python 2 中的object新式类和经典类\"></a>Python 2 中的object新式类和经典类</h3><pre><code># 作者：邹冲\n# 链接：https://www.zhihu.com/question/19754936/answer/202650790\nclass A:\n    def foo(self):\n    print(&#39;called A.foo()&#39;)\n\nclass B(A):\n    pass\n\nclass C(A):\n    def foo(self):\n    print(&#39;called C.foo()&#39;)\n\nclass D(B, C): \n    pass\n\nif __name__ == &#39;__main__&#39;:\n    d = D() \n    d.foo()\n</code></pre>\n<blockquote>\n<p>B、C 是 A 的子类，D 多继承了 B、C 两个类，其中 C 重写了 A 中的 foo() 方法。</p>\n</blockquote>\n<blockquote>\n<p>如果 A 是经典类（如上代码），当调用 D 的实例的 foo() 方法时，Python 会按照深度优先的方法去搜索 foo() ，路径是 B-A-C ，执行的是 A 中的 foo() ；</p>\n</blockquote>\n<blockquote>\n<p>如果 A 是新式类，当调用 D 的实例的 foo() 方法时，Python 会按照广度优先的方法去搜索 foo() ，路径是 B-C-A ，执行的是 C 中的 foo() 。</p>\n</blockquote>\n<blockquote>\n<p>因为 D 是直接继承 C 的，从逻辑上说，执行 C 中的 foo() 更加合理，因此新式类对多继承的处理更为合乎逻辑。</p>\n</blockquote>\n<blockquote>\n<p>在 Python 3.x 中的新式类貌似已经兼容了经典类，无论 A 是否继承 object 类， D 实例中的 foo() 都会执行 C 中的 foo() 。但是在 Python 2.7 中这种差异仍然存在，因此还是推荐使用新式类，要继承 object 类。</p>\n</blockquote>\n<h4 id=\"items\"><a href=\"#items\" class=\"headerlink\" title=\".items()\"></a>.items()</h4><p>一个字典 a，其a.items()为将每对对应值组为一个元组。即使键值也为一个字典也是将此字典作为元组元素。(￣▽￣)” emm</p>\n<hr>\n<hr>\n<h3 id=\"Queue\"><a href=\"#Queue\" class=\"headerlink\" title=\"Queue\"></a>Queue</h3><p>队列，先进先出型。可存数字、字符…嘛，Python里啥都一样。所以啥都能存。用于事件按顺序执行。示例如~：</p>\n<pre><code>import Queue\nmqueue = Queue.Queue(maxsize = 3)\nmqueue.put(10)\nmqueue.put(15)\nmqueue.put(12)\n# 此时如果再往里存呢，就会卡住… 持续等待有空位置\n# 所以\nmqueue.get()        #取出第一个存入\nmqueue.put(&#39;14sas4&#39;)  #继续存\n## 在接触的项目中，是借用字典，来将处理函数作为Value，将Keys，put到队\n列中，再进行取出执行。\n</code></pre>\n<p>如果队列中没有数值之后再<code>get</code>也会卡住……<br>所以以下东西就显得比较重要了：</p>\n<h3 id=\"series和dataframe\"><a href=\"#series和dataframe\" class=\"headerlink\" title=\"series和dataframe\"></a>series和dataframe</h3><p>先贴来源：<a href=\"http://blog.csdn.net/ly_ysys629/article/details/54944153\">http://blog.csdn.net/ly_ysys629/article/details/54944153</a></p>\n<h5 id=\"属性\"><a href=\"#属性\" class=\"headerlink\" title=\"属性\"></a>属性</h5><pre><code>series    ：.index, .values, .name, .index.name\ndataframe ：.columns, .index, .values\n</code></pre>\n<h5 id=\"series\"><a href=\"#series\" class=\"headerlink\" title=\"series:\"></a><font color=red>series</font>:</h5><p>一组数组（列表或元组），series除了一组数据外还包括一组索引（即只有行索引），索引可自行定义也可利用Series(),自动生成索引;</p>\n<h5 id=\"dataframe\"><a href=\"#dataframe\" class=\"headerlink\" title=\"dataframe:\"></a><font color=red>dataframe</font>:</h5><p>是表格型数据，既有行索引又有列索引，每列数据可以为不同类型数据（数值、字符串、布尔型值），可利用DataFrame（其他数据，dataframe属性)指定dataframe的属性创建dataframe。</p>\n<h5 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h5><h5 id=\"series-1\"><a href=\"#series-1\" class=\"headerlink\" title=\"series\"></a>series</h5><pre><code>#创建series\nimport pandas as pd\nobj_list=[1,2,3,4]\nobj_tuple=(4,5,6,7)\nobj_dict=&#123;&#39;a&#39;:[1,2],&#39;b&#39;:[2,3],&#39;c&#39;:[3,4],&#39;d&#39;:[4,5]&#125;\nobj_series_list=pd.Series(obj_list)#通过列表创建series\nobj_series_tuple=pd.Series(obj_tuple,index=list(&#39;abcd&#39;))\n#通过元组创建series\nobj_series_dict=pd.Series(obj_dict)#通过字典创建series\n#定义属性\nobj_series_list.index.name=&#39;zimu&#39;\nobj_series_list.name=&#39;data&#39;\n\nprint &quot;#通过列表创建series&quot;\nprint obj_series_list\nprint &quot;#通过元组创建series&quot;\nprint obj_series_tuple\nprint &quot;#通过字典创建series&quot;\nprint obj_series_dict\n#显示series类型及属性\nprint type(obj_series_list),obj_series_list.dtype\nprint obj_series_list.index,obj_series_list.index.name\nprint obj_series_list.values,obj_series_list.name\n</code></pre>\n<blockquote>\n<p>#通过列表创建series</p>\n</blockquote>\n<blockquote>\n<p>zimu</p>\n</blockquote>\n<blockquote>\n<p>0    1</p>\n</blockquote>\n<blockquote>\n<p>1    2</p>\n</blockquote>\n<blockquote>\n<p>2    3</p>\n</blockquote>\n<blockquote>\n<p>3    4</p>\n</blockquote>\n<blockquote>\n<p>Name: data, dtype: int64</p>\n</blockquote>\n<hr>\n<blockquote>\n<p>#通过元组创建series</p>\n</blockquote>\n<pre><code>a    4\nb    5\nc    6\nd    7\ndtype: int32\n</code></pre>\n<hr>\n<blockquote>\n<p>#通过字典创建series</p>\n</blockquote>\n<pre><code>a    [1, 2]\nb    [2, 3]\nc    [3, 4]\nd    [4, 5]\ndtype: object\n&lt;class &#39;pandas.core.series.Series&#39;&gt; int64\nRangeIndex(start=0, stop=4, step=1, name=u&#39;zimu&#39;) zimu\n[1 2 3 4] data\n</code></pre>\n<h5 id=\"dataframe-1\"><a href=\"#dataframe-1\" class=\"headerlink\" title=\"dataframe\"></a>dataframe</h5><pre><code>#创建dataframe\nimport pandas as pd\nimport numpy as np\nobj_dict=&#123;&#39;a&#39;:[1,2],&#39;b&#39;:[2,3],&#39;c&#39;:[3,4],&#39;d&#39;:[4,5]&#125;\nobj_array=np.array([[1,2,3,4],[3,4,5,6]])\nobj_series_1=pd.Series([11,12,13,14])\nobj_series_2=pd.Series([21,22,23,24])\nobj_dataframe_dict=pd.DataFrame(obj_dict)\n#通过字典创建dataframe\nobj_dataframe_array=pd.DataFrame(obj_array,index=[&#39;one&#39;,&#39;two&#39;])\n#通过矩阵创建dataframe\nobj_dataframe_series=pd.DataFrame([obj_series_1,obj_series_2])\n#通过series创建dataframe\nobj_dataframe_dataframe=pd.DataFrame(obj_dataframe_series,index=\n    [0,1,&#39;one&#39;],columns=[0,1,2,&#39;a&#39;])\n#通过其他dataframe创建dataframe\nprint &quot;#通过字典创建dataframe&quot;\nprint obj_dataframe_dict\nprint &quot;#通过矩阵创建dataframe&quot;\nprint obj_dataframe_array\nprint &quot;#通过series创建dataframe&quot;\nprint obj_dataframe_series\nprint &quot;#通过其他dataframe创建dataframe&quot;\nprint obj_dataframe_dataframe\n#dataframe属性\nprint obj_dataframe_dataframe.dtypes\nprint obj_dataframe_dataframe.values\nprint obj_dataframe_dataframe.columns\nprint obj_dataframe_dataframe.index\n</code></pre>\n<blockquote>\n<p>输出结果为：<br>    #通过字典创建dataframe<br>       a  b  c  d<br>    0  1  2  3  4<br>    1  2  3  4  5<br>    #通过矩阵创建dataframe<br>         0  1  2  3<br>    one  1  2  3  4<br>    two  3  4  5  6<br>    #通过series创建dataframe<br>        0   1   2   3<br>    0  11  12  13  14<br>    1  21  22  23  24<br>    #通过其他dataframe创建dataframe<br>            0     1     2   a<br>    0    11.0  12.0  13.0 NaN<br>    1    21.0  22.0  23.0 NaN<br>    one   NaN   NaN   NaN NaN<br>    0    float64<br>    1    float64<br>    2    float64<br>    a    float64<br>    dtype: object<br>    [[ 11.  12.  13.  nan]<br>     [ 21.  22.  23.  nan]<br>     [ nan  nan  nan  nan]]<br>    Index([0, 1, 2, u’a’], dtype=’object’)<br>    Index([0, 1, u’one’], dtype=’object’)<br>取数据的话，便是<code>obj_dataframe_dict[&#39;a&#39;][0]</code>取出数值即为<code>1</code></p>\n</blockquote>\n<h3 id=\"自命名创建方式\"><a href=\"#自命名创建方式\" class=\"headerlink\" title=\"自命名创建方式\"></a>自命名创建方式</h3><pre><code>df4 = pd.DataFrame(np.random.randn(6, 4), \n    index=[u&#39;第二&#39;, 4, 3, 2, 1, 0], columns=[u&#39;第一&#39;,5,4,1])\n#行为：     第一，      5，         4，         1\n#列为：第二 -0.091305   ...\n#       4   ...\n#       3\n#       2\n#       1\n#       0                                       ...\n</code></pre>\n<h3 id=\"查看\"><a href=\"#查看\" class=\"headerlink\" title=\"查看\"></a>查看</h3><pre><code>.dtypes     查看各行数据格式\n.head()     查看前几行（默认5）\n.tail()         查看后几行\n.index      查看数据框引索\n.columns        查看列名\n.values     数据值\n.T          转置\n.sort           排序  .sort(columns = &#39;***&#39;)根据***列数据进行排序\n</code></pre>\n<h6 id=\"取数据方法见上\"><a href=\"#取数据方法见上\" class=\"headerlink\" title=\"取数据方法见上\"></a><font color=green>取数据方法见上</font></h6><h3 id=\"zip-和-数组变字典\"><a href=\"#zip-和-数组变字典\" class=\"headerlink\" title=\"zip 和 数组变字典\"></a>zip 和 数组变字典</h3><pre><code>a = [1,2,3]\nb = [4,5,6]\nc = [4,5,6,7,8]\nzipped = zip(a,b)\n</code></pre>\n<blockquote>\n<p>[(1, 4), (2, 5), (3, 6)]</p>\n</blockquote>\n<pre><code>zip(a,c)\n</code></pre>\n<blockquote>\n<p>[(1, 4), (2, 5), (3, 6)]</p>\n</blockquote>\n<pre><code>zip(*zipped)\n</code></pre>\n<blockquote>\n<p>[(1, 2, 3), (4, 5, 6)]</p>\n</blockquote>\n<p>zip 也可以二维矩阵变换（矩阵的行列互换）<br>因为其作用为按序号重组数组。（其英语翻译为拉链……）</p>\n<h4 id=\"数组变字典-：\"><a href=\"#数组变字典-：\" class=\"headerlink\" title=\"数组变字典~：\"></a>数组变字典~：</h4><pre><code>dic(zip(a, b))\n# a中值为key b中值为values\n</code></pre>\n<h3 id=\"字典操作\"><a href=\"#字典操作\" class=\"headerlink\" title=\"字典操作\"></a>字典操作</h3><pre><code>dict= sorted(dic.items(), key=lambda d:d[0]) \n# 将字典按照键值升序排列\n# d： 无所谓的参数\n# d[0]：0为升序，1为降序\n# 如果是字符型，那么‘1’‘10’‘12’… 才是‘2’’20‘，因为Python的比较是按照\n    # 按序提取第一个字符进行比较。所以要排序，还是得用int\n# 排序之后被转换为list类型。\nfor i in orderIDic:\n            spamwriter.writerow(orderIDic[i])\n# 变为\nfor i in orderIDic:\n            spamwriter.writerow(i[1])\n</code></pre>\n<hr>\n<h4 id=\"namedtuple\"><a href=\"#namedtuple\" class=\"headerlink\" title=\"namedtuple\"></a>namedtuple</h4><pre><code>import collections\nperson = collections.namedtuple(&#39;P&#39;, &#39;name age gender&#39;)\n# P: 类名   后面空格隔开的为变量名称\n\nbob = person(name = &#39;B&#39;, age = 30, gender = &#39;male&#39;)\njane = Person(name = &#39;J&#39;, age = 29, gender = &#39;female&#39;)\nfor people in [bob, jane]:\n    print (&quot;%s is %d years old %s&quot; % people)\n</code></pre>\n<p>元组的命名—— 命名之后可以由bob.name 来调用 （看了那个Python面向对象进阶， 老多<code>__hahah__()</code>函数之后，所以这明显是当成基本类的变量在用了。  emm 这么么说也不贴切 😔  果然理解程度还是跟不上的…    emm 现在需要跟进的不是怎么用Python了，而是python的用法了，走起~  继续写future笔记去了—— 这个得看的明白点儿😄）</p>\n<hr>\n<hr>\n<h3 id=\"CSV\"><a href=\"#CSV\" class=\"headerlink\" title=\"CSV\"></a>CSV</h3><h4 id=\"读取\"><a href=\"#读取\" class=\"headerlink\" title=\"读取\"></a>读取</h4><pre><code>import csv\nreader = csv.reader(open(&#39;test.csv&#39;, &#39;rb&#39;)) \nfor item in reader:\n    print item\n</code></pre>\n<h5 id=\"官方是这么教你的\"><a href=\"#官方是这么教你的\" class=\"headerlink\" title=\"官方是这么教你的\"></a>官方是这么教你的</h5><pre><code>#我记得我写过一次，怎么不见了…\nimport csv\nwith open(&#39;names.csv&#39;) as csvfile:\n    reader = csv.DictReader(csvfilr)\n    for row in reader:\n        print (row[&#39;first_name&#39;], row[&#39;last_name&#39;])\n</code></pre>\n<h4 id=\"写入\"><a href=\"#写入\" class=\"headerlink\" title=\"写入\"></a>写入</h4><pre><code>import csv\nwriter = csv.writer(open(&#39;test2.csv&#39;, &#39;wb&#39;))\nwriter.writerow([&#39;col1&#39;, &#39;col2&#39;, &#39;col3&#39;])\ndata = [range(3)  for i in range(3)]\nfor item in data:\n    writer.writerow(item)\n</code></pre>\n<h5 id=\"官方教你这么写\"><a href=\"#官方教你这么写\" class=\"headerlink\" title=\"官方教你这么写\"></a>官方教你这么写</h5><pre><code>import csv\nwith open(&#39;names.csv&#39;) as csvfile:\n    fieldnames = [&#39;first_name&#39;, &#39;last_name&#39;]\n    writer = csv.DictWriter(csvfile, fieldnames = fieldnames)\n    \n    writer.writeheader()\n    writer.writerow(&#39;first_name&#39; : &#39;Naled&#39;, &#39;last_name&#39; : &#39;Beans&#39;)\n</code></pre>\n<p>须注意之处：writer.writerow()方法中的参数是list类型，如果你想在A1列写入’hello’，则必须是writer.writerow(‘hello’)，不然’hello’会被看成是个list从而被分写入5列。写入CSV时，CSV文件的创建必须加上’b’参数，即csv.writer(open(‘test.csv’, ‘wb’))，不然会出现隔行的现象。网上搜到的解释是：python正常写入文件的时候，每行的结束默认添加’\\n’，即0x0D，而writerow命令的结束会再增加一个0x0D0A，因此对于windows系统来说，就是两行，而采用’b’参数，用二进制进行文件写入，系统默认是不添加0x0D的。</p>\n<h4 id=\"关闭\"><a href=\"#关闭\" class=\"headerlink\" title=\"关闭\"></a>关闭</h4><pre><code>csvfile.close()\n</code></pre>\n<p>值得注意的是上面的文档是覆盖型创建，即，写数据只能在关闭文档之前完成，之后再打开文件，再写就会覆盖掉之前（清空再写） 下面的txt  <code>mode = &#39;a&#39;</code> 就属于添加型写入了，再关闭之后再打开会在最后一条开始继续添加。然后将csv中的’w’替换成‘a’就行了。记得带上’b’要不会出现数据隔行…隔行显示</p>\n<h5 id=\"官方还叫你这么写嘞\"><a href=\"#官方还叫你这么写嘞\" class=\"headerlink\" title=\"官方还叫你这么写嘞\"></a>官方还叫你这么写嘞</h5><pre><code>with open(&#39;na1me.csv&#39;, &#39;ab&#39;) as csvfile:\n    spamwriter = csv.writer(csvfile, delimiter = &#39;,&#39;)\n    spamwriter.writerow([&#39;adasd&#39;, &#39;w.c.w&#39;, &#39;lol&#39;])\n</code></pre>\n<h3 id=\"txt保存\"><a href=\"#txt保存\" class=\"headerlink\" title=\"txt保存\"></a>txt保存</h3><pre><code># 基本与CSV一致，emm其实都是保存为文档，就只有个后缀区别…\ndef text_save(content,filename,mode=&#39;a&#39;):\n    # Try to save a list variable in txt file.\n    file = open(filename,mode)\n    file.write(str(content)+&#39;\\n&#39;)\n    file.close()\ntext_save(np.mean(self.trueRange[start: ]), &#39;atr.txt&#39;)\n</code></pre>\n<p>关于保存路径呢，windows 下必须<font color=green>?</font>用  ‘.\\.\\..’没错，当前路径（相对路径）和绝对路径都是这样用的</p>\n<p><code>mode</code> <code>b</code>代表二进制模式打开，而<code>a</code>就有用了，表示有此文件就打开，没的话就创建。</p>\n<h3 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json\"></a>json</h3><pre><code>和上述txt文件保存差不过，嗯应该说完全一样。因为我是用的是`json.dumps`\n</code></pre>\n<h4 id=\"dumps、loads\"><a href=\"#dumps、loads\" class=\"headerlink\" title=\"dumps、loads\"></a>dumps、loads</h4><pre><code>    这两个语句前者是将字典转化为str格式，后者是将str转换为字典。所以保  \n存到文件也不过是 字典 -&gt; str -&gt;(用`write`写入)-&gt; 本地文件， 反之。\n    与之相对比的是`dump`和`load`这个是直接保存至文件，但`s`多好用\n需注意的是`dumps`有`indent`参数可用来指明转换为`str`之后的缩进参    \n数。一般`4`（所以说这里说的是空格数？）。  哦，`loads`直接加载文件也\n行，不用读出来`str`再去转换\n</code></pre>\n<h3 id=\"Shelve\"><a href=\"#Shelve\" class=\"headerlink\" title=\"Shelve\"></a>Shelve</h3><pre><code>对象的持久化存储——\n目的：Shelve模块为任意能够pickle的Python对象实现持久化存储，并提供一个类似字典的\n</code></pre>\n<h2 id=\"接口。\"><a href=\"#接口。\" class=\"headerlink\" title=\"接口。\"></a>接口。</h2><hr>\n<hr>\n<h2 id=\"列表List\"><a href=\"#列表List\" class=\"headerlink\" title=\"列表List\"></a>列表List</h2><p><font color=red>需提前定义，不能像变量一样随用随写…</font></p>\n<p>以下来自于 <a href=\"http://www.jb51.net/article/47978.htm\">Python 列表(List)操作方法详解</a></p>\n<h3 id=\"列表操作包含以下函数\"><a href=\"#列表操作包含以下函数\" class=\"headerlink\" title=\"列表操作包含以下函数:\"></a>列表操作包含以下函数:</h3><pre><code>cmp(list1, list2)       # 比较两个列表的元素 \nlen(list)               # 列表元素个数 \nmax(list)               # 返回列表元素最大值 \nmin(list)               # 返回列表元素最小值 \nlist(seq)               # 将元组转换为列表 \n</code></pre>\n<h3 id=\"列表操作包含以下方法\"><a href=\"#列表操作包含以下方法\" class=\"headerlink\" title=\"列表操作包含以下方法:\"></a>列表操作包含以下方法:</h3><pre><code>list.append(obj)        # 在列表末尾添加新的对象\nlist.count(obj)         # 统计某个元素在列表中出现的次数\nlist.extend(seq)        # 在列表末尾一次性\n    # 追加另一个序列中的多个值（用新列表扩展原来的列表）\nlist.index(obj)         # 从列表中找出某个值第一个匹配项的索引位置\nlist.insert(index, obj) # 将对象插入列表\nlist.pop(obj=list[-1])      #移除列表中的一个元素（默认最后一个元素）\n    #，并且返回该元素的值\nlist.remove(obj)        # 移除列表中某个值的第一个匹配项\nlist.reverse()          # 反向列表中元素\nlist.sort([func])           # 对原列表进行排序\n</code></pre>\n<h2 id=\"字符串连接\"><a href=\"#字符串连接\" class=\"headerlink\" title=\"字符串连接\"></a>字符串连接</h2><p>来自<a href=\"http://www.cnblogs.com/chenjingyi/p/5741901.html\">http://www.cnblogs.com/chenjingyi/p/5741901.html</a></p>\n<h3 id=\"方法一\"><a href=\"#方法一\" class=\"headerlink\" title=\"方法一\"></a>方法一</h3><pre><code>website = &#39;python&#39; + &#39;tab&#39; + &#39;.com&#39;\n</code></pre>\n<h3 id=\"方法二\"><a href=\"#方法二\" class=\"headerlink\" title=\"方法二\"></a>方法二</h3><pre><code>listStr = [&#39;python&#39;, &#39;tab&#39;, &#39;.com&#39;] \nwebsite = &#39;&#39;.join(listStr)\n</code></pre>\n<h3 id=\"方法三\"><a href=\"#方法三\" class=\"headerlink\" title=\"方法三\"></a>方法三</h3><pre><code>website = &#39;%s%s%s&#39; % (&#39;python&#39;, &#39;tab&#39;, &#39;.com&#39;)\n</code></pre>\n<p>结论： 连接个数少使用一，个数多使用二。  推荐，使用三 ~ ，~</p>\n<h2 id=\"手动编译Py文件\"><a href=\"#手动编译Py文件\" class=\"headerlink\" title=\"手动编译Py文件\"></a>手动编译Py文件</h2><pre><code>import compileall\ncompileall.compile_dir(目录)\n</code></pre>\n<hr>\n<hr>\n<hr>\n<h2 id=\"时间\"><a href=\"#时间\" class=\"headerlink\" title=\"时间\"></a>时间</h2><h4 id=\"datetime\"><a href=\"#datetime\" class=\"headerlink\" title=\"datetime\"></a>datetime</h4><pre><code>from datetime import datetime\na = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0) \na.year  \na.hour      #int 型变量\n</code></pre>\n<blockquote>\n<p>2017   </p>\n</blockquote>\n<blockquote>\n<p>0</p>\n</blockquote>\n<blockquote>\n<p>获取当前本机电脑💻时间，replace为自定义某个数值。单独调用某个信息如a.year、a.hour</p>\n</blockquote>\n<h4 id=\"datetime-类型变量可直接相减获得间隔日\"><a href=\"#datetime-类型变量可直接相减获得间隔日\" class=\"headerlink\" title=\"datetime 类型变量可直接相减获得间隔日\"></a>datetime 类型变量可直接相减获得间隔日</h4><pre><code>a = datetime.datetime.now()\n# datetime.datetime(2017, 10, 18, 8, 52, 27, 5000)\nb = datetime(2005, 2, 6)\n# datetime.datetime(2005, 2, 6, 0, 0)\nc = a - b \n# datetime.timedelta(4637, 31947, 5000)\nc.days  # int 型\n</code></pre>\n<blockquote>\n<p>4637</p>\n</blockquote>\n<h4 id=\"timedelta\"><a href=\"#timedelta\" class=\"headerlink\" title=\"timedelta\"></a>timedelta</h4><p>timedelta为datetime类型相减而来（datetime不能相加…），然后嘞，datetime.timedelta(1,35340)这是它的样子，前是天数，后是秒数。也就是说所有相减就是告诉你相距多少天零多少秒，都是标准单位（误）。要取出可 <code>.days</code>   和  `seconds``</p>\n<h3 id=\"格式化输出当前时间\"><a href=\"#格式化输出当前时间\" class=\"headerlink\" title=\"格式化输出当前时间\"></a>格式化输出当前时间</h3><pre><code>import time\nprint time.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;,time.localtime(time.time()))\n</code></pre>\n<blockquote>\n<p>2017-08-21 10:54:31</p>\n</blockquote>\n<h3 id=\"time\"><a href=\"#time\" class=\"headerlink\" title=\"time\"></a>time</h3><pre><code>import time\ntime.time()     # 返回当前时间的时间戳（1970纪元后经过的浮点秒数）\n# 返回值为float 可直接拿来运算，还是很舒服的。\n</code></pre>\n<hr>\n<hr>\n<h3 id=\"线程-threading\"><a href=\"#线程-threading\" class=\"headerlink\" title=\"线程 threading\"></a>线程 threading</h3><h4 id=\"用于实现定时器\"><a href=\"#用于实现定时器\" class=\"headerlink\" title=\"用于实现定时器\"></a>用于实现定时器</h4><pre><code>import threading\ndef hel():\n    print &quot;so you sucsessful to kill 5 seconde&quot;\ntime = threading.Timer(5, hel)\ntime.start()\n</code></pre>\n<blockquote>\n<p>so you sucsessful to kill 5 seconde<br>在命令行中按下回车后消失，很有意思，并且当第二调用时time.start()时就会——</p>\n</blockquote>\n<blockquote>\n<p>RuntimeError: threads can only be started once</p>\n</blockquote>\n<h4 id=\"循环调用\"><a href=\"#循环调用\" class=\"headerlink\" title=\"循环调用\"></a>循环调用</h4><p>以上的不能循环调用的话就没啥价值了，所以下面有个妖艳用法为：</p>\n<pre><code>def fun():\n    print &quot;So jian&quot;\n    global timer\n    timer = threading.Timer(5.5, fun)\n    timer.start()\ntimer = threading.Timer(1, fun)\ntimer.start()\n# 通过自调自的方法循环创建时间线程，另外，timer.cancel()可停止定时器工作。\n# 值得注意的是，上面不循环调用的 在执行完函数之后依然会持续运行\n# 所以得记得关闭。\n</code></pre>\n<p>比方说这个妖艳……呃 本来打算在调用函数里写上cancel但是…依然之后不能再次start()</p>\n<h4 id=\"线程池\"><a href=\"#线程池\" class=\"headerlink\" title=\"线程池\"></a>线程<font color=#10e5a6>池</font></h4><p>自实现或者使用<code>threadpool.ThreadPool</code>:</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> threadpool  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sayhello</span>(<span class=\"params\"><span class=\"built_in\">str</span></span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;Hello &quot;</span>,<span class=\"built_in\">str</span></span><br><span class=\"line\">        time.sleep(<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">name_list =[<span class=\"string\">&#x27;dd&#x27;</span>,<span class=\"string\">&#x27;aa&#x27;</span>,<span class=\"string\">&#x27;bb&#x27;</span>,<span class=\"string\">&#x27;cc&#x27;</span>]</span><br><span class=\"line\">start_time = time.time()</span><br><span class=\"line\">pool = threadpool.ThreadPool(<span class=\"number\">10</span>) </span><br><span class=\"line\">requests = threadpool.makeRequests(sayhello, name_list) </span><br><span class=\"line\"><span class=\"keyword\">for</span> req <span class=\"keyword\">in</span> requests:</span><br><span class=\"line\">    pool.putRequest(req) </span><br><span class=\"line\">pool.wait() </span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&#x27;%d second&#x27;</span>% (time.time()-start_time)</span><br></pre></td></tr></table></figure>\n\n\n<hr>\n<hr>\n<hr>\n<h1 id=\"Math-库\"><a href=\"#Math-库\" class=\"headerlink\" title=\"Math 库\"></a>Math 库</h1><pre><code>import math\n</code></pre>\n<h3 id=\"数值取整\"><a href=\"#数值取整\" class=\"headerlink\" title=\"数值取整\"></a>数值取整</h3><pre><code>ceil、floor    还有一个不是此库中的round\n</code></pre>\n<p>找来翻译就是 ： 小区、地板、回合………… 好吧，是（抹灰泥装镶板、最低的，最小的、周围，围绕）</p>\n<pre><code># 使用方法为：\nmath.ceil(3.12)\nmath.floor(3.24)\nround(3.51)\nround(3.10999999999, 10)\n#取值时的参考步长，好像（😭）是10就是最大步长了，再大没意义\n# 手动赋值超过9位也就是10位小数的时候在PyCharm里直接赋值调试就自己约了，\n# 而一般产生精度漂移都是十几位小数开外的。emm   就这么表达了，看得懂\n</code></pre>\n<blockquote>\n<p>4.0</p>\n</blockquote>\n<blockquote>\n<p>3.0</p>\n</blockquote>\n<blockquote>\n<p>4.0</p>\n</blockquote>\n<blockquote>\n<p>3.11</p>\n</blockquote>\n<hr>\n<hr>\n<hr>\n<hr>\n<h1 id=\"令程序有序执行的方法\"><a href=\"#令程序有序执行的方法\" class=\"headerlink\" title=\"令程序有序执行的方法\"></a>令程序有序执行的方法</h1><h2 id=\"对象（伪类）间变量传递\"><a href=\"#对象（伪类）间变量传递\" class=\"headerlink\" title=\"对象（伪类）间变量传递\"></a>对象（伪类）间变量传递</h2><p>Like This：</p>\n<pre><code>class A(object):\n&quot;&quot;&quot;docstring for A&quot;&quot;&quot;\n    def __init__(self, name):\n        super(A, self).__init__()\n        self.name = name\n        self.a = 0\n    def da(self):\n        print self.name\n        print self.a    \na = A(&#39;I am A&#39;)\na.da()\n\n\nclass B(object):\n&quot;&quot;&quot;docstring for B&quot;&quot;&quot;\n    def __init__(self, aclass):\n        super(B, self).__init__()\n        self.aclass = aclass\n        self.aclass.a += 1\n    def dada(self):\n        self.aclass.da()\nb = B(a)\nb.dada()\n\nclass C(object):\n&quot;&quot;&quot;docstring for B&quot;&quot;&quot;\n    def __init__(self, aclass):\n        super(C, self).__init__()\n        self.aclass = aclass\n        self.aclass.a += 1\n    def dada(self):\n        self.aclass.da()\nc = C(a)\nc.dada()\n</code></pre>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>0</p>\n</blockquote>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>1</p>\n</blockquote>\n<blockquote>\n<p>I am A</p>\n</blockquote>\n<blockquote>\n<p>2</p>\n</blockquote>\n<p>B与C分别在去改变读取在A中定义的数值。  嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(<em>￣▽￣</em>)o就是这么写意和惬意。在VN.PY中有记录，不过还是拿过来吧，毕竟python用法</p>\n<hr>\n<h2 id=\"字典中建立函数映射，方便调用\"><a href=\"#字典中建立函数映射，方便调用\" class=\"headerlink\" title=\"字典中建立函数映射，方便调用~\"></a>字典中建立函数映射，方便调用~</h2><pre><code>def add(x, y):\n    return x + y\ndef sub(x, y):\n    return x - y\na = &#123;&#39;add&#39;:add, &#39;sub&#39;:sub&#125;\na\na[&#39;add&#39;](1, 2)\na[&#39;sub&#39;](1, 2)\n</code></pre>\n<blockquote>\n<p>{‘add’: &lt;function add at 0x02D162B0&gt;, ‘sub’: &lt;function sub at 0x02D16530&gt;}</p>\n</blockquote>\n<blockquote>\n<p>3</p>\n</blockquote>\n<blockquote>\n<p>-1</p>\n</blockquote>\n<h3 id=\"collections-模块\"><a href=\"#collections-模块\" class=\"headerlink\" title=\"collections 模块\"></a>collections 模块</h3><h4 id=\"namedtuple-1\"><a href=\"#namedtuple-1\" class=\"headerlink\" title=\"namedtuple\"></a>namedtuple</h4><pre><code>给元组元素命名（貌似写过这个笔记欸，不过现在才发现这几个都是在一个模块下的）\n</code></pre>\n<h4 id=\"deque\"><a href=\"#deque\" class=\"headerlink\" title=\"deque\"></a>deque</h4><pre><code>#双端队列  快速插入 以及取出\nl.insert(0, v)\nl.pop(0)\n\nl.popleft()\nl.appendleft()\n# 数据量大时，速度优于原生list\n</code></pre>\n<h6 id=\"a-Game\"><a href=\"#a-Game\" class=\"headerlink\" title=\"a Game:\"></a>a Game:</h6><pre><code>import sys\nimport time\nfrom collections import deque\nfancy_loading = deque(&#39;&gt;--------------------&#39;)\nwhile True:\n    print &#39;\\r%s&#39; % &#39;&#39;.join(fancy_loading),\n    fancy_loading.rotate(1)\n    sys.stdout.flush()\n    time.sleep(0.08)\n    Result:\n# 一个无尽循环的跑马灯\n</code></pre>\n<h4 id=\"Counter\"><a href=\"#Counter\" class=\"headerlink\" title=\"Counter\"></a>Counter</h4><pre><code># 计数器\nfrom collections import Counter\ns = &#39;&#39;&#39;A Counter is a dict subclass for counting hashable objects. \n    It is an unordered collection where elements are stored as \n    dictionary keys and their counts are stored as dictionary values. \n    Counts are allowed to be any integer value including zero or \n    negative counts. The Counter class is similar to bags or multisets in other         \n    languages.&#39;&#39;&#39;.lower()\nc = Counter(s)\nprint c.most_common(5)\n</code></pre>\n<blockquote>\n<p>[(‘ ‘, 54), (‘e’, 32), (‘s’, 25), (‘a’, 24), (‘t’, 24)]</p>\n</blockquote>\n<h4 id=\"OrderDict\"><a href=\"#OrderDict\" class=\"headerlink\" title=\"OrderDict\"></a>OrderDict</h4><pre><code># 有序字典：记录了数据存入时的先后顺序\n# 不过发现一个骚操作：\n</code></pre>\n<h4 id=\"defaultdict\"><a href=\"#defaultdict\" class=\"headerlink\" title=\"defaultdict\"></a>defaultdict</h4><pre><code># 默认字典： 当key不存在时，返回此结果\n</code></pre>\n<hr>\n<h2 id=\"线程\"><a href=\"#线程\" class=\"headerlink\" title=\"线程\"></a>线程</h2><pre><code>创建线程： 使用Threading模块创建，从threading.Thread继承，然后重写__init__ 和run 方法\n</code></pre>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"> </span><br><span class=\"line\">exitFlag = <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myThread</span> (<span class=\"params\">threading.Thread</span>):</span>   <span class=\"comment\">#继承父类threading.Thread</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, threadID, name, counter</span>):</span>        </span><br><span class=\"line\">        threading.Thread.__init__(self)</span><br><span class=\"line\">        self.threadID = threadID</span><br><span class=\"line\">        self.name = name</span><br><span class=\"line\">        self.counter = counter</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span>(<span class=\"params\">self</span>):</span>      </span><br><span class=\"line\">    <span class=\"comment\">#把要执行的代码写到run函数里面 线程在创建后会直接运行run函数 </span></span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Starting &quot;</span> + self.name</span><br><span class=\"line\">        写到这儿</span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Exiting &quot;</span> + self.name</span><br><span class=\"line\"></span><br><span class=\"line\">thread1 = myThread(<span class=\"number\">1</span>, <span class=\"string\">&quot;Thread - 1&quot;</span> , <span class=\"number\">1</span>)</span><br><span class=\"line\">thread1 = myThread(<span class=\"number\">2</span>, <span class=\"string\">&quot;Thread - 2&quot;</span> , <span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"comment\"># 开启</span></span><br><span class=\"line\">thread1.start()</span><br><span class=\"line\">thread2.start()</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"线程同步\"><a href=\"#线程同步\" class=\"headerlink\" title=\"线程同步\"></a>线程同步</h3><p>不同线程对某个数据同时修改就很刺激，所以需要同步。（当然也可以选择不）<br>其实也简单，如下：</p>\n<pre><code>import threading\nthreadingLock = threading.Lock()\n# 从这儿领一把锁\n# 然后在 run()函数中，“写到这儿——也就是工作函数之前，写上\nthreadingLock.acquire()\n# 随后在工作函数之后\n# threadingLock.release()\n</code></pre>\n<p>然后拿到小锁子的函数就能运行，运行完了把小锁子释放掉。为啥不是钥匙🔑……好吧。我就称呼它我就称呼它梭子吧——</p>\n<h2 id=\"队列\"><a href=\"#队列\" class=\"headerlink\" title=\"队列\"></a>队列</h2><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">线程优先级队列</span><br><span class=\"line\">Queue.qsize()\t    返回队列的里站了几个</span><br><span class=\"line\">Queue.empty()           如果队列为空，返回True,反之False</span><br><span class=\"line\">Queue.full()            如果队列满了，返回True,反之False</span><br><span class=\"line\">Queue.full 与 maxsize   大小对应</span><br><span class=\"line\">Queue.get([block[, timeout]]) </span><br><span class=\"line\"><span class=\"code\">\t获取队列,timeout`等待时间</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">Queue.get_nowait() 相当 </span></span><br><span class=\"line\"><span class=\"code\">Queue.get(False)</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">Queue.put(item) 写入队列，timeout 等待时间</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">Queue.put_nowait(item) 相当</span></span><br><span class=\"line\"><span class=\"code\">Queue.put(item, False)</span></span><br><span class=\"line\"><span class=\"code\"></span></span><br><span class=\"line\"><span class=\"code\">Queue.task_done()       在完成一项工作之后，</span></span><br><span class=\"line\"><span class=\"code\">Queue.task_done()       函数向任务已经完成的队列发送一个信号</span></span><br><span class=\"line\"><span class=\"code\">Queue.join()            实际上意味着等到队列为空，再执行别的操作</span></span><br></pre></td></tr></table></figure>\n\n<p>来段儿示例：来自<a href=\"http://www.runoob.com/python/python-multithreading.html\">这儿</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/python</span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding: UTF-8 -*-</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">import</span> Queue</span><br><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"> </span><br><span class=\"line\">exitFlag = <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">myThread</span> (<span class=\"params\">threading.Thread</span>):</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, threadID, name, q</span>):</span></span><br><span class=\"line\">        threading.Thread.__init__(self)</span><br><span class=\"line\">        self.threadID = threadID</span><br><span class=\"line\">        self.name = name</span><br><span class=\"line\">        self.q = q</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Starting &quot;</span> + self.name</span><br><span class=\"line\">        process_data(self.name, self.q)</span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Exiting &quot;</span> + self.name</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">process_data</span>(<span class=\"params\">threadName, q</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"keyword\">not</span> exitFlag:</span><br><span class=\"line\">        queueLock.acquire()</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> workQueue.empty():</span><br><span class=\"line\">            data = q.get()  </span><br><span class=\"line\">            queueLock.release()</span><br><span class=\"line\">            <span class=\"built_in\">print</span> <span class=\"string\">&quot;%s processing %s&quot;</span> % (threadName, data)   </span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            queueLock.release()</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\"> </span><br><span class=\"line\">threadList = [<span class=\"string\">&quot;Thread-1&quot;</span>, <span class=\"string\">&quot;Thread-2&quot;</span>, <span class=\"string\">&quot;Thread-3&quot;</span>]</span><br><span class=\"line\">nameList = [<span class=\"string\">&quot;One&quot;</span>, <span class=\"string\">&quot;Two&quot;</span>, <span class=\"string\">&quot;Three&quot;</span>, <span class=\"string\">&quot;Four&quot;</span>, <span class=\"string\">&quot;Five&quot;</span>]</span><br><span class=\"line\">queueLock = threading.Lock()</span><br><span class=\"line\">workQueue = Queue.Queue(<span class=\"number\">10</span>)</span><br><span class=\"line\">threads = []</span><br><span class=\"line\">threadID = <span class=\"number\">1</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 创建新线程</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> tName <span class=\"keyword\">in</span> threadList:</span><br><span class=\"line\">    thread = myThread(threadID, tName, workQueue)</span><br><span class=\"line\">    thread.start()</span><br><span class=\"line\">    threads.append(thread)</span><br><span class=\"line\">    threadID += <span class=\"number\">1</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 填充队列</span></span><br><span class=\"line\">queueLock.acquire()</span><br><span class=\"line\"><span class=\"keyword\">for</span> word <span class=\"keyword\">in</span> nameList:</span><br><span class=\"line\">    workQueue.put(word)</span><br><span class=\"line\">queueLock.release()</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 等待队列清空</span></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">not</span> workQueue.empty():    </span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 通知线程是时候退出</span></span><br><span class=\"line\">exitFlag = <span class=\"number\">1</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># 等待所有线程完成</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> t <span class=\"keyword\">in</span> threads:</span><br><span class=\"line\">    t.join()</span><br><span class=\"line\"><span class=\"built_in\">print</span> <span class=\"string\">&quot;Exiting Main Thread&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>Starting Thread-1</p>\n</blockquote>\n<blockquote>\n<p>Starting Thread-2</p>\n</blockquote>\n<blockquote>\n<p>Starting Thread-3</p>\n</blockquote>\n<blockquote>\n<p>Thread-1 processing One</p>\n</blockquote>\n<blockquote>\n<p>Thread-2 processing Two</p>\n</blockquote>\n<blockquote>\n<p>Thread-3 processing Three</p>\n</blockquote>\n<blockquote>\n<p>Thread-1 processing Four</p>\n</blockquote>\n<blockquote>\n<p>Thread-2 processing Five</p>\n</blockquote>\n<blockquote>\n<p>Exiting Thread-3</p>\n</blockquote>\n<blockquote>\n<p>Exiting Thread-1</p>\n</blockquote>\n<blockquote>\n<p>Exiting Thread-2</p>\n</blockquote>\n<blockquote>\n<p>Exiting Main Thread</p>\n</blockquote>\n<p>呃， 以上就是我现知道的终极用法，当然其基础于：</p>\n<pre><code>workQueue = Queue.Queue(10)     \n# 创建+设定队列长度（emm 小心卡死就是了）\n# 只要满了再往里塞绝对死，无意外……(lll￢ω￢)\nworkQueue.put(word) \n# 往里塞。  基础就是塞个数字，高级就是塞个线程\nworkQueue.get() \n# 顺序往外取\n# 括号里里面可以写进参数，然而，依然按照顺序往外取，插队办理啥的不存在\n# 另外，队列空的话取依然会死……\n</code></pre>\n<h3 id=\"一些方法\"><a href=\"#一些方法\" class=\"headerlink\" title=\"一些方法\"></a>一些方法</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">q = queue.Queue(maxsize=<span class=\"number\">0</span>) </span><br><span class=\"line\">q.qsize() <span class=\"comment\">#查看队列大小 </span></span><br><span class=\"line\">q.empty() <span class=\"comment\">#判断队列是否为空 </span></span><br><span class=\"line\">q.full() </span><br><span class=\"line\"><span class=\"comment\">#如果maxsize设置了大小(eg:2)，如果q.put()了2个元素，则返回真，反之，则为假 </span></span><br><span class=\"line\">q.get_nowait() </span><br><span class=\"line\"><span class=\"comment\"># 如果队列中没有元素了，只用q.get()</span></span><br><span class=\"line\">（当然，可以设置`q.get(block=<span class=\"literal\">False</span>）`）会使程序卡住，用q.get_nowait()则会报错而不卡住 </span><br><span class=\"line\">q.put_nowait() </span><br><span class=\"line\"><span class=\"comment\"># 如果maxsize设置了大小，用q.put()超过范围则会卡住（当然</span></span><br><span class=\"line\"><span class=\"comment\"># 可以设置属性q.put(block=False)）。用q.put_nowait()则会报错而不卡住</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"老夫的Demo\"><a href=\"#老夫的Demo\" class=\"headerlink\" title=\"老夫的Demo\"></a>老夫的Demo</h3><p><em><strong>消费生产者关系</strong></em></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> queue</span><br><span class=\"line\"><span class=\"keyword\">import</span> threadpool</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\">pool = threadpool.ThreadPool(<span class=\"number\">2</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">que = queue.Queue()</span><br><span class=\"line\"></span><br><span class=\"line\">dataList = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>,<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>,<span class=\"number\">0</span>]</span><br><span class=\"line\">dataList1 = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>]</span><br><span class=\"line\">dataList2 = [<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>]</span><br><span class=\"line\">dataList3 = [<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>,<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">printLock = threading.Lock()</span><br><span class=\"line\"></span><br><span class=\"line\">workList = [dataList1, dataList2, dataList3]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker</span>():</span>    </span><br><span class=\"line\">   <span class=\"comment\">## 消费者</span></span><br><span class=\"line\">   <span class=\"comment\">#printLock.acquire()</span></span><br><span class=\"line\">    aaa = que.get()</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(aaa)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> aaa:</span><br><span class=\"line\">        <span class=\"built_in\">print</span> (i)</span><br><span class=\"line\">    <span class=\"comment\">#printLock.release()</span></span><br><span class=\"line\">    time.sleep(<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">geter</span>(<span class=\"params\">task</span>):</span></span><br><span class=\"line\">    <span class=\"comment\">## 生产者</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;emm, put in_:&quot;</span>, task)</span><br><span class=\"line\">    time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">    que.put(task)</span><br><span class=\"line\">    </span><br><span class=\"line\">    a = threading.Thread(target=worker)</span><br><span class=\"line\">    a.start()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> workList:</span><br><span class=\"line\">    geter(i)</span><br></pre></td></tr></table></figure>\n\n<hr>\n<hr>\n<h2 id=\"进程\"><a href=\"#进程\" class=\"headerlink\" title=\"进程\"></a>进程</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> multiprocessing</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker_1</span>(<span class=\"params\">interval, lock, low</span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;worker_1&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (time.time())</span><br><span class=\"line\">    lock.acquire()</span><br><span class=\"line\">    time.sleep(<span class=\"number\">0.1</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;I got the lock&quot;</span>)</span><br><span class=\"line\">    time.sleep(interval)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(low)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;end worker_1&quot;</span>)</span><br><span class=\"line\">    lock.release()</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker_2</span>(<span class=\"params\">interval, lock</span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;worker_2&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (time.time())   </span><br><span class=\"line\">    lock.acquire()</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;I got the lock&quot;</span>)</span><br><span class=\"line\">    time.sleep(interval)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;end worker_2&quot;</span>)</span><br><span class=\"line\">    lock.release()</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">worker_3</span>(<span class=\"params\">interval, lock</span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;worker_3&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (time.time())</span><br><span class=\"line\">    lock.acquire()</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;I got the lock&quot;</span>)</span><br><span class=\"line\">    time.sleep(interval)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;end worker_3&quot;</span>)</span><br><span class=\"line\">    lock.release()</span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    printLock = multiprocessing.Lock()</span><br><span class=\"line\">    <span class=\"comment\"># 🔒 来自关爱的小锁子 </span></span><br><span class=\"line\">    p1 = multiprocessing.Process(target = worker_1, args = (<span class=\"number\">2</span>, printLock, [<span class=\"string\">&quot;asd&quot;</span>, &#123;<span class=\"string\">&#x27;s&#x27;</span>:<span class=\"number\">1</span>&#125;, [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]])).start()</span><br><span class=\"line\">    p2 = multiprocessing.Process(target = worker_2, args = (<span class=\"number\">3</span>, printLock)).start()</span><br><span class=\"line\">    p3 = multiprocessing.Process(target = worker_3, args = (<span class=\"number\">4</span>, printLock)).start()</span><br><span class=\"line\">    w = &#123;<span class=\"string\">&#x27;a&#x27;</span>:p1, <span class=\"string\">&#x27;b&#x27;</span>:p2, <span class=\"string\">&#x27;c&#x27;</span>:p3&#125;</span><br><span class=\"line\">    <span class=\"comment\"># 创建三个进程去运行这三个函数</span></span><br><span class=\"line\">    <span class=\"comment\">#p1.start()</span></span><br><span class=\"line\">    <span class=\"comment\">#p2.start()</span></span><br><span class=\"line\">    <span class=\"comment\">#p3.start()</span></span><br><span class=\"line\">    <span class=\"comment\">#for i in w:</span></span><br><span class=\"line\">    <span class=\"comment\">#    w[i].start()</span></span><br><span class=\"line\">    <span class=\"comment\"># 启动进程</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;The number of CPU is:&quot;</span> + <span class=\"built_in\">str</span>(multiprocessing.cpu_count()))   </span><br><span class=\"line\">    <span class=\"keyword\">for</span> p <span class=\"keyword\">in</span> multiprocessing.active_children():</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;child   p.name:&quot;</span> + p.name + <span class=\"string\">&quot;\\tp.id&quot;</span> + <span class=\"built_in\">str</span>(p.pid))</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;Main All Done&quot;</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># dt 2018年5月18日11点22分</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>worker_1<br>1526613489.1864893<br>worker_2<br>1526613489.1932006<br>The number of CPU is:4<br>child   p.name:Process-3        p.id208<br>child   p.name:Process-1        p.id206<br>child   p.name:Process-2        p.id207<br>Main All Done<br>worker_3<br>1526613489.1968668<br>I got the lock<br>[‘asd’, {‘s’: 1}, [1, 2, 3]]<br>end worker_1<br>I got the lock</p>\n<p>end worker_2<br>I got the lock<br>end worker_3</p>\n</blockquote>\n<p><font color=ca5a00>插一句话</font><br>线程和进程的关系，貌似与电脑双系统和系统再开虚拟机的关系emm  对于资源利用的角度上。</p>\n<h5 id=\"没有传参的进程\"><a href=\"#没有传参的进程\" class=\"headerlink\" title=\"没有传参的进程\"></a>没有传参的进程</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> multiprocessing</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sayHello</span>():</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;hello~ I can see you&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    p1 = multiprocessing.Process(target=sayHello)</span><br><span class=\"line\">    p2 = multiprocessing.Process(target=sayHello)</span><br><span class=\"line\">    p3 = multiprocessing.Process(target=sayHello)</span><br><span class=\"line\">    p1.start()</span><br><span class=\"line\">    p2.start()</span><br><span class=\"line\">    p3.start()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>如果只是单纯运行，这样就可以了，之所以做这个测试是因为我忌惮于那个<code>args</code>的传参，毕竟<code>()</code>里面若有元素存在就必须要有逗号…   看来没有传参的话就不需要了<br>一个参数<code>a</code>的时候: <code>(a, )</code>emmm🤔</p>\n<h3 id=\"将进程定义为类\"><a href=\"#将进程定义为类\" class=\"headerlink\" title=\"将进程定义为类\"></a>将进程定义为类</h3><pre><code>import multiprocessing\nimport time\nclass ClockProcess(multiprocessing.Process):\n    def __init__(self, interval):\n        multiprocessing.Process.__init__(self)\n        self.interval = interval\n    def run(self):\n        n = 5\n        while n &gt; 0:\n            print(&quot;the time is &#123;0&#125;&quot;.format(time.ctime()))\n            time.sleep(self.interval)\n            n -= 1 \nif __name__ == &#39;__main__&#39;:\n    p = ClockProcess(3)\n    p.start()\n</code></pre>\n<p><font color=red>以上，<code>p.start()</code>被调用时，自动调用<code>run()</code>   另外时间戳都是瞎戳的，所以… emm 这都一年之前的东西了，现在才想起来戳时间有点儿纪念意义(⊙﹏⊙) </font> </p>\n<blockquote>\n<p>2018年5月18日</p>\n</blockquote>\n<h4 id=\"属性-1\"><a href=\"#属性-1\" class=\"headerlink\" title=\"属性\"></a>属性</h4><pre><code>daemon ：是否伴随主程序结束而结束\nLock: 锁：（如下， 防止访问共享资源时冲突，如以上打印时间时出现的不连续打印😰）\ndef worker(lock, var):\n    try:\n        ***\n    finally:\n        lock.release()\nlock = multiprocessing.Lock()\nvar = &#39;我是变量&#39;\np = multiptocessing.Process(target = worker, args = (lock, var))\n</code></pre>\n<h2 id=\"警个告\"><a href=\"#警个告\" class=\"headerlink\" title=\"警个告\"></a><font color=#cc0000><em><strong>警个告</strong></em></font></h2><p>创建进程分支的函数选择只能隶属于<code>__main__</code>下或者是隶属与创建进程的函数级别相同的级别，例如今天在main下一个函数中选择目标函数为此函数的函数就不可以… 如下：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">a</span>():</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">c</span>(<span class=\"params\">para</span>):</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\">\t*(target=b, args=(<span class=\"number\">1</span>,)) \t🌹</span><br><span class=\"line\">    *(target=c, args=(<span class=\"number\">1</span>,)) \t❌</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">b</span>(<span class=\"params\">para</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n<p>emm，上述表述的很明确，但是昨天又重新犯了这个问题… 进程的执行者放到了类中的某个函数，然后又提出到<code>__main__ </code>中函数，所以都不能执行，最终放到`__main__``外，与它同级，也就是def 前无空格。 才能“受命”。</p>\n<h4 id=\"通过队列来存储不同进程产生的结果\"><a href=\"#通过队列来存储不同进程产生的结果\" class=\"headerlink\" title=\"通过队列来存储不同进程产生的结果\"></a>通过队列来存储不同进程产生的结果</h4><p>{来自}(<a href=\"https://blog.csdn.net/u014556057/article/details/66974452\">https://blog.csdn.net/u014556057/article/details/66974452</a>)</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># -*- coding:utf-8 -*-</span><br><span class=\"line\">from multiprocessing import Process, Queue, Lock</span><br><span class=\"line\"></span><br><span class=\"line\">L &#x3D; [1, 2, 3]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">def add(q, lock, a, b):</span><br><span class=\"line\">    lock.acquire()  # 加锁避免写入时出现不可预知的错误</span><br><span class=\"line\">    L1 &#x3D; range(a, b)</span><br><span class=\"line\">    lock.release()</span><br><span class=\"line\">    q.put(L1)</span><br><span class=\"line\">    print L1</span><br><span class=\"line\"></span><br><span class=\"line\">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class=\"line\">    q &#x3D; Queue()</span><br><span class=\"line\">    lock &#x3D; Lock()</span><br><span class=\"line\">    p1 &#x3D; Process(target&#x3D;add, args&#x3D;(q, lock, 20, 30))</span><br><span class=\"line\">    p2 &#x3D; Process(target&#x3D;add, args&#x3D;(q, lock, 30, 40))</span><br><span class=\"line\">    p1.start()</span><br><span class=\"line\">    p2.start()</span><br><span class=\"line\">    p1.join()</span><br><span class=\"line\">    p2.join()</span><br><span class=\"line\"></span><br><span class=\"line\">    L +&#x3D; q.get() + q.get()</span><br><span class=\"line\">    print L</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>[20, 21, 22, 23, 24, 25, 26, 27, 28, 29]<br>[30, 31, 32, 33, 34, 35, 36, 37, 38, 39]<br>[1, 2, 3, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]</p>\n</blockquote>\n<hr>\n<hr>\n<h2 id=\"再加一个协程\"><a href=\"#再加一个协程\" class=\"headerlink\" title=\"再加一个协程\"></a>再加一个协程</h2><h3 id=\"基础实现：\"><a href=\"#基础实现：\" class=\"headerlink\" title=\"基础实现：\"></a>基础实现：</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># yield</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">creatAor</span>():</span></span><br><span class=\"line\">    mylist = <span class=\"built_in\">range</span>(<span class=\"number\">3</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> mylist:</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> i*i</span><br><span class=\"line\"></span><br><span class=\"line\">mygenerator = creatAor()  <span class=\"comment\"># 生成一个生成器</span></span><br><span class=\"line\"><span class=\"built_in\">print</span> (mygenerator)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> mygenerator:</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (i)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>&lt;generator object creatAor at 0x7f54ed368f10&gt;<br>0<br>1<br>4</p>\n</blockquote>\n<p>当调用函数时，其返回并不立马执行（显示）——emm 经过十几分钟😰的观察👀说那么玄乎，.其实就是在函数执行过程中，在<code>yield</code>处把后面紧接的东西记录下来，之后最后生成一个可迭代的对象。 所以网上说时生成器也不可厚非，但表达真的是……不过貌似.不仅仅是记录后面紧跟的东西…</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vim </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">creatAor</span>():</span></span><br><span class=\"line\">    mylist = <span class=\"built_in\">range</span>(<span class=\"number\">3</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;so jia nei?&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> mylist:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;pre a hou ga&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">yield</span> i*i</span><br><span class=\"line\">        <span class=\"built_in\">print</span> (<span class=\"string\">&quot;nihoua&quot;</span>)</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (<span class=\"string\">&quot;2333333&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">mygenerator = creatAor()</span><br><span class=\"line\"><span class=\"built_in\">print</span> (mygenerator)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> mygenerator:</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (i)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>&lt;generator object creatAor at 0x7fe2585a8f10&gt;<br>so jia nei?<br>pre a hou ga<br>0<br>nihoua<br>pre a hou ga<br>1<br>nihoua<br>pre a hou ga<br>4<br>nihoua<br>2333333</p>\n</blockquote>\n<p>所以看这苗头像是重新执行了一次函数，但是将后面紧跟的东西也进行了记录</p>\n<p>应用到协程中，便是：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">consumer</span>():</span></span><br><span class=\"line\">    r = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> <span class=\"literal\">True</span>:</span><br><span class=\"line\">        n = <span class=\"keyword\">yield</span> r</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> n:</span><br><span class=\"line\">            <span class=\"keyword\">return</span></span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;[CONSUMER] Consuming %s....&#x27;</span> % n)</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">        r = <span class=\"string\">&#x27;200 OK&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">produce</span>(<span class=\"params\">c</span>):</span></span><br><span class=\"line\">    c.<span class=\"built_in\">next</span>()</span><br><span class=\"line\">    n = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span> n &lt; <span class=\"number\">5</span>:</span><br><span class=\"line\">        n = n + <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;[PRODUCER] Producing %s...&#x27;</span> % n)</span><br><span class=\"line\">        r = c.send(n)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;[PRODUCER] Consumer return: %s\\n&#x27;</span> % r)</span><br><span class=\"line\">    c.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__==<span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    c = consumer()</span><br><span class=\"line\">    produce(c)</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> c:</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(i)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>[PRODUCER] Producing 1…<br>[CONSUMER] Consuming 1….<br>[PRODUCER] Consumer return: 200 OK</p>\n<p>[PRODUCER] Producing 2…<br>[CONSUMER] Consuming 2….<br>[PRODUCER] Consumer return: 200 OK</p>\n<p>[PRODUCER] Producing 3…<br>[CONSUMER] Consuming 3….<br>[PRODUCER] Consumer return: 200 OK<br>…<br>…</p>\n</blockquote>\n<p>那么，是什么道理呢？</p>\n<h4 id=\"send-next-方法的背后今生\"><a href=\"#send-next-方法的背后今生\" class=\"headerlink\" title=\"send next 方法的背后今生\"></a>send next 方法的背后今生</h4><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">my</span>():</span></span><br><span class=\"line\">    value = <span class=\"keyword\">yield</span> <span class=\"number\">1</span></span><br><span class=\"line\">    value = <span class=\"keyword\">yield</span> value</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;finally: &#x27;</span>, value)</span><br><span class=\"line\">ge = my()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(ge.<span class=\"built_in\">next</span>())</span><br><span class=\"line\"><span class=\"built_in\">print</span>(ge.send(<span class=\"number\">2</span>))</span><br><span class=\"line\"><span class=\"built_in\">print</span>(ge.send(<span class=\"number\">3</span>))</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>1<br>2<br>(‘finally: ‘, 3)<br>Traceback (most recent call last):<br>  File “yield_emm3.py”, line 8, in <module><br>    print(ge.send(3))<br>StopIteration</p>\n</blockquote>\n<p>可知：<br> 当<code>next</code>时，<code>yield</code>挂起，但将之后的<code>1</code>返回。而后<code>send</code>激活了之前挂起赋值动作，但此时<code>yield 1</code>被替换为<code>send</code>来的<code>2</code>所以<code>value</code>被置为<code>2</code>. 再第三次调用，完成赋值动作之后，由于只被挂起两次动作，而这里调取了三次，所以报错 停止递归 。若直接递归则得到1 和 None.   </p>\n<p>所以 <code>next</code>与<code>send</code>都是用来激活挂起动作而使用的，但<code>send</code>好在可以与之交互。<br><font color=red>在<code>send``之前需先</code>next<code>否则提示</code>can’t send * to a just-started generator`</font>(⊙﹏⊙)  我上面阐述的挂起，激活，是不是出现了什么偏差…</p>\n<blockquote>\n<p>2018年5月18日16点30分</p>\n</blockquote>\n<h3 id=\"较完善方案：\"><a href=\"#较完善方案：\" class=\"headerlink\" title=\"较完善方案：\"></a>较完善方案：</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> gevent</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f</span>(<span class=\"params\">n</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(n):</span><br><span class=\"line\">       <span class=\"built_in\">print</span> gevent.getcurrent(), i</span><br><span class=\"line\"></span><br><span class=\"line\">g2 = gevent.spawn(f, <span class=\"number\">5</span>)</span><br><span class=\"line\">g3 = gevent.spawn(f, <span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">g1.join()</span><br><span class=\"line\">g3.join()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> gevent</span><br><span class=\"line\"><span class=\"keyword\">from</span> gevent <span class=\"keyword\">import</span> monkey; monkey.patch_all()</span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f</span>(<span class=\"params\">url</span>):</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&#x27;GET: %s&#x27;</span> % url</span><br><span class=\"line\">    resp = urllib2.urlopen(url)</span><br><span class=\"line\">    data = resp.read()</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&#x27;[%d] bytes received from %s\\n&#x27;</span> %(<span class=\"built_in\">len</span>(data), url)</span><br><span class=\"line\">    </span><br><span class=\"line\">gevent.joinall([</span><br><span class=\"line\">    gevent.spawn(f, <span class=\"string\">&#x27;http://www.cnblogs.com/kaituorensheng/&#x27;</span>),</span><br><span class=\"line\">    gevent.spawn(f, <span class=\"string\">&#x27;https://www.python.org/&#x27;</span>),</span><br><span class=\"line\">    gevent.spawn(f, <span class=\"string\">&#x27;https://www.baidu.com&#x27;</span>),</span><br><span class=\"line\">])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> gevent <span class=\"keyword\">import</span> monkey  </span><br><span class=\"line\">monkey.patch_all()  </span><br><span class=\"line\"><span class=\"keyword\">import</span> gevent  </span><br><span class=\"line\"><span class=\"keyword\">from</span> gevent <span class=\"keyword\">import</span> Greenlet  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Task</span>(<span class=\"params\">Greenlet</span>):</span>  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span>(<span class=\"params\">self, name</span>):</span>  </span><br><span class=\"line\">        Greenlet.__init__(self)  </span><br><span class=\"line\">        self.name = name      </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_run</span>(<span class=\"params\">self</span>):</span>  </span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;Task %s: some task...&quot;</span> % self.name  </span><br><span class=\"line\">  </span><br><span class=\"line\">t1 = Task(<span class=\"string\">&quot;task1&quot;</span>)  </span><br><span class=\"line\">t2 = Task(<span class=\"string\">&quot;task2&quot;</span>)  </span><br><span class=\"line\">t1.start()  </span><br><span class=\"line\">t2.start()  </span><br><span class=\"line\"><span class=\"comment\"># here we are waiting all tasks  </span></span><br><span class=\"line\">gevent.joinall([t1,t2])  </span><br></pre></td></tr></table></figure>\n\n<p>和线程 进程 差不多一个用法，只不过没锁，也不需要锁。</p>\n<hr>\n<hr>\n<hr>\n<h3 id=\"futures\"><a href=\"#futures\" class=\"headerlink\" title=\"futures\"></a>futures</h3><h4 id=\"futures-ThreadPoolExecutor\"><a href=\"#futures-ThreadPoolExecutor\" class=\"headerlink\" title=\"futures.ThreadPoolExecutor\"></a>futures.ThreadPoolExecutor</h4><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">with</span> futures.ThreadPoolExecutor(<span class=\"number\">16</span>) <span class=\"keyword\">as</span> executor:</span><br><span class=\"line\">    executor.<span class=\"built_in\">map</span>(run, urls)</span><br><span class=\"line\">    <span class=\"comment\"># 这里是个爬虫，urls就是一个前方run函数的输入变量</span></span><br></pre></td></tr></table></figure>\n\n<hr>\n<hr>\n<hr>\n<h2 id=\"父类中的变量与类中变量\"><a href=\"#父类中的变量与类中变量\" class=\"headerlink\" title=\"父类中的变量与类中变量\"></a>父类中的变量与类中变量</h2><p>在使用<code>self.a</code> 的时候——呃其实是实例化之后a.a时，会只在父类中寻找相关变量，而解决办法居然是将<code>super(A, self).__init__(CtaEngine, setting)</code>移动到变量定义之后，所以谁说这玩意放前面和放后面没有区别的！（欸?😘 这个之后有过说明，不过忘记写在哪儿了，再说一下，就是super….表示父类的初始化动作，__init__因为这个函数名子父相同不会重写，会合并。）</p>\n<h3 id=\"列表的增删添\"><a href=\"#列表的增删添\" class=\"headerlink\" title=\"列表的增删添\"></a>列表的增删添</h3><pre><code>append      # 在最后添加一元素\nextend      # c.extend(a) 将列表a中元素加到c中去。可自加\n+           # 连接两方数组元素 c = a + c        然而创建新对象，耗内存… 所以没啥\n</code></pre>\n<p>用</p>\n<pre><code>del         # 删除对应下标元素 del c[0] 删除c列表第一位元素\npop         # c.pop()   删除最后一位元素\nremove      # 删除指定值元素，有相同值时只会删除第一位\n[ : ]           # 使用切片进行删除\ninsert      # c.insert(0, 1)将1插入到c的最前方，可插列表，插入还是列表\n</code></pre>\n<h3 id=\"一个函数的有效方式只在循环中执行一次-代码日志\"><a href=\"#一个函数的有效方式只在循环中执行一次-代码日志\" class=\"headerlink\" title=\"一个函数的有效方式只在循环中执行一次 - 代码日志\"></a>一个函数的有效方式只在循环中执行一次 - 代码日志</h3><p><a href=\"https://codeday.me/bug/20170901/65228.html\">这</a>是原链接<br>emm 代码反正照着输入是不会有结果的，但感觉挺有戏先保留，以后技术提升再来看</p>\n<h4 id=\"自己的方法\"><a href=\"#自己的方法\" class=\"headerlink\" title=\"自己的方法\"></a>自己的方法</h4><p>自己的方法很简单，很暴力，就是用字典啊—— 当执行过一次之后直接把调用关系扭到别的地方，反正只要是知道结果的判断都可以用字典来代替么。</p>\n<h3 id=\"函数调用函数-and-语法糖\"><a href=\"#函数调用函数-and-语法糖\" class=\"headerlink\" title=\"函数调用函数 and 语法糖 @\"></a>函数调用函数 and 语法糖 @</h3><pre><code>import time\n\ndef timehel(hell):\n    def wrapper():\n            start = time.clock()\n            hell()\n            end =time.clock()\n            print &#39;used:&#39;, end - start\n        return wrapper\n</code></pre>\n<p>@timehel<br>def foo():<br>    print ‘a ho ga’</p>\n<blockquote>\n<p>a ho ga</p>\n</blockquote>\n<blockquote>\n<p>used:  0.000489465229975</p>\n</blockquote>\n<p>其上@timehel 和 foo = timehel(foo)等价（感谢<a href=\"http://www.cnblogs.com/rollenholt/archive/2012/05/02/2479833.html\">被遗忘的博客</a>）… 就是把下方函数当成输入，然后执行通俗来翻译就是： </p>\n<pre><code>@：呼叫timehel   来执行下面这孙子。\n</code></pre>\n<p>这里是官方教你怎么用：<br>    <a href=\"https://wiki.python.org/moin/PythonDecoratorLibrary\">https://wiki.python.org/moin/PythonDecoratorLibrary</a></p>\n<p>其中 函数中定义函数就类似于“父子关系”，也或者叫另辟空间。每次执行父函数时，子函数会有也尽在此时会有被执行的机会，会不会被执行，就看其在其父亲面前的表现了（他爸有没有叫他（有没有调用…））。</p>\n<h3 id=\"变量作用域\"><a href=\"#变量作用域\" class=\"headerlink\" title=\"变量作用域\"></a>变量作用域</h3><p>因为从这个@ 这儿学到的，所以：</p>\n<pre><code>def hel(x):\n    def inner():\n        print x\n    return inner\np1 = hel(1)\np1 = hel(1)\n\np1()\n</code></pre>\n<blockquote>\n<p>1</p>\n</blockquote>\n<pre><code>p2()\n</code></pre>\n<blockquote>\n<p>2</p>\n</blockquote>\n<p>闭包——如果没有inner这东西，下面绝不会输出东西，反而会报错。 直接<code>p1</code>,<code>p2</code>又不会再输出任何东西，只有在定义时会运行一次。 对比于<code>def hel(x):   print x</code>    其中内层原因 先不深究，就脑补成外层需运行时才能去找那些变量，而其中的函数会主动去外围找所需的变量。</p>\n<h4 id=\"应用案例\"><a href=\"#应用案例\" class=\"headerlink\" title=\"应用案例\"></a>应用案例</h4><pre><code>import time\n\ndef coseTime(func):\n    print func\n    def inner(*args, **kwargs):\n        print args, kwargs\n        start = time.clock()\n        func(*args, **kwargs)\n        end = time.clock()\n        print args, kwargs\n\n        print (&#39;Running time: %s Seconds&#39; % (end-start))\n    return inner\n\n@coseTime\ndef hel(x):\n    print (&#39;hello~&#39;)\n\nhel(12)\n</code></pre>\n<blockquote>\n<p>&lt;function hel at 0x02BC5070&gt;<br>(12,) {}<br>hello~<br>(12,) {}<br>Running time: 0.000446197317167 Seconds</p>\n</blockquote>\n<p>用来无视变量来记录 函数运行所需时间的——同时输出其在运行时接入的变量</p>\n<hr>\n<hr>\n<h2 id=\"functools\"><a href=\"#functools\" class=\"headerlink\" title=\"functools\"></a>functools</h2><p>就姑且放这儿吧，毕竟也算是为了有序执行而接触到的</p>\n<h3 id=\"partial\"><a href=\"#partial\" class=\"headerlink\" title=\"partial\"></a>partial</h3><pre><code>import functools\ndef add(a, b):\n    print a, b\n    return a, b\naddplus = functools.partial(add, 3)\naddplus(7)\n</code></pre>\n<blockquote>\n<p>3   7</p>\n</blockquote>\n<pre><code>addplus(add, b = 6)\naddplus(7)\n</code></pre>\n<blockquote>\n<p>7   6</p>\n</blockquote>\n<p>这函数作用是 提前给定函数一个变量值…The functools module is for higher-order functions: functions that act on or return other functions. In general, any callable object can be treated as a function for the purposes of this module. </p>\n<p>我的接触场景是在PyQt 中信号槽循环连接时，用了partial在connect之后<code>.connect(partial(self.start, i))</code>去唯一化相同功能的复用。不过我之前也应该写过类似的，那时我找的解决办法时在连接调用时传参(在Python GUI里面应该会写有吧，假如两三个月前我没脑子短期性失忆的话😭)。emm那个传参是利用Qt机制 不知道孰优孰劣😄 </p>\n<pre><code>运气好，直接翻到：\n    ——那里的应用场景是在鼠标点击按钮捕获点击事件click时传递的参数~\n</code></pre>\n<h1 id=\"lambda\"><a href=\"#lambda\" class=\"headerlink\" title=\"lambda\"></a>lambda</h1><p>使用方法为：</p>\n<pre><code>func = lambda x:x*x\n# :前x表示函数输入，:后为返回值，x*x是这个函数收到输入后所执行的动作\nw = lambda x:func(x)\n</code></pre>\n<hr>\n<hr>\n<hr>\n<hr>\n<hr>\n<h1 id=\"网络编程\"><a href=\"#网络编程\" class=\"headerlink\" title=\"网络编程\"></a>网络编程</h1><h2 id=\"socket\"><a href=\"#socket\" class=\"headerlink\" title=\"socket\"></a>socket</h2><pre><code>import socket\n# 服务端\ns = socket.socket()\nhost = socket.gethostname()\nport = 12345\ns.bind((host, port))\ns.listen(5)\nwhile True:\n    c, addr = s.accept()\n    print &quot;link address is&quot;, addr\n    c.send(&#39;welcome here&#39;)\n    c.close()\n# 客户端\ns = socket.socket()\nhost = socket.gethostname()\nport = 12345\ns.connect((host, port))\n# 此时服务端便弹出 link address is：(&#39;192.168.*.*&#39;, 64*5)\nprint s.recv(1024)\n# 客户端显示welcome here\n</code></pre>\n<h2 id=\"select-与Socket配合的跨平台的异步io模型\"><a href=\"#select-与Socket配合的跨平台的异步io模型\" class=\"headerlink\" title=\"select :   与Socket配合的跨平台的异步io模型\"></a>select :   与Socket配合的跨平台的异步io模型</h2><p>import select<br>import socket<br>import Queue</p>\n<p>#create a socket<br>server = socket.socket(socket.AF_INET,socket.SOCK_STREAM)<br>server.setblocking(False)<br>#set option reused<br>server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR  , 1)</p>\n<p>server_address= (‘192.168.1.102’,10001)<br>server.bind(server_address)</p>\n<p>server.listen(10)</p>\n<p>#sockets from which we except to read<br>inputs = [server]</p>\n<p>#sockets from which we expect to write<br>outputs = []</p>\n<p>#Outgoing message queues (socket:Queue)<br>message_queues = {}</p>\n<p>#A optional parameter for select is TIMEOUT<br>timeout = 20</p>\n<p>while inputs:<br>    print “waiting for next event”<br>    readable , writable , exceptional = select.select(inputs, outputs, inputs, timeout)</p>\n<pre><code># When timeout reached , select return three empty lists\nif not (readable or writable or exceptional) :\n    print &quot;Time out ! &quot;\n    break;    \nfor s in readable :\n    if s is server:\n        # A &quot;readable&quot; socket is ready to accept a connection\n        connection, client_address = s.accept()\n        print &quot;    connection from &quot;, client_address\n        connection.setblocking(0)\n        inputs.append(connection)\n        message_queues[connection] = Queue.Queue()\n    else:\n        data = s.recv(1024)\n        if data :\n            print &quot; received &quot; , data , &quot;from &quot;,s.getpeername()\n            message_queues[s].put(data)\n            # Add output channel for response    \n            if s not in outputs:\n                outputs.append(s)\n        else:\n            #Interpret empty result as closed connection\n            print &quot;  closing&quot;, client_address\n            if s in outputs :\n                outputs.remove(s)\n            inputs.remove(s)\n            s.close()\n            #remove message queue \n            del message_queues[s]\nfor s in writable:\n    try:\n        next_msg = message_queues[s].get_nowait()\n    except Queue.Empty:\n        print &quot; &quot; , s.getpeername() , &#39;queue empty&#39;\n        outputs.remove(s)\n    else:\n        print &quot; sending &quot; , next_msg , &quot; to &quot;, s.getpeername()\n        s.send(next_msg)\n\nfor s in exceptional:\n    print &quot; exception condition on &quot;, s.getpeername()\n    #stop listening for input on the connection\n    inputs.remove(s)\n    if s in outputs:\n        outputs.remove(s)\n    s.close()\n    #Remove message queue\n    del message_queues[s]\n</code></pre>\n<p><a href=\"http://www.cnblogs.com/coser/archive/2012/01/06/2315216.html\">糖拌咸鱼 - 记录学习的点点滴滴~</a></p>\n<p>简单来说一下<code>select</code>的作用：<br>    返回值：三个列表<br>    select方法用来监视文件描述符(当文件描述符条件不满足时，select会阻塞)，当某个文件描述符状态改变后，会返回三个列表<br>        1、当参数1 序列中的fd满足“可读”条件时，则获取发生变化的fd并添加到fd_r_list中<br>        2、当参数2 序列中含有fd时，则将该序列中所有的fd添加到 fd_w_list中<br>        3、当参数3 序列中的fd发生错误时，则将该发生错误的fd添加到 fd_e_list中<br>        4、当超时时间为空，则select会一直阻塞，直到监听的句柄发生变化<br>       当超时时间 ＝ n(正整数)时，那么如果监听的句柄均无任何变化，则select会阻塞n秒，之后返回三个空列表，如果监听的句柄有变化，则直接执行。<br>    <code>epoll</code>很好的改进了<code>select</code> 具体请看(深入理解python中的select模块)[<a href=\"http://blog.csdn.net/songfreeman/article/details/51179213]\">http://blog.csdn.net/songfreeman/article/details/51179213]</a></p>\n<hr>\n<hr>\n<hr>\n<h2 id=\"引用模块\"><a href=\"#引用模块\" class=\"headerlink\" title=\"引用模块\"></a>引用模块</h2><p>action.py中引用model.py为例</p>\n<h3 id=\"同一文件夹下\"><a href=\"#同一文件夹下\" class=\"headerlink\" title=\"同一文件夹下\"></a>同一文件夹下</h3><pre><code>from model import *\n# or\nimport model\n</code></pre>\n<h3 id=\"其下级文件”here”下\"><a href=\"#其下级文件”here”下\" class=\"headerlink\" title=\"其下级文件”here”下\"></a>其下级文件”here”下</h3><pre><code># 在model.py 文件中创建__init__.py空文件\nfrom here import model\n# or\nform here.model import *\n</code></pre>\n<h3 id=\"在上级文件下\"><a href=\"#在上级文件下\" class=\"headerlink\" title=\"在上级文件下\"></a>在上级文件下</h3><pre><code>import sys\nsys.path.append(&quot;..&quot;)\n# 添加上级文件 路径\n# import model\n</code></pre>\n<h3 id=\"在上级文件的下级文件中（也就是在隔壁“wang”文件中）\"><a href=\"#在上级文件的下级文件中（也就是在隔壁“wang”文件中）\" class=\"headerlink\" title=\"在上级文件的下级文件中（也就是在隔壁“wang”文件中）\"></a>在上级文件的下级文件中（也就是在隔壁“wang”文件中）</h3><pre><code># 需要创建__init__.py空文件\n# 添加上级文件路径\nimport wang.model\n</code></pre>\n<h2 id=\"解决编码问题\"><a href=\"#解决编码问题\" class=\"headerlink\" title=\"解决编码问题\"></a>解决编码问题</h2><pre><code>import sys\nreload(sys) \nsys.setdefaultencoding(&#39;utf8&#39;)\n# 这段直接塞它嘴里\n</code></pre>\n<h3 id=\"输出提示打印乱码\"><a href=\"#输出提示打印乱码\" class=\"headerlink\" title=\"输出提示打印乱码\"></a>输出提示打印乱码</h3><pre><code>#coding: utf-8  \nn=raw_input(unicode(&#39;请输入文字&#39;,&#39;utf-8&#39;).encode(&#39;gbk&#39;))  \nprint n  \n</code></pre>\n<h3 id=\"内存异常占用\"><a href=\"#内存异常占用\" class=\"headerlink\" title=\"内存异常占用\"></a>内存异常占用</h3><pre><code>import sys\nv = 1\nsys.getsizeof(v)\n# 可以读出 此变量emm 或者说 对象的内存占用大小\n</code></pre>\n<h2 id=\"异常\"><a href=\"#异常\" class=\"headerlink\" title=\"异常\"></a>异常</h2><h3 id=\"plan1-：\"><a href=\"#plan1-：\" class=\"headerlink\" title=\"plan1 ：\"></a>plan1 ：</h3><pre><code>try:\n#正常的操作\nexcept:\n#发生异常，执行这块代码\nelse:\n#如果没有异常执行这块代码(在执行完try下函数没有异常发生)\n</code></pre>\n<h3 id=\"列表的坑\"><a href=\"#列表的坑\" class=\"headerlink\" title=\"列表的坑\"></a>列表的坑</h3><p>当a 为一个列表<br>    a = [1, 2, 3]<br>    b = a<br>    c = a<br>    d = a<br>    b.append(4)</p>\n<p>这时，abcd四个列表都变成[1, 2, 3, 4]，emm…  所以直接以后不要把一个列表赋值给两个变量…除非不涉及修改，慎重慎重。。不过python中列表有<code>copy</code>一说，不过还没试过</p>\n<h3 id=\"staticmethod\"><a href=\"#staticmethod\" class=\"headerlink\" title=\"@staticmethod\"></a>@staticmethod</h3><pre><code>定义类中的的这个方法为静态方法，同理的还有`@classmethod`类方法。\n</code></pre>\n<h3 id=\"常见异常\"><a href=\"#常见异常\" class=\"headerlink\" title=\"常见异常\"></a>常见异常</h3><pre><code>1.AssertionError：当assert断言条件为假的时候抛出的异常\n2.AttributeError：当访问的对象属性不存在的时候抛出的异常\n3.IndexError：超出对象索引的范围时抛出的异常\n4.KeyError：在字典中查找一个不存在的key抛出的异常\n5.NameError：访问一个不存在的变量时抛出的异常\n6.OSError：操作系统产生的异常\n7.SyntaxError：语法错误时会抛出此异常\n8.TypeError：类型错误，通常是不通类型之间的操作会出现此异常\n9.ZeroDivisionError：进行数学运算时除数为0时会出现此异常··\n</code></pre>\n<hr>\n<hr>\n<hr>\n<h1 id=\"事件模式中，事件篡改事故\"><a href=\"#事件模式中，事件篡改事故\" class=\"headerlink\" title=\"事件模式中，事件篡改事故\"></a>事件模式中，事件篡改事故</h1><p>在循环创建事件时，将<code>event</code> <code>put</code>到队列中，此时，被处理一半，因为不在一个线程所以下一个循环来临就将<code>event</code>的内容进行了修改。 杜绝此方法除了添加锁，只好将事件<code>copy</code>之后再传入时间引擎。如此便可暂防止事件处理一半被修改的事情发生。 </p>\n<hr>\n<hr>\n<hr>\n<h1 id=\"代码块注释\"><a href=\"#代码块注释\" class=\"headerlink\" title=\"代码块注释\"></a>代码块注释</h1><p><a href=\"https://www.jetbrains.com/help/pycharm/surrounding-blocks-of-code-with-language-constructs.html\">Surrounding Blocks of Code with Language Constructs</a></p>\n<h3 id=\"VisualStudio模式：\"><a href=\"#VisualStudio模式：\" class=\"headerlink\" title=\"VisualStudio模式：\"></a>VisualStudio模式：</h3><pre><code>#region Description(说明)\nprint &quot;code here&quot;\n#endregion\n</code></pre>\n<h3 id=\"NetBeans模式：\"><a href=\"#NetBeans模式：\" class=\"headerlink\" title=\"NetBeans模式：\"></a>NetBeans模式：</h3><pre><code>// &lt;editor-fold desc=&quot;Description&quot;&gt;\ncode here\n// &lt;/editor-fold&gt;\n</code></pre>\n<h1 id=\"类\"><a href=\"#类\" class=\"headerlink\" title=\"类\"></a>类</h1><pre><code>以后详谈，本着一切皆对象的原则，所以对于类的了解决定了Python的认知，先记一个\ndef __init__(self):\n        super(Proformance, self).__init__()\n#这个super表示了继承类和被继承类的 __init__调用时序，其它重名函数是覆盖，这个……\n</code></pre>\n<h2 id=\"数据类\"><a href=\"#数据类\" class=\"headerlink\" title=\"数据类\"></a>数据类</h2><p>用一个类来表示一个数据类型（这几天想着这个表示不同数据类型的组合方法恰类似于C中的结构体，然后<code>Python</code>中的数组元素存储各种东西什么类啊、数组套数组啊，字典存储啊，恰巧与C中的指针指向指针……emm ）如：</p>\n<pre><code>class A(object):\n    def __init__(self):\n    self.a = &#39;a&#39;\n    self.b = &#39;b&#39;\nA().__dict__\n</code></pre>\n<blockquote>\n<p>{‘a’: ‘a’, ‘b’: ‘b’}</p>\n</blockquote>\n<p>但是<code>A().__dict__[&#39;a&#39;] = &#39;It is a&#39;</code> 虽然不会报错，但之后再次调用<code>A().__dict__</code>显示结果还是一样，但：</p>\n<pre><code>a = A()\na.__dict__[&#39;a&#39;] = &#39;It is a&#39;\na.__dict__\n</code></pre>\n<blockquote>\n<p>{‘a’: ‘It is a’, ‘b’: ‘b’} </p>\n</blockquote>\n<p>这样我就用过一次，在不确定数据类会有几个元素甚至不知道会是什么名称的时候来创建的，毕竟：(这样的方式可以随便添加嘛)</p>\n<pre><code>a.__dict__[&#39;w&#39;] = &#39;It is www&#39;\na.__dict__\n</code></pre>\n<blockquote>\n<p>{‘a’: ‘It is a’, ‘b’: ‘b’, ‘w’: ‘It is www’</p>\n</blockquote>\n<h3 id=\"若出现docx模块pyInstaller打包问题\"><a href=\"#若出现docx模块pyInstaller打包问题\" class=\"headerlink\" title=\"若出现docx模块pyInstaller打包问题\"></a>若出现docx模块pyInstaller打包问题</h3><p>大概的解决步骤是这样的：<br>找到python-docx包安装路径下的一个名为default.docx的文件，我是通过everything这个强大的搜索工具全局搜索找到这个文件的，它在我本地所在的路径是：E:\\code\\env.env\\Lib\\site-packages\\docx\\templates<br>把找到的default.docx文件复制到我的py脚本文件所在的目录下。<br>修改脚本中创建Document对象的方式：<br>从原来的创建方式：<br>document = Document()<br>修改为：<br>import os<br>document = Document(docx=os.path.join(os.getcwd(), ‘default.docx’))<br>再次用pyinstaller工具打包脚本为exe文件<br>把default.docx文件复制到与生成的exe文件相同的路径下，再次运行exe文件，顺利运行通过，没有再出现之前的报错，问题得到解决。<br>作者：(m2fox)[<a href=\"https://www.jianshu.com/p/94ac13f6633e]\">https://www.jianshu.com/p/94ac13f6633e]</a><br>來源：简书</p>\n<h4 id=\"拼接List字符串\"><a href=\"#拼接List字符串\" class=\"headerlink\" title=\"拼接List字符串\"></a>拼接List字符串</h4><p>将list中的元素拼接起来，并使用<code>,</code>隔开可这么来：</p>\n<pre><code>import itertools \nlist = [&#39;123&#39;, &#39;567&#39;]\nxlist = &quot;,&quot;.join(list)\nor\nylist = &quot;,&quot;.join(*list)\ns = .join(itertools.chain(kwargs.keys()))\n</code></pre>\n<p>区别在于x为一个元素添加一个<code>,</code>，y为把列表中的素也拆分之后再添加</p>\n<h3 id=\"SimpleHTTPServer\"><a href=\"#SimpleHTTPServer\" class=\"headerlink\" title=\"SimpleHTTPServer\"></a>SimpleHTTPServer</h3><p>小型的局域网嘛☺，很常用，不过在Python3中有了变化…</p>\n<figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ Python2</span><br><span class=\"line\">python -m SimpleHTTPServer </span><br><span class=\"line\">---</span><br><span class=\"line\">$ Python3</span><br><span class=\"line\">python -m http.server</span><br></pre></td></tr></table></figure>\n<p><font color=#126590>顺带一提</font>：<code>-m</code>是可以在外执行内库的操作，🦑大概是这个意思吧—— 用<code>pdb</code>的时候也是这么用的…</p>\n<h3 id=\"老夫的月份生成\"><a href=\"#老夫的月份生成\" class=\"headerlink\" title=\"老夫的月份生成\"></a>老夫的月份生成</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"><span class=\"keyword\">import</span> copy</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">splitMonth</span>(<span class=\"params\">start, end</span>):</span></span><br><span class=\"line\">    start = str2Date(start)</span><br><span class=\"line\">    end = str2Date(end)</span><br><span class=\"line\">    _delta = end - start</span><br><span class=\"line\">    datelist = []</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _delta.days &gt; <span class=\"number\">10</span>:</span><br><span class=\"line\">        <span class=\"comment\"># 拆分</span></span><br><span class=\"line\">        <span class=\"comment\"># 按*月*拆分（10日间隔）</span></span><br><span class=\"line\">        n = <span class=\"number\">0</span></span><br><span class=\"line\">        _start = copy.copy(start)</span><br><span class=\"line\">        <span class=\"keyword\">while</span> _delta.days &gt; <span class=\"number\">0</span>:</span><br><span class=\"line\">            n += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> _start.day &lt; <span class=\"number\">10</span>:</span><br><span class=\"line\">                _end = datetime.date(_start.year, _start.month, <span class=\"number\">10</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                    _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(end)))</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">elif</span> _start.day &lt; <span class=\"number\">20</span>:</span><br><span class=\"line\">                _end = datetime.date(_start.year, _start.month, <span class=\"number\">20</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                    _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(end)))</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(<span class=\"number\">15</span>)</span><br><span class=\"line\">                _end = datetime.date(_end.year, _end.month, <span class=\"number\">1</span>) - datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                    _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    datelist.append(date2str(_start), date2str(end))</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">            _delta = end - _start + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> datelist</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [(date2str(start), date2str(end))]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">splitMouthBySE_N</span>(<span class=\"params\">start, end, n</span>):</span></span><br><span class=\"line\">    start = str2Date(start)</span><br><span class=\"line\">    end = str2Date(end)</span><br><span class=\"line\">    _delta = end - start</span><br><span class=\"line\">    datelist = []</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _delta.days &gt; n:</span><br><span class=\"line\">        <span class=\"comment\"># 拆分</span></span><br><span class=\"line\">        <span class=\"comment\"># 按*月*拆分（10日间隔）</span></span><br><span class=\"line\">        _start = copy.copy(start)</span><br><span class=\"line\">        <span class=\"keyword\">while</span> _delta.days &gt; <span class=\"number\">0</span>:</span><br><span class=\"line\">            _loop = <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> _n <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">int</span>(<span class=\"number\">30</span>/n)):</span><br><span class=\"line\">                _loop = _loop + n</span><br><span class=\"line\">                <span class=\"keyword\">if</span> _start.day &lt; _loop:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> _start.month == <span class=\"number\">2</span> <span class=\"keyword\">and</span> _loop &gt; <span class=\"number\">28</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">if</span> _start.year%<span class=\"number\">4</span>:</span><br><span class=\"line\">                            _end = datetime.date(_start.year, _start.month, <span class=\"number\">28</span>)</span><br><span class=\"line\">                        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                            _end = datetime.date(_start.year, _start.month, <span class=\"number\">29</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                        _end = datetime.date(_start.year, _start.month, _loop)</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                        datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                        _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                        datelist.append((date2str(_start), date2str(end)))</span><br><span class=\"line\">                        _delta = datetime.timedelta(<span class=\"number\">0</span>)</span><br><span class=\"line\">                        <span class=\"keyword\">break</span></span><br><span class=\"line\">                    _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(<span class=\"number\">15</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    <span class=\"keyword\">continue</span></span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                _end = datetime.date(_end.year, _end.month, <span class=\"number\">1</span>) - datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">if</span> end &gt; _end:</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> _start &gt; _end:</span><br><span class=\"line\">                        _delta = end - _start + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                        datelist.append((date2str(_start), date2str(_end)))</span><br><span class=\"line\">                    _start = _end + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\">                <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                    datelist.append((date2str(_start), date2str(end)))</span><br><span class=\"line\">                    _delta = datetime.timedelta(<span class=\"number\">0</span>)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                _delta = end - _start + datetime.timedelta(<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> datelist</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> [(date2str(start), date2str(end))]</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">gropdate</span>(<span class=\"params\">datelist, itemNum=<span class=\"number\">0</span>, gropNum=<span class=\"number\">0</span></span>):</span></span><br><span class=\"line\">    <span class=\"comment\">#将传入datelist[(str(start1), str(end1)), (str(start2), str(end2))...] -&gt; 传入为月碎片</span></span><br><span class=\"line\">    <span class=\"comment\"># 打按月对月碎片进行打组。 </span></span><br><span class=\"line\">    <span class=\"comment\"># 传入参数 itemNum: 一个组含几个月, gropNum: 将这些碎片打为几组</span></span><br><span class=\"line\">    _dic = collections.OrderedDict()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> datelist:</span><br><span class=\"line\">        <span class=\"comment\"># 按月分组</span></span><br><span class=\"line\">        keyName = i[<span class=\"number\">0</span>].split(<span class=\"string\">&#x27;-&#x27;</span>)[<span class=\"number\">1</span>]</span><br><span class=\"line\">        <span class=\"keyword\">if</span> keyName <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> _dic:</span><br><span class=\"line\">            _dic[keyName] = []</span><br><span class=\"line\">        _dic[keyName].append(i)</span><br><span class=\"line\">    monthList = []</span><br><span class=\"line\">    groups = []</span><br><span class=\"line\">    groupListTemp = []</span><br><span class=\"line\">    groupList = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> _dic.keys():</span><br><span class=\"line\">        <span class=\"comment\"># 得到月份列表</span></span><br><span class=\"line\">        monthList.append(i) <span class=\"comment\">#[1,2,3...,7,8,9]</span></span><br><span class=\"line\">    monthNum = <span class=\"built_in\">len</span>(monthList)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> gropNum:</span><br><span class=\"line\">        itemNum = <span class=\"built_in\">round</span>(<span class=\"built_in\">float</span>(monthNum)/gropNum)</span><br><span class=\"line\">        itemNum = <span class=\"built_in\">int</span>(itemNum)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> itemNum:</span><br><span class=\"line\">        slipNum = <span class=\"built_in\">int</span>(monthNum/itemNum)</span><br><span class=\"line\">        start = <span class=\"number\">0</span></span><br><span class=\"line\">        end = <span class=\"built_in\">int</span>(itemNum)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> mon <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(slipNum):</span><br><span class=\"line\">            groups.append(monthList[<span class=\"built_in\">int</span>(start):<span class=\"built_in\">int</span>(end)])</span><br><span class=\"line\">            start = copy.copy(end)</span><br><span class=\"line\">            end = end + itemNum</span><br><span class=\"line\">        <span class=\"keyword\">if</span> monthNum%itemNum:</span><br><span class=\"line\">            groups.append(monthList[start:monthNum])    <span class=\"comment\"># 非整除补足</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> groups:</span><br><span class=\"line\">            <span class=\"keyword\">for</span> ii <span class=\"keyword\">in</span> i:</span><br><span class=\"line\">                groupListTemp.append(_dic[ii])</span><br><span class=\"line\">            groupList.append(groupListTemp)</span><br><span class=\"line\">            groupListTemp = []</span><br><span class=\"line\">        <span class=\"keyword\">return</span> groupList</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">None</span></span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"comment\"># region 日期`date`格式与`str`转换处理</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">date2str</span>(<span class=\"params\">_date</span>):</span></span><br><span class=\"line\">    <span class=\"comment\"># datetime.date 转换为 str    (有为了适配原程序的补零操作…)</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> _date.month &lt; <span class=\"number\">10</span>:</span><br><span class=\"line\">        strDate = <span class=\"built_in\">str</span>(_date.year) + <span class=\"string\">&#x27;-&#x27;</span> + <span class=\"string\">&#x27;0&#x27;</span>+<span class=\"built_in\">str</span>(_date.month) + <span class=\"string\">&#x27;-&#x27;</span> + <span class=\"built_in\">str</span>(_date.day)</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        strDate = <span class=\"built_in\">str</span>(_date.year) + <span class=\"string\">&#x27;-&#x27;</span> + <span class=\"built_in\">str</span>(_date.month) + <span class=\"string\">&#x27;-&#x27;</span> + <span class=\"built_in\">str</span>(_date.day)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _date.day &lt; <span class=\"number\">10</span>:</span><br><span class=\"line\">        strDate = strDate[:-<span class=\"number\">1</span>] + <span class=\"string\">&#x27;0&#x27;</span>+<span class=\"built_in\">str</span>(_date.day)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> strDate</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">str2Date</span>(<span class=\"params\">_str</span>):</span></span><br><span class=\"line\">    <span class=\"comment\"># str 转换为 datetime.date</span></span><br><span class=\"line\">    y, m, d = _<span class=\"built_in\">str</span>.split(<span class=\"string\">&#x27;-&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> datetime.date(<span class=\"built_in\">int</span>(y), <span class=\"built_in\">int</span>(m), <span class=\"built_in\">int</span>(d))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># endregion </span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(splitMouthBySE_N(<span class=\"string\">&#x27;2016-01-02&#x27;</span>, <span class=\"string\">&#x27;2018-03-01&#x27;</span>, <span class=\"number\">5</span>))</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Python3-6之后的奇淫技巧\"><a href=\"#Python3-6之后的奇淫技巧\" class=\"headerlink\" title=\"Python3.6之后的奇淫技巧\"></a>Python3.6之后的奇淫技巧</h2><ol>\n<li>可使用下划线将长数字隔开，便于阅读  <code>10000</code>=<code>10_000</code></li>\n<li>字符串操作除了 <code>%</code>和<code>format</code>之外还有<code>f</code>操作<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ %</span><br><span class=\"line\">s = <span class=\"string\">&quot;%s is %d&quot;</span> % (<span class=\"string\">&#x27;two&#x27;</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">$ <span class=\"built_in\">format</span></span><br><span class=\"line\">s = <span class=\"string\">&quot;&#123;fruit&#125; is &#123;color&#125;&quot;</span>.<span class=\"built_in\">format</span>(fruit=<span class=\"string\">&#x27;apple&#x27;</span>, color=<span class=\"string\">&#x27;red&#x27;</span>)</span><br><span class=\"line\">$ f</span><br><span class=\"line\">name = <span class=\"string\">&#x27;Bob&#x27;</span></span><br><span class=\"line\"><span class=\"string\">f&#x27;Hello, <span class=\"subst\">&#123;name&#125;</span>!&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">### 甚至</span></span><br><span class=\"line\">a = <span class=\"number\">5</span></span><br><span class=\"line\">b = <span class=\"number\">10</span></span><br><span class=\"line\"><span class=\"string\">f&#x27;Five plus ten is <span class=\"subst\">&#123;a + b&#125;</span> and not <span class=\"subst\">&#123;<span class=\"number\">2</span> * (a + b)&#125;</span>.&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">#### 精度</span></span><br><span class=\"line\">PI = <span class=\"number\">3.141592653</span></span><br><span class=\"line\"><span class=\"string\">f&quot;Pi is <span class=\"subst\">&#123;PI:<span class=\"number\">.2</span>f&#125;</span>&quot;</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"string\">&#x27;Pi is 3.14&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>error = <span class=\"number\">50159747054</span></span><br><span class=\"line\"><span class=\"comment\">##### 以16进制格式化</span></span><br><span class=\"line\">f&#x27;Programmer Error: &#123;error:#x&#125;&#x27;</span><br><span class=\"line\">&gt;&gt;&gt;<span class=\"string\">&#x27;Programmer Error: 0xbadc0ffee&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##### 以二进制格式化</span></span><br><span class=\"line\">f&#x27;Programmer Error: &#123;error:#b&#125;&#x27;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"string\">&#x27;Programmer Error: 0b101110101101110000001111111111101110&#x27;</span></span><br></pre></td></tr></table></figure></li>\n<li>变量注释 <code>def my_add(a: int, b: int) -&gt; int:   \\n  return 0</code> 仅仅用来注释，其实传参出参<font color=#9aaa00>并不受控制…</font></li>\n</ol>\n<hr>\n<h1 id=\"魔法方法\"><a href=\"#魔法方法\" class=\"headerlink\" title=\"魔法方法\"></a>魔法方法</h1><p>假设定义类  <code>EmmNe</code>, <code>EmmNe</code>拥有<code>self.aaa</code>与<code>self.aaadict</code>、列表<code>self.aaalist</code> 且<code>__init__</code>允许两个传参</p>\n<p><font color=#feaaaa>__len__</font>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__len__</span>(<span class=\"params\">self</span>):</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">len</span>(self.aaa)</span><br><span class=\"line\"><span class=\"comment\"># 则在外`len`此实例化对象时，会返回这个结果</span></span><br></pre></td></tr></table></figure>\n<p><font color=#feaaaa>__getitem__</font>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span>(<span class=\"params\">self, key</span>)</span></span><br><span class=\"line\"><span class=\"function\">    <span class=\"title\">return</span> <span class=\"title\">self</span>.<span class=\"title\">aaadict</span>[<span class=\"title\">key</span>]</span></span><br><span class=\"line\">en = EmmNe(1, 2)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(en[`])</span><br><span class=\"line\">&gt; <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"comment\">#就像上面那样。 不过还有下面的用法</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span>(<span class=\"params\">self, index</span>):</span></span><br><span class=\"line\">    retrun self.aaalist[index]</span><br><span class=\"line\">w = Emm(<span class=\"number\">1</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> w:</span><br><span class=\"line\">    <span class=\"built_in\">print</span> (i)</span><br><span class=\"line\"><span class=\"comment\"># 则输出列表中内容</span></span><br></pre></td></tr></table></figure>\n<p><font color=#feaaaa>__setitem__</font>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__setitem__</span>(<span class=\"params\">self, key, value</span>)</span></span><br><span class=\"line\">    return self.aaadict[key] = value</span><br><span class=\"line\"><span class=\"comment\"># 拥有此方法，则在外可将实例对象当作字典操作:</span></span><br><span class=\"line\">enp[<span class=\"string\">&#x27;a&#x27;</span>] = <span class=\"string\">&#x27;asd&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># 就像这样</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"collectionss\"><a href=\"#collectionss\" class=\"headerlink\" title=\"collectionss\"></a>collectionss</h3><p>总结一句话： <code>collections</code>出品， 必属精品。<br>马上能想到的 有序字典，还有那啥都是出自此个模块之下。<br>今天用的 计数也是出自此处      反正之后 这个里面能实现的功能，那就放弃手写吧————😓<br>from collections import Counter</p>\n<h3 id=\"Function-Annotations\"><a href=\"#Function-Annotations\" class=\"headerlink\" title=\"Function Annotations\"></a>Function Annotations</h3><p>Annotations are stored in the <strong>annotations</strong> attribute of the function as a dictionary and have no effect on any other part of the function. Parameter annotations are defined by a colon after the parameter name, followed by an expression evaluating to the value of the annotation. Return annotations are defined by a literal -&gt;, followed by an expression, between the parameter list and the colon denoting the end of the def statement. The following example has a positional argument, a keyword argument, and the return value annotated:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt;&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">f</span>(<span class=\"params\">ham: <span class=\"built_in\">str</span>, eggs: <span class=\"built_in\">str</span> = <span class=\"string\">&#x27;eggs&#x27;</span></span>) -&gt; <span class=\"built_in\">str</span>:</span></span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Annotations:&quot;</span>, f.__annotations__)</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Arguments:&quot;</span>, ham, eggs)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ham + <span class=\"string\">&#x27; and &#x27;</span> + eggs</span><br><span class=\"line\"></span><br><span class=\"line\">f(<span class=\"string\">&#x27;spam&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&gt;&gt;&gt; Annotations: &#123;&#x27;ham&#x27;: &lt;class &#x27;str&#x27;&gt;, &#x27;return&#x27;: &lt;class &#x27;str&#x27;&gt;, &#x27;eggs&#x27;: &lt;class &#x27;str&#x27;&gt;&#125;</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Arguments: spam eggs</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"string\">&#x27;spam and eggs&#x27;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"Logger\"><a href=\"#Logger\" class=\"headerlink\" title=\"Logger\"></a>Logger</h3><p>模块名： logging<br>上手容易，功能丰富，性能肯定也好过自己✍<br>另外，懒———</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import sys</span><br><span class=\"line\">import logging</span><br><span class=\"line\">import logging_error</span><br><span class=\"line\"></span><br><span class=\"line\">logger1 &#x3D; logging.getLogger(&#39;loger1&#39;)</span><br><span class=\"line\">logger2 &#x3D; logging.getLogger(&#39;loger2&#39;)</span><br><span class=\"line\">#实例化两个logger,默认名称为：&#96;root&#96;</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\">我居然以为root是程序执行处的名字，以为放到函数中就会显示函数名。emm</span><br><span class=\"line\">所以才有了下面多层函数嵌套…，以及调用外部&#96;import&#96;</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">formatter &#x3D; logging.Formatter(&#39;[%(name)s]%(asctime)s %(levelname)-8s: %(message)s&#39;)</span><br><span class=\"line\">#定义日志格式：</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\">%(name)s Logger的名字</span><br><span class=\"line\">%(levelno)s 数字形式的日志级别</span><br><span class=\"line\">%(levelname)s 文本形式的日志级别</span><br><span class=\"line\">%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</span><br><span class=\"line\">%(filename)s 调用日志输出函数的模块的文件名</span><br><span class=\"line\">%(module)s 调用日志输出函数的模块名|</span><br><span class=\"line\">%(funcName)s 调用日志输出函数的函数名|</span><br><span class=\"line\">%(lineno)d 调用日志输出函数的语句所在的代码行</span><br><span class=\"line\">%(created)f 当前时间，用UNIX标准的表示时间的浮点数表示|</span><br><span class=\"line\">%(relativeCreated)d 输出日志信息时的，自Logger创建以来的毫秒数|</span><br><span class=\"line\">%(asctime)s 字符串形式的当前时间。默认格式是“2003-07-08 16:49:45,896”。逗号后面的是毫秒</span><br><span class=\"line\">%(thread)d 线程ID。可能没有</span><br><span class=\"line\">%(threadName)s 线程名。可能没有</span><br><span class=\"line\">%(process)d 进程ID。可能没有</span><br><span class=\"line\">%(message)s 用户输出的消息</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">fileHandler &#x3D; logging.FileHandler(&#39;loger.log&#39;)</span><br><span class=\"line\">fileHandler.setFormatter(formatter)</span><br><span class=\"line\"></span><br><span class=\"line\">consoleHandler &#x3D; logging.StreamHandler(sys.stdout)</span><br><span class=\"line\">consoleHandler.formatter &#x3D; formatter</span><br><span class=\"line\">#配置文件、终端日志处理器。可以使用不同格式，来区分处理</span><br><span class=\"line\"></span><br><span class=\"line\">logger1.addHandler(fileHandler)</span><br><span class=\"line\">logger2.addHandler(fileHandler)</span><br><span class=\"line\">logger1.addHandler(consoleHandler)</span><br><span class=\"line\">logger2.addHandler(consoleHandler)</span><br><span class=\"line\">#为日志机添加处理器</span><br><span class=\"line\"></span><br><span class=\"line\">logger1.setLevel(logging.INFO)</span><br><span class=\"line\">#logger2.setLevel()</span><br><span class=\"line\">#设置各日志机打印等级</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">logger1.debug(&#39;debugO&#39;)</span><br><span class=\"line\">logger1.info(&#39;info&#39;)</span><br><span class=\"line\">logger2.info(&#39;info&#39;)</span><br><span class=\"line\">logger1.error(&#39;error&#39;)</span><br><span class=\"line\">def warn_msg():</span><br><span class=\"line\">    logger1.warn(&#39;warn msg&#39;)</span><br><span class=\"line\">    warn_msg2()</span><br><span class=\"line\">def warn_msg2():</span><br><span class=\"line\">    logger2.warn(u&#39;warn 信息&#39;)</span><br><span class=\"line\">    logging_error.error_demo()</span><br><span class=\"line\">warn_msg()</span><br></pre></td></tr></table></figure>\n<p>当然，logger还有别的调用方法，不过这应该就够了，<br>具体要怎么实现，就去找官方文档了。<br>预防针： 多种配置方法、日志重复输出:<a href=\"http://python.jobbole.com/86887/\">见此</a></p>\n<h2 id=\"lambda函数\"><a href=\"#lambda函数\" class=\"headerlink\" title=\"lambda函数\"></a>lambda函数</h2><h3 id=\"排序\"><a href=\"#排序\" class=\"headerlink\" title=\"排序\"></a>排序</h3><figure class=\"highlight py\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">aaa</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>[&#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">1</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">3</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">2</span>&#125;]</span><br><span class=\"line\"><span class=\"built_in\">sorted</span>(aaa, key = <span class=\"keyword\">lambda</span> x: x[<span class=\"string\">&quot;time&quot;</span>])</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>[&#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">1</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">2</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">3</span>&#125;]</span><br><span class=\"line\"><span class=\"built_in\">sorted</span>(aaa, key = <span class=\"keyword\">lambda</span> x: x[<span class=\"string\">&quot;time&quot;</span>], reverse=<span class=\"literal\">True</span>)</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>[&#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">3</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">2</span>&#125;, &#123;<span class=\"string\">&#x27;time&#x27;</span>: <span class=\"number\">1</span>&#125;]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Mock\"><a href=\"#Mock\" class=\"headerlink\" title=\"Mock\"></a>Mock</h2><p>使用: unittest</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mock.patch.<span class=\"built_in\">object</span>: Mock <span class=\"comment\"># 一个类, 后接方法</span></span><br><span class=\"line\">mock.patch: Mock <span class=\"comment\"># 一个方法, 按路径</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@mock.patch(<span class=\"params\"><span class=\"string\">&quot;databases.wx_service.get_user_base_info&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"meta\">@mock.patch.object(<span class=\"params\">wx_service.WeChat_OAP, <span class=\"string\">&quot;send_template_msg&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">test_create_weawarning</span>(<span class=\"params\">self, mock_send_template_msg, mock_get_user_base_info</span>):</span></span><br><span class=\"line\">    <span class=\"comment\"># 装饰器生效从内到外, 传入参数顺序, 从左到右</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\">    mock_send_template_msg.return_value = <span class=\"string\">&#x27;&#x27;</span>/&#123;&#125;/[]/() 皆可  设定mock返回值</span><br><span class=\"line\">    mock_get_user_base_info.side_effect = [<span class=\"string\">&#x27;&#x27;</span>/&#123;&#125;/[]/(), <span class=\"string\">&#x27;&#x27;</span>/&#123;&#125;/[]/()] 设定每次调用mock函数依次返回返回值</span><br></pre></td></tr></table></figure>\n\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckp2ml9az0005u3yqg0onb6ws","category_id":"ckp2ml9an0002u3yq9w6n3mma","_id":"ckp2ml9bl000du3yq2ckmcmf2"},{"post_id":"ckp2ml9a10000u3yqh2vcclf6","category_id":"ckp2ml9an0002u3yq9w6n3mma","_id":"ckp2ml9bt000hu3yq6m6e6oue"},{"post_id":"ckp2ml9ah0001u3yq3i6z1u62","category_id":"ckp2ml9an0002u3yq9w6n3mma","_id":"ckp2ml9d40015u3yqhuyh8w1e"},{"post_id":"ckp2ml9ah0001u3yq3i6z1u62","category_id":"ckp2ml9ck000uu3yq4bqxhmar","_id":"ckp2ml9dg0018u3yq1x14bxz8"},{"post_id":"ckp2ml9b30006u3yqb4954c3t","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9er001su3yq84loe56b"},{"post_id":"ckp2ml9b30006u3yqb4954c3t","category_id":"ckp2ml9ed001mu3yq9rqs08px","_id":"ckp2ml9ew001vu3yq8lct7u9c"},{"post_id":"ckp2ml9be000au3yq0f9jfe4z","category_id":"ckp2ml9c9000pu3yq3e0whdt9","_id":"ckp2ml9f50024u3yq8dga8o8b"},{"post_id":"ckp2ml9be000au3yq0f9jfe4z","category_id":"ckp2ml9ex001xu3yq10qseq2e","_id":"ckp2ml9f70027u3yq2tec7no0"},{"post_id":"ckp2ml9bj000cu3yqg6c0e8vr","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9fq002ou3yq7r5p921k"},{"post_id":"ckp2ml9bj000cu3yqg6c0e8vr","category_id":"ckp2ml9fj002hu3yqfhpx9yqm","_id":"ckp2ml9fs002qu3yqbpc97hhc"},{"post_id":"ckp2ml9bp000gu3yq19vg1j46","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9gb002xu3yq4d0b6h2c"},{"post_id":"ckp2ml9bp000gu3yq19vg1j46","category_id":"ckp2ml9d30014u3yqfs21ch2l","_id":"ckp2ml9ge0030u3yq4xe58592"},{"post_id":"ckp2ml9bp000gu3yq19vg1j46","category_id":"ckp2ml9ft002ru3yqhvstcll6","_id":"ckp2ml9gh0033u3yqhjp8dcrt"},{"post_id":"ckp2ml9av0004u3yq08d2bnee","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9gs003bu3yq21mu3goo"},{"post_id":"ckp2ml9av0004u3yq08d2bnee","category_id":"ckp2ml9dp001cu3yq44zn9ybw","_id":"ckp2ml9gu003du3yq45a05d9r"},{"post_id":"ckp2ml9av0004u3yq08d2bnee","category_id":"ckp2ml9gf0032u3yq9il86qzo","_id":"ckp2ml9gv003fu3yq8v2q4nq5"},{"post_id":"ckp2ml9bw000iu3yq7icncge8","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9gz003ju3yq0gpbc16n"},{"post_id":"ckp2ml9bw000iu3yq7icncge8","category_id":"ckp2ml9e2001gu3yqcj0mcqn1","_id":"ckp2ml9h0003lu3yq7eymh168"},{"post_id":"ckp2ml9bw000iu3yq7icncge8","category_id":"ckp2ml9gq003au3yq75237o1t","_id":"ckp2ml9h2003nu3yq6cdr9big"},{"post_id":"ckp2ml9c3000lu3yqcm6b1lh7","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9h4003pu3yq7nkrar44"},{"post_id":"ckp2ml9c3000lu3yqcm6b1lh7","category_id":"ckp2ml9e9001ju3yqe12x2pdm","_id":"ckp2ml9h6003ru3yqgqdvax6m"},{"post_id":"ckp2ml9c3000lu3yqcm6b1lh7","category_id":"ckp2ml9gw003gu3yqgnefeqx6","_id":"ckp2ml9h8003uu3yq432payod"},{"post_id":"ckp2ml9c6000nu3yq0vff92yv","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9h9003xu3yq6n8nchz5"},{"post_id":"ckp2ml9c6000nu3yq0vff92yv","category_id":"ckp2ml9em001qu3yq9izjhedh","_id":"ckp2ml9hb0040u3yqbu52atf6"},{"post_id":"ckp2ml9c6000nu3yq0vff92yv","category_id":"ckp2ml9gz003ku3yq9xltgve3","_id":"ckp2ml9hc0042u3yq0d1idlt2"},{"post_id":"ckp2ml9cd000ru3yq7neu7i92","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9hf0044u3yqhc9z5gvy"},{"post_id":"ckp2ml9cd000ru3yq7neu7i92","category_id":"ckp2ml9em001qu3yq9izjhedh","_id":"ckp2ml9hh0047u3yqeayk1l2c"},{"post_id":"ckp2ml9cd000ru3yq7neu7i92","category_id":"ckp2ml9h3003ou3yqgpj74a18","_id":"ckp2ml9hk0048u3yq884h2s4v"},{"post_id":"ckp2ml9cg000tu3yqb6tnaafz","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9hm004au3yq3zs77i7w"},{"post_id":"ckp2ml9cg000tu3yqb6tnaafz","category_id":"ckp2ml9f10020u3yqesek3ggt","_id":"ckp2ml9hn004bu3yqcm332o94"},{"post_id":"ckp2ml9cg000tu3yqb6tnaafz","category_id":"ckp2ml9h7003tu3yqaykaf67c","_id":"ckp2ml9hp004du3yqd42d27ez"},{"post_id":"ckp2ml9cn000wu3yqfz8vgjk8","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9hq004eu3yq6n7i4aiz"},{"post_id":"ckp2ml9cn000wu3yqfz8vgjk8","category_id":"ckp2ml9f50025u3yq4euw1qfn","_id":"ckp2ml9hs004gu3yqa9733bfu"},{"post_id":"ckp2ml9cn000wu3yqfz8vgjk8","category_id":"ckp2ml9ha003zu3yq38zk89j3","_id":"ckp2ml9hu004hu3yqe1sad5ak"},{"post_id":"ckp2ml9cr000yu3yqe3fl0fby","category_id":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9hx004ju3yqej7s5sgj"},{"post_id":"ckp2ml9cr000yu3yqe3fl0fby","category_id":"ckp2ml9hf0045u3yq3y3ja53h","_id":"ckp2ml9hz004ku3yqel321j45"},{"post_id":"ckp2ml9cv0010u3yqhqur6n5c","category_id":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9i2004mu3yq18740ebs"},{"post_id":"ckp2ml9cv0010u3yqhqur6n5c","category_id":"ckp2ml9hf0045u3yq3y3ja53h","_id":"ckp2ml9i3004nu3yqeq9l1qc1"},{"post_id":"ckp2ml9d00013u3yqa72n2bnu","category_id":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9i3004ou3yq0mnqekpw"},{"post_id":"ckp2ml9d00013u3yqa72n2bnu","category_id":"ckp2ml9hn004cu3yq4nh9292c","_id":"ckp2ml9i5004qu3yqf2omdg4j"},{"post_id":"ckp2ml9d50016u3yq7ygz7m1q","category_id":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9ia004uu3yqfk9x0p5o"},{"post_id":"ckp2ml9d50016u3yq7ygz7m1q","category_id":"ckp2ml9hq004fu3yq6d6418ob","_id":"ckp2ml9ib004wu3yq8ym8gt9y"},{"post_id":"ckp2ml9d50016u3yq7ygz7m1q","category_id":"ckp2ml9i7004su3yq4tx77kne","_id":"ckp2ml9ic004xu3yq0vo1ex76"},{"post_id":"ckp2ml9dh0019u3yq8oz37rbf","category_id":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9id004zu3yq6g8lexhx"},{"post_id":"ckp2ml9dh0019u3yq8oz37rbf","category_id":"ckp2ml9hn004cu3yq4nh9292c","_id":"ckp2ml9ie0050u3yqb28za5i4"},{"post_id":"ckp2ml9dh0019u3yq8oz37rbf","category_id":"ckp2ml9i8004tu3yq3npyfwq1","_id":"ckp2ml9ig0052u3yq9p8g01v7"},{"post_id":"ckp2ml9dm001bu3yqbzmfe4ou","category_id":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9ig0053u3yq99d328tq"},{"post_id":"ckp2ml9dm001bu3yqbzmfe4ou","category_id":"ckp2ml9i1004lu3yq764cbbnw","_id":"ckp2ml9ih0054u3yq2z0pbwl6"},{"post_id":"ckp2ml9dm001bu3yqbzmfe4ou","category_id":"ckp2ml9ia004vu3yqhul8bsp5","_id":"ckp2ml9ih0055u3yq2mrffyfy"},{"post_id":"ckp2ml9dt001eu3yq9c0ae7s0","category_id":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9ik0056u3yq466f7kx0"},{"post_id":"ckp2ml9dt001eu3yq9c0ae7s0","category_id":"ckp2ml9i3004pu3yqfibj3mzh","_id":"ckp2ml9il0057u3yq7lkpf01j"},{"post_id":"ckp2ml9dt001eu3yq9c0ae7s0","category_id":"ckp2ml9ic004yu3yq122dcgfu","_id":"ckp2ml9il0058u3yq1cv7efm2"},{"post_id":"ckp2ml9dz001fu3yq03isaq4a","category_id":"ckp2ml9f90029u3yqe1396mtw","_id":"ckp2ml9il0059u3yqdsla7ryx"},{"post_id":"ckp2ml9dz001fu3yq03isaq4a","category_id":"ckp2ml9i5004ru3yq6syac0ub","_id":"ckp2ml9im005au3yqhcf00u6h"},{"post_id":"ckp2ml9dz001fu3yq03isaq4a","category_id":"ckp2ml9if0051u3yqaenacz7n","_id":"ckp2ml9im005bu3yq9ftl08k7"},{"post_id":"ckp2ml9jo005cu3yq76lx9yna","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9kf005pu3yqgmh88pbp"},{"post_id":"ckp2ml9jo005cu3yq76lx9yna","category_id":"ckp2ml9jy005fu3yq0pa19m7r","_id":"ckp2ml9kh005ru3yqbyjx7fk5"},{"post_id":"ckp2ml9jo005cu3yq76lx9yna","category_id":"ckp2ml9k5005ju3yq73kn1wds","_id":"ckp2ml9ki005su3yq0vg31e1i"},{"post_id":"ckp2ml9js005du3yqa1uyd6tw","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9kj005tu3yq3b8ohda1"},{"post_id":"ckp2ml9js005du3yqa1uyd6tw","category_id":"ckp2ml9k2005hu3yqhyjufkq2","_id":"ckp2ml9kk005vu3yq9lie6e3j"},{"post_id":"ckp2ml9js005du3yqa1uyd6tw","category_id":"ckp2ml9kc005nu3yqbtmag8sb","_id":"ckp2ml9kk005xu3yq2h1i1lb4"},{"post_id":"ckp2ml9kv005zu3yqgm5875ka","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9lj0068u3yqcjdb2llo"},{"post_id":"ckp2ml9kv005zu3yqgm5875ka","category_id":"ckp2ml9l50063u3yqe4r6chfp","_id":"ckp2ml9ln006bu3yqh8gy2wvj"},{"post_id":"ckp2ml9ky0060u3yqcym51g86","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9m3006iu3yqagxf8s7y"},{"post_id":"ckp2ml9ky0060u3yqcym51g86","category_id":"ckp2ml9lc0065u3yqgh6n4tgi","_id":"ckp2ml9m5006lu3yq2ngv1ojb"},{"post_id":"ckp2ml9ky0060u3yqcym51g86","category_id":"ckp2ml9lq006du3yqgxg17ylb","_id":"ckp2ml9m8006nu3yq57vwa3sf"},{"post_id":"ckp2ml9l20062u3yq000bax23","category_id":"ckp2ml9ll006au3yq9cqp2pjk","_id":"ckp2ml9mc006pu3yqfx5lavia"},{"post_id":"ckp2ml9l20062u3yq000bax23","category_id":"ckp2ml9lu006fu3yqc635adyw","_id":"ckp2ml9mg006qu3yqaenw46m1"},{"post_id":"ckp2ml9mx006yu3yqc0886uy8","category_id":"ckp2ml9bl000eu3yq2ubt0u8q","_id":"ckp2ml9n30071u3yqcjvo8rzy"},{"post_id":"ckp2ml9mx006yu3yqc0886uy8","category_id":"ckp2ml9lc0065u3yqgh6n4tgi","_id":"ckp2ml9n30072u3yqcwut9208"},{"post_id":"ckp2ml9mx006yu3yqc0886uy8","category_id":"ckp2ml9lq006du3yqgxg17ylb","_id":"ckp2ml9n40073u3yq42zwb6c2"}],"PostTag":[{"post_id":"ckp2ml9az0005u3yqg0onb6ws","tag_id":"ckp2ml9at0003u3yq505tcvhh","_id":"ckp2ml9bd0009u3yq4blv17v0"},{"post_id":"ckp2ml9a10000u3yqh2vcclf6","tag_id":"ckp2ml9at0003u3yq505tcvhh","_id":"ckp2ml9bi000bu3yq6byddm35"},{"post_id":"ckp2ml9ah0001u3yq3i6z1u62","tag_id":"ckp2ml9at0003u3yq505tcvhh","_id":"ckp2ml9c5000mu3yq4zvh1ka6"},{"post_id":"ckp2ml9ah0001u3yq3i6z1u62","tag_id":"ckp2ml9bn000fu3yq3i5y70p8","_id":"ckp2ml9c9000ou3yqbnwqc9jr"},{"post_id":"ckp2ml9av0004u3yq08d2bnee","tag_id":"ckp2ml9c0000ku3yqclz75inr","_id":"ckp2ml9cf000su3yqfpm16hgh"},{"post_id":"ckp2ml9be000au3yq0f9jfe4z","tag_id":"ckp2ml9cb000qu3yq28915n9p","_id":"ckp2ml9cq000xu3yq7cjd660y"},{"post_id":"ckp2ml9bj000cu3yqg6c0e8vr","tag_id":"ckp2ml9cl000vu3yqg1ijd4v9","_id":"ckp2ml9cz0012u3yq4l2iau6e"},{"post_id":"ckp2ml9bp000gu3yq19vg1j46","tag_id":"ckp2ml9cx0011u3yqenfof4v9","_id":"ckp2ml9dk001au3yqhkor6dg1"},{"post_id":"ckp2ml9bw000iu3yq7icncge8","tag_id":"ckp2ml9df0017u3yqb54e3v1s","_id":"ckp2ml9e8001iu3yq2cauaevf"},{"post_id":"ckp2ml9bw000iu3yq7icncge8","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9ea001ku3yqexp163hh"},{"post_id":"ckp2ml9c3000lu3yqcm6b1lh7","tag_id":"ckp2ml9e4001hu3yq2b35bcvw","_id":"ckp2ml9ek001ou3yqe5x4hybm"},{"post_id":"ckp2ml9c3000lu3yqcm6b1lh7","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9em001pu3yqbw9ja7uq"},{"post_id":"ckp2ml9c6000nu3yq0vff92yv","tag_id":"ckp2ml9ef001nu3yq79nobru2","_id":"ckp2ml9ew001wu3yq1usf02w1"},{"post_id":"ckp2ml9c6000nu3yq0vff92yv","tag_id":"ckp2ml9eo001ru3yqg62iet4o","_id":"ckp2ml9ey001yu3yqdpan7i9d"},{"post_id":"ckp2ml9cd000ru3yq7neu7i92","tag_id":"ckp2ml9ef001nu3yq79nobru2","_id":"ckp2ml9f30022u3yq07c31r83"},{"post_id":"ckp2ml9cd000ru3yq7neu7i92","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9f40023u3yq7skz7gof"},{"post_id":"ckp2ml9cg000tu3yqb6tnaafz","tag_id":"ckp2ml9f20021u3yqexw59j1n","_id":"ckp2ml9f80028u3yqdyfc58gq"},{"post_id":"ckp2ml9cn000wu3yqfz8vgjk8","tag_id":"ckp2ml9f60026u3yqh5057m4l","_id":"ckp2ml9fe002du3yqhk2230oh"},{"post_id":"ckp2ml9cn000wu3yqfz8vgjk8","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9ff002eu3yq3um0cgme"},{"post_id":"ckp2ml9d00013u3yqa72n2bnu","tag_id":"ckp2ml9fc002bu3yq8ipgcbg9","_id":"ckp2ml9fl002ju3yq9mfy8cii"},{"post_id":"ckp2ml9d00013u3yqa72n2bnu","tag_id":"ckp2ml9fg002gu3yq5lobbib6","_id":"ckp2ml9fm002ku3yq4ylmbvoc"},{"post_id":"ckp2ml9d50016u3yq7ygz7m1q","tag_id":"ckp2ml9fk002iu3yqe2be8cf7","_id":"ckp2ml9g6002vu3yqbjhc0gpo"},{"post_id":"ckp2ml9d50016u3yq7ygz7m1q","tag_id":"ckp2ml9fn002mu3yq9r315llk","_id":"ckp2ml9gc002yu3yqhgx3de1f"},{"post_id":"ckp2ml9d50016u3yq7ygz7m1q","tag_id":"ckp2ml9fr002pu3yq9gzpcfo6","_id":"ckp2ml9gf0031u3yqhtj39fgx"},{"post_id":"ckp2ml9d50016u3yq7ygz7m1q","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9gh0034u3yq253u6ygs"},{"post_id":"ckp2ml9dh0019u3yq8oz37rbf","tag_id":"ckp2ml9fc002bu3yq8ipgcbg9","_id":"ckp2ml9gk0036u3yq3hjhda03"},{"post_id":"ckp2ml9dh0019u3yq8oz37rbf","tag_id":"ckp2ml9gd002zu3yqdt3gaj0d","_id":"ckp2ml9gm0038u3yqeiq90idi"},{"post_id":"ckp2ml9dm001bu3yqbzmfe4ou","tag_id":"ckp2ml9gi0035u3yqgo722qeb","_id":"ckp2ml9gv003eu3yq2vgv90y9"},{"post_id":"ckp2ml9dm001bu3yqbzmfe4ou","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9gx003hu3yq13vhgax7"},{"post_id":"ckp2ml9dt001eu3yq9c0ae7s0","tag_id":"ckp2ml9gt003cu3yqfdf2ecs3","_id":"ckp2ml9h6003su3yq1sia32b2"},{"post_id":"ckp2ml9dt001eu3yq9c0ae7s0","tag_id":"ckp2ml9gx003iu3yq4tacg8lu","_id":"ckp2ml9h8003vu3yq69y7ergq"},{"post_id":"ckp2ml9dt001eu3yq9c0ae7s0","tag_id":"ckp2ml9h1003mu3yq30j5a9xp","_id":"ckp2ml9ha003yu3yq6gnlbr4s"},{"post_id":"ckp2ml9dt001eu3yq9c0ae7s0","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9hc0041u3yqdgq1gx38"},{"post_id":"ckp2ml9dz001fu3yq03isaq4a","tag_id":"ckp2ml9h4003qu3yqdp8o1xkb","_id":"ckp2ml9he0043u3yqhlrvhuag"},{"post_id":"ckp2ml9dz001fu3yq03isaq4a","tag_id":"ckp2ml9h8003wu3yq924zcni6","_id":"ckp2ml9hg0046u3yqbnqvc226"},{"post_id":"ckp2ml9jo005cu3yq76lx9yna","tag_id":"ckp2ml9jw005eu3yq57mn8x43","_id":"ckp2ml9k9005ku3yqdyh526rk"},{"post_id":"ckp2ml9jo005cu3yq76lx9yna","tag_id":"ckp2ml9k0005gu3yq6efwgjgj","_id":"ckp2ml9ka005lu3yq4aj0hta0"},{"post_id":"ckp2ml9jo005cu3yq76lx9yna","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9ke005ou3yq2u0q77p4"},{"post_id":"ckp2ml9js005du3yqa1uyd6tw","tag_id":"ckp2ml9k4005iu3yqdarqggs9","_id":"ckp2ml9kj005uu3yq4za50iln"},{"post_id":"ckp2ml9js005du3yqa1uyd6tw","tag_id":"ckp2ml9ka005mu3yq91ewa710","_id":"ckp2ml9kk005wu3yq5n3i07do"},{"post_id":"ckp2ml9js005du3yqa1uyd6tw","tag_id":"ckp2ml9kg005qu3yqdg5z0gm5","_id":"ckp2ml9kk005yu3yqasjneu4t"},{"post_id":"ckp2ml9kv005zu3yqgm5875ka","tag_id":"ckp2ml9l10061u3yq17zw9q18","_id":"ckp2ml9le0066u3yqe1d6h5zl"},{"post_id":"ckp2ml9kv005zu3yqgm5875ka","tag_id":"ckp2ml9k4005iu3yqdarqggs9","_id":"ckp2ml9li0067u3yq23cm40zj"},{"post_id":"ckp2ml9ky0060u3yqcym51g86","tag_id":"ckp2ml9lb0064u3yq4bg9h9xa","_id":"ckp2ml9lx006gu3yq8u0efed5"},{"post_id":"ckp2ml9ky0060u3yqcym51g86","tag_id":"ckp2ml9lj0069u3yqa8yohzpf","_id":"ckp2ml9m2006hu3yq9das6ae4"},{"post_id":"ckp2ml9ky0060u3yqcym51g86","tag_id":"ckp2ml9lo006cu3yq2jy55r2u","_id":"ckp2ml9m5006ku3yqcxykg0fq"},{"post_id":"ckp2ml9ky0060u3yqcym51g86","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9m5006mu3yq1u4zcda8"},{"post_id":"ckp2ml9l20062u3yq000bax23","tag_id":"ckp2ml9ls006eu3yq4vsu1o8b","_id":"ckp2ml9mk006tu3yqegwwe8cs"},{"post_id":"ckp2ml9l20062u3yq000bax23","tag_id":"ckp2ml9m3006ju3yq0bmr1l19","_id":"ckp2ml9ml006uu3yq44g5akae"},{"post_id":"ckp2ml9l20062u3yq000bax23","tag_id":"ckp2ml9mb006ou3yq6tfe83wl","_id":"ckp2ml9ml006vu3yqfrbyax97"},{"post_id":"ckp2ml9l20062u3yq000bax23","tag_id":"ckp2ml9mg006ru3yq95zmb8i9","_id":"ckp2ml9mm006wu3yq33a3f9ee"},{"post_id":"ckp2ml9l20062u3yq000bax23","tag_id":"ckp2ml9mi006su3yq7qwm7zlt","_id":"ckp2ml9mm006xu3yqenxcfxu7"},{"post_id":"ckp2ml9mx006yu3yqc0886uy8","tag_id":"ckp2ml9k4005iu3yqdarqggs9","_id":"ckp2ml9n2006zu3yq75f8et9b"},{"post_id":"ckp2ml9mx006yu3yqc0886uy8","tag_id":"ckp2ml9ds001du3yqatzbe47p","_id":"ckp2ml9n30070u3yq73d16056"}],"Tag":[{"name":"杂谈","_id":"ckp2ml9at0003u3yq505tcvhh"},{"name":"更新说明","_id":"ckp2ml9bn000fu3yq3i5y70p8"},{"name":"Japanese","_id":"ckp2ml9c0000ku3yqclz75inr"},{"name":"Sony XZ1 Compact","_id":"ckp2ml9cb000qu3yq28915n9p"},{"name":"经验笔记","_id":"ckp2ml9cl000vu3yqg1ijd4v9"},{"name":"数据格式","_id":"ckp2ml9cx0011u3yqenfof4v9"},{"name":"ue4","_id":"ckp2ml9df0017u3yqb54e3v1s"},{"name":"learning","_id":"ckp2ml9ds001du3yqatzbe47p"},{"name":"docker","_id":"ckp2ml9e4001hu3yq2b35bcvw"},{"name":"golang","_id":"ckp2ml9ef001nu3yq79nobru2"},{"name":"expansion","_id":"ckp2ml9eo001ru3yqg62iet4o"},{"name":"java, springboot, mybatis, maven, learning","_id":"ckp2ml9f20021u3yqexw59j1n"},{"name":"Linux","_id":"ckp2ml9f60026u3yqh5057m4l"},{"name":"win","_id":"ckp2ml9fc002bu3yq8ipgcbg9"},{"name":"git","_id":"ckp2ml9fg002gu3yq5lobbib6"},{"name":"debuger","_id":"ckp2ml9fk002iu3yqe2be8cf7"},{"name":"pdb","_id":"ckp2ml9fn002mu3yq9r315llk"},{"name":"gdb","_id":"ckp2ml9fr002pu3yq9gzpcfo6"},{"name":"rpc","_id":"ckp2ml9gd002zu3yqdt3gaj0d"},{"name":"markdown","_id":"ckp2ml9gi0035u3yqgo722qeb"},{"name":"vim","_id":"ckp2ml9gt003cu3yqfdf2ecs3"},{"name":"more","_id":"ckp2ml9gx003iu3yq4tacg8lu"},{"name":"less","_id":"ckp2ml9h1003mu3yq30j5a9xp"},{"name":"nginx","_id":"ckp2ml9h4003qu3yqdp8o1xkb"},{"name":"keepalived","_id":"ckp2ml9h8003wu3yq924zcni6"},{"name":"mongo","_id":"ckp2ml9jw005eu3yq57mn8x43"},{"name":"mysql","_id":"ckp2ml9k0005gu3yq6efwgjgj"},{"name":"python","_id":"ckp2ml9k4005iu3yqdarqggs9"},{"name":"pyqt","_id":"ckp2ml9ka005mu3yq91ewa710"},{"name":"Gui","_id":"ckp2ml9kg005qu3yqdg5z0gm5"},{"name":"ml","_id":"ckp2ml9l10061u3yq17zw9q18"},{"name":"Vn.Py","_id":"ckp2ml9lb0064u3yq4bg9h9xa"},{"name":"gui","_id":"ckp2ml9lj0069u3yqa8yohzpf"},{"name":"socket","_id":"ckp2ml9lo006cu3yq2jy55r2u"},{"name":"django","_id":"ckp2ml9ls006eu3yq4vsu1o8b"},{"name":"missjava","_id":"ckp2ml9m3006ju3yq0bmr1l19"},{"name":"vue","_id":"ckp2ml9mb006ou3yq6tfe83wl"},{"name":"apache","_id":"ckp2ml9mg006ru3yq95zmb8i9"},{"name":"ajax","_id":"ckp2ml9mi006su3yq7qwm7zlt"}]}}